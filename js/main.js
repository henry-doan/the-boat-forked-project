var requirejs, require, define;
! function(global) {
    function isFunction(a) {
        return "[object Function]" === ostring.call(a)
    }

    function isArray(a) {
        return "[object Array]" === ostring.call(a)
    }

    function each(a, b) {
        if (a) {
            var c;
            for (c = 0; c < a.length && (!a[c] || !b(a[c], c, a)); c += 1);
        }
    }

    function eachReverse(a, b) {
        if (a) {
            var c;
            for (c = a.length - 1; c > -1 && (!a[c] || !b(a[c], c, a)); c -= 1);
        }
    }

    function hasProp(a, b) {
        return hasOwn.call(a, b)
    }

    function getOwn(a, b) {
        return hasProp(a, b) && a[b]
    }

    function eachProp(a, b) {
        var c;
        for (c in a)
            if (hasProp(a, c) && b(a[c], c)) break
    }

    function mixin(a, b, c, d) {
        return b && eachProp(b, function(b, e) {
            (c || !hasProp(a, e)) && (!d || "object" != typeof b || !b || isArray(b) || isFunction(b) || b instanceof RegExp ? a[e] = b : (a[e] || (a[e] = {}), mixin(a[e], b, c, d)))
        }), a
    }

    function bind(a, b) {
        return function() {
            return b.apply(a, arguments)
        }
    }

    function scripts() {
        return document.getElementsByTagName("script")
    }

    function defaultOnError(a) {
        throw a
    }

    function getGlobal(a) {
        if (!a) return a;
        var b = global;
        return each(a.split("."), function(a) {
            b = b[a]
        }), b
    }

    function makeError(a, b, c, d) {
        var e = new Error(b + "\nhttp://requirejs.org/docs/errors.html#" + a);
        return e.requireType = a, e.requireModules = d, c && (e.originalError = c), e
    }

    function newContext(a) {
        function b(a) {
            var b, c;
            for (b = 0; b < a.length; b++)
                if (c = a[b], "." === c) a.splice(b, 1), b -= 1;
                else if (".." === c) {
                if (0 === b || 1 == b && ".." === a[2] || ".." === a[b - 1]) continue;
                b > 0 && (a.splice(b - 1, 2), b -= 2)
            }
        }

        function c(a, c, d) {
            var e, f, g, h, i, j, k, l, m, n, o, p, q = c && c.split("/"),
                r = x.map,
                s = r && r["*"];
            if (a && (a = a.split("/"), k = a.length - 1, x.nodeIdCompat && jsSuffixRegExp.test(a[k]) && (a[k] = a[k].replace(jsSuffixRegExp, "")), "." === a[0].charAt(0) && q && (p = q.slice(0, q.length - 1), a = p.concat(a)), b(a), a = a.join("/")), d && r && (q || s)) {
                g = a.split("/");
                a: for (h = g.length; h > 0; h -= 1) {
                    if (j = g.slice(0, h).join("/"), q)
                        for (i = q.length; i > 0; i -= 1)
                            if (f = getOwn(r, q.slice(0, i).join("/")), f && (f = getOwn(f, j))) {
                                l = f, m = h;
                                break a
                            }!n && s && getOwn(s, j) && (n = getOwn(s, j), o = h)
                }!l && n && (l = n, m = o), l && (g.splice(0, m, l), a = g.join("/"))
            }
            return e = getOwn(x.pkgs, a), e ? e : a
        }

        function d(a) {
            isBrowser && each(scripts(), function(b) {
                return b.getAttribute("data-requiremodule") === a && b.getAttribute("data-requirecontext") === u.contextName ? (b.parentNode.removeChild(b), !0) : void 0
            })
        }

        function e(a) {
            var b = getOwn(x.paths, a);
            return b && isArray(b) && b.length > 1 ? (b.shift(), u.require.undef(a), u.makeRequire(null, {
                skipMap: !0
            })([a]), !0) : void 0
        }

        function f(a) {
            var b, c = a ? a.indexOf("!") : -1;
            return c > -1 && (b = a.substring(0, c), a = a.substring(c + 1, a.length)), [b, a]
        }

        function g(a, b, d, e) {
            var g, h, i, j, k = null,
                l = b ? b.name : null,
                m = a,
                n = !0,
                o = "";
            return a || (n = !1, a = "_@r" + (F += 1)), j = f(a), k = j[0], a = j[1], k && (k = c(k, l, e), h = getOwn(C, k)), a && (k ? o = h && h.normalize ? h.normalize(a, function(a) {
                return c(a, l, e)
            }) : -1 === a.indexOf("!") ? c(a, l, e) : a : (o = c(a, l, e), j = f(o), k = j[0], o = j[1], d = !0, g = u.nameToUrl(o))), i = !k || h || d ? "" : "_unnormalized" + (G += 1), {
                prefix: k,
                name: o,
                parentMap: b,
                unnormalized: !!i,
                url: g,
                originalName: m,
                isDefine: n,
                id: (k ? k + "!" + o : o) + i
            }
        }

        function h(a) {
            var b = a.id,
                c = getOwn(y, b);
            return c || (c = y[b] = new u.Module(a)), c
        }

        function i(a, b, c) {
            var d = a.id,
                e = getOwn(y, d);
            !hasProp(C, d) || e && !e.defineEmitComplete ? (e = h(a), e.error && "error" === b ? c(e.error) : e.on(b, c)) : "defined" === b && c(C[d])
        }

        function j(a, b) {
            var c = a.requireModules,
                d = !1;
            b ? b(a) : (each(c, function(b) {
                var c = getOwn(y, b);
                c && (c.error = a, c.events.error && (d = !0, c.emit("error", a)))
            }), d || req.onError(a))
        }

        function k() {
            globalDefQueue.length && (apsp.apply(B, [B.length, 0].concat(globalDefQueue)), globalDefQueue = [])
        }

        function l(a) {
            delete y[a], delete z[a]
        }

        function m(a, b, c) {
            var d = a.map.id;
            a.error ? a.emit("error", a.error) : (b[d] = !0, each(a.depMaps, function(d, e) {
                var f = d.id,
                    g = getOwn(y, f);
                !g || a.depMatched[e] || c[f] || (getOwn(b, f) ? (a.defineDep(e, C[f]), a.check()) : m(g, b, c))
            }), c[d] = !0)
        }

        function n() {
            var a, b, c = 1e3 * x.waitSeconds,
                f = c && u.startTime + c < (new Date).getTime(),
                g = [],
                h = [],
                i = !1,
                k = !0;
            if (!s) {
                if (s = !0, eachProp(z, function(a) {
                        var c = a.map,
                            j = c.id;
                        if (a.enabled && (c.isDefine || h.push(a), !a.error))
                            if (!a.inited && f) e(j) ? (b = !0, i = !0) : (g.push(j), d(j));
                            else if (!a.inited && a.fetched && c.isDefine && (i = !0, !c.prefix)) return k = !1
                    }), f && g.length) return a = makeError("timeout", "Load timeout for modules: " + g, null, g), a.contextName = u.contextName, j(a);
                k && each(h, function(a) {
                    m(a, {}, {})
                }), f && !b || !i || !isBrowser && !isWebWorker || w || (w = setTimeout(function() {
                    w = 0, n()
                }, 50)), s = !1
            }
        }

        function o(a) {
            hasProp(C, a[0]) || h(g(a[0], null, !0)).init(a[1], a[2])
        }

        function p(a, b, c, d) {
            a.detachEvent && !isOpera ? d && a.detachEvent(d, b) : a.removeEventListener(c, b, !1)
        }

        function q(a) {
            var b = a.currentTarget || a.srcElement;
            return p(b, u.onScriptLoad, "load", "onreadystatechange"), p(b, u.onScriptError, "error"), {
                node: b,
                id: b && b.getAttribute("data-requiremodule")
            }
        }

        function r() {
            var a;
            for (k(); B.length;) {
                if (a = B.shift(), null === a[0]) return j(makeError("mismatch", "Mismatched anonymous define() module: " + a[a.length - 1]));
                o(a)
            }
        }
        var s, t, u, v, w, x = {
                waitSeconds: 7,
                baseUrl: "./",
                paths: {},
                bundles: {},
                pkgs: {},
                shim: {},
                config: {}
            },
            y = {},
            z = {},
            A = {},
            B = [],
            C = {},
            D = {},
            E = {},
            F = 1,
            G = 1;
        return v = {
            require: function(a) {
                return a.require ? a.require : a.require = u.makeRequire(a.map)
            },
            exports: function(a) {
                return a.usingExports = !0, a.map.isDefine ? a.exports ? C[a.map.id] = a.exports : a.exports = C[a.map.id] = {} : void 0
            },
            module: function(a) {
                return a.module ? a.module : a.module = {
                    id: a.map.id,
                    uri: a.map.url,
                    config: function() {
                        return getOwn(x.config, a.map.id) || {}
                    },
                    exports: a.exports || (a.exports = {})
                }
            }
        }, t = function(a) {
            this.events = getOwn(A, a.id) || {}, this.map = a, this.shim = getOwn(x.shim, a.id), this.depExports = [], this.depMaps = [], this.depMatched = [], this.pluginMaps = {}, this.depCount = 0
        }, t.prototype = {
            init: function(a, b, c, d) {
                d = d || {}, this.inited || (this.factory = b, c ? this.on("error", c) : this.events.error && (c = bind(this, function(a) {
                    this.emit("error", a)
                })), this.depMaps = a && a.slice(0), this.errback = c, this.inited = !0, this.ignore = d.ignore, d.enabled || this.enabled ? this.enable() : this.check())
            },
            defineDep: function(a, b) {
                this.depMatched[a] || (this.depMatched[a] = !0, this.depCount -= 1, this.depExports[a] = b)
            },
            fetch: function() {
                if (!this.fetched) {
                    this.fetched = !0, u.startTime = (new Date).getTime();
                    var a = this.map;
                    return this.shim ? void u.makeRequire(this.map, {
                        enableBuildCallback: !0
                    })(this.shim.deps || [], bind(this, function() {
                        return a.prefix ? this.callPlugin() : this.load()
                    })) : a.prefix ? this.callPlugin() : this.load()
                }
            },
            load: function() {
                var a = this.map.url;
                D[a] || (D[a] = !0, u.load(this.map.id, a))
            },
            check: function() {
                if (this.enabled && !this.enabling) {
                    var a, b, c = this.map.id,
                        d = this.depExports,
                        e = this.exports,
                        f = this.factory;
                    if (this.inited) {
                        if (this.error) this.emit("error", this.error);
                        else if (!this.defining) {
                            if (this.defining = !0, this.depCount < 1 && !this.defined) {
                                if (isFunction(f)) {
                                    if (this.events.error && this.map.isDefine || req.onError !== defaultOnError) try {
                                        e = u.execCb(c, f, d, e)
                                    } catch (g) {
                                        a = g
                                    } else e = u.execCb(c, f, d, e);
                                    if (this.map.isDefine && void 0 === e && (b = this.module, b ? e = b.exports : this.usingExports && (e = this.exports)), a) return a.requireMap = this.map, a.requireModules = this.map.isDefine ? [this.map.id] : null, a.requireType = this.map.isDefine ? "define" : "require", j(this.error = a)
                                } else e = f;
                                this.exports = e, this.map.isDefine && !this.ignore && (C[c] = e, req.onResourceLoad && req.onResourceLoad(u, this.map, this.depMaps)), l(c), this.defined = !0
                            }
                            this.defining = !1, this.defined && !this.defineEmitted && (this.defineEmitted = !0, this.emit("defined", this.exports), this.defineEmitComplete = !0)
                        }
                    } else this.fetch()
                }
            },
            callPlugin: function() {
                var a = this.map,
                    b = a.id,
                    d = g(a.prefix);
                this.depMaps.push(d), i(d, "defined", bind(this, function(d) {
                    var e, f, k, m = getOwn(E, this.map.id),
                        n = this.map.name,
                        o = this.map.parentMap ? this.map.parentMap.name : null,
                        p = u.makeRequire(a.parentMap, {
                            enableBuildCallback: !0
                        });
                    return this.map.unnormalized ? (d.normalize && (n = d.normalize(n, function(a) {
                        return c(a, o, !0)
                    }) || ""), f = g(a.prefix + "!" + n, this.map.parentMap), i(f, "defined", bind(this, function(a) {
                        this.init([], function() {
                            return a
                        }, null, {
                            enabled: !0,
                            ignore: !0
                        })
                    })), k = getOwn(y, f.id), void(k && (this.depMaps.push(f), this.events.error && k.on("error", bind(this, function(a) {
                        this.emit("error", a)
                    })), k.enable()))) : m ? (this.map.url = u.nameToUrl(m), void this.load()) : (e = bind(this, function(a) {
                        this.init([], function() {
                            return a
                        }, null, {
                            enabled: !0
                        })
                    }), e.error = bind(this, function(a) {
                        this.inited = !0, this.error = a, a.requireModules = [b], eachProp(y, function(a) {
                            0 === a.map.id.indexOf(b + "_unnormalized") && l(a.map.id)
                        }), j(a)
                    }), e.fromText = bind(this, function(c, d) {
                        var f = a.name,
                            i = g(f),
                            k = useInteractive;
                        d && (c = d), k && (useInteractive = !1), h(i), hasProp(x.config, b) && (x.config[f] = x.config[b]);
                        try {
                            req.exec(c)
                        } catch (l) {
                            return j(makeError("fromtexteval", "fromText eval for " + b + " failed: " + l, l, [b]))
                        }
                        k && (useInteractive = !0), this.depMaps.push(i), u.completeLoad(f), p([f], e)
                    }), void d.load(a.name, p, e, x))
                })), u.enable(d, this), this.pluginMaps[d.id] = d
            },
            enable: function() {
                z[this.map.id] = this, this.enabled = !0, this.enabling = !0, each(this.depMaps, bind(this, function(a, b) {
                    var c, d, e;
                    if ("string" == typeof a) {
                        if (a = g(a, this.map.isDefine ? this.map : this.map.parentMap, !1, !this.skipMap), this.depMaps[b] = a, e = getOwn(v, a.id)) return void(this.depExports[b] = e(this));
                        this.depCount += 1, i(a, "defined", bind(this, function(a) {
                            this.defineDep(b, a), this.check()
                        })), this.errback && i(a, "error", bind(this, this.errback))
                    }
                    c = a.id, d = y[c], hasProp(v, c) || !d || d.enabled || u.enable(a, this)
                })), eachProp(this.pluginMaps, bind(this, function(a) {
                    var b = getOwn(y, a.id);
                    b && !b.enabled && u.enable(a, this)
                })), this.enabling = !1, this.check()
            },
            on: function(a, b) {
                var c = this.events[a];
                c || (c = this.events[a] = []), c.push(b)
            },
            emit: function(a, b) {
                each(this.events[a], function(a) {
                    a(b)
                }), "error" === a && delete this.events[a]
            }
        }, u = {
            config: x,
            contextName: a,
            registry: y,
            defined: C,
            urlFetched: D,
            defQueue: B,
            Module: t,
            makeModuleMap: g,
            nextTick: req.nextTick,
            onError: j,
            configure: function(a) {
                a.baseUrl && "/" !== a.baseUrl.charAt(a.baseUrl.length - 1) && (a.baseUrl += "/");
                var b = x.shim,
                    c = {
                        paths: !0,
                        bundles: !0,
                        config: !0,
                        map: !0
                    };
                eachProp(a, function(a, b) {
                    c[b] ? (x[b] || (x[b] = {}), mixin(x[b], a, !0, !0)) : x[b] = a
                }), a.bundles && eachProp(a.bundles, function(a, b) {
                    each(a, function(a) {
                        a !== b && (E[a] = b)
                    })
                }), a.shim && (eachProp(a.shim, function(a, c) {
                    isArray(a) && (a = {
                        deps: a
                    }), !a.exports && !a.init || a.exportsFn || (a.exportsFn = u.makeShimExports(a)), b[c] = a
                }), x.shim = b), a.packages && each(a.packages, function(a) {
                    var b, c;
                    a = "string" == typeof a ? {
                        name: a
                    } : a, c = a.name, b = a.location, b && (x.paths[c] = a.location), x.pkgs[c] = a.name + "/" + (a.main || "main").replace(currDirRegExp, "").replace(jsSuffixRegExp, "")
                }), eachProp(y, function(a, b) {
                    a.inited || a.map.unnormalized || (a.map = g(b))
                }), (a.deps || a.callback) && u.require(a.deps || [], a.callback)
            },
            makeShimExports: function(a) {
                function b() {
                    var b;
                    return a.init && (b = a.init.apply(global, arguments)), b || a.exports && getGlobal(a.exports)
                }
                return b
            },
            makeRequire: function(b, e) {
                function f(c, d, i) {
                    var k, l, m;
                    return e.enableBuildCallback && d && isFunction(d) && (d.__requireJsBuild = !0), "string" == typeof c ? isFunction(d) ? j(makeError("requireargs", "Invalid require call"), i) : b && hasProp(v, c) ? v[c](y[b.id]) : req.get ? req.get(u, c, b, f) : (l = g(c, b, !1, !0), k = l.id, hasProp(C, k) ? C[k] : j(makeError("notloaded", 'Module name "' + k + '" has not been loaded yet for context: ' + a + (b ? "" : ". Use require([])")))) : (r(), u.nextTick(function() {
                        r(), m = h(g(null, b)), m.skipMap = e.skipMap, m.init(c, d, i, {
                            enabled: !0
                        }), n()
                    }), f)
                }
                return e = e || {}, mixin(f, {
                    isBrowser: isBrowser,
                    toUrl: function(a) {
                        var d, e = a.lastIndexOf("."),
                            f = a.split("/")[0],
                            g = "." === f || ".." === f;
                        return -1 !== e && (!g || e > 1) && (d = a.substring(e, a.length), a = a.substring(0, e)), u.nameToUrl(c(a, b && b.id, !0), d, !0)
                    },
                    defined: function(a) {
                        return hasProp(C, g(a, b, !1, !0).id)
                    },
                    specified: function(a) {
                        return a = g(a, b, !1, !0).id, hasProp(C, a) || hasProp(y, a)
                    }
                }), b || (f.undef = function(a) {
                    k();
                    var c = g(a, b, !0),
                        e = getOwn(y, a);
                    d(a), delete C[a], delete D[c.url], delete A[a], eachReverse(B, function(b, c) {
                        b[0] === a && B.splice(c, 1)
                    }), e && (e.events.defined && (A[a] = e.events), l(a))
                }), f
            },
            enable: function(a) {
                var b = getOwn(y, a.id);
                b && h(a).enable()
            },
            completeLoad: function(a) {
                var b, c, d, f = getOwn(x.shim, a) || {},
                    g = f.exports;
                for (k(); B.length;) {
                    if (c = B.shift(), null === c[0]) {
                        if (c[0] = a, b) break;
                        b = !0
                    } else c[0] === a && (b = !0);
                    o(c)
                }
                if (d = getOwn(y, a), !b && !hasProp(C, a) && d && !d.inited) {
                    if (!(!x.enforceDefine || g && getGlobal(g))) return e(a) ? void 0 : j(makeError("nodefine", "No define call for " + a, null, [a]));
                    o([a, f.deps || [], f.exportsFn])
                }
                n()
            },
            nameToUrl: function(a, b, c) {
                var d, e, f, g, h, i, j, k = getOwn(x.pkgs, a);
                if (k && (a = k), j = getOwn(E, a)) return u.nameToUrl(j, b, c);
                if (req.jsExtRegExp.test(a)) h = a + (b || "");
                else {
                    for (d = x.paths, e = a.split("/"), f = e.length; f > 0; f -= 1)
                        if (g = e.slice(0, f).join("/"), i = getOwn(d, g)) {
                            isArray(i) && (i = i[0]), e.splice(0, f, i);
                            break
                        }
                    h = e.join("/"), h += b || (/^data\:|\?/.test(h) || c ? "" : ".js"), h = ("/" === h.charAt(0) || h.match(/^[\w\+\.\-]+:/) ? "" : x.baseUrl) + h
                }
                return x.urlArgs ? h + ((-1 === h.indexOf("?") ? "?" : "&") + x.urlArgs) : h
            },
            load: function(a, b) {
                req.load(u, a, b)
            },
            execCb: function(a, b, c, d) {
                return b.apply(d, c)
            },
            onScriptLoad: function(a) {
                if ("load" === a.type || readyRegExp.test((a.currentTarget || a.srcElement).readyState)) {
                    interactiveScript = null;
                    var b = q(a);
                    u.completeLoad(b.id)
                }
            },
            onScriptError: function(a) {
                var b = q(a);
                return e(b.id) ? void 0 : j(makeError("scripterror", "Script error for: " + b.id, a, [b.id]))
            }
        }, u.require = u.makeRequire(), u
    }

    function getInteractiveScript() {
        return interactiveScript && "interactive" === interactiveScript.readyState ? interactiveScript : (eachReverse(scripts(), function(a) {
            return "interactive" === a.readyState ? interactiveScript = a : void 0
        }), interactiveScript)
    }
    var req, s, head, baseElement, dataMain, src, interactiveScript, currentlyAddingScript, mainScript, subPath, version = "2.1.15",
        commentRegExp = /(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,
        cjsRequireRegExp = /[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,
        jsSuffixRegExp = /\.js$/,
        currDirRegExp = /^\.\//,
        op = Object.prototype,
        ostring = op.toString,
        hasOwn = op.hasOwnProperty,
        ap = Array.prototype,
        apsp = ap.splice,
        isBrowser = !("undefined" == typeof window || "undefined" == typeof navigator || !window.document),
        isWebWorker = !isBrowser && "undefined" != typeof importScripts,
        readyRegExp = isBrowser && "PLAYSTATION 3" === navigator.platform ? /^complete$/ : /^(complete|loaded)$/,
        defContextName = "_",
        isOpera = "undefined" != typeof opera && "[object Opera]" === opera.toString(),
        contexts = {},
        cfg = {},
        globalDefQueue = [],
        useInteractive = !1;
    if ("undefined" == typeof define) {
        if ("undefined" != typeof requirejs) {
            if (isFunction(requirejs)) return;
            cfg = requirejs, requirejs = void 0
        }
        "undefined" == typeof require || isFunction(require) || (cfg = require, require = void 0), req = requirejs = function(a, b, c, d) {
            var e, f, g = defContextName;
            return isArray(a) || "string" == typeof a || (f = a, isArray(b) ? (a = b, b = c, c = d) : a = []), f && f.context && (g = f.context), e = getOwn(contexts, g), e || (e = contexts[g] = req.s.newContext(g)), f && e.configure(f), e.require(a, b, c)
        }, req.config = function(a) {
            return req(a)
        }, req.nextTick = "undefined" != typeof setTimeout ? function(a) {
            setTimeout(a, 4)
        } : function(a) {
            a()
        }, require || (require = req), req.version = version, req.jsExtRegExp = /^\/|:|\?|\.js$/, req.isBrowser = isBrowser, s = req.s = {
            contexts: contexts,
            newContext: newContext
        }, req({}), each(["toUrl", "undef", "defined", "specified"], function(a) {
            req[a] = function() {
                var b = contexts[defContextName];
                return b.require[a].apply(b, arguments)
            }
        }), isBrowser && (head = s.head = document.getElementsByTagName("head")[0], baseElement = document.getElementsByTagName("base")[0], baseElement && (head = s.head = baseElement.parentNode)), req.onError = defaultOnError, req.createNode = function(a) {
            var b = a.xhtml ? document.createElementNS("http://www.w3.org/1999/xhtml", "html:script") : document.createElement("script");
            return b.type = a.scriptType || "text/javascript", b.charset = "utf-8", b.async = !0, b
        }, req.load = function(a, b, c) {
            var d, e = a && a.config || {};
            if (isBrowser) return d = req.createNode(e, b, c), d.setAttribute("data-requirecontext", a.contextName), d.setAttribute("data-requiremodule", b), !d.attachEvent || d.attachEvent.toString && d.attachEvent.toString().indexOf("[native code") < 0 || isOpera ? (d.addEventListener("load", a.onScriptLoad, !1), d.addEventListener("error", a.onScriptError, !1)) : (useInteractive = !0, d.attachEvent("onreadystatechange", a.onScriptLoad)), d.src = c, currentlyAddingScript = d, baseElement ? head.insertBefore(d, baseElement) : head.appendChild(d), currentlyAddingScript = null, d;
            if (isWebWorker) try {
                importScripts(c), a.completeLoad(b)
            } catch (f) {
                a.onError(makeError("importscripts", "importScripts failed for " + b + " at " + c, f, [b]))
            }
        }, isBrowser && !cfg.skipDataMain && eachReverse(scripts(), function(a) {
            return head || (head = a.parentNode), dataMain = a.getAttribute("data-main"), dataMain ? (mainScript = dataMain, cfg.baseUrl || (src = mainScript.split("/"), mainScript = src.pop(), subPath = src.length ? src.join("/") + "/" : "./", cfg.baseUrl = subPath), mainScript = mainScript.replace(jsSuffixRegExp, ""), req.jsExtRegExp.test(mainScript) && (mainScript = dataMain), cfg.deps = cfg.deps ? cfg.deps.concat(mainScript) : [mainScript], !0) : void 0
        }), define = function(a, b, c) {
            var d, e;
            "string" != typeof a && (c = b, b = a, a = null), isArray(b) || (c = b, b = null), !b && isFunction(c) && (b = [], c.length && (c.toString().replace(commentRegExp, "").replace(cjsRequireRegExp, function(a, c) {
                b.push(c)
            }), b = (1 === c.length ? ["require"] : ["require", "exports", "module"]).concat(b))), useInteractive && (d = currentlyAddingScript || getInteractiveScript(), d && (a || (a = d.getAttribute("data-requiremodule")), e = contexts[d.getAttribute("data-requirecontext")])), (e ? e.defQueue : globalDefQueue).push([a, b, c])
        }, define.amd = {
            jQuery: !0
        }, req.exec = function(text) {
            return eval(text)
        }, req(cfg)
    }
}(this), define("../../bower_components/requirejs/require.js", function() {}),
    function(a, b) {
        "object" == typeof module && "object" == typeof module.exports ? module.exports = a.document ? b(a, !0) : function(a) {
            if (!a.document) throw new Error("jQuery requires a window with a document");
            return b(a)
        } : b(a)
    }("undefined" != typeof window ? window : this, function(a, b) {
        function c(a) {
            var b = a.length,
                c = _.type(a);
            return "function" === c || _.isWindow(a) ? !1 : 1 === a.nodeType && b ? !0 : "array" === c || 0 === b || "number" == typeof b && b > 0 && b - 1 in a
        }

        function d(a, b, c) {
            if (_.isFunction(b)) return _.grep(a, function(a, d) {
                return !!b.call(a, d, a) !== c
            });
            if (b.nodeType) return _.grep(a, function(a) {
                return a === b !== c
            });
            if ("string" == typeof b) {
                if (ha.test(b)) return _.filter(b, a, c);
                b = _.filter(b, a)
            }
            return _.grep(a, function(a) {
                return U.call(b, a) >= 0 !== c
            })
        }

        function e(a, b) {
            for (;
                (a = a[b]) && 1 !== a.nodeType;);
            return a
        }

        function f(a) {
            var b = oa[a] = {};
            return _.each(a.match(na) || [], function(a, c) {
                b[c] = !0
            }), b
        }

        function g() {
            Z.removeEventListener("DOMContentLoaded", g, !1), a.removeEventListener("load", g, !1), _.ready()
        }

        function h() {
            Object.defineProperty(this.cache = {}, 0, {
                get: function() {
                    return {}
                }
            }), this.expando = _.expando + Math.random()
        }

        function i(a, b, c) {
            var d;
            if (void 0 === c && 1 === a.nodeType)
                if (d = "data-" + b.replace(ua, "-$1").toLowerCase(), c = a.getAttribute(d), "string" == typeof c) {
                    try {
                        c = "true" === c ? !0 : "false" === c ? !1 : "null" === c ? null : +c + "" === c ? +c : ta.test(c) ? _.parseJSON(c) : c
                    } catch (e) {}
                    sa.set(a, b, c)
                } else c = void 0;
            return c
        }

        function j() {
            return !0
        }

        function k() {
            return !1
        }

        function l() {
            try {
                return Z.activeElement
            } catch (a) {}
        }

        function m(a, b) {
            return _.nodeName(a, "table") && _.nodeName(11 !== b.nodeType ? b : b.firstChild, "tr") ? a.getElementsByTagName("tbody")[0] || a.appendChild(a.ownerDocument.createElement("tbody")) : a
        }

        function n(a) {
            return a.type = (null !== a.getAttribute("type")) + "/" + a.type, a
        }

        function o(a) {
            var b = Ka.exec(a.type);
            return b ? a.type = b[1] : a.removeAttribute("type"), a
        }

        function p(a, b) {
            for (var c = 0, d = a.length; d > c; c++) ra.set(a[c], "globalEval", !b || ra.get(b[c], "globalEval"))
        }

        function q(a, b) {
            var c, d, e, f, g, h, i, j;
            if (1 === b.nodeType) {
                if (ra.hasData(a) && (f = ra.access(a), g = ra.set(b, f), j = f.events)) {
                    delete g.handle, g.events = {};
                    for (e in j)
                        for (c = 0, d = j[e].length; d > c; c++) _.event.add(b, e, j[e][c])
                }
                sa.hasData(a) && (h = sa.access(a), i = _.extend({}, h), sa.set(b, i))
            }
        }

        function r(a, b) {
            var c = a.getElementsByTagName ? a.getElementsByTagName(b || "*") : a.querySelectorAll ? a.querySelectorAll(b || "*") : [];
            return void 0 === b || b && _.nodeName(a, b) ? _.merge([a], c) : c
        }

        function s(a, b) {
            var c = b.nodeName.toLowerCase();
            "input" === c && ya.test(a.type) ? b.checked = a.checked : ("input" === c || "textarea" === c) && (b.defaultValue = a.defaultValue)
        }

        function t(b, c) {
            var d, e = _(c.createElement(b)).appendTo(c.body),
                f = a.getDefaultComputedStyle && (d = a.getDefaultComputedStyle(e[0])) ? d.display : _.css(e[0], "display");
            return e.detach(), f
        }

        function u(a) {
            var b = Z,
                c = Oa[a];
            return c || (c = t(a, b), "none" !== c && c || (Na = (Na || _("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement), b = Na[0].contentDocument, b.write(), b.close(), c = t(a, b), Na.detach()), Oa[a] = c), c
        }

        function v(a, b, c) {
            var d, e, f, g, h = a.style;
            return c = c || Ra(a), c && (g = c.getPropertyValue(b) || c[b]), c && ("" !== g || _.contains(a.ownerDocument, a) || (g = _.style(a, b)), Qa.test(g) && Pa.test(b) && (d = h.width, e = h.minWidth, f = h.maxWidth, h.minWidth = h.maxWidth = h.width = g, g = c.width, h.width = d, h.minWidth = e, h.maxWidth = f)), void 0 !== g ? g + "" : g
        }

        function w(a, b) {
            return {
                get: function() {
                    return a() ? void delete this.get : (this.get = b).apply(this, arguments)
                }
            }
        }

        function x(a, b) {
            if (b in a) return b;
            for (var c = b[0].toUpperCase() + b.slice(1), d = b, e = Xa.length; e--;)
                if (b = Xa[e] + c, b in a) return b;
            return d
        }

        function y(a, b, c) {
            var d = Ta.exec(b);
            return d ? Math.max(0, d[1] - (c || 0)) + (d[2] || "px") : b
        }

        function z(a, b, c, d, e) {
            for (var f = c === (d ? "border" : "content") ? 4 : "width" === b ? 1 : 0, g = 0; 4 > f; f += 2) "margin" === c && (g += _.css(a, c + wa[f], !0, e)), d ? ("content" === c && (g -= _.css(a, "padding" + wa[f], !0, e)), "margin" !== c && (g -= _.css(a, "border" + wa[f] + "Width", !0, e))) : (g += _.css(a, "padding" + wa[f], !0, e), "padding" !== c && (g += _.css(a, "border" + wa[f] + "Width", !0, e)));
            return g
        }

        function A(a, b, c) {
            var d = !0,
                e = "width" === b ? a.offsetWidth : a.offsetHeight,
                f = Ra(a),
                g = "border-box" === _.css(a, "boxSizing", !1, f);
            if (0 >= e || null == e) {
                if (e = v(a, b, f), (0 > e || null == e) && (e = a.style[b]), Qa.test(e)) return e;
                d = g && (Y.boxSizingReliable() || e === a.style[b]), e = parseFloat(e) || 0
            }
            return e + z(a, b, c || (g ? "border" : "content"), d, f) + "px"
        }

        function B(a, b) {
            for (var c, d, e, f = [], g = 0, h = a.length; h > g; g++) d = a[g], d.style && (f[g] = ra.get(d, "olddisplay"), c = d.style.display, b ? (f[g] || "none" !== c || (d.style.display = ""), "" === d.style.display && xa(d) && (f[g] = ra.access(d, "olddisplay", u(d.nodeName)))) : (e = xa(d), "none" === c && e || ra.set(d, "olddisplay", e ? c : _.css(d, "display"))));
            for (g = 0; h > g; g++) d = a[g], d.style && (b && "none" !== d.style.display && "" !== d.style.display || (d.style.display = b ? f[g] || "" : "none"));
            return a
        }

        function C(a, b, c, d, e) {
            return new C.prototype.init(a, b, c, d, e)
        }

        function D() {
            return setTimeout(function() {
                Ya = void 0
            }), Ya = _.now()
        }

        function E(a, b) {
            var c, d = 0,
                e = {
                    height: a
                };
            for (b = b ? 1 : 0; 4 > d; d += 2 - b) c = wa[d], e["margin" + c] = e["padding" + c] = a;
            return b && (e.opacity = e.width = a), e
        }

        function F(a, b, c) {
            for (var d, e = (cb[b] || []).concat(cb["*"]), f = 0, g = e.length; g > f; f++)
                if (d = e[f].call(c, b, a)) return d
        }

        function G(a, b, c) {
            var d, e, f, g, h, i, j, k, l = this,
                m = {},
                n = a.style,
                o = a.nodeType && xa(a),
                p = ra.get(a, "fxshow");
            c.queue || (h = _._queueHooks(a, "fx"), null == h.unqueued && (h.unqueued = 0, i = h.empty.fire, h.empty.fire = function() {
                h.unqueued || i()
            }), h.unqueued++, l.always(function() {
                l.always(function() {
                    h.unqueued--, _.queue(a, "fx").length || h.empty.fire()
                })
            })), 1 === a.nodeType && ("height" in b || "width" in b) && (c.overflow = [n.overflow, n.overflowX, n.overflowY], j = _.css(a, "display"), k = "none" === j ? ra.get(a, "olddisplay") || u(a.nodeName) : j, "inline" === k && "none" === _.css(a, "float") && (n.display = "inline-block")), c.overflow && (n.overflow = "hidden", l.always(function() {
                n.overflow = c.overflow[0], n.overflowX = c.overflow[1], n.overflowY = c.overflow[2]
            }));
            for (d in b)
                if (e = b[d], $a.exec(e)) {
                    if (delete b[d], f = f || "toggle" === e, e === (o ? "hide" : "show")) {
                        if ("show" !== e || !p || void 0 === p[d]) continue;
                        o = !0
                    }
                    m[d] = p && p[d] || _.style(a, d)
                } else j = void 0;
            if (_.isEmptyObject(m)) "inline" === ("none" === j ? u(a.nodeName) : j) && (n.display = j);
            else {
                p ? "hidden" in p && (o = p.hidden) : p = ra.access(a, "fxshow", {}), f && (p.hidden = !o), o ? _(a).show() : l.done(function() {
                    _(a).hide()
                }), l.done(function() {
                    var b;
                    ra.remove(a, "fxshow");
                    for (b in m) _.style(a, b, m[b])
                });
                for (d in m) g = F(o ? p[d] : 0, d, l), d in p || (p[d] = g.start, o && (g.end = g.start, g.start = "width" === d || "height" === d ? 1 : 0))
            }
        }

        function H(a, b) {
            var c, d, e, f, g;
            for (c in a)
                if (d = _.camelCase(c), e = b[d], f = a[c], _.isArray(f) && (e = f[1], f = a[c] = f[0]), c !== d && (a[d] = f, delete a[c]), g = _.cssHooks[d], g && "expand" in g) {
                    f = g.expand(f), delete a[d];
                    for (c in f) c in a || (a[c] = f[c], b[c] = e)
                } else b[d] = e
        }

        function I(a, b, c) {
            var d, e, f = 0,
                g = bb.length,
                h = _.Deferred().always(function() {
                    delete i.elem
                }),
                i = function() {
                    if (e) return !1;
                    for (var b = Ya || D(), c = Math.max(0, j.startTime + j.duration - b), d = c / j.duration || 0, f = 1 - d, g = 0, i = j.tweens.length; i > g; g++) j.tweens[g].run(f);
                    return h.notifyWith(a, [j, f, c]), 1 > f && i ? c : (h.resolveWith(a, [j]), !1)
                },
                j = h.promise({
                    elem: a,
                    props: _.extend({}, b),
                    opts: _.extend(!0, {
                        specialEasing: {}
                    }, c),
                    originalProperties: b,
                    originalOptions: c,
                    startTime: Ya || D(),
                    duration: c.duration,
                    tweens: [],
                    createTween: function(b, c) {
                        var d = _.Tween(a, j.opts, b, c, j.opts.specialEasing[b] || j.opts.easing);
                        return j.tweens.push(d), d
                    },
                    stop: function(b) {
                        var c = 0,
                            d = b ? j.tweens.length : 0;
                        if (e) return this;
                        for (e = !0; d > c; c++) j.tweens[c].run(1);
                        return b ? h.resolveWith(a, [j, b]) : h.rejectWith(a, [j, b]), this
                    }
                }),
                k = j.props;
            for (H(k, j.opts.specialEasing); g > f; f++)
                if (d = bb[f].call(j, a, k, j.opts)) return d;
            return _.map(k, F, j), _.isFunction(j.opts.start) && j.opts.start.call(a, j), _.fx.timer(_.extend(i, {
                elem: a,
                anim: j,
                queue: j.opts.queue
            })), j.progress(j.opts.progress).done(j.opts.done, j.opts.complete).fail(j.opts.fail).always(j.opts.always)
        }

        function J(a) {
            return function(b, c) {
                "string" != typeof b && (c = b, b = "*");
                var d, e = 0,
                    f = b.toLowerCase().match(na) || [];
                if (_.isFunction(c))
                    for (; d = f[e++];) "+" === d[0] ? (d = d.slice(1) || "*", (a[d] = a[d] || []).unshift(c)) : (a[d] = a[d] || []).push(c)
            }
        }

        function K(a, b, c, d) {
            function e(h) {
                var i;
                return f[h] = !0, _.each(a[h] || [], function(a, h) {
                    var j = h(b, c, d);
                    return "string" != typeof j || g || f[j] ? g ? !(i = j) : void 0 : (b.dataTypes.unshift(j), e(j), !1)
                }), i
            }
            var f = {},
                g = a === vb;
            return e(b.dataTypes[0]) || !f["*"] && e("*")
        }

        function L(a, b) {
            var c, d, e = _.ajaxSettings.flatOptions || {};
            for (c in b) void 0 !== b[c] && ((e[c] ? a : d || (d = {}))[c] = b[c]);
            return d && _.extend(!0, a, d), a
        }

        function M(a, b, c) {
            for (var d, e, f, g, h = a.contents, i = a.dataTypes;
                "*" === i[0];) i.shift(), void 0 === d && (d = a.mimeType || b.getResponseHeader("Content-Type"));
            if (d)
                for (e in h)
                    if (h[e] && h[e].test(d)) {
                        i.unshift(e);
                        break
                    }
            if (i[0] in c) f = i[0];
            else {
                for (e in c) {
                    if (!i[0] || a.converters[e + " " + i[0]]) {
                        f = e;
                        break
                    }
                    g || (g = e)
                }
                f = f || g
            }
            return f ? (f !== i[0] && i.unshift(f), c[f]) : void 0
        }

        function N(a, b, c, d) {
            var e, f, g, h, i, j = {},
                k = a.dataTypes.slice();
            if (k[1])
                for (g in a.converters) j[g.toLowerCase()] = a.converters[g];
            for (f = k.shift(); f;)
                if (a.responseFields[f] && (c[a.responseFields[f]] = b), !i && d && a.dataFilter && (b = a.dataFilter(b, a.dataType)), i = f, f = k.shift())
                    if ("*" === f) f = i;
                    else if ("*" !== i && i !== f) {
                if (g = j[i + " " + f] || j["* " + f], !g)
                    for (e in j)
                        if (h = e.split(" "), h[1] === f && (g = j[i + " " + h[0]] || j["* " + h[0]])) {
                            g === !0 ? g = j[e] : j[e] !== !0 && (f = h[0], k.unshift(h[1]));
                            break
                        }
                if (g !== !0)
                    if (g && a["throws"]) b = g(b);
                    else try {
                        b = g(b)
                    } catch (l) {
                        return {
                            state: "parsererror",
                            error: g ? l : "No conversion from " + i + " to " + f
                        }
                    }
            }
            return {
                state: "success",
                data: b
            }
        }

        function O(a, b, c, d) {
            var e;
            if (_.isArray(b)) _.each(b, function(b, e) {
                c || zb.test(a) ? d(a, e) : O(a + "[" + ("object" == typeof e ? b : "") + "]", e, c, d)
            });
            else if (c || "object" !== _.type(b)) d(a, b);
            else
                for (e in b) O(a + "[" + e + "]", b[e], c, d)
        }

        function P(a) {
            return _.isWindow(a) ? a : 9 === a.nodeType && a.defaultView
        }
        var Q = [],
            R = Q.slice,
            S = Q.concat,
            T = Q.push,
            U = Q.indexOf,
            V = {},
            W = V.toString,
            X = V.hasOwnProperty,
            Y = {},
            Z = a.document,
            $ = "2.1.1",
            _ = function(a, b) {
                return new _.fn.init(a, b)
            },
            aa = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
            ba = /^-ms-/,
            ca = /-([\da-z])/gi,
            da = function(a, b) {
                return b.toUpperCase()
            };
        _.fn = _.prototype = {
            jquery: $,
            constructor: _,
            selector: "",
            length: 0,
            toArray: function() {
                return R.call(this)
            },
            get: function(a) {
                return null != a ? 0 > a ? this[a + this.length] : this[a] : R.call(this)
            },
            pushStack: function(a) {
                var b = _.merge(this.constructor(), a);
                return b.prevObject = this, b.context = this.context, b
            },
            each: function(a, b) {
                return _.each(this, a, b)
            },
            map: function(a) {
                return this.pushStack(_.map(this, function(b, c) {
                    return a.call(b, c, b)
                }))
            },
            slice: function() {
                return this.pushStack(R.apply(this, arguments))
            },
            first: function() {
                return this.eq(0)
            },
            last: function() {
                return this.eq(-1)
            },
            eq: function(a) {
                var b = this.length,
                    c = +a + (0 > a ? b : 0);
                return this.pushStack(c >= 0 && b > c ? [this[c]] : [])
            },
            end: function() {
                return this.prevObject || this.constructor(null)
            },
            push: T,
            sort: Q.sort,
            splice: Q.splice
        }, _.extend = _.fn.extend = function() {
            var a, b, c, d, e, f, g = arguments[0] || {},
                h = 1,
                i = arguments.length,
                j = !1;
            for ("boolean" == typeof g && (j = g, g = arguments[h] || {}, h++), "object" == typeof g || _.isFunction(g) || (g = {}), h === i && (g = this, h--); i > h; h++)
                if (null != (a = arguments[h]))
                    for (b in a) c = g[b], d = a[b], g !== d && (j && d && (_.isPlainObject(d) || (e = _.isArray(d))) ? (e ? (e = !1, f = c && _.isArray(c) ? c : []) : f = c && _.isPlainObject(c) ? c : {}, g[b] = _.extend(j, f, d)) : void 0 !== d && (g[b] = d));
            return g
        }, _.extend({
            expando: "jQuery" + ($ + Math.random()).replace(/\D/g, ""),
            isReady: !0,
            error: function(a) {
                throw new Error(a)
            },
            noop: function() {},
            isFunction: function(a) {
                return "function" === _.type(a)
            },
            isArray: Array.isArray,
            isWindow: function(a) {
                return null != a && a === a.window
            },
            isNumeric: function(a) {
                return !_.isArray(a) && a - parseFloat(a) >= 0
            },
            isPlainObject: function(a) {
                return "object" !== _.type(a) || a.nodeType || _.isWindow(a) ? !1 : a.constructor && !X.call(a.constructor.prototype, "isPrototypeOf") ? !1 : !0
            },
            isEmptyObject: function(a) {
                var b;
                for (b in a) return !1;
                return !0
            },
            type: function(a) {
                return null == a ? a + "" : "object" == typeof a || "function" == typeof a ? V[W.call(a)] || "object" : typeof a
            },
            globalEval: function(a) {
                var b, c = eval;
                a = _.trim(a), a && (1 === a.indexOf("use strict") ? (b = Z.createElement("script"), b.text = a, Z.head.appendChild(b).parentNode.removeChild(b)) : c(a))
            },
            camelCase: function(a) {
                return a.replace(ba, "ms-").replace(ca, da)
            },
            nodeName: function(a, b) {
                return a.nodeName && a.nodeName.toLowerCase() === b.toLowerCase()
            },
            each: function(a, b, d) {
                var e, f = 0,
                    g = a.length,
                    h = c(a);
                if (d) {
                    if (h)
                        for (; g > f && (e = b.apply(a[f], d), e !== !1); f++);
                    else
                        for (f in a)
                            if (e = b.apply(a[f], d), e === !1) break
                } else if (h)
                    for (; g > f && (e = b.call(a[f], f, a[f]), e !== !1); f++);
                else
                    for (f in a)
                        if (e = b.call(a[f], f, a[f]), e === !1) break; return a
            },
            trim: function(a) {
                return null == a ? "" : (a + "").replace(aa, "")
            },
            makeArray: function(a, b) {
                var d = b || [];
                return null != a && (c(Object(a)) ? _.merge(d, "string" == typeof a ? [a] : a) : T.call(d, a)), d
            },
            inArray: function(a, b, c) {
                return null == b ? -1 : U.call(b, a, c)
            },
            merge: function(a, b) {
                for (var c = +b.length, d = 0, e = a.length; c > d; d++) a[e++] = b[d];
                return a.length = e, a
            },
            grep: function(a, b, c) {
                for (var d, e = [], f = 0, g = a.length, h = !c; g > f; f++) d = !b(a[f], f), d !== h && e.push(a[f]);
                return e
            },
            map: function(a, b, d) {
                var e, f = 0,
                    g = a.length,
                    h = c(a),
                    i = [];
                if (h)
                    for (; g > f; f++) e = b(a[f], f, d), null != e && i.push(e);
                else
                    for (f in a) e = b(a[f], f, d), null != e && i.push(e);
                return S.apply([], i)
            },
            guid: 1,
            proxy: function(a, b) {
                var c, d, e;
                return "string" == typeof b && (c = a[b], b = a, a = c), _.isFunction(a) ? (d = R.call(arguments, 2), e = function() {
                    return a.apply(b || this, d.concat(R.call(arguments)))
                }, e.guid = a.guid = a.guid || _.guid++, e) : void 0
            },
            now: Date.now,
            support: Y
        }), _.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(a, b) {
            V["[object " + b + "]"] = b.toLowerCase()
        });
        var ea = function(a) {
            function b(a, b, c, d) {
                var e, f, g, h, i, j, l, n, o, p;
                if ((b ? b.ownerDocument || b : O) !== G && F(b), b = b || G, c = c || [], !a || "string" != typeof a) return c;
                if (1 !== (h = b.nodeType) && 9 !== h) return [];
                if (I && !d) {
                    if (e = sa.exec(a))
                        if (g = e[1]) {
                            if (9 === h) {
                                if (f = b.getElementById(g), !f || !f.parentNode) return c;
                                if (f.id === g) return c.push(f), c
                            } else if (b.ownerDocument && (f = b.ownerDocument.getElementById(g)) && M(b, f) && f.id === g) return c.push(f), c
                        } else {
                            if (e[2]) return _.apply(c, b.getElementsByTagName(a)), c;
                            if ((g = e[3]) && v.getElementsByClassName && b.getElementsByClassName) return _.apply(c, b.getElementsByClassName(g)), c
                        }
                    if (v.qsa && (!J || !J.test(a))) {
                        if (n = l = N, o = b, p = 9 === h && a, 1 === h && "object" !== b.nodeName.toLowerCase()) {
                            for (j = z(a), (l = b.getAttribute("id")) ? n = l.replace(ua, "\\$&") : b.setAttribute("id", n), n = "[id='" + n + "'] ", i = j.length; i--;) j[i] = n + m(j[i]);
                            o = ta.test(a) && k(b.parentNode) || b, p = j.join(",")
                        }
                        if (p) try {
                            return _.apply(c, o.querySelectorAll(p)), c
                        } catch (q) {} finally {
                            l || b.removeAttribute("id")
                        }
                    }
                }
                return B(a.replace(ia, "$1"), b, c, d)
            }

            function c() {
                function a(c, d) {
                    return b.push(c + " ") > w.cacheLength && delete a[b.shift()], a[c + " "] = d
                }
                var b = [];
                return a
            }

            function d(a) {
                return a[N] = !0, a
            }

            function e(a) {
                var b = G.createElement("div");
                try {
                    return !!a(b)
                } catch (c) {
                    return !1
                } finally {
                    b.parentNode && b.parentNode.removeChild(b), b = null
                }
            }

            function f(a, b) {
                for (var c = a.split("|"), d = a.length; d--;) w.attrHandle[c[d]] = b
            }

            function g(a, b) {
                var c = b && a,
                    d = c && 1 === a.nodeType && 1 === b.nodeType && (~b.sourceIndex || W) - (~a.sourceIndex || W);
                if (d) return d;
                if (c)
                    for (; c = c.nextSibling;)
                        if (c === b) return -1;
                return a ? 1 : -1
            }

            function h(a) {
                return function(b) {
                    var c = b.nodeName.toLowerCase();
                    return "input" === c && b.type === a
                }
            }

            function i(a) {
                return function(b) {
                    var c = b.nodeName.toLowerCase();
                    return ("input" === c || "button" === c) && b.type === a
                }
            }

            function j(a) {
                return d(function(b) {
                    return b = +b, d(function(c, d) {
                        for (var e, f = a([], c.length, b), g = f.length; g--;) c[e = f[g]] && (c[e] = !(d[e] = c[e]))
                    })
                })
            }

            function k(a) {
                return a && typeof a.getElementsByTagName !== V && a;

            }

            function l() {}

            function m(a) {
                for (var b = 0, c = a.length, d = ""; c > b; b++) d += a[b].value;
                return d
            }

            function n(a, b, c) {
                var d = b.dir,
                    e = c && "parentNode" === d,
                    f = Q++;
                return b.first ? function(b, c, f) {
                    for (; b = b[d];)
                        if (1 === b.nodeType || e) return a(b, c, f)
                } : function(b, c, g) {
                    var h, i, j = [P, f];
                    if (g) {
                        for (; b = b[d];)
                            if ((1 === b.nodeType || e) && a(b, c, g)) return !0
                    } else
                        for (; b = b[d];)
                            if (1 === b.nodeType || e) {
                                if (i = b[N] || (b[N] = {}), (h = i[d]) && h[0] === P && h[1] === f) return j[2] = h[2];
                                if (i[d] = j, j[2] = a(b, c, g)) return !0
                            }
                }
            }

            function o(a) {
                return a.length > 1 ? function(b, c, d) {
                    for (var e = a.length; e--;)
                        if (!a[e](b, c, d)) return !1;
                    return !0
                } : a[0]
            }

            function p(a, c, d) {
                for (var e = 0, f = c.length; f > e; e++) b(a, c[e], d);
                return d
            }

            function q(a, b, c, d, e) {
                for (var f, g = [], h = 0, i = a.length, j = null != b; i > h; h++)(f = a[h]) && (!c || c(f, d, e)) && (g.push(f), j && b.push(h));
                return g
            }

            function r(a, b, c, e, f, g) {
                return e && !e[N] && (e = r(e)), f && !f[N] && (f = r(f, g)), d(function(d, g, h, i) {
                    var j, k, l, m = [],
                        n = [],
                        o = g.length,
                        r = d || p(b || "*", h.nodeType ? [h] : h, []),
                        s = !a || !d && b ? r : q(r, m, a, h, i),
                        t = c ? f || (d ? a : o || e) ? [] : g : s;
                    if (c && c(s, t, h, i), e)
                        for (j = q(t, n), e(j, [], h, i), k = j.length; k--;)(l = j[k]) && (t[n[k]] = !(s[n[k]] = l));
                    if (d) {
                        if (f || a) {
                            if (f) {
                                for (j = [], k = t.length; k--;)(l = t[k]) && j.push(s[k] = l);
                                f(null, t = [], j, i)
                            }
                            for (k = t.length; k--;)(l = t[k]) && (j = f ? ba.call(d, l) : m[k]) > -1 && (d[j] = !(g[j] = l))
                        }
                    } else t = q(t === g ? t.splice(o, t.length) : t), f ? f(null, g, t, i) : _.apply(g, t)
                })
            }

            function s(a) {
                for (var b, c, d, e = a.length, f = w.relative[a[0].type], g = f || w.relative[" "], h = f ? 1 : 0, i = n(function(a) {
                        return a === b
                    }, g, !0), j = n(function(a) {
                        return ba.call(b, a) > -1
                    }, g, !0), k = [function(a, c, d) {
                        return !f && (d || c !== C) || ((b = c).nodeType ? i(a, c, d) : j(a, c, d))
                    }]; e > h; h++)
                    if (c = w.relative[a[h].type]) k = [n(o(k), c)];
                    else {
                        if (c = w.filter[a[h].type].apply(null, a[h].matches), c[N]) {
                            for (d = ++h; e > d && !w.relative[a[d].type]; d++);
                            return r(h > 1 && o(k), h > 1 && m(a.slice(0, h - 1).concat({
                                value: " " === a[h - 2].type ? "*" : ""
                            })).replace(ia, "$1"), c, d > h && s(a.slice(h, d)), e > d && s(a = a.slice(d)), e > d && m(a))
                        }
                        k.push(c)
                    }
                return o(k)
            }

            function t(a, c) {
                var e = c.length > 0,
                    f = a.length > 0,
                    g = function(d, g, h, i, j) {
                        var k, l, m, n = 0,
                            o = "0",
                            p = d && [],
                            r = [],
                            s = C,
                            t = d || f && w.find.TAG("*", j),
                            u = P += null == s ? 1 : Math.random() || .1,
                            v = t.length;
                        for (j && (C = g !== G && g); o !== v && null != (k = t[o]); o++) {
                            if (f && k) {
                                for (l = 0; m = a[l++];)
                                    if (m(k, g, h)) {
                                        i.push(k);
                                        break
                                    }
                                j && (P = u)
                            }
                            e && ((k = !m && k) && n--, d && p.push(k))
                        }
                        if (n += o, e && o !== n) {
                            for (l = 0; m = c[l++];) m(p, r, g, h);
                            if (d) {
                                if (n > 0)
                                    for (; o--;) p[o] || r[o] || (r[o] = Z.call(i));
                                r = q(r)
                            }
                            _.apply(i, r), j && !d && r.length > 0 && n + c.length > 1 && b.uniqueSort(i)
                        }
                        return j && (P = u, C = s), p
                    };
                return e ? d(g) : g
            }
            var u, v, w, x, y, z, A, B, C, D, E, F, G, H, I, J, K, L, M, N = "sizzle" + -new Date,
                O = a.document,
                P = 0,
                Q = 0,
                R = c(),
                S = c(),
                T = c(),
                U = function(a, b) {
                    return a === b && (E = !0), 0
                },
                V = "undefined",
                W = 1 << 31,
                X = {}.hasOwnProperty,
                Y = [],
                Z = Y.pop,
                $ = Y.push,
                _ = Y.push,
                aa = Y.slice,
                ba = Y.indexOf || function(a) {
                    for (var b = 0, c = this.length; c > b; b++)
                        if (this[b] === a) return b;
                    return -1
                },
                ca = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
                da = "[\\x20\\t\\r\\n\\f]",
                ea = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",
                fa = ea.replace("w", "w#"),
                ga = "\\[" + da + "*(" + ea + ")(?:" + da + "*([*^$|!~]?=)" + da + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + fa + "))|)" + da + "*\\]",
                ha = ":(" + ea + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + ga + ")*)|.*)\\)|)",
                ia = new RegExp("^" + da + "+|((?:^|[^\\\\])(?:\\\\.)*)" + da + "+$", "g"),
                ja = new RegExp("^" + da + "*," + da + "*"),
                ka = new RegExp("^" + da + "*([>+~]|" + da + ")" + da + "*"),
                la = new RegExp("=" + da + "*([^\\]'\"]*?)" + da + "*\\]", "g"),
                ma = new RegExp(ha),
                na = new RegExp("^" + fa + "$"),
                oa = {
                    ID: new RegExp("^#(" + ea + ")"),
                    CLASS: new RegExp("^\\.(" + ea + ")"),
                    TAG: new RegExp("^(" + ea.replace("w", "w*") + ")"),
                    ATTR: new RegExp("^" + ga),
                    PSEUDO: new RegExp("^" + ha),
                    CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + da + "*(even|odd|(([+-]|)(\\d*)n|)" + da + "*(?:([+-]|)" + da + "*(\\d+)|))" + da + "*\\)|)", "i"),
                    bool: new RegExp("^(?:" + ca + ")$", "i"),
                    needsContext: new RegExp("^" + da + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + da + "*((?:-\\d)?\\d*)" + da + "*\\)|)(?=[^-]|$)", "i")
                },
                pa = /^(?:input|select|textarea|button)$/i,
                qa = /^h\d$/i,
                ra = /^[^{]+\{\s*\[native \w/,
                sa = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
                ta = /[+~]/,
                ua = /'|\\/g,
                va = new RegExp("\\\\([\\da-f]{1,6}" + da + "?|(" + da + ")|.)", "ig"),
                wa = function(a, b, c) {
                    var d = "0x" + b - 65536;
                    return d !== d || c ? b : 0 > d ? String.fromCharCode(d + 65536) : String.fromCharCode(d >> 10 | 55296, 1023 & d | 56320)
                };
            try {
                _.apply(Y = aa.call(O.childNodes), O.childNodes), Y[O.childNodes.length].nodeType
            } catch (xa) {
                _ = {
                    apply: Y.length ? function(a, b) {
                        $.apply(a, aa.call(b))
                    } : function(a, b) {
                        for (var c = a.length, d = 0; a[c++] = b[d++];);
                        a.length = c - 1
                    }
                }
            }
            v = b.support = {}, y = b.isXML = function(a) {
                var b = a && (a.ownerDocument || a).documentElement;
                return b ? "HTML" !== b.nodeName : !1
            }, F = b.setDocument = function(a) {
                var b, c = a ? a.ownerDocument || a : O,
                    d = c.defaultView;
                return c !== G && 9 === c.nodeType && c.documentElement ? (G = c, H = c.documentElement, I = !y(c), d && d !== d.top && (d.addEventListener ? d.addEventListener("unload", function() {
                    F()
                }, !1) : d.attachEvent && d.attachEvent("onunload", function() {
                    F()
                })), v.attributes = e(function(a) {
                    return a.className = "i", !a.getAttribute("className")
                }), v.getElementsByTagName = e(function(a) {
                    return a.appendChild(c.createComment("")), !a.getElementsByTagName("*").length
                }), v.getElementsByClassName = ra.test(c.getElementsByClassName) && e(function(a) {
                    return a.innerHTML = "<div class='a'></div><div class='a i'></div>", a.firstChild.className = "i", 2 === a.getElementsByClassName("i").length
                }), v.getById = e(function(a) {
                    return H.appendChild(a).id = N, !c.getElementsByName || !c.getElementsByName(N).length
                }), v.getById ? (w.find.ID = function(a, b) {
                    if (typeof b.getElementById !== V && I) {
                        var c = b.getElementById(a);
                        return c && c.parentNode ? [c] : []
                    }
                }, w.filter.ID = function(a) {
                    var b = a.replace(va, wa);
                    return function(a) {
                        return a.getAttribute("id") === b
                    }
                }) : (delete w.find.ID, w.filter.ID = function(a) {
                    var b = a.replace(va, wa);
                    return function(a) {
                        var c = typeof a.getAttributeNode !== V && a.getAttributeNode("id");
                        return c && c.value === b
                    }
                }), w.find.TAG = v.getElementsByTagName ? function(a, b) {
                    return typeof b.getElementsByTagName !== V ? b.getElementsByTagName(a) : void 0
                } : function(a, b) {
                    var c, d = [],
                        e = 0,
                        f = b.getElementsByTagName(a);
                    if ("*" === a) {
                        for (; c = f[e++];) 1 === c.nodeType && d.push(c);
                        return d
                    }
                    return f
                }, w.find.CLASS = v.getElementsByClassName && function(a, b) {
                    return typeof b.getElementsByClassName !== V && I ? b.getElementsByClassName(a) : void 0
                }, K = [], J = [], (v.qsa = ra.test(c.querySelectorAll)) && (e(function(a) {
                    a.innerHTML = "<select msallowclip=''><option selected=''></option></select>", a.querySelectorAll("[msallowclip^='']").length && J.push("[*^$]=" + da + "*(?:''|\"\")"), a.querySelectorAll("[selected]").length || J.push("\\[" + da + "*(?:value|" + ca + ")"), a.querySelectorAll(":checked").length || J.push(":checked")
                }), e(function(a) {
                    var b = c.createElement("input");
                    b.setAttribute("type", "hidden"), a.appendChild(b).setAttribute("name", "D"), a.querySelectorAll("[name=d]").length && J.push("name" + da + "*[*^$|!~]?="), a.querySelectorAll(":enabled").length || J.push(":enabled", ":disabled"), a.querySelectorAll("*,:x"), J.push(",.*:")
                })), (v.matchesSelector = ra.test(L = H.matches || H.webkitMatchesSelector || H.mozMatchesSelector || H.oMatchesSelector || H.msMatchesSelector)) && e(function(a) {
                    v.disconnectedMatch = L.call(a, "div"), L.call(a, "[s!='']:x"), K.push("!=", ha)
                }), J = J.length && new RegExp(J.join("|")), K = K.length && new RegExp(K.join("|")), b = ra.test(H.compareDocumentPosition), M = b || ra.test(H.contains) ? function(a, b) {
                    var c = 9 === a.nodeType ? a.documentElement : a,
                        d = b && b.parentNode;
                    return a === d || !(!d || 1 !== d.nodeType || !(c.contains ? c.contains(d) : a.compareDocumentPosition && 16 & a.compareDocumentPosition(d)))
                } : function(a, b) {
                    if (b)
                        for (; b = b.parentNode;)
                            if (b === a) return !0;
                    return !1
                }, U = b ? function(a, b) {
                    if (a === b) return E = !0, 0;
                    var d = !a.compareDocumentPosition - !b.compareDocumentPosition;
                    return d ? d : (d = (a.ownerDocument || a) === (b.ownerDocument || b) ? a.compareDocumentPosition(b) : 1, 1 & d || !v.sortDetached && b.compareDocumentPosition(a) === d ? a === c || a.ownerDocument === O && M(O, a) ? -1 : b === c || b.ownerDocument === O && M(O, b) ? 1 : D ? ba.call(D, a) - ba.call(D, b) : 0 : 4 & d ? -1 : 1)
                } : function(a, b) {
                    if (a === b) return E = !0, 0;
                    var d, e = 0,
                        f = a.parentNode,
                        h = b.parentNode,
                        i = [a],
                        j = [b];
                    if (!f || !h) return a === c ? -1 : b === c ? 1 : f ? -1 : h ? 1 : D ? ba.call(D, a) - ba.call(D, b) : 0;
                    if (f === h) return g(a, b);
                    for (d = a; d = d.parentNode;) i.unshift(d);
                    for (d = b; d = d.parentNode;) j.unshift(d);
                    for (; i[e] === j[e];) e++;
                    return e ? g(i[e], j[e]) : i[e] === O ? -1 : j[e] === O ? 1 : 0
                }, c) : G
            }, b.matches = function(a, c) {
                return b(a, null, null, c)
            }, b.matchesSelector = function(a, c) {
                if ((a.ownerDocument || a) !== G && F(a), c = c.replace(la, "='$1']"), !(!v.matchesSelector || !I || K && K.test(c) || J && J.test(c))) try {
                    var d = L.call(a, c);
                    if (d || v.disconnectedMatch || a.document && 11 !== a.document.nodeType) return d
                } catch (e) {}
                return b(c, G, null, [a]).length > 0
            }, b.contains = function(a, b) {
                return (a.ownerDocument || a) !== G && F(a), M(a, b)
            }, b.attr = function(a, b) {
                (a.ownerDocument || a) !== G && F(a);
                var c = w.attrHandle[b.toLowerCase()],
                    d = c && X.call(w.attrHandle, b.toLowerCase()) ? c(a, b, !I) : void 0;
                return void 0 !== d ? d : v.attributes || !I ? a.getAttribute(b) : (d = a.getAttributeNode(b)) && d.specified ? d.value : null
            }, b.error = function(a) {
                throw new Error("Syntax error, unrecognized expression: " + a)
            }, b.uniqueSort = function(a) {
                var b, c = [],
                    d = 0,
                    e = 0;
                if (E = !v.detectDuplicates, D = !v.sortStable && a.slice(0), a.sort(U), E) {
                    for (; b = a[e++];) b === a[e] && (d = c.push(e));
                    for (; d--;) a.splice(c[d], 1)
                }
                return D = null, a
            }, x = b.getText = function(a) {
                var b, c = "",
                    d = 0,
                    e = a.nodeType;
                if (e) {
                    if (1 === e || 9 === e || 11 === e) {
                        if ("string" == typeof a.textContent) return a.textContent;
                        for (a = a.firstChild; a; a = a.nextSibling) c += x(a)
                    } else if (3 === e || 4 === e) return a.nodeValue
                } else
                    for (; b = a[d++];) c += x(b);
                return c
            }, w = b.selectors = {
                cacheLength: 50,
                createPseudo: d,
                match: oa,
                attrHandle: {},
                find: {},
                relative: {
                    ">": {
                        dir: "parentNode",
                        first: !0
                    },
                    " ": {
                        dir: "parentNode"
                    },
                    "+": {
                        dir: "previousSibling",
                        first: !0
                    },
                    "~": {
                        dir: "previousSibling"
                    }
                },
                preFilter: {
                    ATTR: function(a) {
                        return a[1] = a[1].replace(va, wa), a[3] = (a[3] || a[4] || a[5] || "").replace(va, wa), "~=" === a[2] && (a[3] = " " + a[3] + " "), a.slice(0, 4)
                    },
                    CHILD: function(a) {
                        return a[1] = a[1].toLowerCase(), "nth" === a[1].slice(0, 3) ? (a[3] || b.error(a[0]), a[4] = +(a[4] ? a[5] + (a[6] || 1) : 2 * ("even" === a[3] || "odd" === a[3])), a[5] = +(a[7] + a[8] || "odd" === a[3])) : a[3] && b.error(a[0]), a
                    },
                    PSEUDO: function(a) {
                        var b, c = !a[6] && a[2];
                        return oa.CHILD.test(a[0]) ? null : (a[3] ? a[2] = a[4] || a[5] || "" : c && ma.test(c) && (b = z(c, !0)) && (b = c.indexOf(")", c.length - b) - c.length) && (a[0] = a[0].slice(0, b), a[2] = c.slice(0, b)), a.slice(0, 3))
                    }
                },
                filter: {
                    TAG: function(a) {
                        var b = a.replace(va, wa).toLowerCase();
                        return "*" === a ? function() {
                            return !0
                        } : function(a) {
                            return a.nodeName && a.nodeName.toLowerCase() === b
                        }
                    },
                    CLASS: function(a) {
                        var b = R[a + " "];
                        return b || (b = new RegExp("(^|" + da + ")" + a + "(" + da + "|$)")) && R(a, function(a) {
                            return b.test("string" == typeof a.className && a.className || typeof a.getAttribute !== V && a.getAttribute("class") || "")
                        })
                    },
                    ATTR: function(a, c, d) {
                        return function(e) {
                            var f = b.attr(e, a);
                            return null == f ? "!=" === c : c ? (f += "", "=" === c ? f === d : "!=" === c ? f !== d : "^=" === c ? d && 0 === f.indexOf(d) : "*=" === c ? d && f.indexOf(d) > -1 : "$=" === c ? d && f.slice(-d.length) === d : "~=" === c ? (" " + f + " ").indexOf(d) > -1 : "|=" === c ? f === d || f.slice(0, d.length + 1) === d + "-" : !1) : !0
                        }
                    },
                    CHILD: function(a, b, c, d, e) {
                        var f = "nth" !== a.slice(0, 3),
                            g = "last" !== a.slice(-4),
                            h = "of-type" === b;
                        return 1 === d && 0 === e ? function(a) {
                            return !!a.parentNode
                        } : function(b, c, i) {
                            var j, k, l, m, n, o, p = f !== g ? "nextSibling" : "previousSibling",
                                q = b.parentNode,
                                r = h && b.nodeName.toLowerCase(),
                                s = !i && !h;
                            if (q) {
                                if (f) {
                                    for (; p;) {
                                        for (l = b; l = l[p];)
                                            if (h ? l.nodeName.toLowerCase() === r : 1 === l.nodeType) return !1;
                                        o = p = "only" === a && !o && "nextSibling"
                                    }
                                    return !0
                                }
                                if (o = [g ? q.firstChild : q.lastChild], g && s) {
                                    for (k = q[N] || (q[N] = {}), j = k[a] || [], n = j[0] === P && j[1], m = j[0] === P && j[2], l = n && q.childNodes[n]; l = ++n && l && l[p] || (m = n = 0) || o.pop();)
                                        if (1 === l.nodeType && ++m && l === b) {
                                            k[a] = [P, n, m];
                                            break
                                        }
                                } else if (s && (j = (b[N] || (b[N] = {}))[a]) && j[0] === P) m = j[1];
                                else
                                    for (;
                                        (l = ++n && l && l[p] || (m = n = 0) || o.pop()) && ((h ? l.nodeName.toLowerCase() !== r : 1 !== l.nodeType) || !++m || (s && ((l[N] || (l[N] = {}))[a] = [P, m]), l !== b)););
                                return m -= e, m === d || m % d === 0 && m / d >= 0
                            }
                        }
                    },
                    PSEUDO: function(a, c) {
                        var e, f = w.pseudos[a] || w.setFilters[a.toLowerCase()] || b.error("unsupported pseudo: " + a);
                        return f[N] ? f(c) : f.length > 1 ? (e = [a, a, "", c], w.setFilters.hasOwnProperty(a.toLowerCase()) ? d(function(a, b) {
                            for (var d, e = f(a, c), g = e.length; g--;) d = ba.call(a, e[g]), a[d] = !(b[d] = e[g])
                        }) : function(a) {
                            return f(a, 0, e)
                        }) : f
                    }
                },
                pseudos: {
                    not: d(function(a) {
                        var b = [],
                            c = [],
                            e = A(a.replace(ia, "$1"));
                        return e[N] ? d(function(a, b, c, d) {
                            for (var f, g = e(a, null, d, []), h = a.length; h--;)(f = g[h]) && (a[h] = !(b[h] = f))
                        }) : function(a, d, f) {
                            return b[0] = a, e(b, null, f, c), !c.pop()
                        }
                    }),
                    has: d(function(a) {
                        return function(c) {
                            return b(a, c).length > 0
                        }
                    }),
                    contains: d(function(a) {
                        return function(b) {
                            return (b.textContent || b.innerText || x(b)).indexOf(a) > -1
                        }
                    }),
                    lang: d(function(a) {
                        return na.test(a || "") || b.error("unsupported lang: " + a), a = a.replace(va, wa).toLowerCase(),
                            function(b) {
                                var c;
                                do
                                    if (c = I ? b.lang : b.getAttribute("xml:lang") || b.getAttribute("lang")) return c = c.toLowerCase(), c === a || 0 === c.indexOf(a + "-");
                                while ((b = b.parentNode) && 1 === b.nodeType);
                                return !1
                            }
                    }),
                    target: function(b) {
                        var c = a.location && a.location.hash;
                        return c && c.slice(1) === b.id
                    },
                    root: function(a) {
                        return a === H
                    },
                    focus: function(a) {
                        return a === G.activeElement && (!G.hasFocus || G.hasFocus()) && !!(a.type || a.href || ~a.tabIndex)
                    },
                    enabled: function(a) {
                        return a.disabled === !1
                    },
                    disabled: function(a) {
                        return a.disabled === !0
                    },
                    checked: function(a) {
                        var b = a.nodeName.toLowerCase();
                        return "input" === b && !!a.checked || "option" === b && !!a.selected
                    },
                    selected: function(a) {
                        return a.parentNode && a.parentNode.selectedIndex, a.selected === !0
                    },
                    empty: function(a) {
                        for (a = a.firstChild; a; a = a.nextSibling)
                            if (a.nodeType < 6) return !1;
                        return !0
                    },
                    parent: function(a) {
                        return !w.pseudos.empty(a)
                    },
                    header: function(a) {
                        return qa.test(a.nodeName)
                    },
                    input: function(a) {
                        return pa.test(a.nodeName)
                    },
                    button: function(a) {
                        var b = a.nodeName.toLowerCase();
                        return "input" === b && "button" === a.type || "button" === b
                    },
                    text: function(a) {
                        var b;
                        return "input" === a.nodeName.toLowerCase() && "text" === a.type && (null == (b = a.getAttribute("type")) || "text" === b.toLowerCase())
                    },
                    first: j(function() {
                        return [0]
                    }),
                    last: j(function(a, b) {
                        return [b - 1]
                    }),
                    eq: j(function(a, b, c) {
                        return [0 > c ? c + b : c]
                    }),
                    even: j(function(a, b) {
                        for (var c = 0; b > c; c += 2) a.push(c);
                        return a
                    }),
                    odd: j(function(a, b) {
                        for (var c = 1; b > c; c += 2) a.push(c);
                        return a
                    }),
                    lt: j(function(a, b, c) {
                        for (var d = 0 > c ? c + b : c; --d >= 0;) a.push(d);
                        return a
                    }),
                    gt: j(function(a, b, c) {
                        for (var d = 0 > c ? c + b : c; ++d < b;) a.push(d);
                        return a
                    })
                }
            }, w.pseudos.nth = w.pseudos.eq;
            for (u in {
                    radio: !0,
                    checkbox: !0,
                    file: !0,
                    password: !0,
                    image: !0
                }) w.pseudos[u] = h(u);
            for (u in {
                    submit: !0,
                    reset: !0
                }) w.pseudos[u] = i(u);
            return l.prototype = w.filters = w.pseudos, w.setFilters = new l, z = b.tokenize = function(a, c) {
                var d, e, f, g, h, i, j, k = S[a + " "];
                if (k) return c ? 0 : k.slice(0);
                for (h = a, i = [], j = w.preFilter; h;) {
                    (!d || (e = ja.exec(h))) && (e && (h = h.slice(e[0].length) || h), i.push(f = [])), d = !1, (e = ka.exec(h)) && (d = e.shift(), f.push({
                        value: d,
                        type: e[0].replace(ia, " ")
                    }), h = h.slice(d.length));
                    for (g in w.filter) !(e = oa[g].exec(h)) || j[g] && !(e = j[g](e)) || (d = e.shift(), f.push({
                        value: d,
                        type: g,
                        matches: e
                    }), h = h.slice(d.length));
                    if (!d) break
                }
                return c ? h.length : h ? b.error(a) : S(a, i).slice(0)
            }, A = b.compile = function(a, b) {
                var c, d = [],
                    e = [],
                    f = T[a + " "];
                if (!f) {
                    for (b || (b = z(a)), c = b.length; c--;) f = s(b[c]), f[N] ? d.push(f) : e.push(f);
                    f = T(a, t(e, d)), f.selector = a
                }
                return f
            }, B = b.select = function(a, b, c, d) {
                var e, f, g, h, i, j = "function" == typeof a && a,
                    l = !d && z(a = j.selector || a);
                if (c = c || [], 1 === l.length) {
                    if (f = l[0] = l[0].slice(0), f.length > 2 && "ID" === (g = f[0]).type && v.getById && 9 === b.nodeType && I && w.relative[f[1].type]) {
                        if (b = (w.find.ID(g.matches[0].replace(va, wa), b) || [])[0], !b) return c;
                        j && (b = b.parentNode), a = a.slice(f.shift().value.length)
                    }
                    for (e = oa.needsContext.test(a) ? 0 : f.length; e-- && (g = f[e], !w.relative[h = g.type]);)
                        if ((i = w.find[h]) && (d = i(g.matches[0].replace(va, wa), ta.test(f[0].type) && k(b.parentNode) || b))) {
                            if (f.splice(e, 1), a = d.length && m(f), !a) return _.apply(c, d), c;
                            break
                        }
                }
                return (j || A(a, l))(d, b, !I, c, ta.test(a) && k(b.parentNode) || b), c
            }, v.sortStable = N.split("").sort(U).join("") === N, v.detectDuplicates = !!E, F(), v.sortDetached = e(function(a) {
                return 1 & a.compareDocumentPosition(G.createElement("div"))
            }), e(function(a) {
                return a.innerHTML = "<a href='#'></a>", "#" === a.firstChild.getAttribute("href")
            }) || f("type|href|height|width", function(a, b, c) {
                return c ? void 0 : a.getAttribute(b, "type" === b.toLowerCase() ? 1 : 2)
            }), v.attributes && e(function(a) {
                return a.innerHTML = "<input/>", a.firstChild.setAttribute("value", ""), "" === a.firstChild.getAttribute("value")
            }) || f("value", function(a, b, c) {
                return c || "input" !== a.nodeName.toLowerCase() ? void 0 : a.defaultValue
            }), e(function(a) {
                return null == a.getAttribute("disabled")
            }) || f(ca, function(a, b, c) {
                var d;
                return c ? void 0 : a[b] === !0 ? b.toLowerCase() : (d = a.getAttributeNode(b)) && d.specified ? d.value : null
            }), b
        }(a);
        _.find = ea, _.expr = ea.selectors, _.expr[":"] = _.expr.pseudos, _.unique = ea.uniqueSort, _.text = ea.getText, _.isXMLDoc = ea.isXML, _.contains = ea.contains;
        var fa = _.expr.match.needsContext,
            ga = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
            ha = /^.[^:#\[\.,]*$/;
        _.filter = function(a, b, c) {
            var d = b[0];
            return c && (a = ":not(" + a + ")"), 1 === b.length && 1 === d.nodeType ? _.find.matchesSelector(d, a) ? [d] : [] : _.find.matches(a, _.grep(b, function(a) {
                return 1 === a.nodeType
            }))
        }, _.fn.extend({
            find: function(a) {
                var b, c = this.length,
                    d = [],
                    e = this;
                if ("string" != typeof a) return this.pushStack(_(a).filter(function() {
                    for (b = 0; c > b; b++)
                        if (_.contains(e[b], this)) return !0
                }));
                for (b = 0; c > b; b++) _.find(a, e[b], d);
                return d = this.pushStack(c > 1 ? _.unique(d) : d), d.selector = this.selector ? this.selector + " " + a : a, d
            },
            filter: function(a) {
                return this.pushStack(d(this, a || [], !1))
            },
            not: function(a) {
                return this.pushStack(d(this, a || [], !0))
            },
            is: function(a) {
                return !!d(this, "string" == typeof a && fa.test(a) ? _(a) : a || [], !1).length
            }
        });
        var ia, ja = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,
            ka = _.fn.init = function(a, b) {
                var c, d;
                if (!a) return this;
                if ("string" == typeof a) {
                    if (c = "<" === a[0] && ">" === a[a.length - 1] && a.length >= 3 ? [null, a, null] : ja.exec(a), !c || !c[1] && b) return !b || b.jquery ? (b || ia).find(a) : this.constructor(b).find(a);
                    if (c[1]) {
                        if (b = b instanceof _ ? b[0] : b, _.merge(this, _.parseHTML(c[1], b && b.nodeType ? b.ownerDocument || b : Z, !0)), ga.test(c[1]) && _.isPlainObject(b))
                            for (c in b) _.isFunction(this[c]) ? this[c](b[c]) : this.attr(c, b[c]);
                        return this
                    }
                    return d = Z.getElementById(c[2]), d && d.parentNode && (this.length = 1, this[0] = d), this.context = Z, this.selector = a, this
                }
                return a.nodeType ? (this.context = this[0] = a, this.length = 1, this) : _.isFunction(a) ? "undefined" != typeof ia.ready ? ia.ready(a) : a(_) : (void 0 !== a.selector && (this.selector = a.selector, this.context = a.context), _.makeArray(a, this))
            };
        ka.prototype = _.fn, ia = _(Z);
        var la = /^(?:parents|prev(?:Until|All))/,
            ma = {
                children: !0,
                contents: !0,
                next: !0,
                prev: !0
            };
        _.extend({
            dir: function(a, b, c) {
                for (var d = [], e = void 0 !== c;
                    (a = a[b]) && 9 !== a.nodeType;)
                    if (1 === a.nodeType) {
                        if (e && _(a).is(c)) break;
                        d.push(a)
                    }
                return d
            },
            sibling: function(a, b) {
                for (var c = []; a; a = a.nextSibling) 1 === a.nodeType && a !== b && c.push(a);
                return c
            }
        }), _.fn.extend({
            has: function(a) {
                var b = _(a, this),
                    c = b.length;
                return this.filter(function() {
                    for (var a = 0; c > a; a++)
                        if (_.contains(this, b[a])) return !0
                })
            },
            closest: function(a, b) {
                for (var c, d = 0, e = this.length, f = [], g = fa.test(a) || "string" != typeof a ? _(a, b || this.context) : 0; e > d; d++)
                    for (c = this[d]; c && c !== b; c = c.parentNode)
                        if (c.nodeType < 11 && (g ? g.index(c) > -1 : 1 === c.nodeType && _.find.matchesSelector(c, a))) {
                            f.push(c);
                            break
                        }
                return this.pushStack(f.length > 1 ? _.unique(f) : f)
            },
            index: function(a) {
                return a ? "string" == typeof a ? U.call(_(a), this[0]) : U.call(this, a.jquery ? a[0] : a) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
            },
            add: function(a, b) {
                return this.pushStack(_.unique(_.merge(this.get(), _(a, b))))
            },
            addBack: function(a) {
                return this.add(null == a ? this.prevObject : this.prevObject.filter(a))
            }
        }), _.each({
            parent: function(a) {
                var b = a.parentNode;
                return b && 11 !== b.nodeType ? b : null
            },
            parents: function(a) {
                return _.dir(a, "parentNode")
            },
            parentsUntil: function(a, b, c) {
                return _.dir(a, "parentNode", c)
            },
            next: function(a) {
                return e(a, "nextSibling")
            },
            prev: function(a) {
                return e(a, "previousSibling")
            },
            nextAll: function(a) {
                return _.dir(a, "nextSibling")
            },
            prevAll: function(a) {
                return _.dir(a, "previousSibling")
            },
            nextUntil: function(a, b, c) {
                return _.dir(a, "nextSibling", c)
            },
            prevUntil: function(a, b, c) {
                return _.dir(a, "previousSibling", c)
            },
            siblings: function(a) {
                return _.sibling((a.parentNode || {}).firstChild, a)
            },
            children: function(a) {
                return _.sibling(a.firstChild)
            },
            contents: function(a) {
                return a.contentDocument || _.merge([], a.childNodes)
            }
        }, function(a, b) {
            _.fn[a] = function(c, d) {
                var e = _.map(this, b, c);
                return "Until" !== a.slice(-5) && (d = c), d && "string" == typeof d && (e = _.filter(d, e)), this.length > 1 && (ma[a] || _.unique(e), la.test(a) && e.reverse()), this.pushStack(e)
            }
        });
        var na = /\S+/g,
            oa = {};
        _.Callbacks = function(a) {
            a = "string" == typeof a ? oa[a] || f(a) : _.extend({}, a);
            var b, c, d, e, g, h, i = [],
                j = !a.once && [],
                k = function(f) {
                    for (b = a.memory && f, c = !0, h = e || 0, e = 0, g = i.length, d = !0; i && g > h; h++)
                        if (i[h].apply(f[0], f[1]) === !1 && a.stopOnFalse) {
                            b = !1;
                            break
                        }
                    d = !1, i && (j ? j.length && k(j.shift()) : b ? i = [] : l.disable())
                },
                l = {
                    add: function() {
                        if (i) {
                            var c = i.length;
                            ! function f(b) {
                                _.each(b, function(b, c) {
                                    var d = _.type(c);
                                    "function" === d ? a.unique && l.has(c) || i.push(c) : c && c.length && "string" !== d && f(c)
                                })
                            }(arguments), d ? g = i.length : b && (e = c, k(b))
                        }
                        return this
                    },
                    remove: function() {
                        return i && _.each(arguments, function(a, b) {
                            for (var c;
                                (c = _.inArray(b, i, c)) > -1;) i.splice(c, 1), d && (g >= c && g--, h >= c && h--)
                        }), this
                    },
                    has: function(a) {
                        return a ? _.inArray(a, i) > -1 : !(!i || !i.length)
                    },
                    empty: function() {
                        return i = [], g = 0, this
                    },
                    disable: function() {
                        return i = j = b = void 0, this
                    },
                    disabled: function() {
                        return !i
                    },
                    lock: function() {
                        return j = void 0, b || l.disable(), this
                    },
                    locked: function() {
                        return !j
                    },
                    fireWith: function(a, b) {
                        return !i || c && !j || (b = b || [], b = [a, b.slice ? b.slice() : b], d ? j.push(b) : k(b)), this
                    },
                    fire: function() {
                        return l.fireWith(this, arguments), this
                    },
                    fired: function() {
                        return !!c
                    }
                };
            return l
        }, _.extend({
            Deferred: function(a) {
                var b = [
                        ["resolve", "done", _.Callbacks("once memory"), "resolved"],
                        ["reject", "fail", _.Callbacks("once memory"), "rejected"],
                        ["notify", "progress", _.Callbacks("memory")]
                    ],
                    c = "pending",
                    d = {
                        state: function() {
                            return c
                        },
                        always: function() {
                            return e.done(arguments).fail(arguments), this
                        },
                        then: function() {
                            var a = arguments;
                            return _.Deferred(function(c) {
                                _.each(b, function(b, f) {
                                    var g = _.isFunction(a[b]) && a[b];
                                    e[f[1]](function() {
                                        var a = g && g.apply(this, arguments);
                                        a && _.isFunction(a.promise) ? a.promise().done(c.resolve).fail(c.reject).progress(c.notify) : c[f[0] + "With"](this === d ? c.promise() : this, g ? [a] : arguments)
                                    })
                                }), a = null
                            }).promise()
                        },
                        promise: function(a) {
                            return null != a ? _.extend(a, d) : d
                        }
                    },
                    e = {};
                return d.pipe = d.then, _.each(b, function(a, f) {
                    var g = f[2],
                        h = f[3];
                    d[f[1]] = g.add, h && g.add(function() {
                        c = h
                    }, b[1 ^ a][2].disable, b[2][2].lock), e[f[0]] = function() {
                        return e[f[0] + "With"](this === e ? d : this, arguments), this
                    }, e[f[0] + "With"] = g.fireWith
                }), d.promise(e), a && a.call(e, e), e
            },
            when: function(a) {
                var b, c, d, e = 0,
                    f = R.call(arguments),
                    g = f.length,
                    h = 1 !== g || a && _.isFunction(a.promise) ? g : 0,
                    i = 1 === h ? a : _.Deferred(),
                    j = function(a, c, d) {
                        return function(e) {
                            c[a] = this, d[a] = arguments.length > 1 ? R.call(arguments) : e, d === b ? i.notifyWith(c, d) : --h || i.resolveWith(c, d)
                        }
                    };
                if (g > 1)
                    for (b = new Array(g), c = new Array(g), d = new Array(g); g > e; e++) f[e] && _.isFunction(f[e].promise) ? f[e].promise().done(j(e, d, f)).fail(i.reject).progress(j(e, c, b)) : --h;
                return h || i.resolveWith(d, f), i.promise()
            }
        });
        var pa;
        _.fn.ready = function(a) {
            return _.ready.promise().done(a), this
        }, _.extend({
            isReady: !1,
            readyWait: 1,
            holdReady: function(a) {
                a ? _.readyWait++ : _.ready(!0)
            },
            ready: function(a) {
                (a === !0 ? --_.readyWait : _.isReady) || (_.isReady = !0, a !== !0 && --_.readyWait > 0 || (pa.resolveWith(Z, [_]), _.fn.triggerHandler && (_(Z).triggerHandler("ready"), _(Z).off("ready"))))
            }
        }), _.ready.promise = function(b) {
            return pa || (pa = _.Deferred(), "complete" === Z.readyState ? setTimeout(_.ready) : (Z.addEventListener("DOMContentLoaded", g, !1), a.addEventListener("load", g, !1))), pa.promise(b)
        }, _.ready.promise();
        var qa = _.access = function(a, b, c, d, e, f, g) {
            var h = 0,
                i = a.length,
                j = null == c;
            if ("object" === _.type(c)) {
                e = !0;
                for (h in c) _.access(a, b, h, c[h], !0, f, g)
            } else if (void 0 !== d && (e = !0, _.isFunction(d) || (g = !0), j && (g ? (b.call(a, d), b = null) : (j = b, b = function(a, b, c) {
                    return j.call(_(a), c)
                })), b))
                for (; i > h; h++) b(a[h], c, g ? d : d.call(a[h], h, b(a[h], c)));
            return e ? a : j ? b.call(a) : i ? b(a[0], c) : f
        };
        _.acceptData = function(a) {
            return 1 === a.nodeType || 9 === a.nodeType || !+a.nodeType
        }, h.uid = 1, h.accepts = _.acceptData, h.prototype = {
            key: function(a) {
                if (!h.accepts(a)) return 0;
                var b = {},
                    c = a[this.expando];
                if (!c) {
                    c = h.uid++;
                    try {
                        b[this.expando] = {
                            value: c
                        }, Object.defineProperties(a, b)
                    } catch (d) {
                        b[this.expando] = c, _.extend(a, b)
                    }
                }
                return this.cache[c] || (this.cache[c] = {}), c
            },
            set: function(a, b, c) {
                var d, e = this.key(a),
                    f = this.cache[e];
                if ("string" == typeof b) f[b] = c;
                else if (_.isEmptyObject(f)) _.extend(this.cache[e], b);
                else
                    for (d in b) f[d] = b[d];
                return f
            },
            get: function(a, b) {
                var c = this.cache[this.key(a)];
                return void 0 === b ? c : c[b]
            },
            access: function(a, b, c) {
                var d;
                return void 0 === b || b && "string" == typeof b && void 0 === c ? (d = this.get(a, b), void 0 !== d ? d : this.get(a, _.camelCase(b))) : (this.set(a, b, c), void 0 !== c ? c : b)
            },
            remove: function(a, b) {
                var c, d, e, f = this.key(a),
                    g = this.cache[f];
                if (void 0 === b) this.cache[f] = {};
                else {
                    _.isArray(b) ? d = b.concat(b.map(_.camelCase)) : (e = _.camelCase(b), b in g ? d = [b, e] : (d = e, d = d in g ? [d] : d.match(na) || [])), c = d.length;
                    for (; c--;) delete g[d[c]]
                }
            },
            hasData: function(a) {
                return !_.isEmptyObject(this.cache[a[this.expando]] || {})
            },
            discard: function(a) {
                a[this.expando] && delete this.cache[a[this.expando]]
            }
        };
        var ra = new h,
            sa = new h,
            ta = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
            ua = /([A-Z])/g;
        _.extend({
            hasData: function(a) {
                return sa.hasData(a) || ra.hasData(a)
            },
            data: function(a, b, c) {
                return sa.access(a, b, c)
            },
            removeData: function(a, b) {
                sa.remove(a, b)
            },
            _data: function(a, b, c) {
                return ra.access(a, b, c)
            },
            _removeData: function(a, b) {
                ra.remove(a, b)
            }
        }), _.fn.extend({
            data: function(a, b) {
                var c, d, e, f = this[0],
                    g = f && f.attributes;
                if (void 0 === a) {
                    if (this.length && (e = sa.get(f), 1 === f.nodeType && !ra.get(f, "hasDataAttrs"))) {
                        for (c = g.length; c--;) g[c] && (d = g[c].name, 0 === d.indexOf("data-") && (d = _.camelCase(d.slice(5)), i(f, d, e[d])));
                        ra.set(f, "hasDataAttrs", !0)
                    }
                    return e
                }
                return "object" == typeof a ? this.each(function() {
                    sa.set(this, a)
                }) : qa(this, function(b) {
                    var c, d = _.camelCase(a);
                    if (f && void 0 === b) {
                        if (c = sa.get(f, a), void 0 !== c) return c;
                        if (c = sa.get(f, d), void 0 !== c) return c;
                        if (c = i(f, d, void 0), void 0 !== c) return c
                    } else this.each(function() {
                        var c = sa.get(this, d);
                        sa.set(this, d, b), -1 !== a.indexOf("-") && void 0 !== c && sa.set(this, a, b)
                    })
                }, null, b, arguments.length > 1, null, !0)
            },
            removeData: function(a) {
                return this.each(function() {
                    sa.remove(this, a)
                })
            }
        }), _.extend({
            queue: function(a, b, c) {
                var d;
                return a ? (b = (b || "fx") + "queue", d = ra.get(a, b), c && (!d || _.isArray(c) ? d = ra.access(a, b, _.makeArray(c)) : d.push(c)), d || []) : void 0
            },
            dequeue: function(a, b) {
                b = b || "fx";
                var c = _.queue(a, b),
                    d = c.length,
                    e = c.shift(),
                    f = _._queueHooks(a, b),
                    g = function() {
                        _.dequeue(a, b)
                    };
                "inprogress" === e && (e = c.shift(), d--), e && ("fx" === b && c.unshift("inprogress"), delete f.stop, e.call(a, g, f)), !d && f && f.empty.fire()
            },
            _queueHooks: function(a, b) {
                var c = b + "queueHooks";
                return ra.get(a, c) || ra.access(a, c, {
                    empty: _.Callbacks("once memory").add(function() {
                        ra.remove(a, [b + "queue", c])
                    })
                })
            }
        }), _.fn.extend({
            queue: function(a, b) {
                var c = 2;
                return "string" != typeof a && (b = a, a = "fx", c--), arguments.length < c ? _.queue(this[0], a) : void 0 === b ? this : this.each(function() {
                    var c = _.queue(this, a, b);
                    _._queueHooks(this, a), "fx" === a && "inprogress" !== c[0] && _.dequeue(this, a)
                })
            },
            dequeue: function(a) {
                return this.each(function() {
                    _.dequeue(this, a)
                })
            },
            clearQueue: function(a) {
                return this.queue(a || "fx", [])
            },
            promise: function(a, b) {
                var c, d = 1,
                    e = _.Deferred(),
                    f = this,
                    g = this.length,
                    h = function() {
                        --d || e.resolveWith(f, [f])
                    };
                for ("string" != typeof a && (b = a, a = void 0), a = a || "fx"; g--;) c = ra.get(f[g], a + "queueHooks"), c && c.empty && (d++, c.empty.add(h));
                return h(), e.promise(b)
            }
        });
        var va = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
            wa = ["Top", "Right", "Bottom", "Left"],
            xa = function(a, b) {
                return a = b || a, "none" === _.css(a, "display") || !_.contains(a.ownerDocument, a)
            },
            ya = /^(?:checkbox|radio)$/i;
        ! function() {
            var a = Z.createDocumentFragment(),
                b = a.appendChild(Z.createElement("div")),
                c = Z.createElement("input");
            c.setAttribute("type", "radio"), c.setAttribute("checked", "checked"), c.setAttribute("name", "t"), b.appendChild(c), Y.checkClone = b.cloneNode(!0).cloneNode(!0).lastChild.checked, b.innerHTML = "<textarea>x</textarea>", Y.noCloneChecked = !!b.cloneNode(!0).lastChild.defaultValue
        }();
        var za = "undefined";
        Y.focusinBubbles = "onfocusin" in a;
        var Aa = /^key/,
            Ba = /^(?:mouse|pointer|contextmenu)|click/,
            Ca = /^(?:focusinfocus|focusoutblur)$/,
            Da = /^([^.]*)(?:\.(.+)|)$/;
        _.event = {
            global: {},
            add: function(a, b, c, d, e) {
                var f, g, h, i, j, k, l, m, n, o, p, q = ra.get(a);
                if (q)
                    for (c.handler && (f = c, c = f.handler, e = f.selector), c.guid || (c.guid = _.guid++), (i = q.events) || (i = q.events = {}), (g = q.handle) || (g = q.handle = function(b) {
                            return typeof _ !== za && _.event.triggered !== b.type ? _.event.dispatch.apply(a, arguments) : void 0
                        }), b = (b || "").match(na) || [""], j = b.length; j--;) h = Da.exec(b[j]) || [], n = p = h[1], o = (h[2] || "").split(".").sort(), n && (l = _.event.special[n] || {}, n = (e ? l.delegateType : l.bindType) || n, l = _.event.special[n] || {}, k = _.extend({
                        type: n,
                        origType: p,
                        data: d,
                        handler: c,
                        guid: c.guid,
                        selector: e,
                        needsContext: e && _.expr.match.needsContext.test(e),
                        namespace: o.join(".")
                    }, f), (m = i[n]) || (m = i[n] = [], m.delegateCount = 0, l.setup && l.setup.call(a, d, o, g) !== !1 || a.addEventListener && a.addEventListener(n, g, !1)), l.add && (l.add.call(a, k), k.handler.guid || (k.handler.guid = c.guid)), e ? m.splice(m.delegateCount++, 0, k) : m.push(k), _.event.global[n] = !0)
            },
            remove: function(a, b, c, d, e) {
                var f, g, h, i, j, k, l, m, n, o, p, q = ra.hasData(a) && ra.get(a);
                if (q && (i = q.events)) {
                    for (b = (b || "").match(na) || [""], j = b.length; j--;)
                        if (h = Da.exec(b[j]) || [], n = p = h[1], o = (h[2] || "").split(".").sort(), n) {
                            for (l = _.event.special[n] || {}, n = (d ? l.delegateType : l.bindType) || n, m = i[n] || [], h = h[2] && new RegExp("(^|\\.)" + o.join("\\.(?:.*\\.|)") + "(\\.|$)"), g = f = m.length; f--;) k = m[f], !e && p !== k.origType || c && c.guid !== k.guid || h && !h.test(k.namespace) || d && d !== k.selector && ("**" !== d || !k.selector) || (m.splice(f, 1), k.selector && m.delegateCount--, l.remove && l.remove.call(a, k));
                            g && !m.length && (l.teardown && l.teardown.call(a, o, q.handle) !== !1 || _.removeEvent(a, n, q.handle), delete i[n])
                        } else
                            for (n in i) _.event.remove(a, n + b[j], c, d, !0);
                    _.isEmptyObject(i) && (delete q.handle, ra.remove(a, "events"))
                }
            },
            trigger: function(b, c, d, e) {
                var f, g, h, i, j, k, l, m = [d || Z],
                    n = X.call(b, "type") ? b.type : b,
                    o = X.call(b, "namespace") ? b.namespace.split(".") : [];
                if (g = h = d = d || Z, 3 !== d.nodeType && 8 !== d.nodeType && !Ca.test(n + _.event.triggered) && (n.indexOf(".") >= 0 && (o = n.split("."), n = o.shift(), o.sort()), j = n.indexOf(":") < 0 && "on" + n, b = b[_.expando] ? b : new _.Event(n, "object" == typeof b && b), b.isTrigger = e ? 2 : 3, b.namespace = o.join("."), b.namespace_re = b.namespace ? new RegExp("(^|\\.)" + o.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, b.result = void 0, b.target || (b.target = d), c = null == c ? [b] : _.makeArray(c, [b]), l = _.event.special[n] || {}, e || !l.trigger || l.trigger.apply(d, c) !== !1)) {
                    if (!e && !l.noBubble && !_.isWindow(d)) {
                        for (i = l.delegateType || n, Ca.test(i + n) || (g = g.parentNode); g; g = g.parentNode) m.push(g), h = g;
                        h === (d.ownerDocument || Z) && m.push(h.defaultView || h.parentWindow || a)
                    }
                    for (f = 0;
                        (g = m[f++]) && !b.isPropagationStopped();) b.type = f > 1 ? i : l.bindType || n, k = (ra.get(g, "events") || {})[b.type] && ra.get(g, "handle"), k && k.apply(g, c), k = j && g[j], k && k.apply && _.acceptData(g) && (b.result = k.apply(g, c), b.result === !1 && b.preventDefault());
                    return b.type = n, e || b.isDefaultPrevented() || l._default && l._default.apply(m.pop(), c) !== !1 || !_.acceptData(d) || j && _.isFunction(d[n]) && !_.isWindow(d) && (h = d[j], h && (d[j] = null), _.event.triggered = n, d[n](), _.event.triggered = void 0, h && (d[j] = h)), b.result
                }
            },
            dispatch: function(a) {
                a = _.event.fix(a);
                var b, c, d, e, f, g = [],
                    h = R.call(arguments),
                    i = (ra.get(this, "events") || {})[a.type] || [],
                    j = _.event.special[a.type] || {};
                if (h[0] = a, a.delegateTarget = this, !j.preDispatch || j.preDispatch.call(this, a) !== !1) {
                    for (g = _.event.handlers.call(this, a, i), b = 0;
                        (e = g[b++]) && !a.isPropagationStopped();)
                        for (a.currentTarget = e.elem, c = 0;
                            (f = e.handlers[c++]) && !a.isImmediatePropagationStopped();)(!a.namespace_re || a.namespace_re.test(f.namespace)) && (a.handleObj = f, a.data = f.data, d = ((_.event.special[f.origType] || {}).handle || f.handler).apply(e.elem, h), void 0 !== d && (a.result = d) === !1 && (a.preventDefault(), a.stopPropagation()));
                    return j.postDispatch && j.postDispatch.call(this, a), a.result
                }
            },
            handlers: function(a, b) {
                var c, d, e, f, g = [],
                    h = b.delegateCount,
                    i = a.target;
                if (h && i.nodeType && (!a.button || "click" !== a.type))
                    for (; i !== this; i = i.parentNode || this)
                        if (i.disabled !== !0 || "click" !== a.type) {
                            for (d = [], c = 0; h > c; c++) f = b[c], e = f.selector + " ", void 0 === d[e] && (d[e] = f.needsContext ? _(e, this).index(i) >= 0 : _.find(e, this, null, [i]).length), d[e] && d.push(f);
                            d.length && g.push({
                                elem: i,
                                handlers: d
                            })
                        }
                return h < b.length && g.push({
                    elem: this,
                    handlers: b.slice(h)
                }), g
            },
            props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
            fixHooks: {},
            keyHooks: {
                props: "char charCode key keyCode".split(" "),
                filter: function(a, b) {
                    return null == a.which && (a.which = null != b.charCode ? b.charCode : b.keyCode), a
                }
            },
            mouseHooks: {
                props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
                filter: function(a, b) {
                    var c, d, e, f = b.button;
                    return null == a.pageX && null != b.clientX && (c = a.target.ownerDocument || Z, d = c.documentElement, e = c.body, a.pageX = b.clientX + (d && d.scrollLeft || e && e.scrollLeft || 0) - (d && d.clientLeft || e && e.clientLeft || 0), a.pageY = b.clientY + (d && d.scrollTop || e && e.scrollTop || 0) - (d && d.clientTop || e && e.clientTop || 0)), a.which || void 0 === f || (a.which = 1 & f ? 1 : 2 & f ? 3 : 4 & f ? 2 : 0), a
                }
            },
            fix: function(a) {
                if (a[_.expando]) return a;
                var b, c, d, e = a.type,
                    f = a,
                    g = this.fixHooks[e];
                for (g || (this.fixHooks[e] = g = Ba.test(e) ? this.mouseHooks : Aa.test(e) ? this.keyHooks : {}), d = g.props ? this.props.concat(g.props) : this.props, a = new _.Event(f), b = d.length; b--;) c = d[b], a[c] = f[c];
                return a.target || (a.target = Z), 3 === a.target.nodeType && (a.target = a.target.parentNode), g.filter ? g.filter(a, f) : a
            },
            special: {
                load: {
                    noBubble: !0
                },
                focus: {
                    trigger: function() {
                        return this !== l() && this.focus ? (this.focus(), !1) : void 0
                    },
                    delegateType: "focusin"
                },
                blur: {
                    trigger: function() {
                        return this === l() && this.blur ? (this.blur(), !1) : void 0
                    },
                    delegateType: "focusout"
                },
                click: {
                    trigger: function() {
                        return "checkbox" === this.type && this.click && _.nodeName(this, "input") ? (this.click(), !1) : void 0
                    },
                    _default: function(a) {
                        return _.nodeName(a.target, "a")
                    }
                },
                beforeunload: {
                    postDispatch: function(a) {
                        void 0 !== a.result && a.originalEvent && (a.originalEvent.returnValue = a.result)
                    }
                }
            },
            simulate: function(a, b, c, d) {
                var e = _.extend(new _.Event, c, {
                    type: a,
                    isSimulated: !0,
                    originalEvent: {}
                });
                d ? _.event.trigger(e, null, b) : _.event.dispatch.call(b, e), e.isDefaultPrevented() && c.preventDefault()
            }
        }, _.removeEvent = function(a, b, c) {
            a.removeEventListener && a.removeEventListener(b, c, !1)
        }, _.Event = function(a, b) {
            return this instanceof _.Event ? (a && a.type ? (this.originalEvent = a, this.type = a.type, this.isDefaultPrevented = a.defaultPrevented || void 0 === a.defaultPrevented && a.returnValue === !1 ? j : k) : this.type = a, b && _.extend(this, b), this.timeStamp = a && a.timeStamp || _.now(), void(this[_.expando] = !0)) : new _.Event(a, b)
        }, _.Event.prototype = {
            isDefaultPrevented: k,
            isPropagationStopped: k,
            isImmediatePropagationStopped: k,
            preventDefault: function() {
                var a = this.originalEvent;
                this.isDefaultPrevented = j, a && a.preventDefault && a.preventDefault()
            },
            stopPropagation: function() {
                var a = this.originalEvent;
                this.isPropagationStopped = j, a && a.stopPropagation && a.stopPropagation()
            },
            stopImmediatePropagation: function() {
                var a = this.originalEvent;
                this.isImmediatePropagationStopped = j, a && a.stopImmediatePropagation && a.stopImmediatePropagation(), this.stopPropagation()
            }
        }, _.each({
            mouseenter: "mouseover",
            mouseleave: "mouseout",
            pointerenter: "pointerover",
            pointerleave: "pointerout"
        }, function(a, b) {
            _.event.special[a] = {
                delegateType: b,
                bindType: b,
                handle: function(a) {
                    var c, d = this,
                        e = a.relatedTarget,
                        f = a.handleObj;
                    return (!e || e !== d && !_.contains(d, e)) && (a.type = f.origType, c = f.handler.apply(this, arguments), a.type = b), c
                }
            }
        }), Y.focusinBubbles || _.each({
            focus: "focusin",
            blur: "focusout"
        }, function(a, b) {
            var c = function(a) {
                _.event.simulate(b, a.target, _.event.fix(a), !0)
            };
            _.event.special[b] = {
                setup: function() {
                    var d = this.ownerDocument || this,
                        e = ra.access(d, b);
                    e || d.addEventListener(a, c, !0), ra.access(d, b, (e || 0) + 1)
                },
                teardown: function() {
                    var d = this.ownerDocument || this,
                        e = ra.access(d, b) - 1;
                    e ? ra.access(d, b, e) : (d.removeEventListener(a, c, !0), ra.remove(d, b))
                }
            }
        }), _.fn.extend({
            on: function(a, b, c, d, e) {
                var f, g;
                if ("object" == typeof a) {
                    "string" != typeof b && (c = c || b, b = void 0);
                    for (g in a) this.on(g, b, c, a[g], e);
                    return this
                }
                if (null == c && null == d ? (d = b, c = b = void 0) : null == d && ("string" == typeof b ? (d = c, c = void 0) : (d = c, c = b, b = void 0)), d === !1) d = k;
                else if (!d) return this;
                return 1 === e && (f = d, d = function(a) {
                    return _().off(a), f.apply(this, arguments)
                }, d.guid = f.guid || (f.guid = _.guid++)), this.each(function() {
                    _.event.add(this, a, d, c, b)
                })
            },
            one: function(a, b, c, d) {
                return this.on(a, b, c, d, 1)
            },
            off: function(a, b, c) {
                var d, e;
                if (a && a.preventDefault && a.handleObj) return d = a.handleObj, _(a.delegateTarget).off(d.namespace ? d.origType + "." + d.namespace : d.origType, d.selector, d.handler), this;
                if ("object" == typeof a) {
                    for (e in a) this.off(e, b, a[e]);
                    return this
                }
                return (b === !1 || "function" == typeof b) && (c = b, b = void 0), c === !1 && (c = k), this.each(function() {
                    _.event.remove(this, a, c, b)
                })
            },
            trigger: function(a, b) {
                return this.each(function() {
                    _.event.trigger(a, b, this)
                })
            },
            triggerHandler: function(a, b) {
                var c = this[0];
                return c ? _.event.trigger(a, b, c, !0) : void 0
            }
        });
        var Ea = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
            Fa = /<([\w:]+)/,
            Ga = /<|&#?\w+;/,
            Ha = /<(?:script|style|link)/i,
            Ia = /checked\s*(?:[^=]|=\s*.checked.)/i,
            Ja = /^$|\/(?:java|ecma)script/i,
            Ka = /^true\/(.*)/,
            La = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,
            Ma = {
                option: [1, "<select multiple='multiple'>", "</select>"],
                thead: [1, "<table>", "</table>"],
                col: [2, "<table><colgroup>", "</colgroup></table>"],
                tr: [2, "<table><tbody>", "</tbody></table>"],
                td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
                _default: [0, "", ""]
            };
        Ma.optgroup = Ma.option, Ma.tbody = Ma.tfoot = Ma.colgroup = Ma.caption = Ma.thead, Ma.th = Ma.td, _.extend({
            clone: function(a, b, c) {
                var d, e, f, g, h = a.cloneNode(!0),
                    i = _.contains(a.ownerDocument, a);
                if (!(Y.noCloneChecked || 1 !== a.nodeType && 11 !== a.nodeType || _.isXMLDoc(a)))
                    for (g = r(h), f = r(a), d = 0, e = f.length; e > d; d++) s(f[d], g[d]);
                if (b)
                    if (c)
                        for (f = f || r(a), g = g || r(h), d = 0, e = f.length; e > d; d++) q(f[d], g[d]);
                    else q(a, h);
                return g = r(h, "script"), g.length > 0 && p(g, !i && r(a, "script")), h
            },
            buildFragment: function(a, b, c, d) {
                for (var e, f, g, h, i, j, k = b.createDocumentFragment(), l = [], m = 0, n = a.length; n > m; m++)
                    if (e = a[m], e || 0 === e)
                        if ("object" === _.type(e)) _.merge(l, e.nodeType ? [e] : e);
                        else if (Ga.test(e)) {
                    for (f = f || k.appendChild(b.createElement("div")), g = (Fa.exec(e) || ["", ""])[1].toLowerCase(), h = Ma[g] || Ma._default, f.innerHTML = h[1] + e.replace(Ea, "<$1></$2>") + h[2], j = h[0]; j--;) f = f.lastChild;
                    _.merge(l, f.childNodes), f = k.firstChild, f.textContent = ""
                } else l.push(b.createTextNode(e));
                for (k.textContent = "", m = 0; e = l[m++];)
                    if ((!d || -1 === _.inArray(e, d)) && (i = _.contains(e.ownerDocument, e), f = r(k.appendChild(e), "script"), i && p(f), c))
                        for (j = 0; e = f[j++];) Ja.test(e.type || "") && c.push(e);
                return k
            },
            cleanData: function(a) {
                for (var b, c, d, e, f = _.event.special, g = 0; void 0 !== (c = a[g]); g++) {
                    if (_.acceptData(c) && (e = c[ra.expando], e && (b = ra.cache[e]))) {
                        if (b.events)
                            for (d in b.events) f[d] ? _.event.remove(c, d) : _.removeEvent(c, d, b.handle);
                        ra.cache[e] && delete ra.cache[e]
                    }
                    delete sa.cache[c[sa.expando]]
                }
            }
        }), _.fn.extend({
            text: function(a) {
                return qa(this, function(a) {
                    return void 0 === a ? _.text(this) : this.empty().each(function() {
                        (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) && (this.textContent = a)
                    })
                }, null, a, arguments.length)
            },
            append: function() {
                return this.domManip(arguments, function(a) {
                    if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                        var b = m(this, a);
                        b.appendChild(a)
                    }
                })
            },
            prepend: function() {
                return this.domManip(arguments, function(a) {
                    if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                        var b = m(this, a);
                        b.insertBefore(a, b.firstChild)
                    }
                })
            },
            before: function() {
                return this.domManip(arguments, function(a) {
                    this.parentNode && this.parentNode.insertBefore(a, this)
                })
            },
            after: function() {
                return this.domManip(arguments, function(a) {
                    this.parentNode && this.parentNode.insertBefore(a, this.nextSibling)
                })
            },
            remove: function(a, b) {
                for (var c, d = a ? _.filter(a, this) : this, e = 0; null != (c = d[e]); e++) b || 1 !== c.nodeType || _.cleanData(r(c)), c.parentNode && (b && _.contains(c.ownerDocument, c) && p(r(c, "script")), c.parentNode.removeChild(c));
                return this
            },
            empty: function() {
                for (var a, b = 0; null != (a = this[b]); b++) 1 === a.nodeType && (_.cleanData(r(a, !1)), a.textContent = "");
                return this
            },
            clone: function(a, b) {
                return a = null == a ? !1 : a, b = null == b ? a : b, this.map(function() {
                    return _.clone(this, a, b)
                })
            },
            html: function(a) {
                return qa(this, function(a) {
                    var b = this[0] || {},
                        c = 0,
                        d = this.length;
                    if (void 0 === a && 1 === b.nodeType) return b.innerHTML;
                    if ("string" == typeof a && !Ha.test(a) && !Ma[(Fa.exec(a) || ["", ""])[1].toLowerCase()]) {
                        a = a.replace(Ea, "<$1></$2>");
                        try {
                            for (; d > c; c++) b = this[c] || {}, 1 === b.nodeType && (_.cleanData(r(b, !1)), b.innerHTML = a);
                            b = 0
                        } catch (e) {}
                    }
                    b && this.empty().append(a)
                }, null, a, arguments.length)
            },
            replaceWith: function() {
                var a = arguments[0];
                return this.domManip(arguments, function(b) {
                    a = this.parentNode, _.cleanData(r(this)), a && a.replaceChild(b, this)
                }), a && (a.length || a.nodeType) ? this : this.remove()
            },
            detach: function(a) {
                return this.remove(a, !0)
            },
            domManip: function(a, b) {
                a = S.apply([], a);
                var c, d, e, f, g, h, i = 0,
                    j = this.length,
                    k = this,
                    l = j - 1,
                    m = a[0],
                    p = _.isFunction(m);
                if (p || j > 1 && "string" == typeof m && !Y.checkClone && Ia.test(m)) return this.each(function(c) {
                    var d = k.eq(c);
                    p && (a[0] = m.call(this, c, d.html())), d.domManip(a, b)
                });
                if (j && (c = _.buildFragment(a, this[0].ownerDocument, !1, this), d = c.firstChild, 1 === c.childNodes.length && (c = d), d)) {
                    for (e = _.map(r(c, "script"), n), f = e.length; j > i; i++) g = c, i !== l && (g = _.clone(g, !0, !0), f && _.merge(e, r(g, "script"))), b.call(this[i], g, i);
                    if (f)
                        for (h = e[e.length - 1].ownerDocument, _.map(e, o), i = 0; f > i; i++) g = e[i], Ja.test(g.type || "") && !ra.access(g, "globalEval") && _.contains(h, g) && (g.src ? _._evalUrl && _._evalUrl(g.src) : _.globalEval(g.textContent.replace(La, "")))
                }
                return this
            }
        }), _.each({
            appendTo: "append",
            prependTo: "prepend",
            insertBefore: "before",
            insertAfter: "after",
            replaceAll: "replaceWith"
        }, function(a, b) {
            _.fn[a] = function(a) {
                for (var c, d = [], e = _(a), f = e.length - 1, g = 0; f >= g; g++) c = g === f ? this : this.clone(!0), _(e[g])[b](c), T.apply(d, c.get());
                return this.pushStack(d)
            }
        });
        var Na, Oa = {},
            Pa = /^margin/,
            Qa = new RegExp("^(" + va + ")(?!px)[a-z%]+$", "i"),
            Ra = function(a) {
                return a.ownerDocument.defaultView.getComputedStyle(a, null)
            };
        ! function() {
            function b() {
                g.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute", g.innerHTML = "", e.appendChild(f);
                var b = a.getComputedStyle(g, null);
                c = "1%" !== b.top, d = "4px" === b.width, e.removeChild(f)
            }
            var c, d, e = Z.documentElement,
                f = Z.createElement("div"),
                g = Z.createElement("div");
            g.style && (g.style.backgroundClip = "content-box", g.cloneNode(!0).style.backgroundClip = "", Y.clearCloneStyle = "content-box" === g.style.backgroundClip, f.style.cssText = "border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute", f.appendChild(g), a.getComputedStyle && _.extend(Y, {
                pixelPosition: function() {
                    return b(), c
                },
                boxSizingReliable: function() {
                    return null == d && b(), d
                },
                reliableMarginRight: function() {
                    var b, c = g.appendChild(Z.createElement("div"));
                    return c.style.cssText = g.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0", c.style.marginRight = c.style.width = "0", g.style.width = "1px", e.appendChild(f), b = !parseFloat(a.getComputedStyle(c, null).marginRight), e.removeChild(f), b
                }
            }))
        }(), _.swap = function(a, b, c, d) {
            var e, f, g = {};
            for (f in b) g[f] = a.style[f], a.style[f] = b[f];
            e = c.apply(a, d || []);
            for (f in b) a.style[f] = g[f];
            return e
        };
        var Sa = /^(none|table(?!-c[ea]).+)/,
            Ta = new RegExp("^(" + va + ")(.*)$", "i"),
            Ua = new RegExp("^([+-])=(" + va + ")", "i"),
            Va = {
                position: "absolute",
                visibility: "hidden",
                display: "block"
            },
            Wa = {
                letterSpacing: "0",
                fontWeight: "400"
            },
            Xa = ["Webkit", "O", "Moz", "ms"];
        _.extend({
            cssHooks: {
                opacity: {
                    get: function(a, b) {
                        if (b) {
                            var c = v(a, "opacity");
                            return "" === c ? "1" : c
                        }
                    }
                }
            },
            cssNumber: {
                columnCount: !0,
                fillOpacity: !0,
                flexGrow: !0,
                flexShrink: !0,
                fontWeight: !0,
                lineHeight: !0,
                opacity: !0,
                order: !0,
                orphans: !0,
                widows: !0,
                zIndex: !0,
                zoom: !0
            },
            cssProps: {
                "float": "cssFloat"
            },
            style: function(a, b, c, d) {
                if (a && 3 !== a.nodeType && 8 !== a.nodeType && a.style) {
                    var e, f, g, h = _.camelCase(b),
                        i = a.style;
                    return b = _.cssProps[h] || (_.cssProps[h] = x(i, h)), g = _.cssHooks[b] || _.cssHooks[h], void 0 === c ? g && "get" in g && void 0 !== (e = g.get(a, !1, d)) ? e : i[b] : (f = typeof c, "string" === f && (e = Ua.exec(c)) && (c = (e[1] + 1) * e[2] + parseFloat(_.css(a, b)), f = "number"), null != c && c === c && ("number" !== f || _.cssNumber[h] || (c += "px"), Y.clearCloneStyle || "" !== c || 0 !== b.indexOf("background") || (i[b] = "inherit"), g && "set" in g && void 0 === (c = g.set(a, c, d)) || (i[b] = c)), void 0)
                }
            },
            css: function(a, b, c, d) {
                var e, f, g, h = _.camelCase(b);
                return b = _.cssProps[h] || (_.cssProps[h] = x(a.style, h)), g = _.cssHooks[b] || _.cssHooks[h], g && "get" in g && (e = g.get(a, !0, c)), void 0 === e && (e = v(a, b, d)), "normal" === e && b in Wa && (e = Wa[b]), "" === c || c ? (f = parseFloat(e), c === !0 || _.isNumeric(f) ? f || 0 : e) : e
            }
        }), _.each(["height", "width"], function(a, b) {
            _.cssHooks[b] = {
                get: function(a, c, d) {
                    return c ? Sa.test(_.css(a, "display")) && 0 === a.offsetWidth ? _.swap(a, Va, function() {
                        return A(a, b, d)
                    }) : A(a, b, d) : void 0
                },
                set: function(a, c, d) {
                    var e = d && Ra(a);
                    return y(a, c, d ? z(a, b, d, "border-box" === _.css(a, "boxSizing", !1, e), e) : 0)
                }
            }
        }), _.cssHooks.marginRight = w(Y.reliableMarginRight, function(a, b) {
            return b ? _.swap(a, {
                display: "inline-block"
            }, v, [a, "marginRight"]) : void 0
        }), _.each({
            margin: "",
            padding: "",
            border: "Width"
        }, function(a, b) {
            _.cssHooks[a + b] = {
                expand: function(c) {
                    for (var d = 0, e = {}, f = "string" == typeof c ? c.split(" ") : [c]; 4 > d; d++) e[a + wa[d] + b] = f[d] || f[d - 2] || f[0];
                    return e
                }
            }, Pa.test(a) || (_.cssHooks[a + b].set = y)
        }), _.fn.extend({
            css: function(a, b) {
                return qa(this, function(a, b, c) {
                    var d, e, f = {},
                        g = 0;
                    if (_.isArray(b)) {
                        for (d = Ra(a), e = b.length; e > g; g++) f[b[g]] = _.css(a, b[g], !1, d);
                        return f
                    }
                    return void 0 !== c ? _.style(a, b, c) : _.css(a, b)
                }, a, b, arguments.length > 1)
            },
            show: function() {
                return B(this, !0)
            },
            hide: function() {
                return B(this)
            },
            toggle: function(a) {
                return "boolean" == typeof a ? a ? this.show() : this.hide() : this.each(function() {
                    xa(this) ? _(this).show() : _(this).hide()
                })
            }
        }), _.Tween = C, C.prototype = {
            constructor: C,
            init: function(a, b, c, d, e, f) {
                this.elem = a, this.prop = c, this.easing = e || "swing", this.options = b, this.start = this.now = this.cur(), this.end = d, this.unit = f || (_.cssNumber[c] ? "" : "px")
            },
            cur: function() {
                var a = C.propHooks[this.prop];
                return a && a.get ? a.get(this) : C.propHooks._default.get(this)
            },
            run: function(a) {
                var b, c = C.propHooks[this.prop];
                return this.pos = b = this.options.duration ? _.easing[this.easing](a, this.options.duration * a, 0, 1, this.options.duration) : a, this.now = (this.end - this.start) * b + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), c && c.set ? c.set(this) : C.propHooks._default.set(this), this
            }
        }, C.prototype.init.prototype = C.prototype, C.propHooks = {
            _default: {
                get: function(a) {
                    var b;
                    return null == a.elem[a.prop] || a.elem.style && null != a.elem.style[a.prop] ? (b = _.css(a.elem, a.prop, ""), b && "auto" !== b ? b : 0) : a.elem[a.prop]
                },
                set: function(a) {
                    _.fx.step[a.prop] ? _.fx.step[a.prop](a) : a.elem.style && (null != a.elem.style[_.cssProps[a.prop]] || _.cssHooks[a.prop]) ? _.style(a.elem, a.prop, a.now + a.unit) : a.elem[a.prop] = a.now
                }
            }
        }, C.propHooks.scrollTop = C.propHooks.scrollLeft = {
            set: function(a) {
                a.elem.nodeType && a.elem.parentNode && (a.elem[a.prop] = a.now)
            }
        }, _.easing = {
            linear: function(a) {
                return a
            },
            swing: function(a) {
                return .5 - Math.cos(a * Math.PI) / 2
            }
        }, _.fx = C.prototype.init, _.fx.step = {};
        var Ya, Za, $a = /^(?:toggle|show|hide)$/,
            _a = new RegExp("^(?:([+-])=|)(" + va + ")([a-z%]*)$", "i"),
            ab = /queueHooks$/,
            bb = [G],
            cb = {
                "*": [function(a, b) {
                    var c = this.createTween(a, b),
                        d = c.cur(),
                        e = _a.exec(b),
                        f = e && e[3] || (_.cssNumber[a] ? "" : "px"),
                        g = (_.cssNumber[a] || "px" !== f && +d) && _a.exec(_.css(c.elem, a)),
                        h = 1,
                        i = 20;
                    if (g && g[3] !== f) {
                        f = f || g[3], e = e || [], g = +d || 1;
                        do h = h || ".5", g /= h, _.style(c.elem, a, g + f); while (h !== (h = c.cur() / d) && 1 !== h && --i)
                    }
                    return e && (g = c.start = +g || +d || 0, c.unit = f, c.end = e[1] ? g + (e[1] + 1) * e[2] : +e[2]), c
                }]
            };
        _.Animation = _.extend(I, {
                tweener: function(a, b) {
                    _.isFunction(a) ? (b = a, a = ["*"]) : a = a.split(" ");
                    for (var c, d = 0, e = a.length; e > d; d++) c = a[d], cb[c] = cb[c] || [], cb[c].unshift(b)
                },
                prefilter: function(a, b) {
                    b ? bb.unshift(a) : bb.push(a)
                }
            }), _.speed = function(a, b, c) {
                var d = a && "object" == typeof a ? _.extend({}, a) : {
                    complete: c || !c && b || _.isFunction(a) && a,
                    duration: a,
                    easing: c && b || b && !_.isFunction(b) && b
                };
                return d.duration = _.fx.off ? 0 : "number" == typeof d.duration ? d.duration : d.duration in _.fx.speeds ? _.fx.speeds[d.duration] : _.fx.speeds._default, (null == d.queue || d.queue === !0) && (d.queue = "fx"), d.old = d.complete, d.complete = function() {
                    _.isFunction(d.old) && d.old.call(this), d.queue && _.dequeue(this, d.queue)
                }, d
            }, _.fn.extend({
                fadeTo: function(a, b, c, d) {
                    return this.filter(xa).css("opacity", 0).show().end().animate({
                        opacity: b
                    }, a, c, d)
                },
                animate: function(a, b, c, d) {
                    var e = _.isEmptyObject(a),
                        f = _.speed(b, c, d),
                        g = function() {
                            var b = I(this, _.extend({}, a), f);
                            (e || ra.get(this, "finish")) && b.stop(!0)
                        };
                    return g.finish = g, e || f.queue === !1 ? this.each(g) : this.queue(f.queue, g)
                },
                stop: function(a, b, c) {
                    var d = function(a) {
                        var b = a.stop;
                        delete a.stop, b(c)
                    };
                    return "string" != typeof a && (c = b, b = a, a = void 0), b && a !== !1 && this.queue(a || "fx", []), this.each(function() {
                        var b = !0,
                            e = null != a && a + "queueHooks",
                            f = _.timers,
                            g = ra.get(this);
                        if (e) g[e] && g[e].stop && d(g[e]);
                        else
                            for (e in g) g[e] && g[e].stop && ab.test(e) && d(g[e]);
                        for (e = f.length; e--;) f[e].elem !== this || null != a && f[e].queue !== a || (f[e].anim.stop(c), b = !1, f.splice(e, 1));
                        (b || !c) && _.dequeue(this, a)
                    })
                },
                finish: function(a) {
                    return a !== !1 && (a = a || "fx"), this.each(function() {
                        var b, c = ra.get(this),
                            d = c[a + "queue"],
                            e = c[a + "queueHooks"],
                            f = _.timers,
                            g = d ? d.length : 0;
                        for (c.finish = !0, _.queue(this, a, []), e && e.stop && e.stop.call(this, !0), b = f.length; b--;) f[b].elem === this && f[b].queue === a && (f[b].anim.stop(!0), f.splice(b, 1));
                        for (b = 0; g > b; b++) d[b] && d[b].finish && d[b].finish.call(this);
                        delete c.finish
                    })
                }
            }), _.each(["toggle", "show", "hide"], function(a, b) {
                var c = _.fn[b];
                _.fn[b] = function(a, d, e) {
                    return null == a || "boolean" == typeof a ? c.apply(this, arguments) : this.animate(E(b, !0), a, d, e)
                }
            }), _.each({
                slideDown: E("show"),
                slideUp: E("hide"),
                slideToggle: E("toggle"),
                fadeIn: {
                    opacity: "show"
                },
                fadeOut: {
                    opacity: "hide"
                },
                fadeToggle: {
                    opacity: "toggle"
                }
            }, function(a, b) {
                _.fn[a] = function(a, c, d) {
                    return this.animate(b, a, c, d)
                }
            }), _.timers = [], _.fx.tick = function() {
                var a, b = 0,
                    c = _.timers;
                for (Ya = _.now(); b < c.length; b++) a = c[b], a() || c[b] !== a || c.splice(b--, 1);
                c.length || _.fx.stop(), Ya = void 0
            }, _.fx.timer = function(a) {
                _.timers.push(a), a() ? _.fx.start() : _.timers.pop()
            }, _.fx.interval = 13, _.fx.start = function() {
                Za || (Za = setInterval(_.fx.tick, _.fx.interval))
            }, _.fx.stop = function() {
                clearInterval(Za), Za = null
            }, _.fx.speeds = {
                slow: 600,
                fast: 200,
                _default: 400
            }, _.fn.delay = function(a, b) {
                return a = _.fx ? _.fx.speeds[a] || a : a, b = b || "fx", this.queue(b, function(b, c) {
                    var d = setTimeout(b, a);
                    c.stop = function() {
                        clearTimeout(d)
                    }
                })
            },
            function() {
                var a = Z.createElement("input"),
                    b = Z.createElement("select"),
                    c = b.appendChild(Z.createElement("option"));
                a.type = "checkbox", Y.checkOn = "" !== a.value, Y.optSelected = c.selected, b.disabled = !0, Y.optDisabled = !c.disabled, a = Z.createElement("input"), a.value = "t", a.type = "radio", Y.radioValue = "t" === a.value
            }();
        var db, eb, fb = _.expr.attrHandle;
        _.fn.extend({
            attr: function(a, b) {
                return qa(this, _.attr, a, b, arguments.length > 1)
            },
            removeAttr: function(a) {
                return this.each(function() {
                    _.removeAttr(this, a)
                })
            }
        }), _.extend({
            attr: function(a, b, c) {
                var d, e, f = a.nodeType;
                if (a && 3 !== f && 8 !== f && 2 !== f) return typeof a.getAttribute === za ? _.prop(a, b, c) : (1 === f && _.isXMLDoc(a) || (b = b.toLowerCase(), d = _.attrHooks[b] || (_.expr.match.bool.test(b) ? eb : db)), void 0 === c ? d && "get" in d && null !== (e = d.get(a, b)) ? e : (e = _.find.attr(a, b), null == e ? void 0 : e) : null !== c ? d && "set" in d && void 0 !== (e = d.set(a, c, b)) ? e : (a.setAttribute(b, c + ""), c) : void _.removeAttr(a, b))
            },
            removeAttr: function(a, b) {
                var c, d, e = 0,
                    f = b && b.match(na);
                if (f && 1 === a.nodeType)
                    for (; c = f[e++];) d = _.propFix[c] || c, _.expr.match.bool.test(c) && (a[d] = !1), a.removeAttribute(c)
            },
            attrHooks: {
                type: {
                    set: function(a, b) {
                        if (!Y.radioValue && "radio" === b && _.nodeName(a, "input")) {
                            var c = a.value;
                            return a.setAttribute("type", b), c && (a.value = c), b
                        }
                    }
                }
            }
        }), eb = {
            set: function(a, b, c) {
                return b === !1 ? _.removeAttr(a, c) : a.setAttribute(c, c), c
            }
        }, _.each(_.expr.match.bool.source.match(/\w+/g), function(a, b) {
            var c = fb[b] || _.find.attr;
            fb[b] = function(a, b, d) {
                var e, f;
                return d || (f = fb[b], fb[b] = e, e = null != c(a, b, d) ? b.toLowerCase() : null, fb[b] = f), e
            }
        });
        var gb = /^(?:input|select|textarea|button)$/i;
        _.fn.extend({
            prop: function(a, b) {
                return qa(this, _.prop, a, b, arguments.length > 1)
            },
            removeProp: function(a) {
                return this.each(function() {
                    delete this[_.propFix[a] || a]
                })
            }
        }), _.extend({
            propFix: {
                "for": "htmlFor",
                "class": "className"
            },
            prop: function(a, b, c) {
                var d, e, f, g = a.nodeType;
                if (a && 3 !== g && 8 !== g && 2 !== g) return f = 1 !== g || !_.isXMLDoc(a), f && (b = _.propFix[b] || b, e = _.propHooks[b]), void 0 !== c ? e && "set" in e && void 0 !== (d = e.set(a, c, b)) ? d : a[b] = c : e && "get" in e && null !== (d = e.get(a, b)) ? d : a[b]
            },
            propHooks: {
                tabIndex: {
                    get: function(a) {
                        return a.hasAttribute("tabindex") || gb.test(a.nodeName) || a.href ? a.tabIndex : -1
                    }
                }
            }
        }), Y.optSelected || (_.propHooks.selected = {
            get: function(a) {
                var b = a.parentNode;
                return b && b.parentNode && b.parentNode.selectedIndex, null
            }
        }), _.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function() {
            _.propFix[this.toLowerCase()] = this
        });
        var hb = /[\t\r\n\f]/g;
        _.fn.extend({
            addClass: function(a) {
                var b, c, d, e, f, g, h = "string" == typeof a && a,
                    i = 0,
                    j = this.length;
                if (_.isFunction(a)) return this.each(function(b) {
                    _(this).addClass(a.call(this, b, this.className))
                });
                if (h)
                    for (b = (a || "").match(na) || []; j > i; i++)
                        if (c = this[i], d = 1 === c.nodeType && (c.className ? (" " + c.className + " ").replace(hb, " ") : " ")) {
                            for (f = 0; e = b[f++];) d.indexOf(" " + e + " ") < 0 && (d += e + " ");
                            g = _.trim(d), c.className !== g && (c.className = g)
                        }
                return this
            },
            removeClass: function(a) {
                var b, c, d, e, f, g, h = 0 === arguments.length || "string" == typeof a && a,
                    i = 0,
                    j = this.length;
                if (_.isFunction(a)) return this.each(function(b) {
                    _(this).removeClass(a.call(this, b, this.className))
                });
                if (h)
                    for (b = (a || "").match(na) || []; j > i; i++)
                        if (c = this[i], d = 1 === c.nodeType && (c.className ? (" " + c.className + " ").replace(hb, " ") : "")) {
                            for (f = 0; e = b[f++];)
                                for (; d.indexOf(" " + e + " ") >= 0;) d = d.replace(" " + e + " ", " ");
                            g = a ? _.trim(d) : "", c.className !== g && (c.className = g)
                        }
                return this
            },
            toggleClass: function(a, b) {
                var c = typeof a;
                return "boolean" == typeof b && "string" === c ? b ? this.addClass(a) : this.removeClass(a) : this.each(_.isFunction(a) ? function(c) {
                    _(this).toggleClass(a.call(this, c, this.className, b), b)
                } : function() {
                    if ("string" === c)
                        for (var b, d = 0, e = _(this), f = a.match(na) || []; b = f[d++];) e.hasClass(b) ? e.removeClass(b) : e.addClass(b);
                    else(c === za || "boolean" === c) && (this.className && ra.set(this, "__className__", this.className), this.className = this.className || a === !1 ? "" : ra.get(this, "__className__") || "")
                })
            },
            hasClass: function(a) {
                for (var b = " " + a + " ", c = 0, d = this.length; d > c; c++)
                    if (1 === this[c].nodeType && (" " + this[c].className + " ").replace(hb, " ").indexOf(b) >= 0) return !0;
                return !1
            }
        });
        var ib = /\r/g;
        _.fn.extend({
            val: function(a) {
                var b, c, d, e = this[0]; {
                    if (arguments.length) return d = _.isFunction(a), this.each(function(c) {
                        var e;
                        1 === this.nodeType && (e = d ? a.call(this, c, _(this).val()) : a, null == e ? e = "" : "number" == typeof e ? e += "" : _.isArray(e) && (e = _.map(e, function(a) {
                            return null == a ? "" : a + ""
                        })), b = _.valHooks[this.type] || _.valHooks[this.nodeName.toLowerCase()], b && "set" in b && void 0 !== b.set(this, e, "value") || (this.value = e))
                    });
                    if (e) return b = _.valHooks[e.type] || _.valHooks[e.nodeName.toLowerCase()], b && "get" in b && void 0 !== (c = b.get(e, "value")) ? c : (c = e.value, "string" == typeof c ? c.replace(ib, "") : null == c ? "" : c)
                }
            }
        }), _.extend({
            valHooks: {
                option: {
                    get: function(a) {
                        var b = _.find.attr(a, "value");
                        return null != b ? b : _.trim(_.text(a))
                    }
                },
                select: {
                    get: function(a) {
                        for (var b, c, d = a.options, e = a.selectedIndex, f = "select-one" === a.type || 0 > e, g = f ? null : [], h = f ? e + 1 : d.length, i = 0 > e ? h : f ? e : 0; h > i; i++)
                            if (c = d[i], !(!c.selected && i !== e || (Y.optDisabled ? c.disabled : null !== c.getAttribute("disabled")) || c.parentNode.disabled && _.nodeName(c.parentNode, "optgroup"))) {
                                if (b = _(c).val(), f) return b;
                                g.push(b)
                            }
                        return g
                    },
                    set: function(a, b) {
                        for (var c, d, e = a.options, f = _.makeArray(b), g = e.length; g--;) d = e[g], (d.selected = _.inArray(d.value, f) >= 0) && (c = !0);
                        return c || (a.selectedIndex = -1), f
                    }
                }
            }
        }), _.each(["radio", "checkbox"], function() {
            _.valHooks[this] = {
                set: function(a, b) {
                    return _.isArray(b) ? a.checked = _.inArray(_(a).val(), b) >= 0 : void 0
                }
            }, Y.checkOn || (_.valHooks[this].get = function(a) {
                return null === a.getAttribute("value") ? "on" : a.value
            })
        }), _.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function(a, b) {
            _.fn[b] = function(a, c) {
                return arguments.length > 0 ? this.on(b, null, a, c) : this.trigger(b)
            }
        }), _.fn.extend({
            hover: function(a, b) {
                return this.mouseenter(a).mouseleave(b || a)
            },
            bind: function(a, b, c) {
                return this.on(a, null, b, c)
            },
            unbind: function(a, b) {
                return this.off(a, null, b)
            },
            delegate: function(a, b, c, d) {
                return this.on(b, a, c, d)
            },
            undelegate: function(a, b, c) {
                return 1 === arguments.length ? this.off(a, "**") : this.off(b, a || "**", c)
            }
        });
        var jb = _.now(),
            kb = /\?/;
        _.parseJSON = function(a) {
            return JSON.parse(a + "")
        }, _.parseXML = function(a) {
            var b, c;
            if (!a || "string" != typeof a) return null;
            try {
                c = new DOMParser, b = c.parseFromString(a, "text/xml")
            } catch (d) {
                b = void 0
            }
            return (!b || b.getElementsByTagName("parsererror").length) && _.error("Invalid XML: " + a), b
        };
        var lb, mb, nb = /#.*$/,
            ob = /([?&])_=[^&]*/,
            pb = /^(.*?):[ \t]*([^\r\n]*)$/gm,
            qb = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
            rb = /^(?:GET|HEAD)$/,
            sb = /^\/\//,
            tb = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,
            ub = {},
            vb = {},
            wb = "*/".concat("*");
        try {
            mb = location.href
        } catch (xb) {
            mb = Z.createElement("a"), mb.href = "", mb = mb.href
        }
        lb = tb.exec(mb.toLowerCase()) || [], _.extend({
            active: 0,
            lastModified: {},
            etag: {},
            ajaxSettings: {
                url: mb,
                type: "GET",
                isLocal: qb.test(lb[1]),
                global: !0,
                processData: !0,
                async: !0,
                contentType: "application/x-www-form-urlencoded; charset=UTF-8",
                accepts: {
                    "*": wb,
                    text: "text/plain",
                    html: "text/html",
                    xml: "application/xml, text/xml",
                    json: "application/json, text/javascript"
                },
                contents: {
                    xml: /xml/,
                    html: /html/,
                    json: /json/
                },
                responseFields: {
                    xml: "responseXML",
                    text: "responseText",
                    json: "responseJSON"
                },
                converters: {
                    "* text": String,
                    "text html": !0,
                    "text json": _.parseJSON,
                    "text xml": _.parseXML
                },
                flatOptions: {
                    url: !0,
                    context: !0
                }
            },
            ajaxSetup: function(a, b) {
                return b ? L(L(a, _.ajaxSettings), b) : L(_.ajaxSettings, a)
            },
            ajaxPrefilter: J(ub),
            ajaxTransport: J(vb),
            ajax: function(a, b) {
                function c(a, b, c, g) {
                    var i, k, r, s, u, w = b;
                    2 !== t && (t = 2, h && clearTimeout(h), d = void 0, f = g || "", v.readyState = a > 0 ? 4 : 0, i = a >= 200 && 300 > a || 304 === a, c && (s = M(l, v, c)), s = N(l, s, v, i), i ? (l.ifModified && (u = v.getResponseHeader("Last-Modified"), u && (_.lastModified[e] = u), u = v.getResponseHeader("etag"), u && (_.etag[e] = u)), 204 === a || "HEAD" === l.type ? w = "nocontent" : 304 === a ? w = "notmodified" : (w = s.state, k = s.data, r = s.error, i = !r)) : (r = w, (a || !w) && (w = "error", 0 > a && (a = 0))), v.status = a, v.statusText = (b || w) + "", i ? o.resolveWith(m, [k, w, v]) : o.rejectWith(m, [v, w, r]), v.statusCode(q), q = void 0, j && n.trigger(i ? "ajaxSuccess" : "ajaxError", [v, l, i ? k : r]), p.fireWith(m, [v, w]), j && (n.trigger("ajaxComplete", [v, l]), --_.active || _.event.trigger("ajaxStop")))
                }
                "object" == typeof a && (b = a, a = void 0), b = b || {};
                var d, e, f, g, h, i, j, k, l = _.ajaxSetup({}, b),
                    m = l.context || l,
                    n = l.context && (m.nodeType || m.jquery) ? _(m) : _.event,
                    o = _.Deferred(),
                    p = _.Callbacks("once memory"),
                    q = l.statusCode || {},
                    r = {},
                    s = {},
                    t = 0,
                    u = "canceled",
                    v = {
                        readyState: 0,
                        getResponseHeader: function(a) {
                            var b;
                            if (2 === t) {
                                if (!g)
                                    for (g = {}; b = pb.exec(f);) g[b[1].toLowerCase()] = b[2];
                                b = g[a.toLowerCase()]
                            }
                            return null == b ? null : b
                        },
                        getAllResponseHeaders: function() {
                            return 2 === t ? f : null
                        },
                        setRequestHeader: function(a, b) {
                            var c = a.toLowerCase();
                            return t || (a = s[c] = s[c] || a, r[a] = b), this
                        },
                        overrideMimeType: function(a) {
                            return t || (l.mimeType = a), this
                        },
                        statusCode: function(a) {
                            var b;
                            if (a)
                                if (2 > t)
                                    for (b in a) q[b] = [q[b], a[b]];
                                else v.always(a[v.status]);
                            return this
                        },
                        abort: function(a) {
                            var b = a || u;
                            return d && d.abort(b), c(0, b), this
                        }
                    };
                if (o.promise(v).complete = p.add, v.success = v.done, v.error = v.fail, l.url = ((a || l.url || mb) + "").replace(nb, "").replace(sb, lb[1] + "//"), l.type = b.method || b.type || l.method || l.type, l.dataTypes = _.trim(l.dataType || "*").toLowerCase().match(na) || [""], null == l.crossDomain && (i = tb.exec(l.url.toLowerCase()), l.crossDomain = !(!i || i[1] === lb[1] && i[2] === lb[2] && (i[3] || ("http:" === i[1] ? "80" : "443")) === (lb[3] || ("http:" === lb[1] ? "80" : "443")))), l.data && l.processData && "string" != typeof l.data && (l.data = _.param(l.data, l.traditional)), K(ub, l, b, v), 2 === t) return v;
                j = l.global, j && 0 === _.active++ && _.event.trigger("ajaxStart"), l.type = l.type.toUpperCase(), l.hasContent = !rb.test(l.type), e = l.url, l.hasContent || (l.data && (e = l.url += (kb.test(e) ? "&" : "?") + l.data, delete l.data), l.cache === !1 && (l.url = ob.test(e) ? e.replace(ob, "$1_=" + jb++) : e + (kb.test(e) ? "&" : "?") + "_=" + jb++)), l.ifModified && (_.lastModified[e] && v.setRequestHeader("If-Modified-Since", _.lastModified[e]), _.etag[e] && v.setRequestHeader("If-None-Match", _.etag[e])), (l.data && l.hasContent && l.contentType !== !1 || b.contentType) && v.setRequestHeader("Content-Type", l.contentType), v.setRequestHeader("Accept", l.dataTypes[0] && l.accepts[l.dataTypes[0]] ? l.accepts[l.dataTypes[0]] + ("*" !== l.dataTypes[0] ? ", " + wb + "; q=0.01" : "") : l.accepts["*"]);
                for (k in l.headers) v.setRequestHeader(k, l.headers[k]);
                if (l.beforeSend && (l.beforeSend.call(m, v, l) === !1 || 2 === t)) return v.abort();
                u = "abort";
                for (k in {
                        success: 1,
                        error: 1,
                        complete: 1
                    }) v[k](l[k]);
                if (d = K(vb, l, b, v)) {
                    v.readyState = 1, j && n.trigger("ajaxSend", [v, l]), l.async && l.timeout > 0 && (h = setTimeout(function() {
                        v.abort("timeout")
                    }, l.timeout));
                    try {
                        t = 1, d.send(r, c)
                    } catch (w) {
                        if (!(2 > t)) throw w;
                        c(-1, w)
                    }
                } else c(-1, "No Transport");
                return v
            },
            getJSON: function(a, b, c) {
                return _.get(a, b, c, "json")
            },
            getScript: function(a, b) {
                return _.get(a, void 0, b, "script")
            }
        }), _.each(["get", "post"], function(a, b) {
            _[b] = function(a, c, d, e) {
                return _.isFunction(c) && (e = e || d, d = c, c = void 0), _.ajax({
                    url: a,
                    type: b,
                    dataType: e,
                    data: c,
                    success: d
                })
            }
        }), _.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function(a, b) {
            _.fn[b] = function(a) {
                return this.on(b, a)
            }
        }), _._evalUrl = function(a) {
            return _.ajax({
                url: a,
                type: "GET",
                dataType: "script",
                async: !1,
                global: !1,
                "throws": !0
            })
        }, _.fn.extend({
            wrapAll: function(a) {
                var b;
                return _.isFunction(a) ? this.each(function(b) {
                    _(this).wrapAll(a.call(this, b))
                }) : (this[0] && (b = _(a, this[0].ownerDocument).eq(0).clone(!0), this[0].parentNode && b.insertBefore(this[0]), b.map(function() {
                    for (var a = this; a.firstElementChild;) a = a.firstElementChild;
                    return a
                }).append(this)), this)
            },
            wrapInner: function(a) {
                return this.each(_.isFunction(a) ? function(b) {
                    _(this).wrapInner(a.call(this, b))
                } : function() {
                    var b = _(this),
                        c = b.contents();
                    c.length ? c.wrapAll(a) : b.append(a)
                })
            },
            wrap: function(a) {
                var b = _.isFunction(a);
                return this.each(function(c) {
                    _(this).wrapAll(b ? a.call(this, c) : a)
                })
            },
            unwrap: function() {
                return this.parent().each(function() {
                    _.nodeName(this, "body") || _(this).replaceWith(this.childNodes)
                }).end()
            }
        }), _.expr.filters.hidden = function(a) {
            return a.offsetWidth <= 0 && a.offsetHeight <= 0
        }, _.expr.filters.visible = function(a) {
            return !_.expr.filters.hidden(a)
        };
        var yb = /%20/g,
            zb = /\[\]$/,
            Ab = /\r?\n/g,
            Bb = /^(?:submit|button|image|reset|file)$/i,
            Cb = /^(?:input|select|textarea|keygen)/i;
        _.param = function(a, b) {
            var c, d = [],
                e = function(a, b) {
                    b = _.isFunction(b) ? b() : null == b ? "" : b, d[d.length] = encodeURIComponent(a) + "=" + encodeURIComponent(b)
                };
            if (void 0 === b && (b = _.ajaxSettings && _.ajaxSettings.traditional), _.isArray(a) || a.jquery && !_.isPlainObject(a)) _.each(a, function() {
                e(this.name, this.value)
            });
            else
                for (c in a) O(c, a[c], b, e);
            return d.join("&").replace(yb, "+")
        }, _.fn.extend({
            serialize: function() {
                return _.param(this.serializeArray())
            },
            serializeArray: function() {
                return this.map(function() {
                    var a = _.prop(this, "elements");
                    return a ? _.makeArray(a) : this
                }).filter(function() {
                    var a = this.type;
                    return this.name && !_(this).is(":disabled") && Cb.test(this.nodeName) && !Bb.test(a) && (this.checked || !ya.test(a))
                }).map(function(a, b) {
                    var c = _(this).val();
                    return null == c ? null : _.isArray(c) ? _.map(c, function(a) {
                        return {
                            name: b.name,
                            value: a.replace(Ab, "\r\n")
                        }
                    }) : {
                        name: b.name,
                        value: c.replace(Ab, "\r\n")
                    }
                }).get()
            }
        }), _.ajaxSettings.xhr = function() {
            try {
                return new XMLHttpRequest
            } catch (a) {}
        };
        var Db = 0,
            Eb = {},
            Fb = {
                0: 200,
                1223: 204
            },
            Gb = _.ajaxSettings.xhr();
        a.ActiveXObject && _(a).on("unload", function() {
            for (var a in Eb) Eb[a]()
        }), Y.cors = !!Gb && "withCredentials" in Gb, Y.ajax = Gb = !!Gb, _.ajaxTransport(function(a) {
            var b;
            return Y.cors || Gb && !a.crossDomain ? {
                send: function(c, d) {
                    var e, f = a.xhr(),
                        g = ++Db;
                    if (f.open(a.type, a.url, a.async, a.username, a.password), a.xhrFields)
                        for (e in a.xhrFields) f[e] = a.xhrFields[e];
                    a.mimeType && f.overrideMimeType && f.overrideMimeType(a.mimeType), a.crossDomain || c["X-Requested-With"] || (c["X-Requested-With"] = "XMLHttpRequest");
                    for (e in c) f.setRequestHeader(e, c[e]);
                    b = function(a) {
                        return function() {
                            b && (delete Eb[g], b = f.onload = f.onerror = null, "abort" === a ? f.abort() : "error" === a ? d(f.status, f.statusText) : d(Fb[f.status] || f.status, f.statusText, "string" == typeof f.responseText ? {
                                text: f.responseText
                            } : void 0, f.getAllResponseHeaders()))
                        }
                    }, f.onload = b(), f.onerror = b("error"), b = Eb[g] = b("abort");
                    try {
                        f.send(a.hasContent && a.data || null)
                    } catch (h) {
                        if (b) throw h
                    }
                },
                abort: function() {
                    b && b()
                }
            } : void 0
        }), _.ajaxSetup({
            accepts: {
                script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
            },
            contents: {
                script: /(?:java|ecma)script/
            },
            converters: {
                "text script": function(a) {
                    return _.globalEval(a), a
                }
            }
        }), _.ajaxPrefilter("script", function(a) {
            void 0 === a.cache && (a.cache = !1), a.crossDomain && (a.type = "GET")
        }), _.ajaxTransport("script", function(a) {
            if (a.crossDomain) {
                var b, c;
                return {
                    send: function(d, e) {
                        b = _("<script>").prop({
                            async: !0,
                            charset: a.scriptCharset,
                            src: a.url
                        }).on("load error", c = function(a) {
                            b.remove(), c = null, a && e("error" === a.type ? 404 : 200, a.type)
                        }), Z.head.appendChild(b[0])
                    },
                    abort: function() {
                        c && c()
                    }
                }
            }
        });
        var Hb = [],
            Ib = /(=)\?(?=&|$)|\?\?/;
        _.ajaxSetup({
            jsonp: "callback",
            jsonpCallback: function() {
                var a = Hb.pop() || _.expando + "_" + jb++;
                return this[a] = !0, a
            }
        }), _.ajaxPrefilter("json jsonp", function(b, c, d) {
            var e, f, g, h = b.jsonp !== !1 && (Ib.test(b.url) ? "url" : "string" == typeof b.data && !(b.contentType || "").indexOf("application/x-www-form-urlencoded") && Ib.test(b.data) && "data");
            return h || "jsonp" === b.dataTypes[0] ? (e = b.jsonpCallback = _.isFunction(b.jsonpCallback) ? b.jsonpCallback() : b.jsonpCallback, h ? b[h] = b[h].replace(Ib, "$1" + e) : b.jsonp !== !1 && (b.url += (kb.test(b.url) ? "&" : "?") + b.jsonp + "=" + e), b.converters["script json"] = function() {
                return g || _.error(e + " was not called"), g[0]
            }, b.dataTypes[0] = "json", f = a[e], a[e] = function() {
                g = arguments
            }, d.always(function() {
                a[e] = f, b[e] && (b.jsonpCallback = c.jsonpCallback, Hb.push(e)), g && _.isFunction(f) && f(g[0]), g = f = void 0
            }), "script") : void 0
        }), _.parseHTML = function(a, b, c) {
            if (!a || "string" != typeof a) return null;
            "boolean" == typeof b && (c = b, b = !1), b = b || Z;
            var d = ga.exec(a),
                e = !c && [];
            return d ? [b.createElement(d[1])] : (d = _.buildFragment([a], b, e), e && e.length && _(e).remove(), _.merge([], d.childNodes))
        };
        var Jb = _.fn.load;
        _.fn.load = function(a, b, c) {
            if ("string" != typeof a && Jb) return Jb.apply(this, arguments);
            var d, e, f, g = this,
                h = a.indexOf(" ");
            return h >= 0 && (d = _.trim(a.slice(h)), a = a.slice(0, h)), _.isFunction(b) ? (c = b, b = void 0) : b && "object" == typeof b && (e = "POST"), g.length > 0 && _.ajax({
                url: a,
                type: e,
                dataType: "html",
                data: b
            }).done(function(a) {
                f = arguments, g.html(d ? _("<div>").append(_.parseHTML(a)).find(d) : a)
            }).complete(c && function(a, b) {
                g.each(c, f || [a.responseText, b, a])
            }), this
        }, _.expr.filters.animated = function(a) {
            return _.grep(_.timers, function(b) {
                return a === b.elem
            }).length
        };
        var Kb = a.document.documentElement;
        _.offset = {
            setOffset: function(a, b, c) {
                var d, e, f, g, h, i, j, k = _.css(a, "position"),
                    l = _(a),
                    m = {};
                "static" === k && (a.style.position = "relative"), h = l.offset(), f = _.css(a, "top"), i = _.css(a, "left"), j = ("absolute" === k || "fixed" === k) && (f + i).indexOf("auto") > -1, j ? (d = l.position(), g = d.top, e = d.left) : (g = parseFloat(f) || 0, e = parseFloat(i) || 0), _.isFunction(b) && (b = b.call(a, c, h)), null != b.top && (m.top = b.top - h.top + g), null != b.left && (m.left = b.left - h.left + e), "using" in b ? b.using.call(a, m) : l.css(m)
            }
        }, _.fn.extend({
            offset: function(a) {
                if (arguments.length) return void 0 === a ? this : this.each(function(b) {
                    _.offset.setOffset(this, a, b)
                });
                var b, c, d = this[0],
                    e = {
                        top: 0,
                        left: 0
                    },
                    f = d && d.ownerDocument;
                if (f) return b = f.documentElement, _.contains(b, d) ? (typeof d.getBoundingClientRect !== za && (e = d.getBoundingClientRect()), c = P(f), {
                    top: e.top + c.pageYOffset - b.clientTop,
                    left: e.left + c.pageXOffset - b.clientLeft
                }) : e
            },
            position: function() {
                if (this[0]) {
                    var a, b, c = this[0],
                        d = {
                            top: 0,
                            left: 0
                        };
                    return "fixed" === _.css(c, "position") ? b = c.getBoundingClientRect() : (a = this.offsetParent(), b = this.offset(), _.nodeName(a[0], "html") || (d = a.offset()), d.top += _.css(a[0], "borderTopWidth", !0), d.left += _.css(a[0], "borderLeftWidth", !0)), {
                        top: b.top - d.top - _.css(c, "marginTop", !0),
                        left: b.left - d.left - _.css(c, "marginLeft", !0)
                    }
                }
            },
            offsetParent: function() {
                return this.map(function() {
                    for (var a = this.offsetParent || Kb; a && !_.nodeName(a, "html") && "static" === _.css(a, "position");) a = a.offsetParent;
                    return a || Kb
                })
            }
        }), _.each({
            scrollLeft: "pageXOffset",
            scrollTop: "pageYOffset"
        }, function(b, c) {
            var d = "pageYOffset" === c;
            _.fn[b] = function(e) {
                return qa(this, function(b, e, f) {
                    var g = P(b);
                    return void 0 === f ? g ? g[c] : b[e] : void(g ? g.scrollTo(d ? a.pageXOffset : f, d ? f : a.pageYOffset) : b[e] = f)
                }, b, e, arguments.length, null)
            }
        }), _.each(["top", "left"], function(a, b) {
            _.cssHooks[b] = w(Y.pixelPosition, function(a, c) {
                return c ? (c = v(a, b), Qa.test(c) ? _(a).position()[b] + "px" : c) : void 0
            })
        }), _.each({
            Height: "height",
            Width: "width"
        }, function(a, b) {
            _.each({
                padding: "inner" + a,
                content: b,
                "": "outer" + a
            }, function(c, d) {
                _.fn[d] = function(d, e) {
                    var f = arguments.length && (c || "boolean" != typeof d),
                        g = c || (d === !0 || e === !0 ? "margin" : "border");
                    return qa(this, function(b, c, d) {
                        var e;
                        return _.isWindow(b) ? b.document.documentElement["client" + a] : 9 === b.nodeType ? (e = b.documentElement, Math.max(b.body["scroll" + a], e["scroll" + a], b.body["offset" + a], e["offset" + a], e["client" + a])) : void 0 === d ? _.css(b, c, g) : _.style(b, c, d, g)
                    }, b, f ? d : void 0, f, null)
                }
            })
        }), _.fn.size = function() {
            return this.length
        }, _.fn.andSelf = _.fn.addBack, "function" == typeof define && define.amd && define("jquery", [], function() {
            return _
        });
        var Lb = a.jQuery,
            Mb = a.$;
        return _.noConflict = function(b) {
            return a.$ === _ && (a.$ = Mb), b && a.jQuery === _ && (a.jQuery = Lb), _
        }, typeof b === za && (a.jQuery = a.$ = _), _
    }),
    function() {
        var a = this,
            b = a._,
            c = {},
            d = Array.prototype,
            e = Object.prototype,
            f = Function.prototype,
            g = d.push,
            h = d.slice,
            i = d.concat,
            j = e.toString,
            k = e.hasOwnProperty,
            l = d.forEach,
            m = d.map,
            n = d.reduce,
            o = d.reduceRight,
            p = d.filter,
            q = d.every,
            r = d.some,
            s = d.indexOf,
            t = d.lastIndexOf,
            u = Array.isArray,
            v = Object.keys,
            w = f.bind,
            x = function(a) {
                return a instanceof x ? a : this instanceof x ? void(this._wrapped = a) : new x(a)
            };
        "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = x), exports._ = x) : a._ = x, x.VERSION = "1.6.0";
        var y = x.each = x.forEach = function(a, b, d) {
            if (null == a) return a;
            if (l && a.forEach === l) a.forEach(b, d);
            else if (a.length === +a.length) {
                for (var e = 0, f = a.length; f > e; e++)
                    if (b.call(d, a[e], e, a) === c) return
            } else
                for (var g = x.keys(a), e = 0, f = g.length; f > e; e++)
                    if (b.call(d, a[g[e]], g[e], a) === c) return; return a
        };
        x.map = x.collect = function(a, b, c) {
            var d = [];
            return null == a ? d : m && a.map === m ? a.map(b, c) : (y(a, function(a, e, f) {
                d.push(b.call(c, a, e, f))
            }), d)
        };
        var z = "Reduce of empty array with no initial value";
        x.reduce = x.foldl = x.inject = function(a, b, c, d) {
            var e = arguments.length > 2;
            if (null == a && (a = []), n && a.reduce === n) return d && (b = x.bind(b, d)), e ? a.reduce(b, c) : a.reduce(b);
            if (y(a, function(a, f, g) {
                    e ? c = b.call(d, c, a, f, g) : (c = a, e = !0)
                }), !e) throw new TypeError(z);
            return c
        }, x.reduceRight = x.foldr = function(a, b, c, d) {
            var e = arguments.length > 2;
            if (null == a && (a = []), o && a.reduceRight === o) return d && (b = x.bind(b, d)), e ? a.reduceRight(b, c) : a.reduceRight(b);
            var f = a.length;
            if (f !== +f) {
                var g = x.keys(a);
                f = g.length
            }
            if (y(a, function(h, i, j) {
                    i = g ? g[--f] : --f, e ? c = b.call(d, c, a[i], i, j) : (c = a[i], e = !0)
                }), !e) throw new TypeError(z);
            return c
        }, x.find = x.detect = function(a, b, c) {
            var d;
            return A(a, function(a, e, f) {
                return b.call(c, a, e, f) ? (d = a, !0) : void 0
            }), d
        }, x.filter = x.select = function(a, b, c) {
            var d = [];
            return null == a ? d : p && a.filter === p ? a.filter(b, c) : (y(a, function(a, e, f) {
                b.call(c, a, e, f) && d.push(a)
            }), d)
        }, x.reject = function(a, b, c) {
            return x.filter(a, function(a, d, e) {
                return !b.call(c, a, d, e)
            }, c)
        }, x.every = x.all = function(a, b, d) {
            b || (b = x.identity);
            var e = !0;
            return null == a ? e : q && a.every === q ? a.every(b, d) : (y(a, function(a, f, g) {
                return (e = e && b.call(d, a, f, g)) ? void 0 : c
            }), !!e)
        };
        var A = x.some = x.any = function(a, b, d) {
            b || (b = x.identity);
            var e = !1;
            return null == a ? e : r && a.some === r ? a.some(b, d) : (y(a, function(a, f, g) {
                return e || (e = b.call(d, a, f, g)) ? c : void 0
            }), !!e)
        };
        x.contains = x.include = function(a, b) {
            return null == a ? !1 : s && a.indexOf === s ? -1 != a.indexOf(b) : A(a, function(a) {
                return a === b
            })
        }, x.invoke = function(a, b) {
            var c = h.call(arguments, 2),
                d = x.isFunction(b);
            return x.map(a, function(a) {
                return (d ? b : a[b]).apply(a, c)
            })
        }, x.pluck = function(a, b) {
            return x.map(a, x.property(b))
        }, x.where = function(a, b) {
            return x.filter(a, x.matches(b))
        }, x.findWhere = function(a, b) {
            return x.find(a, x.matches(b))
        }, x.max = function(a, b, c) {
            if (!b && x.isArray(a) && a[0] === +a[0] && a.length < 65535) return Math.max.apply(Math, a);
            var d = -(1 / 0),
                e = -(1 / 0);
            return y(a, function(a, f, g) {
                var h = b ? b.call(c, a, f, g) : a;
                h > e && (d = a, e = h)
            }), d
        }, x.min = function(a, b, c) {
            if (!b && x.isArray(a) && a[0] === +a[0] && a.length < 65535) return Math.min.apply(Math, a);
            var d = 1 / 0,
                e = 1 / 0;
            return y(a, function(a, f, g) {
                var h = b ? b.call(c, a, f, g) : a;
                e > h && (d = a, e = h)
            }), d
        }, x.shuffle = function(a) {
            var b, c = 0,
                d = [];
            return y(a, function(a) {
                b = x.random(c++), d[c - 1] = d[b], d[b] = a
            }), d
        }, x.sample = function(a, b, c) {
            return null == b || c ? (a.length !== +a.length && (a = x.values(a)), a[x.random(a.length - 1)]) : x.shuffle(a).slice(0, Math.max(0, b))
        };
        var B = function(a) {
            return null == a ? x.identity : x.isFunction(a) ? a : x.property(a)
        };
        x.sortBy = function(a, b, c) {
            return b = B(b), x.pluck(x.map(a, function(a, d, e) {
                return {
                    value: a,
                    index: d,
                    criteria: b.call(c, a, d, e)
                }
            }).sort(function(a, b) {
                var c = a.criteria,
                    d = b.criteria;
                if (c !== d) {
                    if (c > d || void 0 === c) return 1;
                    if (d > c || void 0 === d) return -1
                }
                return a.index - b.index
            }), "value")
        };
        var C = function(a) {
            return function(b, c, d) {
                var e = {};
                return c = B(c), y(b, function(f, g) {
                    var h = c.call(d, f, g, b);
                    a(e, h, f)
                }), e
            }
        };
        x.groupBy = C(function(a, b, c) {
            x.has(a, b) ? a[b].push(c) : a[b] = [c]
        }), x.indexBy = C(function(a, b, c) {
            a[b] = c
        }), x.countBy = C(function(a, b) {
            x.has(a, b) ? a[b]++ : a[b] = 1
        }), x.sortedIndex = function(a, b, c, d) {
            c = B(c);
            for (var e = c.call(d, b), f = 0, g = a.length; g > f;) {
                var h = f + g >>> 1;
                c.call(d, a[h]) < e ? f = h + 1 : g = h
            }
            return f
        }, x.toArray = function(a) {
            return a ? x.isArray(a) ? h.call(a) : a.length === +a.length ? x.map(a, x.identity) : x.values(a) : []
        }, x.size = function(a) {
            return null == a ? 0 : a.length === +a.length ? a.length : x.keys(a).length
        }, x.first = x.head = x.take = function(a, b, c) {
            return null == a ? void 0 : null == b || c ? a[0] : 0 > b ? [] : h.call(a, 0, b)
        }, x.initial = function(a, b, c) {
            return h.call(a, 0, a.length - (null == b || c ? 1 : b))
        }, x.last = function(a, b, c) {
            return null == a ? void 0 : null == b || c ? a[a.length - 1] : h.call(a, Math.max(a.length - b, 0))
        }, x.rest = x.tail = x.drop = function(a, b, c) {
            return h.call(a, null == b || c ? 1 : b)
        }, x.compact = function(a) {
            return x.filter(a, x.identity)
        };
        var D = function(a, b, c) {
            return b && x.every(a, x.isArray) ? i.apply(c, a) : (y(a, function(a) {
                x.isArray(a) || x.isArguments(a) ? b ? g.apply(c, a) : D(a, b, c) : c.push(a)
            }), c)
        };
        x.flatten = function(a, b) {
            return D(a, b, [])
        }, x.without = function(a) {
            return x.difference(a, h.call(arguments, 1))
        }, x.partition = function(a, b) {
            var c = [],
                d = [];
            return y(a, function(a) {
                (b(a) ? c : d).push(a)
            }), [c, d]
        }, x.uniq = x.unique = function(a, b, c, d) {
            x.isFunction(b) && (d = c, c = b, b = !1);
            var e = c ? x.map(a, c, d) : a,
                f = [],
                g = [];
            return y(e, function(c, d) {
                (b ? d && g[g.length - 1] === c : x.contains(g, c)) || (g.push(c), f.push(a[d]))
            }), f
        }, x.union = function() {
            return x.uniq(x.flatten(arguments, !0))
        }, x.intersection = function(a) {
            var b = h.call(arguments, 1);
            return x.filter(x.uniq(a), function(a) {
                return x.every(b, function(b) {
                    return x.contains(b, a)
                })
            })
        }, x.difference = function(a) {
            var b = i.apply(d, h.call(arguments, 1));
            return x.filter(a, function(a) {
                return !x.contains(b, a)
            })
        }, x.zip = function() {
            for (var a = x.max(x.pluck(arguments, "length").concat(0)), b = new Array(a), c = 0; a > c; c++) b[c] = x.pluck(arguments, "" + c);
            return b
        }, x.object = function(a, b) {
            if (null == a) return {};
            for (var c = {}, d = 0, e = a.length; e > d; d++) b ? c[a[d]] = b[d] : c[a[d][0]] = a[d][1];
            return c
        }, x.indexOf = function(a, b, c) {
            if (null == a) return -1;
            var d = 0,
                e = a.length;
            if (c) {
                if ("number" != typeof c) return d = x.sortedIndex(a, b), a[d] === b ? d : -1;
                d = 0 > c ? Math.max(0, e + c) : c
            }
            if (s && a.indexOf === s) return a.indexOf(b, c);
            for (; e > d; d++)
                if (a[d] === b) return d;
            return -1
        }, x.lastIndexOf = function(a, b, c) {
            if (null == a) return -1;
            var d = null != c;
            if (t && a.lastIndexOf === t) return d ? a.lastIndexOf(b, c) : a.lastIndexOf(b);
            for (var e = d ? c : a.length; e--;)
                if (a[e] === b) return e;
            return -1
        }, x.range = function(a, b, c) {
            arguments.length <= 1 && (b = a || 0, a = 0), c = arguments[2] || 1;
            for (var d = Math.max(Math.ceil((b - a) / c), 0), e = 0, f = new Array(d); d > e;) f[e++] = a, a += c;
            return f
        };
        var E = function() {};
        x.bind = function(a, b) {
            var c, d;
            if (w && a.bind === w) return w.apply(a, h.call(arguments, 1));
            if (!x.isFunction(a)) throw new TypeError;
            return c = h.call(arguments, 2), d = function() {
                if (!(this instanceof d)) return a.apply(b, c.concat(h.call(arguments)));
                E.prototype = a.prototype;
                var e = new E;
                E.prototype = null;
                var f = a.apply(e, c.concat(h.call(arguments)));
                return Object(f) === f ? f : e
            }
        }, x.partial = function(a) {
            var b = h.call(arguments, 1);
            return function() {
                for (var c = 0, d = b.slice(), e = 0, f = d.length; f > e; e++) d[e] === x && (d[e] = arguments[c++]);
                for (; c < arguments.length;) d.push(arguments[c++]);
                return a.apply(this, d)
            }
        }, x.bindAll = function(a) {
            var b = h.call(arguments, 1);
            if (0 === b.length) throw new Error("bindAll must be passed function names");
            return y(b, function(b) {
                a[b] = x.bind(a[b], a)
            }), a
        }, x.memoize = function(a, b) {
            var c = {};
            return b || (b = x.identity),
                function() {
                    var d = b.apply(this, arguments);
                    return x.has(c, d) ? c[d] : c[d] = a.apply(this, arguments)
                }
        }, x.delay = function(a, b) {
            var c = h.call(arguments, 2);
            return setTimeout(function() {
                return a.apply(null, c)
            }, b)
        }, x.defer = function(a) {
            return x.delay.apply(x, [a, 1].concat(h.call(arguments, 1)))
        }, x.throttle = function(a, b, c) {
            var d, e, f, g = null,
                h = 0;
            c || (c = {});
            var i = function() {
                h = c.leading === !1 ? 0 : x.now(), g = null, f = a.apply(d, e), d = e = null
            };
            return function() {
                var j = x.now();
                h || c.leading !== !1 || (h = j);
                var k = b - (j - h);
                return d = this, e = arguments, 0 >= k ? (clearTimeout(g), g = null, h = j, f = a.apply(d, e), d = e = null) : g || c.trailing === !1 || (g = setTimeout(i, k)), f
            }
        }, x.debounce = function(a, b, c) {
            var d, e, f, g, h, i = function() {
                var j = x.now() - g;
                b > j ? d = setTimeout(i, b - j) : (d = null, c || (h = a.apply(f, e), f = e = null))
            };
            return function() {
                f = this, e = arguments, g = x.now();
                var j = c && !d;
                return d || (d = setTimeout(i, b)), j && (h = a.apply(f, e), f = e = null), h
            }
        }, x.once = function(a) {
            var b, c = !1;
            return function() {
                return c ? b : (c = !0, b = a.apply(this, arguments), a = null, b)
            }
        }, x.wrap = function(a, b) {
            return x.partial(b, a)
        }, x.compose = function() {
            var a = arguments;
            return function() {
                for (var b = arguments, c = a.length - 1; c >= 0; c--) b = [a[c].apply(this, b)];
                return b[0]
            }
        }, x.after = function(a, b) {
            return function() {
                return --a < 1 ? b.apply(this, arguments) : void 0
            }
        }, x.keys = function(a) {
            if (!x.isObject(a)) return [];
            if (v) return v(a);
            var b = [];
            for (var c in a) x.has(a, c) && b.push(c);
            return b
        }, x.values = function(a) {
            for (var b = x.keys(a), c = b.length, d = new Array(c), e = 0; c > e; e++) d[e] = a[b[e]];
            return d
        }, x.pairs = function(a) {
            for (var b = x.keys(a), c = b.length, d = new Array(c), e = 0; c > e; e++) d[e] = [b[e], a[b[e]]];
            return d
        }, x.invert = function(a) {
            for (var b = {}, c = x.keys(a), d = 0, e = c.length; e > d; d++) b[a[c[d]]] = c[d];
            return b
        }, x.functions = x.methods = function(a) {
            var b = [];
            for (var c in a) x.isFunction(a[c]) && b.push(c);
            return b.sort()
        }, x.extend = function(a) {
            return y(h.call(arguments, 1), function(b) {
                if (b)
                    for (var c in b) a[c] = b[c]
            }), a
        }, x.pick = function(a) {
            var b = {},
                c = i.apply(d, h.call(arguments, 1));
            return y(c, function(c) {
                c in a && (b[c] = a[c])
            }), b
        }, x.omit = function(a) {
            var b = {},
                c = i.apply(d, h.call(arguments, 1));
            for (var e in a) x.contains(c, e) || (b[e] = a[e]);
            return b
        }, x.defaults = function(a) {
            return y(h.call(arguments, 1), function(b) {
                if (b)
                    for (var c in b) void 0 === a[c] && (a[c] = b[c])
            }), a
        }, x.clone = function(a) {
            return x.isObject(a) ? x.isArray(a) ? a.slice() : x.extend({}, a) : a
        }, x.tap = function(a, b) {
            return b(a), a
        };
        var F = function(a, b, c, d) {
            if (a === b) return 0 !== a || 1 / a == 1 / b;
            if (null == a || null == b) return a === b;
            a instanceof x && (a = a._wrapped), b instanceof x && (b = b._wrapped);
            var e = j.call(a);
            if (e != j.call(b)) return !1;
            switch (e) {
                case "[object String]":
                    return a == String(b);
                case "[object Number]":
                    return a != +a ? b != +b : 0 == a ? 1 / a == 1 / b : a == +b;
                case "[object Date]":
                case "[object Boolean]":
                    return +a == +b;
                case "[object RegExp]":
                    return a.source == b.source && a.global == b.global && a.multiline == b.multiline && a.ignoreCase == b.ignoreCase
            }
            if ("object" != typeof a || "object" != typeof b) return !1;
            for (var f = c.length; f--;)
                if (c[f] == a) return d[f] == b;
            var g = a.constructor,
                h = b.constructor;
            if (g !== h && !(x.isFunction(g) && g instanceof g && x.isFunction(h) && h instanceof h) && "constructor" in a && "constructor" in b) return !1;
            c.push(a), d.push(b);
            var i = 0,
                k = !0;
            if ("[object Array]" == e) {
                if (i = a.length, k = i == b.length)
                    for (; i-- && (k = F(a[i], b[i], c, d)););
            } else {
                for (var l in a)
                    if (x.has(a, l) && (i++, !(k = x.has(b, l) && F(a[l], b[l], c, d)))) break;
                if (k) {
                    for (l in b)
                        if (x.has(b, l) && !i--) break;
                    k = !i
                }
            }
            return c.pop(), d.pop(), k
        };
        x.isEqual = function(a, b) {
            return F(a, b, [], [])
        }, x.isEmpty = function(a) {
            if (null == a) return !0;
            if (x.isArray(a) || x.isString(a)) return 0 === a.length;
            for (var b in a)
                if (x.has(a, b)) return !1;
            return !0
        }, x.isElement = function(a) {
            return !(!a || 1 !== a.nodeType)
        }, x.isArray = u || function(a) {
            return "[object Array]" == j.call(a)
        }, x.isObject = function(a) {
            return a === Object(a)
        }, y(["Arguments", "Function", "String", "Number", "Date", "RegExp"], function(a) {
            x["is" + a] = function(b) {
                return j.call(b) == "[object " + a + "]"
            }
        }), x.isArguments(arguments) || (x.isArguments = function(a) {
            return !(!a || !x.has(a, "callee"))
        }), "function" != typeof /./ && (x.isFunction = function(a) {
            return "function" == typeof a
        }), x.isFinite = function(a) {
            return isFinite(a) && !isNaN(parseFloat(a))
        }, x.isNaN = function(a) {
            return x.isNumber(a) && a != +a
        }, x.isBoolean = function(a) {
            return a === !0 || a === !1 || "[object Boolean]" == j.call(a)
        }, x.isNull = function(a) {
            return null === a
        }, x.isUndefined = function(a) {
            return void 0 === a
        }, x.has = function(a, b) {
            return k.call(a, b)
        }, x.noConflict = function() {
            return a._ = b, this
        }, x.identity = function(a) {
            return a
        }, x.constant = function(a) {
            return function() {
                return a
            }
        }, x.property = function(a) {
            return function(b) {
                return b[a]
            }
        }, x.matches = function(a) {
            return function(b) {
                if (b === a) return !0;
                for (var c in a)
                    if (a[c] !== b[c]) return !1;
                return !0
            }
        }, x.times = function(a, b, c) {
            for (var d = Array(Math.max(0, a)), e = 0; a > e; e++) d[e] = b.call(c, e);
            return d
        }, x.random = function(a, b) {
            return null == b && (b = a, a = 0), a + Math.floor(Math.random() * (b - a + 1))
        }, x.now = Date.now || function() {
            return (new Date).getTime()
        };
        var G = {
            escape: {
                "&": "&amp;",
                "<": "&lt;",
                ">": "&gt;",
                '"': "&quot;",
                "'": "&#x27;"
            }
        };
        G.unescape = x.invert(G.escape);
        var H = {
            escape: new RegExp("[" + x.keys(G.escape).join("") + "]", "g"),
            unescape: new RegExp("(" + x.keys(G.unescape).join("|") + ")", "g")
        };
        x.each(["escape", "unescape"], function(a) {
            x[a] = function(b) {
                return null == b ? "" : ("" + b).replace(H[a], function(b) {
                    return G[a][b]
                })
            }
        }), x.result = function(a, b) {
            if (null == a) return void 0;
            var c = a[b];
            return x.isFunction(c) ? c.call(a) : c
        }, x.mixin = function(a) {
            y(x.functions(a), function(b) {
                var c = x[b] = a[b];
                x.prototype[b] = function() {
                    var a = [this._wrapped];
                    return g.apply(a, arguments), M.call(this, c.apply(x, a))
                }
            })
        };
        var I = 0;
        x.uniqueId = function(a) {
            var b = ++I + "";
            return a ? a + b : b
        }, x.templateSettings = {
            evaluate: /<%([\s\S]+?)%>/g,
            interpolate: /<%=([\s\S]+?)%>/g,
            escape: /<%-([\s\S]+?)%>/g
        };
        var J = /(.)^/,
            K = {
                "'": "'",
                "\\": "\\",
                "\r": "r",
                "\n": "n",
                "	": "t",
                "\u2028": "u2028",
                "\u2029": "u2029"
            },
            L = /\\|'|\r|\n|\t|\u2028|\u2029/g;
        x.template = function(a, b, c) {
            var d;
            c = x.defaults({}, c, x.templateSettings);
            var e = new RegExp([(c.escape || J).source, (c.interpolate || J).source, (c.evaluate || J).source].join("|") + "|$", "g"),
                f = 0,
                g = "__p+='";
            a.replace(e, function(b, c, d, e, h) {
                return g += a.slice(f, h).replace(L, function(a) {
                    return "\\" + K[a]
                }), c && (g += "'+\n((__t=(" + c + "))==null?'':_.escape(__t))+\n'"), d && (g += "'+\n((__t=(" + d + "))==null?'':__t)+\n'"), e && (g += "';\n" + e + "\n__p+='"), f = h + b.length, b
            }), g += "';\n", c.variable || (g = "with(obj||{}){\n" + g + "}\n"), g = "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" + g + "return __p;\n";
            try {
                d = new Function(c.variable || "obj", "_", g)
            } catch (h) {
                throw h.source = g, h
            }
            if (b) return d(b, x);
            var i = function(a) {
                return d.call(this, a, x)
            };
            return i.source = "function(" + (c.variable || "obj") + "){\n" + g + "}", i
        }, x.chain = function(a) {
            return x(a).chain()
        };
        var M = function(a) {
            return this._chain ? x(a).chain() : a
        };
        x.mixin(x), y(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], function(a) {
            var b = d[a];
            x.prototype[a] = function() {
                var c = this._wrapped;
                return b.apply(c, arguments), "shift" != a && "splice" != a || 0 !== c.length || delete c[0], M.call(this, c)
            }
        }), y(["concat", "join", "slice"], function(a) {
            var b = d[a];
            x.prototype[a] = function() {
                return M.call(this, b.apply(this._wrapped, arguments))
            }
        }), x.extend(x.prototype, {
            chain: function() {
                return this._chain = !0, this
            },
            value: function() {
                return this._wrapped
            }
        }), "function" == typeof define && define.amd && define("underscore", [], function() {
            return x
        })
    }.call(this),
    function(a, b) {
        if ("function" == typeof define && define.amd) define("backbone", ["underscore", "jquery", "exports"], function(c, d, e) {
            a.Backbone = b(a, e, c, d)
        });
        else if ("undefined" != typeof exports) {
            var c = require("underscore");
            b(a, exports, c)
        } else a.Backbone = b(a, {}, a._, a.jQuery || a.Zepto || a.ender || a.$)
    }(this, function(a, b, c, d) {
        {
            var e = a.Backbone,
                f = [],
                g = (f.push, f.slice);
            f.splice
        }
        b.VERSION = "1.1.2", b.$ = d, b.noConflict = function() {
            return a.Backbone = e, this
        }, b.emulateHTTP = !1, b.emulateJSON = !1;
        var h = b.Events = {
                on: function(a, b, c) {
                    if (!j(this, "on", a, [b, c]) || !b) return this;
                    this._events || (this._events = {});
                    var d = this._events[a] || (this._events[a] = []);
                    return d.push({
                        callback: b,
                        context: c,
                        ctx: c || this
                    }), this
                },
                once: function(a, b, d) {
                    if (!j(this, "once", a, [b, d]) || !b) return this;
                    var e = this,
                        f = c.once(function() {
                            e.off(a, f), b.apply(this, arguments)
                        });
                    return f._callback = b, this.on(a, f, d)
                },
                off: function(a, b, d) {
                    var e, f, g, h, i, k, l, m;
                    if (!this._events || !j(this, "off", a, [b, d])) return this;
                    if (!a && !b && !d) return this._events = void 0, this;
                    for (h = a ? [a] : c.keys(this._events), i = 0, k = h.length; k > i; i++)
                        if (a = h[i], g = this._events[a]) {
                            if (this._events[a] = e = [], b || d)
                                for (l = 0, m = g.length; m > l; l++) f = g[l], (b && b !== f.callback && b !== f.callback._callback || d && d !== f.context) && e.push(f);
                            e.length || delete this._events[a]
                        }
                    return this
                },
                trigger: function(a) {
                    if (!this._events) return this;
                    var b = g.call(arguments, 1);
                    if (!j(this, "trigger", a, b)) return this;
                    var c = this._events[a],
                        d = this._events.all;
                    return c && k(c, b), d && k(d, arguments), this
                },
                stopListening: function(a, b, d) {
                    var e = this._listeningTo;
                    if (!e) return this;
                    var f = !b && !d;
                    d || "object" != typeof b || (d = this), a && ((e = {})[a._listenId] = a);
                    for (var g in e) a = e[g], a.off(b, d, this), (f || c.isEmpty(a._events)) && delete this._listeningTo[g];
                    return this
                }
            },
            i = /\s+/,
            j = function(a, b, c, d) {
                if (!c) return !0;
                if ("object" == typeof c) {
                    for (var e in c) a[b].apply(a, [e, c[e]].concat(d));
                    return !1
                }
                if (i.test(c)) {
                    for (var f = c.split(i), g = 0, h = f.length; h > g; g++) a[b].apply(a, [f[g]].concat(d));
                    return !1
                }
                return !0
            },
            k = function(a, b) {
                var c, d = -1,
                    e = a.length,
                    f = b[0],
                    g = b[1],
                    h = b[2];
                switch (b.length) {
                    case 0:
                        for (; ++d < e;)(c = a[d]).callback.call(c.ctx);
                        return;
                    case 1:
                        for (; ++d < e;)(c = a[d]).callback.call(c.ctx, f);
                        return;
                    case 2:
                        for (; ++d < e;)(c = a[d]).callback.call(c.ctx, f, g);
                        return;
                    case 3:
                        for (; ++d < e;)(c = a[d]).callback.call(c.ctx, f, g, h);
                        return;
                    default:
                        for (; ++d < e;)(c = a[d]).callback.apply(c.ctx, b);
                        return
                }
            },
            l = {
                listenTo: "on",
                listenToOnce: "once"
            };
        c.each(l, function(a, b) {
            h[b] = function(b, d, e) {
                var f = this._listeningTo || (this._listeningTo = {}),
                    g = b._listenId || (b._listenId = c.uniqueId("l"));
                return f[g] = b, e || "object" != typeof d || (e = this), b[a](d, e, this), this
            }
        }), h.bind = h.on, h.unbind = h.off, c.extend(b, h);
        var m = b.Model = function(a, b) {
            var d = a || {};
            b || (b = {}), this.cid = c.uniqueId("c"), this.attributes = {}, b.collection && (this.collection = b.collection), b.parse && (d = this.parse(d, b) || {}), d = c.defaults({}, d, c.result(this, "defaults")), this.set(d, b), this.changed = {}, this.initialize.apply(this, arguments)
        };
        c.extend(m.prototype, h, {
            changed: null,
            validationError: null,
            idAttribute: "id",
            initialize: function() {},
            toJSON: function() {
                return c.clone(this.attributes)
            },
            sync: function() {
                return b.sync.apply(this, arguments)
            },
            get: function(a) {
                return this.attributes[a]
            },
            escape: function(a) {
                return c.escape(this.get(a))
            },
            has: function(a) {
                return null != this.get(a)
            },
            set: function(a, b, d) {
                var e, f, g, h, i, j, k, l;
                if (null == a) return this;
                if ("object" == typeof a ? (f = a, d = b) : (f = {})[a] = b, d || (d = {}), !this._validate(f, d)) return !1;
                g = d.unset, i = d.silent, h = [], j = this._changing, this._changing = !0, j || (this._previousAttributes = c.clone(this.attributes), this.changed = {}), l = this.attributes, k = this._previousAttributes, this.idAttribute in f && (this.id = f[this.idAttribute]);
                for (e in f) b = f[e], c.isEqual(l[e], b) || h.push(e), c.isEqual(k[e], b) ? delete this.changed[e] : this.changed[e] = b, g ? delete l[e] : l[e] = b;
                if (!i) {
                    h.length && (this._pending = d);
                    for (var m = 0, n = h.length; n > m; m++) this.trigger("change:" + h[m], this, l[h[m]], d)
                }
                if (j) return this;
                if (!i)
                    for (; this._pending;) d = this._pending, this._pending = !1, this.trigger("change", this, d);
                return this._pending = !1, this._changing = !1, this
            },
            unset: function(a, b) {
                return this.set(a, void 0, c.extend({}, b, {
                    unset: !0
                }))
            },
            clear: function(a) {
                var b = {};
                for (var d in this.attributes) b[d] = void 0;
                return this.set(b, c.extend({}, a, {
                    unset: !0
                }))
            },
            hasChanged: function(a) {
                return null == a ? !c.isEmpty(this.changed) : c.has(this.changed, a)
            },
            changedAttributes: function(a) {
                if (!a) return this.hasChanged() ? c.clone(this.changed) : !1;
                var b, d = !1,
                    e = this._changing ? this._previousAttributes : this.attributes;
                for (var f in a) c.isEqual(e[f], b = a[f]) || ((d || (d = {}))[f] = b);
                return d
            },
            previous: function(a) {
                return null != a && this._previousAttributes ? this._previousAttributes[a] : null
            },
            previousAttributes: function() {
                return c.clone(this._previousAttributes)
            },
            fetch: function(a) {
                a = a ? c.clone(a) : {}, void 0 === a.parse && (a.parse = !0);
                var b = this,
                    d = a.success;
                return a.success = function(c) {
                    return b.set(b.parse(c, a), a) ? (d && d(b, c, a), void b.trigger("sync", b, c, a)) : !1
                }, L(this, a), this.sync("read", this, a)
            },
            save: function(a, b, d) {
                var e, f, g, h = this.attributes;
                if (null == a || "object" == typeof a ? (e = a, d = b) : (e = {})[a] = b, d = c.extend({
                        validate: !0
                    }, d), e && !d.wait) {
                    if (!this.set(e, d)) return !1
                } else if (!this._validate(e, d)) return !1;
                e && d.wait && (this.attributes = c.extend({}, h, e)), void 0 === d.parse && (d.parse = !0);
                var i = this,
                    j = d.success;
                return d.success = function(a) {
                    i.attributes = h;
                    var b = i.parse(a, d);
                    return d.wait && (b = c.extend(e || {}, b)), c.isObject(b) && !i.set(b, d) ? !1 : (j && j(i, a, d), void i.trigger("sync", i, a, d))
                }, L(this, d), f = this.isNew() ? "create" : d.patch ? "patch" : "update", "patch" === f && (d.attrs = e), g = this.sync(f, this, d), e && d.wait && (this.attributes = h), g
            },
            destroy: function(a) {
                a = a ? c.clone(a) : {};
                var b = this,
                    d = a.success,
                    e = function() {
                        b.trigger("destroy", b, b.collection, a)
                    };
                if (a.success = function(c) {
                        (a.wait || b.isNew()) && e(), d && d(b, c, a), b.isNew() || b.trigger("sync", b, c, a)
                    }, this.isNew()) return a.success(), !1;
                L(this, a);
                var f = this.sync("delete", this, a);
                return a.wait || e(), f
            },
            url: function() {
                var a = c.result(this, "urlRoot") || c.result(this.collection, "url") || K();
                return this.isNew() ? a : a.replace(/([^\/])$/, "$1/") + encodeURIComponent(this.id)
            },
            parse: function(a) {
                return a
            },
            clone: function() {
                return new this.constructor(this.attributes)
            },
            isNew: function() {
                return !this.has(this.idAttribute)
            },
            isValid: function(a) {
                return this._validate({}, c.extend(a || {}, {
                    validate: !0
                }))
            },
            _validate: function(a, b) {
                if (!b.validate || !this.validate) return !0;
                a = c.extend({}, this.attributes, a);
                var d = this.validationError = this.validate(a, b) || null;
                return d ? (this.trigger("invalid", this, d, c.extend(b, {
                    validationError: d
                })), !1) : !0
            }
        });
        var n = ["keys", "values", "pairs", "invert", "pick", "omit"];
        c.each(n, function(a) {
            m.prototype[a] = function() {
                var b = g.call(arguments);
                return b.unshift(this.attributes), c[a].apply(c, b)
            }
        });
        var o = b.Collection = function(a, b) {
                b || (b = {}), b.model && (this.model = b.model), void 0 !== b.comparator && (this.comparator = b.comparator), this._reset(), this.initialize.apply(this, arguments), a && this.reset(a, c.extend({
                    silent: !0
                }, b))
            },
            p = {
                add: !0,
                remove: !0,
                merge: !0
            },
            q = {
                add: !0,
                remove: !1
            };
        c.extend(o.prototype, h, {
            model: m,
            initialize: function() {},
            toJSON: function(a) {
                return this.map(function(b) {
                    return b.toJSON(a)
                })
            },
            sync: function() {
                return b.sync.apply(this, arguments)
            },
            add: function(a, b) {
                return this.set(a, c.extend({
                    merge: !1
                }, b, q))
            },
            remove: function(a, b) {
                var d = !c.isArray(a);
                a = d ? [a] : c.clone(a), b || (b = {});
                var e, f, g, h;
                for (e = 0, f = a.length; f > e; e++) h = a[e] = this.get(a[e]), h && (delete this._byId[h.id], delete this._byId[h.cid], g = this.indexOf(h), this.models.splice(g, 1), this.length--, b.silent || (b.index = g, h.trigger("remove", h, this, b)), this._removeReference(h, b));
                return d ? a[0] : a
            },
            set: function(a, b) {
                b = c.defaults({}, b, p), b.parse && (a = this.parse(a, b));
                var d = !c.isArray(a);
                a = d ? a ? [a] : [] : c.clone(a);
                var e, f, g, h, i, j, k, l = b.at,
                    n = this.model,
                    o = this.comparator && null == l && b.sort !== !1,
                    q = c.isString(this.comparator) ? this.comparator : null,
                    r = [],
                    s = [],
                    t = {},
                    u = b.add,
                    v = b.merge,
                    w = b.remove,
                    x = !o && u && w ? [] : !1;
                for (e = 0, f = a.length; f > e; e++) {
                    if (i = a[e] || {}, g = i instanceof m ? h = i : i[n.prototype.idAttribute || "id"], j = this.get(g)) w && (t[j.cid] = !0), v && (i = i === h ? h.attributes : i, b.parse && (i = j.parse(i, b)), j.set(i, b), o && !k && j.hasChanged(q) && (k = !0)), a[e] = j;
                    else if (u) {
                        if (h = a[e] = this._prepareModel(i, b), !h) continue;
                        r.push(h), this._addReference(h, b)
                    }
                    h = j || h, !x || !h.isNew() && t[h.id] || x.push(h), t[h.id] = !0
                }
                if (w) {
                    for (e = 0, f = this.length; f > e; ++e) t[(h = this.models[e]).cid] || s.push(h);
                    s.length && this.remove(s, b)
                }
                if (r.length || x && x.length)
                    if (o && (k = !0), this.length += r.length, null != l)
                        for (e = 0, f = r.length; f > e; e++) this.models.splice(l + e, 0, r[e]);
                    else {
                        x && (this.models.length = 0);
                        var y = x || r;
                        for (e = 0, f = y.length; f > e; e++) this.models.push(y[e])
                    }
                if (k && this.sort({
                        silent: !0
                    }), !b.silent) {
                    for (e = 0, f = r.length; f > e; e++)(h = r[e]).trigger("add", h, this, b);
                    (k || x && x.length) && this.trigger("sort", this, b)
                }
                return d ? a[0] : a
            },
            reset: function(a, b) {
                b || (b = {});
                for (var d = 0, e = this.models.length; e > d; d++) this._removeReference(this.models[d], b);
                return b.previousModels = this.models, this._reset(), a = this.add(a, c.extend({
                    silent: !0
                }, b)), b.silent || this.trigger("reset", this, b), a
            },
            push: function(a, b) {
                return this.add(a, c.extend({
                    at: this.length
                }, b))
            },
            pop: function(a) {
                var b = this.at(this.length - 1);
                return this.remove(b, a), b
            },
            unshift: function(a, b) {
                return this.add(a, c.extend({
                    at: 0
                }, b))
            },
            shift: function(a) {
                var b = this.at(0);
                return this.remove(b, a), b
            },
            slice: function() {
                return g.apply(this.models, arguments)
            },
            get: function(a) {
                return null == a ? void 0 : this._byId[a] || this._byId[a.id] || this._byId[a.cid]
            },
            at: function(a) {
                return this.models[a]
            },
            where: function(a, b) {
                return c.isEmpty(a) ? b ? void 0 : [] : this[b ? "find" : "filter"](function(b) {
                    for (var c in a)
                        if (a[c] !== b.get(c)) return !1;
                    return !0
                })
            },
            findWhere: function(a) {
                return this.where(a, !0)
            },
            sort: function(a) {
                if (!this.comparator) throw new Error("Cannot sort a set without a comparator");
                return a || (a = {}), c.isString(this.comparator) || 1 === this.comparator.length ? this.models = this.sortBy(this.comparator, this) : this.models.sort(c.bind(this.comparator, this)), a.silent || this.trigger("sort", this, a), this
            },
            pluck: function(a) {
                return c.invoke(this.models, "get", a)
            },
            fetch: function(a) {
                a = a ? c.clone(a) : {}, void 0 === a.parse && (a.parse = !0);
                var b = a.success,
                    d = this;
                return a.success = function(c) {
                    var e = a.reset ? "reset" : "set";
                    d[e](c, a), b && b(d, c, a), d.trigger("sync", d, c, a)
                }, L(this, a), this.sync("read", this, a)
            },
            create: function(a, b) {
                if (b = b ? c.clone(b) : {}, !(a = this._prepareModel(a, b))) return !1;
                b.wait || this.add(a, b);
                var d = this,
                    e = b.success;
                return b.success = function(a, c) {
                    b.wait && d.add(a, b), e && e(a, c, b)
                }, a.save(null, b), a
            },
            parse: function(a) {
                return a
            },
            clone: function() {
                return new this.constructor(this.models)
            },
            _reset: function() {
                this.length = 0, this.models = [], this._byId = {}
            },
            _prepareModel: function(a, b) {
                if (a instanceof m) return a;
                b = b ? c.clone(b) : {}, b.collection = this;
                var d = new this.model(a, b);
                return d.validationError ? (this.trigger("invalid", this, d.validationError, b), !1) : d
            },
            _addReference: function(a) {
                this._byId[a.cid] = a, null != a.id && (this._byId[a.id] = a), a.collection || (a.collection = this), a.on("all", this._onModelEvent, this)
            },
            _removeReference: function(a) {
                this === a.collection && delete a.collection, a.off("all", this._onModelEvent, this)
            },
            _onModelEvent: function(a, b, c, d) {
                ("add" !== a && "remove" !== a || c === this) && ("destroy" === a && this.remove(b, d), b && a === "change:" + b.idAttribute && (delete this._byId[b.previous(b.idAttribute)], null != b.id && (this._byId[b.id] = b)), this.trigger.apply(this, arguments))
            }
        });
        var r = ["forEach", "each", "map", "collect", "reduce", "foldl", "inject", "reduceRight", "foldr", "find", "detect", "filter", "select", "reject", "every", "all", "some", "any", "include", "contains", "invoke", "max", "min", "toArray", "size", "first", "head", "take", "initial", "rest", "tail", "drop", "last", "without", "difference", "indexOf", "shuffle", "lastIndexOf", "isEmpty", "chain", "sample"];
        c.each(r, function(a) {
            o.prototype[a] = function() {
                var b = g.call(arguments);
                return b.unshift(this.models), c[a].apply(c, b)
            }
        });
        var s = ["groupBy", "countBy", "sortBy", "indexBy"];
        c.each(s, function(a) {
            o.prototype[a] = function(b, d) {
                var e = c.isFunction(b) ? b : function(a) {
                    return a.get(b)
                };
                return c[a](this.models, e, d)
            }
        });
        var t = b.View = function(a) {
                this.cid = c.uniqueId("view"), a || (a = {}), c.extend(this, c.pick(a, v)), this._ensureElement(), this.initialize.apply(this, arguments), this.delegateEvents()
            },
            u = /^(\S+)\s*(.*)$/,
            v = ["model", "collection", "el", "id", "attributes", "className", "tagName", "events"];
        c.extend(t.prototype, h, {
            tagName: "div",
            $: function(a) {
                return this.$el.find(a)
            },
            initialize: function() {},
            render: function() {
                return this
            },
            remove: function() {
                return this.$el.remove(), this.stopListening(), this
            },
            setElement: function(a, c) {
                return this.$el && this.undelegateEvents(), this.$el = a instanceof b.$ ? a : b.$(a), this.el = this.$el[0], c !== !1 && this.delegateEvents(), this
            },
            delegateEvents: function(a) {
                if (!a && !(a = c.result(this, "events"))) return this;
                this.undelegateEvents();
                for (var b in a) {
                    var d = a[b];
                    if (c.isFunction(d) || (d = this[a[b]]), d) {
                        var e = b.match(u),
                            f = e[1],
                            g = e[2];
                        d = c.bind(d, this), f += ".delegateEvents" + this.cid, "" === g ? this.$el.on(f, d) : this.$el.on(f, g, d)
                    }
                }
                return this
            },
            undelegateEvents: function() {
                return this.$el.off(".delegateEvents" + this.cid), this
            },
            _ensureElement: function() {
                if (this.el) this.setElement(c.result(this, "el"), !1);
                else {
                    var a = c.extend({}, c.result(this, "attributes"));
                    this.id && (a.id = c.result(this, "id")), this.className && (a["class"] = c.result(this, "className"));
                    var d = b.$("<" + c.result(this, "tagName") + ">").attr(a);
                    this.setElement(d, !1)
                }
            }
        }), b.sync = function(a, d, e) {
            var f = x[a];
            c.defaults(e || (e = {}), {
                emulateHTTP: b.emulateHTTP,
                emulateJSON: b.emulateJSON
            });
            var g = {
                type: f,
                dataType: "json"
            };
            if (e.url || (g.url = c.result(d, "url") || K()), null != e.data || !d || "create" !== a && "update" !== a && "patch" !== a || (g.contentType = "application/json", g.data = JSON.stringify(e.attrs || d.toJSON(e))), e.emulateJSON && (g.contentType = "application/x-www-form-urlencoded", g.data = g.data ? {
                    model: g.data
                } : {}), e.emulateHTTP && ("PUT" === f || "DELETE" === f || "PATCH" === f)) {
                g.type = "POST", e.emulateJSON && (g.data._method = f);
                var h = e.beforeSend;
                e.beforeSend = function(a) {
                    return a.setRequestHeader("X-HTTP-Method-Override", f), h ? h.apply(this, arguments) : void 0
                }
            }
            "GET" === g.type || e.emulateJSON || (g.processData = !1), "PATCH" === g.type && w && (g.xhr = function() {
                return new ActiveXObject("Microsoft.XMLHTTP")
            });
            var i = e.xhr = b.ajax(c.extend(g, e));
            return d.trigger("request", d, i, e), i
        };
        var w = !("undefined" == typeof window || !window.ActiveXObject || window.XMLHttpRequest && (new XMLHttpRequest).dispatchEvent),
            x = {
                create: "POST",
                update: "PUT",
                patch: "PATCH",
                "delete": "DELETE",
                read: "GET"
            };
        b.ajax = function() {
            return b.$.ajax.apply(b.$, arguments)
        };
        var y = b.Router = function(a) {
                a || (a = {}), a.routes && (this.routes = a.routes), this._bindRoutes(), this.initialize.apply(this, arguments)
            },
            z = /\((.*?)\)/g,
            A = /(\(\?)?:\w+/g,
            B = /\*\w+/g,
            C = /[\-{}\[\]+?.,\\\^$|#\s]/g;
        c.extend(y.prototype, h, {
            initialize: function() {},
            route: function(a, d, e) {
                c.isRegExp(a) || (a = this._routeToRegExp(a)), c.isFunction(d) && (e = d, d = ""), e || (e = this[d]);
                var f = this;
                return b.history.route(a, function(c) {
                    var g = f._extractParameters(a, c);
                    f.execute(e, g), f.trigger.apply(f, ["route:" + d].concat(g)), f.trigger("route", d, g), b.history.trigger("route", f, d, g)
                }), this
            },
            execute: function(a, b) {
                a && a.apply(this, b)
            },
            navigate: function(a, c) {
                return b.history.navigate(a, c), this
            },
            _bindRoutes: function() {
                if (this.routes) {
                    this.routes = c.result(this, "routes");
                    for (var a, b = c.keys(this.routes); null != (a = b.pop());) this.route(a, this.routes[a])
                }
            },
            _routeToRegExp: function(a) {
                return a = a.replace(C, "\\$&").replace(z, "(?:$1)?").replace(A, function(a, b) {
                    return b ? a : "([^/?]+)"
                }).replace(B, "([^?]*?)"), new RegExp("^" + a + "(?:\\?([\\s\\S]*))?$")
            },
            _extractParameters: function(a, b) {
                var d = a.exec(b).slice(1);
                return c.map(d, function(a, b) {
                    return b === d.length - 1 ? a || null : a ? decodeURIComponent(a) : null
                })
            }
        });
        var D = b.History = function() {
                this.handlers = [], c.bindAll(this, "checkUrl"), "undefined" != typeof window && (this.location = window.location, this.history = window.history)
            },
            E = /^[#\/]|\s+$/g,
            F = /^\/+|\/+$/g,
            G = /msie [\w.]+/,
            H = /\/$/,
            I = /#.*$/;
        D.started = !1, c.extend(D.prototype, h, {
            interval: 50,
            atRoot: function() {
                return this.location.pathname.replace(/[^\/]$/, "$&/") === this.root
            },
            getHash: function(a) {
                var b = (a || this).location.href.match(/#(.*)$/);
                return b ? b[1] : ""
            },
            getFragment: function(a, b) {
                if (null == a)
                    if (this._hasPushState || !this._wantsHashChange || b) {
                        a = decodeURI(this.location.pathname + this.location.search);
                        var c = this.root.replace(H, "");
                        a.indexOf(c) || (a = a.slice(c.length))
                    } else a = this.getHash();
                return a.replace(E, "")
            },
            start: function(a) {
                if (D.started) throw new Error("Backbone.history has already been started");
                D.started = !0, this.options = c.extend({
                    root: "/"
                }, this.options, a), this.root = this.options.root, this._wantsHashChange = this.options.hashChange !== !1, this._wantsPushState = !!this.options.pushState, this._hasPushState = !!(this.options.pushState && this.history && this.history.pushState);
                var d = this.getFragment(),
                    e = document.documentMode,
                    f = G.exec(navigator.userAgent.toLowerCase()) && (!e || 7 >= e);
                if (this.root = ("/" + this.root + "/").replace(F, "/"), f && this._wantsHashChange) {
                    var g = b.$('<iframe src="javascript:0" tabindex="-1">');
                    this.iframe = g.hide().appendTo("body")[0].contentWindow, this.navigate(d)
                }
                this._hasPushState ? b.$(window).on("popstate", this.checkUrl) : this._wantsHashChange && "onhashchange" in window && !f ? b.$(window).on("hashchange", this.checkUrl) : this._wantsHashChange && (this._checkUrlInterval = setInterval(this.checkUrl, this.interval)), this.fragment = d;
                var h = this.location;
                if (this._wantsHashChange && this._wantsPushState) {
                    if (!this._hasPushState && !this.atRoot()) return this.fragment = this.getFragment(null, !0), this.location.replace(this.root + "#" + this.fragment), !0;
                    this._hasPushState && this.atRoot() && h.hash && (this.fragment = this.getHash().replace(E, ""), this.history.replaceState({}, document.title, this.root + this.fragment))
                }
                return this.options.silent ? void 0 : this.loadUrl()
            },
            stop: function() {
                b.$(window).off("popstate", this.checkUrl).off("hashchange", this.checkUrl), this._checkUrlInterval && clearInterval(this._checkUrlInterval), D.started = !1
            },
            route: function(a, b) {
                this.handlers.unshift({
                    route: a,
                    callback: b
                })
            },
            checkUrl: function() {
                var a = this.getFragment();
                return a === this.fragment && this.iframe && (a = this.getFragment(this.getHash(this.iframe))), a === this.fragment ? !1 : (this.iframe && this.navigate(a), void this.loadUrl())
            },
            loadUrl: function(a) {
                return a = this.fragment = this.getFragment(a), c.any(this.handlers, function(b) {
                    return b.route.test(a) ? (b.callback(a), !0) : void 0
                })
            },
            navigate: function(a, b) {
                if (!D.started) return !1;
                b && b !== !0 || (b = {
                    trigger: !!b
                });
                var c = this.root + (a = this.getFragment(a || ""));
                if (a = a.replace(I, ""), this.fragment !== a) {
                    if (this.fragment = a, "" === a && "/" !== c && (c = c.slice(0, -1)), this._hasPushState) this.history[b.replace ? "replaceState" : "pushState"]({}, document.title, c);
                    else {
                        if (!this._wantsHashChange) return this.location.assign(c);
                        this._updateHash(this.location, a, b.replace), this.iframe && a !== this.getFragment(this.getHash(this.iframe)) && (b.replace || this.iframe.document.open().close(), this._updateHash(this.iframe.location, a, b.replace))
                    }
                    return b.trigger ? this.loadUrl(a) : void 0
                }
            },
            _updateHash: function(a, b, c) {
                if (c) {
                    var d = a.href.replace(/(javascript:|#).*$/, "");
                    a.replace(d + "#" + b)
                } else a.hash = "#" + b
            }
        }), b.history = new D;
        var J = function(a, b) {
            var d, e = this;
            d = a && c.has(a, "constructor") ? a.constructor : function() {
                return e.apply(this, arguments)
            }, c.extend(d, e, b);
            var f = function() {
                this.constructor = d
            };
            return f.prototype = e.prototype, d.prototype = new f, a && c.extend(d.prototype, a), d.__super__ = e.prototype, d
        };
        m.extend = o.extend = y.extend = t.extend = D.extend = J;
        var K = function() {
                throw new Error('A "url" property or function must be specified')
            },
            L = function(a, b) {
                var c = b.error;
                b.error = function(d) {
                    c && c(a, d, b), a.trigger("error", a, d, b)
                }
            };
        return b
    });
var THREE = {
    REVISION: "70"
};
"object" == typeof module && (module.exports = THREE), void 0 === Math.sign && (Math.sign = function(a) {
        return 0 > a ? -1 : a > 0 ? 1 : 0
    }), THREE.MOUSE = {
        LEFT: 0,
        MIDDLE: 1,
        RIGHT: 2
    }, THREE.CullFaceNone = 0, THREE.CullFaceBack = 1, THREE.CullFaceFront = 2, THREE.CullFaceFrontBack = 3, THREE.FrontFaceDirectionCW = 0, THREE.FrontFaceDirectionCCW = 1, THREE.BasicShadowMap = 0, THREE.PCFShadowMap = 1, THREE.PCFSoftShadowMap = 2, THREE.FrontSide = 0, THREE.BackSide = 1, THREE.DoubleSide = 2, THREE.NoShading = 0, THREE.FlatShading = 1, THREE.SmoothShading = 2, THREE.NoColors = 0, THREE.FaceColors = 1, THREE.VertexColors = 2, THREE.NoBlending = 0, THREE.NormalBlending = 1, THREE.AdditiveBlending = 2, THREE.SubtractiveBlending = 3, THREE.MultiplyBlending = 4, THREE.CustomBlending = 5, THREE.AddEquation = 100, THREE.SubtractEquation = 101, THREE.ReverseSubtractEquation = 102, THREE.MinEquation = 103, THREE.MaxEquation = 104, THREE.ZeroFactor = 200, THREE.OneFactor = 201, THREE.SrcColorFactor = 202, THREE.OneMinusSrcColorFactor = 203, THREE.SrcAlphaFactor = 204, THREE.OneMinusSrcAlphaFactor = 205, THREE.DstAlphaFactor = 206, THREE.OneMinusDstAlphaFactor = 207, THREE.DstColorFactor = 208, THREE.OneMinusDstColorFactor = 209, THREE.SrcAlphaSaturateFactor = 210, THREE.MultiplyOperation = 0, THREE.MixOperation = 1, THREE.AddOperation = 2, THREE.UVMapping = 300, THREE.CubeReflectionMapping = 301, THREE.CubeRefractionMapping = 302, THREE.EquirectangularReflectionMapping = 303, THREE.EquirectangularRefractionMapping = 304, THREE.SphericalReflectionMapping = 305, THREE.RepeatWrapping = 1e3, THREE.ClampToEdgeWrapping = 1001, THREE.MirroredRepeatWrapping = 1002, THREE.NearestFilter = 1003, THREE.NearestMipMapNearestFilter = 1004, THREE.NearestMipMapLinearFilter = 1005, THREE.LinearFilter = 1006, THREE.LinearMipMapNearestFilter = 1007, THREE.LinearMipMapLinearFilter = 1008, THREE.UnsignedByteType = 1009, THREE.ByteType = 1010, THREE.ShortType = 1011, THREE.UnsignedShortType = 1012, THREE.IntType = 1013, THREE.UnsignedIntType = 1014, THREE.FloatType = 1015, THREE.UnsignedShort4444Type = 1016, THREE.UnsignedShort5551Type = 1017, THREE.UnsignedShort565Type = 1018, THREE.AlphaFormat = 1019, THREE.RGBFormat = 1020, THREE.RGBAFormat = 1021, THREE.LuminanceFormat = 1022, THREE.LuminanceAlphaFormat = 1023, THREE.RGBEFormat = THREE.RGBAFormat, THREE.RGB_S3TC_DXT1_Format = 2001, THREE.RGBA_S3TC_DXT1_Format = 2002, THREE.RGBA_S3TC_DXT3_Format = 2003, THREE.RGBA_S3TC_DXT5_Format = 2004, THREE.RGB_PVRTC_4BPPV1_Format = 2100, THREE.RGB_PVRTC_2BPPV1_Format = 2101, THREE.RGBA_PVRTC_4BPPV1_Format = 2102, THREE.RGBA_PVRTC_2BPPV1_Format = 2103, THREE.Projector = function() {
        console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."), this.projectVector = function(a, b) {
            console.warn("THREE.Projector: .projectVector() is now vector.project()."), a.project(b)
        }, this.unprojectVector = function(a, b) {
            console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."), a.unproject(b)
        }, this.pickingRay = function() {
            console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")
        }
    }, THREE.CanvasRenderer = function() {
        console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"), this.domElement = document.createElement("canvas"), this.clear = function() {}, this.render = function() {}, this.setClearColor = function() {}, this.setSize = function() {}
    }, THREE.Color = function(a) {
        return 3 === arguments.length ? this.setRGB(arguments[0], arguments[1], arguments[2]) : this.set(a)
    }, THREE.Color.prototype = {
        constructor: THREE.Color,
        r: 1,
        g: 1,
        b: 1,
        set: function(a) {
            return a instanceof THREE.Color ? this.copy(a) : "number" == typeof a ? this.setHex(a) : "string" == typeof a && this.setStyle(a), this
        },
        setHex: function(a) {
            return a = Math.floor(a), this.r = (a >> 16 & 255) / 255, this.g = (a >> 8 & 255) / 255, this.b = (255 & a) / 255, this
        },
        setRGB: function(a, b, c) {
            return this.r = a, this.g = b, this.b = c, this
        },
        setHSL: function(a, b, c) {
            if (0 === b) this.r = this.g = this.b = c;
            else {
                var d = function(a, b, c) {
                        return 0 > c && (c += 1), c > 1 && (c -= 1), 1 / 6 > c ? a + 6 * (b - a) * c : .5 > c ? b : 2 / 3 > c ? a + 6 * (b - a) * (2 / 3 - c) : a
                    },
                    e = .5 >= c ? c * (1 + b) : c + b - c * b,
                    f = 2 * c - e;
                this.r = d(f, e, a + 1 / 3), this.g = d(f, e, a), this.b = d(f, e, a - 1 / 3)
            }
            return this
        },
        setStyle: function(a) {
            if (/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(a)) {
                var b = /^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(a);
                return this.r = Math.min(255, parseInt(b[1], 10)) / 255, this.g = Math.min(255, parseInt(b[2], 10)) / 255, this.b = Math.min(255, parseInt(b[3], 10)) / 255, this
            }
            if (/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(a)) {
                var b = /^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(a);
                return this.r = Math.min(100, parseInt(b[1], 10)) / 100, this.g = Math.min(100, parseInt(b[2], 10)) / 100, this.b = Math.min(100, parseInt(b[3], 10)) / 100, this
            }
            if (/^\#([0-9a-f]{6})$/i.test(a)) {
                var b = /^\#([0-9a-f]{6})$/i.exec(a);
                return this.setHex(parseInt(b[1], 16)), this
            }
            if (/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(a)) {
                var b = /^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(a);
                return this.setHex(parseInt(b[1] + b[1] + b[2] + b[2] + b[3] + b[3], 16)), this
            }
            return /^(\w+)$/i.test(a) ? (this.setHex(THREE.ColorKeywords[a]), this) : void 0
        },
        copy: function(a) {
            return this.r = a.r, this.g = a.g, this.b = a.b, this
        },
        copyGammaToLinear: function(a) {
            return this.r = a.r * a.r, this.g = a.g * a.g, this.b = a.b * a.b, this
        },
        copyLinearToGamma: function(a) {
            return this.r = Math.sqrt(a.r), this.g = Math.sqrt(a.g), this.b = Math.sqrt(a.b), this
        },
        convertGammaToLinear: function() {
            var a = this.r,
                b = this.g,
                c = this.b;
            return this.r = a * a, this.g = b * b, this.b = c * c, this
        },
        convertLinearToGamma: function() {
            return this.r = Math.sqrt(this.r), this.g = Math.sqrt(this.g), this.b = Math.sqrt(this.b), this
        },
        getHex: function() {
            return 255 * this.r << 16 ^ 255 * this.g << 8 ^ 255 * this.b << 0
        },
        getHexString: function() {
            return ("000000" + this.getHex().toString(16)).slice(-6)
        },
        getHSL: function(a) {
            var b, c, d = a || {
                    h: 0,
                    s: 0,
                    l: 0
                },
                e = this.r,
                f = this.g,
                g = this.b,
                h = Math.max(e, f, g),
                i = Math.min(e, f, g),
                j = (i + h) / 2;
            if (i === h) b = 0, c = 0;
            else {
                var k = h - i;
                switch (c = .5 >= j ? k / (h + i) : k / (2 - h - i), h) {
                    case e:
                        b = (f - g) / k + (g > f ? 6 : 0);
                        break;
                    case f:
                        b = (g - e) / k + 2;
                        break;
                    case g:
                        b = (e - f) / k + 4
                }
                b /= 6
            }
            return d.h = b, d.s = c, d.l = j, d
        },
        getStyle: function() {
            return "rgb(" + (255 * this.r | 0) + "," + (255 * this.g | 0) + "," + (255 * this.b | 0) + ")"
        },
        offsetHSL: function(a, b, c) {
            var d = this.getHSL();
            return d.h += a, d.s += b, d.l += c, this.setHSL(d.h, d.s, d.l), this
        },
        add: function(a) {
            return this.r += a.r, this.g += a.g, this.b += a.b, this
        },
        addColors: function(a, b) {
            return this.r = a.r + b.r, this.g = a.g + b.g, this.b = a.b + b.b, this
        },
        addScalar: function(a) {
            return this.r += a, this.g += a, this.b += a, this
        },
        multiply: function(a) {
            return this.r *= a.r, this.g *= a.g, this.b *= a.b, this
        },
        multiplyScalar: function(a) {
            return this.r *= a, this.g *= a, this.b *= a, this
        },
        lerp: function(a, b) {
            return this.r += (a.r - this.r) * b, this.g += (a.g - this.g) * b, this.b += (a.b - this.b) * b, this
        },
        equals: function(a) {
            return a.r === this.r && a.g === this.g && a.b === this.b
        },
        fromArray: function(a) {
            return this.r = a[0], this.g = a[1], this.b = a[2], this
        },
        toArray: function() {
            return [this.r, this.g, this.b]
        },
        clone: function() {
            return (new THREE.Color).setRGB(this.r, this.g, this.b)
        }
    }, THREE.ColorKeywords = {
        aliceblue: 15792383,
        antiquewhite: 16444375,
        aqua: 65535,
        aquamarine: 8388564,
        azure: 15794175,
        beige: 16119260,
        bisque: 16770244,
        black: 0,
        blanchedalmond: 16772045,
        blue: 255,
        blueviolet: 9055202,
        brown: 10824234,
        burlywood: 14596231,
        cadetblue: 6266528,
        chartreuse: 8388352,
        chocolate: 13789470,
        coral: 16744272,
        cornflowerblue: 6591981,
        cornsilk: 16775388,
        crimson: 14423100,
        cyan: 65535,
        darkblue: 139,
        darkcyan: 35723,
        darkgoldenrod: 12092939,
        darkgray: 11119017,
        darkgreen: 25600,
        darkgrey: 11119017,
        darkkhaki: 12433259,
        darkmagenta: 9109643,
        darkolivegreen: 5597999,
        darkorange: 16747520,
        darkorchid: 10040012,
        darkred: 9109504,
        darksalmon: 15308410,
        darkseagreen: 9419919,
        darkslateblue: 4734347,
        darkslategray: 3100495,
        darkslategrey: 3100495,
        darkturquoise: 52945,
        darkviolet: 9699539,
        deeppink: 16716947,
        deepskyblue: 49151,
        dimgray: 6908265,
        dimgrey: 6908265,
        dodgerblue: 2003199,
        firebrick: 11674146,
        floralwhite: 16775920,
        forestgreen: 2263842,
        fuchsia: 16711935,
        gainsboro: 14474460,
        ghostwhite: 16316671,
        gold: 16766720,
        goldenrod: 14329120,
        gray: 8421504,
        green: 32768,
        greenyellow: 11403055,
        grey: 8421504,
        honeydew: 15794160,
        hotpink: 16738740,
        indianred: 13458524,
        indigo: 4915330,
        ivory: 16777200,
        khaki: 15787660,
        lavender: 15132410,
        lavenderblush: 16773365,
        lawngreen: 8190976,
        lemonchiffon: 16775885,
        lightblue: 11393254,
        lightcoral: 15761536,
        lightcyan: 14745599,
        lightgoldenrodyellow: 16448210,
        lightgray: 13882323,
        lightgreen: 9498256,
        lightgrey: 13882323,
        lightpink: 16758465,
        lightsalmon: 16752762,
        lightseagreen: 2142890,
        lightskyblue: 8900346,
        lightslategray: 7833753,
        lightslategrey: 7833753,
        lightsteelblue: 11584734,
        lightyellow: 16777184,
        lime: 65280,
        limegreen: 3329330,
        linen: 16445670,
        magenta: 16711935,
        maroon: 8388608,
        mediumaquamarine: 6737322,
        mediumblue: 205,
        mediumorchid: 12211667,
        mediumpurple: 9662683,
        mediumseagreen: 3978097,
        mediumslateblue: 8087790,
        mediumspringgreen: 64154,
        mediumturquoise: 4772300,
        mediumvioletred: 13047173,
        midnightblue: 1644912,
        mintcream: 16121850,
        mistyrose: 16770273,
        moccasin: 16770229,
        navajowhite: 16768685,
        navy: 128,
        oldlace: 16643558,
        olive: 8421376,
        olivedrab: 7048739,
        orange: 16753920,
        orangered: 16729344,
        orchid: 14315734,
        palegoldenrod: 15657130,
        palegreen: 10025880,
        paleturquoise: 11529966,
        palevioletred: 14381203,
        papayawhip: 16773077,
        peachpuff: 16767673,
        peru: 13468991,
        pink: 16761035,
        plum: 14524637,
        powderblue: 11591910,
        purple: 8388736,
        red: 16711680,
        rosybrown: 12357519,
        royalblue: 4286945,
        saddlebrown: 9127187,
        salmon: 16416882,
        sandybrown: 16032864,
        seagreen: 3050327,
        seashell: 16774638,
        sienna: 10506797,
        silver: 12632256,
        skyblue: 8900331,
        slateblue: 6970061,
        slategray: 7372944,
        slategrey: 7372944,
        snow: 16775930,
        springgreen: 65407,
        steelblue: 4620980,
        tan: 13808780,
        teal: 32896,
        thistle: 14204888,
        tomato: 16737095,
        turquoise: 4251856,
        violet: 15631086,
        wheat: 16113331,
        white: 16777215,
        whitesmoke: 16119285,
        yellow: 16776960,
        yellowgreen: 10145074
    }, THREE.Quaternion = function(a, b, c, d) {
        this._x = a || 0, this._y = b || 0, this._z = c || 0, this._w = void 0 !== d ? d : 1
    }, THREE.Quaternion.prototype = {
        constructor: THREE.Quaternion,
        _x: 0,
        _y: 0,
        _z: 0,
        _w: 0,
        get x() {
            return this._x
        },
        set x(a) {
            this._x = a, this.onChangeCallback()
        },
        get y() {
            return this._y
        },
        set y(a) {
            this._y = a, this.onChangeCallback()
        },
        get z() {
            return this._z
        },
        set z(a) {
            this._z = a, this.onChangeCallback()
        },
        get w() {
            return this._w
        },
        set w(a) {
            this._w = a, this.onChangeCallback()
        },
        set: function(a, b, c, d) {
            return this._x = a, this._y = b, this._z = c, this._w = d, this.onChangeCallback(), this
        },
        copy: function(a) {
            return this._x = a.x, this._y = a.y, this._z = a.z, this._w = a.w, this.onChangeCallback(), this
        },
        setFromEuler: function(a, b) {
            if (a instanceof THREE.Euler == !1) throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
            var c = Math.cos(a._x / 2),
                d = Math.cos(a._y / 2),
                e = Math.cos(a._z / 2),
                f = Math.sin(a._x / 2),
                g = Math.sin(a._y / 2),
                h = Math.sin(a._z / 2);
            return "XYZ" === a.order ? (this._x = f * d * e + c * g * h, this._y = c * g * e - f * d * h, this._z = c * d * h + f * g * e, this._w = c * d * e - f * g * h) : "YXZ" === a.order ? (this._x = f * d * e + c * g * h, this._y = c * g * e - f * d * h, this._z = c * d * h - f * g * e, this._w = c * d * e + f * g * h) : "ZXY" === a.order ? (this._x = f * d * e - c * g * h, this._y = c * g * e + f * d * h, this._z = c * d * h + f * g * e, this._w = c * d * e - f * g * h) : "ZYX" === a.order ? (this._x = f * d * e - c * g * h, this._y = c * g * e + f * d * h, this._z = c * d * h - f * g * e, this._w = c * d * e + f * g * h) : "YZX" === a.order ? (this._x = f * d * e + c * g * h, this._y = c * g * e + f * d * h, this._z = c * d * h - f * g * e, this._w = c * d * e - f * g * h) : "XZY" === a.order && (this._x = f * d * e - c * g * h, this._y = c * g * e - f * d * h, this._z = c * d * h + f * g * e, this._w = c * d * e + f * g * h), b !== !1 && this.onChangeCallback(), this
        },
        setFromAxisAngle: function(a, b) {
            var c = b / 2,
                d = Math.sin(c);
            return this._x = a.x * d, this._y = a.y * d, this._z = a.z * d, this._w = Math.cos(c), this.onChangeCallback(), this
        },
        setFromRotationMatrix: function(a) {
            var b, c = a.elements,
                d = c[0],
                e = c[4],
                f = c[8],
                g = c[1],
                h = c[5],
                i = c[9],
                j = c[2],
                k = c[6],
                l = c[10],
                m = d + h + l;
            return m > 0 ? (b = .5 / Math.sqrt(m + 1), this._w = .25 / b, this._x = (k - i) * b, this._y = (f - j) * b, this._z = (g - e) * b) : d > h && d > l ? (b = 2 * Math.sqrt(1 + d - h - l), this._w = (k - i) / b, this._x = .25 * b, this._y = (e + g) / b, this._z = (f + j) / b) : h > l ? (b = 2 * Math.sqrt(1 + h - d - l), this._w = (f - j) / b, this._x = (e + g) / b, this._y = .25 * b, this._z = (i + k) / b) : (b = 2 * Math.sqrt(1 + l - d - h), this._w = (g - e) / b, this._x = (f + j) / b, this._y = (i + k) / b, this._z = .25 * b), this.onChangeCallback(), this
        },
        setFromUnitVectors: function() {
            var a, b, c = 1e-6;
            return function(d, e) {
                return void 0 === a && (a = new THREE.Vector3), b = d.dot(e) + 1, c > b ? (b = 0, Math.abs(d.x) > Math.abs(d.z) ? a.set(-d.y, d.x, 0) : a.set(0, -d.z, d.y)) : a.crossVectors(d, e), this._x = a.x, this._y = a.y, this._z = a.z, this._w = b, this.normalize(), this
            }
        }(),
        inverse: function() {
            return this.conjugate().normalize(), this
        },
        conjugate: function() {
            return this._x *= -1, this._y *= -1, this._z *= -1, this.onChangeCallback(), this
        },
        dot: function(a) {
            return this._x * a._x + this._y * a._y + this._z * a._z + this._w * a._w
        },
        lengthSq: function() {
            return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w
        },
        length: function() {
            return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w)
        },
        normalize: function() {
            var a = this.length();
            return 0 === a ? (this._x = 0, this._y = 0, this._z = 0, this._w = 1) : (a = 1 / a, this._x = this._x * a, this._y = this._y * a, this._z = this._z * a, this._w = this._w * a), this.onChangeCallback(), this
        },
        multiply: function(a, b) {
            return void 0 !== b ? (console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."), this.multiplyQuaternions(a, b)) : this.multiplyQuaternions(this, a)
        },
        multiplyQuaternions: function(a, b) {
            var c = a._x,
                d = a._y,
                e = a._z,
                f = a._w,
                g = b._x,
                h = b._y,
                i = b._z,
                j = b._w;
            return this._x = c * j + f * g + d * i - e * h, this._y = d * j + f * h + e * g - c * i, this._z = e * j + f * i + c * h - d * g, this._w = f * j - c * g - d * h - e * i, this.onChangeCallback(), this
        },
        multiplyVector3: function(a) {
            return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."), a.applyQuaternion(this)
        },
        slerp: function(a, b) {
            if (0 === b) return this;
            if (1 === b) return this.copy(a);
            var c = this._x,
                d = this._y,
                e = this._z,
                f = this._w,
                g = f * a._w + c * a._x + d * a._y + e * a._z;
            if (0 > g ? (this._w = -a._w, this._x = -a._x, this._y = -a._y, this._z = -a._z, g = -g) : this.copy(a), g >= 1) return this._w = f, this._x = c, this._y = d, this._z = e, this;
            var h = Math.acos(g),
                i = Math.sqrt(1 - g * g);
            if (Math.abs(i) < .001) return this._w = .5 * (f + this._w), this._x = .5 * (c + this._x), this._y = .5 * (d + this._y), this._z = .5 * (e + this._z), this;
            var j = Math.sin((1 - b) * h) / i,
                k = Math.sin(b * h) / i;
            return this._w = f * j + this._w * k, this._x = c * j + this._x * k, this._y = d * j + this._y * k, this._z = e * j + this._z * k, this.onChangeCallback(), this
        },
        equals: function(a) {
            return a._x === this._x && a._y === this._y && a._z === this._z && a._w === this._w
        },
        fromArray: function(a, b) {
            return void 0 === b && (b = 0), this._x = a[b], this._y = a[b + 1], this._z = a[b + 2], this._w = a[b + 3], this.onChangeCallback(), this
        },
        toArray: function(a, b) {
            return void 0 === a && (a = []), void 0 === b && (b = 0), a[b] = this._x, a[b + 1] = this._y, a[b + 2] = this._z, a[b + 3] = this._w, a
        },
        onChange: function(a) {
            return this.onChangeCallback = a, this
        },
        onChangeCallback: function() {},
        clone: function() {
            return new THREE.Quaternion(this._x, this._y, this._z, this._w)
        }
    }, THREE.Quaternion.slerp = function(a, b, c, d) {
        return c.copy(a).slerp(b, d)
    }, THREE.Vector2 = function(a, b) {
        this.x = a || 0, this.y = b || 0
    }, THREE.Vector2.prototype = {
        constructor: THREE.Vector2,
        set: function(a, b) {
            return this.x = a, this.y = b, this
        },
        setX: function(a) {
            return this.x = a, this
        },
        setY: function(a) {
            return this.y = a, this
        },
        setComponent: function(a, b) {
            switch (a) {
                case 0:
                    this.x = b;
                    break;
                case 1:
                    this.y = b;
                    break;
                default:
                    throw new Error("index is out of range: " + a)
            }
        },
        getComponent: function(a) {
            switch (a) {
                case 0:
                    return this.x;
                case 1:
                    return this.y;
                default:
                    throw new Error("index is out of range: " + a)
            }
        },
        copy: function(a) {
            return this.x = a.x, this.y = a.y, this
        },
        add: function(a, b) {
            return void 0 !== b ? (console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(a, b)) : (this.x += a.x, this.y += a.y, this)
        },
        addVectors: function(a, b) {
            return this.x = a.x + b.x, this.y = a.y + b.y, this
        },
        addScalar: function(a) {
            return this.x += a, this.y += a, this
        },
        sub: function(a, b) {
            return void 0 !== b ? (console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(a, b)) : (this.x -= a.x, this.y -= a.y, this)
        },
        subVectors: function(a, b) {
            return this.x = a.x - b.x, this.y = a.y - b.y, this
        },
        multiply: function(a) {
            return this.x *= a.x, this.y *= a.y, this
        },
        multiplyScalar: function(a) {
            return this.x *= a, this.y *= a, this
        },
        divide: function(a) {
            return this.x /= a.x, this.y /= a.y, this
        },
        divideScalar: function(a) {
            if (0 !== a) {
                var b = 1 / a;
                this.x *= b, this.y *= b
            } else this.x = 0, this.y = 0;
            return this
        },
        min: function(a) {
            return this.x > a.x && (this.x = a.x), this.y > a.y && (this.y = a.y), this
        },
        max: function(a) {
            return this.x < a.x && (this.x = a.x), this.y < a.y && (this.y = a.y), this
        },
        clamp: function(a, b) {
            return this.x < a.x ? this.x = a.x : this.x > b.x && (this.x = b.x), this.y < a.y ? this.y = a.y : this.y > b.y && (this.y = b.y), this
        },
        clampScalar: function() {
            var a, b;
            return function(c, d) {
                return void 0 === a && (a = new THREE.Vector2, b = new THREE.Vector2), a.set(c, c), b.set(d, d), this.clamp(a, b)
            }
        }(),
        floor: function() {
            return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this
        },
        ceil: function() {
            return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this
        },
        round: function() {
            return this.x = Math.round(this.x), this.y = Math.round(this.y), this
        },
        roundToZero: function() {
            return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this
        },
        negate: function() {
            return this.x = -this.x, this.y = -this.y, this
        },
        dot: function(a) {
            return this.x * a.x + this.y * a.y
        },
        lengthSq: function() {
            return this.x * this.x + this.y * this.y
        },
        length: function() {
            return Math.sqrt(this.x * this.x + this.y * this.y)
        },
        normalize: function() {
            return this.divideScalar(this.length())
        },
        distanceTo: function(a) {
            return Math.sqrt(this.distanceToSquared(a))
        },
        distanceToSquared: function(a) {
            var b = this.x - a.x,
                c = this.y - a.y;
            return b * b + c * c
        },
        setLength: function(a) {
            var b = this.length();
            return 0 !== b && a !== b && this.multiplyScalar(a / b), this
        },
        lerp: function(a, b) {
            return this.x += (a.x - this.x) * b, this.y += (a.y - this.y) * b, this
        },
        equals: function(a) {
            return a.x === this.x && a.y === this.y
        },
        fromArray: function(a, b) {
            return void 0 === b && (b = 0), this.x = a[b], this.y = a[b + 1], this
        },
        toArray: function(a, b) {
            return void 0 === a && (a = []), void 0 === b && (b = 0), a[b] = this.x, a[b + 1] = this.y, a
        },
        fromAttribute: function(a, b, c) {
            return void 0 === c && (c = 0), b = b * a.itemSize + c, this.x = a.array[b], this.y = a.array[b + 1], this
        },
        clone: function() {
            return new THREE.Vector2(this.x, this.y)
        }
    }, THREE.Vector3 = function(a, b, c) {
        this.x = a || 0, this.y = b || 0, this.z = c || 0
    }, THREE.Vector3.prototype = {
        constructor: THREE.Vector3,
        set: function(a, b, c) {
            return this.x = a, this.y = b, this.z = c, this
        },
        setX: function(a) {
            return this.x = a, this
        },
        setY: function(a) {
            return this.y = a, this
        },
        setZ: function(a) {
            return this.z = a, this
        },
        setComponent: function(a, b) {
            switch (a) {
                case 0:
                    this.x = b;
                    break;
                case 1:
                    this.y = b;
                    break;
                case 2:
                    this.z = b;
                    break;
                default:
                    throw new Error("index is out of range: " + a)
            }
        },
        getComponent: function(a) {
            switch (a) {
                case 0:
                    return this.x;
                case 1:
                    return this.y;
                case 2:
                    return this.z;
                default:
                    throw new Error("index is out of range: " + a)
            }
        },
        copy: function(a) {
            return this.x = a.x, this.y = a.y, this.z = a.z, this
        },
        add: function(a, b) {
            return void 0 !== b ? (console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(a, b)) : (this.x += a.x, this.y += a.y, this.z += a.z, this)
        },
        addScalar: function(a) {
            return this.x += a, this.y += a, this.z += a, this
        },
        addVectors: function(a, b) {
            return this.x = a.x + b.x, this.y = a.y + b.y, this.z = a.z + b.z, this
        },
        sub: function(a, b) {
            return void 0 !== b ? (console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(a, b)) : (this.x -= a.x, this.y -= a.y, this.z -= a.z, this)
        },
        subVectors: function(a, b) {
            return this.x = a.x - b.x, this.y = a.y - b.y, this.z = a.z - b.z, this
        },
        multiply: function(a, b) {
            return void 0 !== b ? (console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."), this.multiplyVectors(a, b)) : (this.x *= a.x, this.y *= a.y, this.z *= a.z, this)
        },
        multiplyScalar: function(a) {
            return this.x *= a, this.y *= a, this.z *= a, this
        },
        multiplyVectors: function(a, b) {
            return this.x = a.x * b.x, this.y = a.y * b.y, this.z = a.z * b.z, this
        },
        applyEuler: function() {
            var a;
            return function(b) {
                return b instanceof THREE.Euler == !1 && console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."), void 0 === a && (a = new THREE.Quaternion), this.applyQuaternion(a.setFromEuler(b)), this
            }
        }(),
        applyAxisAngle: function() {
            var a;
            return function(b, c) {
                return void 0 === a && (a = new THREE.Quaternion), this.applyQuaternion(a.setFromAxisAngle(b, c)), this
            }
        }(),
        applyMatrix3: function(a) {
            var b = this.x,
                c = this.y,
                d = this.z,
                e = a.elements;
            return this.x = e[0] * b + e[3] * c + e[6] * d, this.y = e[1] * b + e[4] * c + e[7] * d, this.z = e[2] * b + e[5] * c + e[8] * d, this
        },
        applyMatrix4: function(a) {
            var b = this.x,
                c = this.y,
                d = this.z,
                e = a.elements;
            return this.x = e[0] * b + e[4] * c + e[8] * d + e[12], this.y = e[1] * b + e[5] * c + e[9] * d + e[13], this.z = e[2] * b + e[6] * c + e[10] * d + e[14], this
        },
        applyProjection: function(a) {
            var b = this.x,
                c = this.y,
                d = this.z,
                e = a.elements,
                f = 1 / (e[3] * b + e[7] * c + e[11] * d + e[15]);
            return this.x = (e[0] * b + e[4] * c + e[8] * d + e[12]) * f, this.y = (e[1] * b + e[5] * c + e[9] * d + e[13]) * f, this.z = (e[2] * b + e[6] * c + e[10] * d + e[14]) * f, this
        },
        applyQuaternion: function(a) {
            var b = this.x,
                c = this.y,
                d = this.z,
                e = a.x,
                f = a.y,
                g = a.z,
                h = a.w,
                i = h * b + f * d - g * c,
                j = h * c + g * b - e * d,
                k = h * d + e * c - f * b,
                l = -e * b - f * c - g * d;
            return this.x = i * h + l * -e + j * -g - k * -f, this.y = j * h + l * -f + k * -e - i * -g, this.z = k * h + l * -g + i * -f - j * -e, this
        },
        project: function() {
            var a;
            return function(b) {
                return void 0 === a && (a = new THREE.Matrix4), a.multiplyMatrices(b.projectionMatrix, a.getInverse(b.matrixWorld)), this.applyProjection(a)
            }
        }(),
        unproject: function() {
            var a;
            return function(b) {
                return void 0 === a && (a = new THREE.Matrix4), a.multiplyMatrices(b.matrixWorld, a.getInverse(b.projectionMatrix)), this.applyProjection(a)
            }
        }(),
        transformDirection: function(a) {
            var b = this.x,
                c = this.y,
                d = this.z,
                e = a.elements;
            return this.x = e[0] * b + e[4] * c + e[8] * d, this.y = e[1] * b + e[5] * c + e[9] * d, this.z = e[2] * b + e[6] * c + e[10] * d, this.normalize(), this
        },
        divide: function(a) {
            return this.x /= a.x, this.y /= a.y, this.z /= a.z, this
        },
        divideScalar: function(a) {
            if (0 !== a) {
                var b = 1 / a;
                this.x *= b, this.y *= b, this.z *= b
            } else this.x = 0, this.y = 0, this.z = 0;
            return this
        },
        min: function(a) {
            return this.x > a.x && (this.x = a.x), this.y > a.y && (this.y = a.y), this.z > a.z && (this.z = a.z), this
        },
        max: function(a) {
            return this.x < a.x && (this.x = a.x), this.y < a.y && (this.y = a.y), this.z < a.z && (this.z = a.z), this
        },
        clamp: function(a, b) {
            return this.x < a.x ? this.x = a.x : this.x > b.x && (this.x = b.x), this.y < a.y ? this.y = a.y : this.y > b.y && (this.y = b.y), this.z < a.z ? this.z = a.z : this.z > b.z && (this.z = b.z), this
        },
        clampScalar: function() {
            var a, b;
            return function(c, d) {
                return void 0 === a && (a = new THREE.Vector3, b = new THREE.Vector3), a.set(c, c, c), b.set(d, d, d), this.clamp(a, b)
            }
        }(),
        floor: function() {
            return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this
        },
        ceil: function() {
            return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this
        },
        round: function() {
            return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this
        },
        roundToZero: function() {
            return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this
        },
        negate: function() {
            return this.x = -this.x, this.y = -this.y, this.z = -this.z, this
        },
        dot: function(a) {
            return this.x * a.x + this.y * a.y + this.z * a.z
        },
        lengthSq: function() {
            return this.x * this.x + this.y * this.y + this.z * this.z
        },
        length: function() {
            return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z)
        },
        lengthManhattan: function() {
            return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z)
        },
        normalize: function() {
            return this.divideScalar(this.length())
        },
        setLength: function(a) {
            var b = this.length();
            return 0 !== b && a !== b && this.multiplyScalar(a / b), this
        },
        lerp: function(a, b) {
            return this.x += (a.x - this.x) * b, this.y += (a.y - this.y) * b, this.z += (a.z - this.z) * b, this
        },
        cross: function(a, b) {
            if (void 0 !== b) return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."), this.crossVectors(a, b);
            var c = this.x,
                d = this.y,
                e = this.z;
            return this.x = d * a.z - e * a.y, this.y = e * a.x - c * a.z, this.z = c * a.y - d * a.x, this
        },
        crossVectors: function(a, b) {
            var c = a.x,
                d = a.y,
                e = a.z,
                f = b.x,
                g = b.y,
                h = b.z;
            return this.x = d * h - e * g, this.y = e * f - c * h, this.z = c * g - d * f, this
        },
        projectOnVector: function() {
            var a, b;
            return function(c) {
                return void 0 === a && (a = new THREE.Vector3), a.copy(c).normalize(), b = this.dot(a), this.copy(a).multiplyScalar(b)
            }
        }(),
        projectOnPlane: function() {
            var a;
            return function(b) {
                return void 0 === a && (a = new THREE.Vector3), a.copy(this).projectOnVector(b), this.sub(a)
            }
        }(),
        reflect: function() {
            var a;
            return function(b) {
                return void 0 === a && (a = new THREE.Vector3), this.sub(a.copy(b).multiplyScalar(2 * this.dot(b)))
            }
        }(),
        angleTo: function(a) {
            var b = this.dot(a) / (this.length() * a.length());
            return Math.acos(THREE.Math.clamp(b, -1, 1))
        },
        distanceTo: function(a) {
            return Math.sqrt(this.distanceToSquared(a))
        },
        distanceToSquared: function(a) {
            var b = this.x - a.x,
                c = this.y - a.y,
                d = this.z - a.z;
            return b * b + c * c + d * d
        },
        setEulerFromRotationMatrix: function() {
            console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")
        },
        setEulerFromQuaternion: function() {
            console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")
        },
        getPositionFromMatrix: function(a) {
            return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."), this.setFromMatrixPosition(a)
        },
        getScaleFromMatrix: function(a) {
            return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."), this.setFromMatrixScale(a)
        },
        getColumnFromMatrix: function(a, b) {
            return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."), this.setFromMatrixColumn(a, b)
        },
        setFromMatrixPosition: function(a) {
            return this.x = a.elements[12], this.y = a.elements[13], this.z = a.elements[14], this
        },
        setFromMatrixScale: function(a) {
            var b = this.set(a.elements[0], a.elements[1], a.elements[2]).length(),
                c = this.set(a.elements[4], a.elements[5], a.elements[6]).length(),
                d = this.set(a.elements[8], a.elements[9], a.elements[10]).length();
            return this.x = b, this.y = c, this.z = d, this
        },
        setFromMatrixColumn: function(a, b) {
            var c = 4 * a,
                d = b.elements;
            return this.x = d[c], this.y = d[c + 1], this.z = d[c + 2], this
        },
        equals: function(a) {
            return a.x === this.x && a.y === this.y && a.z === this.z
        },
        fromArray: function(a, b) {
            return void 0 === b && (b = 0),
                this.x = a[b], this.y = a[b + 1], this.z = a[b + 2], this
        },
        toArray: function(a, b) {
            return void 0 === a && (a = []), void 0 === b && (b = 0), a[b] = this.x, a[b + 1] = this.y, a[b + 2] = this.z, a
        },
        fromAttribute: function(a, b, c) {
            return void 0 === c && (c = 0), b = b * a.itemSize + c, this.x = a.array[b], this.y = a.array[b + 1], this.z = a.array[b + 2], this
        },
        clone: function() {
            return new THREE.Vector3(this.x, this.y, this.z)
        }
    }, THREE.Vector4 = function(a, b, c, d) {
        this.x = a || 0, this.y = b || 0, this.z = c || 0, this.w = void 0 !== d ? d : 1
    }, THREE.Vector4.prototype = {
        constructor: THREE.Vector4,
        set: function(a, b, c, d) {
            return this.x = a, this.y = b, this.z = c, this.w = d, this
        },
        setX: function(a) {
            return this.x = a, this
        },
        setY: function(a) {
            return this.y = a, this
        },
        setZ: function(a) {
            return this.z = a, this
        },
        setW: function(a) {
            return this.w = a, this
        },
        setComponent: function(a, b) {
            switch (a) {
                case 0:
                    this.x = b;
                    break;
                case 1:
                    this.y = b;
                    break;
                case 2:
                    this.z = b;
                    break;
                case 3:
                    this.w = b;
                    break;
                default:
                    throw new Error("index is out of range: " + a)
            }
        },
        getComponent: function(a) {
            switch (a) {
                case 0:
                    return this.x;
                case 1:
                    return this.y;
                case 2:
                    return this.z;
                case 3:
                    return this.w;
                default:
                    throw new Error("index is out of range: " + a)
            }
        },
        copy: function(a) {
            return this.x = a.x, this.y = a.y, this.z = a.z, this.w = void 0 !== a.w ? a.w : 1, this
        },
        add: function(a, b) {
            return void 0 !== b ? (console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(a, b)) : (this.x += a.x, this.y += a.y, this.z += a.z, this.w += a.w, this)
        },
        addScalar: function(a) {
            return this.x += a, this.y += a, this.z += a, this.w += a, this
        },
        addVectors: function(a, b) {
            return this.x = a.x + b.x, this.y = a.y + b.y, this.z = a.z + b.z, this.w = a.w + b.w, this
        },
        sub: function(a, b) {
            return void 0 !== b ? (console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(a, b)) : (this.x -= a.x, this.y -= a.y, this.z -= a.z, this.w -= a.w, this)
        },
        subVectors: function(a, b) {
            return this.x = a.x - b.x, this.y = a.y - b.y, this.z = a.z - b.z, this.w = a.w - b.w, this
        },
        multiplyScalar: function(a) {
            return this.x *= a, this.y *= a, this.z *= a, this.w *= a, this
        },
        applyMatrix4: function(a) {
            var b = this.x,
                c = this.y,
                d = this.z,
                e = this.w,
                f = a.elements;
            return this.x = f[0] * b + f[4] * c + f[8] * d + f[12] * e, this.y = f[1] * b + f[5] * c + f[9] * d + f[13] * e, this.z = f[2] * b + f[6] * c + f[10] * d + f[14] * e, this.w = f[3] * b + f[7] * c + f[11] * d + f[15] * e, this
        },
        divideScalar: function(a) {
            if (0 !== a) {
                var b = 1 / a;
                this.x *= b, this.y *= b, this.z *= b, this.w *= b
            } else this.x = 0, this.y = 0, this.z = 0, this.w = 1;
            return this
        },
        setAxisAngleFromQuaternion: function(a) {
            this.w = 2 * Math.acos(a.w);
            var b = Math.sqrt(1 - a.w * a.w);
            return 1e-4 > b ? (this.x = 1, this.y = 0, this.z = 0) : (this.x = a.x / b, this.y = a.y / b, this.z = a.z / b), this
        },
        setAxisAngleFromRotationMatrix: function(a) {
            var b, c, d, e, f = .01,
                g = .1,
                h = a.elements,
                i = h[0],
                j = h[4],
                k = h[8],
                l = h[1],
                m = h[5],
                n = h[9],
                o = h[2],
                p = h[6],
                q = h[10];
            if (Math.abs(j - l) < f && Math.abs(k - o) < f && Math.abs(n - p) < f) {
                if (Math.abs(j + l) < g && Math.abs(k + o) < g && Math.abs(n + p) < g && Math.abs(i + m + q - 3) < g) return this.set(1, 0, 0, 0), this;
                b = Math.PI;
                var r = (i + 1) / 2,
                    s = (m + 1) / 2,
                    t = (q + 1) / 2,
                    u = (j + l) / 4,
                    v = (k + o) / 4,
                    w = (n + p) / 4;
                return r > s && r > t ? f > r ? (c = 0, d = .707106781, e = .707106781) : (c = Math.sqrt(r), d = u / c, e = v / c) : s > t ? f > s ? (c = .707106781, d = 0, e = .707106781) : (d = Math.sqrt(s), c = u / d, e = w / d) : f > t ? (c = .707106781, d = .707106781, e = 0) : (e = Math.sqrt(t), c = v / e, d = w / e), this.set(c, d, e, b), this
            }
            var x = Math.sqrt((p - n) * (p - n) + (k - o) * (k - o) + (l - j) * (l - j));
            return Math.abs(x) < .001 && (x = 1), this.x = (p - n) / x, this.y = (k - o) / x, this.z = (l - j) / x, this.w = Math.acos((i + m + q - 1) / 2), this
        },
        min: function(a) {
            return this.x > a.x && (this.x = a.x), this.y > a.y && (this.y = a.y), this.z > a.z && (this.z = a.z), this.w > a.w && (this.w = a.w), this
        },
        max: function(a) {
            return this.x < a.x && (this.x = a.x), this.y < a.y && (this.y = a.y), this.z < a.z && (this.z = a.z), this.w < a.w && (this.w = a.w), this
        },
        clamp: function(a, b) {
            return this.x < a.x ? this.x = a.x : this.x > b.x && (this.x = b.x), this.y < a.y ? this.y = a.y : this.y > b.y && (this.y = b.y), this.z < a.z ? this.z = a.z : this.z > b.z && (this.z = b.z), this.w < a.w ? this.w = a.w : this.w > b.w && (this.w = b.w), this
        },
        clampScalar: function() {
            var a, b;
            return function(c, d) {
                return void 0 === a && (a = new THREE.Vector4, b = new THREE.Vector4), a.set(c, c, c, c), b.set(d, d, d, d), this.clamp(a, b)
            }
        }(),
        floor: function() {
            return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this.w = Math.floor(this.w), this
        },
        ceil: function() {
            return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this.w = Math.ceil(this.w), this
        },
        round: function() {
            return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this.w = Math.round(this.w), this
        },
        roundToZero: function() {
            return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this.w = this.w < 0 ? Math.ceil(this.w) : Math.floor(this.w), this
        },
        negate: function() {
            return this.x = -this.x, this.y = -this.y, this.z = -this.z, this.w = -this.w, this
        },
        dot: function(a) {
            return this.x * a.x + this.y * a.y + this.z * a.z + this.w * a.w
        },
        lengthSq: function() {
            return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w
        },
        length: function() {
            return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w)
        },
        lengthManhattan: function() {
            return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w)
        },
        normalize: function() {
            return this.divideScalar(this.length())
        },
        setLength: function(a) {
            var b = this.length();
            return 0 !== b && a !== b && this.multiplyScalar(a / b), this
        },
        lerp: function(a, b) {
            return this.x += (a.x - this.x) * b, this.y += (a.y - this.y) * b, this.z += (a.z - this.z) * b, this.w += (a.w - this.w) * b, this
        },
        equals: function(a) {
            return a.x === this.x && a.y === this.y && a.z === this.z && a.w === this.w
        },
        fromArray: function(a, b) {
            return void 0 === b && (b = 0), this.x = a[b], this.y = a[b + 1], this.z = a[b + 2], this.w = a[b + 3], this
        },
        toArray: function(a, b) {
            return void 0 === a && (a = []), void 0 === b && (b = 0), a[b] = this.x, a[b + 1] = this.y, a[b + 2] = this.z, a[b + 3] = this.w, a
        },
        fromAttribute: function(a, b, c) {
            return void 0 === c && (c = 0), b = b * a.itemSize + c, this.x = a.array[b], this.y = a.array[b + 1], this.z = a.array[b + 2], this.w = a.array[b + 3], this
        },
        clone: function() {
            return new THREE.Vector4(this.x, this.y, this.z, this.w)
        }
    }, THREE.Euler = function(a, b, c, d) {
        this._x = a || 0, this._y = b || 0, this._z = c || 0, this._order = d || THREE.Euler.DefaultOrder
    }, THREE.Euler.RotationOrders = ["XYZ", "YZX", "ZXY", "XZY", "YXZ", "ZYX"], THREE.Euler.DefaultOrder = "XYZ", THREE.Euler.prototype = {
        constructor: THREE.Euler,
        _x: 0,
        _y: 0,
        _z: 0,
        _order: THREE.Euler.DefaultOrder,
        get x() {
            return this._x
        },
        set x(a) {
            this._x = a, this.onChangeCallback()
        },
        get y() {
            return this._y
        },
        set y(a) {
            this._y = a, this.onChangeCallback()
        },
        get z() {
            return this._z
        },
        set z(a) {
            this._z = a, this.onChangeCallback()
        },
        get order() {
            return this._order
        },
        set order(a) {
            this._order = a, this.onChangeCallback()
        },
        set: function(a, b, c, d) {
            return this._x = a, this._y = b, this._z = c, this._order = d || this._order, this.onChangeCallback(), this
        },
        copy: function(a) {
            return this._x = a._x, this._y = a._y, this._z = a._z, this._order = a._order, this.onChangeCallback(), this
        },
        setFromRotationMatrix: function(a, b, c) {
            var d = THREE.Math.clamp,
                e = a.elements,
                f = e[0],
                g = e[4],
                h = e[8],
                i = e[1],
                j = e[5],
                k = e[9],
                l = e[2],
                m = e[6],
                n = e[10];
            return b = b || this._order, "XYZ" === b ? (this._y = Math.asin(d(h, -1, 1)), Math.abs(h) < .99999 ? (this._x = Math.atan2(-k, n), this._z = Math.atan2(-g, f)) : (this._x = Math.atan2(m, j), this._z = 0)) : "YXZ" === b ? (this._x = Math.asin(-d(k, -1, 1)), Math.abs(k) < .99999 ? (this._y = Math.atan2(h, n), this._z = Math.atan2(i, j)) : (this._y = Math.atan2(-l, f), this._z = 0)) : "ZXY" === b ? (this._x = Math.asin(d(m, -1, 1)), Math.abs(m) < .99999 ? (this._y = Math.atan2(-l, n), this._z = Math.atan2(-g, j)) : (this._y = 0, this._z = Math.atan2(i, f))) : "ZYX" === b ? (this._y = Math.asin(-d(l, -1, 1)), Math.abs(l) < .99999 ? (this._x = Math.atan2(m, n), this._z = Math.atan2(i, f)) : (this._x = 0, this._z = Math.atan2(-g, j))) : "YZX" === b ? (this._z = Math.asin(d(i, -1, 1)), Math.abs(i) < .99999 ? (this._x = Math.atan2(-k, j), this._y = Math.atan2(-l, f)) : (this._x = 0, this._y = Math.atan2(h, n))) : "XZY" === b ? (this._z = Math.asin(-d(g, -1, 1)), Math.abs(g) < .99999 ? (this._x = Math.atan2(m, j), this._y = Math.atan2(h, f)) : (this._x = Math.atan2(-k, n), this._y = 0)) : console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: " + b), this._order = b, c !== !1 && this.onChangeCallback(), this
        },
        setFromQuaternion: function() {
            var a;
            return function(b, c, d) {
                return void 0 === a && (a = new THREE.Matrix4), a.makeRotationFromQuaternion(b), this.setFromRotationMatrix(a, c, d), this
            }
        }(),
        setFromVector3: function(a, b) {
            return this.set(a.x, a.y, a.z, b || this._order)
        },
        reorder: function() {
            var a = new THREE.Quaternion;
            return function(b) {
                a.setFromEuler(this), this.setFromQuaternion(a, b)
            }
        }(),
        equals: function(a) {
            return a._x === this._x && a._y === this._y && a._z === this._z && a._order === this._order
        },
        fromArray: function(a) {
            return this._x = a[0], this._y = a[1], this._z = a[2], void 0 !== a[3] && (this._order = a[3]), this.onChangeCallback(), this
        },
        toArray: function() {
            return [this._x, this._y, this._z, this._order]
        },
        toVector3: function(a) {
            return a ? a.set(this._x, this._y, this._z) : new THREE.Vector3(this._x, this._y, this._z)
        },
        onChange: function(a) {
            return this.onChangeCallback = a, this
        },
        onChangeCallback: function() {},
        clone: function() {
            return new THREE.Euler(this._x, this._y, this._z, this._order)
        }
    }, THREE.Line3 = function(a, b) {
        this.start = void 0 !== a ? a : new THREE.Vector3, this.end = void 0 !== b ? b : new THREE.Vector3
    }, THREE.Line3.prototype = {
        constructor: THREE.Line3,
        set: function(a, b) {
            return this.start.copy(a), this.end.copy(b), this
        },
        copy: function(a) {
            return this.start.copy(a.start), this.end.copy(a.end), this
        },
        center: function(a) {
            var b = a || new THREE.Vector3;
            return b.addVectors(this.start, this.end).multiplyScalar(.5)
        },
        delta: function(a) {
            var b = a || new THREE.Vector3;
            return b.subVectors(this.end, this.start)
        },
        distanceSq: function() {
            return this.start.distanceToSquared(this.end)
        },
        distance: function() {
            return this.start.distanceTo(this.end)
        },
        at: function(a, b) {
            var c = b || new THREE.Vector3;
            return this.delta(c).multiplyScalar(a).add(this.start)
        },
        closestPointToPointParameter: function() {
            var a = new THREE.Vector3,
                b = new THREE.Vector3;
            return function(c, d) {
                a.subVectors(c, this.start), b.subVectors(this.end, this.start);
                var e = b.dot(b),
                    f = b.dot(a),
                    g = f / e;
                return d && (g = THREE.Math.clamp(g, 0, 1)), g
            }
        }(),
        closestPointToPoint: function(a, b, c) {
            var d = this.closestPointToPointParameter(a, b),
                e = c || new THREE.Vector3;
            return this.delta(e).multiplyScalar(d).add(this.start)
        },
        applyMatrix4: function(a) {
            return this.start.applyMatrix4(a), this.end.applyMatrix4(a), this
        },
        equals: function(a) {
            return a.start.equals(this.start) && a.end.equals(this.end)
        },
        clone: function() {
            return (new THREE.Line3).copy(this)
        }
    }, THREE.Box2 = function(a, b) {
        this.min = void 0 !== a ? a : new THREE.Vector2(1 / 0, 1 / 0), this.max = void 0 !== b ? b : new THREE.Vector2(-(1 / 0), -(1 / 0))
    }, THREE.Box2.prototype = {
        constructor: THREE.Box2,
        set: function(a, b) {
            return this.min.copy(a), this.max.copy(b), this
        },
        setFromPoints: function(a) {
            this.makeEmpty();
            for (var b = 0, c = a.length; c > b; b++) this.expandByPoint(a[b]);
            return this
        },
        setFromCenterAndSize: function() {
            var a = new THREE.Vector2;
            return function(b, c) {
                var d = a.copy(c).multiplyScalar(.5);
                return this.min.copy(b).sub(d), this.max.copy(b).add(d), this
            }
        }(),
        copy: function(a) {
            return this.min.copy(a.min), this.max.copy(a.max), this
        },
        makeEmpty: function() {
            return this.min.x = this.min.y = 1 / 0, this.max.x = this.max.y = -(1 / 0), this
        },
        empty: function() {
            return this.max.x < this.min.x || this.max.y < this.min.y
        },
        center: function(a) {
            var b = a || new THREE.Vector2;
            return b.addVectors(this.min, this.max).multiplyScalar(.5)
        },
        size: function(a) {
            var b = a || new THREE.Vector2;
            return b.subVectors(this.max, this.min)
        },
        expandByPoint: function(a) {
            return this.min.min(a), this.max.max(a), this
        },
        expandByVector: function(a) {
            return this.min.sub(a), this.max.add(a), this
        },
        expandByScalar: function(a) {
            return this.min.addScalar(-a), this.max.addScalar(a), this
        },
        containsPoint: function(a) {
            return a.x < this.min.x || a.x > this.max.x || a.y < this.min.y || a.y > this.max.y ? !1 : !0
        },
        containsBox: function(a) {
            return this.min.x <= a.min.x && a.max.x <= this.max.x && this.min.y <= a.min.y && a.max.y <= this.max.y ? !0 : !1
        },
        getParameter: function(a, b) {
            var c = b || new THREE.Vector2;
            return c.set((a.x - this.min.x) / (this.max.x - this.min.x), (a.y - this.min.y) / (this.max.y - this.min.y))
        },
        isIntersectionBox: function(a) {
            return a.max.x < this.min.x || a.min.x > this.max.x || a.max.y < this.min.y || a.min.y > this.max.y ? !1 : !0
        },
        clampPoint: function(a, b) {
            var c = b || new THREE.Vector2;
            return c.copy(a).clamp(this.min, this.max)
        },
        distanceToPoint: function() {
            var a = new THREE.Vector2;
            return function(b) {
                var c = a.copy(b).clamp(this.min, this.max);
                return c.sub(b).length()
            }
        }(),
        intersect: function(a) {
            return this.min.max(a.min), this.max.min(a.max), this
        },
        union: function(a) {
            return this.min.min(a.min), this.max.max(a.max), this
        },
        translate: function(a) {
            return this.min.add(a), this.max.add(a), this
        },
        equals: function(a) {
            return a.min.equals(this.min) && a.max.equals(this.max)
        },
        clone: function() {
            return (new THREE.Box2).copy(this)
        }
    }, THREE.Box3 = function(a, b) {
        this.min = void 0 !== a ? a : new THREE.Vector3(1 / 0, 1 / 0, 1 / 0), this.max = void 0 !== b ? b : new THREE.Vector3(-(1 / 0), -(1 / 0), -(1 / 0))
    }, THREE.Box3.prototype = {
        constructor: THREE.Box3,
        set: function(a, b) {
            return this.min.copy(a), this.max.copy(b), this
        },
        setFromPoints: function(a) {
            this.makeEmpty();
            for (var b = 0, c = a.length; c > b; b++) this.expandByPoint(a[b]);
            return this
        },
        setFromCenterAndSize: function() {
            var a = new THREE.Vector3;
            return function(b, c) {
                var d = a.copy(c).multiplyScalar(.5);
                return this.min.copy(b).sub(d), this.max.copy(b).add(d), this
            }
        }(),
        setFromObject: function() {
            var a = new THREE.Vector3;
            return function(b) {
                var c = this;
                return b.updateMatrixWorld(!0), this.makeEmpty(), b.traverse(function(b) {
                    var d = b.geometry;
                    if (void 0 !== d)
                        if (d instanceof THREE.Geometry)
                            for (var e = d.vertices, f = 0, g = e.length; g > f; f++) a.copy(e[f]), a.applyMatrix4(b.matrixWorld), c.expandByPoint(a);
                        else if (d instanceof THREE.BufferGeometry && void 0 !== d.attributes.position)
                        for (var h = d.attributes.position.array, f = 0, g = h.length; g > f; f += 3) a.set(h[f], h[f + 1], h[f + 2]), a.applyMatrix4(b.matrixWorld), c.expandByPoint(a)
                }), this
            }
        }(),
        copy: function(a) {
            return this.min.copy(a.min), this.max.copy(a.max), this
        },
        makeEmpty: function() {
            return this.min.x = this.min.y = this.min.z = 1 / 0, this.max.x = this.max.y = this.max.z = -(1 / 0), this
        },
        empty: function() {
            return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z
        },
        center: function(a) {
            var b = a || new THREE.Vector3;
            return b.addVectors(this.min, this.max).multiplyScalar(.5)
        },
        size: function(a) {
            var b = a || new THREE.Vector3;
            return b.subVectors(this.max, this.min)
        },
        expandByPoint: function(a) {
            return this.min.min(a), this.max.max(a), this
        },
        expandByVector: function(a) {
            return this.min.sub(a), this.max.add(a), this
        },
        expandByScalar: function(a) {
            return this.min.addScalar(-a), this.max.addScalar(a), this
        },
        containsPoint: function(a) {
            return a.x < this.min.x || a.x > this.max.x || a.y < this.min.y || a.y > this.max.y || a.z < this.min.z || a.z > this.max.z ? !1 : !0
        },
        containsBox: function(a) {
            return this.min.x <= a.min.x && a.max.x <= this.max.x && this.min.y <= a.min.y && a.max.y <= this.max.y && this.min.z <= a.min.z && a.max.z <= this.max.z ? !0 : !1
        },
        getParameter: function(a, b) {
            var c = b || new THREE.Vector3;
            return c.set((a.x - this.min.x) / (this.max.x - this.min.x), (a.y - this.min.y) / (this.max.y - this.min.y), (a.z - this.min.z) / (this.max.z - this.min.z))
        },
        isIntersectionBox: function(a) {
            return a.max.x < this.min.x || a.min.x > this.max.x || a.max.y < this.min.y || a.min.y > this.max.y || a.max.z < this.min.z || a.min.z > this.max.z ? !1 : !0
        },
        clampPoint: function(a, b) {
            var c = b || new THREE.Vector3;
            return c.copy(a).clamp(this.min, this.max)
        },
        distanceToPoint: function() {
            var a = new THREE.Vector3;
            return function(b) {
                var c = a.copy(b).clamp(this.min, this.max);
                return c.sub(b).length()
            }
        }(),
        getBoundingSphere: function() {
            var a = new THREE.Vector3;
            return function(b) {
                var c = b || new THREE.Sphere;
                return c.center = this.center(), c.radius = .5 * this.size(a).length(), c
            }
        }(),
        intersect: function(a) {
            return this.min.max(a.min), this.max.min(a.max), this
        },
        union: function(a) {
            return this.min.min(a.min), this.max.max(a.max), this
        },
        applyMatrix4: function() {
            var a = [new THREE.Vector3, new THREE.Vector3, new THREE.Vector3, new THREE.Vector3, new THREE.Vector3, new THREE.Vector3, new THREE.Vector3, new THREE.Vector3];
            return function(b) {
                return a[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(b), a[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(b), a[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(b), a[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(b), a[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(b), a[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(b), a[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(b), a[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(b), this.makeEmpty(), this.setFromPoints(a), this
            }
        }(),
        translate: function(a) {
            return this.min.add(a), this.max.add(a), this
        },
        equals: function(a) {
            return a.min.equals(this.min) && a.max.equals(this.max)
        },
        clone: function() {
            return (new THREE.Box3).copy(this)
        }
    }, THREE.Matrix3 = function() {
        this.elements = new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]), arguments.length > 0 && console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")
    }, THREE.Matrix3.prototype = {
        constructor: THREE.Matrix3,
        set: function(a, b, c, d, e, f, g, h, i) {
            var j = this.elements;
            return j[0] = a, j[3] = b, j[6] = c, j[1] = d, j[4] = e, j[7] = f, j[2] = g, j[5] = h, j[8] = i, this
        },
        identity: function() {
            return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1), this
        },
        copy: function(a) {
            var b = a.elements;
            return this.set(b[0], b[3], b[6], b[1], b[4], b[7], b[2], b[5], b[8]), this
        },
        multiplyVector3: function(a) {
            return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."), a.applyMatrix3(this)
        },
        multiplyVector3Array: function(a) {
            return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."), this.applyToVector3Array(a)
        },
        applyToVector3Array: function() {
            var a = new THREE.Vector3;
            return function(b, c, d) {
                void 0 === c && (c = 0), void 0 === d && (d = b.length);
                for (var e = 0, f = c; d > e; e += 3, f += 3) a.x = b[f], a.y = b[f + 1], a.z = b[f + 2], a.applyMatrix3(this), b[f] = a.x, b[f + 1] = a.y, b[f + 2] = a.z;
                return b
            }
        }(),
        multiplyScalar: function(a) {
            var b = this.elements;
            return b[0] *= a, b[3] *= a, b[6] *= a, b[1] *= a, b[4] *= a, b[7] *= a, b[2] *= a, b[5] *= a, b[8] *= a, this
        },
        determinant: function() {
            var a = this.elements,
                b = a[0],
                c = a[1],
                d = a[2],
                e = a[3],
                f = a[4],
                g = a[5],
                h = a[6],
                i = a[7],
                j = a[8];
            return b * f * j - b * g * i - c * e * j + c * g * h + d * e * i - d * f * h
        },
        getInverse: function(a, b) {
            var c = a.elements,
                d = this.elements;
            d[0] = c[10] * c[5] - c[6] * c[9], d[1] = -c[10] * c[1] + c[2] * c[9], d[2] = c[6] * c[1] - c[2] * c[5], d[3] = -c[10] * c[4] + c[6] * c[8], d[4] = c[10] * c[0] - c[2] * c[8], d[5] = -c[6] * c[0] + c[2] * c[4], d[6] = c[9] * c[4] - c[5] * c[8], d[7] = -c[9] * c[0] + c[1] * c[8], d[8] = c[5] * c[0] - c[1] * c[4];
            var e = c[0] * d[0] + c[1] * d[3] + c[2] * d[6];
            if (0 === e) {
                var f = "Matrix3.getInverse(): can't invert matrix, determinant is 0";
                if (b) throw new Error(f);
                return console.warn(f), this.identity(), this
            }
            return this.multiplyScalar(1 / e), this
        },
        transpose: function() {
            var a, b = this.elements;
            return a = b[1], b[1] = b[3], b[3] = a, a = b[2], b[2] = b[6], b[6] = a, a = b[5], b[5] = b[7], b[7] = a, this
        },
        flattenToArrayOffset: function(a, b) {
            var c = this.elements;
            return a[b] = c[0], a[b + 1] = c[1], a[b + 2] = c[2], a[b + 3] = c[3], a[b + 4] = c[4], a[b + 5] = c[5], a[b + 6] = c[6], a[b + 7] = c[7], a[b + 8] = c[8], a
        },
        getNormalMatrix: function(a) {
            return this.getInverse(a).transpose(), this
        },
        transposeIntoArray: function(a) {
            var b = this.elements;
            return a[0] = b[0], a[1] = b[3], a[2] = b[6], a[3] = b[1], a[4] = b[4], a[5] = b[7], a[6] = b[2], a[7] = b[5], a[8] = b[8], this
        },
        fromArray: function(a) {
            return this.elements.set(a), this
        },
        toArray: function() {
            var a = this.elements;
            return [a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]]
        },
        clone: function() {
            return (new THREE.Matrix3).fromArray(this.elements)
        }
    }, THREE.Matrix4 = function() {
        this.elements = new Float32Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]), arguments.length > 0 && console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")
    }, THREE.Matrix4.prototype = {
        constructor: THREE.Matrix4,
        set: function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {
            var q = this.elements;
            return q[0] = a, q[4] = b, q[8] = c, q[12] = d, q[1] = e, q[5] = f, q[9] = g, q[13] = h, q[2] = i, q[6] = j, q[10] = k, q[14] = l, q[3] = m, q[7] = n, q[11] = o, q[15] = p, this
        },
        identity: function() {
            return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
        },
        copy: function(a) {
            return this.elements.set(a.elements), this
        },
        extractPosition: function(a) {
            return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."), this.copyPosition(a)
        },
        copyPosition: function(a) {
            var b = this.elements,
                c = a.elements;
            return b[12] = c[12], b[13] = c[13], b[14] = c[14], this
        },
        extractBasis: function(a, b, c) {
            var d = this.elements;
            return a.set(d[0], d[1], d[2]), b.set(d[4], d[5], d[6]), c.set(d[8], d[9], d[10]), this
        },
        makeBasis: function(a, b, c) {
            return this.set(a.x, b.x, c.x, 0, a.y, b.y, c.y, 0, a.z, b.z, c.z, 0, 0, 0, 0, 1), this
        },
        extractRotation: function() {
            var a = new THREE.Vector3;
            return function(b) {
                var c = this.elements,
                    d = b.elements,
                    e = 1 / a.set(d[0], d[1], d[2]).length(),
                    f = 1 / a.set(d[4], d[5], d[6]).length(),
                    g = 1 / a.set(d[8], d[9], d[10]).length();
                return c[0] = d[0] * e, c[1] = d[1] * e, c[2] = d[2] * e, c[4] = d[4] * f, c[5] = d[5] * f, c[6] = d[6] * f, c[8] = d[8] * g, c[9] = d[9] * g, c[10] = d[10] * g, this
            }
        }(),
        makeRotationFromEuler: function(a) {
            a instanceof THREE.Euler == !1 && console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
            var b = this.elements,
                c = a.x,
                d = a.y,
                e = a.z,
                f = Math.cos(c),
                g = Math.sin(c),
                h = Math.cos(d),
                i = Math.sin(d),
                j = Math.cos(e),
                k = Math.sin(e);
            if ("XYZ" === a.order) {
                var l = f * j,
                    m = f * k,
                    n = g * j,
                    o = g * k;
                b[0] = h * j, b[4] = -h * k, b[8] = i, b[1] = m + n * i, b[5] = l - o * i, b[9] = -g * h, b[2] = o - l * i, b[6] = n + m * i, b[10] = f * h
            } else if ("YXZ" === a.order) {
                var p = h * j,
                    q = h * k,
                    r = i * j,
                    s = i * k;
                b[0] = p + s * g, b[4] = r * g - q, b[8] = f * i, b[1] = f * k, b[5] = f * j, b[9] = -g, b[2] = q * g - r, b[6] = s + p * g, b[10] = f * h
            } else if ("ZXY" === a.order) {
                var p = h * j,
                    q = h * k,
                    r = i * j,
                    s = i * k;
                b[0] = p - s * g, b[4] = -f * k, b[8] = r + q * g, b[1] = q + r * g, b[5] = f * j, b[9] = s - p * g, b[2] = -f * i, b[6] = g, b[10] = f * h
            } else if ("ZYX" === a.order) {
                var l = f * j,
                    m = f * k,
                    n = g * j,
                    o = g * k;
                b[0] = h * j, b[4] = n * i - m, b[8] = l * i + o, b[1] = h * k, b[5] = o * i + l, b[9] = m * i - n, b[2] = -i, b[6] = g * h, b[10] = f * h
            } else if ("YZX" === a.order) {
                var t = f * h,
                    u = f * i,
                    v = g * h,
                    w = g * i;
                b[0] = h * j, b[4] = w - t * k, b[8] = v * k + u, b[1] = k, b[5] = f * j, b[9] = -g * j, b[2] = -i * j, b[6] = u * k + v, b[10] = t - w * k
            } else if ("XZY" === a.order) {
                var t = f * h,
                    u = f * i,
                    v = g * h,
                    w = g * i;
                b[0] = h * j, b[4] = -k, b[8] = i * j, b[1] = t * k + w, b[5] = f * j, b[9] = u * k - v, b[2] = v * k - u, b[6] = g * j, b[10] = w * k + t
            }
            return b[3] = 0, b[7] = 0, b[11] = 0, b[12] = 0, b[13] = 0, b[14] = 0, b[15] = 1, this
        },
        setRotationFromQuaternion: function(a) {
            return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."), this.makeRotationFromQuaternion(a)
        },
        makeRotationFromQuaternion: function(a) {
            var b = this.elements,
                c = a.x,
                d = a.y,
                e = a.z,
                f = a.w,
                g = c + c,
                h = d + d,
                i = e + e,
                j = c * g,
                k = c * h,
                l = c * i,
                m = d * h,
                n = d * i,
                o = e * i,
                p = f * g,
                q = f * h,
                r = f * i;
            return b[0] = 1 - (m + o), b[4] = k - r, b[8] = l + q, b[1] = k + r, b[5] = 1 - (j + o), b[9] = n - p, b[2] = l - q, b[6] = n + p, b[10] = 1 - (j + m), b[3] = 0, b[7] = 0, b[11] = 0, b[12] = 0, b[13] = 0, b[14] = 0, b[15] = 1, this
        },
        lookAt: function() {
            var a = new THREE.Vector3,
                b = new THREE.Vector3,
                c = new THREE.Vector3;
            return function(d, e, f) {
                var g = this.elements;
                return c.subVectors(d, e).normalize(), 0 === c.length() && (c.z = 1), a.crossVectors(f, c).normalize(), 0 === a.length() && (c.x += 1e-4, a.crossVectors(f, c).normalize()), b.crossVectors(c, a), g[0] = a.x, g[4] = b.x, g[8] = c.x, g[1] = a.y, g[5] = b.y, g[9] = c.y, g[2] = a.z, g[6] = b.z, g[10] = c.z, this
            }
        }(),
        multiply: function(a, b) {
            return void 0 !== b ? (console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."), this.multiplyMatrices(a, b)) : this.multiplyMatrices(this, a)
        },
        multiplyMatrices: function(a, b) {
            var c = a.elements,
                d = b.elements,
                e = this.elements,
                f = c[0],
                g = c[4],
                h = c[8],
                i = c[12],
                j = c[1],
                k = c[5],
                l = c[9],
                m = c[13],
                n = c[2],
                o = c[6],
                p = c[10],
                q = c[14],
                r = c[3],
                s = c[7],
                t = c[11],
                u = c[15],
                v = d[0],
                w = d[4],
                x = d[8],
                y = d[12],
                z = d[1],
                A = d[5],
                B = d[9],
                C = d[13],
                D = d[2],
                E = d[6],
                F = d[10],
                G = d[14],
                H = d[3],
                I = d[7],
                J = d[11],
                K = d[15];
            return e[0] = f * v + g * z + h * D + i * H, e[4] = f * w + g * A + h * E + i * I, e[8] = f * x + g * B + h * F + i * J, e[12] = f * y + g * C + h * G + i * K, e[1] = j * v + k * z + l * D + m * H, e[5] = j * w + k * A + l * E + m * I, e[9] = j * x + k * B + l * F + m * J, e[13] = j * y + k * C + l * G + m * K, e[2] = n * v + o * z + p * D + q * H, e[6] = n * w + o * A + p * E + q * I, e[10] = n * x + o * B + p * F + q * J, e[14] = n * y + o * C + p * G + q * K, e[3] = r * v + s * z + t * D + u * H, e[7] = r * w + s * A + t * E + u * I, e[11] = r * x + s * B + t * F + u * J, e[15] = r * y + s * C + t * G + u * K, this
        },
        multiplyToArray: function(a, b, c) {
            var d = this.elements;
            return this.multiplyMatrices(a, b), c[0] = d[0], c[1] = d[1], c[2] = d[2], c[3] = d[3], c[4] = d[4], c[5] = d[5], c[6] = d[6], c[7] = d[7], c[8] = d[8], c[9] = d[9], c[10] = d[10], c[11] = d[11], c[12] = d[12], c[13] = d[13], c[14] = d[14], c[15] = d[15], this
        },
        multiplyScalar: function(a) {
            var b = this.elements;
            return b[0] *= a, b[4] *= a, b[8] *= a, b[12] *= a, b[1] *= a, b[5] *= a, b[9] *= a, b[13] *= a, b[2] *= a, b[6] *= a, b[10] *= a, b[14] *= a, b[3] *= a, b[7] *= a, b[11] *= a, b[15] *= a, this
        },
        multiplyVector3: function(a) {
            return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."), a.applyProjection(this)
        },
        multiplyVector4: function(a) {
            return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."), a.applyMatrix4(this)
        },
        multiplyVector3Array: function(a) {
            return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."), this.applyToVector3Array(a)
        },
        applyToVector3Array: function() {
            var a = new THREE.Vector3;
            return function(b, c, d) {
                void 0 === c && (c = 0), void 0 === d && (d = b.length);
                for (var e = 0, f = c; d > e; e += 3, f += 3) a.x = b[f], a.y = b[f + 1], a.z = b[f + 2], a.applyMatrix4(this), b[f] = a.x, b[f + 1] = a.y, b[f + 2] = a.z;
                return b
            }
        }(),
        rotateAxis: function(a) {
            console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."), a.transformDirection(this)
        },
        crossVector: function(a) {
            return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."), a.applyMatrix4(this)
        },
        determinant: function() {
            var a = this.elements,
                b = a[0],
                c = a[4],
                d = a[8],
                e = a[12],
                f = a[1],
                g = a[5],
                h = a[9],
                i = a[13],
                j = a[2],
                k = a[6],
                l = a[10],
                m = a[14],
                n = a[3],
                o = a[7],
                p = a[11],
                q = a[15];
            return n * (+e * h * k - d * i * k - e * g * l + c * i * l + d * g * m - c * h * m) + o * (+b * h * m - b * i * l + e * f * l - d * f * m + d * i * j - e * h * j) + p * (+b * i * k - b * g * m - e * f * k + c * f * m + e * g * j - c * i * j) + q * (-d * g * j - b * h * k + b * g * l + d * f * k - c * f * l + c * h * j)
        },
        transpose: function() {
            var a, b = this.elements;
            return a = b[1], b[1] = b[4], b[4] = a, a = b[2], b[2] = b[8], b[8] = a, a = b[6], b[6] = b[9], b[9] = a, a = b[3], b[3] = b[12], b[12] = a, a = b[7], b[7] = b[13], b[13] = a, a = b[11], b[11] = b[14], b[14] = a, this
        },
        flattenToArrayOffset: function(a, b) {
            var c = this.elements;
            return a[b] = c[0], a[b + 1] = c[1], a[b + 2] = c[2], a[b + 3] = c[3], a[b + 4] = c[4], a[b + 5] = c[5], a[b + 6] = c[6], a[b + 7] = c[7], a[b + 8] = c[8], a[b + 9] = c[9], a[b + 10] = c[10], a[b + 11] = c[11], a[b + 12] = c[12], a[b + 13] = c[13], a[b + 14] = c[14], a[b + 15] = c[15], a
        },
        getPosition: function() {
            var a = new THREE.Vector3;
            return function() {
                console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");
                var b = this.elements;
                return a.set(b[12], b[13], b[14])
            }
        }(),
        setPosition: function(a) {
            var b = this.elements;
            return b[12] = a.x, b[13] = a.y, b[14] = a.z, this
        },
        getInverse: function(a, b) {
            var c = this.elements,
                d = a.elements,
                e = d[0],
                f = d[4],
                g = d[8],
                h = d[12],
                i = d[1],
                j = d[5],
                k = d[9],
                l = d[13],
                m = d[2],
                n = d[6],
                o = d[10],
                p = d[14],
                q = d[3],
                r = d[7],
                s = d[11],
                t = d[15];
            c[0] = k * p * r - l * o * r + l * n * s - j * p * s - k * n * t + j * o * t, c[4] = h * o * r - g * p * r - h * n * s + f * p * s + g * n * t - f * o * t, c[8] = g * l * r - h * k * r + h * j * s - f * l * s - g * j * t + f * k * t, c[12] = h * k * n - g * l * n - h * j * o + f * l * o + g * j * p - f * k * p, c[1] = l * o * q - k * p * q - l * m * s + i * p * s + k * m * t - i * o * t, c[5] = g * p * q - h * o * q + h * m * s - e * p * s - g * m * t + e * o * t, c[9] = h * k * q - g * l * q - h * i * s + e * l * s + g * i * t - e * k * t, c[13] = g * l * m - h * k * m + h * i * o - e * l * o - g * i * p + e * k * p, c[2] = j * p * q - l * n * q + l * m * r - i * p * r - j * m * t + i * n * t, c[6] = h * n * q - f * p * q - h * m * r + e * p * r + f * m * t - e * n * t, c[10] = f * l * q - h * j * q + h * i * r - e * l * r - f * i * t + e * j * t, c[14] = h * j * m - f * l * m - h * i * n + e * l * n + f * i * p - e * j * p, c[3] = k * n * q - j * o * q - k * m * r + i * o * r + j * m * s - i * n * s, c[7] = f * o * q - g * n * q + g * m * r - e * o * r - f * m * s + e * n * s, c[11] = g * j * q - f * k * q - g * i * r + e * k * r + f * i * s - e * j * s, c[15] = f * k * m - g * j * m + g * i * n - e * k * n - f * i * o + e * j * o;
            var u = e * c[0] + i * c[4] + m * c[8] + q * c[12];
            if (0 == u) {
                var v = "Matrix4.getInverse(): can't invert matrix, determinant is 0";
                if (b) throw new Error(v);
                return console.warn(v), this.identity(), this
            }
            return this.multiplyScalar(1 / u), this
        },
        translate: function() {
            console.warn("THREE.Matrix4: .translate() has been removed.")
        },
        rotateX: function() {
            console.warn("THREE.Matrix4: .rotateX() has been removed.")
        },
        rotateY: function() {
            console.warn("THREE.Matrix4: .rotateY() has been removed.")
        },
        rotateZ: function() {
            console.warn("THREE.Matrix4: .rotateZ() has been removed.")
        },
        rotateByAxis: function() {
            console.warn("THREE.Matrix4: .rotateByAxis() has been removed.")
        },
        scale: function(a) {
            var b = this.elements,
                c = a.x,
                d = a.y,
                e = a.z;
            return b[0] *= c, b[4] *= d, b[8] *= e, b[1] *= c, b[5] *= d, b[9] *= e, b[2] *= c, b[6] *= d, b[10] *= e, b[3] *= c, b[7] *= d, b[11] *= e, this
        },
        getMaxScaleOnAxis: function() {
            var a = this.elements,
                b = a[0] * a[0] + a[1] * a[1] + a[2] * a[2],
                c = a[4] * a[4] + a[5] * a[5] + a[6] * a[6],
                d = a[8] * a[8] + a[9] * a[9] + a[10] * a[10];
            return Math.sqrt(Math.max(b, Math.max(c, d)))
        },
        makeTranslation: function(a, b, c) {
            return this.set(1, 0, 0, a, 0, 1, 0, b, 0, 0, 1, c, 0, 0, 0, 1), this
        },
        makeRotationX: function(a) {
            var b = Math.cos(a),
                c = Math.sin(a);
            return this.set(1, 0, 0, 0, 0, b, -c, 0, 0, c, b, 0, 0, 0, 0, 1), this
        },
        makeRotationY: function(a) {
            var b = Math.cos(a),
                c = Math.sin(a);
            return this.set(b, 0, c, 0, 0, 1, 0, 0, -c, 0, b, 0, 0, 0, 0, 1), this
        },
        makeRotationZ: function(a) {
            var b = Math.cos(a),
                c = Math.sin(a);
            return this.set(b, -c, 0, 0, c, b, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
        },
        makeRotationAxis: function(a, b) {
            var c = Math.cos(b),
                d = Math.sin(b),
                e = 1 - c,
                f = a.x,
                g = a.y,
                h = a.z,
                i = e * f,
                j = e * g;
            return this.set(i * f + c, i * g - d * h, i * h + d * g, 0, i * g + d * h, j * g + c, j * h - d * f, 0, i * h - d * g, j * h + d * f, e * h * h + c, 0, 0, 0, 0, 1), this
        },
        makeScale: function(a, b, c) {
            return this.set(a, 0, 0, 0, 0, b, 0, 0, 0, 0, c, 0, 0, 0, 0, 1), this
        },
        compose: function(a, b, c) {
            return this.makeRotationFromQuaternion(b), this.scale(c), this.setPosition(a), this
        },
        decompose: function() {
            var a = new THREE.Vector3,
                b = new THREE.Matrix4;
            return function(c, d, e) {
                var f = this.elements,
                    g = a.set(f[0], f[1], f[2]).length(),
                    h = a.set(f[4], f[5], f[6]).length(),
                    i = a.set(f[8], f[9], f[10]).length(),
                    j = this.determinant();
                0 > j && (g = -g), c.x = f[12], c.y = f[13], c.z = f[14], b.elements.set(this.elements);
                var k = 1 / g,
                    l = 1 / h,
                    m = 1 / i;
                return b.elements[0] *= k, b.elements[1] *= k, b.elements[2] *= k, b.elements[4] *= l, b.elements[5] *= l, b.elements[6] *= l, b.elements[8] *= m, b.elements[9] *= m, b.elements[10] *= m, d.setFromRotationMatrix(b), e.x = g, e.y = h, e.z = i, this
            }
        }(),
        makeFrustum: function(a, b, c, d, e, f) {
            var g = this.elements,
                h = 2 * e / (b - a),
                i = 2 * e / (d - c),
                j = (b + a) / (b - a),
                k = (d + c) / (d - c),
                l = -(f + e) / (f - e),
                m = -2 * f * e / (f - e);
            return g[0] = h, g[4] = 0, g[8] = j, g[12] = 0, g[1] = 0, g[5] = i, g[9] = k, g[13] = 0, g[2] = 0, g[6] = 0, g[10] = l, g[14] = m, g[3] = 0, g[7] = 0, g[11] = -1, g[15] = 0, this
        },
        makePerspective: function(a, b, c, d) {
            var e = c * Math.tan(THREE.Math.degToRad(.5 * a)),
                f = -e,
                g = f * b,
                h = e * b;
            return this.makeFrustum(g, h, f, e, c, d)
        },
        makeOrthographic: function(a, b, c, d, e, f) {
            var g = this.elements,
                h = b - a,
                i = c - d,
                j = f - e,
                k = (b + a) / h,
                l = (c + d) / i,
                m = (f + e) / j;
            return g[0] = 2 / h, g[4] = 0, g[8] = 0, g[12] = -k, g[1] = 0, g[5] = 2 / i, g[9] = 0, g[13] = -l, g[2] = 0, g[6] = 0, g[10] = -2 / j, g[14] = -m, g[3] = 0, g[7] = 0, g[11] = 0, g[15] = 1, this
        },
        fromArray: function(a) {
            return this.elements.set(a), this
        },
        toArray: function() {
            var a = this.elements;
            return [a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]]
        },
        clone: function() {
            return (new THREE.Matrix4).fromArray(this.elements)
        }
    }, THREE.Ray = function(a, b) {
        this.origin = void 0 !== a ? a : new THREE.Vector3, this.direction = void 0 !== b ? b : new THREE.Vector3
    }, THREE.Ray.prototype = {
        constructor: THREE.Ray,
        set: function(a, b) {
            return this.origin.copy(a), this.direction.copy(b), this
        },
        copy: function(a) {
            return this.origin.copy(a.origin), this.direction.copy(a.direction), this
        },
        at: function(a, b) {
            var c = b || new THREE.Vector3;
            return c.copy(this.direction).multiplyScalar(a).add(this.origin)
        },
        recast: function() {
            var a = new THREE.Vector3;
            return function(b) {
                return this.origin.copy(this.at(b, a)), this
            }
        }(),
        closestPointToPoint: function(a, b) {
            var c = b || new THREE.Vector3;
            c.subVectors(a, this.origin);
            var d = c.dot(this.direction);
            return 0 > d ? c.copy(this.origin) : c.copy(this.direction).multiplyScalar(d).add(this.origin)
        },
        distanceToPoint: function() {
            var a = new THREE.Vector3;
            return function(b) {
                var c = a.subVectors(b, this.origin).dot(this.direction);
                return 0 > c ? this.origin.distanceTo(b) : (a.copy(this.direction).multiplyScalar(c).add(this.origin), a.distanceTo(b))
            }
        }(),
        distanceSqToSegment: function() {
            var a = new THREE.Vector3,
                b = new THREE.Vector3,
                c = new THREE.Vector3;
            return function(d, e, f, g) {
                a.copy(d).add(e).multiplyScalar(.5), b.copy(e).sub(d).normalize(), c.copy(this.origin).sub(a);
                var h, i, j, k, l = .5 * d.distanceTo(e),
                    m = -this.direction.dot(b),
                    n = c.dot(this.direction),
                    o = -c.dot(b),
                    p = c.lengthSq(),
                    q = Math.abs(1 - m * m);
                if (q > 0)
                    if (h = m * o - n, i = m * n - o, k = l * q, h >= 0)
                        if (i >= -k)
                            if (k >= i) {
                                var r = 1 / q;
                                h *= r, i *= r, j = h * (h + m * i + 2 * n) + i * (m * h + i + 2 * o) + p
                            } else i = l, h = Math.max(0, -(m * i + n)), j = -h * h + i * (i + 2 * o) + p;
                else i = -l, h = Math.max(0, -(m * i + n)), j = -h * h + i * (i + 2 * o) + p;
                else -k >= i ? (h = Math.max(0, -(-m * l + n)), i = h > 0 ? -l : Math.min(Math.max(-l, -o), l), j = -h * h + i * (i + 2 * o) + p) : k >= i ? (h = 0, i = Math.min(Math.max(-l, -o), l), j = i * (i + 2 * o) + p) : (h = Math.max(0, -(m * l + n)), i = h > 0 ? l : Math.min(Math.max(-l, -o), l), j = -h * h + i * (i + 2 * o) + p);
                else i = m > 0 ? -l : l, h = Math.max(0, -(m * i + n)), j = -h * h + i * (i + 2 * o) + p;
                return f && f.copy(this.direction).multiplyScalar(h).add(this.origin),
                    g && g.copy(b).multiplyScalar(i).add(a), j
            }
        }(),
        isIntersectionSphere: function(a) {
            return this.distanceToPoint(a.center) <= a.radius
        },
        intersectSphere: function() {
            var a = new THREE.Vector3;
            return function(b, c) {
                a.subVectors(b.center, this.origin);
                var d = a.dot(this.direction),
                    e = a.dot(a) - d * d,
                    f = b.radius * b.radius;
                if (e > f) return null;
                var g = Math.sqrt(f - e),
                    h = d - g,
                    i = d + g;
                return 0 > h && 0 > i ? null : 0 > h ? this.at(i, c) : this.at(h, c)
            }
        }(),
        isIntersectionPlane: function(a) {
            var b = a.distanceToPoint(this.origin);
            if (0 === b) return !0;
            var c = a.normal.dot(this.direction);
            return 0 > c * b ? !0 : !1
        },
        distanceToPlane: function(a) {
            var b = a.normal.dot(this.direction);
            if (0 == b) return 0 == a.distanceToPoint(this.origin) ? 0 : null;
            var c = -(this.origin.dot(a.normal) + a.constant) / b;
            return c >= 0 ? c : null
        },
        intersectPlane: function(a, b) {
            var c = this.distanceToPlane(a);
            return null === c ? null : this.at(c, b)
        },
        isIntersectionBox: function() {
            var a = new THREE.Vector3;
            return function(b) {
                return null !== this.intersectBox(b, a)
            }
        }(),
        intersectBox: function(a, b) {
            var c, d, e, f, g, h, i = 1 / this.direction.x,
                j = 1 / this.direction.y,
                k = 1 / this.direction.z,
                l = this.origin;
            return i >= 0 ? (c = (a.min.x - l.x) * i, d = (a.max.x - l.x) * i) : (c = (a.max.x - l.x) * i, d = (a.min.x - l.x) * i), j >= 0 ? (e = (a.min.y - l.y) * j, f = (a.max.y - l.y) * j) : (e = (a.max.y - l.y) * j, f = (a.min.y - l.y) * j), c > f || e > d ? null : ((e > c || c !== c) && (c = e), (d > f || d !== d) && (d = f), k >= 0 ? (g = (a.min.z - l.z) * k, h = (a.max.z - l.z) * k) : (g = (a.max.z - l.z) * k, h = (a.min.z - l.z) * k), c > h || g > d ? null : ((g > c || c !== c) && (c = g), (d > h || d !== d) && (d = h), 0 > d ? null : this.at(c >= 0 ? c : d, b)))
        },
        intersectTriangle: function() {
            var a = new THREE.Vector3,
                b = new THREE.Vector3,
                c = new THREE.Vector3,
                d = new THREE.Vector3;
            return function(e, f, g, h, i) {
                b.subVectors(f, e), c.subVectors(g, e), d.crossVectors(b, c);
                var j, k = this.direction.dot(d);
                if (k > 0) {
                    if (h) return null;
                    j = 1
                } else {
                    if (!(0 > k)) return null;
                    j = -1, k = -k
                }
                a.subVectors(this.origin, e);
                var l = j * this.direction.dot(c.crossVectors(a, c));
                if (0 > l) return null;
                var m = j * this.direction.dot(b.cross(a));
                if (0 > m) return null;
                if (l + m > k) return null;
                var n = -j * a.dot(d);
                return 0 > n ? null : this.at(n / k, i)
            }
        }(),
        applyMatrix4: function(a) {
            return this.direction.add(this.origin).applyMatrix4(a), this.origin.applyMatrix4(a), this.direction.sub(this.origin), this.direction.normalize(), this
        },
        equals: function(a) {
            return a.origin.equals(this.origin) && a.direction.equals(this.direction)
        },
        clone: function() {
            return (new THREE.Ray).copy(this)
        }
    }, THREE.Sphere = function(a, b) {
        this.center = void 0 !== a ? a : new THREE.Vector3, this.radius = void 0 !== b ? b : 0
    }, THREE.Sphere.prototype = {
        constructor: THREE.Sphere,
        set: function(a, b) {
            return this.center.copy(a), this.radius = b, this
        },
        setFromPoints: function() {
            var a = new THREE.Box3;
            return function(b, c) {
                var d = this.center;
                void 0 !== c ? d.copy(c) : a.setFromPoints(b).center(d);
                for (var e = 0, f = 0, g = b.length; g > f; f++) e = Math.max(e, d.distanceToSquared(b[f]));
                return this.radius = Math.sqrt(e), this
            }
        }(),
        copy: function(a) {
            return this.center.copy(a.center), this.radius = a.radius, this
        },
        empty: function() {
            return this.radius <= 0
        },
        containsPoint: function(a) {
            return a.distanceToSquared(this.center) <= this.radius * this.radius
        },
        distanceToPoint: function(a) {
            return a.distanceTo(this.center) - this.radius
        },
        intersectsSphere: function(a) {
            var b = this.radius + a.radius;
            return a.center.distanceToSquared(this.center) <= b * b
        },
        clampPoint: function(a, b) {
            var c = this.center.distanceToSquared(a),
                d = b || new THREE.Vector3;
            return d.copy(a), c > this.radius * this.radius && (d.sub(this.center).normalize(), d.multiplyScalar(this.radius).add(this.center)), d
        },
        getBoundingBox: function(a) {
            var b = a || new THREE.Box3;
            return b.set(this.center, this.center), b.expandByScalar(this.radius), b
        },
        applyMatrix4: function(a) {
            return this.center.applyMatrix4(a), this.radius = this.radius * a.getMaxScaleOnAxis(), this
        },
        translate: function(a) {
            return this.center.add(a), this
        },
        equals: function(a) {
            return a.center.equals(this.center) && a.radius === this.radius
        },
        clone: function() {
            return (new THREE.Sphere).copy(this)
        }
    }, THREE.Frustum = function(a, b, c, d, e, f) {
        this.planes = [void 0 !== a ? a : new THREE.Plane, void 0 !== b ? b : new THREE.Plane, void 0 !== c ? c : new THREE.Plane, void 0 !== d ? d : new THREE.Plane, void 0 !== e ? e : new THREE.Plane, void 0 !== f ? f : new THREE.Plane]
    }, THREE.Frustum.prototype = {
        constructor: THREE.Frustum,
        set: function(a, b, c, d, e, f) {
            var g = this.planes;
            return g[0].copy(a), g[1].copy(b), g[2].copy(c), g[3].copy(d), g[4].copy(e), g[5].copy(f), this
        },
        copy: function(a) {
            for (var b = this.planes, c = 0; 6 > c; c++) b[c].copy(a.planes[c]);
            return this
        },
        setFromMatrix: function(a) {
            var b = this.planes,
                c = a.elements,
                d = c[0],
                e = c[1],
                f = c[2],
                g = c[3],
                h = c[4],
                i = c[5],
                j = c[6],
                k = c[7],
                l = c[8],
                m = c[9],
                n = c[10],
                o = c[11],
                p = c[12],
                q = c[13],
                r = c[14],
                s = c[15];
            return b[0].setComponents(g - d, k - h, o - l, s - p).normalize(), b[1].setComponents(g + d, k + h, o + l, s + p).normalize(), b[2].setComponents(g + e, k + i, o + m, s + q).normalize(), b[3].setComponents(g - e, k - i, o - m, s - q).normalize(), b[4].setComponents(g - f, k - j, o - n, s - r).normalize(), b[5].setComponents(g + f, k + j, o + n, s + r).normalize(), this
        },
        intersectsObject: function() {
            var a = new THREE.Sphere;
            return function(b) {
                var c = b.geometry;
                return null === c.boundingSphere && c.computeBoundingSphere(), a.copy(c.boundingSphere), a.applyMatrix4(b.matrixWorld), this.intersectsSphere(a)
            }
        }(),
        intersectsSphere: function(a) {
            for (var b = this.planes, c = a.center, d = -a.radius, e = 0; 6 > e; e++) {
                var f = b[e].distanceToPoint(c);
                if (d > f) return !1
            }
            return !0
        },
        intersectsBox: function() {
            var a = new THREE.Vector3,
                b = new THREE.Vector3;
            return function(c) {
                for (var d = this.planes, e = 0; 6 > e; e++) {
                    var f = d[e];
                    a.x = f.normal.x > 0 ? c.min.x : c.max.x, b.x = f.normal.x > 0 ? c.max.x : c.min.x, a.y = f.normal.y > 0 ? c.min.y : c.max.y, b.y = f.normal.y > 0 ? c.max.y : c.min.y, a.z = f.normal.z > 0 ? c.min.z : c.max.z, b.z = f.normal.z > 0 ? c.max.z : c.min.z;
                    var g = f.distanceToPoint(a),
                        h = f.distanceToPoint(b);
                    if (0 > g && 0 > h) return !1
                }
                return !0
            }
        }(),
        containsPoint: function(a) {
            for (var b = this.planes, c = 0; 6 > c; c++)
                if (b[c].distanceToPoint(a) < 0) return !1;
            return !0
        },
        clone: function() {
            return (new THREE.Frustum).copy(this)
        }
    }, THREE.Plane = function(a, b) {
        this.normal = void 0 !== a ? a : new THREE.Vector3(1, 0, 0), this.constant = void 0 !== b ? b : 0
    }, THREE.Plane.prototype = {
        constructor: THREE.Plane,
        set: function(a, b) {
            return this.normal.copy(a), this.constant = b, this
        },
        setComponents: function(a, b, c, d) {
            return this.normal.set(a, b, c), this.constant = d, this
        },
        setFromNormalAndCoplanarPoint: function(a, b) {
            return this.normal.copy(a), this.constant = -b.dot(this.normal), this
        },
        setFromCoplanarPoints: function() {
            var a = new THREE.Vector3,
                b = new THREE.Vector3;
            return function(c, d, e) {
                var f = a.subVectors(e, d).cross(b.subVectors(c, d)).normalize();
                return this.setFromNormalAndCoplanarPoint(f, c), this
            }
        }(),
        copy: function(a) {
            return this.normal.copy(a.normal), this.constant = a.constant, this
        },
        normalize: function() {
            var a = 1 / this.normal.length();
            return this.normal.multiplyScalar(a), this.constant *= a, this
        },
        negate: function() {
            return this.constant *= -1, this.normal.negate(), this
        },
        distanceToPoint: function(a) {
            return this.normal.dot(a) + this.constant
        },
        distanceToSphere: function(a) {
            return this.distanceToPoint(a.center) - a.radius
        },
        projectPoint: function(a, b) {
            return this.orthoPoint(a, b).sub(a).negate()
        },
        orthoPoint: function(a, b) {
            var c = this.distanceToPoint(a),
                d = b || new THREE.Vector3;
            return d.copy(this.normal).multiplyScalar(c)
        },
        isIntersectionLine: function(a) {
            var b = this.distanceToPoint(a.start),
                c = this.distanceToPoint(a.end);
            return 0 > b && c > 0 || 0 > c && b > 0
        },
        intersectLine: function() {
            var a = new THREE.Vector3;
            return function(b, c) {
                var d = c || new THREE.Vector3,
                    e = b.delta(a),
                    f = this.normal.dot(e);
                if (0 == f) return 0 == this.distanceToPoint(b.start) ? d.copy(b.start) : void 0;
                var g = -(b.start.dot(this.normal) + this.constant) / f;
                return 0 > g || g > 1 ? void 0 : d.copy(e).multiplyScalar(g).add(b.start)
            }
        }(),
        coplanarPoint: function(a) {
            var b = a || new THREE.Vector3;
            return b.copy(this.normal).multiplyScalar(-this.constant)
        },
        applyMatrix4: function() {
            var a = new THREE.Vector3,
                b = new THREE.Vector3,
                c = new THREE.Matrix3;
            return function(d, e) {
                var f = e || c.getNormalMatrix(d),
                    g = a.copy(this.normal).applyMatrix3(f),
                    h = this.coplanarPoint(b);
                return h.applyMatrix4(d), this.setFromNormalAndCoplanarPoint(g, h), this
            }
        }(),
        translate: function(a) {
            return this.constant = this.constant - a.dot(this.normal), this
        },
        equals: function(a) {
            return a.normal.equals(this.normal) && a.constant == this.constant
        },
        clone: function() {
            return (new THREE.Plane).copy(this)
        }
    }, THREE.Math = {
        generateUUID: function() {
            var a, b = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),
                c = new Array(36),
                d = 0;
            return function() {
                for (var e = 0; 36 > e; e++) 8 == e || 13 == e || 18 == e || 23 == e ? c[e] = "-" : 14 == e ? c[e] = "4" : (2 >= d && (d = 33554432 + 16777216 * Math.random() | 0), a = 15 & d, d >>= 4, c[e] = b[19 == e ? 3 & a | 8 : a]);
                return c.join("")
            }
        }(),
        clamp: function(a, b, c) {
            return b > a ? b : a > c ? c : a
        },
        clampBottom: function(a, b) {
            return b > a ? b : a
        },
        mapLinear: function(a, b, c, d, e) {
            return d + (a - b) * (e - d) / (c - b)
        },
        smoothstep: function(a, b, c) {
            return b >= a ? 0 : a >= c ? 1 : (a = (a - b) / (c - b), a * a * (3 - 2 * a))
        },
        smootherstep: function(a, b, c) {
            return b >= a ? 0 : a >= c ? 1 : (a = (a - b) / (c - b), a * a * a * (a * (6 * a - 15) + 10))
        },
        random16: function() {
            return (65280 * Math.random() + 255 * Math.random()) / 65535
        },
        randInt: function(a, b) {
            return Math.floor(this.randFloat(a, b))
        },
        randFloat: function(a, b) {
            return a + Math.random() * (b - a)
        },
        randFloatSpread: function(a) {
            return a * (.5 - Math.random())
        },
        degToRad: function() {
            var a = Math.PI / 180;
            return function(b) {
                return b * a
            }
        }(),
        radToDeg: function() {
            var a = 180 / Math.PI;
            return function(b) {
                return b * a
            }
        }(),
        isPowerOfTwo: function(a) {
            return 0 === (a & a - 1) && 0 !== a
        }
    }, THREE.Spline = function(a) {
        function b(a, b, c, d, e, f, g) {
            var h = .5 * (c - a),
                i = .5 * (d - b);
            return (2 * (b - c) + h + i) * g + (-3 * (b - c) - 2 * h - i) * f + h * e + b
        }
        this.points = a;
        var c, d, e, f, g, h, i, j, k, l = [],
            m = {
                x: 0,
                y: 0,
                z: 0
            };
        this.initFromArray = function(a) {
            this.points = [];
            for (var b = 0; b < a.length; b++) this.points[b] = {
                x: a[b][0],
                y: a[b][1],
                z: a[b][2]
            }
        }, this.getPoint = function(a) {
            return c = (this.points.length - 1) * a, d = Math.floor(c), e = c - d, l[0] = 0 === d ? d : d - 1, l[1] = d, l[2] = d > this.points.length - 2 ? this.points.length - 1 : d + 1, l[3] = d > this.points.length - 3 ? this.points.length - 1 : d + 2, h = this.points[l[0]], i = this.points[l[1]], j = this.points[l[2]], k = this.points[l[3]], f = e * e, g = e * f, m.x = b(h.x, i.x, j.x, k.x, e, f, g), m.y = b(h.y, i.y, j.y, k.y, e, f, g), m.z = b(h.z, i.z, j.z, k.z, e, f, g), m
        }, this.getControlPointsArray = function() {
            var a, b, c = this.points.length,
                d = [];
            for (a = 0; c > a; a++) b = this.points[a], d[a] = [b.x, b.y, b.z];
            return d
        }, this.getLength = function(a) {
            var b, c, d, e, f = 0,
                g = 0,
                h = 0,
                i = new THREE.Vector3,
                j = new THREE.Vector3,
                k = [],
                l = 0;
            for (k[0] = 0, a || (a = 100), d = this.points.length * a, i.copy(this.points[0]), b = 1; d > b; b++) c = b / d, e = this.getPoint(c), j.copy(e), l += j.distanceTo(i), i.copy(e), f = (this.points.length - 1) * c, g = Math.floor(f), g != h && (k[g] = l, h = g);
            return k[k.length] = l, {
                chunks: k,
                total: l
            }
        }, this.reparametrizeByArcLength = function(a) {
            var b, c, d, e, f, g, h, i, j = [],
                k = new THREE.Vector3,
                l = this.getLength();
            for (j.push(k.copy(this.points[0]).clone()), b = 1; b < this.points.length; b++) {
                for (g = l.chunks[b] - l.chunks[b - 1], h = Math.ceil(a * g / l.total), e = (b - 1) / (this.points.length - 1), f = b / (this.points.length - 1), c = 1; h - 1 > c; c++) d = e + c * (1 / h) * (f - e), i = this.getPoint(d), j.push(k.copy(i).clone());
                j.push(k.copy(this.points[b]).clone())
            }
            this.points = j
        }
    }, THREE.Triangle = function(a, b, c) {
        this.a = void 0 !== a ? a : new THREE.Vector3, this.b = void 0 !== b ? b : new THREE.Vector3, this.c = void 0 !== c ? c : new THREE.Vector3
    }, THREE.Triangle.normal = function() {
        var a = new THREE.Vector3;
        return function(b, c, d, e) {
            var f = e || new THREE.Vector3;
            f.subVectors(d, c), a.subVectors(b, c), f.cross(a);
            var g = f.lengthSq();
            return g > 0 ? f.multiplyScalar(1 / Math.sqrt(g)) : f.set(0, 0, 0)
        }
    }(), THREE.Triangle.barycoordFromPoint = function() {
        var a = new THREE.Vector3,
            b = new THREE.Vector3,
            c = new THREE.Vector3;
        return function(d, e, f, g, h) {
            a.subVectors(g, e), b.subVectors(f, e), c.subVectors(d, e);
            var i = a.dot(a),
                j = a.dot(b),
                k = a.dot(c),
                l = b.dot(b),
                m = b.dot(c),
                n = i * l - j * j,
                o = h || new THREE.Vector3;
            if (0 == n) return o.set(-2, -1, -1);
            var p = 1 / n,
                q = (l * k - j * m) * p,
                r = (i * m - j * k) * p;
            return o.set(1 - q - r, r, q)
        }
    }(), THREE.Triangle.containsPoint = function() {
        var a = new THREE.Vector3;
        return function(b, c, d, e) {
            var f = THREE.Triangle.barycoordFromPoint(b, c, d, e, a);
            return f.x >= 0 && f.y >= 0 && f.x + f.y <= 1
        }
    }(), THREE.Triangle.prototype = {
        constructor: THREE.Triangle,
        set: function(a, b, c) {
            return this.a.copy(a), this.b.copy(b), this.c.copy(c), this
        },
        setFromPointsAndIndices: function(a, b, c, d) {
            return this.a.copy(a[b]), this.b.copy(a[c]), this.c.copy(a[d]), this
        },
        copy: function(a) {
            return this.a.copy(a.a), this.b.copy(a.b), this.c.copy(a.c), this
        },
        area: function() {
            var a = new THREE.Vector3,
                b = new THREE.Vector3;
            return function() {
                return a.subVectors(this.c, this.b), b.subVectors(this.a, this.b), .5 * a.cross(b).length()
            }
        }(),
        midpoint: function(a) {
            var b = a || new THREE.Vector3;
            return b.addVectors(this.a, this.b).add(this.c).multiplyScalar(1 / 3)
        },
        normal: function(a) {
            return THREE.Triangle.normal(this.a, this.b, this.c, a)
        },
        plane: function(a) {
            var b = a || new THREE.Plane;
            return b.setFromCoplanarPoints(this.a, this.b, this.c)
        },
        barycoordFromPoint: function(a, b) {
            return THREE.Triangle.barycoordFromPoint(a, this.a, this.b, this.c, b)
        },
        containsPoint: function(a) {
            return THREE.Triangle.containsPoint(a, this.a, this.b, this.c)
        },
        equals: function(a) {
            return a.a.equals(this.a) && a.b.equals(this.b) && a.c.equals(this.c)
        },
        clone: function() {
            return (new THREE.Triangle).copy(this)
        }
    }, THREE.Clock = function(a) {
        this.autoStart = void 0 !== a ? a : !0, this.startTime = 0, this.oldTime = 0, this.elapsedTime = 0, this.running = !1
    }, THREE.Clock.prototype = {
        constructor: THREE.Clock,
        start: function() {
            this.startTime = void 0 !== self.performance && void 0 !== self.performance.now ? self.performance.now() : Date.now(), this.oldTime = this.startTime, this.running = !0
        },
        stop: function() {
            this.getElapsedTime(), this.running = !1
        },
        getElapsedTime: function() {
            return this.getDelta(), this.elapsedTime
        },
        getDelta: function() {
            var a = 0;
            if (this.autoStart && !this.running && this.start(), this.running) {
                var b = void 0 !== self.performance && void 0 !== self.performance.now ? self.performance.now() : Date.now();
                a = .001 * (b - this.oldTime), this.oldTime = b, this.elapsedTime += a
            }
            return a
        }
    }, THREE.EventDispatcher = function() {}, THREE.EventDispatcher.prototype = {
        constructor: THREE.EventDispatcher,
        apply: function(a) {
            a.addEventListener = THREE.EventDispatcher.prototype.addEventListener, a.hasEventListener = THREE.EventDispatcher.prototype.hasEventListener, a.removeEventListener = THREE.EventDispatcher.prototype.removeEventListener, a.dispatchEvent = THREE.EventDispatcher.prototype.dispatchEvent
        },
        addEventListener: function(a, b) {
            void 0 === this._listeners && (this._listeners = {});
            var c = this._listeners;
            void 0 === c[a] && (c[a] = []), -1 === c[a].indexOf(b) && c[a].push(b)
        },
        hasEventListener: function(a, b) {
            if (void 0 === this._listeners) return !1;
            var c = this._listeners;
            return void 0 !== c[a] && -1 !== c[a].indexOf(b) ? !0 : !1
        },
        removeEventListener: function(a, b) {
            if (void 0 !== this._listeners) {
                var c = this._listeners,
                    d = c[a];
                if (void 0 !== d) {
                    var e = d.indexOf(b); - 1 !== e && d.splice(e, 1)
                }
            }
        },
        dispatchEvent: function(a) {
            if (void 0 !== this._listeners) {
                var b = this._listeners,
                    c = b[a.type];
                if (void 0 !== c) {
                    a.target = this;
                    for (var d = [], e = c.length, f = 0; e > f; f++) d[f] = c[f];
                    for (var f = 0; e > f; f++) d[f].call(this, a)
                }
            }
        }
    },
    function(a) {
        a.Raycaster = function(b, c, d, e) {
            this.ray = new a.Ray(b, c), this.near = d || 0, this.far = e || 1 / 0, this.params = {
                Sprite: {},
                Mesh: {},
                PointCloud: {
                    threshold: 1
                },
                LOD: {},
                Line: {}
            }
        };
        var b = function(a, b) {
                return a.distance - b.distance
            },
            c = function(a, b, d, e) {
                if (a.raycast(b, d), e === !0)
                    for (var f = a.children, g = 0, h = f.length; h > g; g++) c(f[g], b, d, !0)
            };
        a.Raycaster.prototype = {
            constructor: a.Raycaster,
            precision: 1e-4,
            linePrecision: 1,
            set: function(a, b) {
                this.ray.set(a, b)
            },
            setFromCamera: function(b, c) {
                c instanceof a.PerspectiveCamera ? (this.ray.origin.copy(c.position), this.ray.direction.set(b.x, b.y, .5).unproject(c).sub(c.position).normalize()) : c instanceof a.OrthographicCamera ? (this.ray.origin.set(b.x, b.y, -1).unproject(c), this.ray.direction.set(0, 0, -1).transformDirection(c.matrixWorld)) : console.error("THREE.Raycaster: Unsupported camera type.")
            },
            intersectObject: function(a, d) {
                var e = [];
                return c(a, this, e, d), e.sort(b), e
            },
            intersectObjects: function(a, d) {
                var e = [];
                if (a instanceof Array == !1) return console.log("THREE.Raycaster.intersectObjects: objects is not an Array."), e;
                for (var f = 0, g = a.length; g > f; f++) c(a[f], this, e, d);
                return e.sort(b), e
            }
        }
    }(THREE), THREE.Object3D = function() {
        Object.defineProperty(this, "id", {
            value: THREE.Object3DIdCount++
        }), this.uuid = THREE.Math.generateUUID(), this.name = "", this.type = "Object3D", this.parent = void 0, this.children = [], this.up = THREE.Object3D.DefaultUp.clone();
        var a = new THREE.Vector3,
            b = new THREE.Euler,
            c = new THREE.Quaternion,
            d = new THREE.Vector3(1, 1, 1),
            e = function() {
                c.setFromEuler(b, !1)
            },
            f = function() {
                b.setFromQuaternion(c, void 0, !1)
            };
        b.onChange(e), c.onChange(f), Object.defineProperties(this, {
            position: {
                enumerable: !0,
                value: a
            },
            rotation: {
                enumerable: !0,
                value: b
            },
            quaternion: {
                enumerable: !0,
                value: c
            },
            scale: {
                enumerable: !0,
                value: d
            }
        }), this.rotationAutoUpdate = !0, this.matrix = new THREE.Matrix4, this.matrixWorld = new THREE.Matrix4, this.matrixAutoUpdate = !0, this.matrixWorldNeedsUpdate = !1, this.visible = !0, this.castShadow = !1, this.receiveShadow = !1, this.frustumCulled = !0, this.userData = {}
    }, THREE.Object3D.DefaultUp = new THREE.Vector3(0, 1, 0), THREE.Object3D.prototype = {
        constructor: THREE.Object3D,
        get eulerOrder() {
            return console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."), this.rotation.order
        },
        set eulerOrder(a) {
            console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."), this.rotation.order = a
        },
        get useQuaternion() {
            console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")
        },
        set useQuaternion(a) {
            console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")
        },
        applyMatrix: function(a) {
            this.matrix.multiplyMatrices(a, this.matrix), this.matrix.decompose(this.position, this.quaternion, this.scale)
        },
        setRotationFromAxisAngle: function(a, b) {
            this.quaternion.setFromAxisAngle(a, b)
        },
        setRotationFromEuler: function(a) {
            this.quaternion.setFromEuler(a, !0)
        },
        setRotationFromMatrix: function(a) {
            this.quaternion.setFromRotationMatrix(a)
        },
        setRotationFromQuaternion: function(a) {
            this.quaternion.copy(a)
        },
        rotateOnAxis: function() {
            var a = new THREE.Quaternion;
            return function(b, c) {
                return a.setFromAxisAngle(b, c), this.quaternion.multiply(a), this
            }
        }(),
        rotateX: function() {
            var a = new THREE.Vector3(1, 0, 0);
            return function(b) {
                return this.rotateOnAxis(a, b)
            }
        }(),
        rotateY: function() {
            var a = new THREE.Vector3(0, 1, 0);
            return function(b) {
                return this.rotateOnAxis(a, b)
            }
        }(),
        rotateZ: function() {
            var a = new THREE.Vector3(0, 0, 1);
            return function(b) {
                return this.rotateOnAxis(a, b)
            }
        }(),
        translateOnAxis: function() {
            var a = new THREE.Vector3;
            return function(b, c) {
                return a.copy(b).applyQuaternion(this.quaternion), this.position.add(a.multiplyScalar(c)), this
            }
        }(),
        translate: function(a, b) {
            return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."), this.translateOnAxis(b, a)
        },
        translateX: function() {
            var a = new THREE.Vector3(1, 0, 0);
            return function(b) {
                return this.translateOnAxis(a, b)
            }
        }(),
        translateY: function() {
            var a = new THREE.Vector3(0, 1, 0);
            return function(b) {
                return this.translateOnAxis(a, b)
            }
        }(),
        translateZ: function() {
            var a = new THREE.Vector3(0, 0, 1);
            return function(b) {
                return this.translateOnAxis(a, b)
            }
        }(),
        localToWorld: function(a) {
            return a.applyMatrix4(this.matrixWorld)
        },
        worldToLocal: function() {
            var a = new THREE.Matrix4;
            return function(b) {
                return b.applyMatrix4(a.getInverse(this.matrixWorld))
            }
        }(),
        lookAt: function() {
            var a = new THREE.Matrix4;
            return function(b) {
                a.lookAt(b, this.position, this.up), this.quaternion.setFromRotationMatrix(a)
            }
        }(),
        add: function(a) {
            if (arguments.length > 1) {
                for (var b = 0; b < arguments.length; b++) this.add(arguments[b]);
                return this
            }
            return a === this ? (console.error("THREE.Object3D.add:", a, "can't be added as a child of itself."), this) : (a instanceof THREE.Object3D ? (void 0 !== a.parent && a.parent.remove(a), a.parent = this, a.dispatchEvent({
                type: "added"
            }), this.children.push(a)) : console.error("THREE.Object3D.add:", a, "is not an instance of THREE.Object3D."), this)
        },
        remove: function(a) {
            if (arguments.length > 1)
                for (var b = 0; b < arguments.length; b++) this.remove(arguments[b]);
            var c = this.children.indexOf(a); - 1 !== c && (a.parent = void 0, a.dispatchEvent({
                type: "removed"
            }), this.children.splice(c, 1))
        },
        getChildByName: function(a, b) {
            return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."), this.getObjectByName(a, b)
        },
        getObjectById: function(a, b) {
            return this.getObjectByProperty("id", a, b)
        },
        getObjectByName: function(a, b) {
            return this.getObjectByProperty("name", a, b)
        },
        getObjectByProperty: function(a, b, c) {
            if (this[a] === b) return this;
            for (var d = 0, e = this.children.length; e > d; d++) {
                var f = this.children[d],
                    g = f.getObjectByProperty(a, b, c);
                if (void 0 !== g) return g
            }
            return void 0
        },
        getWorldPosition: function(a) {
            var b = a || new THREE.Vector3;
            return this.updateMatrixWorld(!0), b.setFromMatrixPosition(this.matrixWorld)
        },
        getWorldQuaternion: function() {
            var a = new THREE.Vector3,
                b = new THREE.Vector3;
            return function(c) {
                var d = c || new THREE.Quaternion;
                return this.updateMatrixWorld(!0), this.matrixWorld.decompose(a, d, b), d
            }
        }(),
        getWorldRotation: function() {
            var a = new THREE.Quaternion;
            return function(b) {
                var c = b || new THREE.Euler;
                return this.getWorldQuaternion(a), c.setFromQuaternion(a, this.rotation.order, !1)
            }
        }(),
        getWorldScale: function() {
            var a = new THREE.Vector3,
                b = new THREE.Quaternion;
            return function(c) {
                var d = c || new THREE.Vector3;
                return this.updateMatrixWorld(!0), this.matrixWorld.decompose(a, b, d), d
            }
        }(),
        getWorldDirection: function() {
            var a = new THREE.Quaternion;
            return function(b) {
                var c = b || new THREE.Vector3;
                return this.getWorldQuaternion(a), c.set(0, 0, 1).applyQuaternion(a)
            }
        }(),
        raycast: function() {},
        traverse: function(a) {
            a(this);
            for (var b = 0, c = this.children.length; c > b; b++) this.children[b].traverse(a)
        },
        traverseVisible: function(a) {
            if (this.visible !== !1) {
                a(this);
                for (var b = 0, c = this.children.length; c > b; b++) this.children[b].traverseVisible(a)
            }
        },
        traverseAncestors: function(a) {
            this.parent && (a(this.parent), this.parent.traverseAncestors(a))
        },
        updateMatrix: function() {
            this.matrix.compose(this.position, this.quaternion, this.scale), this.matrixWorldNeedsUpdate = !0
        },
        updateMatrixWorld: function(a) {
            this.matrixAutoUpdate === !0 && this.updateMatrix(), (this.matrixWorldNeedsUpdate === !0 || a === !0) && (void 0 === this.parent ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), this.matrixWorldNeedsUpdate = !1, a = !0);
            for (var b = 0, c = this.children.length; c > b; b++) this.children[b].updateMatrixWorld(a)
        },
        toJSON: function() {
            var a = {
                    metadata: {
                        version: 4.3,
                        type: "Object",
                        generator: "ObjectExporter"
                    }
                },
                b = {},
                c = function(c) {
                    if (void 0 === a.geometries && (a.geometries = []), void 0 === b[c.uuid]) {
                        var d = c.toJSON();
                        delete d.metadata, b[c.uuid] = d, a.geometries.push(d)
                    }
                    return c.uuid
                },
                d = {},
                e = function(b) {
                    if (void 0 === a.materials && (a.materials = []), void 0 === d[b.uuid]) {
                        var c = b.toJSON();
                        delete c.metadata, d[b.uuid] = c, a.materials.push(c)
                    }
                    return b.uuid
                },
                f = function(a) {
                    var b = {};
                    if (b.uuid = a.uuid, b.type = a.type, "" !== a.name && (b.name = a.name), "{}" !== JSON.stringify(a.userData) && (b.userData = a.userData), a.visible !== !0 && (b.visible = a.visible), a instanceof THREE.PerspectiveCamera ? (b.fov = a.fov, b.aspect = a.aspect, b.near = a.near, b.far = a.far) : a instanceof THREE.OrthographicCamera ? (b.left = a.left, b.right = a.right, b.top = a.top, b.bottom = a.bottom, b.near = a.near, b.far = a.far) : a instanceof THREE.AmbientLight ? b.color = a.color.getHex() : a instanceof THREE.DirectionalLight ? (b.color = a.color.getHex(), b.intensity = a.intensity) : a instanceof THREE.PointLight ? (b.color = a.color.getHex(), b.intensity = a.intensity, b.distance = a.distance) : a instanceof THREE.SpotLight ? (b.color = a.color.getHex(), b.intensity = a.intensity, b.distance = a.distance, b.angle = a.angle, b.exponent = a.exponent) : a instanceof THREE.HemisphereLight ? (b.color = a.color.getHex(), b.groundColor = a.groundColor.getHex()) : a instanceof THREE.Mesh ? (b.geometry = c(a.geometry), b.material = e(a.material)) : a instanceof THREE.Line ? (b.geometry = c(a.geometry), b.material = e(a.material)) : a instanceof THREE.Sprite && (b.material = e(a.material)), b.matrix = a.matrix.toArray(), a.children.length > 0) {
                        b.children = [];
                        for (var d = 0; d < a.children.length; d++) b.children.push(f(a.children[d]))
                    }
                    return b
                };
            return a.object = f(this), a
        },
        clone: function(a, b) {
            if (void 0 === a && (a = new THREE.Object3D), void 0 === b && (b = !0), a.name = this.name, a.up.copy(this.up), a.position.copy(this.position), a.quaternion.copy(this.quaternion), a.scale.copy(this.scale), a.rotationAutoUpdate = this.rotationAutoUpdate, a.matrix.copy(this.matrix), a.matrixWorld.copy(this.matrixWorld), a.matrixAutoUpdate = this.matrixAutoUpdate, a.matrixWorldNeedsUpdate = this.matrixWorldNeedsUpdate, a.visible = this.visible, a.castShadow = this.castShadow, a.receiveShadow = this.receiveShadow, a.frustumCulled = this.frustumCulled, a.userData = JSON.parse(JSON.stringify(this.userData)), b === !0)
                for (var c = 0; c < this.children.length; c++) {
                    var d = this.children[c];
                    a.add(d.clone())
                }
            return a
        }
    }, THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype), THREE.Object3DIdCount = 0, THREE.Face3 = function(a, b, c, d, e, f) {
        this.a = a, this.b = b, this.c = c, this.normal = d instanceof THREE.Vector3 ? d : new THREE.Vector3, this.vertexNormals = d instanceof Array ? d : [], this.color = e instanceof THREE.Color ? e : new THREE.Color, this.vertexColors = e instanceof Array ? e : [], this.vertexTangents = [], this.materialIndex = void 0 !== f ? f : 0
    }, THREE.Face3.prototype = {
        constructor: THREE.Face3,
        clone: function() {
            var a = new THREE.Face3(this.a, this.b, this.c);
            a.normal.copy(this.normal), a.color.copy(this.color), a.materialIndex = this.materialIndex;
            for (var b = 0, c = this.vertexNormals.length; c > b; b++) a.vertexNormals[b] = this.vertexNormals[b].clone();
            for (var b = 0, c = this.vertexColors.length; c > b; b++) a.vertexColors[b] = this.vertexColors[b].clone();
            for (var b = 0, c = this.vertexTangents.length; c > b; b++) a.vertexTangents[b] = this.vertexTangents[b].clone();
            return a
        }
    }, THREE.Face4 = function(a, b, c, d, e, f, g) {
        return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."), new THREE.Face3(a, b, c, e, f, g)
    }, THREE.BufferAttribute = function(a, b) {
        this.array = a, this.itemSize = b, this.needsUpdate = !1
    }, THREE.BufferAttribute.prototype = {
        constructor: THREE.BufferAttribute,
        get length() {
            return this.array.length
        },
        copyAt: function(a, b, c) {
            a *= this.itemSize, c *= b.itemSize;
            for (var d = 0, e = this.itemSize; e > d; d++) this.array[a + d] = b.array[c + d]
        },
        set: function(a) {
            return this.array.set(a), this
        },
        setX: function(a, b) {
            return this.array[a * this.itemSize] = b, this
        },
        setY: function(a, b) {
            return this.array[a * this.itemSize + 1] = b, this
        },
        setZ: function(a, b) {
            return this.array[a * this.itemSize + 2] = b, this
        },
        setXY: function(a, b, c) {
            return a *= this.itemSize, this.array[a] = b, this.array[a + 1] = c, this
        },
        setXYZ: function(a, b, c, d) {
            return a *= this.itemSize, this.array[a] = b, this.array[a + 1] = c, this.array[a + 2] = d, this
        },
        setXYZW: function(a, b, c, d, e) {
            return a *= this.itemSize, this.array[a] = b, this.array[a + 1] = c, this.array[a + 2] = d, this.array[a + 3] = e, this
        },
        clone: function() {
            return new THREE.BufferAttribute(new this.array.constructor(this.array), this.itemSize)
        }
    }, THREE.Int8Attribute = function(a, b) {
        return console.warn("THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new THREE.BufferAttribute(a, b)
    }, THREE.Uint8Attribute = function(a, b) {
        return console.warn("THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new THREE.BufferAttribute(a, b)
    }, THREE.Uint8ClampedAttribute = function(a, b) {
        return console.warn("THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new THREE.BufferAttribute(a, b)
    }, THREE.Int16Attribute = function(a, b) {
        return console.warn("THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new THREE.BufferAttribute(a, b)
    }, THREE.Uint16Attribute = function(a, b) {
        return console.warn("THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new THREE.BufferAttribute(a, b)
    }, THREE.Int32Attribute = function(a, b) {
        return console.warn("THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new THREE.BufferAttribute(a, b)
    }, THREE.Uint32Attribute = function(a, b) {
        return console.warn("THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new THREE.BufferAttribute(a, b)
    }, THREE.Float32Attribute = function(a, b) {
        return console.warn("THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new THREE.BufferAttribute(a, b)
    }, THREE.Float64Attribute = function(a, b) {
        return console.warn("THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new THREE.BufferAttribute(a, b)
    }, THREE.BufferGeometry = function() {
        Object.defineProperty(this, "id", {
            value: THREE.GeometryIdCount++
        }), this.uuid = THREE.Math.generateUUID(), this.name = "", this.type = "BufferGeometry", this.attributes = {}, this.attributesKeys = [], this.drawcalls = [], this.offsets = this.drawcalls, this.boundingBox = null, this.boundingSphere = null
    }, THREE.BufferGeometry.prototype = {
        constructor: THREE.BufferGeometry,
        addAttribute: function(a, b) {
            return b instanceof THREE.BufferAttribute == !1 ? (console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."), void(this.attributes[a] = {
                array: arguments[1],
                itemSize: arguments[2]
            })) : (this.attributes[a] = b, void(this.attributesKeys = Object.keys(this.attributes)))
        },
        getAttribute: function(a) {
            return this.attributes[a]
        },
        addDrawCall: function(a, b, c) {
            this.drawcalls.push({
                start: a,
                count: b,
                index: void 0 !== c ? c : 0
            })
        },
        applyMatrix: function(a) {
            var b = this.attributes.position;
            void 0 !== b && (a.applyToVector3Array(b.array), b.needsUpdate = !0);
            var c = this.attributes.normal;
            if (void 0 !== c) {
                var d = (new THREE.Matrix3).getNormalMatrix(a);
                d.applyToVector3Array(c.array), c.needsUpdate = !0
            }
        },
        center: function() {},
        fromGeometry: function(a, b) {
            b = b || {
                vertexColors: THREE.NoColors
            };
            var c = a.vertices,
                d = a.faces,
                e = a.faceVertexUvs,
                f = b.vertexColors,
                g = e[0].length > 0,
                h = 3 == d[0].vertexNormals.length,
                i = new Float32Array(3 * d.length * 3);
            this.addAttribute("position", new THREE.BufferAttribute(i, 3));
            var j = new Float32Array(3 * d.length * 3);
            if (this.addAttribute("normal", new THREE.BufferAttribute(j, 3)), f !== THREE.NoColors) {
                var k = new Float32Array(3 * d.length * 3);
                this.addAttribute("color", new THREE.BufferAttribute(k, 3))
            }
            if (g === !0) {
                var l = new Float32Array(3 * d.length * 2);
                this.addAttribute("uv", new THREE.BufferAttribute(l, 2))
            }
            for (var m = 0, n = 0, o = 0; m < d.length; m++, n += 6, o += 9) {
                var p = d[m],
                    q = c[p.a],
                    r = c[p.b],
                    s = c[p.c];
                if (i[o] = q.x, i[o + 1] = q.y, i[o + 2] = q.z, i[o + 3] = r.x, i[o + 4] = r.y, i[o + 5] = r.z, i[o + 6] = s.x, i[o + 7] = s.y, i[o + 8] = s.z, h === !0) {
                    var t = p.vertexNormals[0],
                        u = p.vertexNormals[1],
                        v = p.vertexNormals[2];
                    j[o] = t.x, j[o + 1] = t.y, j[o + 2] = t.z, j[o + 3] = u.x, j[o + 4] = u.y, j[o + 5] = u.z, j[o + 6] = v.x, j[o + 7] = v.y, j[o + 8] = v.z
                } else {
                    var w = p.normal;
                    j[o] = w.x, j[o + 1] = w.y, j[o + 2] = w.z, j[o + 3] = w.x, j[o + 4] = w.y, j[o + 5] = w.z, j[o + 6] = w.x, j[o + 7] = w.y, j[o + 8] = w.z
                }
                if (f === THREE.FaceColors) {
                    var x = p.color;
                    k[o] = x.r, k[o + 1] = x.g, k[o + 2] = x.b, k[o + 3] = x.r, k[o + 4] = x.g, k[o + 5] = x.b, k[o + 6] = x.r, k[o + 7] = x.g, k[o + 8] = x.b
                } else if (f === THREE.VertexColors) {
                    var y = p.vertexColors[0],
                        z = p.vertexColors[1],
                        A = p.vertexColors[2];
                    k[o] = y.r, k[o + 1] = y.g, k[o + 2] = y.b, k[o + 3] = z.r, k[o + 4] = z.g, k[o + 5] = z.b, k[o + 6] = A.r, k[o + 7] = A.g, k[o + 8] = A.b
                }
                if (g === !0) {
                    var B = e[0][m][0],
                        C = e[0][m][1],
                        D = e[0][m][2];
                    l[n] = B.x, l[n + 1] = B.y, l[n + 2] = C.x, l[n + 3] = C.y, l[n + 4] = D.x, l[n + 5] = D.y
                }
            }
            return this.computeBoundingSphere(), this
        },
        computeBoundingBox: function() {
            var a = new THREE.Vector3;
            return function() {
                null === this.boundingBox && (this.boundingBox = new THREE.Box3);
                var b = this.attributes.position.array;
                if (b) {
                    var c = this.boundingBox;
                    c.makeEmpty();
                    for (var d = 0, e = b.length; e > d; d += 3) a.set(b[d], b[d + 1], b[d + 2]), c.expandByPoint(a)
                }(void 0 === b || 0 === b.length) && (this.boundingBox.min.set(0, 0, 0), this.boundingBox.max.set(0, 0, 0)), (isNaN(this.boundingBox.min.x) || isNaN(this.boundingBox.min.y) || isNaN(this.boundingBox.min.z)) && console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.')
            }
        }(),
        computeBoundingSphere: function() {
            var a = new THREE.Box3,
                b = new THREE.Vector3;
            return function() {
                null === this.boundingSphere && (this.boundingSphere = new THREE.Sphere);
                var c = this.attributes.position.array;
                if (c) {
                    a.makeEmpty();
                    for (var d = this.boundingSphere.center, e = 0, f = c.length; f > e; e += 3) b.set(c[e], c[e + 1], c[e + 2]), a.expandByPoint(b);
                    a.center(d);
                    for (var g = 0, e = 0, f = c.length; f > e; e += 3) b.set(c[e], c[e + 1], c[e + 2]), g = Math.max(g, d.distanceToSquared(b));
                    this.boundingSphere.radius = Math.sqrt(g), isNaN(this.boundingSphere.radius) && console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')
                }
            }
        }(),
        computeFaceNormals: function() {},
        computeVertexNormals: function() {
            var a = this.attributes;
            if (a.position) {
                var b = a.position.array;
                if (void 0 === a.normal) this.addAttribute("normal", new THREE.BufferAttribute(new Float32Array(b.length), 3));
                else
                    for (var c = a.normal.array, d = 0, e = c.length; e > d; d++) c[d] = 0;
                var f, g, h, c = a.normal.array,
                    i = new THREE.Vector3,
                    j = new THREE.Vector3,
                    k = new THREE.Vector3,
                    l = new THREE.Vector3,
                    m = new THREE.Vector3;
                if (a.index)
                    for (var n = a.index.array, o = this.offsets.length > 0 ? this.offsets : [{
                            start: 0,
                            count: n.length,
                            index: 0
                        }], p = 0, q = o.length; q > p; ++p)
                        for (var r = o[p].start, s = o[p].count, t = o[p].index, d = r, e = r + s; e > d; d += 3) f = 3 * (t + n[d]), g = 3 * (t + n[d + 1]), h = 3 * (t + n[d + 2]), i.fromArray(b, f), j.fromArray(b, g), k.fromArray(b, h), l.subVectors(k, j), m.subVectors(i, j), l.cross(m), c[f] += l.x, c[f + 1] += l.y, c[f + 2] += l.z, c[g] += l.x, c[g + 1] += l.y, c[g + 2] += l.z, c[h] += l.x, c[h + 1] += l.y, c[h + 2] += l.z;
                else
                    for (var d = 0, e = b.length; e > d; d += 9) i.fromArray(b, d), j.fromArray(b, d + 3), k.fromArray(b, d + 6), l.subVectors(k, j), m.subVectors(i, j), l.cross(m), c[d] = l.x, c[d + 1] = l.y, c[d + 2] = l.z, c[d + 3] = l.x, c[d + 4] = l.y, c[d + 5] = l.z, c[d + 6] = l.x, c[d + 7] = l.y, c[d + 8] = l.z;
                this.normalizeNormals(), a.normal.needsUpdate = !0
            }
        },
        computeTangents: function() {
            function a(a, b, c) {
                D.fromArray(d, 3 * a), E.fromArray(d, 3 * b), F.fromArray(d, 3 * c), G.fromArray(f, 2 * a), H.fromArray(f, 2 * b), I.fromArray(f, 2 * c), l = E.x - D.x, m = F.x - D.x, n = E.y - D.y, o = F.y - D.y, p = E.z - D.z, q = F.z - D.z, r = H.x - G.x, s = I.x - G.x, t = H.y - G.y, u = I.y - G.y, v = 1 / (r * u - s * t), J.set((u * l - t * m) * v, (u * n - t * o) * v, (u * p - t * q) * v), K.set((r * m - s * l) * v, (r * o - s * n) * v, (r * q - s * p) * v), i[a].add(J), i[b].add(J), i[c].add(J), j[a].add(K), j[b].add(K), j[c].add(K)
            }

            function b(a) {
                U.fromArray(e, 3 * a), V.copy(U), Q = i[a], S.copy(Q), S.sub(U.multiplyScalar(U.dot(Q))).normalize(), T.crossVectors(V, Q), R = T.dot(j[a]), P = 0 > R ? -1 : 1, h[4 * a] = S.x, h[4 * a + 1] = S.y, h[4 * a + 2] = S.z, h[4 * a + 3] = P
            }
            if (void 0 === this.attributes.index || void 0 === this.attributes.position || void 0 === this.attributes.normal || void 0 === this.attributes.uv) return void console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");
            var c = this.attributes.index.array,
                d = this.attributes.position.array,
                e = this.attributes.normal.array,
                f = this.attributes.uv.array,
                g = d.length / 3;
            void 0 === this.attributes.tangent && this.addAttribute("tangent", new THREE.BufferAttribute(new Float32Array(4 * g), 4));
            for (var h = this.attributes.tangent.array, i = [], j = [], k = 0; g > k; k++) i[k] = new THREE.Vector3, j[k] = new THREE.Vector3;
            var l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, A, B, C, D = new THREE.Vector3,
                E = new THREE.Vector3,
                F = new THREE.Vector3,
                G = new THREE.Vector2,
                H = new THREE.Vector2,
                I = new THREE.Vector2,
                J = new THREE.Vector3,
                K = new THREE.Vector3;
            0 === this.drawcalls.length && this.addDrawCall(0, c.length, 0);
            var L = this.drawcalls;
            for (y = 0, z = L.length; z > y; ++y) {
                var M = L[y].start,
                    N = L[y].count,
                    O = L[y].index;
                for (w = M, x = M + N; x > w; w += 3) A = O + c[w], B = O + c[w + 1], C = O + c[w + 2], a(A, B, C)
            }
            var P, Q, R, S = new THREE.Vector3,
                T = new THREE.Vector3,
                U = new THREE.Vector3,
                V = new THREE.Vector3;
            for (y = 0, z = L.length; z > y; ++y) {
                var M = L[y].start,
                    N = L[y].count,
                    O = L[y].index;
                for (w = M, x = M + N; x > w; w += 3) A = O + c[w], B = O + c[w + 1], C = O + c[w + 2], b(A), b(B), b(C)
            }
        },
        computeOffsets: function(a) {
            var b = a;
            void 0 === a && (b = 65535);
            for (var c = (Date.now(), this.attributes.index.array), d = this.attributes.position.array, e = (d.length / 3, c.length / 3), f = new Uint16Array(c.length), g = 0, h = 0, i = [{
                    start: 0,
                    count: 0,
                    index: 0
                }], j = i[0], k = 0, l = 0, m = new Int32Array(6), n = new Int32Array(d.length), o = new Int32Array(d.length), p = 0; p < d.length; p++) n[p] = -1, o[p] = -1;
            for (var q = 0; e > q; q++) {
                l = 0;
                for (var r = 0; 3 > r; r++) {
                    var s = c[3 * q + r]; - 1 == n[s] ? (m[2 * r] = s, m[2 * r + 1] = -1, l++) : n[s] < j.index ? (m[2 * r] = s, m[2 * r + 1] = -1, k++) : (m[2 * r] = s, m[2 * r + 1] = n[s])
                }
                var t = h + l;
                if (t > j.index + b) {
                    var u = {
                        start: g,
                        count: 0,
                        index: h
                    };
                    i.push(u), j = u;
                    for (var v = 0; 6 > v; v += 2) {
                        var w = m[v + 1];
                        w > -1 && w < j.index && (m[v + 1] = -1)
                    }
                }
                for (var v = 0; 6 > v; v += 2) {
                    var s = m[v],
                        w = m[v + 1]; - 1 === w && (w = h++), n[s] = w, o[w] = s, f[g++] = w - j.index, j.count++
                }
            }
            return this.reorderBuffers(f, o, h), this.offsets = i, i
        },
        merge: function(a, b) {
            if (a instanceof THREE.BufferGeometry == !1) return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.", a);
            void 0 === b && (b = 0);
            var c = this.attributes;
            for (var d in c)
                if (void 0 !== a.attributes[d])
                    for (var e = c[d], f = e.array, g = a.attributes[d], h = g.array, i = g.itemSize, j = 0, k = i * b; j < h.length; j++, k++) f[k] = h[j];
            return this
        },
        normalizeNormals: function() {
            for (var a, b, c, d, e = this.attributes.normal.array, f = 0, g = e.length; g > f; f += 3) a = e[f], b = e[f + 1], c = e[f + 2], d = 1 / Math.sqrt(a * a + b * b + c * c), e[f] *= d, e[f + 1] *= d, e[f + 2] *= d
        },
        reorderBuffers: function(a, b, c) {
            var d = {};
            for (var e in this.attributes)
                if ("index" != e) {
                    var f = this.attributes[e].array;
                    d[e] = new f.constructor(this.attributes[e].itemSize * c)
                }
            for (var g = 0; c > g; g++) {
                var h = b[g];
                for (var e in this.attributes)
                    if ("index" != e)
                        for (var i = this.attributes[e].array, j = this.attributes[e].itemSize, k = d[e], l = 0; j > l; l++) k[g * j + l] = i[h * j + l]
            }
            this.attributes.index.array = a;
            for (var e in this.attributes) "index" != e && (this.attributes[e].array = d[e], this.attributes[e].numItems = this.attributes[e].itemSize * c)
        },
        toJSON: function() {
            var a = {
                    metadata: {
                        version: 4,
                        type: "BufferGeometry",
                        generator: "BufferGeometryExporter"
                    },
                    uuid: this.uuid,
                    type: this.type,
                    data: {
                        attributes: {}
                    }
                },
                b = this.attributes,
                c = this.offsets,
                d = this.boundingSphere;
            for (var e in b) {
                for (var f = b[e], g = [], h = f.array, i = 0, j = h.length; j > i; i++) g[i] = h[i];
                a.data.attributes[e] = {
                    itemSize: f.itemSize,
                    type: f.array.constructor.name,
                    array: g
                }
            }
            return c.length > 0 && (a.data.offsets = JSON.parse(JSON.stringify(c))), null !== d && (a.data.boundingSphere = {
                center: d.center.toArray(),
                radius: d.radius
            }), a
        },
        clone: function() {
            var a = new THREE.BufferGeometry;
            for (var b in this.attributes) {
                var c = this.attributes[b];
                a.addAttribute(b, c.clone())
            }
            for (var d = 0, e = this.offsets.length; e > d; d++) {
                var f = this.offsets[d];
                a.offsets.push({
                    start: f.start,
                    index: f.index,
                    count: f.count
                })
            }
            return a
        },
        dispose: function() {
            this.dispatchEvent({
                type: "dispose"
            })
        }
    }, THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype), THREE.Geometry = function() {
        Object.defineProperty(this, "id", {
            value: THREE.GeometryIdCount++
        }), this.uuid = THREE.Math.generateUUID(), this.name = "", this.type = "Geometry", this.vertices = [], this.colors = [], this.faces = [], this.faceVertexUvs = [
            []
        ], this.morphTargets = [], this.morphColors = [], this.morphNormals = [], this.skinWeights = [], this.skinIndices = [], this.lineDistances = [], this.boundingBox = null, this.boundingSphere = null, this.hasTangents = !1, this.dynamic = !0, this.verticesNeedUpdate = !1, this.elementsNeedUpdate = !1, this.uvsNeedUpdate = !1, this.normalsNeedUpdate = !1, this.tangentsNeedUpdate = !1, this.colorsNeedUpdate = !1, this.lineDistancesNeedUpdate = !1, this.groupsNeedUpdate = !1
    }, THREE.Geometry.prototype = {
        constructor: THREE.Geometry,
        applyMatrix: function(a) {
            for (var b = (new THREE.Matrix3).getNormalMatrix(a), c = 0, d = this.vertices.length; d > c; c++) {
                var e = this.vertices[c];
                e.applyMatrix4(a)
            }
            for (var c = 0, d = this.faces.length; d > c; c++) {
                var f = this.faces[c];
                f.normal.applyMatrix3(b).normalize();
                for (var g = 0, h = f.vertexNormals.length; h > g; g++) f.vertexNormals[g].applyMatrix3(b).normalize()
            }
            this.boundingBox instanceof THREE.Box3 && this.computeBoundingBox(), this.boundingSphere instanceof THREE.Sphere && this.computeBoundingSphere()
        },
        fromBufferGeometry: function(a) {
            for (var b = this, c = a.attributes, d = c.position.array, e = void 0 !== c.index ? c.index.array : void 0, f = void 0 !== c.normal ? c.normal.array : void 0, g = void 0 !== c.color ? c.color.array : void 0, h = void 0 !== c.uv ? c.uv.array : void 0, i = [], j = [], k = 0, l = 0; k < d.length; k += 3, l += 2) b.vertices.push(new THREE.Vector3(d[k], d[k + 1], d[k + 2])), void 0 !== f && i.push(new THREE.Vector3(f[k], f[k + 1], f[k + 2])), void 0 !== g && b.colors.push(new THREE.Color(g[k], g[k + 1], g[k + 2])), void 0 !== h && j.push(new THREE.Vector2(h[l], h[l + 1]));
            var m = function(a, c, d) {
                var e = void 0 !== f ? [i[a].clone(), i[c].clone(), i[d].clone()] : [],
                    k = void 0 !== g ? [b.colors[a].clone(), b.colors[c].clone(), b.colors[d].clone()] : [];
                b.faces.push(new THREE.Face3(a, c, d, e, k)), void 0 !== h && b.faceVertexUvs[0].push([j[a].clone(), j[c].clone(), j[d].clone()])
            };
            if (void 0 !== e)
                for (var k = 0; k < e.length; k += 3) m(e[k], e[k + 1], e[k + 2]);
            else
                for (var k = 0; k < d.length / 3; k += 3) m(k, k + 1, k + 2);
            return this.computeFaceNormals(), null !== a.boundingBox && (this.boundingBox = a.boundingBox.clone()), null !== a.boundingSphere && (this.boundingSphere = a.boundingSphere.clone()), this
        },
        center: function() {
            this.computeBoundingBox();
            var a = new THREE.Vector3;
            return a.addVectors(this.boundingBox.min, this.boundingBox.max), a.multiplyScalar(-.5), this.applyMatrix((new THREE.Matrix4).makeTranslation(a.x, a.y, a.z)), this.computeBoundingBox(), a
        },
        computeFaceNormals: function() {
            for (var a = new THREE.Vector3, b = new THREE.Vector3, c = 0, d = this.faces.length; d > c; c++) {
                var e = this.faces[c],
                    f = this.vertices[e.a],
                    g = this.vertices[e.b],
                    h = this.vertices[e.c];
                a.subVectors(h, g), b.subVectors(f, g), a.cross(b), a.normalize(), e.normal.copy(a)
            }
        },
        computeVertexNormals: function(a) {
            var b, c, d, e, f, g;
            for (g = new Array(this.vertices.length), b = 0, c = this.vertices.length; c > b; b++) g[b] = new THREE.Vector3;
            if (a) {
                {
                    var h, i, j, k = new THREE.Vector3,
                        l = new THREE.Vector3;
                    new THREE.Vector3, new THREE.Vector3, new THREE.Vector3
                }
                for (d = 0, e = this.faces.length; e > d; d++) f = this.faces[d], h = this.vertices[f.a], i = this.vertices[f.b], j = this.vertices[f.c], k.subVectors(j, i), l.subVectors(h, i), k.cross(l), g[f.a].add(k), g[f.b].add(k), g[f.c].add(k)
            } else
                for (d = 0, e = this.faces.length; e > d; d++) f = this.faces[d], g[f.a].add(f.normal), g[f.b].add(f.normal), g[f.c].add(f.normal);
            for (b = 0, c = this.vertices.length; c > b; b++) g[b].normalize();
            for (d = 0, e = this.faces.length; e > d; d++) f = this.faces[d], f.vertexNormals[0] = g[f.a].clone(), f.vertexNormals[1] = g[f.b].clone(), f.vertexNormals[2] = g[f.c].clone()
        },
        computeMorphNormals: function() {
            var a, b, c, d, e;
            for (c = 0, d = this.faces.length; d > c; c++)
                for (e = this.faces[c], e.__originalFaceNormal ? e.__originalFaceNormal.copy(e.normal) : e.__originalFaceNormal = e.normal.clone(), e.__originalVertexNormals || (e.__originalVertexNormals = []), a = 0, b = e.vertexNormals.length; b > a; a++) e.__originalVertexNormals[a] ? e.__originalVertexNormals[a].copy(e.vertexNormals[a]) : e.__originalVertexNormals[a] = e.vertexNormals[a].clone();
            var f = new THREE.Geometry;
            for (f.faces = this.faces, a = 0, b = this.morphTargets.length; b > a; a++) {
                if (!this.morphNormals[a]) {
                    this.morphNormals[a] = {}, this.morphNormals[a].faceNormals = [], this.morphNormals[a].vertexNormals = [];
                    var g, h, i = this.morphNormals[a].faceNormals,
                        j = this.morphNormals[a].vertexNormals;
                    for (c = 0, d = this.faces.length; d > c; c++) g = new THREE.Vector3, h = {
                        a: new THREE.Vector3,
                        b: new THREE.Vector3,
                        c: new THREE.Vector3
                    }, i.push(g), j.push(h)
                }
                var k = this.morphNormals[a];
                f.vertices = this.morphTargets[a].vertices, f.computeFaceNormals(), f.computeVertexNormals();
                var g, h;
                for (c = 0, d = this.faces.length; d > c; c++) e = this.faces[c], g = k.faceNormals[c], h = k.vertexNormals[c], g.copy(e.normal), h.a.copy(e.vertexNormals[0]), h.b.copy(e.vertexNormals[1]), h.c.copy(e.vertexNormals[2])
            }
            for (c = 0, d = this.faces.length; d > c; c++) e = this.faces[c], e.normal = e.__originalFaceNormal, e.vertexNormals = e.__originalVertexNormals
        },
        computeTangents: function() {
            function a(a, b, c, d, e, f, g) {
                j = a.vertices[b], k = a.vertices[c], l = a.vertices[d], m = i[e], n = i[f], o = i[g], p = k.x - j.x, q = l.x - j.x, r = k.y - j.y, s = l.y - j.y, t = k.z - j.z, u = l.z - j.z, v = n.x - m.x, w = o.x - m.x, x = n.y - m.y, y = o.y - m.y, z = 1 / (v * y - w * x), F.set((y * p - x * q) * z, (y * r - x * s) * z, (y * t - x * u) * z), G.set((v * q - w * p) * z, (v * s - w * r) * z, (v * u - w * t) * z), D[b].add(F), D[c].add(F), D[d].add(F), E[b].add(G), E[c].add(G), E[d].add(G)
            }
            var b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, A, B, C, D = [],
                E = [],
                F = new THREE.Vector3,
                G = new THREE.Vector3,
                H = new THREE.Vector3,
                I = new THREE.Vector3,
                J = new THREE.Vector3;
            for (d = 0, e = this.vertices.length; e > d; d++) D[d] = new THREE.Vector3, E[d] = new THREE.Vector3;
            for (b = 0, c = this.faces.length; c > b; b++) h = this.faces[b], i = this.faceVertexUvs[0][b], a(this, h.a, h.b, h.c, 0, 1, 2);
            var K = ["a", "b", "c", "d"];
            for (b = 0, c = this.faces.length; c > b; b++)
                for (h = this.faces[b], f = 0; f < Math.min(h.vertexNormals.length, 3); f++) J.copy(h.vertexNormals[f]), g = h[K[f]], A = D[g], H.copy(A), H.sub(J.multiplyScalar(J.dot(A))).normalize(), I.crossVectors(h.vertexNormals[f], A), B = I.dot(E[g]), C = 0 > B ? -1 : 1, h.vertexTangents[f] = new THREE.Vector4(H.x, H.y, H.z, C);
            this.hasTangents = !0
        },
        computeLineDistances: function() {
            for (var a = 0, b = this.vertices, c = 0, d = b.length; d > c; c++) c > 0 && (a += b[c].distanceTo(b[c - 1])), this.lineDistances[c] = a
        },
        computeBoundingBox: function() {
            null === this.boundingBox && (this.boundingBox = new THREE.Box3), this.boundingBox.setFromPoints(this.vertices)
        },
        computeBoundingSphere: function() {
            null === this.boundingSphere && (this.boundingSphere = new THREE.Sphere), this.boundingSphere.setFromPoints(this.vertices)
        },
        merge: function(a, b, c) {
            if (a instanceof THREE.Geometry == !1) return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.", a);
            var d, e = this.vertices.length,
                f = this.vertices,
                g = a.vertices,
                h = this.faces,
                i = a.faces,
                j = this.faceVertexUvs[0],
                k = a.faceVertexUvs[0];
            void 0 === c && (c = 0), void 0 !== b && (d = (new THREE.Matrix3).getNormalMatrix(b));
            for (var l = 0, m = g.length; m > l; l++) {
                var n = g[l],
                    o = n.clone();
                void 0 !== b && o.applyMatrix4(b), f.push(o)
            }
            for (l = 0, m = i.length; m > l; l++) {
                var p, q, r, s = i[l],
                    t = s.vertexNormals,
                    u = s.vertexColors;
                p = new THREE.Face3(s.a + e, s.b + e, s.c + e), p.normal.copy(s.normal), void 0 !== d && p.normal.applyMatrix3(d).normalize();
                for (var v = 0, w = t.length; w > v; v++) q = t[v].clone(), void 0 !== d && q.applyMatrix3(d).normalize(), p.vertexNormals.push(q);
                p.color.copy(s.color);
                for (var v = 0, w = u.length; w > v; v++) r = u[v], p.vertexColors.push(r.clone());
                p.materialIndex = s.materialIndex + c, h.push(p)
            }
            for (l = 0, m = k.length; m > l; l++) {
                var x = k[l],
                    y = [];
                if (void 0 !== x) {
                    for (var v = 0, w = x.length; w > v; v++) y.push(x[v].clone());
                    j.push(y)
                }
            }
        },
        mergeMesh: function(a) {
            return a instanceof THREE.Mesh == !1 ? void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.", a) : (a.matrixAutoUpdate && a.updateMatrix(), void this.merge(a.geometry, a.matrix))
        },
        mergeVertices: function() {
            var a, b, c, d, e, f, g, h, i = {},
                j = [],
                k = [],
                l = 4,
                m = Math.pow(10, l);
            for (c = 0, d = this.vertices.length; d > c; c++) a = this.vertices[c], b = Math.round(a.x * m) + "_" + Math.round(a.y * m) + "_" + Math.round(a.z * m), void 0 === i[b] ? (i[b] = c, j.push(this.vertices[c]), k[c] = j.length - 1) : k[c] = k[i[b]];
            var n = [];
            for (c = 0, d = this.faces.length; d > c; c++) {
                e = this.faces[c], e.a = k[e.a], e.b = k[e.b], e.c = k[e.c], f = [e.a, e.b, e.c];
                for (var o = -1, p = 0; 3 > p; p++)
                    if (f[p] == f[(p + 1) % 3]) {
                        o = p, n.push(c);
                        break
                    }
            }
            for (c = n.length - 1; c >= 0; c--) {
                var q = n[c];
                for (this.faces.splice(q, 1), g = 0, h = this.faceVertexUvs.length; h > g; g++) this.faceVertexUvs[g].splice(q, 1)
            }
            var r = this.vertices.length - j.length;
            return this.vertices = j, r
        },
        toJSON: function() {
            function a(a, b, c) {
                return c ? a | 1 << b : a & ~(1 << b)
            }

            function b(a) {
                var b = a.x.toString() + a.y.toString() + a.z.toString();
                return void 0 !== m[b] ? m[b] : (m[b] = l.length / 3, l.push(a.x, a.y, a.z), m[b])
            }

            function c(a) {
                var b = a.r.toString() + a.g.toString() + a.b.toString();
                return void 0 !== o[b] ? o[b] : (o[b] = n.length, n.push(a.getHex()), o[b])
            }

            function d(a) {
                var b = a.x.toString() + a.y.toString();
                return void 0 !== q[b] ? q[b] : (q[b] = p.length / 2, p.push(a.x, a.y), q[b])
            }
            var e = {
                metadata: {
                    version: 4,
                    type: "BufferGeometry",
                    generator: "BufferGeometryExporter"
                },
                uuid: this.uuid,
                type: this.type
            };
            if ("" !== this.name && (e.name = this.name), void 0 !== this.parameters) {
                var f = this.parameters;
                for (var g in f) void 0 !== f[g] && (e[g] = f[g]);
                return e
            }
            for (var h = [], i = 0; i < this.vertices.length; i++) {
                var j = this.vertices[i];
                h.push(j.x, j.y, j.z)
            }
            for (var k = [], l = [], m = {}, n = [], o = {}, p = [], q = {}, i = 0; i < this.faces.length; i++) {
                var r = this.faces[i],
                    s = !1,
                    t = !1,
                    u = void 0 !== this.faceVertexUvs[0][i],
                    v = r.normal.length() > 0,
                    w = r.vertexNormals.length > 0,
                    x = 1 !== r.color.r || 1 !== r.color.g || 1 !== r.color.b,
                    y = r.vertexColors.length > 0,
                    z = 0;
                if (z = a(z, 0, 0), z = a(z, 1, s), z = a(z, 2, t), z = a(z, 3, u), z = a(z, 4, v), z = a(z, 5, w), z = a(z, 6, x), z = a(z, 7, y), k.push(z), k.push(r.a, r.b, r.c), u) {
                    var A = this.faceVertexUvs[0][i];
                    k.push(d(A[0]), d(A[1]), d(A[2]))
                }
                if (v && k.push(b(r.normal)), w) {
                    var B = r.vertexNormals;
                    k.push(b(B[0]), b(B[1]), b(B[2]))
                }
                if (x && k.push(c(r.color)), y) {
                    var C = r.vertexColors;
                    k.push(c(C[0]), c(C[1]), c(C[2]))
                }
            }
            return e.data = {}, e.data.vertices = h, e.data.normals = l, n.length > 0 && (e.data.colors = n), p.length > 0 && (e.data.uvs = [p]), e.data.faces = k, e
        },
        clone: function() {
            for (var a = new THREE.Geometry, b = this.vertices, c = 0, d = b.length; d > c; c++) a.vertices.push(b[c].clone());
            for (var e = this.faces, c = 0, d = e.length; d > c; c++) a.faces.push(e[c].clone());
            for (var c = 0, d = this.faceVertexUvs.length; d > c; c++) {
                var f = this.faceVertexUvs[c];
                void 0 === a.faceVertexUvs[c] && (a.faceVertexUvs[c] = []);
                for (var g = 0, h = f.length; h > g; g++) {
                    for (var i = f[g], j = [], k = 0, l = i.length; l > k; k++) {
                        var m = i[k];
                        j.push(m.clone())
                    }
                    a.faceVertexUvs[c].push(j)
                }
            }
            return a
        },
        dispose: function() {
            this.dispatchEvent({
                type: "dispose"
            })
        }
    }, THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype), THREE.GeometryIdCount = 0, THREE.Camera = function() {
        THREE.Object3D.call(this), this.type = "Camera", this.matrixWorldInverse = new THREE.Matrix4, this.projectionMatrix = new THREE.Matrix4
    }, THREE.Camera.prototype = Object.create(THREE.Object3D.prototype), THREE.Camera.prototype.constructor = THREE.Camera, THREE.Camera.prototype.getWorldDirection = function() {
        var a = new THREE.Quaternion;
        return function(b) {
            var c = b || new THREE.Vector3;
            return this.getWorldQuaternion(a), c.set(0, 0, -1).applyQuaternion(a)
        }
    }(), THREE.Camera.prototype.lookAt = function() {
        var a = new THREE.Matrix4;
        return function(b) {
            a.lookAt(this.position, b, this.up), this.quaternion.setFromRotationMatrix(a)
        }
    }(), THREE.Camera.prototype.clone = function(a) {
        return void 0 === a && (a = new THREE.Camera), THREE.Object3D.prototype.clone.call(this, a), a.matrixWorldInverse.copy(this.matrixWorldInverse), a.projectionMatrix.copy(this.projectionMatrix), a
    }, THREE.CubeCamera = function(a, b, c) {
        THREE.Object3D.call(this), this.type = "CubeCamera";
        var d = 90,
            e = 1,
            f = new THREE.PerspectiveCamera(d, e, a, b);
        f.up.set(0, -1, 0), f.lookAt(new THREE.Vector3(1, 0, 0)), this.add(f);
        var g = new THREE.PerspectiveCamera(d, e, a, b);
        g.up.set(0, -1, 0), g.lookAt(new THREE.Vector3(-1, 0, 0)), this.add(g);
        var h = new THREE.PerspectiveCamera(d, e, a, b);
        h.up.set(0, 0, 1), h.lookAt(new THREE.Vector3(0, 1, 0)), this.add(h);
        var i = new THREE.PerspectiveCamera(d, e, a, b);
        i.up.set(0, 0, -1), i.lookAt(new THREE.Vector3(0, -1, 0)), this.add(i);
        var j = new THREE.PerspectiveCamera(d, e, a, b);
        j.up.set(0, -1, 0), j.lookAt(new THREE.Vector3(0, 0, 1)), this.add(j);
        var k = new THREE.PerspectiveCamera(d, e, a, b);
        k.up.set(0, -1, 0), k.lookAt(new THREE.Vector3(0, 0, -1)), this.add(k), this.renderTarget = new THREE.WebGLRenderTargetCube(c, c, {
            format: THREE.RGBFormat,
            magFilter: THREE.LinearFilter,
            minFilter: THREE.LinearFilter
        }), this.updateCubeMap = function(a, b) {
            var c = this.renderTarget,
                d = c.generateMipmaps;
            c.generateMipmaps = !1, c.activeCubeFace = 0, a.render(b, f, c), c.activeCubeFace = 1, a.render(b, g, c), c.activeCubeFace = 2, a.render(b, h, c), c.activeCubeFace = 3, a.render(b, i, c), c.activeCubeFace = 4, a.render(b, j, c), c.generateMipmaps = d, c.activeCubeFace = 5, a.render(b, k, c)
        }
    }, THREE.CubeCamera.prototype = Object.create(THREE.Object3D.prototype), THREE.CubeCamera.prototype.constructor = THREE.CubeCamera, THREE.OrthographicCamera = function(a, b, c, d, e, f) {
        THREE.Camera.call(this), this.type = "OrthographicCamera", this.zoom = 1, this.left = a, this.right = b, this.top = c, this.bottom = d, this.near = void 0 !== e ? e : .1, this.far = void 0 !== f ? f : 2e3, this.updateProjectionMatrix()
    }, THREE.OrthographicCamera.prototype = Object.create(THREE.Camera.prototype), THREE.OrthographicCamera.prototype.constructor = THREE.OrthographicCamera, THREE.OrthographicCamera.prototype.updateProjectionMatrix = function() {
        var a = (this.right - this.left) / (2 * this.zoom),
            b = (this.top - this.bottom) / (2 * this.zoom),
            c = (this.right + this.left) / 2,
            d = (this.top + this.bottom) / 2;
        this.projectionMatrix.makeOrthographic(c - a, c + a, d + b, d - b, this.near, this.far)
    }, THREE.OrthographicCamera.prototype.clone = function() {
        var a = new THREE.OrthographicCamera;
        return THREE.Camera.prototype.clone.call(this, a), a.zoom = this.zoom, a.left = this.left, a.right = this.right, a.top = this.top, a.bottom = this.bottom, a.near = this.near, a.far = this.far, a.projectionMatrix.copy(this.projectionMatrix), a
    }, THREE.PerspectiveCamera = function(a, b, c, d) {
        THREE.Camera.call(this), this.type = "PerspectiveCamera", this.zoom = 1, this.fov = void 0 !== a ? a : 50, this.aspect = void 0 !== b ? b : 1, this.near = void 0 !== c ? c : .1, this.far = void 0 !== d ? d : 2e3, this.updateProjectionMatrix()
    }, THREE.PerspectiveCamera.prototype = Object.create(THREE.Camera.prototype), THREE.PerspectiveCamera.prototype.constructor = THREE.PerspectiveCamera, THREE.PerspectiveCamera.prototype.setLens = function(a, b) {
        void 0 === b && (b = 24), this.fov = 2 * THREE.Math.radToDeg(Math.atan(b / (2 * a))), this.updateProjectionMatrix()
    }, THREE.PerspectiveCamera.prototype.setViewOffset = function(a, b, c, d, e, f) {
        this.fullWidth = a, this.fullHeight = b, this.x = c, this.y = d, this.width = e, this.height = f, this.updateProjectionMatrix()
    }, THREE.PerspectiveCamera.prototype.updateProjectionMatrix = function() {
        var a = THREE.Math.radToDeg(2 * Math.atan(Math.tan(.5 * THREE.Math.degToRad(this.fov)) / this.zoom));
        if (this.fullWidth) {
            var b = this.fullWidth / this.fullHeight,
                c = Math.tan(THREE.Math.degToRad(.5 * a)) * this.near,
                d = -c,
                e = b * d,
                f = b * c,
                g = Math.abs(f - e),
                h = Math.abs(c - d);
            this.projectionMatrix.makeFrustum(e + this.x * g / this.fullWidth, e + (this.x + this.width) * g / this.fullWidth, c - (this.y + this.height) * h / this.fullHeight, c - this.y * h / this.fullHeight, this.near, this.far)
        } else this.projectionMatrix.makePerspective(a, this.aspect, this.near, this.far)
    }, THREE.PerspectiveCamera.prototype.clone = function() {
        var a = new THREE.PerspectiveCamera;
        return THREE.Camera.prototype.clone.call(this, a), a.zoom = this.zoom, a.fov = this.fov, a.aspect = this.aspect, a.near = this.near, a.far = this.far, a.projectionMatrix.copy(this.projectionMatrix), a
    }, THREE.Light = function(a) {
        THREE.Object3D.call(this), this.type = "Light", this.color = new THREE.Color(a)
    }, THREE.Light.prototype = Object.create(THREE.Object3D.prototype), THREE.Light.prototype.constructor = THREE.Light, THREE.Light.prototype.clone = function(a) {
        return void 0 === a && (a = new THREE.Light), THREE.Object3D.prototype.clone.call(this, a), a.color.copy(this.color), a
    }, THREE.AmbientLight = function(a) {
        THREE.Light.call(this, a), this.type = "AmbientLight"
    }, THREE.AmbientLight.prototype = Object.create(THREE.Light.prototype), THREE.AmbientLight.prototype.constructor = THREE.AmbientLight, THREE.AmbientLight.prototype.clone = function() {
        var a = new THREE.AmbientLight;
        return THREE.Light.prototype.clone.call(this, a), a
    }, THREE.AreaLight = function(a, b) {
        THREE.Light.call(this, a), this.type = "AreaLight", this.normal = new THREE.Vector3(0, -1, 0), this.right = new THREE.Vector3(1, 0, 0), this.intensity = void 0 !== b ? b : 1, this.width = 1, this.height = 1, this.constantAttenuation = 1.5, this.linearAttenuation = .5, this.quadraticAttenuation = .1
    }, THREE.AreaLight.prototype = Object.create(THREE.Light.prototype), THREE.AreaLight.prototype.constructor = THREE.AreaLight, THREE.DirectionalLight = function(a, b) {
        THREE.Light.call(this, a), this.type = "DirectionalLight", this.position.set(0, 1, 0), this.target = new THREE.Object3D, this.intensity = void 0 !== b ? b : 1, this.castShadow = !1, this.onlyShadow = !1, this.shadowCameraNear = 50, this.shadowCameraFar = 5e3, this.shadowCameraLeft = -500, this.shadowCameraRight = 500, this.shadowCameraTop = 500, this.shadowCameraBottom = -500, this.shadowCameraVisible = !1, this.shadowBias = 0, this.shadowDarkness = .5, this.shadowMapWidth = 512, this.shadowMapHeight = 512, this.shadowCascade = !1, this.shadowCascadeOffset = new THREE.Vector3(0, 0, -1e3), this.shadowCascadeCount = 2, this.shadowCascadeBias = [0, 0, 0], this.shadowCascadeWidth = [512, 512, 512], this.shadowCascadeHeight = [512, 512, 512], this.shadowCascadeNearZ = [-1, .99, .998], this.shadowCascadeFarZ = [.99, .998, 1], this.shadowCascadeArray = [], this.shadowMap = null, this.shadowMapSize = null, this.shadowCamera = null, this.shadowMatrix = null
    }, THREE.DirectionalLight.prototype = Object.create(THREE.Light.prototype), THREE.DirectionalLight.prototype.constructor = THREE.DirectionalLight, THREE.DirectionalLight.prototype.clone = function() {
        var a = new THREE.DirectionalLight;
        return THREE.Light.prototype.clone.call(this, a), a.target = this.target.clone(), a.intensity = this.intensity, a.castShadow = this.castShadow, a.onlyShadow = this.onlyShadow, a.shadowCameraNear = this.shadowCameraNear, a.shadowCameraFar = this.shadowCameraFar, a.shadowCameraLeft = this.shadowCameraLeft, a.shadowCameraRight = this.shadowCameraRight, a.shadowCameraTop = this.shadowCameraTop, a.shadowCameraBottom = this.shadowCameraBottom, a.shadowCameraVisible = this.shadowCameraVisible, a.shadowBias = this.shadowBias, a.shadowDarkness = this.shadowDarkness, a.shadowMapWidth = this.shadowMapWidth, a.shadowMapHeight = this.shadowMapHeight, a.shadowCascade = this.shadowCascade, a.shadowCascadeOffset.copy(this.shadowCascadeOffset), a.shadowCascadeCount = this.shadowCascadeCount, a.shadowCascadeBias = this.shadowCascadeBias.slice(0), a.shadowCascadeWidth = this.shadowCascadeWidth.slice(0), a.shadowCascadeHeight = this.shadowCascadeHeight.slice(0), a.shadowCascadeNearZ = this.shadowCascadeNearZ.slice(0), a.shadowCascadeFarZ = this.shadowCascadeFarZ.slice(0), a
    }, THREE.HemisphereLight = function(a, b, c) {
        THREE.Light.call(this, a), this.type = "HemisphereLight", this.position.set(0, 100, 0), this.groundColor = new THREE.Color(b), this.intensity = void 0 !== c ? c : 1
    }, THREE.HemisphereLight.prototype = Object.create(THREE.Light.prototype), THREE.HemisphereLight.prototype.constructor = THREE.HemisphereLight, THREE.HemisphereLight.prototype.clone = function() {
        var a = new THREE.HemisphereLight;
        return THREE.Light.prototype.clone.call(this, a), a.groundColor.copy(this.groundColor), a.intensity = this.intensity, a
    }, THREE.PointLight = function(a, b, c) {
        THREE.Light.call(this, a), this.type = "PointLight", this.intensity = void 0 !== b ? b : 1, this.distance = void 0 !== c ? c : 0
    }, THREE.PointLight.prototype = Object.create(THREE.Light.prototype), THREE.PointLight.prototype.constructor = THREE.PointLight, THREE.PointLight.prototype.clone = function() {
        var a = new THREE.PointLight;
        return THREE.Light.prototype.clone.call(this, a), a.intensity = this.intensity, a.distance = this.distance, a
    }, THREE.SpotLight = function(a, b, c, d, e) {
        THREE.Light.call(this, a), this.type = "SpotLight", this.position.set(0, 1, 0), this.target = new THREE.Object3D, this.intensity = void 0 !== b ? b : 1, this.distance = void 0 !== c ? c : 0, this.angle = void 0 !== d ? d : Math.PI / 3, this.exponent = void 0 !== e ? e : 10, this.castShadow = !1, this.onlyShadow = !1, this.shadowCameraNear = 50, this.shadowCameraFar = 5e3, this.shadowCameraFov = 50, this.shadowCameraVisible = !1, this.shadowBias = 0, this.shadowDarkness = .5, this.shadowMapWidth = 512, this.shadowMapHeight = 512, this.shadowMap = null, this.shadowMapSize = null, this.shadowCamera = null, this.shadowMatrix = null
    }, THREE.SpotLight.prototype = Object.create(THREE.Light.prototype), THREE.SpotLight.prototype.constructor = THREE.SpotLight, THREE.SpotLight.prototype.clone = function() {
        var a = new THREE.SpotLight;
        return THREE.Light.prototype.clone.call(this, a), a.target = this.target.clone(), a.intensity = this.intensity, a.distance = this.distance, a.angle = this.angle, a.exponent = this.exponent, a.castShadow = this.castShadow, a.onlyShadow = this.onlyShadow, a.shadowCameraNear = this.shadowCameraNear, a.shadowCameraFar = this.shadowCameraFar, a.shadowCameraFov = this.shadowCameraFov, a.shadowCameraVisible = this.shadowCameraVisible, a.shadowBias = this.shadowBias, a.shadowDarkness = this.shadowDarkness, a.shadowMapWidth = this.shadowMapWidth, a.shadowMapHeight = this.shadowMapHeight, a
    }, THREE.Cache = function() {
        this.files = {}
    }, THREE.Cache.prototype = {
        constructor: THREE.Cache,
        add: function(a, b) {
            this.files[a] = b
        },
        get: function(a) {
            return this.files[a]
        },
        remove: function(a) {
            delete this.files[a]
        },
        clear: function() {
            this.files = {}
        }
    }, THREE.Loader = function(a) {
        this.showStatus = a, this.statusDomElement = a ? THREE.Loader.prototype.addStatusElement() : null, this.imageLoader = new THREE.ImageLoader, this.onLoadStart = function() {}, this.onLoadProgress = function() {}, this.onLoadComplete = function() {}
    }, THREE.Loader.prototype = {
        constructor: THREE.Loader,
        crossOrigin: void 0,
        addStatusElement: function() {
            var a = document.createElement("div");
            return a.style.position = "absolute", a.style.right = "0px", a.style.top = "0px", a.style.fontSize = "0.8em", a.style.textAlign = "left", a.style.background = "rgba(0,0,0,0.25)", a.style.color = "#fff", a.style.width = "120px", a.style.padding = "0.5em 0.5em 0.5em 0.5em", a.style.zIndex = 1e3, a.innerHTML = "Loading ...", a
        },
        updateProgress: function(a) {
            var b = "Loaded ";
            b += a.total ? (100 * a.loaded / a.total).toFixed(0) + "%" : (a.loaded / 1024).toFixed(2) + " KB", this.statusDomElement.innerHTML = b
        },
        extractUrlBase: function(a) {
            var b = a.split("/");
            return 1 === b.length ? "./" : (b.pop(), b.join("/") + "/")
        },
        initMaterials: function(a, b) {
            for (var c = [], d = 0; d < a.length; ++d) c[d] = this.createMaterial(a[d], b);
            return c
        },
        needsTangents: function(a) {
            for (var b = 0, c = a.length; c > b; b++) {
                var d = a[b];
                if (d instanceof THREE.ShaderMaterial) return !0
            }
            return !1
        },
        createMaterial: function(a, b) {
            function c(a) {
                var b = Math.log(a) / Math.LN2;
                return Math.pow(2, Math.round(b))
            }

            function d(a, d, e, g, h, i, j) {
                var k, l = b + e,
                    m = THREE.Loader.Handlers.get(l);
                if (null !== m ? k = m.load(l) : (k = new THREE.Texture, m = f.imageLoader, m.crossOrigin = f.crossOrigin, m.load(l, function(a) {
                        if (THREE.Math.isPowerOfTwo(a.width) === !1 || THREE.Math.isPowerOfTwo(a.height) === !1) {
                            var b = c(a.width),
                                d = c(a.height),
                                e = document.createElement("canvas");
                            e.width = b, e.height = d;
                            var f = e.getContext("2d");
                            f.drawImage(a, 0, 0, b, d), k.image = e
                        } else k.image = a;
                        k.needsUpdate = !0
                    })), k.sourceFile = e, g && (k.repeat.set(g[0], g[1]), 1 !== g[0] && (k.wrapS = THREE.RepeatWrapping), 1 !== g[1] && (k.wrapT = THREE.RepeatWrapping)), h && k.offset.set(h[0], h[1]), i) {
                    var n = {
                        repeat: THREE.RepeatWrapping,
                        mirror: THREE.MirroredRepeatWrapping
                    };
                    void 0 !== n[i[0]] && (k.wrapS = n[i[0]]), void 0 !== n[i[1]] && (k.wrapT = n[i[1]])
                }
                j && (k.anisotropy = j), a[d] = k
            }

            function e(a) {
                return (255 * a[0] << 16) + (255 * a[1] << 8) + 255 * a[2]
            }
            var f = this,
                g = "MeshLambertMaterial",
                h = {
                    color: 15658734,
                    opacity: 1,
                    map: null,
                    lightMap: null,
                    normalMap: null,
                    bumpMap: null,
                    wireframe: !1
                };
            if (a.shading) {
                var i = a.shading.toLowerCase();
                "phong" === i ? g = "MeshPhongMaterial" : "basic" === i && (g = "MeshBasicMaterial")
            }
            void 0 !== a.blending && void 0 !== THREE[a.blending] && (h.blending = THREE[a.blending]), (void 0 !== a.transparent || a.opacity < 1) && (h.transparent = a.transparent), void 0 !== a.depthTest && (h.depthTest = a.depthTest), void 0 !== a.depthWrite && (h.depthWrite = a.depthWrite), void 0 !== a.visible && (h.visible = a.visible), void 0 !== a.flipSided && (h.side = THREE.BackSide), void 0 !== a.doubleSided && (h.side = THREE.DoubleSide), void 0 !== a.wireframe && (h.wireframe = a.wireframe), void 0 !== a.vertexColors && ("face" === a.vertexColors ? h.vertexColors = THREE.FaceColors : a.vertexColors && (h.vertexColors = THREE.VertexColors)), a.colorDiffuse ? h.color = e(a.colorDiffuse) : a.DbgColor && (h.color = a.DbgColor), a.colorSpecular && (h.specular = e(a.colorSpecular)), a.colorAmbient && (h.ambient = e(a.colorAmbient)), a.colorEmissive && (h.emissive = e(a.colorEmissive)), a.transparency && (h.opacity = a.transparency), a.specularCoef && (h.shininess = a.specularCoef), a.mapDiffuse && b && d(h, "map", a.mapDiffuse, a.mapDiffuseRepeat, a.mapDiffuseOffset, a.mapDiffuseWrap, a.mapDiffuseAnisotropy), a.mapLight && b && d(h, "lightMap", a.mapLight, a.mapLightRepeat, a.mapLightOffset, a.mapLightWrap, a.mapLightAnisotropy), a.mapBump && b && d(h, "bumpMap", a.mapBump, a.mapBumpRepeat, a.mapBumpOffset, a.mapBumpWrap, a.mapBumpAnisotropy), a.mapNormal && b && d(h, "normalMap", a.mapNormal, a.mapNormalRepeat, a.mapNormalOffset, a.mapNormalWrap, a.mapNormalAnisotropy), a.mapSpecular && b && d(h, "specularMap", a.mapSpecular, a.mapSpecularRepeat, a.mapSpecularOffset, a.mapSpecularWrap, a.mapSpecularAnisotropy), a.mapAlpha && b && d(h, "alphaMap", a.mapAlpha, a.mapAlphaRepeat, a.mapAlphaOffset, a.mapAlphaWrap, a.mapAlphaAnisotropy), a.mapBumpScale && (h.bumpScale = a.mapBumpScale), a.mapNormalFactor && (h.normalScale = new THREE.Vector2(a.mapNormalFactor, a.mapNormalFactor));
            var j = new THREE[g](h);
            return void 0 !== a.DbgName && (j.name = a.DbgName), j
        }
    }, THREE.Loader.Handlers = {
        handlers: [],
        add: function(a, b) {
            this.handlers.push(a, b)
        },
        get: function(a) {
            for (var b = 0, c = this.handlers.length; c > b; b += 2) {
                var d = this.handlers[b],
                    e = this.handlers[b + 1];
                if (d.test(a)) return e
            }
            return null
        }
    }, THREE.XHRLoader = function(a) {
        this.cache = new THREE.Cache, this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager
    }, THREE.XHRLoader.prototype = {
        constructor: THREE.XHRLoader,
        load: function(a, b, c, d) {
            var e = this,
                f = e.cache.get(a);
            if (void 0 !== f) return void(b && b(f));
            var g = new XMLHttpRequest;
            g.open("GET", a, !0), g.addEventListener("load", function() {
                e.cache.add(a, this.response), b && b(this.response), e.manager.itemEnd(a)
            }, !1), void 0 !== c && g.addEventListener("progress", function(a) {
                c(a)
            }, !1), void 0 !== d && g.addEventListener("error", function(a) {
                d(a)
            }, !1), void 0 !== this.crossOrigin && (g.crossOrigin = this.crossOrigin), void 0 !== this.responseType && (g.responseType = this.responseType), g.send(null), e.manager.itemStart(a)
        },
        setResponseType: function(a) {
            this.responseType = a
        },
        setCrossOrigin: function(a) {
            this.crossOrigin = a
        }
    }, THREE.ImageLoader = function(a) {
        this.cache = new THREE.Cache, this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager
    }, THREE.ImageLoader.prototype = {
        constructor: THREE.ImageLoader,
        load: function(a, b, c, d) {
            var e = this,
                f = e.cache.get(a);
            if (void 0 !== f) return void b(f);
            var g = document.createElement("img");
            return void 0 !== b && g.addEventListener("load", function() {
                e.cache.add(a, this), b(this), e.manager.itemEnd(a)
            }, !1), void 0 !== c && g.addEventListener("progress", function(a) {
                c(a)
            }, !1), void 0 !== d && g.addEventListener("error", function(a) {
                d(a)
            }, !1), void 0 !== this.crossOrigin && (g.crossOrigin = this.crossOrigin), g.src = a, e.manager.itemStart(a), g
        },
        setCrossOrigin: function(a) {
            this.crossOrigin = a
        }
    }, THREE.JSONLoader = function(a) {
        THREE.Loader.call(this, a), this.withCredentials = !1
    }, THREE.JSONLoader.prototype = Object.create(THREE.Loader.prototype), THREE.JSONLoader.prototype.constructor = THREE.JSONLoader, THREE.JSONLoader.prototype.load = function(a, b, c) {
        c = c && "string" == typeof c ? c : this.extractUrlBase(a), this.onLoadStart(), this.loadAjaxJSON(this, a, b, c)
    }, THREE.JSONLoader.prototype.loadAjaxJSON = function(a, b, c, d, e) {
        var f = new XMLHttpRequest,
            g = 0;
        f.onreadystatechange = function() {
            if (f.readyState === f.DONE)
                if (200 === f.status || 0 === f.status) {
                    if (f.responseText) {
                        var h = JSON.parse(f.responseText);
                        if (void 0 !== h.metadata && "scene" === h.metadata.type) return void console.error('THREE.JSONLoader: "' + b + '" seems to be a Scene. Use THREE.SceneLoader instead.');
                        var i = a.parse(h, d);
                        c(i.geometry, i.materials)
                    } else console.error('THREE.JSONLoader: "' + b + '" seems to be unreachable or the file is empty.');
                    a.onLoadComplete()
                } else console.error("THREE.JSONLoader: Couldn't load \"" + b + '" (' + f.status + ")");
            else f.readyState === f.LOADING ? e && (0 === g && (g = f.getResponseHeader("Content-Length")), e({
                total: g,
                loaded: f.responseText.length
            })) : f.readyState === f.HEADERS_RECEIVED && void 0 !== e && (g = f.getResponseHeader("Content-Length"))
        }, f.open("GET", b, !0), f.withCredentials = this.withCredentials, f.send(null)
    }, THREE.JSONLoader.prototype.parse = function(a, b) {
        function c(b) {
            function c(a, b) {
                return a & 1 << b
            }
            var d, e, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, A, B, C, D, E, F = a.faces,
                G = a.vertices,
                H = a.normals,
                I = a.colors,
                J = 0;
            if (void 0 !== a.uvs) {
                for (d = 0; d < a.uvs.length; d++) a.uvs[d].length && J++;
                for (d = 0; J > d; d++) f.faceVertexUvs[d] = []
            }
            for (h = 0, i = G.length; i > h;) v = new THREE.Vector3, v.x = G[h++] * b, v.y = G[h++] * b, v.z = G[h++] * b, f.vertices.push(v);
            for (h = 0, i = F.length; i > h;)
                if (n = F[h++], o = c(n, 0), p = c(n, 1), q = c(n, 3), r = c(n, 4), s = c(n, 5), t = c(n, 6), u = c(n, 7), o) {
                    if (x = new THREE.Face3, x.a = F[h], x.b = F[h + 1], x.c = F[h + 3], y = new THREE.Face3, y.a = F[h + 1], y.b = F[h + 2], y.c = F[h + 3], h += 4, p && (m = F[h++], x.materialIndex = m, y.materialIndex = m), g = f.faces.length, q)
                        for (d = 0; J > d; d++)
                            for (B = a.uvs[d], f.faceVertexUvs[d][g] = [], f.faceVertexUvs[d][g + 1] = [], e = 0; 4 > e; e++) l = F[h++], D = B[2 * l], E = B[2 * l + 1], C = new THREE.Vector2(D, E), 2 !== e && f.faceVertexUvs[d][g].push(C), 0 !== e && f.faceVertexUvs[d][g + 1].push(C);
                    if (r && (k = 3 * F[h++], x.normal.set(H[k++], H[k++], H[k]), y.normal.copy(x.normal)), s)
                        for (d = 0; 4 > d; d++) k = 3 * F[h++], A = new THREE.Vector3(H[k++], H[k++], H[k]), 2 !== d && x.vertexNormals.push(A), 0 !== d && y.vertexNormals.push(A);
                    if (t && (j = F[h++], z = I[j], x.color.setHex(z), y.color.setHex(z)), u)
                        for (d = 0; 4 > d; d++) j = F[h++], z = I[j], 2 !== d && x.vertexColors.push(new THREE.Color(z)), 0 !== d && y.vertexColors.push(new THREE.Color(z));
                    f.faces.push(x), f.faces.push(y)
                } else {
                    if (w = new THREE.Face3, w.a = F[h++], w.b = F[h++], w.c = F[h++], p && (m = F[h++], w.materialIndex = m), g = f.faces.length, q)
                        for (d = 0; J > d; d++)
                            for (B = a.uvs[d], f.faceVertexUvs[d][g] = [], e = 0; 3 > e; e++) l = F[h++], D = B[2 * l], E = B[2 * l + 1], C = new THREE.Vector2(D, E), f.faceVertexUvs[d][g].push(C);
                    if (r && (k = 3 * F[h++], w.normal.set(H[k++], H[k++], H[k])), s)
                        for (d = 0; 3 > d; d++) k = 3 * F[h++], A = new THREE.Vector3(H[k++], H[k++], H[k]), w.vertexNormals.push(A);
                    if (t && (j = F[h++], w.color.setHex(I[j])), u)
                        for (d = 0; 3 > d; d++) j = F[h++], w.vertexColors.push(new THREE.Color(I[j]));
                    f.faces.push(w)
                }
        }

        function d() {
            var b = void 0 !== a.influencesPerVertex ? a.influencesPerVertex : 2;
            if (a.skinWeights)
                for (var c = 0, d = a.skinWeights.length; d > c; c += b) {
                    var e = a.skinWeights[c],
                        g = b > 1 ? a.skinWeights[c + 1] : 0,
                        h = b > 2 ? a.skinWeights[c + 2] : 0,
                        i = b > 3 ? a.skinWeights[c + 3] : 0;
                    f.skinWeights.push(new THREE.Vector4(e, g, h, i))
                }
            if (a.skinIndices)
                for (var c = 0, d = a.skinIndices.length; d > c; c += b) {
                    var j = a.skinIndices[c],
                        k = b > 1 ? a.skinIndices[c + 1] : 0,
                        l = b > 2 ? a.skinIndices[c + 2] : 0,
                        m = b > 3 ? a.skinIndices[c + 3] : 0;
                    f.skinIndices.push(new THREE.Vector4(j, k, l, m))
                }
            f.bones = a.bones, f.bones && f.bones.length > 0 && (f.skinWeights.length !== f.skinIndices.length || f.skinIndices.length !== f.vertices.length) && console.warn("When skinning, number of vertices (" + f.vertices.length + "), skinIndices (" + f.skinIndices.length + "), and skinWeights (" + f.skinWeights.length + ") should match."), f.animation = a.animation, f.animations = a.animations
        }

        function e(b) {
            if (void 0 !== a.morphTargets) {
                var c, d, e, g, h, i;
                for (c = 0, d = a.morphTargets.length; d > c; c++)
                    for (f.morphTargets[c] = {}, f.morphTargets[c].name = a.morphTargets[c].name, f.morphTargets[c].vertices = [], h = f.morphTargets[c].vertices, i = a.morphTargets[c].vertices, e = 0, g = i.length; g > e; e += 3) {
                        var j = new THREE.Vector3;
                        j.x = i[e] * b, j.y = i[e + 1] * b, j.z = i[e + 2] * b, h.push(j)
                    }
            }
            if (void 0 !== a.morphColors) {
                var c, d, k, l, m, n, o;
                for (c = 0, d = a.morphColors.length; d > c; c++)
                    for (f.morphColors[c] = {}, f.morphColors[c].name = a.morphColors[c].name, f.morphColors[c].colors = [], m = f.morphColors[c].colors, n = a.morphColors[c].colors, k = 0, l = n.length; l > k; k += 3) o = new THREE.Color(16755200), o.setRGB(n[k], n[k + 1], n[k + 2]), m.push(o)
            }
        }
        var f = new THREE.Geometry,
            g = void 0 !== a.scale ? 1 / a.scale : 1;
        if (c(g), d(), e(g), f.computeFaceNormals(), f.computeBoundingSphere(), void 0 === a.materials || 0 === a.materials.length) return {
            geometry: f
        };
        var h = this.initMaterials(a.materials, b);
        return this.needsTangents(h) && f.computeTangents(), {
            geometry: f,
            materials: h
        }
    }, THREE.LoadingManager = function(a, b, c) {
        var d = this,
            e = 0,
            f = 0;
        this.onLoad = a, this.onProgress = b, this.onError = c, this.itemStart = function() {
            f++
        }, this.itemEnd = function(a) {
            e++, void 0 !== d.onProgress && d.onProgress(a, e, f), e === f && void 0 !== d.onLoad && d.onLoad()
        }
    }, THREE.DefaultLoadingManager = new THREE.LoadingManager, THREE.BufferGeometryLoader = function(a) {
        this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager
    }, THREE.BufferGeometryLoader.prototype = {
        constructor: THREE.BufferGeometryLoader,
        load: function(a, b, c, d) {
            var e = this,
                f = new THREE.XHRLoader(e.manager);
            f.setCrossOrigin(this.crossOrigin), f.load(a, function(a) {
                b(e.parse(JSON.parse(a)))
            }, c, d)
        },
        setCrossOrigin: function(a) {
            this.crossOrigin = a
        },
        parse: function(a) {
            var b = new THREE.BufferGeometry,
                c = a.attributes;
            for (var d in c) {
                var e = c[d],
                    f = new self[e.type](e.array);
                b.addAttribute(d, new THREE.BufferAttribute(f, e.itemSize))
            }
            var g = a.offsets;
            void 0 !== g && (b.offsets = JSON.parse(JSON.stringify(g)));
            var h = a.boundingSphere;
            if (void 0 !== h) {
                var i = new THREE.Vector3;
                void 0 !== h.center && i.fromArray(h.center), b.boundingSphere = new THREE.Sphere(i, h.radius)
            }
            return b
        }
    }, THREE.MaterialLoader = function(a) {
        this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager
    }, THREE.MaterialLoader.prototype = {
        constructor: THREE.MaterialLoader,
        load: function(a, b, c, d) {
            var e = this,
                f = new THREE.XHRLoader(e.manager);
            f.setCrossOrigin(this.crossOrigin), f.load(a, function(a) {
                b(e.parse(JSON.parse(a)))
            }, c, d)
        },
        setCrossOrigin: function(a) {
            this.crossOrigin = a
        },
        parse: function(a) {
            var b = new THREE[a.type];
            if (void 0 !== a.color && b.color.setHex(a.color), void 0 !== a.ambient && b.ambient.setHex(a.ambient), void 0 !== a.emissive && b.emissive.setHex(a.emissive), void 0 !== a.specular && b.specular.setHex(a.specular), void 0 !== a.shininess && (b.shininess = a.shininess), void 0 !== a.uniforms && (b.uniforms = a.uniforms), void 0 !== a.vertexShader && (b.vertexShader = a.vertexShader), void 0 !== a.fragmentShader && (b.fragmentShader = a.fragmentShader), void 0 !== a.vertexColors && (b.vertexColors = a.vertexColors), void 0 !== a.shading && (b.shading = a.shading), void 0 !== a.blending && (b.blending = a.blending), void 0 !== a.side && (b.side = a.side), void 0 !== a.opacity && (b.opacity = a.opacity), void 0 !== a.transparent && (b.transparent = a.transparent), void 0 !== a.wireframe && (b.wireframe = a.wireframe), void 0 !== a.materials)
                for (var c = 0, d = a.materials.length; d > c; c++) b.materials.push(this.parse(a.materials[c]));
            return b
        }
    }, THREE.ObjectLoader = function(a) {
        this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager
    }, THREE.ObjectLoader.prototype = {
        constructor: THREE.ObjectLoader,
        load: function(a, b, c, d) {
            var e = this,
                f = new THREE.XHRLoader(e.manager);
            f.setCrossOrigin(this.crossOrigin), f.load(a, function(a) {
                b(e.parse(JSON.parse(a)))
            }, c, d)
        },
        setCrossOrigin: function(a) {
            this.crossOrigin = a
        },
        parse: function(a) {
            var b = this.parseGeometries(a.geometries),
                c = this.parseMaterials(a.materials),
                d = this.parseObject(a.object, b, c);
            return d
        },
        parseGeometries: function(a) {
            var b = {};
            if (void 0 !== a)
                for (var c = new THREE.JSONLoader, d = new THREE.BufferGeometryLoader, e = 0, f = a.length; f > e; e++) {
                    var g, h = a[e];
                    switch (h.type) {
                        case "PlaneGeometry":
                            g = new THREE.PlaneGeometry(h.width, h.height, h.widthSegments, h.heightSegments);
                            break;
                        case "BoxGeometry":
                        case "CubeGeometry":
                            g = new THREE.BoxGeometry(h.width, h.height, h.depth, h.widthSegments, h.heightSegments, h.depthSegments);
                            break;
                        case "CircleGeometry":
                            g = new THREE.CircleGeometry(h.radius, h.segments);
                            break;
                        case "CylinderGeometry":
                            g = new THREE.CylinderGeometry(h.radiusTop, h.radiusBottom, h.height, h.radialSegments, h.heightSegments, h.openEnded);
                            break;
                        case "SphereGeometry":
                            g = new THREE.SphereGeometry(h.radius, h.widthSegments, h.heightSegments, h.phiStart, h.phiLength, h.thetaStart, h.thetaLength);
                            break;
                        case "IcosahedronGeometry":
                            g = new THREE.IcosahedronGeometry(h.radius, h.detail);
                            break;
                        case "TorusGeometry":
                            g = new THREE.TorusGeometry(h.radius, h.tube, h.radialSegments, h.tubularSegments, h.arc);
                            break;
                        case "TorusKnotGeometry":
                            g = new THREE.TorusKnotGeometry(h.radius, h.tube, h.radialSegments, h.tubularSegments, h.p, h.q, h.heightScale);
                            break;
                        case "BufferGeometry":
                            g = d.parse(h.data);
                            break;
                        case "Geometry":
                            g = c.parse(h.data).geometry
                    }
                    g.uuid = h.uuid, void 0 !== h.name && (g.name = h.name), b[h.uuid] = g
                }
            return b
        },
        parseMaterials: function(a) {
            var b = {};
            if (void 0 !== a)
                for (var c = new THREE.MaterialLoader, d = 0, e = a.length; e > d; d++) {
                    var f = a[d],
                        g = c.parse(f);
                    g.uuid = f.uuid, void 0 !== f.name && (g.name = f.name), b[f.uuid] = g
                }
            return b
        },
        parseObject: function() {
            var a = new THREE.Matrix4;
            return function(b, c, d) {
                var e;
                switch (b.type) {
                    case "Scene":
                        e = new THREE.Scene;
                        break;
                    case "PerspectiveCamera":
                        e = new THREE.PerspectiveCamera(b.fov, b.aspect, b.near, b.far);
                        break;
                    case "OrthographicCamera":
                        e = new THREE.OrthographicCamera(b.left, b.right, b.top, b.bottom, b.near, b.far);
                        break;
                    case "AmbientLight":
                        e = new THREE.AmbientLight(b.color);
                        break;
                    case "DirectionalLight":
                        e = new THREE.DirectionalLight(b.color, b.intensity);
                        break;
                    case "PointLight":
                        e = new THREE.PointLight(b.color, b.intensity, b.distance);
                        break;
                    case "SpotLight":
                        e = new THREE.SpotLight(b.color, b.intensity, b.distance, b.angle, b.exponent);
                        break;
                    case "HemisphereLight":
                        e = new THREE.HemisphereLight(b.color, b.groundColor, b.intensity);
                        break;
                    case "Mesh":
                        var f = c[b.geometry],
                            g = d[b.material];
                        void 0 === f && console.warn("THREE.ObjectLoader: Undefined geometry", b.geometry), void 0 === g && console.warn("THREE.ObjectLoader: Undefined material", b.material), e = new THREE.Mesh(f, g);
                        break;
                    case "Line":
                        var f = c[b.geometry],
                            g = d[b.material];
                        void 0 === f && console.warn("THREE.ObjectLoader: Undefined geometry", b.geometry), void 0 === g && console.warn("THREE.ObjectLoader: Undefined material", b.material), e = new THREE.Line(f, g);
                        break;
                    case "Sprite":
                        var g = d[b.material];
                        void 0 === g && console.warn("THREE.ObjectLoader: Undefined material", b.material), e = new THREE.Sprite(g);
                        break;
                    case "Group":
                        e = new THREE.Group;
                        break;
                    default:
                        e = new THREE.Object3D
                }
                if (e.uuid = b.uuid, void 0 !== b.name && (e.name = b.name), void 0 !== b.matrix ? (a.fromArray(b.matrix), a.decompose(e.position, e.quaternion, e.scale)) : (void 0 !== b.position && e.position.fromArray(b.position), void 0 !== b.rotation && e.rotation.fromArray(b.rotation), void 0 !== b.scale && e.scale.fromArray(b.scale)), void 0 !== b.visible && (e.visible = b.visible), void 0 !== b.userData && (e.userData = b.userData), void 0 !== b.children)
                    for (var h in b.children) e.add(this.parseObject(b.children[h], c, d));
                return e
            }
        }()
    }, THREE.TextureLoader = function(a) {
        this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager
    }, THREE.TextureLoader.prototype = {
        constructor: THREE.TextureLoader,
        load: function(a, b, c, d) {
            var e = this,
                f = new THREE.ImageLoader(e.manager);
            f.setCrossOrigin(this.crossOrigin), f.load(a, function(a) {
                var c = new THREE.Texture(a);
                c.needsUpdate = !0, void 0 !== b && b(c)
            }, c, d)
        },
        setCrossOrigin: function(a) {
            this.crossOrigin = a
        }
    }, THREE.DataTextureLoader = THREE.BinaryTextureLoader = function() {
        this._parser = null
    }, THREE.BinaryTextureLoader.prototype = {
        constructor: THREE.BinaryTextureLoader,
        load: function(a, b, c, d) {
            var e = this,
                f = new THREE.DataTexture,
                g = new THREE.XHRLoader;
            return g.setResponseType("arraybuffer"), g.load(a, function(a) {
                var c = e._parser(a);
                c && (void 0 !== c.image ? f.image = c.image : void 0 !== c.data && (f.image.width = c.width, f.image.height = c.height, f.image.data = c.data), f.wrapS = void 0 !== c.wrapS ? c.wrapS : THREE.ClampToEdgeWrapping, f.wrapT = void 0 !== c.wrapT ? c.wrapT : THREE.ClampToEdgeWrapping, f.magFilter = void 0 !== c.magFilter ? c.magFilter : THREE.LinearFilter, f.minFilter = void 0 !== c.minFilter ? c.minFilter : THREE.LinearMipMapLinearFilter, f.anisotropy = void 0 !== c.anisotropy ? c.anisotropy : 1, void 0 !== c.format && (f.format = c.format), void 0 !== c.type && (f.type = c.type), void 0 !== c.mipmaps && (f.mipmaps = c.mipmaps), 1 === c.mipmapCount && (f.minFilter = THREE.LinearFilter), f.needsUpdate = !0, b && b(f, c))
            }, c, d), f
        }
    }, THREE.CompressedTextureLoader = function() {
        this._parser = null
    }, THREE.CompressedTextureLoader.prototype = {
        constructor: THREE.CompressedTextureLoader,
        load: function(a, b) {
            var c = this,
                d = [],
                e = new THREE.CompressedTexture;
            e.image = d;
            var f = new THREE.XHRLoader;
            if (f.setResponseType("arraybuffer"), a instanceof Array)
                for (var g = 0, h = function(h) {
                        f.load(a[h], function(a) {
                            var f = c._parser(a, !0);
                            d[h] = {
                                width: f.width,
                                height: f.height,
                                format: f.format,
                                mipmaps: f.mipmaps
                            }, g += 1, 6 === g && (1 == f.mipmapCount && (e.minFilter = THREE.LinearFilter), e.format = f.format, e.needsUpdate = !0, b && b(e))
                        })
                    }, i = 0, j = a.length; j > i; ++i) h(i);
            else f.load(a, function(a) {
                var f = c._parser(a, !0);
                if (f.isCubemap)
                    for (var g = f.mipmaps.length / f.mipmapCount, h = 0; g > h; h++) {
                        d[h] = {
                            mipmaps: []
                        };
                        for (var i = 0; i < f.mipmapCount; i++) d[h].mipmaps.push(f.mipmaps[h * f.mipmapCount + i]), d[h].format = f.format, d[h].width = f.width, d[h].height = f.height
                    } else e.image.width = f.width, e.image.height = f.height, e.mipmaps = f.mipmaps;
                1 === f.mipmapCount && (e.minFilter = THREE.LinearFilter), e.format = f.format, e.needsUpdate = !0, b && b(e)
            });
            return e
        }
    }, THREE.Material = function() {
        Object.defineProperty(this, "id", {
            value: THREE.MaterialIdCount++
        }), this.uuid = THREE.Math.generateUUID(), this.name = "", this.type = "Material", this.side = THREE.FrontSide, this.opacity = 1, this.transparent = !1, this.blending = THREE.NormalBlending, this.blendSrc = THREE.SrcAlphaFactor, this.blendDst = THREE.OneMinusSrcAlphaFactor, this.blendEquation = THREE.AddEquation, this.depthTest = !0, this.depthWrite = !0, this.polygonOffset = !1, this.polygonOffsetFactor = 0, this.polygonOffsetUnits = 0, this.alphaTest = 0, this.overdraw = 0, this.visible = !0, this.needsUpdate = !0
    }, THREE.Material.prototype = {
        constructor: THREE.Material,
        setValues: function(a) {
            if (void 0 !== a)
                for (var b in a) {
                    var c = a[b];
                    if (void 0 !== c) {
                        if (b in this) {
                            var d = this[b];
                            d instanceof THREE.Color ? d.set(c) : d instanceof THREE.Vector3 && c instanceof THREE.Vector3 ? d.copy(c) : this[b] = "overdraw" == b ? Number(c) : c
                        }
                    } else console.warn("THREE.Material: '" + b + "' parameter is undefined.")
                }
        },
        toJSON: function() {
            var a = {
                metadata: {
                    version: 4.2,
                    type: "material",
                    generator: "MaterialExporter"
                },
                uuid: this.uuid,
                type: this.type
            };
            return "" !== this.name && (a.name = this.name), this instanceof THREE.MeshBasicMaterial ? (a.color = this.color.getHex(), this.vertexColors !== THREE.NoColors && (a.vertexColors = this.vertexColors), this.blending !== THREE.NormalBlending && (a.blending = this.blending), this.side !== THREE.FrontSide && (a.side = this.side)) : this instanceof THREE.MeshLambertMaterial ? (a.color = this.color.getHex(), a.ambient = this.ambient.getHex(), a.emissive = this.emissive.getHex(), this.vertexColors !== THREE.NoColors && (a.vertexColors = this.vertexColors), this.blending !== THREE.NormalBlending && (a.blending = this.blending), this.side !== THREE.FrontSide && (a.side = this.side)) : this instanceof THREE.MeshPhongMaterial ? (a.color = this.color.getHex(), a.ambient = this.ambient.getHex(), a.emissive = this.emissive.getHex(), a.specular = this.specular.getHex(), a.shininess = this.shininess, this.vertexColors !== THREE.NoColors && (a.vertexColors = this.vertexColors), this.blending !== THREE.NormalBlending && (a.blending = this.blending), this.side !== THREE.FrontSide && (a.side = this.side)) : this instanceof THREE.MeshNormalMaterial ? (this.shading !== THREE.FlatShading && (a.shading = this.shading), this.blending !== THREE.NormalBlending && (a.blending = this.blending), this.side !== THREE.FrontSide && (a.side = this.side)) : this instanceof THREE.MeshDepthMaterial ? (this.blending !== THREE.NormalBlending && (a.blending = this.blending), this.side !== THREE.FrontSide && (a.side = this.side)) : this instanceof THREE.ShaderMaterial ? (a.uniforms = this.uniforms, a.vertexShader = this.vertexShader, a.fragmentShader = this.fragmentShader) : this instanceof THREE.SpriteMaterial && (a.color = this.color.getHex()), this.opacity < 1 && (a.opacity = this.opacity), this.transparent !== !1 && (a.transparent = this.transparent), this.wireframe !== !1 && (a.wireframe = this.wireframe), a
        },
        clone: function(a) {
            return void 0 === a && (a = new THREE.Material), a.name = this.name, a.side = this.side, a.opacity = this.opacity, a.transparent = this.transparent, a.blending = this.blending, a.blendSrc = this.blendSrc, a.blendDst = this.blendDst, a.blendEquation = this.blendEquation, a.depthTest = this.depthTest, a.depthWrite = this.depthWrite, a.polygonOffset = this.polygonOffset, a.polygonOffsetFactor = this.polygonOffsetFactor, a.polygonOffsetUnits = this.polygonOffsetUnits, a.alphaTest = this.alphaTest, a.overdraw = this.overdraw, a.visible = this.visible, a
        },
        dispose: function() {
            this.dispatchEvent({
                type: "dispose"
            })
        }
    }, THREE.EventDispatcher.prototype.apply(THREE.Material.prototype), THREE.MaterialIdCount = 0, THREE.LineBasicMaterial = function(a) {
        THREE.Material.call(this), this.type = "LineBasicMaterial", this.color = new THREE.Color(16777215), this.linewidth = 1, this.linecap = "round", this.linejoin = "round", this.vertexColors = THREE.NoColors, this.fog = !0, this.setValues(a)
    }, THREE.LineBasicMaterial.prototype = Object.create(THREE.Material.prototype), THREE.LineBasicMaterial.prototype.constructor = THREE.LineBasicMaterial, THREE.LineBasicMaterial.prototype.clone = function() {
        var a = new THREE.LineBasicMaterial;
        return THREE.Material.prototype.clone.call(this, a), a.color.copy(this.color), a.linewidth = this.linewidth, a.linecap = this.linecap, a.linejoin = this.linejoin, a.vertexColors = this.vertexColors, a.fog = this.fog, a
    }, THREE.LineDashedMaterial = function(a) {
        THREE.Material.call(this), this.type = "LineDashedMaterial", this.color = new THREE.Color(16777215), this.linewidth = 1, this.scale = 1, this.dashSize = 3, this.gapSize = 1, this.vertexColors = !1, this.fog = !0, this.setValues(a)
    }, THREE.LineDashedMaterial.prototype = Object.create(THREE.Material.prototype), THREE.LineDashedMaterial.prototype.constructor = THREE.LineDashedMaterial, THREE.LineDashedMaterial.prototype.clone = function() {
        var a = new THREE.LineDashedMaterial;
        return THREE.Material.prototype.clone.call(this, a), a.color.copy(this.color), a.linewidth = this.linewidth, a.scale = this.scale, a.dashSize = this.dashSize, a.gapSize = this.gapSize, a.vertexColors = this.vertexColors, a.fog = this.fog, a
    }, THREE.MeshBasicMaterial = function(a) {
        THREE.Material.call(this), this.type = "MeshBasicMaterial", this.color = new THREE.Color(16777215), this.map = null, this.lightMap = null, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = THREE.MultiplyOperation, this.reflectivity = 1, this.refractionRatio = .98, this.fog = !0, this.shading = THREE.SmoothShading, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.vertexColors = THREE.NoColors, this.skinning = !1, this.morphTargets = !1, this.setValues(a)
    }, THREE.MeshBasicMaterial.prototype = Object.create(THREE.Material.prototype), THREE.MeshBasicMaterial.prototype.constructor = THREE.MeshBasicMaterial, THREE.MeshBasicMaterial.prototype.clone = function() {
        var a = new THREE.MeshBasicMaterial;
        return THREE.Material.prototype.clone.call(this, a), a.color.copy(this.color), a.map = this.map, a.lightMap = this.lightMap, a.specularMap = this.specularMap, a.alphaMap = this.alphaMap, a.envMap = this.envMap, a.combine = this.combine, a.reflectivity = this.reflectivity, a.refractionRatio = this.refractionRatio, a.fog = this.fog, a.shading = this.shading, a.wireframe = this.wireframe, a.wireframeLinewidth = this.wireframeLinewidth, a.wireframeLinecap = this.wireframeLinecap, a.wireframeLinejoin = this.wireframeLinejoin, a.vertexColors = this.vertexColors, a.skinning = this.skinning, a.morphTargets = this.morphTargets, a
    }, THREE.MeshLambertMaterial = function(a) {
        THREE.Material.call(this), this.type = "MeshLambertMaterial", this.color = new THREE.Color(16777215), this.ambient = new THREE.Color(16777215), this.emissive = new THREE.Color(0), this.wrapAround = !1, this.wrapRGB = new THREE.Vector3(1, 1, 1), this.map = null, this.lightMap = null, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = THREE.MultiplyOperation, this.reflectivity = 1, this.refractionRatio = .98, this.fog = !0, this.shading = THREE.SmoothShading, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.vertexColors = THREE.NoColors, this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.setValues(a)
    }, THREE.MeshLambertMaterial.prototype = Object.create(THREE.Material.prototype), THREE.MeshLambertMaterial.prototype.constructor = THREE.MeshLambertMaterial, THREE.MeshLambertMaterial.prototype.clone = function() {
        var a = new THREE.MeshLambertMaterial;
        return THREE.Material.prototype.clone.call(this, a), a.color.copy(this.color), a.ambient.copy(this.ambient), a.emissive.copy(this.emissive), a.wrapAround = this.wrapAround, a.wrapRGB.copy(this.wrapRGB), a.map = this.map, a.lightMap = this.lightMap, a.specularMap = this.specularMap, a.alphaMap = this.alphaMap, a.envMap = this.envMap, a.combine = this.combine, a.reflectivity = this.reflectivity, a.refractionRatio = this.refractionRatio, a.fog = this.fog, a.shading = this.shading, a.wireframe = this.wireframe, a.wireframeLinewidth = this.wireframeLinewidth, a.wireframeLinecap = this.wireframeLinecap, a.wireframeLinejoin = this.wireframeLinejoin, a.vertexColors = this.vertexColors, a.skinning = this.skinning, a.morphTargets = this.morphTargets, a.morphNormals = this.morphNormals, a
    }, THREE.MeshPhongMaterial = function(a) {
        THREE.Material.call(this), this.type = "MeshPhongMaterial", this.color = new THREE.Color(16777215), this.ambient = new THREE.Color(16777215), this.emissive = new THREE.Color(0), this.specular = new THREE.Color(1118481), this.shininess = 30, this.metal = !1, this.wrapAround = !1, this.wrapRGB = new THREE.Vector3(1, 1, 1), this.map = null, this.lightMap = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalScale = new THREE.Vector2(1, 1), this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = THREE.MultiplyOperation, this.reflectivity = 1, this.refractionRatio = .98, this.fog = !0, this.shading = THREE.SmoothShading, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.vertexColors = THREE.NoColors, this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.setValues(a)
    }, THREE.MeshPhongMaterial.prototype = Object.create(THREE.Material.prototype), THREE.MeshPhongMaterial.prototype.constructor = THREE.MeshPhongMaterial, THREE.MeshPhongMaterial.prototype.clone = function() {
        var a = new THREE.MeshPhongMaterial;
        return THREE.Material.prototype.clone.call(this, a), a.color.copy(this.color), a.ambient.copy(this.ambient), a.emissive.copy(this.emissive), a.specular.copy(this.specular), a.shininess = this.shininess, a.metal = this.metal, a.wrapAround = this.wrapAround, a.wrapRGB.copy(this.wrapRGB), a.map = this.map, a.lightMap = this.lightMap, a.bumpMap = this.bumpMap, a.bumpScale = this.bumpScale, a.normalMap = this.normalMap, a.normalScale.copy(this.normalScale), a.specularMap = this.specularMap, a.alphaMap = this.alphaMap, a.envMap = this.envMap, a.combine = this.combine, a.reflectivity = this.reflectivity, a.refractionRatio = this.refractionRatio, a.fog = this.fog, a.shading = this.shading, a.wireframe = this.wireframe, a.wireframeLinewidth = this.wireframeLinewidth, a.wireframeLinecap = this.wireframeLinecap, a.wireframeLinejoin = this.wireframeLinejoin, a.vertexColors = this.vertexColors, a.skinning = this.skinning, a.morphTargets = this.morphTargets, a.morphNormals = this.morphNormals, a
    }, THREE.MeshDepthMaterial = function(a) {
        THREE.Material.call(this), this.type = "MeshDepthMaterial", this.morphTargets = !1, this.wireframe = !1, this.wireframeLinewidth = 1, this.setValues(a)
    }, THREE.MeshDepthMaterial.prototype = Object.create(THREE.Material.prototype), THREE.MeshDepthMaterial.prototype.constructor = THREE.MeshDepthMaterial, THREE.MeshDepthMaterial.prototype.clone = function() {
        var a = new THREE.MeshDepthMaterial;
        return THREE.Material.prototype.clone.call(this, a), a.wireframe = this.wireframe, a.wireframeLinewidth = this.wireframeLinewidth, a
    }, THREE.MeshNormalMaterial = function(a) {
        THREE.Material.call(this, a), this.type = "MeshNormalMaterial", this.shading = THREE.FlatShading, this.wireframe = !1, this.wireframeLinewidth = 1, this.morphTargets = !1, this.setValues(a)
    }, THREE.MeshNormalMaterial.prototype = Object.create(THREE.Material.prototype), THREE.MeshNormalMaterial.prototype.constructor = THREE.MeshNormalMaterial, THREE.MeshNormalMaterial.prototype.clone = function() {
        var a = new THREE.MeshNormalMaterial;
        return THREE.Material.prototype.clone.call(this, a), a.shading = this.shading, a.wireframe = this.wireframe, a.wireframeLinewidth = this.wireframeLinewidth, a
    }, THREE.MeshFaceMaterial = function(a) {
        this.uuid = THREE.Math.generateUUID(), this.type = "MeshFaceMaterial", this.materials = a instanceof Array ? a : []
    }, THREE.MeshFaceMaterial.prototype = {
        constructor: THREE.MeshFaceMaterial,
        toJSON: function() {
            for (var a = {
                    metadata: {
                        version: 4.2,
                        type: "material",
                        generator: "MaterialExporter"
                    },
                    uuid: this.uuid,
                    type: this.type,
                    materials: []
                }, b = 0, c = this.materials.length; c > b; b++) a.materials.push(this.materials[b].toJSON());
            return a
        },
        clone: function() {
            for (var a = new THREE.MeshFaceMaterial, b = 0; b < this.materials.length; b++) a.materials.push(this.materials[b].clone());
            return a
        }
    }, THREE.PointCloudMaterial = function(a) {
        THREE.Material.call(this), this.type = "PointCloudMaterial", this.color = new THREE.Color(16777215), this.map = null, this.size = 1, this.sizeAttenuation = !0, this.vertexColors = THREE.NoColors, this.fog = !0, this.setValues(a)
    }, THREE.PointCloudMaterial.prototype = Object.create(THREE.Material.prototype), THREE.PointCloudMaterial.prototype.constructor = THREE.PointCloudMaterial, THREE.PointCloudMaterial.prototype.clone = function() {
        var a = new THREE.PointCloudMaterial;
        return THREE.Material.prototype.clone.call(this, a), a.color.copy(this.color), a.map = this.map, a.size = this.size, a.sizeAttenuation = this.sizeAttenuation, a.vertexColors = this.vertexColors, a.fog = this.fog, a
    }, THREE.ParticleBasicMaterial = function(a) {
        return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial."), new THREE.PointCloudMaterial(a)
    }, THREE.ParticleSystemMaterial = function(a) {
        return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial."), new THREE.PointCloudMaterial(a)
    }, THREE.ShaderMaterial = function(a) {
        THREE.Material.call(this), this.type = "ShaderMaterial", this.defines = {}, this.uniforms = {}, this.attributes = null, this.vertexShader = "void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}", this.fragmentShader = "void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}", this.shading = THREE.SmoothShading, this.linewidth = 1, this.wireframe = !1, this.wireframeLinewidth = 1, this.fog = !1, this.lights = !1, this.vertexColors = THREE.NoColors, this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.defaultAttributeValues = {
            color: [1, 1, 1],
            uv: [0, 0],
            uv2: [0, 0]
        }, this.index0AttributeName = void 0, this.setValues(a)
    }, THREE.ShaderMaterial.prototype = Object.create(THREE.Material.prototype), THREE.ShaderMaterial.prototype.constructor = THREE.ShaderMaterial, THREE.ShaderMaterial.prototype.clone = function() {
        var a = new THREE.ShaderMaterial;
        return THREE.Material.prototype.clone.call(this, a), a.fragmentShader = this.fragmentShader, a.vertexShader = this.vertexShader, a.uniforms = THREE.UniformsUtils.clone(this.uniforms), a.attributes = this.attributes, a.defines = this.defines, a.shading = this.shading, a.wireframe = this.wireframe, a.wireframeLinewidth = this.wireframeLinewidth, a.fog = this.fog, a.lights = this.lights, a.vertexColors = this.vertexColors, a.skinning = this.skinning, a.morphTargets = this.morphTargets, a.morphNormals = this.morphNormals, a
    }, THREE.RawShaderMaterial = function(a) {
        THREE.ShaderMaterial.call(this, a), this.type = "RawShaderMaterial"
    }, THREE.RawShaderMaterial.prototype = Object.create(THREE.ShaderMaterial.prototype), THREE.RawShaderMaterial.prototype.constructor = THREE.RawShaderMaterial, THREE.RawShaderMaterial.prototype.clone = function() {
        var a = new THREE.RawShaderMaterial;
        return THREE.ShaderMaterial.prototype.clone.call(this, a), a
    }, THREE.SpriteMaterial = function(a) {
        THREE.Material.call(this), this.type = "SpriteMaterial", this.color = new THREE.Color(16777215), this.map = null, this.rotation = 0, this.fog = !1, this.setValues(a)
    }, THREE.SpriteMaterial.prototype = Object.create(THREE.Material.prototype), THREE.SpriteMaterial.prototype.constructor = THREE.SpriteMaterial, THREE.SpriteMaterial.prototype.clone = function() {
        var a = new THREE.SpriteMaterial;
        return THREE.Material.prototype.clone.call(this, a), a.color.copy(this.color), a.map = this.map, a.rotation = this.rotation, a.fog = this.fog, a
    }, THREE.Texture = function(a, b, c, d, e, f, g, h, i) {
        Object.defineProperty(this, "id", {
            value: THREE.TextureIdCount++
        }), this.uuid = THREE.Math.generateUUID(), this.name = "", this.image = void 0 !== a ? a : THREE.Texture.DEFAULT_IMAGE, this.mipmaps = [], this.mapping = void 0 !== b ? b : THREE.Texture.DEFAULT_MAPPING, this.wrapS = void 0 !== c ? c : THREE.ClampToEdgeWrapping, this.wrapT = void 0 !== d ? d : THREE.ClampToEdgeWrapping, this.magFilter = void 0 !== e ? e : THREE.LinearFilter, this.minFilter = void 0 !== f ? f : THREE.LinearMipMapLinearFilter, this.anisotropy = void 0 !== i ? i : 1, this.format = void 0 !== g ? g : THREE.RGBAFormat, this.type = void 0 !== h ? h : THREE.UnsignedByteType, this.offset = new THREE.Vector2(0, 0), this.repeat = new THREE.Vector2(1, 1), this.generateMipmaps = !0, this.premultiplyAlpha = !1, this.flipY = !0, this.unpackAlignment = 4, this._needsUpdate = !1, this.onUpdate = null
    }, THREE.Texture.DEFAULT_IMAGE = void 0, THREE.Texture.DEFAULT_MAPPING = THREE.UVMapping, THREE.Texture.prototype = {
        constructor: THREE.Texture,
        get needsUpdate() {
            return this._needsUpdate
        },
        set needsUpdate(a) {
            a === !0 && this.update(), this._needsUpdate = a
        },
        clone: function(a) {
            return void 0 === a && (a = new THREE.Texture), a.image = this.image, a.mipmaps = this.mipmaps.slice(0), a.mapping = this.mapping, a.wrapS = this.wrapS, a.wrapT = this.wrapT, a.magFilter = this.magFilter, a.minFilter = this.minFilter, a.anisotropy = this.anisotropy, a.format = this.format, a.type = this.type, a.offset.copy(this.offset), a.repeat.copy(this.repeat), a.generateMipmaps = this.generateMipmaps, a.premultiplyAlpha = this.premultiplyAlpha, a.flipY = this.flipY, a.unpackAlignment = this.unpackAlignment, a
        },
        update: function() {
            this.dispatchEvent({
                type: "update"
            })
        },
        dispose: function() {
            this.dispatchEvent({
                type: "dispose"
            })
        }
    }, THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype), THREE.TextureIdCount = 0, THREE.CubeTexture = function(a, b, c, d, e, f, g, h, i) {
        b = void 0 !== b ? b : THREE.CubeReflectionMapping, THREE.Texture.call(this, a, b, c, d, e, f, g, h, i), this.images = a
    }, THREE.CubeTexture.prototype = Object.create(THREE.Texture.prototype), THREE.CubeTexture.prototype.constructor = THREE.CubeTexture, THREE.CubeTexture.clone = function(a) {
        return void 0 === a && (a = new THREE.CubeTexture), THREE.Texture.prototype.clone.call(this, a), a.images = this.images, a
    }, THREE.CompressedTexture = function(a, b, c, d, e, f, g, h, i, j, k) {
        THREE.Texture.call(this, null, f, g, h, i, j, d, e, k), this.image = {
            width: b,
            height: c
        }, this.mipmaps = a, this.flipY = !1, this.generateMipmaps = !1
    }, THREE.CompressedTexture.prototype = Object.create(THREE.Texture.prototype), THREE.CompressedTexture.prototype.constructor = THREE.CompressedTexture, THREE.CompressedTexture.prototype.clone = function() {
        var a = new THREE.CompressedTexture;
        return THREE.Texture.prototype.clone.call(this, a), a
    }, THREE.DataTexture = function(a, b, c, d, e, f, g, h, i, j, k) {
        THREE.Texture.call(this, null, f, g, h, i, j, d, e, k), this.image = {
            data: a,
            width: b,
            height: c
        }
    }, THREE.DataTexture.prototype = Object.create(THREE.Texture.prototype), THREE.DataTexture.prototype.constructor = THREE.DataTexture, THREE.DataTexture.prototype.clone = function() {
        var a = new THREE.DataTexture;
        return THREE.Texture.prototype.clone.call(this, a), a
    }, THREE.VideoTexture = function(a, b, c, d, e, f, g, h, i) {
        THREE.Texture.call(this, a, b, c, d, e, f, g, h, i), this.generateMipmaps = !1;
        var j = this,
            k = function() {
                requestAnimationFrame(k), a.readyState === a.HAVE_ENOUGH_DATA && (j.needsUpdate = !0)
            };
        k()
    }, THREE.VideoTexture.prototype = Object.create(THREE.Texture.prototype), THREE.VideoTexture.prototype.constructor = THREE.VideoTexture, THREE.Group = function() {
        THREE.Object3D.call(this), this.type = "Group"
    }, THREE.Group.prototype = Object.create(THREE.Object3D.prototype),
    THREE.Group.prototype.constructor = THREE.Group, THREE.PointCloud = function(a, b) {
        THREE.Object3D.call(this), this.type = "PointCloud", this.geometry = void 0 !== a ? a : new THREE.Geometry, this.material = void 0 !== b ? b : new THREE.PointCloudMaterial({
            color: 16777215 * Math.random()
        })
    }, THREE.PointCloud.prototype = Object.create(THREE.Object3D.prototype), THREE.PointCloud.prototype.constructor = THREE.PointCloud, THREE.PointCloud.prototype.raycast = function() {
        var a = new THREE.Matrix4,
            b = new THREE.Ray;
        return function(c, d) {
            var e = this,
                f = e.geometry,
                g = c.params.PointCloud.threshold;
            if (a.getInverse(this.matrixWorld), b.copy(c.ray).applyMatrix4(a), null === f.boundingBox || b.isIntersectionBox(f.boundingBox) !== !1) {
                var h = g / ((this.scale.x + this.scale.y + this.scale.z) / 3),
                    i = new THREE.Vector3,
                    j = function(a, f) {
                        var g = b.distanceToPoint(a);
                        if (h > g) {
                            var i = b.closestPointToPoint(a);
                            i.applyMatrix4(e.matrixWorld);
                            var j = c.ray.origin.distanceTo(i);
                            d.push({
                                distance: j,
                                distanceToRay: g,
                                point: i.clone(),
                                index: f,
                                face: null,
                                object: e
                            })
                        }
                    };
                if (f instanceof THREE.BufferGeometry) {
                    var k = f.attributes,
                        l = k.position.array;
                    if (void 0 !== k.index) {
                        var m = k.index.array,
                            n = f.offsets;
                        if (0 === n.length) {
                            var o = {
                                start: 0,
                                count: m.length,
                                index: 0
                            };
                            n = [o]
                        }
                        for (var p = 0, q = n.length; q > p; ++p)
                            for (var r = n[p].start, s = n[p].count, t = n[p].index, u = r, v = r + s; v > u; u++) {
                                var w = t + m[u];
                                i.fromArray(l, 3 * w), j(i, w)
                            }
                    } else
                        for (var x = l.length / 3, u = 0; x > u; u++) i.set(l[3 * u], l[3 * u + 1], l[3 * u + 2]), j(i, u)
                } else
                    for (var y = this.geometry.vertices, u = 0; u < y.length; u++) j(y[u], u)
            }
        }
    }(), THREE.PointCloud.prototype.clone = function(a) {
        return void 0 === a && (a = new THREE.PointCloud(this.geometry, this.material)), THREE.Object3D.prototype.clone.call(this, a), a
    }, THREE.ParticleSystem = function(a, b) {
        return console.warn("THREE.ParticleSystem has been renamed to THREE.PointCloud."), new THREE.PointCloud(a, b)
    }, THREE.Line = function(a, b, c) {
        THREE.Object3D.call(this), this.type = "Line", this.geometry = void 0 !== a ? a : new THREE.Geometry, this.material = void 0 !== b ? b : new THREE.LineBasicMaterial({
            color: 16777215 * Math.random()
        }), this.mode = void 0 !== c ? c : THREE.LineStrip
    }, THREE.LineStrip = 0, THREE.LinePieces = 1, THREE.Line.prototype = Object.create(THREE.Object3D.prototype), THREE.Line.prototype.constructor = THREE.Line, THREE.Line.prototype.raycast = function() {
        var a = new THREE.Matrix4,
            b = new THREE.Ray,
            c = new THREE.Sphere;
        return function(d, e) {
            var f = d.linePrecision,
                g = f * f,
                h = this.geometry;
            if (null === h.boundingSphere && h.computeBoundingSphere(), c.copy(h.boundingSphere), c.applyMatrix4(this.matrixWorld), d.ray.isIntersectionSphere(c) !== !1) {
                a.getInverse(this.matrixWorld), b.copy(d.ray).applyMatrix4(a);
                var i = new THREE.Vector3,
                    j = new THREE.Vector3,
                    k = new THREE.Vector3,
                    l = new THREE.Vector3,
                    m = this.mode === THREE.LineStrip ? 1 : 2;
                if (h instanceof THREE.BufferGeometry) {
                    var n = h.attributes;
                    if (void 0 !== n.index) {
                        var o = n.index.array,
                            p = n.position.array,
                            q = h.offsets;
                        0 === q.length && (q = [{
                            start: 0,
                            count: o.length,
                            index: 0
                        }]);
                        for (var r = 0; r < q.length; r++)
                            for (var s = q[r].start, t = q[r].count, u = q[r].index, v = s; s + t - 1 > v; v += m) {
                                var w = u + o[v],
                                    x = u + o[v + 1];
                                i.fromArray(p, 3 * w), j.fromArray(p, 3 * x);
                                var y = b.distanceSqToSegment(i, j, l, k);
                                if (!(y > g)) {
                                    var z = b.origin.distanceTo(l);
                                    z < d.near || z > d.far || e.push({
                                        distance: z,
                                        point: k.clone().applyMatrix4(this.matrixWorld),
                                        face: null,
                                        faceIndex: null,
                                        object: this
                                    })
                                }
                            }
                    } else
                        for (var p = n.position.array, v = 0; v < p.length / 3 - 1; v += m) {
                            i.fromArray(p, 3 * v), j.fromArray(p, 3 * v + 3);
                            var y = b.distanceSqToSegment(i, j, l, k);
                            if (!(y > g)) {
                                var z = b.origin.distanceTo(l);
                                z < d.near || z > d.far || e.push({
                                    distance: z,
                                    point: k.clone().applyMatrix4(this.matrixWorld),
                                    face: null,
                                    faceIndex: null,
                                    object: this
                                })
                            }
                        }
                } else if (h instanceof THREE.Geometry)
                    for (var A = h.vertices, B = A.length, v = 0; B - 1 > v; v += m) {
                        var y = b.distanceSqToSegment(A[v], A[v + 1], l, k);
                        if (!(y > g)) {
                            var z = b.origin.distanceTo(l);
                            z < d.near || z > d.far || e.push({
                                distance: z,
                                point: k.clone().applyMatrix4(this.matrixWorld),
                                face: null,
                                faceIndex: null,
                                object: this
                            })
                        }
                    }
            }
        }
    }(), THREE.Line.prototype.clone = function(a) {
        return void 0 === a && (a = new THREE.Line(this.geometry, this.material, this.mode)), THREE.Object3D.prototype.clone.call(this, a), a
    }, THREE.Mesh = function(a, b) {
        THREE.Object3D.call(this), this.type = "Mesh", this.geometry = void 0 !== a ? a : new THREE.Geometry, this.material = void 0 !== b ? b : new THREE.MeshBasicMaterial({
            color: 16777215 * Math.random()
        }), this.updateMorphTargets()
    }, THREE.Mesh.prototype = Object.create(THREE.Object3D.prototype), THREE.Mesh.prototype.constructor = THREE.Mesh, THREE.Mesh.prototype.updateMorphTargets = function() {
        if (void 0 !== this.geometry.morphTargets && this.geometry.morphTargets.length > 0) {
            this.morphTargetBase = -1, this.morphTargetForcedOrder = [], this.morphTargetInfluences = [], this.morphTargetDictionary = {};
            for (var a = 0, b = this.geometry.morphTargets.length; b > a; a++) this.morphTargetInfluences.push(0), this.morphTargetDictionary[this.geometry.morphTargets[a].name] = a
        }
    }, THREE.Mesh.prototype.getMorphTargetIndexByName = function(a) {
        return void 0 !== this.morphTargetDictionary[a] ? this.morphTargetDictionary[a] : (console.log("THREE.Mesh.getMorphTargetIndexByName: morph target " + a + " does not exist. Returning 0."), 0)
    }, THREE.Mesh.prototype.raycast = function() {
        var a = new THREE.Matrix4,
            b = new THREE.Ray,
            c = new THREE.Sphere,
            d = new THREE.Vector3,
            e = new THREE.Vector3,
            f = new THREE.Vector3;
        return function(g, h) {
            var i = this.geometry;
            if (null === i.boundingSphere && i.computeBoundingSphere(), c.copy(i.boundingSphere), c.applyMatrix4(this.matrixWorld), g.ray.isIntersectionSphere(c) !== !1 && (a.getInverse(this.matrixWorld), b.copy(g.ray).applyMatrix4(a), null === i.boundingBox || b.isIntersectionBox(i.boundingBox) !== !1))
                if (i instanceof THREE.BufferGeometry) {
                    var j = this.material;
                    if (void 0 === j) return;
                    var k, l, m, n = i.attributes,
                        o = g.precision;
                    if (void 0 !== n.index) {
                        var p = n.index.array,
                            q = n.position.array,
                            r = i.offsets;
                        0 === r.length && (r = [{
                            start: 0,
                            count: p.length,
                            index: 0
                        }]);
                        for (var s = 0, t = r.length; t > s; ++s)
                            for (var u = r[s].start, v = r[s].count, w = r[s].index, x = u, y = u + v; y > x; x += 3) {
                                if (k = w + p[x], l = w + p[x + 1], m = w + p[x + 2], d.fromArray(q, 3 * k), e.fromArray(q, 3 * l), f.fromArray(q, 3 * m), j.side === THREE.BackSide) var z = b.intersectTriangle(f, e, d, !0);
                                else var z = b.intersectTriangle(d, e, f, j.side !== THREE.DoubleSide);
                                if (null !== z) {
                                    z.applyMatrix4(this.matrixWorld);
                                    var A = g.ray.origin.distanceTo(z);
                                    o > A || A < g.near || A > g.far || h.push({
                                        distance: A,
                                        point: z,
                                        face: new THREE.Face3(k, l, m, THREE.Triangle.normal(d, e, f)),
                                        faceIndex: null,
                                        object: this
                                    })
                                }
                            }
                    } else
                        for (var q = n.position.array, x = 0, B = 0, y = q.length; y > x; x += 3, B += 9) {
                            if (k = x, l = x + 1, m = x + 2, d.fromArray(q, B), e.fromArray(q, B + 3), f.fromArray(q, B + 6), j.side === THREE.BackSide) var z = b.intersectTriangle(f, e, d, !0);
                            else var z = b.intersectTriangle(d, e, f, j.side !== THREE.DoubleSide);
                            if (null !== z) {
                                z.applyMatrix4(this.matrixWorld);
                                var A = g.ray.origin.distanceTo(z);
                                o > A || A < g.near || A > g.far || h.push({
                                    distance: A,
                                    point: z,
                                    face: new THREE.Face3(k, l, m, THREE.Triangle.normal(d, e, f)),
                                    faceIndex: null,
                                    object: this
                                })
                            }
                        }
                } else if (i instanceof THREE.Geometry)
                for (var k, l, m, C = this.material instanceof THREE.MeshFaceMaterial, D = C === !0 ? this.material.materials : null, o = g.precision, E = i.vertices, F = 0, G = i.faces.length; G > F; F++) {
                    var H = i.faces[F],
                        j = C === !0 ? D[H.materialIndex] : this.material;
                    if (void 0 !== j) {
                        if (k = E[H.a], l = E[H.b], m = E[H.c], j.morphTargets === !0) {
                            var I = i.morphTargets,
                                J = this.morphTargetInfluences;
                            d.set(0, 0, 0), e.set(0, 0, 0), f.set(0, 0, 0);
                            for (var K = 0, L = I.length; L > K; K++) {
                                var M = J[K];
                                if (0 !== M) {
                                    var N = I[K].vertices;
                                    d.x += (N[H.a].x - k.x) * M, d.y += (N[H.a].y - k.y) * M, d.z += (N[H.a].z - k.z) * M, e.x += (N[H.b].x - l.x) * M, e.y += (N[H.b].y - l.y) * M, e.z += (N[H.b].z - l.z) * M, f.x += (N[H.c].x - m.x) * M, f.y += (N[H.c].y - m.y) * M, f.z += (N[H.c].z - m.z) * M
                                }
                            }
                            d.add(k), e.add(l), f.add(m), k = d, l = e, m = f
                        }
                        if (j.side === THREE.BackSide) var z = b.intersectTriangle(m, l, k, !0);
                        else var z = b.intersectTriangle(k, l, m, j.side !== THREE.DoubleSide);
                        if (null !== z) {
                            z.applyMatrix4(this.matrixWorld);
                            var A = g.ray.origin.distanceTo(z);
                            o > A || A < g.near || A > g.far || h.push({
                                distance: A,
                                point: z,
                                face: H,
                                faceIndex: F,
                                object: this
                            })
                        }
                    }
                }
        }
    }(), THREE.Mesh.prototype.clone = function(a, b) {
        return void 0 === a && (a = new THREE.Mesh(this.geometry, this.material)), THREE.Object3D.prototype.clone.call(this, a, b), a
    }, THREE.Bone = function(a) {
        THREE.Object3D.call(this), this.skin = a
    }, THREE.Bone.prototype = Object.create(THREE.Object3D.prototype), THREE.Bone.prototype.constructor = THREE.Bone, THREE.Skeleton = function(a, b, c) {
        if (this.useVertexTexture = void 0 !== c ? c : !0, this.identityMatrix = new THREE.Matrix4, a = a || [], this.bones = a.slice(0), this.useVertexTexture) {
            var d;
            d = this.bones.length > 256 ? 64 : this.bones.length > 64 ? 32 : this.bones.length > 16 ? 16 : 8, this.boneTextureWidth = d, this.boneTextureHeight = d, this.boneMatrices = new Float32Array(this.boneTextureWidth * this.boneTextureHeight * 4), this.boneTexture = new THREE.DataTexture(this.boneMatrices, this.boneTextureWidth, this.boneTextureHeight, THREE.RGBAFormat, THREE.FloatType), this.boneTexture.minFilter = THREE.NearestFilter, this.boneTexture.magFilter = THREE.NearestFilter, this.boneTexture.generateMipmaps = !1, this.boneTexture.flipY = !1
        } else this.boneMatrices = new Float32Array(16 * this.bones.length);
        if (void 0 === b) this.calculateInverses();
        else if (this.bones.length === b.length) this.boneInverses = b.slice(0);
        else {
            console.warn("THREE.Skeleton bonInverses is the wrong length."), this.boneInverses = [];
            for (var e = 0, f = this.bones.length; f > e; e++) this.boneInverses.push(new THREE.Matrix4)
        }
    }, THREE.Skeleton.prototype.calculateInverses = function() {
        this.boneInverses = [];
        for (var a = 0, b = this.bones.length; b > a; a++) {
            var c = new THREE.Matrix4;
            this.bones[a] && c.getInverse(this.bones[a].matrixWorld), this.boneInverses.push(c)
        }
    }, THREE.Skeleton.prototype.pose = function() {
        for (var a, b = 0, c = this.bones.length; c > b; b++) a = this.bones[b], a && a.matrixWorld.getInverse(this.boneInverses[b]);
        for (var b = 0, c = this.bones.length; c > b; b++) a = this.bones[b], a && (a.parent ? (a.matrix.getInverse(a.parent.matrixWorld), a.matrix.multiply(a.matrixWorld)) : a.matrix.copy(a.matrixWorld), a.matrix.decompose(a.position, a.quaternion, a.scale))
    }, THREE.Skeleton.prototype.update = function() {
        var a = new THREE.Matrix4;
        return function() {
            for (var b = 0, c = this.bones.length; c > b; b++) {
                var d = this.bones[b] ? this.bones[b].matrixWorld : this.identityMatrix;
                a.multiplyMatrices(d, this.boneInverses[b]), a.flattenToArrayOffset(this.boneMatrices, 16 * b)
            }
            this.useVertexTexture && (this.boneTexture.needsUpdate = !0)
        }
    }(), THREE.SkinnedMesh = function(a, b, c) {
        THREE.Mesh.call(this, a, b), this.type = "SkinnedMesh", this.bindMode = "attached", this.bindMatrix = new THREE.Matrix4, this.bindMatrixInverse = new THREE.Matrix4;
        var d = [];
        if (this.geometry && void 0 !== this.geometry.bones) {
            for (var e, f, g, h, i, j = 0, k = this.geometry.bones.length; k > j; ++j) f = this.geometry.bones[j], g = f.pos, h = f.rotq, i = f.scl, e = new THREE.Bone(this), d.push(e), e.name = f.name, e.position.set(g[0], g[1], g[2]), e.quaternion.set(h[0], h[1], h[2], h[3]), void 0 !== i ? e.scale.set(i[0], i[1], i[2]) : e.scale.set(1, 1, 1);
            for (var j = 0, k = this.geometry.bones.length; k > j; ++j) f = this.geometry.bones[j], -1 !== f.parent ? d[f.parent].add(d[j]) : this.add(d[j])
        }
        this.normalizeSkinWeights(), this.updateMatrixWorld(!0), this.bind(new THREE.Skeleton(d, void 0, c))
    }, THREE.SkinnedMesh.prototype = Object.create(THREE.Mesh.prototype), THREE.SkinnedMesh.prototype.constructor = THREE.SkinnedMesh, THREE.SkinnedMesh.prototype.bind = function(a, b) {
        this.skeleton = a, void 0 === b && (this.updateMatrixWorld(!0), b = this.matrixWorld), this.bindMatrix.copy(b), this.bindMatrixInverse.getInverse(b)
    }, THREE.SkinnedMesh.prototype.pose = function() {
        this.skeleton.pose()
    }, THREE.SkinnedMesh.prototype.normalizeSkinWeights = function() {
        if (this.geometry instanceof THREE.Geometry)
            for (var a = 0; a < this.geometry.skinIndices.length; a++) {
                var b = this.geometry.skinWeights[a],
                    c = 1 / b.lengthManhattan();
                c !== 1 / 0 ? b.multiplyScalar(c) : b.set(1)
            }
    }, THREE.SkinnedMesh.prototype.updateMatrixWorld = function() {
        THREE.Mesh.prototype.updateMatrixWorld.call(this, !0), "attached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.matrixWorld) : "detached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.bindMatrix) : console.warn("THREE.SkinnedMesh unreckognized bindMode: " + this.bindMode)
    }, THREE.SkinnedMesh.prototype.clone = function(a) {
        return void 0 === a && (a = new THREE.SkinnedMesh(this.geometry, this.material, this.useVertexTexture)), THREE.Mesh.prototype.clone.call(this, a), a
    }, THREE.MorphAnimMesh = function(a, b) {
        THREE.Mesh.call(this, a, b), this.type = "MorphAnimMesh", this.duration = 1e3, this.mirroredLoop = !1, this.time = 0, this.lastKeyframe = 0, this.currentKeyframe = 0, this.direction = 1, this.directionBackwards = !1, this.setFrameRange(0, this.geometry.morphTargets.length - 1)
    }, THREE.MorphAnimMesh.prototype = Object.create(THREE.Mesh.prototype), THREE.MorphAnimMesh.prototype.constructor = THREE.MorphAnimMesh, THREE.MorphAnimMesh.prototype.setFrameRange = function(a, b) {
        this.startKeyframe = a, this.endKeyframe = b, this.length = this.endKeyframe - this.startKeyframe + 1
    }, THREE.MorphAnimMesh.prototype.setDirectionForward = function() {
        this.direction = 1, this.directionBackwards = !1
    }, THREE.MorphAnimMesh.prototype.setDirectionBackward = function() {
        this.direction = -1, this.directionBackwards = !0
    }, THREE.MorphAnimMesh.prototype.parseAnimations = function() {
        var a = this.geometry;
        a.animations || (a.animations = {});
        for (var b, c = a.animations, d = /([a-z]+)_?(\d+)/, e = 0, f = a.morphTargets.length; f > e; e++) {
            var g = a.morphTargets[e],
                h = g.name.match(d);
            if (h && h.length > 1) {
                {
                    var i = h[1];
                    h[2]
                }
                c[i] || (c[i] = {
                    start: 1 / 0,
                    end: -(1 / 0)
                });
                var j = c[i];
                e < j.start && (j.start = e), e > j.end && (j.end = e), b || (b = i)
            }
        }
        a.firstAnimation = b
    }, THREE.MorphAnimMesh.prototype.setAnimationLabel = function(a, b, c) {
        this.geometry.animations || (this.geometry.animations = {}), this.geometry.animations[a] = {
            start: b,
            end: c
        }
    }, THREE.MorphAnimMesh.prototype.playAnimation = function(a, b) {
        var c = this.geometry.animations[a];
        c ? (this.setFrameRange(c.start, c.end), this.duration = 1e3 * ((c.end - c.start) / b), this.time = 0) : console.warn("animation[" + a + "] undefined")
    }, THREE.MorphAnimMesh.prototype.updateAnimation = function(a) {
        var b = this.duration / this.length;
        this.time += this.direction * a, this.mirroredLoop ? (this.time > this.duration || this.time < 0) && (this.direction *= -1, this.time > this.duration && (this.time = this.duration, this.directionBackwards = !0), this.time < 0 && (this.time = 0, this.directionBackwards = !1)) : (this.time = this.time % this.duration, this.time < 0 && (this.time += this.duration));
        var c = this.startKeyframe + THREE.Math.clamp(Math.floor(this.time / b), 0, this.length - 1);
        c !== this.currentKeyframe && (this.morphTargetInfluences[this.lastKeyframe] = 0, this.morphTargetInfluences[this.currentKeyframe] = 1, this.morphTargetInfluences[c] = 0, this.lastKeyframe = this.currentKeyframe, this.currentKeyframe = c);
        var d = this.time % b / b;
        this.directionBackwards && (d = 1 - d), this.morphTargetInfluences[this.currentKeyframe] = d, this.morphTargetInfluences[this.lastKeyframe] = 1 - d
    }, THREE.MorphAnimMesh.prototype.interpolateTargets = function(a, b, c) {
        for (var d = this.morphTargetInfluences, e = 0, f = d.length; f > e; e++) d[e] = 0;
        a > -1 && (d[a] = 1 - c), b > -1 && (d[b] = c)
    }, THREE.MorphAnimMesh.prototype.clone = function(a) {
        return void 0 === a && (a = new THREE.MorphAnimMesh(this.geometry, this.material)), a.duration = this.duration, a.mirroredLoop = this.mirroredLoop, a.time = this.time, a.lastKeyframe = this.lastKeyframe, a.currentKeyframe = this.currentKeyframe, a.direction = this.direction, a.directionBackwards = this.directionBackwards, THREE.Mesh.prototype.clone.call(this, a), a
    }, THREE.LOD = function() {
        THREE.Object3D.call(this), this.objects = []
    }, THREE.LOD.prototype = Object.create(THREE.Object3D.prototype), THREE.LOD.prototype.constructor = THREE.LOD, THREE.LOD.prototype.addLevel = function(a, b) {
        void 0 === b && (b = 0), b = Math.abs(b);
        for (var c = 0; c < this.objects.length && !(b < this.objects[c].distance); c++);
        this.objects.splice(c, 0, {
            distance: b,
            object: a
        }), this.add(a)
    }, THREE.LOD.prototype.getObjectForDistance = function(a) {
        for (var b = 1, c = this.objects.length; c > b && !(a < this.objects[b].distance); b++);
        return this.objects[b - 1].object
    }, THREE.LOD.prototype.raycast = function() {
        var a = new THREE.Vector3;
        return function(b, c) {
            a.setFromMatrixPosition(this.matrixWorld);
            var d = b.ray.origin.distanceTo(a);
            this.getObjectForDistance(d).raycast(b, c)
        }
    }(), THREE.LOD.prototype.update = function() {
        var a = new THREE.Vector3,
            b = new THREE.Vector3;
        return function(c) {
            if (this.objects.length > 1) {
                a.setFromMatrixPosition(c.matrixWorld), b.setFromMatrixPosition(this.matrixWorld);
                var d = a.distanceTo(b);
                this.objects[0].object.visible = !0;
                for (var e = 1, f = this.objects.length; f > e && d >= this.objects[e].distance; e++) this.objects[e - 1].object.visible = !1, this.objects[e].object.visible = !0;
                for (; f > e; e++) this.objects[e].object.visible = !1
            }
        }
    }(), THREE.LOD.prototype.clone = function(a) {
        void 0 === a && (a = new THREE.LOD), THREE.Object3D.prototype.clone.call(this, a);
        for (var b = 0, c = this.objects.length; c > b; b++) {
            var d = this.objects[b].object.clone();
            d.visible = 0 === b, a.addLevel(d, this.objects[b].distance)
        }
        return a
    }, THREE.Sprite = function() {
        var a = new Uint16Array([0, 1, 2, 0, 2, 3]),
            b = new Float32Array([-.5, -.5, 0, .5, -.5, 0, .5, .5, 0, -.5, .5, 0]),
            c = new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]),
            d = new THREE.BufferGeometry;
        return d.addAttribute("index", new THREE.BufferAttribute(a, 1)), d.addAttribute("position", new THREE.BufferAttribute(b, 3)), d.addAttribute("uv", new THREE.BufferAttribute(c, 2)),
            function(a) {
                THREE.Object3D.call(this), this.type = "Sprite", this.geometry = d, this.material = void 0 !== a ? a : new THREE.SpriteMaterial
            }
    }(), THREE.Sprite.prototype = Object.create(THREE.Object3D.prototype), THREE.Sprite.prototype.constructor = THREE.Sprite, THREE.Sprite.prototype.raycast = function() {
        var a = new THREE.Vector3;
        return function(b, c) {
            a.setFromMatrixPosition(this.matrixWorld);
            var d = b.ray.distanceToPoint(a);
            d > this.scale.x || c.push({
                distance: d,
                point: this.position,
                face: null,
                object: this
            })
        }
    }(), THREE.Sprite.prototype.clone = function(a) {
        return void 0 === a && (a = new THREE.Sprite(this.material)), THREE.Object3D.prototype.clone.call(this, a), a
    }, THREE.Particle = THREE.Sprite, THREE.LensFlare = function(a, b, c, d, e) {
        THREE.Object3D.call(this), this.lensFlares = [], this.positionScreen = new THREE.Vector3, this.customUpdateCallback = void 0, void 0 !== a && this.add(a, b, c, d, e)
    }, THREE.LensFlare.prototype = Object.create(THREE.Object3D.prototype), THREE.LensFlare.prototype.constructor = THREE.LensFlare, THREE.LensFlare.prototype.add = function(a, b, c, d, e, f) {
        void 0 === b && (b = -1), void 0 === c && (c = 0), void 0 === f && (f = 1), void 0 === e && (e = new THREE.Color(16777215)), void 0 === d && (d = THREE.NormalBlending), c = Math.min(c, Math.max(0, c)), this.lensFlares.push({
            texture: a,
            size: b,
            distance: c,
            x: 0,
            y: 0,
            z: 0,
            scale: 1,
            rotation: 1,
            opacity: f,
            color: e,
            blending: d
        })
    }, THREE.LensFlare.prototype.updateLensFlares = function() {
        var a, b, c = this.lensFlares.length,
            d = 2 * -this.positionScreen.x,
            e = 2 * -this.positionScreen.y;
        for (a = 0; c > a; a++) b = this.lensFlares[a], b.x = this.positionScreen.x + d * b.distance, b.y = this.positionScreen.y + e * b.distance, b.wantedRotation = b.x * Math.PI * .25, b.rotation += .25 * (b.wantedRotation - b.rotation)
    }, THREE.Scene = function() {
        THREE.Object3D.call(this), this.type = "Scene", this.fog = null, this.overrideMaterial = null, this.autoUpdate = !0
    }, THREE.Scene.prototype = Object.create(THREE.Object3D.prototype), THREE.Scene.prototype.constructor = THREE.Scene, THREE.Scene.prototype.clone = function(a) {
        return void 0 === a && (a = new THREE.Scene), THREE.Object3D.prototype.clone.call(this, a), null !== this.fog && (a.fog = this.fog.clone()), null !== this.overrideMaterial && (a.overrideMaterial = this.overrideMaterial.clone()), a.autoUpdate = this.autoUpdate, a.matrixAutoUpdate = this.matrixAutoUpdate, a
    }, THREE.Fog = function(a, b, c) {
        this.name = "", this.color = new THREE.Color(a), this.near = void 0 !== b ? b : 1, this.far = void 0 !== c ? c : 1e3
    }, THREE.Fog.prototype.clone = function() {
        return new THREE.Fog(this.color.getHex(), this.near, this.far)
    }, THREE.FogExp2 = function(a, b) {
        this.name = "", this.color = new THREE.Color(a), this.density = void 0 !== b ? b : 25e-5
    }, THREE.FogExp2.prototype.clone = function() {
        return new THREE.FogExp2(this.color.getHex(), this.density)
    }, THREE.ShaderChunk = {}, THREE.ShaderChunk.alphatest_fragment = "#ifdef ALPHATEST\n\n	if ( gl_FragColor.a < ALPHATEST ) discard;\n\n#endif\n", THREE.ShaderChunk.lights_lambert_vertex = "vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack = vec3( 0.0 );\n\n#endif\n\ntransformedNormal = normalize( transformedNormal );\n\n#if MAX_DIR_LIGHTS > 0\n\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n	vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n	vec3 dirVector = normalize( lDirection.xyz );\n\n	float dotProduct = dot( transformedNormal, dirVector );\n	vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n	#ifdef DOUBLE_SIDED\n\n		vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n		#ifdef WRAP_AROUND\n\n			vec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n		#endif\n\n	#endif\n\n	#ifdef WRAP_AROUND\n\n		vec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n		directionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n\n		#ifdef DOUBLE_SIDED\n\n			directionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n\n		#endif\n\n	#endif\n\n	vLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n\n	#ifdef DOUBLE_SIDED\n\n		vLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n\n	#endif\n\n}\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( pointLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n		float dotProduct = dot( transformedNormal, lVector );\n\n		vec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n		#ifdef DOUBLE_SIDED\n\n			vec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n			#ifdef WRAP_AROUND\n\n				vec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n			#endif\n\n		#endif\n\n		#ifdef WRAP_AROUND\n\n			vec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n			pointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n\n			#ifdef DOUBLE_SIDED\n\n				pointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n\n			#endif\n\n		#endif\n\n		vLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n\n		#endif\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n			float lDistance = 1.0;\n			if ( spotLightDistance[ i ] > 0.0 )\n				lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n			lVector = normalize( lVector );\n\n			float dotProduct = dot( transformedNormal, lVector );\n			vec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n			#ifdef DOUBLE_SIDED\n\n				vec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n				#ifdef WRAP_AROUND\n\n					vec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n				#endif\n\n			#endif\n\n			#ifdef WRAP_AROUND\n\n				vec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n				spotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n\n				#ifdef DOUBLE_SIDED\n\n					spotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n\n				#endif\n\n			#endif\n\n			vLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n\n			#ifdef DOUBLE_SIDED\n\n				vLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n\n			#endif\n\n		}\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n		vec3 lVector = normalize( lDirection.xyz );\n\n		float dotProduct = dot( transformedNormal, lVector );\n\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n		float hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\n\n		vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n		#endif\n\n	}\n\n#endif\n\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n\n#endif", THREE.ShaderChunk.map_particle_pars_fragment = "#ifdef USE_MAP\n\n	uniform sampler2D map;\n\n#endif", THREE.ShaderChunk.default_vertex = "#ifdef USE_SKINNING\n\n	vec4 mvPosition = modelViewMatrix * skinned;\n\n#elif defined( USE_MORPHTARGETS )\n\n	vec4 mvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n\n#else\n\n	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;\n", THREE.ShaderChunk.map_pars_fragment = "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n\n#endif\n\n#ifdef USE_MAP\n\n	uniform sampler2D map;\n\n#endif", THREE.ShaderChunk.skinnormal_vertex = "#ifdef USE_SKINNING\n\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n	#ifdef USE_MORPHNORMALS\n\n	vec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n\n	#else\n\n	vec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n\n	#endif\n\n#endif\n", THREE.ShaderChunk.logdepthbuf_pars_vertex = "#ifdef USE_LOGDEPTHBUF\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		varying float vFragDepth;\n\n	#endif\n\n	uniform float logDepthBufFC;\n\n#endif", THREE.ShaderChunk.lightmap_pars_vertex = "#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n\n#endif", THREE.ShaderChunk.lights_phong_fragment = "vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n\n#ifdef DOUBLE_SIDED\n\n	normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n	normal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	vec3 pointDiffuse = vec3( 0.0 );\n	vec3 pointSpecular = vec3( 0.0 );\n\n	for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( pointLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n\n				// diffuse\n\n		float dotProduct = dot( normal, lVector );\n\n		#ifdef WRAP_AROUND\n\n			float pointDiffuseWeightFull = max( dotProduct, 0.0 );\n			float pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float pointDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		pointDiffuse += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\n\n				// specular\n\n		vec3 pointHalfVector = normalize( lVector + viewPosition );\n		float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n		float pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\n		pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	vec3 spotDiffuse = vec3( 0.0 );\n	vec3 spotSpecular = vec3( 0.0 );\n\n	for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( spotLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n					// diffuse\n\n			float dotProduct = dot( normal, lVector );\n\n			#ifdef WRAP_AROUND\n\n				float spotDiffuseWeightFull = max( dotProduct, 0.0 );\n				float spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n				vec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\n			#else\n\n				float spotDiffuseWeight = max( dotProduct, 0.0 );\n\n			#endif\n\n			spotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\n\n					// specular\n\n			vec3 spotHalfVector = normalize( lVector + viewPosition );\n			float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n			float spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\n			float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n			vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\n			spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n\n		}\n\n	}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n	vec3 dirDiffuse = vec3( 0.0 );\n	vec3 dirSpecular = vec3( 0.0 );\n\n	for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n		vec3 dirVector = normalize( lDirection.xyz );\n\n				// diffuse\n\n		float dotProduct = dot( normal, dirVector );\n\n		#ifdef WRAP_AROUND\n\n			float dirDiffuseWeightFull = max( dotProduct, 0.0 );\n			float dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float dirDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		dirDiffuse += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\n\n		// specular\n\n		vec3 dirHalfVector = normalize( dirVector + viewPosition );\n		float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n		float dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\n		/*\n		// fresnel term from skin shader\n		const float F0 = 0.128;\n\n		float base = 1.0 - dot( viewPosition, dirHalfVector );\n		float exponential = pow( base, 5.0 );\n\n		float fresnel = exponential + F0 * ( 1.0 - exponential );\n		*/\n\n		/*\n		// fresnel term from fresnel shader\n		const float mFresnelBias = 0.08;\n		const float mFresnelScale = 0.3;\n		const float mFresnelPower = 5.0;\n\n		float fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\n		*/\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		// 		dirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n		dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	vec3 hemiDiffuse = vec3( 0.0 );\n	vec3 hemiSpecular = vec3( 0.0 );\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n		vec3 lVector = normalize( lDirection.xyz );\n\n		// diffuse\n\n		float dotProduct = dot( normal, lVector );\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n		vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		hemiDiffuse += diffuse * hemiColor;\n\n		// specular (sky light)\n\n		vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n		float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n		float hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\n		// specular (ground light)\n\n		vec3 lVectorGround = -lVector;\n\n		vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n		float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n		float hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\n		float dotProductGround = dot( normal, lVectorGround );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n		vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n		hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\n	}\n\n#endif\n\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n\n#if MAX_DIR_LIGHTS > 0\n\n	totalDiffuse += dirDiffuse;\n	totalSpecular += dirSpecular;\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	totalDiffuse += hemiDiffuse;\n	totalSpecular += hemiSpecular;\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	totalDiffuse += pointDiffuse;\n	totalSpecular += pointSpecular;\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	totalDiffuse += spotDiffuse;\n	totalSpecular += spotSpecular;\n\n#endif\n\n#ifdef METAL\n\n	gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n\n#else\n\n	gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n\n#endif",
    THREE.ShaderChunk.fog_pars_fragment = "#ifdef USE_FOG\n\n	uniform vec3 fogColor;\n\n	#ifdef FOG_EXP2\n\n		uniform float fogDensity;\n\n	#else\n\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n\n#endif", THREE.ShaderChunk.morphnormal_vertex = "#ifdef USE_MORPHNORMALS\n\n	vec3 morphedNormal = vec3( 0.0 );\n\n	morphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n	morphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n	morphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n	morphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n	morphedNormal += normal;\n\n#endif", THREE.ShaderChunk.envmap_pars_fragment = "#ifdef USE_ENVMAP\n\n	uniform float reflectivity;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	uniform float flipEnvMap;\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		uniform float refractionRatio;\n\n	#else\n\n		varying vec3 vReflect;\n\n	#endif\n\n#endif\n", THREE.ShaderChunk.logdepthbuf_fragment = "#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif", THREE.ShaderChunk.normalmap_pars_fragment = "#ifdef USE_NORMALMAP\n\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n\n			// Per-Pixel Tangent Space Normal Mapping\n			// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( vUv.st );\n		vec2 st1 = dFdy( vUv.st );\n\n		vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n		vec3 N = normalize( surf_norm );\n\n		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n		mapN.xy = normalScale * mapN.xy;\n		mat3 tsn = mat3( S, T, N );\n		return normalize( tsn * mapN );\n\n	}\n\n#endif\n", THREE.ShaderChunk.lights_phong_pars_vertex = "#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n", THREE.ShaderChunk.lightmap_pars_fragment = "#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n	uniform sampler2D lightMap;\n\n#endif", THREE.ShaderChunk.shadowmap_vertex = "#ifdef USE_SHADOWMAP\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n	}\n\n#endif", THREE.ShaderChunk.lights_phong_vertex = "#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	vWorldPosition = worldPosition.xyz;\n\n#endif", THREE.ShaderChunk.map_fragment = "#ifdef USE_MAP\n\n	vec4 texelColor = texture2D( map, vUv );\n\n	#ifdef GAMMA_INPUT\n\n		texelColor.xyz *= texelColor.xyz;\n\n	#endif\n\n	gl_FragColor = gl_FragColor * texelColor;\n\n#endif", THREE.ShaderChunk.lightmap_vertex = "#ifdef USE_LIGHTMAP\n\n	vUv2 = uv2;\n\n#endif", THREE.ShaderChunk.map_particle_fragment = "#ifdef USE_MAP\n\n	gl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n\n#endif", THREE.ShaderChunk.color_pars_fragment = "#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif\n", THREE.ShaderChunk.color_vertex = "#ifdef USE_COLOR\n\n	#ifdef GAMMA_INPUT\n\n		vColor = color * color;\n\n	#else\n\n		vColor = color;\n\n	#endif\n\n#endif", THREE.ShaderChunk.skinning_vertex = "#ifdef USE_SKINNING\n\n	#ifdef USE_MORPHTARGETS\n\n	vec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\n\n	#else\n\n	vec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\n	#endif\n\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	skinned  = bindMatrixInverse * skinned;\n\n#endif\n", THREE.ShaderChunk.envmap_pars_vertex = "#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	varying vec3 vReflect;\n\n	uniform float refractionRatio;\n\n#endif\n", THREE.ShaderChunk.linear_to_gamma_fragment = "#ifdef GAMMA_OUTPUT\n\n	gl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n\n#endif", THREE.ShaderChunk.color_pars_vertex = "#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif", THREE.ShaderChunk.lights_lambert_pars_vertex = "uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\n\nuniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n", THREE.ShaderChunk.map_pars_vertex = "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n	uniform vec4 offsetRepeat;\n\n#endif\n", THREE.ShaderChunk.envmap_fragment = "#ifdef USE_ENVMAP\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n		// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\n		// Transforming Normal Vectors with the Inverse Transformation\n\n		vec3 worldNormal = normalize( vec3( vec4( normal, 0.0 ) * viewMatrix ) );\n\n		#ifdef ENVMAP_MODE_REFLECTION\n\n			vec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n		#else\n\n			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n		#endif\n\n	#else\n\n		vec3 reflectVec = vReflect;\n\n	#endif\n\n	#ifdef DOUBLE_SIDED\n		float flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n	#else\n		float flipNormal = 1.0;\n	#endif\n\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n	#elif defined( ENVMAP_TYPE_EQUIREC )\n		vec2 sampleUV;\n		sampleUV.y = clamp( flipNormal * reflectVec.y * 0.5 + 0.5, 0.0, 1.0);\n		sampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * 0.15915494309189533576888376337251 + 0.5; // reciprocal( 2 PI ) + 0.5\n		vec4 envColor = texture2D( envMap, sampleUV );\n		\n	#elif defined( ENVMAP_TYPE_SPHERE )\n		vec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n	#endif\n\n	#ifdef GAMMA_INPUT\n\n		envColor.xyz *= envColor.xyz;\n\n	#endif\n\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n\n		gl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * envColor.xyz, specularStrength * reflectivity );\n\n	#elif defined( ENVMAP_BLENDING_MIX )\n\n		gl_FragColor.xyz = mix( gl_FragColor.xyz, envColor.xyz, specularStrength * reflectivity );\n\n	#elif defined( ENVMAP_BLENDING_ADD )\n\n		gl_FragColor.xyz += envColor.xyz * specularStrength * reflectivity;\n\n	#endif\n\n#endif\n", THREE.ShaderChunk.specularmap_pars_fragment = "#ifdef USE_SPECULARMAP\n\n	uniform sampler2D specularMap;\n\n#endif", THREE.ShaderChunk.logdepthbuf_vertex = "#ifdef USE_LOGDEPTHBUF\n\n	gl_Position.z = log2(max(1e-6, gl_Position.w + 1.0)) * logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		vFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n	#endif\n\n#endif", THREE.ShaderChunk.morphtarget_pars_vertex = "#ifdef USE_MORPHTARGETS\n\n	#ifndef USE_MORPHNORMALS\n\n	uniform float morphTargetInfluences[ 8 ];\n\n	#else\n\n	uniform float morphTargetInfluences[ 4 ];\n\n	#endif\n\n#endif", THREE.ShaderChunk.specularmap_fragment = "float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n\n#else\n\n	specularStrength = 1.0;\n\n#endif", THREE.ShaderChunk.fog_fragment = "#ifdef USE_FOG\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n	#else\n\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n\n	#endif\n\n	#ifdef FOG_EXP2\n\n		const float LOG2 = 1.442695;\n		float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\n		fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\n	#else\n\n		float fogFactor = smoothstep( fogNear, fogFar, depth );\n\n	#endif\n	\n	gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n\n#endif", THREE.ShaderChunk.bumpmap_pars_fragment = "#ifdef USE_BUMPMAP\n\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n\n			// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n			//	http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n			// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n	vec2 dHdxy_fwd() {\n\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n		return vec2( dBx, dBy );\n\n	}\n\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n		vec3 vSigmaX = dFdx( surf_pos );\n		vec3 vSigmaY = dFdy( surf_pos );\n		vec3 vN = surf_norm;		// normalized\n\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n\n		float fDet = dot( vSigmaX, R1 );\n\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n\n	}\n\n#endif", THREE.ShaderChunk.defaultnormal_vertex = "#ifdef USE_SKINNING\n\n	vec3 objectNormal = skinnedNormal.xyz;\n\n#elif defined( USE_MORPHNORMALS )\n\n	vec3 objectNormal = morphedNormal;\n\n#else\n\n	vec3 objectNormal = normal;\n\n#endif\n\n#ifdef FLIP_SIDED\n\n	objectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;\n", THREE.ShaderChunk.lights_phong_pars_fragment = "uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;", THREE.ShaderChunk.skinbase_vertex = "#ifdef USE_SKINNING\n\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif", THREE.ShaderChunk.map_vertex = "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif", THREE.ShaderChunk.lightmap_fragment = "#ifdef USE_LIGHTMAP\n\n	gl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n\n#endif", THREE.ShaderChunk.shadowmap_pars_vertex = "#ifdef USE_SHADOWMAP\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n	uniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif", THREE.ShaderChunk.color_fragment = "#ifdef USE_COLOR\n\n	gl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\n\n#endif", THREE.ShaderChunk.morphtarget_vertex = "#ifdef USE_MORPHTARGETS\n\n	vec3 morphed = vec3( 0.0 );\n	morphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n	morphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n	morphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n	morphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n	#ifndef USE_MORPHNORMALS\n\n	morphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n	morphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n	morphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n	morphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n	#endif\n\n	morphed += position;\n\n#endif", THREE.ShaderChunk.envmap_vertex = "#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	vec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\n	worldNormal = normalize( worldNormal );\n\n	vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n	#ifdef ENVMAP_MODE_REFLECTION\n\n		vReflect = reflect( cameraToVertex, worldNormal );\n\n	#else\n\n		vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n	#endif\n\n#endif\n", THREE.ShaderChunk.shadowmap_fragment = "#ifdef USE_SHADOWMAP\n\n	#ifdef SHADOWMAP_DEBUG\n\n		vec3 frustumColors[3];\n		frustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n		frustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n		frustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n	#endif\n\n	#ifdef SHADOWMAP_CASCADE\n\n		int inFrustumCount = 0;\n\n	#endif\n\n	float fDepth;\n	vec3 shadowColor = vec3( 1.0 );\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n				// if ( something && something ) breaks ATI OpenGL shader compiler\n				// if ( all( something, something ) ) using this instead\n\n		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n		bool inFrustum = all( inFrustumVec );\n\n				// don't shadow pixels outside of light frustum\n				// use just first frustum (for cascades)\n				// don't shadow pixels behind far plane of light frustum\n\n		#ifdef SHADOWMAP_CASCADE\n\n			inFrustumCount += int( inFrustum );\n			bvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n\n		#else\n\n			bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n		#endif\n\n		bool frustumTest = all( frustumTestVec );\n\n		if ( frustumTest ) {\n\n			shadowCoord.z += shadowBias[ i ];\n\n			#if defined( SHADOWMAP_TYPE_PCF )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n		/*\n						// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n						// must enroll loop manually\n\n				for ( float y = -1.25; y <= 1.25; y += 1.25 )\n					for ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n						vec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n								// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n								//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n						float fDepth = unpackDepth( rgbaDepth );\n\n						if ( fDepth < shadowCoord.z )\n							shadow += 1.0;\n\n				}\n\n				shadow /= 9.0;\n\n		*/\n\n				const float shadowDelta = 1.0 / 9.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.25 * xPixelOffset;\n				float dy0 = -1.25 * yPixelOffset;\n				float dx1 = 1.25 * xPixelOffset;\n				float dy1 = 1.25 * yPixelOffset;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.0 * xPixelOffset;\n				float dy0 = -1.0 * yPixelOffset;\n				float dx1 = 1.0 * xPixelOffset;\n				float dy1 = 1.0 * yPixelOffset;\n\n				mat3 shadowKernel;\n				mat3 depthKernel;\n\n				depthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				depthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				depthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				depthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				depthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				depthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				depthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				depthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				depthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n				vec3 shadowZ = vec3( shadowCoord.z );\n				shadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n				shadowKernel[0] *= vec3(0.25);\n\n				shadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n				shadowKernel[1] *= vec3(0.25);\n\n				shadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n				shadowKernel[2] *= vec3(0.25);\n\n				vec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n				shadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n				shadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n				vec4 shadowValues;\n				shadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n				shadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n				shadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n				shadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n				shadow = dot( shadowValues, vec4( 1.0 ) );\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#else\n\n				vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n				float fDepth = unpackDepth( rgbaDepth );\n\n				if ( fDepth < shadowCoord.z )\n\n		// spot with multiple shadows is darker\n\n					shadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n		// spot with multiple shadows has the same color as single shadow spot\n\n		// 					shadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n			#endif\n\n		}\n\n\n		#ifdef SHADOWMAP_DEBUG\n\n			#ifdef SHADOWMAP_CASCADE\n\n				if ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n\n			#else\n\n				if ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n\n			#endif\n\n		#endif\n\n	}\n\n	#ifdef GAMMA_OUTPUT\n\n		shadowColor *= shadowColor;\n\n	#endif\n\n	gl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n\n#endif\n", THREE.ShaderChunk.worldpos_vertex = "#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n	#ifdef USE_SKINNING\n\n		vec4 worldPosition = modelMatrix * skinned;\n\n	#elif defined( USE_MORPHTARGETS )\n\n		vec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n\n	#else\n\n		vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n	#endif\n\n#endif\n", THREE.ShaderChunk.shadowmap_pars_fragment = "#ifdef USE_SHADOWMAP\n\n	uniform sampler2D shadowMap[ MAX_SHADOWS ];\n	uniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n	uniform float shadowDarkness[ MAX_SHADOWS ];\n	uniform float shadowBias[ MAX_SHADOWS ];\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n	float unpackDepth( const in vec4 rgba_depth ) {\n\n		const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n		float depth = dot( rgba_depth, bit_shift );\n		return depth;\n\n	}\n\n#endif", THREE.ShaderChunk.skinning_pars_vertex = "#ifdef USE_SKINNING\n\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n\n	#ifdef BONE_TEXTURE\n\n		uniform sampler2D boneTexture;\n		uniform int boneTextureWidth;\n		uniform int boneTextureHeight;\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			float j = i * 4.0;\n			float x = mod( j, float( boneTextureWidth ) );\n			float y = floor( j / float( boneTextureWidth ) );\n\n			float dx = 1.0 / float( boneTextureWidth );\n			float dy = 1.0 / float( boneTextureHeight );\n\n			y = dy * ( y + 0.5 );\n\n			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n			mat4 bone = mat4( v1, v2, v3, v4 );\n\n			return bone;\n\n		}\n\n	#else\n\n		uniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			mat4 bone = boneGlobalMatrices[ int(i) ];\n			return bone;\n\n		}\n\n	#endif\n\n#endif\n", THREE.ShaderChunk.logdepthbuf_pars_fragment = "#ifdef USE_LOGDEPTHBUF\n\n	uniform float logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		#extension GL_EXT_frag_depth : enable\n		varying float vFragDepth;\n\n	#endif\n\n#endif", THREE.ShaderChunk.alphamap_fragment = "#ifdef USE_ALPHAMAP\n\n	gl_FragColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n", THREE.ShaderChunk.alphamap_pars_fragment = "#ifdef USE_ALPHAMAP\n\n	uniform sampler2D alphaMap;\n\n#endif\n", THREE.UniformsUtils = {
        merge: function(a) {
            for (var b = {}, c = 0; c < a.length; c++) {
                var d = this.clone(a[c]);
                for (var e in d) b[e] = d[e]
            }
            return b
        },
        clone: function(a) {
            var b = {};
            for (var c in a) {
                b[c] = {};
                for (var d in a[c]) {
                    var e = a[c][d];
                    b[c][d] = e instanceof THREE.Color || e instanceof THREE.Vector2 || e instanceof THREE.Vector3 || e instanceof THREE.Vector4 || e instanceof THREE.Matrix4 || e instanceof THREE.Texture ? e.clone() : e instanceof Array ? e.slice() : e
                }
            }
            return b
        }
    }, THREE.UniformsLib = {
        common: {
            diffuse: {
                type: "c",
                value: new THREE.Color(15658734)
            },
            opacity: {
                type: "f",
                value: 1
            },
            map: {
                type: "t",
                value: null
            },
            offsetRepeat: {
                type: "v4",
                value: new THREE.Vector4(0, 0, 1, 1)
            },
            lightMap: {
                type: "t",
                value: null
            },
            specularMap: {
                type: "t",
                value: null
            },
            alphaMap: {
                type: "t",
                value: null
            },
            envMap: {
                type: "t",
                value: null
            },
            flipEnvMap: {
                type: "f",
                value: -1
            },
            reflectivity: {
                type: "f",
                value: 1
            },
            refractionRatio: {
                type: "f",
                value: .98
            },
            morphTargetInfluences: {
                type: "f",
                value: 0
            }
        },
        bump: {
            bumpMap: {
                type: "t",
                value: null
            },
            bumpScale: {
                type: "f",
                value: 1
            }
        },
        normalmap: {
            normalMap: {
                type: "t",
                value: null
            },
            normalScale: {
                type: "v2",
                value: new THREE.Vector2(1, 1)
            }
        },
        fog: {
            fogDensity: {
                type: "f",
                value: 25e-5
            },
            fogNear: {
                type: "f",
                value: 1
            },
            fogFar: {
                type: "f",
                value: 2e3
            },
            fogColor: {
                type: "c",
                value: new THREE.Color(16777215)
            }
        },
        lights: {
            ambientLightColor: {
                type: "fv",
                value: []
            },
            directionalLightDirection: {
                type: "fv",
                value: []
            },
            directionalLightColor: {
                type: "fv",
                value: []
            },
            hemisphereLightDirection: {
                type: "fv",
                value: []
            },
            hemisphereLightSkyColor: {
                type: "fv",
                value: []
            },
            hemisphereLightGroundColor: {
                type: "fv",
                value: []
            },
            pointLightColor: {
                type: "fv",
                value: []
            },
            pointLightPosition: {
                type: "fv",
                value: []
            },
            pointLightDistance: {
                type: "fv1",
                value: []
            },
            spotLightColor: {
                type: "fv",
                value: []
            },
            spotLightPosition: {
                type: "fv",
                value: []
            },
            spotLightDirection: {
                type: "fv",
                value: []
            },
            spotLightDistance: {
                type: "fv1",
                value: []
            },
            spotLightAngleCos: {
                type: "fv1",
                value: []
            },
            spotLightExponent: {
                type: "fv1",
                value: []
            }
        },
        particle: {
            psColor: {
                type: "c",
                value: new THREE.Color(15658734)
            },
            opacity: {
                type: "f",
                value: 1
            },
            size: {
                type: "f",
                value: 1
            },
            scale: {
                type: "f",
                value: 1
            },
            map: {
                type: "t",
                value: null
            },
            fogDensity: {
                type: "f",
                value: 25e-5
            },
            fogNear: {
                type: "f",
                value: 1
            },
            fogFar: {
                type: "f",
                value: 2e3
            },
            fogColor: {
                type: "c",
                value: new THREE.Color(16777215)
            }
        },
        shadowmap: {
            shadowMap: {
                type: "tv",
                value: []
            },
            shadowMapSize: {
                type: "v2v",
                value: []
            },
            shadowBias: {
                type: "fv1",
                value: []
            },
            shadowDarkness: {
                type: "fv1",
                value: []
            },
            shadowMatrix: {
                type: "m4v",
                value: []
            }
        }
    }, THREE.ShaderLib = {
        basic: {
            uniforms: THREE.UniformsUtils.merge([THREE.UniformsLib.common, THREE.UniformsLib.fog, THREE.UniformsLib.shadowmap]),
            vertexShader: [THREE.ShaderChunk.map_pars_vertex, THREE.ShaderChunk.lightmap_pars_vertex, THREE.ShaderChunk.envmap_pars_vertex, THREE.ShaderChunk.color_pars_vertex, THREE.ShaderChunk.morphtarget_pars_vertex, THREE.ShaderChunk.skinning_pars_vertex, THREE.ShaderChunk.shadowmap_pars_vertex, THREE.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", THREE.ShaderChunk.map_vertex, THREE.ShaderChunk.lightmap_vertex, THREE.ShaderChunk.color_vertex, THREE.ShaderChunk.skinbase_vertex, "	#ifdef USE_ENVMAP", THREE.ShaderChunk.morphnormal_vertex, THREE.ShaderChunk.skinnormal_vertex, THREE.ShaderChunk.defaultnormal_vertex, "	#endif", THREE.ShaderChunk.morphtarget_vertex, THREE.ShaderChunk.skinning_vertex, THREE.ShaderChunk.default_vertex, THREE.ShaderChunk.logdepthbuf_vertex, THREE.ShaderChunk.worldpos_vertex, THREE.ShaderChunk.envmap_vertex, THREE.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
            fragmentShader: ["uniform vec3 diffuse;", "uniform float opacity;", THREE.ShaderChunk.color_pars_fragment, THREE.ShaderChunk.map_pars_fragment, THREE.ShaderChunk.alphamap_pars_fragment, THREE.ShaderChunk.lightmap_pars_fragment, THREE.ShaderChunk.envmap_pars_fragment, THREE.ShaderChunk.fog_pars_fragment, THREE.ShaderChunk.shadowmap_pars_fragment, THREE.ShaderChunk.specularmap_pars_fragment, THREE.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "	gl_FragColor = vec4( diffuse, opacity );", THREE.ShaderChunk.logdepthbuf_fragment, THREE.ShaderChunk.map_fragment, THREE.ShaderChunk.alphamap_fragment, THREE.ShaderChunk.alphatest_fragment, THREE.ShaderChunk.specularmap_fragment, THREE.ShaderChunk.lightmap_fragment, THREE.ShaderChunk.color_fragment, THREE.ShaderChunk.envmap_fragment, THREE.ShaderChunk.shadowmap_fragment, THREE.ShaderChunk.linear_to_gamma_fragment, THREE.ShaderChunk.fog_fragment, "}"].join("\n")
        },
        lambert: {
            uniforms: THREE.UniformsUtils.merge([THREE.UniformsLib.common, THREE.UniformsLib.fog, THREE.UniformsLib.lights, THREE.UniformsLib.shadowmap, {
                ambient: {
                    type: "c",
                    value: new THREE.Color(16777215)
                },
                emissive: {
                    type: "c",
                    value: new THREE.Color(0)
                },
                wrapRGB: {
                    type: "v3",
                    value: new THREE.Vector3(1, 1, 1)
                }
            }]),
            vertexShader: ["#define LAMBERT", "varying vec3 vLightFront;", "#ifdef DOUBLE_SIDED", "	varying vec3 vLightBack;", "#endif", THREE.ShaderChunk.map_pars_vertex, THREE.ShaderChunk.lightmap_pars_vertex, THREE.ShaderChunk.envmap_pars_vertex, THREE.ShaderChunk.lights_lambert_pars_vertex, THREE.ShaderChunk.color_pars_vertex, THREE.ShaderChunk.morphtarget_pars_vertex, THREE.ShaderChunk.skinning_pars_vertex, THREE.ShaderChunk.shadowmap_pars_vertex, THREE.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", THREE.ShaderChunk.map_vertex, THREE.ShaderChunk.lightmap_vertex, THREE.ShaderChunk.color_vertex, THREE.ShaderChunk.morphnormal_vertex, THREE.ShaderChunk.skinbase_vertex, THREE.ShaderChunk.skinnormal_vertex, THREE.ShaderChunk.defaultnormal_vertex, THREE.ShaderChunk.morphtarget_vertex, THREE.ShaderChunk.skinning_vertex, THREE.ShaderChunk.default_vertex, THREE.ShaderChunk.logdepthbuf_vertex, THREE.ShaderChunk.worldpos_vertex, THREE.ShaderChunk.envmap_vertex, THREE.ShaderChunk.lights_lambert_vertex, THREE.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
            fragmentShader: ["uniform float opacity;", "varying vec3 vLightFront;", "#ifdef DOUBLE_SIDED", "	varying vec3 vLightBack;", "#endif", THREE.ShaderChunk.color_pars_fragment, THREE.ShaderChunk.map_pars_fragment, THREE.ShaderChunk.alphamap_pars_fragment, THREE.ShaderChunk.lightmap_pars_fragment, THREE.ShaderChunk.envmap_pars_fragment, THREE.ShaderChunk.fog_pars_fragment, THREE.ShaderChunk.shadowmap_pars_fragment, THREE.ShaderChunk.specularmap_pars_fragment, THREE.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "	gl_FragColor = vec4( vec3( 1.0 ), opacity );", THREE.ShaderChunk.logdepthbuf_fragment, THREE.ShaderChunk.map_fragment, THREE.ShaderChunk.alphamap_fragment, THREE.ShaderChunk.alphatest_fragment, THREE.ShaderChunk.specularmap_fragment, "	#ifdef DOUBLE_SIDED", "		if ( gl_FrontFacing )", "			gl_FragColor.xyz *= vLightFront;", "		else", "			gl_FragColor.xyz *= vLightBack;", "	#else", "		gl_FragColor.xyz *= vLightFront;", "	#endif", THREE.ShaderChunk.lightmap_fragment, THREE.ShaderChunk.color_fragment, THREE.ShaderChunk.envmap_fragment, THREE.ShaderChunk.shadowmap_fragment, THREE.ShaderChunk.linear_to_gamma_fragment, THREE.ShaderChunk.fog_fragment, "}"].join("\n")
        },
        phong: {
            uniforms: THREE.UniformsUtils.merge([THREE.UniformsLib.common, THREE.UniformsLib.bump, THREE.UniformsLib.normalmap, THREE.UniformsLib.fog, THREE.UniformsLib.lights, THREE.UniformsLib.shadowmap, {
                ambient: {
                    type: "c",
                    value: new THREE.Color(16777215)
                },
                emissive: {
                    type: "c",
                    value: new THREE.Color(0)
                },
                specular: {
                    type: "c",
                    value: new THREE.Color(1118481)
                },
                shininess: {
                    type: "f",
                    value: 30
                },
                wrapRGB: {
                    type: "v3",
                    value: new THREE.Vector3(1, 1, 1)
                }
            }]),
            vertexShader: ["#define PHONG", "varying vec3 vViewPosition;", "varying vec3 vNormal;", THREE.ShaderChunk.map_pars_vertex, THREE.ShaderChunk.lightmap_pars_vertex, THREE.ShaderChunk.envmap_pars_vertex, THREE.ShaderChunk.lights_phong_pars_vertex, THREE.ShaderChunk.color_pars_vertex, THREE.ShaderChunk.morphtarget_pars_vertex, THREE.ShaderChunk.skinning_pars_vertex, THREE.ShaderChunk.shadowmap_pars_vertex, THREE.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", THREE.ShaderChunk.map_vertex, THREE.ShaderChunk.lightmap_vertex, THREE.ShaderChunk.color_vertex, THREE.ShaderChunk.morphnormal_vertex, THREE.ShaderChunk.skinbase_vertex, THREE.ShaderChunk.skinnormal_vertex, THREE.ShaderChunk.defaultnormal_vertex, "	vNormal = normalize( transformedNormal );", THREE.ShaderChunk.morphtarget_vertex, THREE.ShaderChunk.skinning_vertex, THREE.ShaderChunk.default_vertex, THREE.ShaderChunk.logdepthbuf_vertex, "	vViewPosition = -mvPosition.xyz;", THREE.ShaderChunk.worldpos_vertex, THREE.ShaderChunk.envmap_vertex, THREE.ShaderChunk.lights_phong_vertex, THREE.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
            fragmentShader: ["#define PHONG", "uniform vec3 diffuse;", "uniform float opacity;", "uniform vec3 ambient;", "uniform vec3 emissive;", "uniform vec3 specular;", "uniform float shininess;", THREE.ShaderChunk.color_pars_fragment, THREE.ShaderChunk.map_pars_fragment, THREE.ShaderChunk.alphamap_pars_fragment, THREE.ShaderChunk.lightmap_pars_fragment, THREE.ShaderChunk.envmap_pars_fragment, THREE.ShaderChunk.fog_pars_fragment, THREE.ShaderChunk.lights_phong_pars_fragment, THREE.ShaderChunk.shadowmap_pars_fragment, THREE.ShaderChunk.bumpmap_pars_fragment, THREE.ShaderChunk.normalmap_pars_fragment, THREE.ShaderChunk.specularmap_pars_fragment, THREE.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "	gl_FragColor = vec4( vec3( 1.0 ), opacity );", THREE.ShaderChunk.logdepthbuf_fragment, THREE.ShaderChunk.map_fragment, THREE.ShaderChunk.alphamap_fragment, THREE.ShaderChunk.alphatest_fragment, THREE.ShaderChunk.specularmap_fragment, THREE.ShaderChunk.lights_phong_fragment, THREE.ShaderChunk.lightmap_fragment, THREE.ShaderChunk.color_fragment, THREE.ShaderChunk.envmap_fragment, THREE.ShaderChunk.shadowmap_fragment, THREE.ShaderChunk.linear_to_gamma_fragment, THREE.ShaderChunk.fog_fragment, "}"].join("\n")
        },
        particle_basic: {
            uniforms: THREE.UniformsUtils.merge([THREE.UniformsLib.particle, THREE.UniformsLib.shadowmap]),
            vertexShader: ["uniform float size;", "uniform float scale;", THREE.ShaderChunk.color_pars_vertex, THREE.ShaderChunk.shadowmap_pars_vertex, THREE.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", THREE.ShaderChunk.color_vertex, "	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );", "	#ifdef USE_SIZEATTENUATION", "		gl_PointSize = size * ( scale / length( mvPosition.xyz ) );", "	#else", "		gl_PointSize = size;", "	#endif", "	gl_Position = projectionMatrix * mvPosition;", THREE.ShaderChunk.logdepthbuf_vertex, THREE.ShaderChunk.worldpos_vertex, THREE.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
            fragmentShader: ["uniform vec3 psColor;", "uniform float opacity;", THREE.ShaderChunk.color_pars_fragment, THREE.ShaderChunk.map_particle_pars_fragment, THREE.ShaderChunk.fog_pars_fragment, THREE.ShaderChunk.shadowmap_pars_fragment, THREE.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "	gl_FragColor = vec4( psColor, opacity );", THREE.ShaderChunk.logdepthbuf_fragment, THREE.ShaderChunk.map_particle_fragment, THREE.ShaderChunk.alphatest_fragment, THREE.ShaderChunk.color_fragment, THREE.ShaderChunk.shadowmap_fragment, THREE.ShaderChunk.fog_fragment, "}"].join("\n")
        },
        dashed: {
            uniforms: THREE.UniformsUtils.merge([THREE.UniformsLib.common, THREE.UniformsLib.fog, {
                scale: {
                    type: "f",
                    value: 1
                },
                dashSize: {
                    type: "f",
                    value: 1
                },
                totalSize: {
                    type: "f",
                    value: 2
                }
            }]),
            vertexShader: ["uniform float scale;", "attribute float lineDistance;", "varying float vLineDistance;", THREE.ShaderChunk.color_pars_vertex, THREE.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", THREE.ShaderChunk.color_vertex, "	vLineDistance = scale * lineDistance;", "	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );", "	gl_Position = projectionMatrix * mvPosition;", THREE.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
            fragmentShader: ["uniform vec3 diffuse;", "uniform float opacity;", "uniform float dashSize;", "uniform float totalSize;", "varying float vLineDistance;", THREE.ShaderChunk.color_pars_fragment, THREE.ShaderChunk.fog_pars_fragment, THREE.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "	if ( mod( vLineDistance, totalSize ) > dashSize ) {", "		discard;", "	}", "	gl_FragColor = vec4( diffuse, opacity );", THREE.ShaderChunk.logdepthbuf_fragment, THREE.ShaderChunk.color_fragment, THREE.ShaderChunk.fog_fragment, "}"].join("\n")
        },
        depth: {
            uniforms: {
                mNear: {
                    type: "f",
                    value: 1
                },
                mFar: {
                    type: "f",
                    value: 2e3
                },
                opacity: {
                    type: "f",
                    value: 1
                }
            },
            vertexShader: [THREE.ShaderChunk.morphtarget_pars_vertex, THREE.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", THREE.ShaderChunk.morphtarget_vertex, THREE.ShaderChunk.default_vertex, THREE.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
            fragmentShader: ["uniform float mNear;", "uniform float mFar;", "uniform float opacity;", THREE.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", THREE.ShaderChunk.logdepthbuf_fragment, "	#ifdef USE_LOGDEPTHBUF_EXT", "		float depth = gl_FragDepthEXT / gl_FragCoord.w;", "	#else", "		float depth = gl_FragCoord.z / gl_FragCoord.w;", "	#endif", "	float color = 1.0 - smoothstep( mNear, mFar, depth );", "	gl_FragColor = vec4( vec3( color ), opacity );", "}"].join("\n")
        },
        normal: {
            uniforms: {
                opacity: {
                    type: "f",
                    value: 1
                }
            },
            vertexShader: ["varying vec3 vNormal;", THREE.ShaderChunk.morphtarget_pars_vertex, THREE.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", "	vNormal = normalize( normalMatrix * normal );", THREE.ShaderChunk.morphtarget_vertex, THREE.ShaderChunk.default_vertex, THREE.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
            fragmentShader: ["uniform float opacity;", "varying vec3 vNormal;", THREE.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "	gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );", THREE.ShaderChunk.logdepthbuf_fragment, "}"].join("\n")
        },
        cube: {
            uniforms: {
                tCube: {
                    type: "t",
                    value: null
                },
                tFlip: {
                    type: "f",
                    value: -1
                }
            },
            vertexShader: ["varying vec3 vWorldPosition;", THREE.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", "	vec4 worldPosition = modelMatrix * vec4( position, 1.0 );", "	vWorldPosition = worldPosition.xyz;", "	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", THREE.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
            fragmentShader: ["uniform samplerCube tCube;", "uniform float tFlip;", "varying vec3 vWorldPosition;", THREE.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );", THREE.ShaderChunk.logdepthbuf_fragment, "}"].join("\n")
        },
        equirect: {
            uniforms: {
                tEquirect: {
                    type: "t",
                    value: null
                },
                tFlip: {
                    type: "f",
                    value: -1
                }
            },
            vertexShader: ["varying vec3 vWorldPosition;", THREE.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", "	vec4 worldPosition = modelMatrix * vec4( position, 1.0 );", "	vWorldPosition = worldPosition.xyz;", "	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", THREE.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
            fragmentShader: ["uniform sampler2D tEquirect;", "uniform float tFlip;", "varying vec3 vWorldPosition;", THREE.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "vec3 direction = normalize( vWorldPosition );", "vec2 sampleUV;", "sampleUV.y = clamp( tFlip * direction.y * -0.5 + 0.5, 0.0, 1.0);", "sampleUV.x = atan( direction.z, direction.x ) * 0.15915494309189533576888376337251 + 0.5;", "gl_FragColor = texture2D( tEquirect, sampleUV );", THREE.ShaderChunk.logdepthbuf_fragment, "}"].join("\n")
        },
        depthRGBA: {
            uniforms: {},
            vertexShader: [THREE.ShaderChunk.morphtarget_pars_vertex, THREE.ShaderChunk.skinning_pars_vertex, THREE.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", THREE.ShaderChunk.skinbase_vertex, THREE.ShaderChunk.morphtarget_vertex, THREE.ShaderChunk.skinning_vertex, THREE.ShaderChunk.default_vertex, THREE.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
            fragmentShader: [THREE.ShaderChunk.logdepthbuf_pars_fragment, "vec4 pack_depth( const in float depth ) {", "	const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );", "	const vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );", "	vec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );", "	res -= res.xxyz * bit_mask;", "	return res;", "}", "void main() {", THREE.ShaderChunk.logdepthbuf_fragment, "	#ifdef USE_LOGDEPTHBUF_EXT", "		gl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );", "	#else", "		gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );", "	#endif", "}"].join("\n")
        }
    }, THREE.WebGLRenderer = function(a) {
        function b(a) {
            a.__webglVertexBuffer = Ja.createBuffer(), a.__webglColorBuffer = Ja.createBuffer(), Ka.info.memory.geometries++
        }

        function c(a) {
            a.__webglVertexBuffer = Ja.createBuffer(), a.__webglColorBuffer = Ja.createBuffer(), a.__webglLineDistanceBuffer = Ja.createBuffer(), Ka.info.memory.geometries++
        }

        function d(a) {
            a.__webglVertexBuffer = Ja.createBuffer(), a.__webglNormalBuffer = Ja.createBuffer(), a.__webglTangentBuffer = Ja.createBuffer(), a.__webglColorBuffer = Ja.createBuffer(), a.__webglUVBuffer = Ja.createBuffer(), a.__webglUV2Buffer = Ja.createBuffer(), a.__webglSkinIndicesBuffer = Ja.createBuffer(), a.__webglSkinWeightsBuffer = Ja.createBuffer(), a.__webglFaceBuffer = Ja.createBuffer(), a.__webglLineBuffer = Ja.createBuffer();
            var b = a.numMorphTargets;
            if (b) {
                a.__webglMorphTargetsBuffers = [];
                for (var c = 0, d = b; d > c; c++) a.__webglMorphTargetsBuffers.push(Ja.createBuffer())
            }
            var e = a.numMorphNormals;
            if (e) {
                a.__webglMorphNormalsBuffers = [];
                for (var c = 0, d = e; d > c; c++) a.__webglMorphNormalsBuffers.push(Ja.createBuffer())
            }
            Ka.info.memory.geometries++
        }

        function e(a) {
            var b = a.geometry,
                c = a.material,
                d = b.vertices.length;
            if (c.attributes) {
                void 0 === b.__webglCustomAttributesList && (b.__webglCustomAttributesList = []);
                for (var e in c.attributes) {
                    var f = c.attributes[e];
                    if (!f.__webglInitialized || f.createUniqueBuffers) {
                        f.__webglInitialized = !0;
                        var g = 1;
                        "v2" === f.type ? g = 2 : "v3" === f.type ? g = 3 : "v4" === f.type ? g = 4 : "c" === f.type && (g = 3), f.size = g, f.array = new Float32Array(d * g), f.buffer = Ja.createBuffer(), f.buffer.belongsToAttribute = e, f.needsUpdate = !0
                    }
                    b.__webglCustomAttributesList.push(f)
                }
            }
        }

        function f(a, b) {
            var c = a.vertices.length;
            a.__vertexArray = new Float32Array(3 * c), a.__colorArray = new Float32Array(3 * c), a.__sortArray = [], a.__webglParticleCount = c, e(b)
        }

        function g(a, b) {
            var c = a.vertices.length;
            a.__vertexArray = new Float32Array(3 * c), a.__colorArray = new Float32Array(3 * c), a.__lineDistanceArray = new Float32Array(1 * c), a.__webglLineCount = c, e(b)
        }

        function h(a, b) {
            var c = b.geometry,
                d = a.faces3,
                e = 3 * d.length,
                f = 1 * d.length,
                g = 3 * d.length,
                h = i(b, a);
            a.__vertexArray = new Float32Array(3 * e), a.__normalArray = new Float32Array(3 * e), a.__colorArray = new Float32Array(3 * e), a.__uvArray = new Float32Array(2 * e), c.faceVertexUvs.length > 1 && (a.__uv2Array = new Float32Array(2 * e)), c.hasTangents && (a.__tangentArray = new Float32Array(4 * e)), b.geometry.skinWeights.length && b.geometry.skinIndices.length && (a.__skinIndexArray = new Float32Array(4 * e), a.__skinWeightArray = new Float32Array(4 * e));
            var j = null !== sb.get("OES_element_index_uint") && f > 21845 ? Uint32Array : Uint16Array;
            a.__typeArray = j, a.__faceArray = new j(3 * f), a.__lineArray = new j(2 * g);
            var k = a.numMorphTargets;
            if (k) {
                a.__morphTargetsArrays = [];
                for (var l = 0, m = k; m > l; l++) a.__morphTargetsArrays.push(new Float32Array(3 * e))
            }
            var n = a.numMorphNormals;
            if (n) {
                a.__morphNormalsArrays = [];
                for (var l = 0, m = n; m > l; l++) a.__morphNormalsArrays.push(new Float32Array(3 * e))
            }
            if (a.__webglFaceCount = 3 * f, a.__webglLineCount = 2 * g, h.attributes) {
                void 0 === a.__webglCustomAttributesList && (a.__webglCustomAttributesList = []);
                for (var o in h.attributes) {
                    var p = h.attributes[o],
                        q = {};
                    for (var r in p) q[r] = p[r];
                    if (!q.__webglInitialized || q.createUniqueBuffers) {
                        q.__webglInitialized = !0;
                        var s = 1;
                        "v2" === q.type ? s = 2 : "v3" === q.type ? s = 3 : "v4" === q.type ? s = 4 : "c" === q.type && (s = 3), q.size = s, q.array = new Float32Array(e * s), q.buffer = Ja.createBuffer(), q.buffer.belongsToAttribute = o, p.needsUpdate = !0, q.__original = p
                    }
                    a.__webglCustomAttributesList.push(q)
                }
            }
            a.__inittedArrays = !0
        }

        function i(a, b) {
            return a.material instanceof THREE.MeshFaceMaterial ? a.material.materials[b.materialIndex] : a.material
        }

        function j(a) {
            return a && void 0 !== a.shading && a.shading === THREE.SmoothShading
        }

        function k(a, b) {
            var c, d, e, f, g, h, i, j, k, l, m, n = a.vertices,
                o = n.length,
                p = a.colors,
                q = p.length,
                r = a.__vertexArray,
                s = a.__colorArray,
                t = (a.__sortArray, a.verticesNeedUpdate),
                u = (a.elementsNeedUpdate, a.colorsNeedUpdate),
                v = a.__webglCustomAttributesList;
            if (t) {
                for (c = 0; o > c; c++) e = n[c], f = 3 * c, r[f] = e.x, r[f + 1] = e.y, r[f + 2] = e.z;
                Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglVertexBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, r, b)
            }
            if (u) {
                for (d = 0; q > d; d++) g = p[d], f = 3 * d, s[f] = g.r, s[f + 1] = g.g, s[f + 2] = g.b;
                Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglColorBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, s, b)
            }
            if (v)
                for (h = 0, i = v.length; i > h; h++) {
                    if (m = v[h], m.needsUpdate && (void 0 === m.boundTo || "vertices" === m.boundTo))
                        if (k = m.value.length, f = 0, 1 === m.size)
                            for (j = 0; k > j; j++) m.array[j] = m.value[j];
                        else if (2 === m.size)
                        for (j = 0; k > j; j++) l = m.value[j], m.array[f] = l.x, m.array[f + 1] = l.y, f += 2;
                    else if (3 === m.size)
                        if ("c" === m.type)
                            for (j = 0; k > j; j++) l = m.value[j], m.array[f] = l.r, m.array[f + 1] = l.g, m.array[f + 2] = l.b, f += 3;
                        else
                            for (j = 0; k > j; j++) l = m.value[j], m.array[f] = l.x, m.array[f + 1] = l.y, m.array[f + 2] = l.z, f += 3;
                    else if (4 === m.size)
                        for (j = 0; k > j; j++) l = m.value[j], m.array[f] = l.x, m.array[f + 1] = l.y, m.array[f + 2] = l.z, m.array[f + 3] = l.w, f += 4;
                    Ja.bindBuffer(Ja.ARRAY_BUFFER, m.buffer), Ja.bufferData(Ja.ARRAY_BUFFER, m.array, b), m.needsUpdate = !1
                }
        }

        function l(a, b) {
            var c, d, e, f, g, h, i, j, k, l, m, n, o = a.vertices,
                p = a.colors,
                q = a.lineDistances,
                r = o.length,
                s = p.length,
                t = q.length,
                u = a.__vertexArray,
                v = a.__colorArray,
                w = a.__lineDistanceArray,
                x = a.verticesNeedUpdate,
                y = a.colorsNeedUpdate,
                z = a.lineDistancesNeedUpdate,
                A = a.__webglCustomAttributesList;
            if (x) {
                for (c = 0; r > c; c++) f = o[c], g = 3 * c, u[g] = f.x, u[g + 1] = f.y, u[g + 2] = f.z;
                Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglVertexBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, u, b)
            }
            if (y) {
                for (d = 0; s > d; d++) h = p[d], g = 3 * d, v[g] = h.r, v[g + 1] = h.g, v[g + 2] = h.b;
                Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglColorBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, v, b)
            }
            if (z) {
                for (e = 0; t > e; e++) w[e] = q[e];
                Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglLineDistanceBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, w, b)
            }
            if (A)
                for (i = 0, j = A.length; j > i; i++)
                    if (n = A[i], n.needsUpdate && (void 0 === n.boundTo || "vertices" === n.boundTo)) {
                        if (g = 0, l = n.value.length, 1 === n.size)
                            for (k = 0; l > k; k++) n.array[k] = n.value[k];
                        else if (2 === n.size)
                            for (k = 0; l > k; k++) m = n.value[k], n.array[g] = m.x, n.array[g + 1] = m.y, g += 2;
                        else if (3 === n.size)
                            if ("c" === n.type)
                                for (k = 0; l > k; k++) m = n.value[k], n.array[g] = m.r, n.array[g + 1] = m.g, n.array[g + 2] = m.b, g += 3;
                            else
                                for (k = 0; l > k; k++) m = n.value[k], n.array[g] = m.x, n.array[g + 1] = m.y, n.array[g + 2] = m.z, g += 3;
                        else if (4 === n.size)
                            for (k = 0; l > k; k++) m = n.value[k], n.array[g] = m.x, n.array[g + 1] = m.y, n.array[g + 2] = m.z, n.array[g + 3] = m.w, g += 4;
                        Ja.bindBuffer(Ja.ARRAY_BUFFER, n.buffer), Ja.bufferData(Ja.ARRAY_BUFFER, n.array, b), n.needsUpdate = !1
                    }
        }

        function m(a, b, c, d, e) {
            if (a.__inittedArrays) {
                var f, g, h, i, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S, T, U, V, W = j(e),
                    X = 0,
                    Y = 0,
                    Z = 0,
                    $ = 0,
                    _ = 0,
                    aa = 0,
                    ba = 0,
                    ca = 0,
                    da = 0,
                    ea = 0,
                    fa = 0,
                    ga = 0,
                    ha = 0,
                    ia = a.__vertexArray,
                    ja = a.__uvArray,
                    ka = a.__uv2Array,
                    la = a.__normalArray,
                    ma = a.__tangentArray,
                    na = a.__colorArray,
                    oa = a.__skinIndexArray,
                    pa = a.__skinWeightArray,
                    qa = a.__morphTargetsArrays,
                    ra = a.__morphNormalsArrays,
                    sa = a.__webglCustomAttributesList,
                    ta = a.__faceArray,
                    ua = a.__lineArray,
                    va = b.geometry,
                    wa = va.verticesNeedUpdate,
                    xa = va.elementsNeedUpdate,
                    ya = va.uvsNeedUpdate,
                    za = va.normalsNeedUpdate,
                    Aa = va.tangentsNeedUpdate,
                    Ba = va.colorsNeedUpdate,
                    Ca = va.morphTargetsNeedUpdate,
                    Da = va.vertices,
                    Ea = a.faces3,
                    Fa = va.faces,
                    Ga = va.faceVertexUvs[0],
                    Ha = va.faceVertexUvs[1],
                    Ia = (va.colors, va.skinIndices),
                    Ka = va.skinWeights,
                    La = va.morphTargets,
                    Ma = va.morphNormals;
                if (wa) {
                    for (f = 0, g = Ea.length; g > f; f++) i = Fa[Ea[f]], r = Da[i.a], s = Da[i.b], t = Da[i.c], ia[Y] = r.x, ia[Y + 1] = r.y, ia[Y + 2] = r.z, ia[Y + 3] = s.x, ia[Y + 4] = s.y, ia[Y + 5] = s.z, ia[Y + 6] = t.x, ia[Y + 7] = t.y, ia[Y + 8] = t.z, Y += 9;
                    Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglVertexBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, ia, c)
                }
                if (Ca)
                    for (O = 0, P = La.length; P > O; O++) {
                        for (fa = 0, f = 0, g = Ea.length; g > f; f++) S = Ea[f], i = Fa[S], r = La[O].vertices[i.a], s = La[O].vertices[i.b], t = La[O].vertices[i.c], Q = qa[O], Q[fa] = r.x, Q[fa + 1] = r.y, Q[fa + 2] = r.z, Q[fa + 3] = s.x, Q[fa + 4] = s.y, Q[fa + 5] = s.z, Q[fa + 6] = t.x, Q[fa + 7] = t.y, Q[fa + 8] = t.z, e.morphNormals && (W ? (T = Ma[O].vertexNormals[S], x = T.a, y = T.b, z = T.c) : (x = Ma[O].faceNormals[S], y = x, z = x), R = ra[O], R[fa] = x.x, R[fa + 1] = x.y, R[fa + 2] = x.z, R[fa + 3] = y.x, R[fa + 4] = y.y, R[fa + 5] = y.z, R[fa + 6] = z.x, R[fa + 7] = z.y, R[fa + 8] = z.z), fa += 9;
                        Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglMorphTargetsBuffers[O]), Ja.bufferData(Ja.ARRAY_BUFFER, qa[O], c), e.morphNormals && (Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglMorphNormalsBuffers[O]), Ja.bufferData(Ja.ARRAY_BUFFER, ra[O], c))
                    }
                if (Ka.length) {
                    for (f = 0, g = Ea.length; g > f; f++) i = Fa[Ea[f]], D = Ka[i.a], E = Ka[i.b], F = Ka[i.c], pa[ea] = D.x, pa[ea + 1] = D.y, pa[ea + 2] = D.z, pa[ea + 3] = D.w, pa[ea + 4] = E.x, pa[ea + 5] = E.y, pa[ea + 6] = E.z, pa[ea + 7] = E.w, pa[ea + 8] = F.x, pa[ea + 9] = F.y, pa[ea + 10] = F.z, pa[ea + 11] = F.w, G = Ia[i.a], H = Ia[i.b], I = Ia[i.c], oa[ea] = G.x, oa[ea + 1] = G.y, oa[ea + 2] = G.z, oa[ea + 3] = G.w, oa[ea + 4] = H.x, oa[ea + 5] = H.y, oa[ea + 6] = H.z, oa[ea + 7] = H.w, oa[ea + 8] = I.x, oa[ea + 9] = I.y, oa[ea + 10] = I.z, oa[ea + 11] = I.w, ea += 12;
                    ea > 0 && (Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglSkinIndicesBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, oa, c), Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglSkinWeightsBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, pa, c))
                }
                if (Ba) {
                    for (f = 0, g = Ea.length; g > f; f++) i = Fa[Ea[f]], m = i.vertexColors, n = i.color, 3 === m.length && e.vertexColors === THREE.VertexColors ? (A = m[0], B = m[1], C = m[2]) : (A = n, B = n, C = n), na[da] = A.r, na[da + 1] = A.g, na[da + 2] = A.b, na[da + 3] = B.r, na[da + 4] = B.g, na[da + 5] = B.b, na[da + 6] = C.r, na[da + 7] = C.g, na[da + 8] = C.b, da += 9;
                    da > 0 && (Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglColorBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, na, c))
                }
                if (Aa && va.hasTangents) {
                    for (f = 0, g = Ea.length; g > f; f++) i = Fa[Ea[f]], o = i.vertexTangents, u = o[0], v = o[1], w = o[2], ma[ba] = u.x, ma[ba + 1] = u.y, ma[ba + 2] = u.z, ma[ba + 3] = u.w, ma[ba + 4] = v.x, ma[ba + 5] = v.y, ma[ba + 6] = v.z, ma[ba + 7] = v.w, ma[ba + 8] = w.x, ma[ba + 9] = w.y, ma[ba + 10] = w.z, ma[ba + 11] = w.w, ba += 12;
                    Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglTangentBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, ma, c)
                }
                if (za) {
                    for (f = 0, g = Ea.length; g > f; f++)
                        if (i = Fa[Ea[f]], k = i.vertexNormals, l = i.normal, 3 === k.length && W)
                            for (J = 0; 3 > J; J++) L = k[J], la[aa] = L.x, la[aa + 1] = L.y, la[aa + 2] = L.z, aa += 3;
                        else
                            for (J = 0; 3 > J; J++) la[aa] = l.x, la[aa + 1] = l.y, la[aa + 2] = l.z, aa += 3;
                    Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglNormalBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, la, c)
                }
                if (ya && Ga) {
                    for (f = 0, g = Ea.length; g > f; f++)
                        if (h = Ea[f], p = Ga[h], void 0 !== p)
                            for (J = 0; 3 > J; J++) M = p[J], ja[Z] = M.x, ja[Z + 1] = M.y, Z += 2;
                    Z > 0 && (Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglUVBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, ja, c))
                }
                if (ya && Ha) {
                    for (f = 0, g = Ea.length; g > f; f++)
                        if (h = Ea[f], q = Ha[h], void 0 !== q)
                            for (J = 0; 3 > J; J++) N = q[J], ka[$] = N.x, ka[$ + 1] = N.y, $ += 2;
                    $ > 0 && (Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglUV2Buffer), Ja.bufferData(Ja.ARRAY_BUFFER, ka, c))
                }
                if (xa) {
                    for (f = 0, g = Ea.length; g > f; f++) ta[_] = X, ta[_ + 1] = X + 1, ta[_ + 2] = X + 2, _ += 3, ua[ca] = X, ua[ca + 1] = X + 1, ua[ca + 2] = X, ua[ca + 3] = X + 2, ua[ca + 4] = X + 1, ua[ca + 5] = X + 2, ca += 6, X += 3;
                    Ja.bindBuffer(Ja.ELEMENT_ARRAY_BUFFER, a.__webglFaceBuffer), Ja.bufferData(Ja.ELEMENT_ARRAY_BUFFER, ta, c), Ja.bindBuffer(Ja.ELEMENT_ARRAY_BUFFER, a.__webglLineBuffer), Ja.bufferData(Ja.ELEMENT_ARRAY_BUFFER, ua, c)
                }
                if (sa)
                    for (J = 0, K = sa.length; K > J; J++)
                        if (V = sa[J], V.__original.needsUpdate) {
                            if (ga = 0, ha = 0, 1 === V.size) {
                                if (void 0 === V.boundTo || "vertices" === V.boundTo)
                                    for (f = 0, g = Ea.length; g > f; f++) i = Fa[Ea[f]], V.array[ga] = V.value[i.a], V.array[ga + 1] = V.value[i.b], V.array[ga + 2] = V.value[i.c], ga += 3;
                                else if ("faces" === V.boundTo)
                                    for (f = 0, g = Ea.length; g > f; f++) U = V.value[Ea[f]], V.array[ga] = U, V.array[ga + 1] = U, V.array[ga + 2] = U, ga += 3
                            } else if (2 === V.size) {
                                if (void 0 === V.boundTo || "vertices" === V.boundTo)
                                    for (f = 0, g = Ea.length; g > f; f++) i = Fa[Ea[f]], r = V.value[i.a], s = V.value[i.b], t = V.value[i.c], V.array[ga] = r.x, V.array[ga + 1] = r.y, V.array[ga + 2] = s.x, V.array[ga + 3] = s.y, V.array[ga + 4] = t.x, V.array[ga + 5] = t.y, ga += 6;
                                else if ("faces" === V.boundTo)
                                    for (f = 0, g = Ea.length; g > f; f++) U = V.value[Ea[f]], r = U, s = U, t = U, V.array[ga] = r.x, V.array[ga + 1] = r.y, V.array[ga + 2] = s.x, V.array[ga + 3] = s.y, V.array[ga + 4] = t.x, V.array[ga + 5] = t.y, ga += 6
                            } else if (3 === V.size) {
                                var Na;
                                if (Na = "c" === V.type ? ["r", "g", "b"] : ["x", "y", "z"], void 0 === V.boundTo || "vertices" === V.boundTo)
                                    for (f = 0, g = Ea.length; g > f; f++) i = Fa[Ea[f]], r = V.value[i.a], s = V.value[i.b], t = V.value[i.c], V.array[ga] = r[Na[0]], V.array[ga + 1] = r[Na[1]], V.array[ga + 2] = r[Na[2]], V.array[ga + 3] = s[Na[0]], V.array[ga + 4] = s[Na[1]], V.array[ga + 5] = s[Na[2]], V.array[ga + 6] = t[Na[0]], V.array[ga + 7] = t[Na[1]], V.array[ga + 8] = t[Na[2]], ga += 9;
                                else if ("faces" === V.boundTo)
                                    for (f = 0, g = Ea.length; g > f; f++) U = V.value[Ea[f]], r = U, s = U, t = U, V.array[ga] = r[Na[0]], V.array[ga + 1] = r[Na[1]], V.array[ga + 2] = r[Na[2]], V.array[ga + 3] = s[Na[0]], V.array[ga + 4] = s[Na[1]], V.array[ga + 5] = s[Na[2]], V.array[ga + 6] = t[Na[0]], V.array[ga + 7] = t[Na[1]], V.array[ga + 8] = t[Na[2]], ga += 9;
                                else if ("faceVertices" === V.boundTo)
                                    for (f = 0, g = Ea.length; g > f; f++) U = V.value[Ea[f]], r = U[0], s = U[1], t = U[2], V.array[ga] = r[Na[0]], V.array[ga + 1] = r[Na[1]], V.array[ga + 2] = r[Na[2]], V.array[ga + 3] = s[Na[0]], V.array[ga + 4] = s[Na[1]], V.array[ga + 5] = s[Na[2]], V.array[ga + 6] = t[Na[0]], V.array[ga + 7] = t[Na[1]], V.array[ga + 8] = t[Na[2]], ga += 9
                            } else if (4 === V.size)
                                if (void 0 === V.boundTo || "vertices" === V.boundTo)
                                    for (f = 0, g = Ea.length; g > f; f++) i = Fa[Ea[f]], r = V.value[i.a], s = V.value[i.b], t = V.value[i.c], V.array[ga] = r.x, V.array[ga + 1] = r.y, V.array[ga + 2] = r.z, V.array[ga + 3] = r.w, V.array[ga + 4] = s.x, V.array[ga + 5] = s.y, V.array[ga + 6] = s.z, V.array[ga + 7] = s.w, V.array[ga + 8] = t.x, V.array[ga + 9] = t.y, V.array[ga + 10] = t.z, V.array[ga + 11] = t.w, ga += 12;
                                else if ("faces" === V.boundTo)
                                for (f = 0, g = Ea.length; g > f; f++) U = V.value[Ea[f]], r = U, s = U, t = U, V.array[ga] = r.x, V.array[ga + 1] = r.y, V.array[ga + 2] = r.z, V.array[ga + 3] = r.w, V.array[ga + 4] = s.x, V.array[ga + 5] = s.y, V.array[ga + 6] = s.z, V.array[ga + 7] = s.w, V.array[ga + 8] = t.x, V.array[ga + 9] = t.y, V.array[ga + 10] = t.z, V.array[ga + 11] = t.w, ga += 12;
                            else if ("faceVertices" === V.boundTo)
                                for (f = 0, g = Ea.length; g > f; f++) U = V.value[Ea[f]], r = U[0], s = U[1], t = U[2], V.array[ga] = r.x, V.array[ga + 1] = r.y, V.array[ga + 2] = r.z, V.array[ga + 3] = r.w, V.array[ga + 4] = s.x, V.array[ga + 5] = s.y, V.array[ga + 6] = s.z, V.array[ga + 7] = s.w, V.array[ga + 8] = t.x, V.array[ga + 9] = t.y, V.array[ga + 10] = t.z, V.array[ga + 11] = t.w, ga += 12;
                            Ja.bindBuffer(Ja.ARRAY_BUFFER, V.buffer), Ja.bufferData(Ja.ARRAY_BUFFER, V.array, c)
                        }
                d && (delete a.__inittedArrays, delete a.__colorArray, delete a.__normalArray, delete a.__tangentArray, delete a.__uvArray, delete a.__uv2Array, delete a.__faceArray, delete a.__vertexArray, delete a.__lineArray, delete a.__skinIndexArray, delete a.__skinWeightArray)
            }
        }

        function n(a, b, c, d) {
            for (var e = c.attributes, f = b.attributes, g = b.attributesKeys, h = 0, i = g.length; i > h; h++) {
                var j = g[h],
                    k = f[j];
                if (k >= 0) {
                    var l = e[j];
                    if (void 0 !== l) {
                        var m = l.itemSize;
                        Ja.bindBuffer(Ja.ARRAY_BUFFER, l.buffer), p(k), Ja.vertexAttribPointer(k, m, Ja.FLOAT, !1, 0, d * m * 4)
                    } else void 0 !== a.defaultAttributeValues && (2 === a.defaultAttributeValues[j].length ? Ja.vertexAttrib2fv(k, a.defaultAttributeValues[j]) : 3 === a.defaultAttributeValues[j].length && Ja.vertexAttrib3fv(k, a.defaultAttributeValues[j]))
                }
            }
            q()
        }

        function o() {
            for (var a = 0, b = ib.length; b > a; a++) ib[a] = 0
        }

        function p(a) {
            ib[a] = 1, 0 === jb[a] && (Ja.enableVertexAttribArray(a), jb[a] = 1)
        }

        function q() {
            for (var a = 0, b = jb.length; b > a; a++) jb[a] !== ib[a] && (Ja.disableVertexAttribArray(a), jb[a] = 0)
        }

        function r(a, b, c) {
            var d = a.program.attributes;
            if (-1 !== c.morphTargetBase && d.position >= 0 ? (Ja.bindBuffer(Ja.ARRAY_BUFFER, b.__webglMorphTargetsBuffers[c.morphTargetBase]), p(d.position), Ja.vertexAttribPointer(d.position, 3, Ja.FLOAT, !1, 0, 0)) : d.position >= 0 && (Ja.bindBuffer(Ja.ARRAY_BUFFER, b.__webglVertexBuffer), p(d.position), Ja.vertexAttribPointer(d.position, 3, Ja.FLOAT, !1, 0, 0)), c.morphTargetForcedOrder.length)
                for (var e, f = 0, g = c.morphTargetForcedOrder, h = c.morphTargetInfluences; f < a.numSupportedMorphTargets && f < g.length;) e = d["morphTarget" + f], e >= 0 && (Ja.bindBuffer(Ja.ARRAY_BUFFER, b.__webglMorphTargetsBuffers[g[f]]), p(e), Ja.vertexAttribPointer(e, 3, Ja.FLOAT, !1, 0, 0)), e = d["morphNormal" + f], e >= 0 && a.morphNormals && (Ja.bindBuffer(Ja.ARRAY_BUFFER, b.__webglMorphNormalsBuffers[g[f]]), p(e), Ja.vertexAttribPointer(e, 3, Ja.FLOAT, !1, 0, 0)), c.__webglMorphTargetInfluences[f] = h[g[f]], f++;
            else {
                for (var i = [], h = c.morphTargetInfluences, j = 0, k = h.length; k > j; j++) {
                    var l = h[j];
                    i.push([l, j])
                }
                i.length > a.numSupportedMorphTargets ? (i.sort(u), i.length = a.numSupportedMorphTargets) : i.length > a.numSupportedMorphNormals ? i.sort(u) : 0 === i.length && i.push([0, 0]);
                for (var e, f = 0, m = a.numSupportedMorphTargets; m > f; f++)
                    if (i[f]) {
                        var n = i[f][1];
                        e = d["morphTarget" + f], e >= 0 && (Ja.bindBuffer(Ja.ARRAY_BUFFER, b.__webglMorphTargetsBuffers[n]), p(e), Ja.vertexAttribPointer(e, 3, Ja.FLOAT, !1, 0, 0)), e = d["morphNormal" + f], e >= 0 && a.morphNormals && (Ja.bindBuffer(Ja.ARRAY_BUFFER, b.__webglMorphNormalsBuffers[n]), p(e), Ja.vertexAttribPointer(e, 3, Ja.FLOAT, !1, 0, 0)), c.__webglMorphTargetInfluences[f] = h[n]
                    } else c.__webglMorphTargetInfluences[f] = 0
            }
            null !== a.program.uniforms.morphTargetInfluences && Ja.uniform1fv(a.program.uniforms.morphTargetInfluences, c.__webglMorphTargetInfluences)
        }

        function s(a, b) {
            return a.material.id !== b.material.id ? a.material.id - b.material.id : a.z !== b.z ? a.z - b.z : a.id - b.id
        }

        function t(a, b) {
            return a.z !== b.z ? b.z - a.z : a.id - b.id
        }

        function u(a, b) {
            return b[0] - a[0]
        }

        function v(a) {
            if (a.visible !== !1) {
                if (a instanceof THREE.Scene || a instanceof THREE.Group);
                else if (A(a), a instanceof THREE.Light) Ca.push(a);
                else if (a instanceof THREE.Sprite) Ha.push(a);
                else if (a instanceof THREE.LensFlare) Ia.push(a);
                else {
                    var b = Da[a.id];
                    if (b && (a.frustumCulled === !1 || kb.intersectsObject(a) === !0))
                        for (var c = 0, d = b.length; d > c; c++) {
                            var e = b[c];
                            z(e), e.render = !0, Ka.sortObjects === !0 && (mb.setFromMatrixPosition(a.matrixWorld), mb.applyProjection(lb), e.z = mb.z)
                        }
                }
                for (var c = 0, d = a.children.length; d > c; c++) v(a.children[c])
            }
        }

        function w(a, b, c, d, e, f) {
            for (var g, h = 0, i = a.length; i > h; h++) {
                var j = a[h],
                    k = j.object,
                    l = j.buffer;
                if (Z(k, b), f) g = f;
                else {
                    if (g = j.material, !g) continue;
                    e && Ka.setBlending(g.blending, g.blendEquation, g.blendSrc, g.blendDst), Ka.setDepthTest(g.depthTest), Ka.setDepthWrite(g.depthWrite), ca(g.polygonOffset, g.polygonOffsetFactor, g.polygonOffsetUnits)
                }
                Ka.setMaterialFaces(g), l instanceof THREE.BufferGeometry ? Ka.renderBufferDirect(b, c, d, g, l, k) : Ka.renderBuffer(b, c, d, g, l, k)
            }
        }

        function x(a, b, c, d, e, f, g) {
            for (var h, i = 0, j = a.length; j > i; i++) {
                var k = a[i],
                    l = k.object;
                if (l.visible) {
                    if (g) h = g;
                    else {
                        if (h = k[b], !h) continue;
                        f && Ka.setBlending(h.blending, h.blendEquation, h.blendSrc, h.blendDst), Ka.setDepthTest(h.depthTest), Ka.setDepthWrite(h.depthWrite), ca(h.polygonOffset, h.polygonOffsetFactor, h.polygonOffsetUnits)
                    }
                    Ka.renderImmediateObject(c, d, e, h, l)
                }
            }
        }

        function y(a) {
            var b = a.object,
                c = b.material;
            c.transparent ? (a.transparent = c, a.opaque = null) : (a.opaque = c, a.transparent = null)
        }

        function z(a) {
            var b = a.object,
                c = a.buffer,
                d = b.geometry,
                e = b.material;
            if (e instanceof THREE.MeshFaceMaterial) {
                var f = d instanceof THREE.BufferGeometry ? 0 : c.materialIndex;
                e = e.materials[f], a.material = e, e.transparent ? Ga.push(a) : Fa.push(a)
            } else e && (a.material = e, e.transparent ? Ga.push(a) : Fa.push(a))
        }

        function A(a) {
            void 0 === a.__webglInit && (a.__webglInit = !0, a._modelViewMatrix = new THREE.Matrix4, a._normalMatrix = new THREE.Matrix3, a.addEventListener("removed", Lb));
            var d = a.geometry;
            if (void 0 === d || void 0 === d.__webglInit && (d.__webglInit = !0, d.addEventListener("dispose", Mb), d instanceof THREE.BufferGeometry ? Ka.info.memory.geometries++ : a instanceof THREE.Mesh ? C(a, d) : a instanceof THREE.Line ? void 0 === d.__webglVertexBuffer && (c(d), g(d, a), d.verticesNeedUpdate = !0, d.colorsNeedUpdate = !0, d.lineDistancesNeedUpdate = !0) : a instanceof THREE.PointCloud && void 0 === d.__webglVertexBuffer && (b(d), f(d, a), d.verticesNeedUpdate = !0, d.colorsNeedUpdate = !0)), void 0 === a.__webglActive)
                if (a.__webglActive = !0, a instanceof THREE.Mesh) {
                    if (d instanceof THREE.BufferGeometry) D(Da, d, a);
                    else if (d instanceof THREE.Geometry)
                        for (var e = Vb[d.id], h = 0, i = e.length; i > h; h++) D(Da, e[h], a)
                } else a instanceof THREE.Line || a instanceof THREE.PointCloud ? D(Da, d, a) : (a instanceof THREE.ImmediateRenderObject || a.immediateRenderCallback) && E(Ea, a)
        }

        function B(a, b) {
            for (var c, d, e = sb.get("OES_element_index_uint") ? 4294967296 : 65535, f = {}, g = a.morphTargets.length, h = a.morphNormals.length, i = {}, j = [], k = 0, l = a.faces.length; l > k; k++) {
                var m = a.faces[k],
                    n = b ? m.materialIndex : 0;
                n in f || (f[n] = {
                    hash: n,
                    counter: 0
                }), c = f[n].hash + "_" + f[n].counter, c in i || (d = {
                    id: Wb++,
                    faces3: [],
                    materialIndex: n,
                    vertices: 0,
                    numMorphTargets: g,
                    numMorphNormals: h
                }, i[c] = d, j.push(d)), i[c].vertices + 3 > e && (f[n].counter += 1, c = f[n].hash + "_" + f[n].counter, c in i || (d = {
                    id: Wb++,
                    faces3: [],
                    materialIndex: n,
                    vertices: 0,
                    numMorphTargets: g,
                    numMorphNormals: h
                }, i[c] = d, j.push(d))), i[c].faces3.push(k), i[c].vertices += 3
            }
            return j
        }

        function C(a, b) {
            var c = a.material,
                e = !1;
            (void 0 === Vb[b.id] || b.groupsNeedUpdate === !0) && (delete Da[a.id], Vb[b.id] = B(b, c instanceof THREE.MeshFaceMaterial), b.groupsNeedUpdate = !1);
            for (var f = Vb[b.id], g = 0, i = f.length; i > g; g++) {
                var j = f[g];
                void 0 === j.__webglVertexBuffer ? (d(j), h(j, a), b.verticesNeedUpdate = !0, b.morphTargetsNeedUpdate = !0, b.elementsNeedUpdate = !0, b.uvsNeedUpdate = !0, b.normalsNeedUpdate = !0, b.tangentsNeedUpdate = !0, b.colorsNeedUpdate = !0, e = !0) : e = !1, (e || void 0 === a.__webglActive) && D(Da, j, a)
            }
            a.__webglActive = !0
        }

        function D(a, b, c) {
            var d = c.id;
            a[d] = a[d] || [], a[d].push({
                id: d,
                buffer: b,
                object: c,
                material: null,
                z: 0
            })
        }

        function E(a, b) {
            a.push({
                id: null,
                object: b,
                opaque: null,
                transparent: null,
                z: 0
            })
        }

        function F(a) {
            var b = a.geometry;
            if (b instanceof THREE.BufferGeometry)
                for (var c = b.attributes, d = b.attributesKeys, e = 0, f = d.length; f > e; e++) {
                    var g = d[e],
                        j = c[g];
                    if (void 0 === j.buffer && (j.buffer = Ja.createBuffer(), j.needsUpdate = !0), j.needsUpdate === !0) {
                        var n = "index" === g ? Ja.ELEMENT_ARRAY_BUFFER : Ja.ARRAY_BUFFER;
                        Ja.bindBuffer(n, j.buffer), Ja.bufferData(n, j.array, Ja.STATIC_DRAW), j.needsUpdate = !1
                    }
                } else if (a instanceof THREE.Mesh) {
                    b.groupsNeedUpdate === !0 && C(a, b);
                    for (var o = Vb[b.id], e = 0, p = o.length; p > e; e++) {
                        var q = o[e],
                            r = i(a, q);
                        b.groupsNeedUpdate === !0 && h(q, a);
                        var s = r.attributes && G(r);
                        (b.verticesNeedUpdate || b.morphTargetsNeedUpdate || b.elementsNeedUpdate || b.uvsNeedUpdate || b.normalsNeedUpdate || b.colorsNeedUpdate || b.tangentsNeedUpdate || s) && m(q, a, Ja.DYNAMIC_DRAW, !b.dynamic, r)
                    }
                    b.verticesNeedUpdate = !1, b.morphTargetsNeedUpdate = !1, b.elementsNeedUpdate = !1, b.uvsNeedUpdate = !1, b.normalsNeedUpdate = !1, b.colorsNeedUpdate = !1, b.tangentsNeedUpdate = !1, r.attributes && H(r)
                } else if (a instanceof THREE.Line) {
                var r = i(a, b),
                    s = r.attributes && G(r);
                (b.verticesNeedUpdate || b.colorsNeedUpdate || b.lineDistancesNeedUpdate || s) && l(b, Ja.DYNAMIC_DRAW), b.verticesNeedUpdate = !1, b.colorsNeedUpdate = !1, b.lineDistancesNeedUpdate = !1, r.attributes && H(r)
            } else if (a instanceof THREE.PointCloud) {
                var r = i(a, b),
                    s = r.attributes && G(r);
                (b.verticesNeedUpdate || b.colorsNeedUpdate || s) && k(b, Ja.DYNAMIC_DRAW, a), b.verticesNeedUpdate = !1, b.colorsNeedUpdate = !1, r.attributes && H(r)
            }
        }

        function G(a) {
            for (var b in a.attributes)
                if (a.attributes[b].needsUpdate) return !0;
            return !1
        }

        function H(a) {
            for (var b in a.attributes) a.attributes[b].needsUpdate = !1
        }

        function I(a) {
            a instanceof THREE.Mesh || a instanceof THREE.PointCloud || a instanceof THREE.Line ? delete Da[a.id] : (a instanceof THREE.ImmediateRenderObject || a.immediateRenderCallback) && J(Ea, a), delete a.__webglInit, delete a._modelViewMatrix, delete a._normalMatrix, delete a.__webglActive
        }

        function J(a, b) {
            for (var c = a.length - 1; c >= 0; c--) a[c].object === b && a.splice(c, 1)
        }

        function K(a, b, c, d) {
            a.addEventListener("dispose", Pb);
            var e = Xb[a.type];
            if (e) {
                var f = THREE.ShaderLib[e];
                a.__webglShader = {
                    uniforms: THREE.UniformsUtils.clone(f.uniforms),
                    vertexShader: f.vertexShader,
                    fragmentShader: f.fragmentShader
                }
            } else a.__webglShader = {
                uniforms: a.uniforms,
                vertexShader: a.vertexShader,
                fragmentShader: a.fragmentShader
            };
            var g = na(b),
                h = oa(b),
                i = ma(d),
                j = {
                    precision: sa,
                    supportsVertexTextures: zb,
                    map: !!a.map,
                    envMap: !!a.envMap,
                    envMapMode: a.envMap && a.envMap.mapping,
                    lightMap: !!a.lightMap,
                    bumpMap: !!a.bumpMap,
                    normalMap: !!a.normalMap,
                    specularMap: !!a.specularMap,
                    alphaMap: !!a.alphaMap,
                    combine: a.combine,
                    vertexColors: a.vertexColors,
                    fog: c,
                    useFog: a.fog,
                    fogExp: c instanceof THREE.FogExp2,
                    sizeAttenuation: a.sizeAttenuation,
                    logarithmicDepthBuffer: za,
                    skinning: a.skinning,
                    maxBones: i,
                    useVertexTexture: Ab && d && d.skeleton && d.skeleton.useVertexTexture,
                    morphTargets: a.morphTargets,
                    morphNormals: a.morphNormals,
                    maxMorphTargets: Ka.maxMorphTargets,
                    maxMorphNormals: Ka.maxMorphNormals,
                    maxDirLights: g.directional,
                    maxPointLights: g.point,
                    maxSpotLights: g.spot,
                    maxHemiLights: g.hemi,
                    maxShadows: h,
                    shadowMapEnabled: Ka.shadowMapEnabled && d.receiveShadow && h > 0,
                    shadowMapType: Ka.shadowMapType,
                    shadowMapDebug: Ka.shadowMapDebug,
                    shadowMapCascade: Ka.shadowMapCascade,
                    alphaTest: a.alphaTest,
                    metal: a.metal,
                    wrapAround: a.wrapAround,
                    doubleSided: a.side === THREE.DoubleSide,
                    flipSided: a.side === THREE.BackSide
                },
                k = [];
            if (e ? k.push(e) : (k.push(a.fragmentShader), k.push(a.vertexShader)), void 0 !== a.defines)
                for (var l in a.defines) k.push(l), k.push(a.defines[l]);
            for (var l in j) k.push(l), k.push(j[l]);
            for (var m, n = k.join(), o = 0, p = La.length; p > o; o++) {
                var q = La[o];
                if (q.code === n) {
                    m = q, m.usedTimes++;
                    break
                }
            }
            void 0 === m && (m = new THREE.WebGLProgram(Ka, n, a, j), La.push(m), Ka.info.memory.programs = La.length), a.program = m;
            var r = m.attributes;
            if (a.morphTargets) {
                a.numSupportedMorphTargets = 0;
                for (var s, t = "morphTarget", u = 0; u < Ka.maxMorphTargets; u++) s = t + u, r[s] >= 0 && a.numSupportedMorphTargets++
            }
            if (a.morphNormals) {
                a.numSupportedMorphNormals = 0;
                var s, t = "morphNormal";
                for (u = 0; u < Ka.maxMorphNormals; u++) s = t + u, r[s] >= 0 && a.numSupportedMorphNormals++
            }
            a.uniformsList = [];
            for (var v in a.__webglShader.uniforms) {
                var w = a.program.uniforms[v];
                w && a.uniformsList.push([a.__webglShader.uniforms[v], w]);

            }
        }

        function L(a, b, c, d, e) {
            Ra = 0, d.needsUpdate && (d.program && Ub(d), K(d, b, c, e), d.needsUpdate = !1), d.morphTargets && (e.__webglMorphTargetInfluences || (e.__webglMorphTargetInfluences = new Float32Array(Ka.maxMorphTargets)));
            var f = !1,
                g = !1,
                h = !1,
                i = d.program,
                j = i.uniforms,
                k = d.__webglShader.uniforms;
            if (i.id !== Ma && (Ja.useProgram(i.program), Ma = i.id, f = !0, g = !0, h = !0), d.id !== Oa && (-1 === Oa && (h = !0), Oa = d.id, g = !0), (f || a !== Qa) && (Ja.uniformMatrix4fv(j.projectionMatrix, !1, a.projectionMatrix.elements), za && Ja.uniform1f(j.logDepthBufFC, 2 / (Math.log(a.far + 1) / Math.LN2)), a !== Qa && (Qa = a), (d instanceof THREE.ShaderMaterial || d instanceof THREE.MeshPhongMaterial || d.envMap) && null !== j.cameraPosition && (mb.setFromMatrixPosition(a.matrixWorld), Ja.uniform3f(j.cameraPosition, mb.x, mb.y, mb.z)), (d instanceof THREE.MeshPhongMaterial || d instanceof THREE.MeshLambertMaterial || d instanceof THREE.MeshBasicMaterial || d instanceof THREE.ShaderMaterial || d.skinning) && null !== j.viewMatrix && Ja.uniformMatrix4fv(j.viewMatrix, !1, a.matrixWorldInverse.elements)), d.skinning)
                if (e.bindMatrix && null !== j.bindMatrix && Ja.uniformMatrix4fv(j.bindMatrix, !1, e.bindMatrix.elements), e.bindMatrixInverse && null !== j.bindMatrixInverse && Ja.uniformMatrix4fv(j.bindMatrixInverse, !1, e.bindMatrixInverse.elements), Ab && e.skeleton && e.skeleton.useVertexTexture) {
                    if (null !== j.boneTexture) {
                        var l = X();
                        Ja.uniform1i(j.boneTexture, l), Ka.setTexture(e.skeleton.boneTexture, l)
                    }
                    null !== j.boneTextureWidth && Ja.uniform1i(j.boneTextureWidth, e.skeleton.boneTextureWidth), null !== j.boneTextureHeight && Ja.uniform1i(j.boneTextureHeight, e.skeleton.boneTextureHeight)
                } else e.skeleton && e.skeleton.boneMatrices && null !== j.boneGlobalMatrices && Ja.uniformMatrix4fv(j.boneGlobalMatrices, !1, e.skeleton.boneMatrices);
            return g && (c && d.fog && Q(k, c), (d instanceof THREE.MeshPhongMaterial || d instanceof THREE.MeshLambertMaterial || d.lights) && (ob && (h = !0, aa(b), ob = !1), h ? (T(k, pb), U(k, !0)) : U(k, !1)), (d instanceof THREE.MeshBasicMaterial || d instanceof THREE.MeshLambertMaterial || d instanceof THREE.MeshPhongMaterial) && M(k, d), d instanceof THREE.LineBasicMaterial ? N(k, d) : d instanceof THREE.LineDashedMaterial ? (N(k, d), O(k, d)) : d instanceof THREE.PointCloudMaterial ? P(k, d) : d instanceof THREE.MeshPhongMaterial ? R(k, d) : d instanceof THREE.MeshLambertMaterial ? S(k, d) : d instanceof THREE.MeshDepthMaterial ? (k.mNear.value = a.near, k.mFar.value = a.far, k.opacity.value = d.opacity) : d instanceof THREE.MeshNormalMaterial && (k.opacity.value = d.opacity), e.receiveShadow && !d._shadowPass && V(k, b), Y(d.uniformsList)), W(j, e), null !== j.modelMatrix && Ja.uniformMatrix4fv(j.modelMatrix, !1, e.matrixWorld.elements), i
        }

        function M(a, b) {
            a.opacity.value = b.opacity, Ka.gammaInput ? a.diffuse.value.copyGammaToLinear(b.color) : a.diffuse.value = b.color, a.map.value = b.map, a.lightMap.value = b.lightMap, a.specularMap.value = b.specularMap, a.alphaMap.value = b.alphaMap, b.bumpMap && (a.bumpMap.value = b.bumpMap, a.bumpScale.value = b.bumpScale), b.normalMap && (a.normalMap.value = b.normalMap, a.normalScale.value.copy(b.normalScale));
            var c;
            if (b.map ? c = b.map : b.specularMap ? c = b.specularMap : b.normalMap ? c = b.normalMap : b.bumpMap ? c = b.bumpMap : b.alphaMap && (c = b.alphaMap), void 0 !== c) {
                var d = c.offset,
                    e = c.repeat;
                a.offsetRepeat.value.set(d.x, d.y, e.x, e.y)
            }
            a.envMap.value = b.envMap, a.flipEnvMap.value = b.envMap instanceof THREE.WebGLRenderTargetCube ? 1 : -1, a.reflectivity.value = Ka.gammaInput ? b.reflectivity : b.reflectivity, a.refractionRatio.value = b.refractionRatio
        }

        function N(a, b) {
            a.diffuse.value = b.color, a.opacity.value = b.opacity
        }

        function O(a, b) {
            a.dashSize.value = b.dashSize, a.totalSize.value = b.dashSize + b.gapSize, a.scale.value = b.scale
        }

        function P(a, b) {
            a.psColor.value = b.color, a.opacity.value = b.opacity, a.size.value = b.size, a.scale.value = pa.height / 2, a.map.value = b.map
        }

        function Q(a, b) {
            a.fogColor.value = b.color, b instanceof THREE.Fog ? (a.fogNear.value = b.near, a.fogFar.value = b.far) : b instanceof THREE.FogExp2 && (a.fogDensity.value = b.density)
        }

        function R(a, b) {
            a.shininess.value = b.shininess, Ka.gammaInput ? (a.ambient.value.copyGammaToLinear(b.ambient), a.emissive.value.copyGammaToLinear(b.emissive), a.specular.value.copyGammaToLinear(b.specular)) : (a.ambient.value = b.ambient, a.emissive.value = b.emissive, a.specular.value = b.specular), b.wrapAround && a.wrapRGB.value.copy(b.wrapRGB)
        }

        function S(a, b) {
            Ka.gammaInput ? (a.ambient.value.copyGammaToLinear(b.ambient), a.emissive.value.copyGammaToLinear(b.emissive)) : (a.ambient.value = b.ambient, a.emissive.value = b.emissive), b.wrapAround && a.wrapRGB.value.copy(b.wrapRGB)
        }

        function T(a, b) {
            a.ambientLightColor.value = b.ambient, a.directionalLightColor.value = b.directional.colors, a.directionalLightDirection.value = b.directional.positions, a.pointLightColor.value = b.point.colors, a.pointLightPosition.value = b.point.positions, a.pointLightDistance.value = b.point.distances, a.spotLightColor.value = b.spot.colors, a.spotLightPosition.value = b.spot.positions, a.spotLightDistance.value = b.spot.distances, a.spotLightDirection.value = b.spot.directions, a.spotLightAngleCos.value = b.spot.anglesCos, a.spotLightExponent.value = b.spot.exponents, a.hemisphereLightSkyColor.value = b.hemi.skyColors, a.hemisphereLightGroundColor.value = b.hemi.groundColors, a.hemisphereLightDirection.value = b.hemi.positions
        }

        function U(a, b) {
            a.ambientLightColor.needsUpdate = b, a.directionalLightColor.needsUpdate = b, a.directionalLightDirection.needsUpdate = b, a.pointLightColor.needsUpdate = b, a.pointLightPosition.needsUpdate = b, a.pointLightDistance.needsUpdate = b, a.spotLightColor.needsUpdate = b, a.spotLightPosition.needsUpdate = b, a.spotLightDistance.needsUpdate = b, a.spotLightDirection.needsUpdate = b, a.spotLightAngleCos.needsUpdate = b, a.spotLightExponent.needsUpdate = b, a.hemisphereLightSkyColor.needsUpdate = b, a.hemisphereLightGroundColor.needsUpdate = b, a.hemisphereLightDirection.needsUpdate = b
        }

        function V(a, b) {
            if (a.shadowMatrix)
                for (var c = 0, d = 0, e = b.length; e > d; d++) {
                    var f = b[d];
                    f.castShadow && (f instanceof THREE.SpotLight || f instanceof THREE.DirectionalLight && !f.shadowCascade) && (a.shadowMap.value[c] = f.shadowMap, a.shadowMapSize.value[c] = f.shadowMapSize, a.shadowMatrix.value[c] = f.shadowMatrix, a.shadowDarkness.value[c] = f.shadowDarkness, a.shadowBias.value[c] = f.shadowBias, c++)
                }
        }

        function W(a, b) {
            Ja.uniformMatrix4fv(a.modelViewMatrix, !1, b._modelViewMatrix.elements), a.normalMatrix && Ja.uniformMatrix3fv(a.normalMatrix, !1, b._normalMatrix.elements)
        }

        function X() {
            var a = Ra;
            return a >= vb && console.warn("WebGLRenderer: trying to use " + a + " texture units while this GPU supports only " + vb), Ra += 1, a
        }

        function Y(a) {
            for (var b, c, d, e = 0, f = a.length; f > e; e++) {
                var g = a[e][0];
                if (g.needsUpdate !== !1) {
                    var h = g.type,
                        i = g.value,
                        j = a[e][1];
                    switch (h) {
                        case "1i":
                            Ja.uniform1i(j, i);
                            break;
                        case "1f":
                            Ja.uniform1f(j, i);
                            break;
                        case "2f":
                            Ja.uniform2f(j, i[0], i[1]);
                            break;
                        case "3f":
                            Ja.uniform3f(j, i[0], i[1], i[2]);
                            break;
                        case "4f":
                            Ja.uniform4f(j, i[0], i[1], i[2], i[3]);
                            break;
                        case "1iv":
                            Ja.uniform1iv(j, i);
                            break;
                        case "3iv":
                            Ja.uniform3iv(j, i);
                            break;
                        case "1fv":
                            Ja.uniform1fv(j, i);
                            break;
                        case "2fv":
                            Ja.uniform2fv(j, i);
                            break;
                        case "3fv":
                            Ja.uniform3fv(j, i);
                            break;
                        case "4fv":
                            Ja.uniform4fv(j, i);
                            break;
                        case "Matrix3fv":
                            Ja.uniformMatrix3fv(j, !1, i);
                            break;
                        case "Matrix4fv":
                            Ja.uniformMatrix4fv(j, !1, i);
                            break;
                        case "i":
                            Ja.uniform1i(j, i);
                            break;
                        case "f":
                            Ja.uniform1f(j, i);
                            break;
                        case "v2":
                            Ja.uniform2f(j, i.x, i.y);
                            break;
                        case "v3":
                            Ja.uniform3f(j, i.x, i.y, i.z);
                            break;
                        case "v4":
                            Ja.uniform4f(j, i.x, i.y, i.z, i.w);
                            break;
                        case "c":
                            Ja.uniform3f(j, i.r, i.g, i.b);
                            break;
                        case "iv1":
                            Ja.uniform1iv(j, i);
                            break;
                        case "iv":
                            Ja.uniform3iv(j, i);
                            break;
                        case "fv1":
                            Ja.uniform1fv(j, i);
                            break;
                        case "fv":
                            Ja.uniform3fv(j, i);
                            break;
                        case "v2v":
                            void 0 === g._array && (g._array = new Float32Array(2 * i.length));
                            for (var k = 0, l = i.length; l > k; k++) d = 2 * k, g._array[d] = i[k].x, g._array[d + 1] = i[k].y;
                            Ja.uniform2fv(j, g._array);
                            break;
                        case "v3v":
                            void 0 === g._array && (g._array = new Float32Array(3 * i.length));
                            for (var k = 0, l = i.length; l > k; k++) d = 3 * k, g._array[d] = i[k].x, g._array[d + 1] = i[k].y, g._array[d + 2] = i[k].z;
                            Ja.uniform3fv(j, g._array);
                            break;
                        case "v4v":
                            void 0 === g._array && (g._array = new Float32Array(4 * i.length));
                            for (var k = 0, l = i.length; l > k; k++) d = 4 * k, g._array[d] = i[k].x, g._array[d + 1] = i[k].y, g._array[d + 2] = i[k].z, g._array[d + 3] = i[k].w;
                            Ja.uniform4fv(j, g._array);
                            break;
                        case "m3":
                            Ja.uniformMatrix3fv(j, !1, i.elements);
                            break;
                        case "m3v":
                            void 0 === g._array && (g._array = new Float32Array(9 * i.length));
                            for (var k = 0, l = i.length; l > k; k++) i[k].flattenToArrayOffset(g._array, 9 * k);
                            Ja.uniformMatrix3fv(j, !1, g._array);
                            break;
                        case "m4":
                            Ja.uniformMatrix4fv(j, !1, i.elements);
                            break;
                        case "m4v":
                            void 0 === g._array && (g._array = new Float32Array(16 * i.length));
                            for (var k = 0, l = i.length; l > k; k++) i[k].flattenToArrayOffset(g._array, 16 * k);
                            Ja.uniformMatrix4fv(j, !1, g._array);
                            break;
                        case "t":
                            if (b = i, c = X(), Ja.uniform1i(j, c), !b) continue;
                            b instanceof THREE.CubeTexture || b.image instanceof Array && 6 === b.image.length ? fa(b, c) : b instanceof THREE.WebGLRenderTargetCube ? ga(b, c) : Ka.setTexture(b, c);
                            break;
                        case "tv":
                            void 0 === g._array && (g._array = []);
                            for (var k = 0, l = g.value.length; l > k; k++) g._array[k] = X();
                            Ja.uniform1iv(j, g._array);
                            for (var k = 0, l = g.value.length; l > k; k++) b = g.value[k], c = g._array[k], b && Ka.setTexture(b, c);
                            break;
                        default:
                            console.warn("THREE.WebGLRenderer: Unknown uniform type: " + h)
                    }
                }
            }
        }

        function Z(a, b) {
            a._modelViewMatrix.multiplyMatrices(b.matrixWorldInverse, a.matrixWorld), a._normalMatrix.getNormalMatrix(a._modelViewMatrix)
        }

        function $(a, b, c, d) {
            a[b] = c.r * c.r * d, a[b + 1] = c.g * c.g * d, a[b + 2] = c.b * c.b * d
        }

        function _(a, b, c, d) {
            a[b] = c.r * d, a[b + 1] = c.g * d, a[b + 2] = c.b * d
        }

        function aa(a) {
            var b, c, d, e, f, g, h, i, j, k = 0,
                l = 0,
                m = 0,
                n = pb,
                o = n.directional.colors,
                p = n.directional.positions,
                q = n.point.colors,
                r = n.point.positions,
                s = n.point.distances,
                t = n.spot.colors,
                u = n.spot.positions,
                v = n.spot.distances,
                w = n.spot.directions,
                x = n.spot.anglesCos,
                y = n.spot.exponents,
                z = n.hemi.skyColors,
                A = n.hemi.groundColors,
                B = n.hemi.positions,
                C = 0,
                D = 0,
                E = 0,
                F = 0,
                G = 0,
                H = 0,
                I = 0,
                J = 0,
                K = 0,
                L = 0,
                M = 0,
                N = 0;
            for (b = 0, c = a.length; c > b; b++)
                if (d = a[b], !d.onlyShadow)
                    if (e = d.color, h = d.intensity, j = d.distance, d instanceof THREE.AmbientLight) {
                        if (!d.visible) continue;
                        Ka.gammaInput ? (k += e.r * e.r, l += e.g * e.g, m += e.b * e.b) : (k += e.r, l += e.g, m += e.b)
                    } else if (d instanceof THREE.DirectionalLight) {
                if (G += 1, !d.visible) continue;
                nb.setFromMatrixPosition(d.matrixWorld), mb.setFromMatrixPosition(d.target.matrixWorld), nb.sub(mb), nb.normalize(), K = 3 * C, p[K] = nb.x, p[K + 1] = nb.y, p[K + 2] = nb.z, Ka.gammaInput ? $(o, K, e, h * h) : _(o, K, e, h), C += 1
            } else if (d instanceof THREE.PointLight) {
                if (H += 1, !d.visible) continue;
                L = 3 * D, Ka.gammaInput ? $(q, L, e, h * h) : _(q, L, e, h), mb.setFromMatrixPosition(d.matrixWorld), r[L] = mb.x, r[L + 1] = mb.y, r[L + 2] = mb.z, s[D] = j, D += 1
            } else if (d instanceof THREE.SpotLight) {
                if (I += 1, !d.visible) continue;
                M = 3 * E, Ka.gammaInput ? $(t, M, e, h * h) : _(t, M, e, h), nb.setFromMatrixPosition(d.matrixWorld), u[M] = nb.x, u[M + 1] = nb.y, u[M + 2] = nb.z, v[E] = j, mb.setFromMatrixPosition(d.target.matrixWorld), nb.sub(mb), nb.normalize(), w[M] = nb.x, w[M + 1] = nb.y, w[M + 2] = nb.z, x[E] = Math.cos(d.angle), y[E] = d.exponent, E += 1
            } else if (d instanceof THREE.HemisphereLight) {
                if (J += 1, !d.visible) continue;
                nb.setFromMatrixPosition(d.matrixWorld), nb.normalize(), N = 3 * F, B[N] = nb.x, B[N + 1] = nb.y, B[N + 2] = nb.z, f = d.color, g = d.groundColor, Ka.gammaInput ? (i = h * h, $(z, N, f, i), $(A, N, g, i)) : (_(z, N, f, h), _(A, N, g, h)), F += 1
            }
            for (b = 3 * C, c = Math.max(o.length, 3 * G); c > b; b++) o[b] = 0;
            for (b = 3 * D, c = Math.max(q.length, 3 * H); c > b; b++) q[b] = 0;
            for (b = 3 * E, c = Math.max(t.length, 3 * I); c > b; b++) t[b] = 0;
            for (b = 3 * F, c = Math.max(z.length, 3 * J); c > b; b++) z[b] = 0;
            for (b = 3 * F, c = Math.max(A.length, 3 * J); c > b; b++) A[b] = 0;
            n.directional.length = C, n.point.length = D, n.spot.length = E, n.hemi.length = F, n.ambient[0] = k, n.ambient[1] = l, n.ambient[2] = m
        }

        function ba(a) {
            a *= ra, a !== bb && (Ja.lineWidth(a), bb = a)
        }

        function ca(a, b, c) {
            $a !== a && (a ? Ja.enable(Ja.POLYGON_OFFSET_FILL) : Ja.disable(Ja.POLYGON_OFFSET_FILL), $a = a), !a || _a === b && ab === c || (Ja.polygonOffset(b, c), _a = b, ab = c)
        }

        function da(a, b, c) {
            var d;
            c ? (Ja.texParameteri(a, Ja.TEXTURE_WRAP_S, la(b.wrapS)), Ja.texParameteri(a, Ja.TEXTURE_WRAP_T, la(b.wrapT)), Ja.texParameteri(a, Ja.TEXTURE_MAG_FILTER, la(b.magFilter)), Ja.texParameteri(a, Ja.TEXTURE_MIN_FILTER, la(b.minFilter))) : (Ja.texParameteri(a, Ja.TEXTURE_WRAP_S, Ja.CLAMP_TO_EDGE), Ja.texParameteri(a, Ja.TEXTURE_WRAP_T, Ja.CLAMP_TO_EDGE), (b.wrapS !== THREE.ClampToEdgeWrapping || b.wrapT !== THREE.ClampToEdgeWrapping) && console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT is set to THREE.ClampToEdgeWrapping. ( " + b.sourceFile + " )"), Ja.texParameteri(a, Ja.TEXTURE_MAG_FILTER, ka(b.magFilter)), Ja.texParameteri(a, Ja.TEXTURE_MIN_FILTER, ka(b.minFilter)), b.minFilter !== THREE.NearestFilter && b.minFilter !== THREE.LinearFilter && console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter is set to THREE.LinearFilter or THREE.NearestFilter. ( " + b.sourceFile + " )")), d = sb.get("EXT_texture_filter_anisotropic"), d && b.type !== THREE.FloatType && (b.anisotropy > 1 || b.__oldAnisotropy) && (Ja.texParameterf(a, d.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(b.anisotropy, Ka.getMaxAnisotropy())), b.__oldAnisotropy = b.anisotropy)
        }

        function ea(a, b) {
            if (a.width > b || a.height > b) {
                var c = b / Math.max(a.width, a.height),
                    d = document.createElement("canvas");
                d.width = Math.floor(a.width * c), d.height = Math.floor(a.height * c);
                var e = d.getContext("2d");
                return e.drawImage(a, 0, 0, a.width, a.height, 0, 0, d.width, d.height), console.log("THREE.WebGLRenderer:", a, "is too big (" + a.width + "x" + a.height + "). Resized to " + d.width + "x" + d.height + "."), d
            }
            return a
        }

        function fa(a, b) {
            if (6 === a.image.length)
                if (a.needsUpdate) {
                    a.image.__webglTextureCube || (a.addEventListener("dispose", Nb), a.image.__webglTextureCube = Ja.createTexture(), Ka.info.memory.textures++), Ja.activeTexture(Ja.TEXTURE0 + b), Ja.bindTexture(Ja.TEXTURE_CUBE_MAP, a.image.__webglTextureCube), Ja.pixelStorei(Ja.UNPACK_FLIP_Y_WEBGL, a.flipY);
                    for (var c = a instanceof THREE.CompressedTexture, d = a.image[0] instanceof THREE.DataTexture, e = [], f = 0; 6 > f; f++) e[f] = !Ka.autoScaleCubemaps || c || d ? d ? a.image[f].image : a.image[f] : ea(a.image[f], yb);
                    var g = e[0],
                        h = THREE.Math.isPowerOfTwo(g.width) && THREE.Math.isPowerOfTwo(g.height),
                        i = la(a.format),
                        j = la(a.type);
                    da(Ja.TEXTURE_CUBE_MAP, a, h);
                    for (var f = 0; 6 > f; f++)
                        if (c)
                            for (var k, l = e[f].mipmaps, m = 0, n = l.length; n > m; m++) k = l[m], a.format !== THREE.RGBAFormat && a.format !== THREE.RGBFormat ? Fb().indexOf(i) > -1 ? Ja.compressedTexImage2D(Ja.TEXTURE_CUBE_MAP_POSITIVE_X + f, m, i, k.width, k.height, 0, k.data) : console.warn("Attempt to load unsupported compressed texture format") : Ja.texImage2D(Ja.TEXTURE_CUBE_MAP_POSITIVE_X + f, m, i, k.width, k.height, 0, i, j, k.data);
                        else d ? Ja.texImage2D(Ja.TEXTURE_CUBE_MAP_POSITIVE_X + f, 0, i, e[f].width, e[f].height, 0, i, j, e[f].data) : Ja.texImage2D(Ja.TEXTURE_CUBE_MAP_POSITIVE_X + f, 0, i, i, j, e[f]);
                    a.generateMipmaps && h && Ja.generateMipmap(Ja.TEXTURE_CUBE_MAP), a.needsUpdate = !1, a.onUpdate && a.onUpdate()
                } else Ja.activeTexture(Ja.TEXTURE0 + b), Ja.bindTexture(Ja.TEXTURE_CUBE_MAP, a.image.__webglTextureCube)
        }

        function ga(a, b) {
            Ja.activeTexture(Ja.TEXTURE0 + b), Ja.bindTexture(Ja.TEXTURE_CUBE_MAP, a.__webglTexture)
        }

        function ha(a, b, c) {
            Ja.bindFramebuffer(Ja.FRAMEBUFFER, a), Ja.framebufferTexture2D(Ja.FRAMEBUFFER, Ja.COLOR_ATTACHMENT0, c, b.__webglTexture, 0)
        }

        function ia(a, b) {
            Ja.bindRenderbuffer(Ja.RENDERBUFFER, a), b.depthBuffer && !b.stencilBuffer ? (Ja.renderbufferStorage(Ja.RENDERBUFFER, Ja.DEPTH_COMPONENT16, b.width, b.height), Ja.framebufferRenderbuffer(Ja.FRAMEBUFFER, Ja.DEPTH_ATTACHMENT, Ja.RENDERBUFFER, a)) : b.depthBuffer && b.stencilBuffer ? (Ja.renderbufferStorage(Ja.RENDERBUFFER, Ja.DEPTH_STENCIL, b.width, b.height), Ja.framebufferRenderbuffer(Ja.FRAMEBUFFER, Ja.DEPTH_STENCIL_ATTACHMENT, Ja.RENDERBUFFER, a)) : Ja.renderbufferStorage(Ja.RENDERBUFFER, Ja.RGBA4, b.width, b.height)
        }

        function ja(a) {
            a instanceof THREE.WebGLRenderTargetCube ? (Ja.bindTexture(Ja.TEXTURE_CUBE_MAP, a.__webglTexture), Ja.generateMipmap(Ja.TEXTURE_CUBE_MAP), Ja.bindTexture(Ja.TEXTURE_CUBE_MAP, null)) : (Ja.bindTexture(Ja.TEXTURE_2D, a.__webglTexture), Ja.generateMipmap(Ja.TEXTURE_2D), Ja.bindTexture(Ja.TEXTURE_2D, null))
        }

        function ka(a) {
            return a === THREE.NearestFilter || a === THREE.NearestMipMapNearestFilter || a === THREE.NearestMipMapLinearFilter ? Ja.NEAREST : Ja.LINEAR
        }

        function la(a) {
            var b;
            if (a === THREE.RepeatWrapping) return Ja.REPEAT;
            if (a === THREE.ClampToEdgeWrapping) return Ja.CLAMP_TO_EDGE;
            if (a === THREE.MirroredRepeatWrapping) return Ja.MIRRORED_REPEAT;
            if (a === THREE.NearestFilter) return Ja.NEAREST;
            if (a === THREE.NearestMipMapNearestFilter) return Ja.NEAREST_MIPMAP_NEAREST;
            if (a === THREE.NearestMipMapLinearFilter) return Ja.NEAREST_MIPMAP_LINEAR;
            if (a === THREE.LinearFilter) return Ja.LINEAR;
            if (a === THREE.LinearMipMapNearestFilter) return Ja.LINEAR_MIPMAP_NEAREST;
            if (a === THREE.LinearMipMapLinearFilter) return Ja.LINEAR_MIPMAP_LINEAR;
            if (a === THREE.UnsignedByteType) return Ja.UNSIGNED_BYTE;
            if (a === THREE.UnsignedShort4444Type) return Ja.UNSIGNED_SHORT_4_4_4_4;
            if (a === THREE.UnsignedShort5551Type) return Ja.UNSIGNED_SHORT_5_5_5_1;
            if (a === THREE.UnsignedShort565Type) return Ja.UNSIGNED_SHORT_5_6_5;
            if (a === THREE.ByteType) return Ja.BYTE;
            if (a === THREE.ShortType) return Ja.SHORT;
            if (a === THREE.UnsignedShortType) return Ja.UNSIGNED_SHORT;
            if (a === THREE.IntType) return Ja.INT;
            if (a === THREE.UnsignedIntType) return Ja.UNSIGNED_INT;
            if (a === THREE.FloatType) return Ja.FLOAT;
            if (a === THREE.AlphaFormat) return Ja.ALPHA;
            if (a === THREE.RGBFormat) return Ja.RGB;
            if (a === THREE.RGBAFormat) return Ja.RGBA;
            if (a === THREE.LuminanceFormat) return Ja.LUMINANCE;
            if (a === THREE.LuminanceAlphaFormat) return Ja.LUMINANCE_ALPHA;
            if (a === THREE.AddEquation) return Ja.FUNC_ADD;
            if (a === THREE.SubtractEquation) return Ja.FUNC_SUBTRACT;
            if (a === THREE.ReverseSubtractEquation) return Ja.FUNC_REVERSE_SUBTRACT;
            if (a === THREE.ZeroFactor) return Ja.ZERO;
            if (a === THREE.OneFactor) return Ja.ONE;
            if (a === THREE.SrcColorFactor) return Ja.SRC_COLOR;
            if (a === THREE.OneMinusSrcColorFactor) return Ja.ONE_MINUS_SRC_COLOR;
            if (a === THREE.SrcAlphaFactor) return Ja.SRC_ALPHA;
            if (a === THREE.OneMinusSrcAlphaFactor) return Ja.ONE_MINUS_SRC_ALPHA;
            if (a === THREE.DstAlphaFactor) return Ja.DST_ALPHA;
            if (a === THREE.OneMinusDstAlphaFactor) return Ja.ONE_MINUS_DST_ALPHA;
            if (a === THREE.DstColorFactor) return Ja.DST_COLOR;
            if (a === THREE.OneMinusDstColorFactor) return Ja.ONE_MINUS_DST_COLOR;
            if (a === THREE.SrcAlphaSaturateFactor) return Ja.SRC_ALPHA_SATURATE;
            if (b = sb.get("WEBGL_compressed_texture_s3tc"), null !== b) {
                if (a === THREE.RGB_S3TC_DXT1_Format) return b.COMPRESSED_RGB_S3TC_DXT1_EXT;
                if (a === THREE.RGBA_S3TC_DXT1_Format) return b.COMPRESSED_RGBA_S3TC_DXT1_EXT;
                if (a === THREE.RGBA_S3TC_DXT3_Format) return b.COMPRESSED_RGBA_S3TC_DXT3_EXT;
                if (a === THREE.RGBA_S3TC_DXT5_Format) return b.COMPRESSED_RGBA_S3TC_DXT5_EXT
            }
            if (b = sb.get("WEBGL_compressed_texture_pvrtc"), null !== b) {
                if (a === THREE.RGB_PVRTC_4BPPV1_Format) return b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
                if (a === THREE.RGB_PVRTC_2BPPV1_Format) return b.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
                if (a === THREE.RGBA_PVRTC_4BPPV1_Format) return b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
                if (a === THREE.RGBA_PVRTC_2BPPV1_Format) return b.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG
            }
            if (b = sb.get("EXT_blend_minmax"), null !== b) {
                if (a === THREE.MinEquation) return b.MIN_EXT;
                if (a === THREE.MaxEquation) return b.MAX_EXT
            }
            return 0
        }

        function ma(a) {
            if (Ab && a && a.skeleton && a.skeleton.useVertexTexture) return 1024;
            var b = Ja.getParameter(Ja.MAX_VERTEX_UNIFORM_VECTORS),
                c = Math.floor((b - 20) / 4),
                d = c;
            return void 0 !== a && a instanceof THREE.SkinnedMesh && (d = Math.min(a.skeleton.bones.length, d), d < a.skeleton.bones.length && console.warn("WebGLRenderer: too many bones - " + a.skeleton.bones.length + ", this GPU supports just " + d + " (try OpenGL instead of ANGLE)")), d
        }

        function na(a) {
            for (var b = 0, c = 0, d = 0, e = 0, f = 0, g = a.length; g > f; f++) {
                var h = a[f];
                h.onlyShadow || h.visible === !1 || (h instanceof THREE.DirectionalLight && b++, h instanceof THREE.PointLight && c++, h instanceof THREE.SpotLight && d++, h instanceof THREE.HemisphereLight && e++)
            }
            return {
                directional: b,
                point: c,
                spot: d,
                hemi: e
            }
        }

        function oa(a) {
            for (var b = 0, c = 0, d = a.length; d > c; c++) {
                var e = a[c];
                e.castShadow && (e instanceof THREE.SpotLight && b++, e instanceof THREE.DirectionalLight && !e.shadowCascade && b++)
            }
            return b
        }
        console.log("THREE.WebGLRenderer", THREE.REVISION), a = a || {};
        var pa = void 0 !== a.canvas ? a.canvas : document.createElement("canvas"),
            qa = void 0 !== a.context ? a.context : null,
            ra = 1,
            sa = void 0 !== a.precision ? a.precision : "highp",
            ta = void 0 !== a.alpha ? a.alpha : !1,
            ua = void 0 !== a.depth ? a.depth : !0,
            va = void 0 !== a.stencil ? a.stencil : !0,
            wa = void 0 !== a.antialias ? a.antialias : !1,
            xa = void 0 !== a.premultipliedAlpha ? a.premultipliedAlpha : !0,
            ya = void 0 !== a.preserveDrawingBuffer ? a.preserveDrawingBuffer : !1,
            za = void 0 !== a.logarithmicDepthBuffer ? a.logarithmicDepthBuffer : !1,
            Aa = new THREE.Color(0),
            Ba = 0,
            Ca = [],
            Da = {},
            Ea = [],
            Fa = [],
            Ga = [],
            Ha = [],
            Ia = [];
        this.domElement = pa, this.context = null, this.autoClear = !0, this.autoClearColor = !0, this.autoClearDepth = !0, this.autoClearStencil = !0, this.sortObjects = !0, this.gammaInput = !1, this.gammaOutput = !1, this.shadowMapEnabled = !1, this.shadowMapType = THREE.PCFShadowMap, this.shadowMapCullFace = THREE.CullFaceFront, this.shadowMapDebug = !1, this.shadowMapCascade = !1, this.maxMorphTargets = 8, this.maxMorphNormals = 4, this.autoScaleCubemaps = !0, this.info = {
            memory: {
                programs: 0,
                geometries: 0,
                textures: 0
            },
            render: {
                calls: 0,
                vertices: 0,
                faces: 0,
                points: 0
            }
        };
        var Ja, Ka = this,
            La = [],
            Ma = null,
            Na = null,
            Oa = -1,
            Pa = "",
            Qa = null,
            Ra = 0,
            Sa = -1,
            Ta = -1,
            Ua = -1,
            Va = -1,
            Wa = -1,
            Xa = -1,
            Ya = -1,
            Za = -1,
            $a = null,
            _a = null,
            ab = null,
            bb = null,
            cb = 0,
            db = 0,
            eb = pa.width,
            fb = pa.height,
            gb = 0,
            hb = 0,
            ib = new Uint8Array(16),
            jb = new Uint8Array(16),
            kb = new THREE.Frustum,
            lb = new THREE.Matrix4,
            mb = (new THREE.Matrix4, new THREE.Vector3),
            nb = new THREE.Vector3,
            ob = !0,
            pb = {
                ambient: [0, 0, 0],
                directional: {
                    length: 0,
                    colors: [],
                    positions: []
                },
                point: {
                    length: 0,
                    colors: [],
                    positions: [],
                    distances: []
                },
                spot: {
                    length: 0,
                    colors: [],
                    positions: [],
                    distances: [],
                    directions: [],
                    anglesCos: [],
                    exponents: []
                },
                hemi: {
                    length: 0,
                    skyColors: [],
                    groundColors: [],
                    positions: []
                }
            };
        try {
            var qb = {
                alpha: ta,
                depth: ua,
                stencil: va,
                antialias: wa,
                premultipliedAlpha: xa,
                preserveDrawingBuffer: ya
            };
            if (Ja = qa || pa.getContext("webgl", qb) || pa.getContext("experimental-webgl", qb), null === Ja) throw null !== pa.getContext("webgl") ? "Error creating WebGL context with your selected attributes." : "Error creating WebGL context.";
            pa.addEventListener("webglcontextlost", function(a) {
                a.preventDefault(), ub(), tb(), Da = {}
            }, !1)
        } catch (rb) {
            console.error(rb)
        }
        void 0 === Ja.getShaderPrecisionFormat && (Ja.getShaderPrecisionFormat = function() {
            return {
                rangeMin: 1,
                rangeMax: 1,
                precision: 1
            }
        });
        var sb = new THREE.WebGLExtensions(Ja);
        sb.get("OES_texture_float"), sb.get("OES_texture_float_linear"), sb.get("OES_standard_derivatives"), za && sb.get("EXT_frag_depth");
        var tb = function() {
                Ja.clearColor(0, 0, 0, 1), Ja.clearDepth(1), Ja.clearStencil(0), Ja.enable(Ja.DEPTH_TEST), Ja.depthFunc(Ja.LEQUAL), Ja.frontFace(Ja.CCW), Ja.cullFace(Ja.BACK), Ja.enable(Ja.CULL_FACE), Ja.enable(Ja.BLEND), Ja.blendEquation(Ja.FUNC_ADD), Ja.blendFunc(Ja.SRC_ALPHA, Ja.ONE_MINUS_SRC_ALPHA), Ja.viewport(cb, db, eb, fb), Ja.clearColor(Aa.r, Aa.g, Aa.b, Ba)
            },
            ub = function() {
                Ma = null, Qa = null, Ua = -1, Ya = -1, Za = -1, Sa = -1, Ta = -1, Pa = "", Oa = -1, ob = !0;
                for (var a = 0; a < jb.length; a++) jb[a] = 0
            };
        tb(), this.context = Ja;
        var vb = Ja.getParameter(Ja.MAX_TEXTURE_IMAGE_UNITS),
            wb = Ja.getParameter(Ja.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
            xb = Ja.getParameter(Ja.MAX_TEXTURE_SIZE),
            yb = Ja.getParameter(Ja.MAX_CUBE_MAP_TEXTURE_SIZE),
            zb = wb > 0,
            Ab = zb && sb.get("OES_texture_float"),
            Bb = Ja.getShaderPrecisionFormat(Ja.VERTEX_SHADER, Ja.HIGH_FLOAT),
            Cb = Ja.getShaderPrecisionFormat(Ja.VERTEX_SHADER, Ja.MEDIUM_FLOAT),
            Db = (Ja.getShaderPrecisionFormat(Ja.VERTEX_SHADER, Ja.LOW_FLOAT), Ja.getShaderPrecisionFormat(Ja.FRAGMENT_SHADER, Ja.HIGH_FLOAT)),
            Eb = Ja.getShaderPrecisionFormat(Ja.FRAGMENT_SHADER, Ja.MEDIUM_FLOAT),
            Fb = (Ja.getShaderPrecisionFormat(Ja.FRAGMENT_SHADER, Ja.LOW_FLOAT), function() {
                var a;
                return function() {
                    if (void 0 !== a) return a;
                    if (a = [], sb.get("WEBGL_compressed_texture_pvrtc") || sb.get("WEBGL_compressed_texture_s3tc"))
                        for (var b = Ja.getParameter(Ja.COMPRESSED_TEXTURE_FORMATS), c = 0; c < b.length; c++) a.push(b[c]);
                    return a
                }
            }()),
            Gb = Bb.precision > 0 && Db.precision > 0,
            Hb = Cb.precision > 0 && Eb.precision > 0;
        "highp" !== sa || Gb || (Hb ? (sa = "mediump", console.warn("THREE.WebGLRenderer: highp not supported, using mediump.")) : (sa = "lowp", console.warn("THREE.WebGLRenderer: highp and mediump not supported, using lowp."))), "mediump" !== sa || Hb || (sa = "lowp", console.warn("THREE.WebGLRenderer: mediump not supported, using lowp."));
        var Ib = new THREE.ShadowMapPlugin(this, Ca, Da, Ea),
            Jb = new THREE.SpritePlugin(this, Ha),
            Kb = new THREE.LensFlarePlugin(this, Ia);
        this.getContext = function() {
            return Ja
        }, this.forceContextLoss = function() {
            sb.get("WEBGL_lose_context").loseContext()
        }, this.supportsVertexTextures = function() {
            return zb
        }, this.supportsFloatTextures = function() {
            return sb.get("OES_texture_float")
        }, this.supportsStandardDerivatives = function() {
            return sb.get("OES_standard_derivatives")
        }, this.supportsCompressedTextureS3TC = function() {
            return sb.get("WEBGL_compressed_texture_s3tc")
        }, this.supportsCompressedTexturePVRTC = function() {
            return sb.get("WEBGL_compressed_texture_pvrtc")
        }, this.supportsBlendMinMax = function() {
            return sb.get("EXT_blend_minmax")
        }, this.getMaxAnisotropy = function() {
            var a;
            return function() {
                if (void 0 !== a) return a;
                var b = sb.get("EXT_texture_filter_anisotropic");
                return a = null !== b ? Ja.getParameter(b.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 0
            }
        }(), this.getPrecision = function() {
            return sa
        }, this.getPixelRatio = function() {
            return ra
        }, this.setPixelRatio = function(a) {
            ra = a
        }, this.setSize = function(a, b, c) {
            pa.width = a * ra, pa.height = b * ra, c !== !1 && (pa.style.width = a + "px", pa.style.height = b + "px"), this.setViewport(0, 0, a, b)
        }, this.setViewport = function(a, b, c, d) {
            cb = a * ra, db = b * ra, eb = c * ra, fb = d * ra, Ja.viewport(cb, db, eb, fb)
        }, this.setScissor = function(a, b, c, d) {
            Ja.scissor(a * ra, b * ra, c * ra, d * ra)
        }, this.enableScissorTest = function(a) {
            a ? Ja.enable(Ja.SCISSOR_TEST) : Ja.disable(Ja.SCISSOR_TEST)
        }, this.getClearColor = function() {
            return Aa
        }, this.setClearColor = function(a, b) {
            Aa.set(a), Ba = void 0 !== b ? b : 1, Ja.clearColor(Aa.r, Aa.g, Aa.b, Ba)
        }, this.getClearAlpha = function() {
            return Ba
        }, this.setClearAlpha = function(a) {
            Ba = a, Ja.clearColor(Aa.r, Aa.g, Aa.b, Ba)
        }, this.clear = function(a, b, c) {
            var d = 0;
            (void 0 === a || a) && (d |= Ja.COLOR_BUFFER_BIT), (void 0 === b || b) && (d |= Ja.DEPTH_BUFFER_BIT), (void 0 === c || c) && (d |= Ja.STENCIL_BUFFER_BIT), Ja.clear(d)
        }, this.clearColor = function() {
            Ja.clear(Ja.COLOR_BUFFER_BIT)
        }, this.clearDepth = function() {
            Ja.clear(Ja.DEPTH_BUFFER_BIT)
        }, this.clearStencil = function() {
            Ja.clear(Ja.STENCIL_BUFFER_BIT)
        }, this.clearTarget = function(a, b, c, d) {
            this.setRenderTarget(a), this.clear(b, c, d)
        }, this.resetGLState = ub;
        var Lb = function(a) {
                var b = a.target;
                b.traverse(function(a) {
                    a.removeEventListener("remove", Lb), I(a)
                })
            },
            Mb = function(a) {
                var b = a.target;
                b.removeEventListener("dispose", Mb), Rb(b)
            },
            Nb = function(a) {
                var b = a.target;
                b.removeEventListener("dispose", Nb), Sb(b), Ka.info.memory.textures--
            },
            Ob = function(a) {
                var b = a.target;
                b.removeEventListener("dispose", Ob), Tb(b), Ka.info.memory.textures--
            },
            Pb = function(a) {
                var b = a.target;
                b.removeEventListener("dispose", Pb), Ub(b)
            },
            Qb = function(a) {
                for (var b = ["__webglVertexBuffer", "__webglNormalBuffer", "__webglTangentBuffer", "__webglColorBuffer", "__webglUVBuffer", "__webglUV2Buffer", "__webglSkinIndicesBuffer", "__webglSkinWeightsBuffer", "__webglFaceBuffer", "__webglLineBuffer", "__webglLineDistanceBuffer"], c = 0, d = b.length; d > c; c++) {
                    var e = b[c];
                    void 0 !== a[e] && (Ja.deleteBuffer(a[e]), delete a[e])
                }
                if (void 0 !== a.__webglCustomAttributesList) {
                    for (var e in a.__webglCustomAttributesList) Ja.deleteBuffer(a.__webglCustomAttributesList[e].buffer);
                    delete a.__webglCustomAttributesList
                }
                Ka.info.memory.geometries--
            },
            Rb = function(a) {
                if (delete a.__webglInit, a instanceof THREE.BufferGeometry) {
                    for (var b in a.attributes) {
                        var c = a.attributes[b];
                        void 0 !== c.buffer && (Ja.deleteBuffer(c.buffer), delete c.buffer)
                    }
                    Ka.info.memory.geometries--
                } else {
                    var d = Vb[a.id];
                    if (void 0 !== d) {
                        for (var e = 0, f = d.length; f > e; e++) {
                            var g = d[e];
                            if (void 0 !== g.numMorphTargets) {
                                for (var h = 0, i = g.numMorphTargets; i > h; h++) Ja.deleteBuffer(g.__webglMorphTargetsBuffers[h]);
                                delete g.__webglMorphTargetsBuffers
                            }
                            if (void 0 !== g.numMorphNormals) {
                                for (var h = 0, i = g.numMorphNormals; i > h; h++) Ja.deleteBuffer(g.__webglMorphNormalsBuffers[h]);
                                delete g.__webglMorphNormalsBuffers
                            }
                            Qb(g)
                        }
                        delete Vb[a.id]
                    } else Qb(a)
                }
                Pa = ""
            },
            Sb = function(a) {
                if (a.image && a.image.__webglTextureCube) Ja.deleteTexture(a.image.__webglTextureCube), delete a.image.__webglTextureCube;
                else {
                    if (void 0 === a.__webglInit) return;
                    Ja.deleteTexture(a.__webglTexture), delete a.__webglTexture, delete a.__webglInit
                }
            },
            Tb = function(a) {
                if (a && void 0 !== a.__webglTexture) {
                    if (Ja.deleteTexture(a.__webglTexture), delete a.__webglTexture, a instanceof THREE.WebGLRenderTargetCube)
                        for (var b = 0; 6 > b; b++) Ja.deleteFramebuffer(a.__webglFramebuffer[b]), Ja.deleteRenderbuffer(a.__webglRenderbuffer[b]);
                    else Ja.deleteFramebuffer(a.__webglFramebuffer), Ja.deleteRenderbuffer(a.__webglRenderbuffer);
                    delete a.__webglFramebuffer, delete a.__webglRenderbuffer
                }
            },
            Ub = function(a) {
                var b = a.program.program;
                if (void 0 !== b) {
                    a.program = void 0;
                    var c, d, e, f = !1;
                    for (c = 0, d = La.length; d > c; c++)
                        if (e = La[c], e.program === b) {
                            e.usedTimes--, 0 === e.usedTimes && (f = !0);
                            break
                        }
                    if (f === !0) {
                        var g = [];
                        for (c = 0, d = La.length; d > c; c++) e = La[c], e.program !== b && g.push(e);
                        La = g, Ja.deleteProgram(b), Ka.info.memory.programs--
                    }
                }
            };
        this.renderBufferImmediate = function(a, b, c) {
            if (o(), a.hasPositions && !a.__webglVertexBuffer && (a.__webglVertexBuffer = Ja.createBuffer()), a.hasNormals && !a.__webglNormalBuffer && (a.__webglNormalBuffer = Ja.createBuffer()), a.hasUvs && !a.__webglUvBuffer && (a.__webglUvBuffer = Ja.createBuffer()), a.hasColors && !a.__webglColorBuffer && (a.__webglColorBuffer = Ja.createBuffer()), a.hasPositions && (Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglVertexBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, a.positionArray, Ja.DYNAMIC_DRAW), p(b.attributes.position), Ja.vertexAttribPointer(b.attributes.position, 3, Ja.FLOAT, !1, 0, 0)), a.hasNormals) {
                if (Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglNormalBuffer), c.shading === THREE.FlatShading) {
                    var d, e, f, g, h, i, j, k, l, m, n, r, s, t, u = 3 * a.count;
                    for (t = 0; u > t; t += 9) s = a.normalArray, g = s[t], j = s[t + 1], m = s[t + 2], h = s[t + 3], k = s[t + 4], n = s[t + 5], i = s[t + 6], l = s[t + 7], r = s[t + 8], d = (g + h + i) / 3, e = (j + k + l) / 3, f = (m + n + r) / 3, s[t] = d, s[t + 1] = e, s[t + 2] = f, s[t + 3] = d, s[t + 4] = e, s[t + 5] = f, s[t + 6] = d, s[t + 7] = e, s[t + 8] = f
                }
                Ja.bufferData(Ja.ARRAY_BUFFER, a.normalArray, Ja.DYNAMIC_DRAW), p(b.attributes.normal), Ja.vertexAttribPointer(b.attributes.normal, 3, Ja.FLOAT, !1, 0, 0)
            }
            a.hasUvs && c.map && (Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglUvBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, a.uvArray, Ja.DYNAMIC_DRAW), p(b.attributes.uv), Ja.vertexAttribPointer(b.attributes.uv, 2, Ja.FLOAT, !1, 0, 0)), a.hasColors && c.vertexColors !== THREE.NoColors && (Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglColorBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, a.colorArray, Ja.DYNAMIC_DRAW), p(b.attributes.color), Ja.vertexAttribPointer(b.attributes.color, 3, Ja.FLOAT, !1, 0, 0)), q(), Ja.drawArrays(Ja.TRIANGLES, 0, a.count), a.count = 0
        }, this.renderBufferDirect = function(a, b, c, d, e, f) {
            if (d.visible !== !1) {
                F(f);
                var g = L(a, b, c, d, f),
                    h = !1,
                    i = d.wireframe ? 1 : 0,
                    j = "direct_" + e.id + "_" + g.id + "_" + i;
                if (j !== Pa && (Pa = j, h = !0), h && o(), f instanceof THREE.Mesh) {
                    var k = d.wireframe === !0 ? Ja.LINES : Ja.TRIANGLES,
                        l = e.attributes.index;
                    if (l) {
                        var m, p;
                        l.array instanceof Uint32Array && sb.get("OES_element_index_uint") ? (m = Ja.UNSIGNED_INT, p = 4) : (m = Ja.UNSIGNED_SHORT, p = 2);
                        var q = e.offsets;
                        if (0 === q.length) h && (n(d, g, e, 0), Ja.bindBuffer(Ja.ELEMENT_ARRAY_BUFFER, l.buffer)), Ja.drawElements(k, l.array.length, m, 0), Ka.info.render.calls++, Ka.info.render.vertices += l.array.length, Ka.info.render.faces += l.array.length / 3;
                        else {
                            h = !0;
                            for (var r = 0, s = q.length; s > r; r++) {
                                var t = q[r].index;
                                h && (n(d, g, e, t), Ja.bindBuffer(Ja.ELEMENT_ARRAY_BUFFER, l.buffer)), Ja.drawElements(k, q[r].count, m, q[r].start * p), Ka.info.render.calls++, Ka.info.render.vertices += q[r].count, Ka.info.render.faces += q[r].count / 3
                            }
                        }
                    } else {
                        h && n(d, g, e, 0);
                        var u = e.attributes.position;
                        Ja.drawArrays(k, 0, u.array.length / 3), Ka.info.render.calls++, Ka.info.render.vertices += u.array.length / 3, Ka.info.render.faces += u.array.length / 9
                    }
                } else if (f instanceof THREE.PointCloud) {
                    var k = Ja.POINTS,
                        l = e.attributes.index;
                    if (l) {
                        var m, p;
                        l.array instanceof Uint32Array && sb.get("OES_element_index_uint") ? (m = Ja.UNSIGNED_INT, p = 4) : (m = Ja.UNSIGNED_SHORT, p = 2);
                        var q = e.offsets;
                        if (0 === q.length) h && (n(d, g, e, 0), Ja.bindBuffer(Ja.ELEMENT_ARRAY_BUFFER, l.buffer)), Ja.drawElements(k, l.array.length, m, 0), Ka.info.render.calls++, Ka.info.render.points += l.array.length;
                        else {
                            q.length > 1 && (h = !0);
                            for (var r = 0, s = q.length; s > r; r++) {
                                var t = q[r].index;
                                h && (n(d, g, e, t), Ja.bindBuffer(Ja.ELEMENT_ARRAY_BUFFER, l.buffer)), Ja.drawElements(k, q[r].count, m, q[r].start * p), Ka.info.render.calls++, Ka.info.render.points += q[r].count
                            }
                        }
                    } else {
                        h && n(d, g, e, 0);
                        var u = e.attributes.position,
                            q = e.offsets;
                        if (0 === q.length) Ja.drawArrays(k, 0, u.array.length / 3), Ka.info.render.calls++, Ka.info.render.points += u.array.length / 3;
                        else
                            for (var r = 0, s = q.length; s > r; r++) Ja.drawArrays(k, q[r].index, q[r].count), Ka.info.render.calls++, Ka.info.render.points += q[r].count
                    }
                } else if (f instanceof THREE.Line) {
                    var k = f.mode === THREE.LineStrip ? Ja.LINE_STRIP : Ja.LINES;
                    ba(d.linewidth);
                    var l = e.attributes.index;
                    if (l) {
                        var m, p;
                        l.array instanceof Uint32Array ? (m = Ja.UNSIGNED_INT, p = 4) : (m = Ja.UNSIGNED_SHORT, p = 2);
                        var q = e.offsets;
                        if (0 === q.length) h && (n(d, g, e, 0), Ja.bindBuffer(Ja.ELEMENT_ARRAY_BUFFER, l.buffer)), Ja.drawElements(k, l.array.length, m, 0), Ka.info.render.calls++, Ka.info.render.vertices += l.array.length;
                        else {
                            q.length > 1 && (h = !0);
                            for (var r = 0, s = q.length; s > r; r++) {
                                var t = q[r].index;
                                h && (n(d, g, e, t), Ja.bindBuffer(Ja.ELEMENT_ARRAY_BUFFER, l.buffer)), Ja.drawElements(k, q[r].count, m, q[r].start * p), Ka.info.render.calls++, Ka.info.render.vertices += q[r].count
                            }
                        }
                    } else {
                        h && n(d, g, e, 0);
                        var u = e.attributes.position,
                            q = e.offsets;
                        if (0 === q.length) Ja.drawArrays(k, 0, u.array.length / 3), Ka.info.render.calls++, Ka.info.render.vertices += u.array.length / 3;
                        else
                            for (var r = 0, s = q.length; s > r; r++) Ja.drawArrays(k, q[r].index, q[r].count), Ka.info.render.calls++, Ka.info.render.vertices += q[r].count
                    }
                }
            }
        }, this.renderBuffer = function(a, b, c, d, e, f) {
            if (d.visible !== !1) {
                F(f);
                var g = L(a, b, c, d, f),
                    h = g.attributes,
                    i = !1,
                    j = d.wireframe ? 1 : 0,
                    k = e.id + "_" + g.id + "_" + j;
                if (k !== Pa && (Pa = k, i = !0), i && o(), !d.morphTargets && h.position >= 0 ? i && (Ja.bindBuffer(Ja.ARRAY_BUFFER, e.__webglVertexBuffer), p(h.position), Ja.vertexAttribPointer(h.position, 3, Ja.FLOAT, !1, 0, 0)) : f.morphTargetBase && r(d, e, f), i) {
                    if (e.__webglCustomAttributesList)
                        for (var l = 0, m = e.__webglCustomAttributesList.length; m > l; l++) {
                            var n = e.__webglCustomAttributesList[l];
                            h[n.buffer.belongsToAttribute] >= 0 && (Ja.bindBuffer(Ja.ARRAY_BUFFER, n.buffer), p(h[n.buffer.belongsToAttribute]), Ja.vertexAttribPointer(h[n.buffer.belongsToAttribute], n.size, Ja.FLOAT, !1, 0, 0))
                        }
                    h.color >= 0 && (f.geometry.colors.length > 0 || f.geometry.faces.length > 0 ? (Ja.bindBuffer(Ja.ARRAY_BUFFER, e.__webglColorBuffer), p(h.color), Ja.vertexAttribPointer(h.color, 3, Ja.FLOAT, !1, 0, 0)) : void 0 !== d.defaultAttributeValues && Ja.vertexAttrib3fv(h.color, d.defaultAttributeValues.color)), h.normal >= 0 && (Ja.bindBuffer(Ja.ARRAY_BUFFER, e.__webglNormalBuffer), p(h.normal), Ja.vertexAttribPointer(h.normal, 3, Ja.FLOAT, !1, 0, 0)), h.tangent >= 0 && (Ja.bindBuffer(Ja.ARRAY_BUFFER, e.__webglTangentBuffer), p(h.tangent), Ja.vertexAttribPointer(h.tangent, 4, Ja.FLOAT, !1, 0, 0)), h.uv >= 0 && (f.geometry.faceVertexUvs[0] ? (Ja.bindBuffer(Ja.ARRAY_BUFFER, e.__webglUVBuffer), p(h.uv), Ja.vertexAttribPointer(h.uv, 2, Ja.FLOAT, !1, 0, 0)) : void 0 !== d.defaultAttributeValues && Ja.vertexAttrib2fv(h.uv, d.defaultAttributeValues.uv)), h.uv2 >= 0 && (f.geometry.faceVertexUvs[1] ? (Ja.bindBuffer(Ja.ARRAY_BUFFER, e.__webglUV2Buffer), p(h.uv2), Ja.vertexAttribPointer(h.uv2, 2, Ja.FLOAT, !1, 0, 0)) : void 0 !== d.defaultAttributeValues && Ja.vertexAttrib2fv(h.uv2, d.defaultAttributeValues.uv2)), d.skinning && h.skinIndex >= 0 && h.skinWeight >= 0 && (Ja.bindBuffer(Ja.ARRAY_BUFFER, e.__webglSkinIndicesBuffer), p(h.skinIndex), Ja.vertexAttribPointer(h.skinIndex, 4, Ja.FLOAT, !1, 0, 0), Ja.bindBuffer(Ja.ARRAY_BUFFER, e.__webglSkinWeightsBuffer), p(h.skinWeight), Ja.vertexAttribPointer(h.skinWeight, 4, Ja.FLOAT, !1, 0, 0)), h.lineDistance >= 0 && (Ja.bindBuffer(Ja.ARRAY_BUFFER, e.__webglLineDistanceBuffer), p(h.lineDistance), Ja.vertexAttribPointer(h.lineDistance, 1, Ja.FLOAT, !1, 0, 0))
                }
                if (q(), f instanceof THREE.Mesh) {
                    var s = e.__typeArray === Uint32Array ? Ja.UNSIGNED_INT : Ja.UNSIGNED_SHORT;
                    d.wireframe ? (ba(d.wireframeLinewidth), i && Ja.bindBuffer(Ja.ELEMENT_ARRAY_BUFFER, e.__webglLineBuffer), Ja.drawElements(Ja.LINES, e.__webglLineCount, s, 0)) : (i && Ja.bindBuffer(Ja.ELEMENT_ARRAY_BUFFER, e.__webglFaceBuffer), Ja.drawElements(Ja.TRIANGLES, e.__webglFaceCount, s, 0)), Ka.info.render.calls++, Ka.info.render.vertices += e.__webglFaceCount, Ka.info.render.faces += e.__webglFaceCount / 3
                } else if (f instanceof THREE.Line) {
                    var t = f.mode === THREE.LineStrip ? Ja.LINE_STRIP : Ja.LINES;
                    ba(d.linewidth), Ja.drawArrays(t, 0, e.__webglLineCount), Ka.info.render.calls++
                } else f instanceof THREE.PointCloud && (Ja.drawArrays(Ja.POINTS, 0, e.__webglParticleCount), Ka.info.render.calls++, Ka.info.render.points += e.__webglParticleCount)
            }
        }, this.render = function(a, b, c, d) {
            if (b instanceof THREE.Camera == !1) return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");
            var e = a.fog;
            Pa = "", Oa = -1, Qa = null, ob = !0, a.autoUpdate === !0 && a.updateMatrixWorld(), void 0 === b.parent && b.updateMatrixWorld(), a.traverse(function(a) {
                a instanceof THREE.SkinnedMesh && a.skeleton.update()
            }), b.matrixWorldInverse.getInverse(b.matrixWorld), lb.multiplyMatrices(b.projectionMatrix, b.matrixWorldInverse), kb.setFromMatrix(lb), Ca.length = 0, Fa.length = 0, Ga.length = 0, Ha.length = 0, Ia.length = 0, v(a), Ka.sortObjects === !0 && (Fa.sort(s), Ga.sort(t)), Ib.render(a, b), Ka.info.render.calls = 0, Ka.info.render.vertices = 0, Ka.info.render.faces = 0, Ka.info.render.points = 0, this.setRenderTarget(c), (this.autoClear || d) && this.clear(this.autoClearColor, this.autoClearDepth, this.autoClearStencil);
            for (var f = 0, g = Ea.length; g > f; f++) {
                var h = Ea[f],
                    i = h.object;
                i.visible && (Z(i, b), y(h))
            }
            if (a.overrideMaterial) {
                var j = a.overrideMaterial;
                this.setBlending(j.blending, j.blendEquation, j.blendSrc, j.blendDst), this.setDepthTest(j.depthTest), this.setDepthWrite(j.depthWrite), ca(j.polygonOffset, j.polygonOffsetFactor, j.polygonOffsetUnits), w(Fa, b, Ca, e, !0, j), w(Ga, b, Ca, e, !0, j), x(Ea, "", b, Ca, e, !1, j)
            } else {
                var j = null;
                this.setBlending(THREE.NoBlending), w(Fa, b, Ca, e, !1, j), x(Ea, "opaque", b, Ca, e, !1, j), w(Ga, b, Ca, e, !0, j), x(Ea, "transparent", b, Ca, e, !0, j)
            }
            Jb.render(a, b), Kb.render(a, b, gb, hb), c && c.generateMipmaps && c.minFilter !== THREE.NearestFilter && c.minFilter !== THREE.LinearFilter && ja(c), this.setDepthTest(!0), this.setDepthWrite(!0)
        }, this.renderImmediateObject = function(a, b, c, d, e) {
            var f = L(a, b, c, d, e);
            Pa = "", Ka.setMaterialFaces(d), e.immediateRenderCallback ? e.immediateRenderCallback(f, Ja, kb) : e.render(function(a) {
                Ka.renderBufferImmediate(a, f, d)
            })
        };
        var Vb = {},
            Wb = 0,
            Xb = {
                MeshDepthMaterial: "depth",
                MeshNormalMaterial: "normal",
                MeshBasicMaterial: "basic",
                MeshLambertMaterial: "lambert",
                MeshPhongMaterial: "phong",
                LineBasicMaterial: "basic",
                LineDashedMaterial: "dashed",
                PointCloudMaterial: "particle_basic"
            };
        this.setFaceCulling = function(a, b) {
            a === THREE.CullFaceNone ? Ja.disable(Ja.CULL_FACE) : (Ja.frontFace(b === THREE.FrontFaceDirectionCW ? Ja.CW : Ja.CCW), Ja.cullFace(a === THREE.CullFaceBack ? Ja.BACK : a === THREE.CullFaceFront ? Ja.FRONT : Ja.FRONT_AND_BACK), Ja.enable(Ja.CULL_FACE))
        }, this.setMaterialFaces = function(a) {
            var b = a.side === THREE.DoubleSide,
                c = a.side === THREE.BackSide;
            Sa !== b && (b ? Ja.disable(Ja.CULL_FACE) : Ja.enable(Ja.CULL_FACE), Sa = b), Ta !== c && (Ja.frontFace(c ? Ja.CW : Ja.CCW), Ta = c)
        }, this.setDepthTest = function(a) {
            Ya !== a && (a ? Ja.enable(Ja.DEPTH_TEST) : Ja.disable(Ja.DEPTH_TEST), Ya = a)
        }, this.setDepthWrite = function(a) {
            Za !== a && (Ja.depthMask(a), Za = a)
        }, this.setBlending = function(a, b, c, d) {
            a !== Ua && (a === THREE.NoBlending ? Ja.disable(Ja.BLEND) : a === THREE.AdditiveBlending ? (Ja.enable(Ja.BLEND), Ja.blendEquation(Ja.FUNC_ADD), Ja.blendFunc(Ja.SRC_ALPHA, Ja.ONE)) : a === THREE.SubtractiveBlending ? (Ja.enable(Ja.BLEND), Ja.blendEquation(Ja.FUNC_ADD), Ja.blendFunc(Ja.ZERO, Ja.ONE_MINUS_SRC_COLOR)) : a === THREE.MultiplyBlending ? (Ja.enable(Ja.BLEND), Ja.blendEquation(Ja.FUNC_ADD), Ja.blendFunc(Ja.ZERO, Ja.SRC_COLOR)) : a === THREE.CustomBlending ? Ja.enable(Ja.BLEND) : (Ja.enable(Ja.BLEND), Ja.blendEquationSeparate(Ja.FUNC_ADD, Ja.FUNC_ADD), Ja.blendFuncSeparate(Ja.SRC_ALPHA, Ja.ONE_MINUS_SRC_ALPHA, Ja.ONE, Ja.ONE_MINUS_SRC_ALPHA)), Ua = a), a === THREE.CustomBlending ? (b !== Va && (Ja.blendEquation(la(b)), Va = b), (c !== Wa || d !== Xa) && (Ja.blendFunc(la(c), la(d)), Wa = c, Xa = d)) : (Va = null, Wa = null, Xa = null)
        }, this.uploadTexture = function(a) {
            void 0 === a.__webglInit && (a.__webglInit = !0, a.addEventListener("dispose", Nb), a.__webglTexture = Ja.createTexture(), Ka.info.memory.textures++), Ja.bindTexture(Ja.TEXTURE_2D, a.__webglTexture), Ja.pixelStorei(Ja.UNPACK_FLIP_Y_WEBGL, a.flipY), Ja.pixelStorei(Ja.UNPACK_PREMULTIPLY_ALPHA_WEBGL, a.premultiplyAlpha), Ja.pixelStorei(Ja.UNPACK_ALIGNMENT, a.unpackAlignment), a.image = ea(a.image, xb);
            var b = a.image,
                c = THREE.Math.isPowerOfTwo(b.width) && THREE.Math.isPowerOfTwo(b.height),
                d = la(a.format),
                e = la(a.type);
            da(Ja.TEXTURE_2D, a, c);
            var f, g = a.mipmaps;
            if (a instanceof THREE.DataTexture)
                if (g.length > 0 && c) {
                    for (var h = 0, i = g.length; i > h; h++) f = g[h], Ja.texImage2D(Ja.TEXTURE_2D, h, d, f.width, f.height, 0, d, e, f.data);
                    a.generateMipmaps = !1
                } else Ja.texImage2D(Ja.TEXTURE_2D, 0, d, b.width, b.height, 0, d, e, b.data);
            else if (a instanceof THREE.CompressedTexture)
                for (var h = 0, i = g.length; i > h; h++) f = g[h], a.format !== THREE.RGBAFormat && a.format !== THREE.RGBFormat ? Fb().indexOf(d) > -1 ? Ja.compressedTexImage2D(Ja.TEXTURE_2D, h, d, f.width, f.height, 0, f.data) : console.warn("Attempt to load unsupported compressed texture format") : Ja.texImage2D(Ja.TEXTURE_2D, h, d, f.width, f.height, 0, d, e, f.data);
            else if (g.length > 0 && c) {
                for (var h = 0, i = g.length; i > h; h++) f = g[h], Ja.texImage2D(Ja.TEXTURE_2D, h, d, d, e, f);
                a.generateMipmaps = !1
            } else Ja.texImage2D(Ja.TEXTURE_2D, 0, d, d, e, a.image);
            a.generateMipmaps && c && Ja.generateMipmap(Ja.TEXTURE_2D), a.needsUpdate = !1, a.onUpdate && a.onUpdate()
        }, this.setTexture = function(a, b) {
            Ja.activeTexture(Ja.TEXTURE0 + b), a.needsUpdate ? Ka.uploadTexture(a) : Ja.bindTexture(Ja.TEXTURE_2D, a.__webglTexture)
        }, this.setRenderTarget = function(a) {
            var b = a instanceof THREE.WebGLRenderTargetCube;
            if (a && void 0 === a.__webglFramebuffer) {
                void 0 === a.depthBuffer && (a.depthBuffer = !0), void 0 === a.stencilBuffer && (a.stencilBuffer = !0), a.addEventListener("dispose", Ob), a.__webglTexture = Ja.createTexture(), Ka.info.memory.textures++;
                var c = THREE.Math.isPowerOfTwo(a.width) && THREE.Math.isPowerOfTwo(a.height),
                    d = la(a.format),
                    e = la(a.type);
                if (b) {
                    a.__webglFramebuffer = [], a.__webglRenderbuffer = [], Ja.bindTexture(Ja.TEXTURE_CUBE_MAP, a.__webglTexture), da(Ja.TEXTURE_CUBE_MAP, a, c);
                    for (var f = 0; 6 > f; f++) a.__webglFramebuffer[f] = Ja.createFramebuffer(), a.__webglRenderbuffer[f] = Ja.createRenderbuffer(), Ja.texImage2D(Ja.TEXTURE_CUBE_MAP_POSITIVE_X + f, 0, d, a.width, a.height, 0, d, e, null), ha(a.__webglFramebuffer[f], a, Ja.TEXTURE_CUBE_MAP_POSITIVE_X + f), ia(a.__webglRenderbuffer[f], a);
                    c && Ja.generateMipmap(Ja.TEXTURE_CUBE_MAP)
                } else a.__webglFramebuffer = Ja.createFramebuffer(), a.__webglRenderbuffer = a.shareDepthFrom ? a.shareDepthFrom.__webglRenderbuffer : Ja.createRenderbuffer(), Ja.bindTexture(Ja.TEXTURE_2D, a.__webglTexture), da(Ja.TEXTURE_2D, a, c), Ja.texImage2D(Ja.TEXTURE_2D, 0, d, a.width, a.height, 0, d, e, null), ha(a.__webglFramebuffer, a, Ja.TEXTURE_2D), a.shareDepthFrom ? a.depthBuffer && !a.stencilBuffer ? Ja.framebufferRenderbuffer(Ja.FRAMEBUFFER, Ja.DEPTH_ATTACHMENT, Ja.RENDERBUFFER, a.__webglRenderbuffer) : a.depthBuffer && a.stencilBuffer && Ja.framebufferRenderbuffer(Ja.FRAMEBUFFER, Ja.DEPTH_STENCIL_ATTACHMENT, Ja.RENDERBUFFER, a.__webglRenderbuffer) : ia(a.__webglRenderbuffer, a), c && Ja.generateMipmap(Ja.TEXTURE_2D);
                b ? Ja.bindTexture(Ja.TEXTURE_CUBE_MAP, null) : Ja.bindTexture(Ja.TEXTURE_2D, null), Ja.bindRenderbuffer(Ja.RENDERBUFFER, null), Ja.bindFramebuffer(Ja.FRAMEBUFFER, null)
            }
            var g, h, i, j, k;
            a ? (g = b ? a.__webglFramebuffer[a.activeCubeFace] : a.__webglFramebuffer, h = a.width, i = a.height, j = 0, k = 0) : (g = null, h = eb, i = fb, j = cb, k = db), g !== Na && (Ja.bindFramebuffer(Ja.FRAMEBUFFER, g), Ja.viewport(j, k, h, i), Na = g), gb = h, hb = i
        }, this.initMaterial = function() {
            console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")
        }, this.addPrePlugin = function() {
            console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")
        }, this.addPostPlugin = function() {
            console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")
        }, this.updateShadowMap = function() {
            console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")
        }
    }, THREE.WebGLRenderTarget = function(a, b, c) {
        this.width = a, this.height = b, c = c || {}, this.wrapS = void 0 !== c.wrapS ? c.wrapS : THREE.ClampToEdgeWrapping, this.wrapT = void 0 !== c.wrapT ? c.wrapT : THREE.ClampToEdgeWrapping, this.magFilter = void 0 !== c.magFilter ? c.magFilter : THREE.LinearFilter, this.minFilter = void 0 !== c.minFilter ? c.minFilter : THREE.LinearMipMapLinearFilter, this.anisotropy = void 0 !== c.anisotropy ? c.anisotropy : 1, this.offset = new THREE.Vector2(0, 0), this.repeat = new THREE.Vector2(1, 1), this.format = void 0 !== c.format ? c.format : THREE.RGBAFormat, this.type = void 0 !== c.type ? c.type : THREE.UnsignedByteType, this.depthBuffer = void 0 !== c.depthBuffer ? c.depthBuffer : !0, this.stencilBuffer = void 0 !== c.stencilBuffer ? c.stencilBuffer : !0, this.generateMipmaps = !0, this.shareDepthFrom = null
    }, THREE.WebGLRenderTarget.prototype = {
        constructor: THREE.WebGLRenderTarget,
        setSize: function(a, b) {
            this.width = a, this.height = b
        },
        clone: function() {
            var a = new THREE.WebGLRenderTarget(this.width, this.height);
            return a.wrapS = this.wrapS, a.wrapT = this.wrapT, a.magFilter = this.magFilter, a.minFilter = this.minFilter, a.anisotropy = this.anisotropy, a.offset.copy(this.offset), a.repeat.copy(this.repeat), a.format = this.format, a.type = this.type, a.depthBuffer = this.depthBuffer, a.stencilBuffer = this.stencilBuffer, a.generateMipmaps = this.generateMipmaps, a.shareDepthFrom = this.shareDepthFrom, a
        },
        dispose: function() {
            this.dispatchEvent({
                type: "dispose"
            })
        }
    }, THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype), THREE.WebGLRenderTargetCube = function(a, b, c) {
        THREE.WebGLRenderTarget.call(this, a, b, c), this.activeCubeFace = 0
    }, THREE.WebGLRenderTargetCube.prototype = Object.create(THREE.WebGLRenderTarget.prototype), THREE.WebGLRenderTargetCube.prototype.constructor = THREE.WebGLRenderTargetCube, THREE.WebGLExtensions = function(a) {
        var b = {};
        this.get = function(c) {
            if (void 0 !== b[c]) return b[c];
            var d;
            switch (c) {
                case "EXT_texture_filter_anisotropic":
                    d = a.getExtension("EXT_texture_filter_anisotropic") || a.getExtension("MOZ_EXT_texture_filter_anisotropic") || a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
                    break;
                case "WEBGL_compressed_texture_s3tc":
                    d = a.getExtension("WEBGL_compressed_texture_s3tc") || a.getExtension("MOZ_WEBGL_compressed_texture_s3tc") || a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
                    break;
                case "WEBGL_compressed_texture_pvrtc":
                    d = a.getExtension("WEBGL_compressed_texture_pvrtc") || a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
                    break;
                default:
                    d = a.getExtension(c)
            }
            return null === d && console.log("THREE.WebGLRenderer: " + c + " extension not supported."), b[c] = d, d
        }
    }, THREE.WebGLProgram = function() {
        var a = 0,
            b = function(a) {
                var b, c, d = [];
                for (var e in a) b = a[e], b !== !1 && (c = "#define " + e + " " + b, d.push(c));
                return d.join("\n")
            },
            c = function(a, b, c) {
                for (var d = {}, e = 0, f = c.length; f > e; e++) {
                    var g = c[e];
                    d[g] = a.getUniformLocation(b, g)
                }
                return d
            },
            d = function(a, b, c) {
                for (var d = {}, e = 0, f = c.length; f > e; e++) {
                    var g = c[e];
                    d[g] = a.getAttribLocation(b, g)
                }
                return d
            };
        return function(e, f, g, h) {
            var i = e,
                j = i.context,
                k = g.defines,
                l = g.__webglShader.uniforms,
                m = g.attributes,
                n = g.__webglShader.vertexShader,
                o = g.__webglShader.fragmentShader,
                p = g.index0AttributeName;
            void 0 === p && h.morphTargets === !0 && (p = "position");
            var q = "SHADOWMAP_TYPE_BASIC";
            h.shadowMapType === THREE.PCFShadowMap ? q = "SHADOWMAP_TYPE_PCF" : h.shadowMapType === THREE.PCFSoftShadowMap && (q = "SHADOWMAP_TYPE_PCF_SOFT");
            var r = "ENVMAP_TYPE_CUBE",
                s = "ENVMAP_MODE_REFLECTION",
                t = "ENVMAP_BLENDING_MULTIPLY";
            if (h.envMap) {
                switch (g.envMap.mapping) {
                    case THREE.CubeReflectionMapping:
                    case THREE.CubeRefractionMapping:
                        r = "ENVMAP_TYPE_CUBE";
                        break;
                    case THREE.EquirectangularReflectionMapping:
                    case THREE.EquirectangularRefractionMapping:
                        r = "ENVMAP_TYPE_EQUIREC";
                        break;
                    case THREE.SphericalReflectionMapping:
                        r = "ENVMAP_TYPE_SPHERE"
                }
                switch (g.envMap.mapping) {
                    case THREE.CubeRefractionMapping:
                    case THREE.EquirectangularRefractionMapping:
                        s = "ENVMAP_MODE_REFRACTION"
                }
                switch (g.combine) {
                    case THREE.MultiplyOperation:
                        t = "ENVMAP_BLENDING_MULTIPLY";
                        break;
                    case THREE.MixOperation:
                        t = "ENVMAP_BLENDING_MIX";
                        break;
                    case THREE.AddOperation:
                        t = "ENVMAP_BLENDING_ADD"
                }
            }
            var u, v, w = b(k),
                x = j.createProgram();
            g instanceof THREE.RawShaderMaterial ? (u = "", v = "") : (u = ["precision " + h.precision + " float;", "precision " + h.precision + " int;", w, h.supportsVertexTextures ? "#define VERTEX_TEXTURES" : "", i.gammaInput ? "#define GAMMA_INPUT" : "", i.gammaOutput ? "#define GAMMA_OUTPUT" : "", "#define MAX_DIR_LIGHTS " + h.maxDirLights, "#define MAX_POINT_LIGHTS " + h.maxPointLights, "#define MAX_SPOT_LIGHTS " + h.maxSpotLights, "#define MAX_HEMI_LIGHTS " + h.maxHemiLights, "#define MAX_SHADOWS " + h.maxShadows, "#define MAX_BONES " + h.maxBones, h.map ? "#define USE_MAP" : "", h.envMap ? "#define USE_ENVMAP" : "", h.envMap ? "#define " + s : "", h.lightMap ? "#define USE_LIGHTMAP" : "", h.bumpMap ? "#define USE_BUMPMAP" : "", h.normalMap ? "#define USE_NORMALMAP" : "", h.specularMap ? "#define USE_SPECULARMAP" : "", h.alphaMap ? "#define USE_ALPHAMAP" : "", h.vertexColors ? "#define USE_COLOR" : "", h.skinning ? "#define USE_SKINNING" : "", h.useVertexTexture ? "#define BONE_TEXTURE" : "", h.morphTargets ? "#define USE_MORPHTARGETS" : "", h.morphNormals ? "#define USE_MORPHNORMALS" : "", h.wrapAround ? "#define WRAP_AROUND" : "", h.doubleSided ? "#define DOUBLE_SIDED" : "", h.flipSided ? "#define FLIP_SIDED" : "", h.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", h.shadowMapEnabled ? "#define " + q : "", h.shadowMapDebug ? "#define SHADOWMAP_DEBUG" : "", h.shadowMapCascade ? "#define SHADOWMAP_CASCADE" : "", h.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "", h.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", "uniform mat4 modelMatrix;", "uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform mat4 viewMatrix;", "uniform mat3 normalMatrix;", "uniform vec3 cameraPosition;", "attribute vec3 position;", "attribute vec3 normal;", "attribute vec2 uv;", "attribute vec2 uv2;", "#ifdef USE_COLOR", "	attribute vec3 color;", "#endif", "#ifdef USE_MORPHTARGETS", "	attribute vec3 morphTarget0;", "	attribute vec3 morphTarget1;", "	attribute vec3 morphTarget2;", "	attribute vec3 morphTarget3;", "	#ifdef USE_MORPHNORMALS", "		attribute vec3 morphNormal0;", "		attribute vec3 morphNormal1;", "		attribute vec3 morphNormal2;", "		attribute vec3 morphNormal3;", "	#else", "		attribute vec3 morphTarget4;", "		attribute vec3 morphTarget5;", "		attribute vec3 morphTarget6;", "		attribute vec3 morphTarget7;", "	#endif", "#endif", "#ifdef USE_SKINNING", "	attribute vec4 skinIndex;", "	attribute vec4 skinWeight;", "#endif", ""].join("\n"), v = ["precision " + h.precision + " float;", "precision " + h.precision + " int;", h.bumpMap || h.normalMap ? "#extension GL_OES_standard_derivatives : enable" : "", w, "#define MAX_DIR_LIGHTS " + h.maxDirLights, "#define MAX_POINT_LIGHTS " + h.maxPointLights, "#define MAX_SPOT_LIGHTS " + h.maxSpotLights, "#define MAX_HEMI_LIGHTS " + h.maxHemiLights, "#define MAX_SHADOWS " + h.maxShadows, h.alphaTest ? "#define ALPHATEST " + h.alphaTest : "", i.gammaInput ? "#define GAMMA_INPUT" : "", i.gammaOutput ? "#define GAMMA_OUTPUT" : "", h.useFog && h.fog ? "#define USE_FOG" : "", h.useFog && h.fogExp ? "#define FOG_EXP2" : "", h.map ? "#define USE_MAP" : "", h.envMap ? "#define USE_ENVMAP" : "", h.envMap ? "#define " + r : "", h.envMap ? "#define " + s : "", h.envMap ? "#define " + t : "", h.lightMap ? "#define USE_LIGHTMAP" : "", h.bumpMap ? "#define USE_BUMPMAP" : "", h.normalMap ? "#define USE_NORMALMAP" : "", h.specularMap ? "#define USE_SPECULARMAP" : "", h.alphaMap ? "#define USE_ALPHAMAP" : "", h.vertexColors ? "#define USE_COLOR" : "", h.metal ? "#define METAL" : "", h.wrapAround ? "#define WRAP_AROUND" : "", h.doubleSided ? "#define DOUBLE_SIDED" : "", h.flipSided ? "#define FLIP_SIDED" : "", h.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", h.shadowMapEnabled ? "#define " + q : "", h.shadowMapDebug ? "#define SHADOWMAP_DEBUG" : "", h.shadowMapCascade ? "#define SHADOWMAP_CASCADE" : "", h.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", "uniform mat4 viewMatrix;", "uniform vec3 cameraPosition;", ""].join("\n"));
            var y = new THREE.WebGLShader(j, j.VERTEX_SHADER, u + n),
                z = new THREE.WebGLShader(j, j.FRAGMENT_SHADER, v + o);
            j.attachShader(x, y), j.attachShader(x, z), void 0 !== p && j.bindAttribLocation(x, 0, p), j.linkProgram(x), j.getProgramParameter(x, j.LINK_STATUS) === !1 && (console.error("THREE.WebGLProgram: Could not initialise shader."), console.error("gl.VALIDATE_STATUS", j.getProgramParameter(x, j.VALIDATE_STATUS)), console.error("gl.getError()", j.getError())), "" !== j.getProgramInfoLog(x) && console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()", j.getProgramInfoLog(x)), j.deleteShader(y), j.deleteShader(z);
            var A = ["viewMatrix", "modelViewMatrix", "projectionMatrix", "normalMatrix", "modelMatrix", "cameraPosition", "morphTargetInfluences", "bindMatrix", "bindMatrixInverse"];
            h.useVertexTexture ? (A.push("boneTexture"), A.push("boneTextureWidth"), A.push("boneTextureHeight")) : A.push("boneGlobalMatrices"), h.logarithmicDepthBuffer && A.push("logDepthBufFC");
            for (var B in l) A.push(B);
            this.uniforms = c(j, x, A), A = ["position", "normal", "uv", "uv2", "tangent", "color", "skinIndex", "skinWeight", "lineDistance"];
            for (var C = 0; C < h.maxMorphTargets; C++) A.push("morphTarget" + C);
            for (var C = 0; C < h.maxMorphNormals; C++) A.push("morphNormal" + C);
            for (var D in m) A.push(D);
            return this.attributes = d(j, x, A), this.attributesKeys = Object.keys(this.attributes), this.id = a++, this.code = f, this.usedTimes = 1, this.program = x, this.vertexShader = y, this.fragmentShader = z, this
        }
    }(), THREE.WebGLShader = function() {
        var a = function(a) {
            for (var b = a.split("\n"), c = 0; c < b.length; c++) b[c] = c + 1 + ": " + b[c];
            return b.join("\n")
        };
        return function(b, c, d) {
            var e = b.createShader(c);
            return b.shaderSource(e, d), b.compileShader(e), b.getShaderParameter(e, b.COMPILE_STATUS) === !1 && console.error("THREE.WebGLShader: Shader couldn't compile."), "" !== b.getShaderInfoLog(e) && (console.warn("THREE.WebGLShader: gl.getShaderInfoLog()", b.getShaderInfoLog(e)), console.warn(a(d))), e
        }
    }(), THREE.LensFlarePlugin = function(a, b) {
        function c(b) {
            var c = l.createProgram(),
                d = l.createShader(l.FRAGMENT_SHADER),
                e = l.createShader(l.VERTEX_SHADER),
                f = "precision " + a.getPrecision() + " float;\n";
            return l.shaderSource(d, f + b.fragmentShader), l.shaderSource(e, f + b.vertexShader), l.compileShader(d), l.compileShader(e), l.attachShader(c, d), l.attachShader(c, e), l.linkProgram(c), c
        }
        var d, e, f, g, h, i, j, k, l = a.context,
            m = function() {
                var a = new Float32Array([-1, -1, 0, 0, 1, -1, 1, 0, 1, 1, 1, 1, -1, 1, 0, 1]),
                    b = new Uint16Array([0, 1, 2, 0, 2, 3]);
                d = l.createBuffer(), e = l.createBuffer(), l.bindBuffer(l.ARRAY_BUFFER, d), l.bufferData(l.ARRAY_BUFFER, a, l.STATIC_DRAW), l.bindBuffer(l.ELEMENT_ARRAY_BUFFER, e), l.bufferData(l.ELEMENT_ARRAY_BUFFER, b, l.STATIC_DRAW), j = l.createTexture(), k = l.createTexture(), l.bindTexture(l.TEXTURE_2D, j), l.texImage2D(l.TEXTURE_2D, 0, l.RGB, 16, 16, 0, l.RGB, l.UNSIGNED_BYTE, null), l.texParameteri(l.TEXTURE_2D, l.TEXTURE_WRAP_S, l.CLAMP_TO_EDGE), l.texParameteri(l.TEXTURE_2D, l.TEXTURE_WRAP_T, l.CLAMP_TO_EDGE), l.texParameteri(l.TEXTURE_2D, l.TEXTURE_MAG_FILTER, l.NEAREST), l.texParameteri(l.TEXTURE_2D, l.TEXTURE_MIN_FILTER, l.NEAREST), l.bindTexture(l.TEXTURE_2D, k), l.texImage2D(l.TEXTURE_2D, 0, l.RGBA, 16, 16, 0, l.RGBA, l.UNSIGNED_BYTE, null), l.texParameteri(l.TEXTURE_2D, l.TEXTURE_WRAP_S, l.CLAMP_TO_EDGE), l.texParameteri(l.TEXTURE_2D, l.TEXTURE_WRAP_T, l.CLAMP_TO_EDGE), l.texParameteri(l.TEXTURE_2D, l.TEXTURE_MAG_FILTER, l.NEAREST), l.texParameteri(l.TEXTURE_2D, l.TEXTURE_MIN_FILTER, l.NEAREST), i = l.getParameter(l.MAX_VERTEX_TEXTURE_IMAGE_UNITS) > 0;
                var m;
                m = i ? {
                    vertexShader: ["uniform lowp int renderType;", "uniform vec3 screenPosition;", "uniform vec2 scale;", "uniform float rotation;", "uniform sampler2D occlusionMap;", "attribute vec2 position;", "attribute vec2 uv;", "varying vec2 vUV;", "varying float vVisibility;", "void main() {", "vUV = uv;", "vec2 pos = position;", "if( renderType == 2 ) {", "vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );", "visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );", "visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );", "vVisibility =        visibility.r / 9.0;", "vVisibility *= 1.0 - visibility.g / 9.0;", "vVisibility *=       visibility.b / 9.0;", "vVisibility *= 1.0 - visibility.a / 9.0;", "pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;", "pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;", "}", "gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );", "}"].join("\n"),
                    fragmentShader: ["uniform lowp int renderType;", "uniform sampler2D map;", "uniform float opacity;", "uniform vec3 color;", "varying vec2 vUV;", "varying float vVisibility;", "void main() {", "if( renderType == 0 ) {", "gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );", "} else if( renderType == 1 ) {", "gl_FragColor = texture2D( map, vUV );", "} else {", "vec4 texture = texture2D( map, vUV );", "texture.a *= opacity * vVisibility;", "gl_FragColor = texture;", "gl_FragColor.rgb *= color;", "}", "}"].join("\n")
                } : {
                    vertexShader: ["uniform lowp int renderType;", "uniform vec3 screenPosition;", "uniform vec2 scale;", "uniform float rotation;", "attribute vec2 position;", "attribute vec2 uv;", "varying vec2 vUV;", "void main() {", "vUV = uv;", "vec2 pos = position;", "if( renderType == 2 ) {", "pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;", "pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;", "}", "gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );", "}"].join("\n"),
                    fragmentShader: ["precision mediump float;", "uniform lowp int renderType;", "uniform sampler2D map;", "uniform sampler2D occlusionMap;", "uniform float opacity;", "uniform vec3 color;", "varying vec2 vUV;", "void main() {", "if( renderType == 0 ) {", "gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );", "} else if( renderType == 1 ) {", "gl_FragColor = texture2D( map, vUV );", "} else {", "float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;", "visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;", "visibility = ( 1.0 - visibility / 4.0 );", "vec4 texture = texture2D( map, vUV );", "texture.a *= opacity * visibility;", "gl_FragColor = texture;", "gl_FragColor.rgb *= color;", "}", "}"].join("\n")
                }, f = c(m), g = {
                    vertex: l.getAttribLocation(f, "position"),
                    uv: l.getAttribLocation(f, "uv")
                }, h = {
                    renderType: l.getUniformLocation(f, "renderType"),
                    map: l.getUniformLocation(f, "map"),
                    occlusionMap: l.getUniformLocation(f, "occlusionMap"),
                    opacity: l.getUniformLocation(f, "opacity"),
                    color: l.getUniformLocation(f, "color"),
                    scale: l.getUniformLocation(f, "scale"),
                    rotation: l.getUniformLocation(f, "rotation"),
                    screenPosition: l.getUniformLocation(f, "screenPosition")
                }
            };
        this.render = function(c, n, o, p) {
            if (0 !== b.length) {
                var q = new THREE.Vector3,
                    r = p / o,
                    s = .5 * o,
                    t = .5 * p,
                    u = 16 / p,
                    v = new THREE.Vector2(u * r, u),
                    w = new THREE.Vector3(1, 1, 0),
                    x = new THREE.Vector2(1, 1);
                void 0 === f && m(), l.useProgram(f), l.enableVertexAttribArray(g.vertex), l.enableVertexAttribArray(g.uv), l.uniform1i(h.occlusionMap, 0), l.uniform1i(h.map, 1), l.bindBuffer(l.ARRAY_BUFFER, d), l.vertexAttribPointer(g.vertex, 2, l.FLOAT, !1, 16, 0), l.vertexAttribPointer(g.uv, 2, l.FLOAT, !1, 16, 8), l.bindBuffer(l.ELEMENT_ARRAY_BUFFER, e), l.disable(l.CULL_FACE), l.depthMask(!1);
                for (var y = 0, z = b.length; z > y; y++) {
                    u = 16 / p, v.set(u * r, u);
                    var A = b[y];
                    if (q.set(A.matrixWorld.elements[12], A.matrixWorld.elements[13], A.matrixWorld.elements[14]), q.applyMatrix4(n.matrixWorldInverse), q.applyProjection(n.projectionMatrix), w.copy(q), x.x = w.x * s + s, x.y = w.y * t + t, i || x.x > 0 && x.x < o && x.y > 0 && x.y < p) {
                        l.activeTexture(l.TEXTURE1), l.bindTexture(l.TEXTURE_2D, j), l.copyTexImage2D(l.TEXTURE_2D, 0, l.RGB, x.x - 8, x.y - 8, 16, 16, 0), l.uniform1i(h.renderType, 0), l.uniform2f(h.scale, v.x, v.y), l.uniform3f(h.screenPosition, w.x, w.y, w.z), l.disable(l.BLEND), l.enable(l.DEPTH_TEST), l.drawElements(l.TRIANGLES, 6, l.UNSIGNED_SHORT, 0), l.activeTexture(l.TEXTURE0), l.bindTexture(l.TEXTURE_2D, k), l.copyTexImage2D(l.TEXTURE_2D, 0, l.RGBA, x.x - 8, x.y - 8, 16, 16, 0), l.uniform1i(h.renderType, 1), l.disable(l.DEPTH_TEST), l.activeTexture(l.TEXTURE1), l.bindTexture(l.TEXTURE_2D, j), l.drawElements(l.TRIANGLES, 6, l.UNSIGNED_SHORT, 0), A.positionScreen.copy(w), A.customUpdateCallback ? A.customUpdateCallback(A) : A.updateLensFlares(), l.uniform1i(h.renderType, 2), l.enable(l.BLEND);
                        for (var B = 0, C = A.lensFlares.length; C > B; B++) {
                            var D = A.lensFlares[B];
                            D.opacity > .001 && D.scale > .001 && (w.x = D.x, w.y = D.y, w.z = D.z, u = D.size * D.scale / p, v.x = u * r, v.y = u, l.uniform3f(h.screenPosition, w.x, w.y, w.z), l.uniform2f(h.scale, v.x, v.y), l.uniform1f(h.rotation, D.rotation), l.uniform1f(h.opacity, D.opacity), l.uniform3f(h.color, D.color.r, D.color.g, D.color.b), a.setBlending(D.blending, D.blendEquation, D.blendSrc, D.blendDst), a.setTexture(D.texture, 1), l.drawElements(l.TRIANGLES, 6, l.UNSIGNED_SHORT, 0))
                        }
                    }
                }
                l.enable(l.CULL_FACE), l.enable(l.DEPTH_TEST), l.depthMask(!0), a.resetGLState()
            }
        }
    }, THREE.ShadowMapPlugin = function(a, b, c, d) {
        function e(a, b, d) {
            if (b.visible) {
                var f = c[b.id];
                if (f && b.castShadow && (b.frustumCulled === !1 || o.intersectsObject(b) === !0))
                    for (var g = 0, h = f.length; h > g; g++) {
                        var i = f[g];
                        b._modelViewMatrix.multiplyMatrices(d.matrixWorldInverse, b.matrixWorld), t.push(i)
                    }
                for (var g = 0, h = b.children.length; h > g; g++) e(a, b.children[g], d)
            }
        }

        function f(a, b) {
            var c = new THREE.DirectionalLight;
            c.isVirtual = !0, c.onlyShadow = !0, c.castShadow = !0, c.shadowCameraNear = a.shadowCameraNear, c.shadowCameraFar = a.shadowCameraFar, c.shadowCameraLeft = a.shadowCameraLeft, c.shadowCameraRight = a.shadowCameraRight, c.shadowCameraBottom = a.shadowCameraBottom, c.shadowCameraTop = a.shadowCameraTop, c.shadowCameraVisible = a.shadowCameraVisible, c.shadowDarkness = a.shadowDarkness, c.shadowBias = a.shadowCascadeBias[b], c.shadowMapWidth = a.shadowCascadeWidth[b], c.shadowMapHeight = a.shadowCascadeHeight[b], c.pointsWorld = [], c.pointsFrustum = [];
            for (var d = c.pointsWorld, e = c.pointsFrustum, f = 0; 8 > f; f++) d[f] = new THREE.Vector3, e[f] = new THREE.Vector3;
            var g = a.shadowCascadeNearZ[b],
                h = a.shadowCascadeFarZ[b];
            return e[0].set(-1, -1, g), e[1].set(1, -1, g), e[2].set(-1, 1, g), e[3].set(1, 1, g), e[4].set(-1, -1, h), e[5].set(1, -1, h), e[6].set(-1, 1, h), e[7].set(1, 1, h), c
        }

        function g(a, b) {
            var c = a.shadowCascadeArray[b];
            c.position.copy(a.position), c.target.position.copy(a.target.position), c.lookAt(c.target), c.shadowCameraVisible = a.shadowCameraVisible, c.shadowDarkness = a.shadowDarkness, c.shadowBias = a.shadowCascadeBias[b];
            var d = a.shadowCascadeNearZ[b],
                e = a.shadowCascadeFarZ[b],
                f = c.pointsFrustum;
            f[0].z = d, f[1].z = d, f[2].z = d, f[3].z = d, f[4].z = e, f[5].z = e, f[6].z = e, f[7].z = e
        }

        function h(a, b) {
            var c = b.shadowCamera,
                d = b.pointsFrustum,
                e = b.pointsWorld;
            q.set(1 / 0, 1 / 0, 1 / 0), r.set(-(1 / 0), -(1 / 0), -(1 / 0));
            for (var f = 0; 8 > f; f++) {
                var g = e[f];
                g.copy(d[f]), g.unproject(a), g.applyMatrix4(c.matrixWorldInverse), g.x < q.x && (q.x = g.x), g.x > r.x && (r.x = g.x), g.y < q.y && (q.y = g.y), g.y > r.y && (r.y = g.y), g.z < q.z && (q.z = g.z), g.z > r.z && (r.z = g.z)
            }
            c.left = q.x, c.right = r.x, c.top = r.y, c.bottom = q.y, c.updateProjectionMatrix()
        }

        function i(a) {
            return a.material instanceof THREE.MeshFaceMaterial ? a.material.materials[0] : a.material
        }
        var j, k, l, m, n = a.context,
            o = new THREE.Frustum,
            p = new THREE.Matrix4,
            q = new THREE.Vector3,
            r = new THREE.Vector3,
            s = new THREE.Vector3,
            t = [],
            u = THREE.ShaderLib.depthRGBA,
            v = THREE.UniformsUtils.clone(u.uniforms);
        j = new THREE.ShaderMaterial({
            uniforms: v,
            vertexShader: u.vertexShader,
            fragmentShader: u.fragmentShader
        }), k = new THREE.ShaderMaterial({
            uniforms: v,
            vertexShader: u.vertexShader,
            fragmentShader: u.fragmentShader,
            morphTargets: !0
        }), l = new THREE.ShaderMaterial({
            uniforms: v,
            vertexShader: u.vertexShader,
            fragmentShader: u.fragmentShader,
            skinning: !0
        }), m = new THREE.ShaderMaterial({
            uniforms: v,
            vertexShader: u.vertexShader,
            fragmentShader: u.fragmentShader,
            morphTargets: !0,
            skinning: !0
        }), j._shadowPass = !0, k._shadowPass = !0, l._shadowPass = !0, m._shadowPass = !0, this.render = function(c, q) {
            if (a.shadowMapEnabled !== !1) {
                var r, u, v, w, x, y, z, A, B, C, D, E, F, G = [],
                    H = 0,
                    I = null;
                for (n.clearColor(1, 1, 1, 1), n.disable(n.BLEND), n.enable(n.CULL_FACE), n.frontFace(n.CCW), n.cullFace(a.shadowMapCullFace === THREE.CullFaceFront ? n.FRONT : n.BACK), a.setDepthTest(!0), r = 0, u = b.length; u > r; r++)
                    if (F = b[r], F.castShadow)
                        if (F instanceof THREE.DirectionalLight && F.shadowCascade)
                            for (x = 0; x < F.shadowCascadeCount; x++) {
                                var J;
                                if (F.shadowCascadeArray[x]) J = F.shadowCascadeArray[x];
                                else {
                                    J = f(F, x), J.originalCamera = q;
                                    var K = new THREE.Gyroscope;
                                    K.position.copy(F.shadowCascadeOffset), K.add(J), K.add(J.target), q.add(K), F.shadowCascadeArray[x] = J, console.log("Created virtualLight", J)
                                }
                                g(F, x), G[H] = J, H++
                            } else G[H] = F, H++;
                for (r = 0, u = G.length; u > r; r++) {
                    if (F = G[r], !F.shadowMap) {
                        var L = THREE.LinearFilter;
                        a.shadowMapType === THREE.PCFSoftShadowMap && (L = THREE.NearestFilter);
                        var M = {
                            minFilter: L,
                            magFilter: L,
                            format: THREE.RGBAFormat
                        };
                        F.shadowMap = new THREE.WebGLRenderTarget(F.shadowMapWidth, F.shadowMapHeight, M), F.shadowMapSize = new THREE.Vector2(F.shadowMapWidth, F.shadowMapHeight), F.shadowMatrix = new THREE.Matrix4
                    }
                    if (!F.shadowCamera) {
                        if (F instanceof THREE.SpotLight) F.shadowCamera = new THREE.PerspectiveCamera(F.shadowCameraFov, F.shadowMapWidth / F.shadowMapHeight, F.shadowCameraNear, F.shadowCameraFar);
                        else {
                            if (!(F instanceof THREE.DirectionalLight)) {
                                console.error("Unsupported light type for shadow");
                                continue
                            }
                            F.shadowCamera = new THREE.OrthographicCamera(F.shadowCameraLeft, F.shadowCameraRight, F.shadowCameraTop, F.shadowCameraBottom, F.shadowCameraNear, F.shadowCameraFar)
                        }
                        c.add(F.shadowCamera), c.autoUpdate === !0 && c.updateMatrixWorld()
                    }
                    F.shadowCameraVisible && !F.cameraHelper && (F.cameraHelper = new THREE.CameraHelper(F.shadowCamera), c.add(F.cameraHelper)), F.isVirtual && J.originalCamera == q && h(q, F), y = F.shadowMap, z = F.shadowMatrix, A = F.shadowCamera, A.position.setFromMatrixPosition(F.matrixWorld), s.setFromMatrixPosition(F.target.matrixWorld), A.lookAt(s), A.updateMatrixWorld(), A.matrixWorldInverse.getInverse(A.matrixWorld), F.cameraHelper && (F.cameraHelper.visible = F.shadowCameraVisible), F.shadowCameraVisible && F.cameraHelper.update(), z.set(.5, 0, 0, .5, 0, .5, 0, .5, 0, 0, .5, .5, 0, 0, 0, 1), z.multiply(A.projectionMatrix), z.multiply(A.matrixWorldInverse), p.multiplyMatrices(A.projectionMatrix, A.matrixWorldInverse), o.setFromMatrix(p), a.setRenderTarget(y), a.clear(), t.length = 0, e(c, c, A);
                    var N, O, P;
                    for (v = 0, w = t.length; w > v; v++) D = t[v], E = D.object, B = D.buffer, N = i(E), O = void 0 !== E.geometry.morphTargets && E.geometry.morphTargets.length > 0 && N.morphTargets, P = E instanceof THREE.SkinnedMesh && N.skinning, C = E.customDepthMaterial ? E.customDepthMaterial : P ? O ? m : l : O ? k : j, a.setMaterialFaces(N), B instanceof THREE.BufferGeometry ? a.renderBufferDirect(A, b, I, C, B, E) : a.renderBuffer(A, b, I, C, B, E);
                    for (v = 0, w = d.length; w > v; v++) D = d[v], E = D.object, E.visible && E.castShadow && (E._modelViewMatrix.multiplyMatrices(A.matrixWorldInverse, E.matrixWorld), a.renderImmediateObject(A, b, I, j, E))
                }
                var Q = a.getClearColor(),
                    R = a.getClearAlpha();
                n.clearColor(Q.r, Q.g, Q.b, R), n.enable(n.BLEND), a.shadowMapCullFace === THREE.CullFaceFront && n.cullFace(n.BACK), a.resetGLState()
            }
        }
    }, THREE.SpritePlugin = function(a, b) {
        function c() {
            var b = k.createProgram(),
                c = k.createShader(k.VERTEX_SHADER),
                d = k.createShader(k.FRAGMENT_SHADER);
            return k.shaderSource(c, ["precision " + a.getPrecision() + " float;", "uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform float rotation;", "uniform vec2 scale;", "uniform vec2 uvOffset;", "uniform vec2 uvScale;", "attribute vec2 position;", "attribute vec2 uv;", "varying vec2 vUV;", "void main() {", "vUV = uvOffset + uv * uvScale;", "vec2 alignedPosition = position * scale;", "vec2 rotatedPosition;", "rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;", "rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;", "vec4 finalPosition;", "finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );", "finalPosition.xy += rotatedPosition;", "finalPosition = projectionMatrix * finalPosition;", "gl_Position = finalPosition;", "}"].join("\n")), k.shaderSource(d, ["precision " + a.getPrecision() + " float;", "uniform vec3 color;", "uniform sampler2D map;", "uniform float opacity;", "uniform int fogType;", "uniform vec3 fogColor;", "uniform float fogDensity;", "uniform float fogNear;", "uniform float fogFar;", "uniform float alphaTest;", "varying vec2 vUV;", "void main() {", "vec4 texture = texture2D( map, vUV );", "if ( texture.a < alphaTest ) discard;", "gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );", "if ( fogType > 0 ) {", "float depth = gl_FragCoord.z / gl_FragCoord.w;", "float fogFactor = 0.0;", "if ( fogType == 1 ) {", "fogFactor = smoothstep( fogNear, fogFar, depth );", "} else {", "const float LOG2 = 1.442695;", "float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );", "fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );", "}", "gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );", "}", "}"].join("\n")), k.compileShader(c), k.compileShader(d), k.attachShader(b, c), k.attachShader(b, d), k.linkProgram(b), b
        }

        function d(a, b) {
            return a.z !== b.z ? b.z - a.z : b.id - a.id
        }
        var e, f, g, h, i, j, k = a.context,
            l = new THREE.Vector3,
            m = new THREE.Quaternion,
            n = new THREE.Vector3,
            o = function() {
                var a = new Float32Array([-.5, -.5, 0, 0, .5, -.5, 1, 0, .5, .5, 1, 1, -.5, .5, 0, 1]),
                    b = new Uint16Array([0, 1, 2, 0, 2, 3]);
                e = k.createBuffer(), f = k.createBuffer(), k.bindBuffer(k.ARRAY_BUFFER, e), k.bufferData(k.ARRAY_BUFFER, a, k.STATIC_DRAW), k.bindBuffer(k.ELEMENT_ARRAY_BUFFER, f), k.bufferData(k.ELEMENT_ARRAY_BUFFER, b, k.STATIC_DRAW), g = c(), h = {
                    position: k.getAttribLocation(g, "position"),
                    uv: k.getAttribLocation(g, "uv")
                }, i = {
                    uvOffset: k.getUniformLocation(g, "uvOffset"),
                    uvScale: k.getUniformLocation(g, "uvScale"),
                    rotation: k.getUniformLocation(g, "rotation"),
                    scale: k.getUniformLocation(g, "scale"),
                    color: k.getUniformLocation(g, "color"),
                    map: k.getUniformLocation(g, "map"),
                    opacity: k.getUniformLocation(g, "opacity"),
                    modelViewMatrix: k.getUniformLocation(g, "modelViewMatrix"),
                    projectionMatrix: k.getUniformLocation(g, "projectionMatrix"),
                    fogType: k.getUniformLocation(g, "fogType"),
                    fogDensity: k.getUniformLocation(g, "fogDensity"),
                    fogNear: k.getUniformLocation(g, "fogNear"),
                    fogFar: k.getUniformLocation(g, "fogFar"),
                    fogColor: k.getUniformLocation(g, "fogColor"),
                    alphaTest: k.getUniformLocation(g, "alphaTest")
                };
                var d = document.createElement("canvas");
                d.width = 8, d.height = 8;
                var l = d.getContext("2d");
                l.fillStyle = "white", l.fillRect(0, 0, 8, 8), j = new THREE.Texture(d), j.needsUpdate = !0
            };
        this.render = function(c, p) {
            if (0 !== b.length) {
                void 0 === g && o(), k.useProgram(g), k.enableVertexAttribArray(h.position), k.enableVertexAttribArray(h.uv), k.disable(k.CULL_FACE), k.enable(k.BLEND), k.bindBuffer(k.ARRAY_BUFFER, e), k.vertexAttribPointer(h.position, 2, k.FLOAT, !1, 16, 0), k.vertexAttribPointer(h.uv, 2, k.FLOAT, !1, 16, 8), k.bindBuffer(k.ELEMENT_ARRAY_BUFFER, f), k.uniformMatrix4fv(i.projectionMatrix, !1, p.projectionMatrix.elements), k.activeTexture(k.TEXTURE0), k.uniform1i(i.map, 0);
                var q = 0,
                    r = 0,
                    s = c.fog;
                s ? (k.uniform3f(i.fogColor, s.color.r, s.color.g, s.color.b), s instanceof THREE.Fog ? (k.uniform1f(i.fogNear, s.near), k.uniform1f(i.fogFar, s.far), k.uniform1i(i.fogType, 1), q = 1, r = 1) : s instanceof THREE.FogExp2 && (k.uniform1f(i.fogDensity, s.density), k.uniform1i(i.fogType, 2), q = 2, r = 2)) : (k.uniform1i(i.fogType, 0), q = 0, r = 0);
                for (var t = 0, u = b.length; u > t; t++) {
                    var v = b[t];
                    v._modelViewMatrix.multiplyMatrices(p.matrixWorldInverse, v.matrixWorld), v.z = -v._modelViewMatrix.elements[14]
                }
                b.sort(d);
                for (var w = [], t = 0, u = b.length; u > t; t++) {
                    var v = b[t],
                        x = v.material;
                    k.uniform1f(i.alphaTest, x.alphaTest), k.uniformMatrix4fv(i.modelViewMatrix, !1, v._modelViewMatrix.elements), v.matrixWorld.decompose(l, m, n), w[0] = n.x, w[1] = n.y;
                    var y = 0;
                    c.fog && x.fog && (y = r), q !== y && (k.uniform1i(i.fogType, y), q = y), null !== x.map ? (k.uniform2f(i.uvOffset, x.map.offset.x, x.map.offset.y), k.uniform2f(i.uvScale, x.map.repeat.x, x.map.repeat.y)) : (k.uniform2f(i.uvOffset, 0, 0), k.uniform2f(i.uvScale, 1, 1)), k.uniform1f(i.opacity, x.opacity), k.uniform3f(i.color, x.color.r, x.color.g, x.color.b), k.uniform1f(i.rotation, x.rotation), k.uniform2fv(i.scale, w), a.setBlending(x.blending, x.blendEquation, x.blendSrc, x.blendDst), a.setDepthTest(x.depthTest), a.setDepthWrite(x.depthWrite), x.map && x.map.image && x.map.image.width ? a.setTexture(x.map, 0) : a.setTexture(j, 0), k.drawElements(k.TRIANGLES, 6, k.UNSIGNED_SHORT, 0)
                }
                k.enable(k.CULL_FACE), a.resetGLState()
            }
        }
    }, THREE.GeometryUtils = {
        merge: function(a, b, c) {
            console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");
            var d;
            b instanceof THREE.Mesh && (b.matrixAutoUpdate && b.updateMatrix(), d = b.matrix, b = b.geometry), a.merge(b, d, c)
        },
        center: function(a) {
            return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."), a.center()
        }
    }, THREE.ImageUtils = {
        crossOrigin: void 0,
        loadTexture: function(a, b, c, d) {
            var e = new THREE.ImageLoader;
            e.crossOrigin = this.crossOrigin;
            var f = new THREE.Texture(void 0, b);
            return e.load(a, function(a) {
                f.image = a, f.needsUpdate = !0, c && c(f)
            }, void 0, function(a) {
                d && d(a)
            }), f.sourceFile = a, f
        },
        loadTextureCube: function(a, b, c, d) {
            var e = [],
                f = new THREE.ImageLoader;
            f.crossOrigin = this.crossOrigin;
            var g = new THREE.CubeTexture(e, b);
            g.flipY = !1;
            for (var h = 0, i = function(b) {
                    f.load(a[b], function(a) {
                        g.images[b] = a, h += 1, 6 === h && (g.needsUpdate = !0, c && c(g))
                    }, void 0, d)
                }, j = 0, k = a.length; k > j; ++j) i(j);
            return g
        },
        loadCompressedTexture: function() {
            console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")
        },
        loadCompressedTextureCube: function() {
            console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")
        },
        getNormalMap: function(a, b) {
            var c = function(a, b) {
                    return [a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]]
                },
                d = function(a, b) {
                    return [a[0] - b[0], a[1] - b[1], a[2] - b[2]]
                },
                e = function(a) {
                    var b = Math.sqrt(a[0] * a[0] + a[1] * a[1] + a[2] * a[2]);
                    return [a[0] / b, a[1] / b, a[2] / b]
                };
            b = 1 | b;
            var f = a.width,
                g = a.height,
                h = document.createElement("canvas");
            h.width = f, h.height = g;
            var i = h.getContext("2d");
            i.drawImage(a, 0, 0);
            for (var j = i.getImageData(0, 0, f, g).data, k = i.createImageData(f, g), l = k.data, m = 0; f > m; m++)
                for (var n = 0; g > n; n++) {
                    var o = 0 > n - 1 ? 0 : n - 1,
                        p = n + 1 > g - 1 ? g - 1 : n + 1,
                        q = 0 > m - 1 ? 0 : m - 1,
                        r = m + 1 > f - 1 ? f - 1 : m + 1,
                        s = [],
                        t = [0, 0, j[4 * (n * f + m)] / 255 * b];
                    s.push([-1, 0, j[4 * (n * f + q)] / 255 * b]), s.push([-1, -1, j[4 * (o * f + q)] / 255 * b]), s.push([0, -1, j[4 * (o * f + m)] / 255 * b]), s.push([1, -1, j[4 * (o * f + r)] / 255 * b]), s.push([1, 0, j[4 * (n * f + r)] / 255 * b]), s.push([1, 1, j[4 * (p * f + r)] / 255 * b]), s.push([0, 1, j[4 * (p * f + m)] / 255 * b]), s.push([-1, 1, j[4 * (p * f + q)] / 255 * b]);
                    for (var u = [], v = s.length, w = 0; v > w; w++) {
                        var x = s[w],
                            y = s[(w + 1) % v];
                        x = d(x, t), y = d(y, t), u.push(e(c(x, y)))
                    }
                    for (var z = [0, 0, 0], w = 0; w < u.length; w++) z[0] += u[w][0], z[1] += u[w][1], z[2] += u[w][2];
                    z[0] /= u.length, z[1] /= u.length, z[2] /= u.length;
                    var A = 4 * (n * f + m);
                    l[A] = (z[0] + 1) / 2 * 255 | 0, l[A + 1] = (z[1] + 1) / 2 * 255 | 0, l[A + 2] = 255 * z[2] | 0, l[A + 3] = 255
                }
            return i.putImageData(k, 0, 0), h
        },
        generateDataTexture: function(a, b, c) {
            for (var d = a * b, e = new Uint8Array(3 * d), f = Math.floor(255 * c.r), g = Math.floor(255 * c.g), h = Math.floor(255 * c.b), i = 0; d > i; i++) e[3 * i] = f, e[3 * i + 1] = g, e[3 * i + 2] = h;
            var j = new THREE.DataTexture(e, a, b, THREE.RGBFormat);
            return j.needsUpdate = !0, j
        }
    }, THREE.SceneUtils = {
        createMultiMaterialObject: function(a, b) {
            for (var c = new THREE.Object3D, d = 0, e = b.length; e > d; d++) c.add(new THREE.Mesh(a, b[d]));
            return c
        },
        detach: function(a, b, c) {
            a.applyMatrix(b.matrixWorld), b.remove(a), c.add(a)
        },
        attach: function(a, b, c) {
            var d = new THREE.Matrix4;
            d.getInverse(c.matrixWorld), a.applyMatrix(d), b.remove(a), c.add(a)
        }
    }, THREE.FontUtils = {
        faces: {},
        face: "helvetiker",
        weight: "normal",
        style: "normal",
        size: 150,
        divisions: 10,
        getFace: function() {
            try {
                return this.faces[this.face][this.weight][this.style]
            } catch (a) {
                throw "The font " + this.face + " with " + this.weight + " weight and " + this.style + " style is missing."
            }
        },
        loadFace: function(a) {
            var b = a.familyName.toLowerCase(),
                c = this;
            c.faces[b] = c.faces[b] || {}, c.faces[b][a.cssFontWeight] = c.faces[b][a.cssFontWeight] || {}, c.faces[b][a.cssFontWeight][a.cssFontStyle] = a;
            c.faces[b][a.cssFontWeight][a.cssFontStyle] = a;
            return a
        },
        drawText: function(a) {
            var b, c = this.getFace(),
                d = this.size / c.resolution,
                e = 0,
                f = String(a).split(""),
                g = f.length,
                h = [];
            for (b = 0; g > b; b++) {
                var i = new THREE.Path,
                    j = this.extractGlyphPoints(f[b], c, d, e, i);
                e += j.offset, h.push(j.path)
            }
            var k = e / 2;
            return {
                paths: h,
                offset: k
            }
        },
        extractGlyphPoints: function(a, b, c, d, e) {
            var f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y = [],
                z = b.glyphs[a] || b.glyphs["?"];
            if (z) {
                if (z.o)
                    for (i = z._cachedOutline || (z._cachedOutline = z.o.split(" ")), k = i.length, l = c, m = c, f = 0; k > f;) switch (j = i[f++]) {
                        case "m":
                            n = i[f++] * l + d, o = i[f++] * m, e.moveTo(n, o);
                            break;
                        case "l":
                            n = i[f++] * l + d, o = i[f++] * m, e.lineTo(n, o);
                            break;
                        case "q":
                            if (p = i[f++] * l + d, q = i[f++] * m, t = i[f++] * l + d, u = i[f++] * m, e.quadraticCurveTo(t, u, p, q), x = y[y.length - 1])
                                for (r = x.x, s = x.y, g = 1, h = this.divisions; h >= g; g++) {
                                    var A = g / h;
                                    THREE.Shape.Utils.b2(A, r, t, p), THREE.Shape.Utils.b2(A, s, u, q)
                                }
                            break;
                        case "b":
                            if (p = i[f++] * l + d, q = i[f++] * m, t = i[f++] * l + d, u = i[f++] * m, v = i[f++] * l + d, w = i[f++] * m, e.bezierCurveTo(t, u, v, w, p, q), x = y[y.length - 1])
                                for (r = x.x, s = x.y, g = 1, h = this.divisions; h >= g; g++) {
                                    var A = g / h;
                                    THREE.Shape.Utils.b3(A, r, t, v, p), THREE.Shape.Utils.b3(A, s, u, w, q)
                                }
                    }
                return {
                    offset: z.ha * c,
                    path: e
                }
            }
        }
    }, THREE.FontUtils.generateShapes = function(a, b) {
        b = b || {};
        var c = void 0 !== b.size ? b.size : 100,
            d = void 0 !== b.curveSegments ? b.curveSegments : 4,
            e = void 0 !== b.font ? b.font : "helvetiker",
            f = void 0 !== b.weight ? b.weight : "normal",
            g = void 0 !== b.style ? b.style : "normal";
        THREE.FontUtils.size = c, THREE.FontUtils.divisions = d, THREE.FontUtils.face = e, THREE.FontUtils.weight = f, THREE.FontUtils.style = g;
        for (var h = THREE.FontUtils.drawText(a), i = h.paths, j = [], k = 0, l = i.length; l > k; k++) Array.prototype.push.apply(j, i[k].toShapes());
        return j
    },
    function(a) {
        var b = 1e-10,
            c = function(a, b) {
                var c = a.length;
                if (3 > c) return null;
                var f, g, h, i = [],
                    j = [],
                    k = [];
                if (d(a) > 0)
                    for (g = 0; c > g; g++) j[g] = g;
                else
                    for (g = 0; c > g; g++) j[g] = c - 1 - g;
                var l = c,
                    m = 2 * l;
                for (g = l - 1; l > 2;) {
                    if (m-- <= 0) return console.log("Warning, unable to triangulate polygon!"), b ? k : i;
                    if (f = g, f >= l && (f = 0), g = f + 1, g >= l && (g = 0), h = g + 1, h >= l && (h = 0), e(a, f, g, h, l, j)) {
                        var n, o, p, q, r;
                        for (n = j[f], o = j[g], p = j[h], i.push([a[n], a[o], a[p]]), k.push([j[f], j[g], j[h]]), q = g, r = g + 1; l > r; q++, r++) j[q] = j[r];
                        l--, m = 2 * l
                    }
                }
                return b ? k : i
            },
            d = function(a) {
                for (var b = a.length, c = 0, d = b - 1, e = 0; b > e; d = e++) c += a[d].x * a[e].y - a[e].x * a[d].y;
                return .5 * c
            },
            e = function(a, c, d, e, f, g) {
                var h, i, j, k, l, m, n, o, p;
                if (i = a[g[c]].x, j = a[g[c]].y, k = a[g[d]].x, l = a[g[d]].y, m = a[g[e]].x, n = a[g[e]].y, b > (k - i) * (n - j) - (l - j) * (m - i)) return !1;
                var q, r, s, t, u, v, w, x, y, z, A, B, C, D, E;
                for (q = m - k, r = n - l, s = i - m, t = j - n, u = k - i, v = l - j, h = 0; f > h; h++)
                    if (o = a[g[h]].x, p = a[g[h]].y, !(o === i && p === j || o === k && p === l || o === m && p === n) && (w = o - i, x = p - j, y = o - k, z = p - l, A = o - m, B = p - n, E = q * z - r * y, C = u * x - v * w, D = s * B - t * A, E >= -b && D >= -b && C >= -b)) return !1;
                return !0
            };
        return a.Triangulate = c, a.Triangulate.area = d, a
    }(THREE.FontUtils), self._typeface_js = {
        faces: THREE.FontUtils.faces,
        loadFace: THREE.FontUtils.loadFace
    }, THREE.typeface_js = self._typeface_js, THREE.Audio = function(a) {
        THREE.Object3D.call(this), this.type = "Audio", this.context = a.context, this.source = this.context.createBufferSource(), this.gain = this.context.createGain(), this.gain.connect(this.context.destination), this.panner = this.context.createPanner(), this.panner.connect(this.gain)
    }, THREE.Audio.prototype = Object.create(THREE.Object3D.prototype), THREE.Audio.prototype.constructor = THREE.Audio, THREE.Audio.prototype.load = function(a) {
        var b = this,
            c = new XMLHttpRequest;
        return c.open("GET", a, !0), c.responseType = "arraybuffer", c.onload = function() {
            b.context.decodeAudioData(this.response, function(a) {
                b.source.buffer = a, b.source.connect(b.panner), b.source.start(0)
            })
        }, c.send(), this
    }, THREE.Audio.prototype.setLoop = function(a) {
        this.source.loop = a
    }, THREE.Audio.prototype.setRefDistance = function(a) {
        this.panner.refDistance = a
    }, THREE.Audio.prototype.setRolloffFactor = function(a) {
        this.panner.rolloffFactor = a
    }, THREE.Audio.prototype.updateMatrixWorld = function() {
        var a = new THREE.Vector3;
        return function(b) {
            THREE.Object3D.prototype.updateMatrixWorld.call(this, b), a.setFromMatrixPosition(this.matrixWorld), this.panner.setPosition(a.x, a.y, a.z)
        }
    }(), THREE.AudioListener = function() {
        THREE.Object3D.call(this), this.type = "AudioListener", this.context = new(window.AudioContext || window.webkitAudioContext)
    }, THREE.AudioListener.prototype = Object.create(THREE.Object3D.prototype), THREE.AudioListener.prototype.constructor = THREE.AudioListener, THREE.AudioListener.prototype.updateMatrixWorld = function() {
        var a = new THREE.Vector3,
            b = new THREE.Quaternion,
            c = new THREE.Vector3,
            d = new THREE.Vector3,
            e = new THREE.Vector3,
            f = new THREE.Vector3;
        return function(g) {
            THREE.Object3D.prototype.updateMatrixWorld.call(this, g);
            var h = this.context.listener,
                i = this.up;
            this.matrixWorld.decompose(a, b, c), d.set(0, 0, -1).applyQuaternion(b), e.subVectors(a, f), h.setPosition(a.x, a.y, a.z), h.setOrientation(d.x, d.y, d.z, i.x, i.y, i.z), h.setVelocity(e.x, e.y, e.z), f.copy(a)
        }
    }(), THREE.Curve = function() {}, THREE.Curve.prototype.getPoint = function() {
        return console.log("Warning, getPoint() not implemented!"), null
    }, THREE.Curve.prototype.getPointAt = function(a) {
        var b = this.getUtoTmapping(a);
        return this.getPoint(b)
    }, THREE.Curve.prototype.getPoints = function(a) {
        a || (a = 5);
        var b, c = [];
        for (b = 0; a >= b; b++) c.push(this.getPoint(b / a));
        return c
    }, THREE.Curve.prototype.getSpacedPoints = function(a) {
        a || (a = 5);
        var b, c = [];
        for (b = 0; a >= b; b++) c.push(this.getPointAt(b / a));
        return c
    }, THREE.Curve.prototype.getLength = function() {
        var a = this.getLengths();
        return a[a.length - 1]
    }, THREE.Curve.prototype.getLengths = function(a) {
        if (a || (a = this.__arcLengthDivisions ? this.__arcLengthDivisions : 200), this.cacheArcLengths && this.cacheArcLengths.length == a + 1 && !this.needsUpdate) return this.cacheArcLengths;
        this.needsUpdate = !1;
        var b, c, d = [],
            e = this.getPoint(0),
            f = 0;
        for (d.push(0), c = 1; a >= c; c++) b = this.getPoint(c / a), f += b.distanceTo(e), d.push(f), e = b;
        return this.cacheArcLengths = d, d
    }, THREE.Curve.prototype.updateArcLengths = function() {
        this.needsUpdate = !0, this.getLengths()
    }, THREE.Curve.prototype.getUtoTmapping = function(a, b) {
        var c, d = this.getLengths(),
            e = 0,
            f = d.length;
        c = b ? b : a * d[f - 1];
        for (var g, h = 0, i = f - 1; i >= h;)
            if (e = Math.floor(h + (i - h) / 2), g = d[e] - c, 0 > g) h = e + 1;
            else {
                if (!(g > 0)) {
                    i = e;
                    break
                }
                i = e - 1
            }
        if (e = i, d[e] == c) {
            var j = e / (f - 1);
            return j
        }
        var k = d[e],
            l = d[e + 1],
            m = l - k,
            n = (c - k) / m,
            j = (e + n) / (f - 1);
        return j
    }, THREE.Curve.prototype.getTangent = function(a) {
        var b = 1e-4,
            c = a - b,
            d = a + b;
        0 > c && (c = 0), d > 1 && (d = 1);
        var e = this.getPoint(c),
            f = this.getPoint(d),
            g = f.clone().sub(e);
        return g.normalize()
    }, THREE.Curve.prototype.getTangentAt = function(a) {
        var b = this.getUtoTmapping(a);
        return this.getTangent(b)
    }, THREE.Curve.Utils = {
        tangentQuadraticBezier: function(a, b, c, d) {
            return 2 * (1 - a) * (c - b) + 2 * a * (d - c)
        },
        tangentCubicBezier: function(a, b, c, d, e) {
            return -3 * b * (1 - a) * (1 - a) + 3 * c * (1 - a) * (1 - a) - 6 * a * c * (1 - a) + 6 * a * d * (1 - a) - 3 * a * a * d + 3 * a * a * e
        },
        tangentSpline: function(a) {
            var b = 6 * a * a - 6 * a,
                c = 3 * a * a - 4 * a + 1,
                d = -6 * a * a + 6 * a,
                e = 3 * a * a - 2 * a;
            return b + c + d + e
        },
        interpolate: function(a, b, c, d, e) {
            var f = .5 * (c - a),
                g = .5 * (d - b),
                h = e * e,
                i = e * h;
            return (2 * b - 2 * c + f + g) * i + (-3 * b + 3 * c - 2 * f - g) * h + f * e + b
        }
    }, THREE.Curve.create = function(a, b) {
        return a.prototype = Object.create(THREE.Curve.prototype), a.prototype.constructor = a, a.prototype.getPoint = b, a
    }, THREE.CurvePath = function() {
        this.curves = [], this.bends = [], this.autoClose = !1
    }, THREE.CurvePath.prototype = Object.create(THREE.Curve.prototype), THREE.CurvePath.prototype.constructor = THREE.CurvePath, THREE.CurvePath.prototype.add = function(a) {
        this.curves.push(a)
    }, THREE.CurvePath.prototype.checkConnection = function() {}, THREE.CurvePath.prototype.closePath = function() {
        var a = this.curves[0].getPoint(0),
            b = this.curves[this.curves.length - 1].getPoint(1);
        a.equals(b) || this.curves.push(new THREE.LineCurve(b, a))
    }, THREE.CurvePath.prototype.getPoint = function(a) {
        for (var b, c, d = a * this.getLength(), e = this.getCurveLengths(), f = 0; f < e.length;) {
            if (e[f] >= d) {
                b = e[f] - d, c = this.curves[f];
                var g = 1 - b / c.getLength();
                return c.getPointAt(g)
            }
            f++
        }
        return null
    }, THREE.CurvePath.prototype.getLength = function() {
        var a = this.getCurveLengths();
        return a[a.length - 1]
    }, THREE.CurvePath.prototype.getCurveLengths = function() {
        if (this.cacheLengths && this.cacheLengths.length == this.curves.length) return this.cacheLengths;
        var a, b = [],
            c = 0,
            d = this.curves.length;
        for (a = 0; d > a; a++) c += this.curves[a].getLength(), b.push(c);
        return this.cacheLengths = b, b
    }, THREE.CurvePath.prototype.getBoundingBox = function() {
        var a, b, c, d, e, f, g = this.getPoints();
        a = b = Number.NEGATIVE_INFINITY, d = e = Number.POSITIVE_INFINITY;
        var h, i, j, k, l = g[0] instanceof THREE.Vector3;
        for (k = l ? new THREE.Vector3 : new THREE.Vector2, i = 0, j = g.length; j > i; i++) h = g[i], h.x > a ? a = h.x : h.x < d && (d = h.x), h.y > b ? b = h.y : h.y < e && (e = h.y), l && (h.z > c ? c = h.z : h.z < f && (f = h.z)), k.add(h);
        var m = {
            minX: d,
            minY: e,
            maxX: a,
            maxY: b
        };
        return l && (m.maxZ = c, m.minZ = f), m
    }, THREE.CurvePath.prototype.createPointsGeometry = function(a) {
        var b = this.getPoints(a, !0);
        return this.createGeometry(b)
    }, THREE.CurvePath.prototype.createSpacedPointsGeometry = function(a) {
        var b = this.getSpacedPoints(a, !0);
        return this.createGeometry(b)
    }, THREE.CurvePath.prototype.createGeometry = function(a) {
        for (var b = new THREE.Geometry, c = 0; c < a.length; c++) b.vertices.push(new THREE.Vector3(a[c].x, a[c].y, a[c].z || 0));
        return b
    }, THREE.CurvePath.prototype.addWrapPath = function(a) {
        this.bends.push(a)
    }, THREE.CurvePath.prototype.getTransformedPoints = function(a, b) {
        var c, d, e = this.getPoints(a);
        for (b || (b = this.bends), c = 0, d = b.length; d > c; c++) e = this.getWrapPoints(e, b[c]);
        return e
    }, THREE.CurvePath.prototype.getTransformedSpacedPoints = function(a, b) {
        var c, d, e = this.getSpacedPoints(a);
        for (b || (b = this.bends), c = 0, d = b.length; d > c; c++) e = this.getWrapPoints(e, b[c]);
        return e
    }, THREE.CurvePath.prototype.getWrapPoints = function(a, b) {
        var c, d, e, f, g, h, i = this.getBoundingBox();
        for (c = 0, d = a.length; d > c; c++) {
            e = a[c], f = e.x, g = e.y, h = f / i.maxX, h = b.getUtoTmapping(h, f);
            var j = b.getPoint(h),
                k = b.getTangent(h);
            k.set(-k.y, k.x).multiplyScalar(g), e.x = j.x + k.x, e.y = j.y + k.y
        }
        return a
    }, THREE.Gyroscope = function() {
        THREE.Object3D.call(this)
    }, THREE.Gyroscope.prototype = Object.create(THREE.Object3D.prototype), THREE.Gyroscope.prototype.constructor = THREE.Gyroscope, THREE.Gyroscope.prototype.updateMatrixWorld = function() {
        var a = new THREE.Vector3,
            b = new THREE.Quaternion,
            c = new THREE.Vector3,
            d = new THREE.Vector3,
            e = new THREE.Quaternion,
            f = new THREE.Vector3;
        return function(g) {
            this.matrixAutoUpdate && this.updateMatrix(), (this.matrixWorldNeedsUpdate || g) && (this.parent ? (this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), this.matrixWorld.decompose(d, e, f), this.matrix.decompose(a, b, c), this.matrixWorld.compose(d, b, f)) : this.matrixWorld.copy(this.matrix), this.matrixWorldNeedsUpdate = !1, g = !0);
            for (var h = 0, i = this.children.length; i > h; h++) this.children[h].updateMatrixWorld(g)
        }
    }(), THREE.Path = function(a) {
        THREE.CurvePath.call(this), this.actions = [], a && this.fromPoints(a)
    }, THREE.Path.prototype = Object.create(THREE.CurvePath.prototype), THREE.Path.prototype.constructor = THREE.Path, THREE.PathActions = {
        MOVE_TO: "moveTo",
        LINE_TO: "lineTo",
        QUADRATIC_CURVE_TO: "quadraticCurveTo",
        BEZIER_CURVE_TO: "bezierCurveTo",
        CSPLINE_THRU: "splineThru",
        ARC: "arc",
        ELLIPSE: "ellipse"
    }, THREE.Path.prototype.fromPoints = function(a) {
        this.moveTo(a[0].x, a[0].y);
        for (var b = 1, c = a.length; c > b; b++) this.lineTo(a[b].x, a[b].y)
    }, THREE.Path.prototype.moveTo = function() {
        var a = Array.prototype.slice.call(arguments);
        this.actions.push({
            action: THREE.PathActions.MOVE_TO,
            args: a
        })
    }, THREE.Path.prototype.lineTo = function(a, b) {
        var c = Array.prototype.slice.call(arguments),
            d = this.actions[this.actions.length - 1].args,
            e = d[d.length - 2],
            f = d[d.length - 1],
            g = new THREE.LineCurve(new THREE.Vector2(e, f), new THREE.Vector2(a, b));
        this.curves.push(g), this.actions.push({
            action: THREE.PathActions.LINE_TO,
            args: c
        })
    }, THREE.Path.prototype.quadraticCurveTo = function(a, b, c, d) {
        var e = Array.prototype.slice.call(arguments),
            f = this.actions[this.actions.length - 1].args,
            g = f[f.length - 2],
            h = f[f.length - 1],
            i = new THREE.QuadraticBezierCurve(new THREE.Vector2(g, h), new THREE.Vector2(a, b), new THREE.Vector2(c, d));
        this.curves.push(i), this.actions.push({
            action: THREE.PathActions.QUADRATIC_CURVE_TO,
            args: e
        })
    }, THREE.Path.prototype.bezierCurveTo = function(a, b, c, d, e, f) {
        var g = Array.prototype.slice.call(arguments),
            h = this.actions[this.actions.length - 1].args,
            i = h[h.length - 2],
            j = h[h.length - 1],
            k = new THREE.CubicBezierCurve(new THREE.Vector2(i, j), new THREE.Vector2(a, b), new THREE.Vector2(c, d), new THREE.Vector2(e, f));
        this.curves.push(k), this.actions.push({
            action: THREE.PathActions.BEZIER_CURVE_TO,
            args: g
        })
    }, THREE.Path.prototype.splineThru = function(a) {
        var b = Array.prototype.slice.call(arguments),
            c = this.actions[this.actions.length - 1].args,
            d = c[c.length - 2],
            e = c[c.length - 1],
            f = [new THREE.Vector2(d, e)];
        Array.prototype.push.apply(f, a);
        var g = new THREE.SplineCurve(f);
        this.curves.push(g), this.actions.push({
            action: THREE.PathActions.CSPLINE_THRU,
            args: b
        })
    }, THREE.Path.prototype.arc = function(a, b, c, d, e, f) {
        var g = this.actions[this.actions.length - 1].args,
            h = g[g.length - 2],
            i = g[g.length - 1];
        this.absarc(a + h, b + i, c, d, e, f)
    }, THREE.Path.prototype.absarc = function(a, b, c, d, e, f) {
        this.absellipse(a, b, c, c, d, e, f)
    }, THREE.Path.prototype.ellipse = function(a, b, c, d, e, f, g) {
        var h = this.actions[this.actions.length - 1].args,
            i = h[h.length - 2],
            j = h[h.length - 1];
        this.absellipse(a + i, b + j, c, d, e, f, g)
    }, THREE.Path.prototype.absellipse = function(a, b, c, d, e, f, g) {
        var h = Array.prototype.slice.call(arguments),
            i = new THREE.EllipseCurve(a, b, c, d, e, f, g);
        this.curves.push(i);
        var j = i.getPoint(1);
        h.push(j.x), h.push(j.y), this.actions.push({
            action: THREE.PathActions.ELLIPSE,
            args: h
        })
    }, THREE.Path.prototype.getSpacedPoints = function(a) {
        a || (a = 40);
        for (var b = [], c = 0; a > c; c++) b.push(this.getPoint(c / a));
        return b
    }, THREE.Path.prototype.getPoints = function(a, b) {
        if (this.useSpacedPoints) return console.log("tata"), this.getSpacedPoints(a, b);
        a = a || 12;
        var c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u = [];
        for (c = 0, d = this.actions.length; d > c; c++) switch (e = this.actions[c], f = e.action, g = e.args, f) {
            case THREE.PathActions.MOVE_TO:
                u.push(new THREE.Vector2(g[0], g[1]));
                break;
            case THREE.PathActions.LINE_TO:
                u.push(new THREE.Vector2(g[0], g[1]));
                break;
            case THREE.PathActions.QUADRATIC_CURVE_TO:
                for (h = g[2], i = g[3], l = g[0], m = g[1], u.length > 0 ? (p = u[u.length - 1], n = p.x, o = p.y) : (p = this.actions[c - 1].args, n = p[p.length - 2], o = p[p.length - 1]), q = 1; a >= q; q++) r = q / a, s = THREE.Shape.Utils.b2(r, n, l, h), t = THREE.Shape.Utils.b2(r, o, m, i), u.push(new THREE.Vector2(s, t));
                break;
            case THREE.PathActions.BEZIER_CURVE_TO:
                for (h = g[4], i = g[5], l = g[0], m = g[1], j = g[2], k = g[3], u.length > 0 ? (p = u[u.length - 1], n = p.x, o = p.y) : (p = this.actions[c - 1].args, n = p[p.length - 2], o = p[p.length - 1]), q = 1; a >= q; q++) r = q / a, s = THREE.Shape.Utils.b3(r, n, l, j, h), t = THREE.Shape.Utils.b3(r, o, m, k, i), u.push(new THREE.Vector2(s, t));
                break;
            case THREE.PathActions.CSPLINE_THRU:
                p = this.actions[c - 1].args;
                var v = new THREE.Vector2(p[p.length - 2], p[p.length - 1]),
                    w = [v],
                    x = a * g[0].length;
                w = w.concat(g[0]);
                var y = new THREE.SplineCurve(w);
                for (q = 1; x >= q; q++) u.push(y.getPointAt(q / x));
                break;
            case THREE.PathActions.ARC:
                var z, A = g[0],
                    B = g[1],
                    C = g[2],
                    D = g[3],
                    E = g[4],
                    F = !!g[5],
                    G = E - D,
                    H = 2 * a;
                for (q = 1; H >= q; q++) r = q / H, F || (r = 1 - r), z = D + r * G, s = A + C * Math.cos(z), t = B + C * Math.sin(z), u.push(new THREE.Vector2(s, t));
                break;
            case THREE.PathActions.ELLIPSE:
                var z, A = g[0],
                    B = g[1],
                    I = g[2],
                    J = g[3],
                    D = g[4],
                    E = g[5],
                    F = !!g[6],
                    G = E - D,
                    H = 2 * a;
                for (q = 1; H >= q; q++) r = q / H, F || (r = 1 - r), z = D + r * G, s = A + I * Math.cos(z), t = B + J * Math.sin(z), u.push(new THREE.Vector2(s, t))
        }
        var K = u[u.length - 1],
            L = 1e-10;
        return Math.abs(K.x - u[0].x) < L && Math.abs(K.y - u[0].y) < L && u.splice(u.length - 1, 1), b && u.push(u[0]), u
    }, THREE.Path.prototype.toShapes = function(a, b) {
        function c(a) {
            var b, c, d, e, f, g = [],
                h = new THREE.Path;
            for (b = 0, c = a.length; c > b; b++) d = a[b], f = d.args, e = d.action, e == THREE.PathActions.MOVE_TO && 0 != h.actions.length && (g.push(h), h = new THREE.Path), h[e].apply(h, f);
            return 0 != h.actions.length && g.push(h), g
        }

        function d(a) {
            for (var b = [], c = 0, d = a.length; d > c; c++) {
                var e = a[c],
                    f = new THREE.Shape;
                f.actions = e.actions, f.curves = e.curves, b.push(f)
            }
            return b
        }

        function e(a, b) {
            for (var c = 1e-10, d = b.length, e = !1, f = d - 1, g = 0; d > g; f = g++) {
                var h = b[f],
                    i = b[g],
                    j = i.x - h.x,
                    k = i.y - h.y;
                if (Math.abs(k) > c) {
                    if (0 > k && (h = b[g], j = -j, i = b[f], k = -k), a.y < h.y || a.y > i.y) continue;
                    if (a.y == h.y) {
                        if (a.x == h.x) return !0
                    } else {
                        var l = k * (a.x - h.x) - j * (a.y - h.y);
                        if (0 == l) return !0;
                        if (0 > l) continue;
                        e = !e
                    }
                } else {
                    if (a.y != h.y) continue;
                    if (i.x <= a.x && a.x <= h.x || h.x <= a.x && a.x <= i.x) return !0
                }
            }
            return e
        }
        var f = c(this.actions);
        if (0 == f.length) return [];
        if (b === !0) return d(f);
        var g, h, i, j = [];
        if (1 == f.length) return h = f[0], i = new THREE.Shape, i.actions = h.actions, i.curves = h.curves, j.push(i), j;
        var k = !THREE.Shape.Utils.isClockWise(f[0].getPoints());
        k = a ? !k : k;
        var l, m = [],
            n = [],
            o = [],
            p = 0;
        n[p] = void 0, o[p] = [];
        var q, r;
        for (q = 0, r = f.length; r > q; q++) h = f[q], l = h.getPoints(), g = THREE.Shape.Utils.isClockWise(l), g = a ? !g : g, g ? (!k && n[p] && p++, n[p] = {
            s: new THREE.Shape,
            p: l
        }, n[p].s.actions = h.actions, n[p].s.curves = h.curves, k && p++, o[p] = []) : o[p].push({
            h: h,
            p: l[0]
        });
        if (!n[0]) return d(f);
        if (n.length > 1) {
            for (var s = !1, t = [], u = 0, v = n.length; v > u; u++) m[u] = [];
            for (var u = 0, v = n.length; v > u; u++)
                for (var w = (n[u], o[u]), x = 0; x < w.length; x++) {
                    for (var y = w[x], z = !0, A = 0; A < n.length; A++) e(y.p, n[A].p) && (u != A && t.push({
                        froms: u,
                        tos: A,
                        hole: x
                    }), z ? (z = !1, m[A].push(y)) : s = !0);
                    z && m[u].push(y)
                }
            t.length > 0 && (s || (o = m))
        }
        var B, C, D;
        for (q = 0, r = n.length; r > q; q++)
            for (i = n[q].s, j.push(i), B = o[q], C = 0, D = B.length; D > C; C++) i.holes.push(B[C].h);
        return j
    }, THREE.Shape = function() {
        THREE.Path.apply(this, arguments), this.holes = []
    }, THREE.Shape.prototype = Object.create(THREE.Path.prototype), THREE.Shape.prototype.constructor = THREE.Shape, THREE.Shape.prototype.extrude = function(a) {
        var b = new THREE.ExtrudeGeometry(this, a);
        return b
    }, THREE.Shape.prototype.makeGeometry = function(a) {
        var b = new THREE.ShapeGeometry(this, a);
        return b
    }, THREE.Shape.prototype.getPointsHoles = function(a) {
        var b, c = this.holes.length,
            d = [];
        for (b = 0; c > b; b++) d[b] = this.holes[b].getTransformedPoints(a, this.bends);
        return d
    }, THREE.Shape.prototype.getSpacedPointsHoles = function(a) {
        var b, c = this.holes.length,
            d = [];
        for (b = 0; c > b; b++) d[b] = this.holes[b].getTransformedSpacedPoints(a, this.bends);
        return d
    }, THREE.Shape.prototype.extractAllPoints = function(a) {
        return {
            shape: this.getTransformedPoints(a),
            holes: this.getPointsHoles(a)
        }
    }, THREE.Shape.prototype.extractPoints = function(a) {
        return this.useSpacedPoints ? this.extractAllSpacedPoints(a) : this.extractAllPoints(a)
    }, THREE.Shape.prototype.extractAllSpacedPoints = function(a) {
        return {
            shape: this.getTransformedSpacedPoints(a),
            holes: this.getSpacedPointsHoles(a)
        }
    }, THREE.Shape.Utils = {
        triangulateShape: function(a, b) {
            function c(a, b, c) {
                return a.x != b.x ? a.x < b.x ? a.x <= c.x && c.x <= b.x : b.x <= c.x && c.x <= a.x : a.y < b.y ? a.y <= c.y && c.y <= b.y : b.y <= c.y && c.y <= a.y
            }

            function d(a, b, d, e, f) {
                var g = 1e-10,
                    h = b.x - a.x,
                    i = b.y - a.y,
                    j = e.x - d.x,
                    k = e.y - d.y,
                    l = a.x - d.x,
                    m = a.y - d.y,
                    n = i * j - h * k,
                    o = i * l - h * m;
                if (Math.abs(n) > g) {
                    var p;
                    if (n > 0) {
                        if (0 > o || o > n) return [];
                        if (p = k * l - j * m, 0 > p || p > n) return []
                    } else {
                        if (o > 0 || n > o) return [];
                        if (p = k * l - j * m, p > 0 || n > p) return []
                    }
                    if (0 == p) return !f || 0 != o && o != n ? [a] : [];
                    if (p == n) return !f || 0 != o && o != n ? [b] : [];
                    if (0 == o) return [d];
                    if (o == n) return [e];
                    var q = p / n;
                    return [{
                        x: a.x + q * h,
                        y: a.y + q * i
                    }]
                }
                if (0 != o || k * l != j * m) return [];
                var r = 0 == h && 0 == i,
                    s = 0 == j && 0 == k;
                if (r && s) return a.x != d.x || a.y != d.y ? [] : [a];
                if (r) return c(d, e, a) ? [a] : [];
                if (s) return c(a, b, d) ? [d] : [];
                var t, u, v, w, x, y, z, A;
                return 0 != h ? (a.x < b.x ? (t = a, v = a.x, u = b, w = b.x) : (t = b, v = b.x, u = a, w = a.x), d.x < e.x ? (x = d, z = d.x, y = e, A = e.x) : (x = e, z = e.x, y = d, A = d.x)) : (a.y < b.y ? (t = a, v = a.y, u = b, w = b.y) : (t = b, v = b.y, u = a, w = a.y), d.y < e.y ? (x = d, z = d.y, y = e, A = e.y) : (x = e, z = e.y, y = d, A = d.y)), z >= v ? z > w ? [] : w == z ? f ? [] : [x] : A >= w ? [x, u] : [x, y] : v > A ? [] : v == A ? f ? [] : [t] : A >= w ? [t, u] : [t, y]
            }

            function e(a, b, c, d) {
                var e = 1e-10,
                    f = b.x - a.x,
                    g = b.y - a.y,
                    h = c.x - a.x,
                    i = c.y - a.y,
                    j = d.x - a.x,
                    k = d.y - a.y,
                    l = f * i - g * h,
                    m = f * k - g * j;
                if (Math.abs(l) > e) {
                    var n = j * i - k * h;
                    return l > 0 ? m >= 0 && n >= 0 : m >= 0 || n >= 0
                }
                return m > 0
            }

            function f(a, b) {
                function c(a, b) {
                    var c = s.length - 1,
                        d = a - 1;
                    0 > d && (d = c);
                    var f = a + 1;
                    f > c && (f = 0);
                    var g = e(s[a], s[d], s[f], h[b]);
                    if (!g) return !1;
                    var i = h.length - 1,
                        j = b - 1;
                    0 > j && (j = i);
                    var k = b + 1;
                    return k > i && (k = 0), g = e(h[b], h[j], h[k], s[a]), g ? !0 : !1
                }

                function f(a, b) {
                    var c, e, f;
                    for (c = 0; c < s.length; c++)
                        if (e = c + 1, e %= s.length, f = d(a, b, s[c], s[e], !0), f.length > 0) return !0;
                    return !1
                }

                function g(a, c) {
                    var e, f, g, h, i;
                    for (e = 0; e < t.length; e++)
                        for (f = b[t[e]], g = 0; g < f.length; g++)
                            if (h = g + 1, h %= f.length, i = d(a, c, f[g], f[h], !0), i.length > 0) return !0;
                    return !1
                }
                for (var h, i, j, k, l, m, n, o, p, q, r, s = a.concat(), t = [], u = [], v = 0, w = b.length; w > v; v++) t.push(v);
                for (var x = 0, y = 2 * t.length; t.length > 0;) {
                    if (y--, 0 > y) {
                        console.log("Infinite Loop! Holes left:" + t.length + ", Probably Hole outside Shape!");
                        break
                    }
                    for (j = x; j < s.length; j++) {
                        k = s[j], i = -1;
                        for (var v = 0; v < t.length; v++)
                            if (m = t[v], n = k.x + ":" + k.y + ":" + m, void 0 === u[n]) {
                                h = b[m];
                                for (var z = 0; z < h.length; z++)
                                    if (l = h[z], c(j, z) && !f(k, l) && !g(k, l)) {
                                        i = z, t.splice(v, 1), o = s.slice(0, j + 1), p = s.slice(j), q = h.slice(i), r = h.slice(0, i + 1), s = o.concat(q).concat(r).concat(p), x = j;
                                        break
                                    }
                                if (i >= 0) break;
                                u[n] = !0
                            }
                        if (i >= 0) break
                    }
                }
                return s
            }
            for (var g, h, i, j, k, l, m = {}, n = a.concat(), o = 0, p = b.length; p > o; o++) Array.prototype.push.apply(n, b[o]);
            for (g = 0, h = n.length; h > g; g++) k = n[g].x + ":" + n[g].y, void 0 !== m[k] && console.log("Duplicate point", k), m[k] = g;
            var q = f(a, b),
                r = THREE.FontUtils.Triangulate(q, !1);
            for (g = 0, h = r.length; h > g; g++)
                for (j = r[g], i = 0; 3 > i; i++) k = j[i].x + ":" + j[i].y, l = m[k], void 0 !== l && (j[i] = l);
            return r.concat()
        },
        isClockWise: function(a) {
            return THREE.FontUtils.Triangulate.area(a) < 0
        },
        b2p0: function(a, b) {
            var c = 1 - a;
            return c * c * b
        },
        b2p1: function(a, b) {
            return 2 * (1 - a) * a * b
        },
        b2p2: function(a, b) {
            return a * a * b
        },
        b2: function(a, b, c, d) {
            return this.b2p0(a, b) + this.b2p1(a, c) + this.b2p2(a, d)
        },
        b3p0: function(a, b) {
            var c = 1 - a;
            return c * c * c * b
        },
        b3p1: function(a, b) {
            var c = 1 - a;
            return 3 * c * c * a * b
        },
        b3p2: function(a, b) {
            var c = 1 - a;
            return 3 * c * a * a * b
        },
        b3p3: function(a, b) {
            return a * a * a * b
        },
        b3: function(a, b, c, d, e) {
            return this.b3p0(a, b) + this.b3p1(a, c) + this.b3p2(a, d) + this.b3p3(a, e)
        }
    }, THREE.LineCurve = function(a, b) {
        this.v1 = a, this.v2 = b
    }, THREE.LineCurve.prototype = Object.create(THREE.Curve.prototype), THREE.LineCurve.prototype.constructor = THREE.LineCurve, THREE.LineCurve.prototype.getPoint = function(a) {
        var b = this.v2.clone().sub(this.v1);
        return b.multiplyScalar(a).add(this.v1), b
    }, THREE.LineCurve.prototype.getPointAt = function(a) {
        return this.getPoint(a);

    }, THREE.LineCurve.prototype.getTangent = function() {
        var a = this.v2.clone().sub(this.v1);
        return a.normalize()
    }, THREE.QuadraticBezierCurve = function(a, b, c) {
        this.v0 = a, this.v1 = b, this.v2 = c
    }, THREE.QuadraticBezierCurve.prototype = Object.create(THREE.Curve.prototype), THREE.QuadraticBezierCurve.prototype.constructor = THREE.QuadraticBezierCurve, THREE.QuadraticBezierCurve.prototype.getPoint = function(a) {
        var b = new THREE.Vector2;
        return b.x = THREE.Shape.Utils.b2(a, this.v0.x, this.v1.x, this.v2.x), b.y = THREE.Shape.Utils.b2(a, this.v0.y, this.v1.y, this.v2.y), b
    }, THREE.QuadraticBezierCurve.prototype.getTangent = function(a) {
        var b = new THREE.Vector2;
        return b.x = THREE.Curve.Utils.tangentQuadraticBezier(a, this.v0.x, this.v1.x, this.v2.x), b.y = THREE.Curve.Utils.tangentQuadraticBezier(a, this.v0.y, this.v1.y, this.v2.y), b.normalize()
    }, THREE.CubicBezierCurve = function(a, b, c, d) {
        this.v0 = a, this.v1 = b, this.v2 = c, this.v3 = d
    }, THREE.CubicBezierCurve.prototype = Object.create(THREE.Curve.prototype), THREE.CubicBezierCurve.prototype.constructor = THREE.CubicBezierCurve, THREE.CubicBezierCurve.prototype.getPoint = function(a) {
        var b, c;
        return b = THREE.Shape.Utils.b3(a, this.v0.x, this.v1.x, this.v2.x, this.v3.x), c = THREE.Shape.Utils.b3(a, this.v0.y, this.v1.y, this.v2.y, this.v3.y), new THREE.Vector2(b, c)
    }, THREE.CubicBezierCurve.prototype.getTangent = function(a) {
        var b, c;
        b = THREE.Curve.Utils.tangentCubicBezier(a, this.v0.x, this.v1.x, this.v2.x, this.v3.x), c = THREE.Curve.Utils.tangentCubicBezier(a, this.v0.y, this.v1.y, this.v2.y, this.v3.y);
        var d = new THREE.Vector2(b, c);
        return d.normalize(), d
    }, THREE.SplineCurve = function(a) {
        this.points = void 0 == a ? [] : a
    }, THREE.SplineCurve.prototype = Object.create(THREE.Curve.prototype), THREE.SplineCurve.prototype.constructor = THREE.SplineCurve, THREE.SplineCurve.prototype.getPoint = function(a) {
        var b = this.points,
            c = (b.length - 1) * a,
            d = Math.floor(c),
            e = c - d,
            f = b[0 == d ? d : d - 1],
            g = b[d],
            h = b[d > b.length - 2 ? b.length - 1 : d + 1],
            i = b[d > b.length - 3 ? b.length - 1 : d + 2],
            j = new THREE.Vector2;
        return j.x = THREE.Curve.Utils.interpolate(f.x, g.x, h.x, i.x, e), j.y = THREE.Curve.Utils.interpolate(f.y, g.y, h.y, i.y, e), j
    }, THREE.EllipseCurve = function(a, b, c, d, e, f, g) {
        this.aX = a, this.aY = b, this.xRadius = c, this.yRadius = d, this.aStartAngle = e, this.aEndAngle = f, this.aClockwise = g
    }, THREE.EllipseCurve.prototype = Object.create(THREE.Curve.prototype), THREE.EllipseCurve.prototype.constructor = THREE.EllipseCurve, THREE.EllipseCurve.prototype.getPoint = function(a) {
        var b = this.aEndAngle - this.aStartAngle;
        0 > b && (b += 2 * Math.PI), b > 2 * Math.PI && (b -= 2 * Math.PI);
        var c;
        c = this.aClockwise === !0 ? this.aEndAngle + (1 - a) * (2 * Math.PI - b) : this.aStartAngle + a * b;
        var d = new THREE.Vector2;
        return d.x = this.aX + this.xRadius * Math.cos(c), d.y = this.aY + this.yRadius * Math.sin(c), d
    }, THREE.ArcCurve = function(a, b, c, d, e, f) {
        THREE.EllipseCurve.call(this, a, b, c, c, d, e, f)
    }, THREE.ArcCurve.prototype = Object.create(THREE.EllipseCurve.prototype), THREE.ArcCurve.prototype.constructor = THREE.ArcCurve, THREE.LineCurve3 = THREE.Curve.create(function(a, b) {
        this.v1 = a, this.v2 = b
    }, function(a) {
        var b = new THREE.Vector3;
        return b.subVectors(this.v2, this.v1), b.multiplyScalar(a), b.add(this.v1), b
    }), THREE.QuadraticBezierCurve3 = THREE.Curve.create(function(a, b, c) {
        this.v0 = a, this.v1 = b, this.v2 = c
    }, function(a) {
        var b = new THREE.Vector3;
        return b.x = THREE.Shape.Utils.b2(a, this.v0.x, this.v1.x, this.v2.x), b.y = THREE.Shape.Utils.b2(a, this.v0.y, this.v1.y, this.v2.y), b.z = THREE.Shape.Utils.b2(a, this.v0.z, this.v1.z, this.v2.z), b
    }), THREE.CubicBezierCurve3 = THREE.Curve.create(function(a, b, c, d) {
        this.v0 = a, this.v1 = b, this.v2 = c, this.v3 = d
    }, function(a) {
        var b = new THREE.Vector3;
        return b.x = THREE.Shape.Utils.b3(a, this.v0.x, this.v1.x, this.v2.x, this.v3.x), b.y = THREE.Shape.Utils.b3(a, this.v0.y, this.v1.y, this.v2.y, this.v3.y), b.z = THREE.Shape.Utils.b3(a, this.v0.z, this.v1.z, this.v2.z, this.v3.z), b
    }), THREE.SplineCurve3 = THREE.Curve.create(function(a) {
        this.points = void 0 == a ? [] : a
    }, function(a) {
        var b = this.points,
            c = (b.length - 1) * a,
            d = Math.floor(c),
            e = c - d,
            f = b[0 == d ? d : d - 1],
            g = b[d],
            h = b[d > b.length - 2 ? b.length - 1 : d + 1],
            i = b[d > b.length - 3 ? b.length - 1 : d + 2],
            j = new THREE.Vector3;
        return j.x = THREE.Curve.Utils.interpolate(f.x, g.x, h.x, i.x, e), j.y = THREE.Curve.Utils.interpolate(f.y, g.y, h.y, i.y, e), j.z = THREE.Curve.Utils.interpolate(f.z, g.z, h.z, i.z, e), j
    }), THREE.ClosedSplineCurve3 = THREE.Curve.create(function(a) {
        this.points = void 0 == a ? [] : a
    }, function(a) {
        var b = this.points,
            c = (b.length - 0) * a,
            d = Math.floor(c),
            e = c - d;
        d += d > 0 ? 0 : (Math.floor(Math.abs(d) / b.length) + 1) * b.length;
        var f = b[(d - 1) % b.length],
            g = b[d % b.length],
            h = b[(d + 1) % b.length],
            i = b[(d + 2) % b.length],
            j = new THREE.Vector3;
        return j.x = THREE.Curve.Utils.interpolate(f.x, g.x, h.x, i.x, e), j.y = THREE.Curve.Utils.interpolate(f.y, g.y, h.y, i.y, e), j.z = THREE.Curve.Utils.interpolate(f.z, g.z, h.z, i.z, e), j
    }), THREE.AnimationHandler = {
        LINEAR: 0,
        CATMULLROM: 1,
        CATMULLROM_FORWARD: 2,
        add: function() {
            console.warn("THREE.AnimationHandler.add() has been deprecated.")
        },
        get: function() {
            console.warn("THREE.AnimationHandler.get() has been deprecated.")
        },
        remove: function() {
            console.warn("THREE.AnimationHandler.remove() has been deprecated.")
        },
        animations: [],
        init: function(a) {
            if (a.initialized === !0) return a;
            for (var b = 0; b < a.hierarchy.length; b++) {
                for (var c = 0; c < a.hierarchy[b].keys.length; c++)
                    if (a.hierarchy[b].keys[c].time < 0 && (a.hierarchy[b].keys[c].time = 0), void 0 !== a.hierarchy[b].keys[c].rot && !(a.hierarchy[b].keys[c].rot instanceof THREE.Quaternion)) {
                        var d = a.hierarchy[b].keys[c].rot;
                        a.hierarchy[b].keys[c].rot = (new THREE.Quaternion).fromArray(d)
                    }
                if (a.hierarchy[b].keys.length && void 0 !== a.hierarchy[b].keys[0].morphTargets) {
                    for (var e = {}, c = 0; c < a.hierarchy[b].keys.length; c++)
                        for (var f = 0; f < a.hierarchy[b].keys[c].morphTargets.length; f++) {
                            var g = a.hierarchy[b].keys[c].morphTargets[f];
                            e[g] = -1
                        }
                    a.hierarchy[b].usedMorphTargets = e;
                    for (var c = 0; c < a.hierarchy[b].keys.length; c++) {
                        var h = {};
                        for (var g in e) {
                            for (var f = 0; f < a.hierarchy[b].keys[c].morphTargets.length; f++)
                                if (a.hierarchy[b].keys[c].morphTargets[f] === g) {
                                    h[g] = a.hierarchy[b].keys[c].morphTargetsInfluences[f];
                                    break
                                }
                            f === a.hierarchy[b].keys[c].morphTargets.length && (h[g] = 0)
                        }
                        a.hierarchy[b].keys[c].morphTargetsInfluences = h
                    }
                }
                for (var c = 1; c < a.hierarchy[b].keys.length; c++) a.hierarchy[b].keys[c].time === a.hierarchy[b].keys[c - 1].time && (a.hierarchy[b].keys.splice(c, 1), c--);
                for (var c = 0; c < a.hierarchy[b].keys.length; c++) a.hierarchy[b].keys[c].index = c
            }
            return a.initialized = !0, a
        },
        parse: function(a) {
            var b = function(a, c) {
                    c.push(a);
                    for (var d = 0; d < a.children.length; d++) b(a.children[d], c)
                },
                c = [];
            if (a instanceof THREE.SkinnedMesh)
                for (var d = 0; d < a.skeleton.bones.length; d++) c.push(a.skeleton.bones[d]);
            else b(a, c);
            return c
        },
        play: function(a) {
            -1 === this.animations.indexOf(a) && this.animations.push(a)
        },
        stop: function(a) {
            var b = this.animations.indexOf(a); - 1 !== b && this.animations.splice(b, 1)
        },
        update: function(a) {
            for (var b = 0; b < this.animations.length; b++) this.animations[b].resetBlendWeights();
            for (var b = 0; b < this.animations.length; b++) this.animations[b].update(a)
        }
    }, THREE.Animation = function(a, b) {
        this.root = a, this.data = THREE.AnimationHandler.init(b), this.hierarchy = THREE.AnimationHandler.parse(a), this.currentTime = 0, this.timeScale = 1, this.isPlaying = !1, this.loop = !0, this.weight = 0, this.interpolationType = THREE.AnimationHandler.LINEAR
    }, THREE.Animation.prototype.keyTypes = ["pos", "rot", "scl"], THREE.Animation.prototype.play = function(a, b) {
        this.currentTime = void 0 !== a ? a : 0, this.weight = void 0 !== b ? b : 1, this.isPlaying = !0, this.reset(), THREE.AnimationHandler.play(this)
    }, THREE.Animation.prototype.stop = function() {
        this.isPlaying = !1, THREE.AnimationHandler.stop(this)
    }, THREE.Animation.prototype.reset = function() {
        for (var a = 0, b = this.hierarchy.length; b > a; a++) {
            var c = this.hierarchy[a];
            void 0 === c.animationCache && (c.animationCache = {
                animations: {},
                blending: {
                    positionWeight: 0,
                    quaternionWeight: 0,
                    scaleWeight: 0
                }
            }), void 0 === c.animationCache.animations[this.data.name] && (c.animationCache.animations[this.data.name] = {}, c.animationCache.animations[this.data.name].prevKey = {
                pos: 0,
                rot: 0,
                scl: 0
            }, c.animationCache.animations[this.data.name].nextKey = {
                pos: 0,
                rot: 0,
                scl: 0
            }, c.animationCache.animations[this.data.name].originalMatrix = c.matrix);
            for (var d = c.animationCache.animations[this.data.name], e = 0; 3 > e; e++) {
                for (var f = this.keyTypes[e], g = this.data.hierarchy[a].keys[0], h = this.getNextKeyWith(f, a, 1); h.time < this.currentTime && h.index > g.index;) g = h, h = this.getNextKeyWith(f, a, h.index + 1);
                d.prevKey[f] = g, d.nextKey[f] = h
            }
        }
    }, THREE.Animation.prototype.resetBlendWeights = function() {
        for (var a = 0, b = this.hierarchy.length; b > a; a++) {
            var c = this.hierarchy[a];
            void 0 !== c.animationCache && (c.animationCache.blending.positionWeight = 0, c.animationCache.blending.quaternionWeight = 0, c.animationCache.blending.scaleWeight = 0)
        }
    }, THREE.Animation.prototype.update = function() {
        var a = [],
            b = new THREE.Vector3,
            c = new THREE.Vector3,
            d = new THREE.Quaternion,
            e = function(a, b) {
                var c, d, e, g, h, i, j, k, l, m = [],
                    n = [];
                return c = (a.length - 1) * b, d = Math.floor(c), e = c - d, m[0] = 0 === d ? d : d - 1, m[1] = d, m[2] = d > a.length - 2 ? d : d + 1, m[3] = d > a.length - 3 ? d : d + 2, i = a[m[0]], j = a[m[1]], k = a[m[2]], l = a[m[3]], g = e * e, h = e * g, n[0] = f(i[0], j[0], k[0], l[0], e, g, h), n[1] = f(i[1], j[1], k[1], l[1], e, g, h), n[2] = f(i[2], j[2], k[2], l[2], e, g, h), n
            },
            f = function(a, b, c, d, e, f, g) {
                var h = .5 * (c - a),
                    i = .5 * (d - b);
                return (2 * (b - c) + h + i) * g + (-3 * (b - c) - 2 * h - i) * f + h * e + b
            };
        return function(f) {
            if (this.isPlaying !== !1 && (this.currentTime += f * this.timeScale, 0 !== this.weight)) {
                var g = this.data.length;
                (this.currentTime > g || this.currentTime < 0) && (this.loop ? (this.currentTime %= g, this.currentTime < 0 && (this.currentTime += g), this.reset()) : this.stop());
                for (var h = 0, i = this.hierarchy.length; i > h; h++)
                    for (var j = this.hierarchy[h], k = j.animationCache.animations[this.data.name], l = j.animationCache.blending, m = 0; 3 > m; m++) {
                        var n = this.keyTypes[m],
                            o = k.prevKey[n],
                            p = k.nextKey[n];
                        if (this.timeScale > 0 && p.time <= this.currentTime || this.timeScale < 0 && o.time >= this.currentTime) {
                            for (o = this.data.hierarchy[h].keys[0], p = this.getNextKeyWith(n, h, 1); p.time < this.currentTime && p.index > o.index;) o = p, p = this.getNextKeyWith(n, h, p.index + 1);
                            k.prevKey[n] = o, k.nextKey[n] = p
                        }
                        var q = (this.currentTime - o.time) / (p.time - o.time),
                            r = o[n],
                            s = p[n];
                        if (0 > q && (q = 0), q > 1 && (q = 1), "pos" === n) {
                            if (this.interpolationType === THREE.AnimationHandler.LINEAR) {
                                c.x = r[0] + (s[0] - r[0]) * q, c.y = r[1] + (s[1] - r[1]) * q, c.z = r[2] + (s[2] - r[2]) * q;
                                var t = this.weight / (this.weight + l.positionWeight);
                                j.position.lerp(c, t), l.positionWeight += this.weight
                            } else if (this.interpolationType === THREE.AnimationHandler.CATMULLROM || this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD) {
                                a[0] = this.getPrevKeyWith("pos", h, o.index - 1).pos, a[1] = r, a[2] = s, a[3] = this.getNextKeyWith("pos", h, p.index + 1).pos, q = .33 * q + .33;
                                var u = e(a, q),
                                    t = this.weight / (this.weight + l.positionWeight);
                                l.positionWeight += this.weight;
                                var v = j.position;
                                if (v.x = v.x + (u[0] - v.x) * t, v.y = v.y + (u[1] - v.y) * t, v.z = v.z + (u[2] - v.z) * t, this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD) {
                                    var w = e(a, 1.01 * q);
                                    b.set(w[0], w[1], w[2]), b.sub(v), b.y = 0, b.normalize();
                                    var x = Math.atan2(b.x, b.z);
                                    j.rotation.set(0, x, 0)
                                }
                            }
                        } else if ("rot" === n)
                            if (THREE.Quaternion.slerp(r, s, d, q), 0 === l.quaternionWeight) j.quaternion.copy(d), l.quaternionWeight = this.weight;
                            else {
                                var t = this.weight / (this.weight + l.quaternionWeight);
                                THREE.Quaternion.slerp(j.quaternion, d, j.quaternion, t), l.quaternionWeight += this.weight
                            } else if ("scl" === n) {
                            c.x = r[0] + (s[0] - r[0]) * q, c.y = r[1] + (s[1] - r[1]) * q, c.z = r[2] + (s[2] - r[2]) * q;
                            var t = this.weight / (this.weight + l.scaleWeight);
                            j.scale.lerp(c, t), l.scaleWeight += this.weight
                        }
                    }
                return !0
            }
        }
    }(), THREE.Animation.prototype.getNextKeyWith = function(a, b, c) {
        var d = this.data.hierarchy[b].keys;
        for (this.interpolationType === THREE.AnimationHandler.CATMULLROM || this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ? c = c < d.length - 1 ? c : d.length - 1 : c %= d.length; c < d.length; c++)
            if (void 0 !== d[c][a]) return d[c];
        return this.data.hierarchy[b].keys[0]
    }, THREE.Animation.prototype.getPrevKeyWith = function(a, b, c) {
        var d = this.data.hierarchy[b].keys;
        for (c = this.interpolationType === THREE.AnimationHandler.CATMULLROM || this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ? c > 0 ? c : 0 : c >= 0 ? c : c + d.length; c >= 0; c--)
            if (void 0 !== d[c][a]) return d[c];
        return this.data.hierarchy[b].keys[d.length - 1]
    }, THREE.KeyFrameAnimation = function(a) {
        this.root = a.node, this.data = THREE.AnimationHandler.init(a), this.hierarchy = THREE.AnimationHandler.parse(this.root), this.currentTime = 0, this.timeScale = .001, this.isPlaying = !1, this.isPaused = !0, this.loop = !0;
        for (var b = 0, c = this.hierarchy.length; c > b; b++) {
            var d = this.data.hierarchy[b].keys,
                e = this.data.hierarchy[b].sids,
                f = this.hierarchy[b];
            if (d.length && e) {
                for (var g = 0; g < e.length; g++) {
                    var h = e[g],
                        i = this.getNextKeyWith(h, b, 0);
                    i && i.apply(h)
                }
                f.matrixAutoUpdate = !1, this.data.hierarchy[b].node.updateMatrix(), f.matrixWorldNeedsUpdate = !0
            }
        }
    }, THREE.KeyFrameAnimation.prototype.play = function(a) {
        if (this.currentTime = void 0 !== a ? a : 0, this.isPlaying === !1) {
            this.isPlaying = !0;
            var b, c, d, e = this.hierarchy.length;
            for (b = 0; e > b; b++) {
                c = this.hierarchy[b], d = this.data.hierarchy[b], void 0 === d.animationCache && (d.animationCache = {}, d.animationCache.prevKey = null, d.animationCache.nextKey = null, d.animationCache.originalMatrix = c.matrix);
                var f = this.data.hierarchy[b].keys;
                f.length && (d.animationCache.prevKey = f[0], d.animationCache.nextKey = f[1], this.startTime = Math.min(f[0].time, this.startTime), this.endTime = Math.max(f[f.length - 1].time, this.endTime))
            }
            this.update(0)
        }
        this.isPaused = !1, THREE.AnimationHandler.play(this)
    }, THREE.KeyFrameAnimation.prototype.stop = function() {
        this.isPlaying = !1, this.isPaused = !1, THREE.AnimationHandler.stop(this);
        for (var a = 0; a < this.data.hierarchy.length; a++) {
            var b = this.hierarchy[a],
                c = this.data.hierarchy[a];
            if (void 0 !== c.animationCache) {
                var d = c.animationCache.originalMatrix;
                d.copy(b.matrix), b.matrix = d, delete c.animationCache
            }
        }
    }, THREE.KeyFrameAnimation.prototype.update = function(a) {
        if (this.isPlaying !== !1) {
            this.currentTime += a * this.timeScale;
            var b = this.data.length;
            this.loop === !0 && this.currentTime > b && (this.currentTime %= b), this.currentTime = Math.min(this.currentTime, b);
            for (var c = 0, d = this.hierarchy.length; d > c; c++) {
                var e = this.hierarchy[c],
                    f = this.data.hierarchy[c],
                    g = f.keys,
                    h = f.animationCache;
                if (g.length) {
                    var i = h.prevKey,
                        j = h.nextKey;
                    if (j.time <= this.currentTime) {
                        for (; j.time < this.currentTime && j.index > i.index;) i = j, j = g[i.index + 1];
                        h.prevKey = i, h.nextKey = j
                    }
                    j.time >= this.currentTime ? i.interpolate(j, this.currentTime) : i.interpolate(j, j.time), this.data.hierarchy[c].node.updateMatrix(), e.matrixWorldNeedsUpdate = !0
                }
            }
        }
    }, THREE.KeyFrameAnimation.prototype.getNextKeyWith = function(a, b, c) {
        var d = this.data.hierarchy[b].keys;
        for (c %= d.length; c < d.length; c++)
            if (d[c].hasTarget(a)) return d[c];
        return d[0]
    }, THREE.KeyFrameAnimation.prototype.getPrevKeyWith = function(a, b, c) {
        var d = this.data.hierarchy[b].keys;
        for (c = c >= 0 ? c : c + d.length; c >= 0; c--)
            if (d[c].hasTarget(a)) return d[c];
        return d[d.length - 1]
    }, THREE.MorphAnimation = function(a) {
        this.mesh = a, this.frames = a.morphTargetInfluences.length, this.currentTime = 0, this.duration = 1e3, this.loop = !0, this.lastFrame = 0, this.currentFrame = 0, this.isPlaying = !1
    }, THREE.MorphAnimation.prototype = {
        constructor: THREE.MorphAnimation,
        play: function() {
            this.isPlaying = !0
        },
        pause: function() {
            this.isPlaying = !1
        },
        update: function(a) {
            if (this.isPlaying !== !1) {
                this.currentTime += a, this.loop === !0 && this.currentTime > this.duration && (this.currentTime %= this.duration), this.currentTime = Math.min(this.currentTime, this.duration);
                var b = this.duration / this.frames,
                    c = Math.floor(this.currentTime / b);
                c != this.currentFrame && (this.mesh.morphTargetInfluences[this.lastFrame] = 0, this.mesh.morphTargetInfluences[this.currentFrame] = 1, this.mesh.morphTargetInfluences[c] = 0, this.lastFrame = this.currentFrame, this.currentFrame = c), this.mesh.morphTargetInfluences[c] = this.currentTime % b / b, this.mesh.morphTargetInfluences[this.lastFrame] = 1 - this.mesh.morphTargetInfluences[c]
            }
        }
    }, THREE.BoxGeometry = function(a, b, c, d, e, f) {
        function g(a, b, c, d, e, f, g, i) {
            var j, k, l, m = h.widthSegments,
                n = h.heightSegments,
                o = e / 2,
                p = f / 2,
                q = h.vertices.length;
            "x" === a && "y" === b || "y" === a && "x" === b ? j = "z" : "x" === a && "z" === b || "z" === a && "x" === b ? (j = "y", n = h.depthSegments) : ("z" === a && "y" === b || "y" === a && "z" === b) && (j = "x", m = h.depthSegments);
            var r = m + 1,
                s = n + 1,
                t = e / m,
                u = f / n,
                v = new THREE.Vector3;
            for (v[j] = g > 0 ? 1 : -1, l = 0; s > l; l++)
                for (k = 0; r > k; k++) {
                    var w = new THREE.Vector3;
                    w[a] = (k * t - o) * c, w[b] = (l * u - p) * d, w[j] = g, h.vertices.push(w)
                }
            for (l = 0; n > l; l++)
                for (k = 0; m > k; k++) {
                    var x = k + r * l,
                        y = k + r * (l + 1),
                        z = k + 1 + r * (l + 1),
                        A = k + 1 + r * l,
                        B = new THREE.Vector2(k / m, 1 - l / n),
                        C = new THREE.Vector2(k / m, 1 - (l + 1) / n),
                        D = new THREE.Vector2((k + 1) / m, 1 - (l + 1) / n),
                        E = new THREE.Vector2((k + 1) / m, 1 - l / n),
                        F = new THREE.Face3(x + q, y + q, A + q);
                    F.normal.copy(v), F.vertexNormals.push(v.clone(), v.clone(), v.clone()), F.materialIndex = i, h.faces.push(F), h.faceVertexUvs[0].push([B, C, E]), F = new THREE.Face3(y + q, z + q, A + q), F.normal.copy(v), F.vertexNormals.push(v.clone(), v.clone(), v.clone()), F.materialIndex = i, h.faces.push(F), h.faceVertexUvs[0].push([C.clone(), D, E.clone()])
                }
        }
        THREE.Geometry.call(this), this.type = "BoxGeometry", this.parameters = {
            width: a,
            height: b,
            depth: c,
            widthSegments: d,
            heightSegments: e,
            depthSegments: f
        }, this.widthSegments = d || 1, this.heightSegments = e || 1, this.depthSegments = f || 1;
        var h = this,
            i = a / 2,
            j = b / 2,
            k = c / 2;
        g("z", "y", -1, -1, c, b, i, 0), g("z", "y", 1, -1, c, b, -i, 1), g("x", "z", 1, 1, a, c, j, 2), g("x", "z", 1, -1, a, c, -j, 3), g("x", "y", 1, -1, a, b, k, 4), g("x", "y", -1, -1, a, b, -k, 5), this.mergeVertices()
    }, THREE.BoxGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.BoxGeometry.prototype.constructor = THREE.BoxGeometry, THREE.CircleGeometry = function(a, b, c, d) {
        THREE.Geometry.call(this), this.type = "CircleGeometry", this.parameters = {
            radius: a,
            segments: b,
            thetaStart: c,
            thetaLength: d
        }, a = a || 50, b = void 0 !== b ? Math.max(3, b) : 8, c = void 0 !== c ? c : 0, d = void 0 !== d ? d : 2 * Math.PI;
        var e, f = [],
            g = new THREE.Vector3,
            h = new THREE.Vector2(.5, .5);
        for (this.vertices.push(g), f.push(h), e = 0; b >= e; e++) {
            var i = new THREE.Vector3,
                j = c + e / b * d;
            i.x = a * Math.cos(j), i.y = a * Math.sin(j), this.vertices.push(i), f.push(new THREE.Vector2((i.x / a + 1) / 2, (i.y / a + 1) / 2))
        }
        var k = new THREE.Vector3(0, 0, 1);
        for (e = 1; b >= e; e++) this.faces.push(new THREE.Face3(e, e + 1, 0, [k.clone(), k.clone(), k.clone()])), this.faceVertexUvs[0].push([f[e].clone(), f[e + 1].clone(), h.clone()]);
        this.computeFaceNormals(), this.boundingSphere = new THREE.Sphere(new THREE.Vector3, a)
    }, THREE.CircleGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.CircleGeometry.prototype.constructor = THREE.CircleGeometry, THREE.CubeGeometry = function(a, b, c, d, e, f) {
        return console.warn("THREE.CubeGeometry has been renamed to THREE.BoxGeometry."), new THREE.BoxGeometry(a, b, c, d, e, f)
    }, THREE.CylinderGeometry = function(a, b, c, d, e, f, g, h) {
        THREE.Geometry.call(this), this.type = "CylinderGeometry", this.parameters = {
            radiusTop: a,
            radiusBottom: b,
            height: c,
            radialSegments: d,
            heightSegments: e,
            openEnded: f,
            thetaStart: g,
            thetaLength: h
        }, a = void 0 !== a ? a : 20, b = void 0 !== b ? b : 20, c = void 0 !== c ? c : 100, d = d || 8, e = e || 1, f = void 0 !== f ? f : !1, g = void 0 !== g ? g : 0, h = void 0 !== h ? h : 2 * Math.PI;
        var i, j, k = c / 2,
            l = [],
            m = [];
        for (j = 0; e >= j; j++) {
            var n = [],
                o = [],
                p = j / e,
                q = p * (b - a) + a;
            for (i = 0; d >= i; i++) {
                var r = i / d,
                    s = new THREE.Vector3;
                s.x = q * Math.sin(r * h + g), s.y = -p * c + k, s.z = q * Math.cos(r * h + g), this.vertices.push(s), n.push(this.vertices.length - 1), o.push(new THREE.Vector2(r, 1 - p))
            }
            l.push(n), m.push(o)
        }
        var t, u, v = (b - a) / c;
        for (i = 0; d > i; i++)
            for (0 !== a ? (t = this.vertices[l[0][i]].clone(), u = this.vertices[l[0][i + 1]].clone()) : (t = this.vertices[l[1][i]].clone(), u = this.vertices[l[1][i + 1]].clone()), t.setY(Math.sqrt(t.x * t.x + t.z * t.z) * v).normalize(), u.setY(Math.sqrt(u.x * u.x + u.z * u.z) * v).normalize(), j = 0; e > j; j++) {
                var w = l[j][i],
                    x = l[j + 1][i],
                    y = l[j + 1][i + 1],
                    z = l[j][i + 1],
                    A = t.clone(),
                    B = t.clone(),
                    C = u.clone(),
                    D = u.clone(),
                    E = m[j][i].clone(),
                    F = m[j + 1][i].clone(),
                    G = m[j + 1][i + 1].clone(),
                    H = m[j][i + 1].clone();
                this.faces.push(new THREE.Face3(w, x, z, [A, B, D])), this.faceVertexUvs[0].push([E, F, H]), this.faces.push(new THREE.Face3(x, y, z, [B.clone(), C, D.clone()])), this.faceVertexUvs[0].push([F.clone(), G, H.clone()])
            }
        if (f === !1 && a > 0)
            for (this.vertices.push(new THREE.Vector3(0, k, 0)), i = 0; d > i; i++) {
                var w = l[0][i],
                    x = l[0][i + 1],
                    y = this.vertices.length - 1,
                    A = new THREE.Vector3(0, 1, 0),
                    B = new THREE.Vector3(0, 1, 0),
                    C = new THREE.Vector3(0, 1, 0),
                    E = m[0][i].clone(),
                    F = m[0][i + 1].clone(),
                    G = new THREE.Vector2(F.x, 0);
                this.faces.push(new THREE.Face3(w, x, y, [A, B, C])), this.faceVertexUvs[0].push([E, F, G])
            }
        if (f === !1 && b > 0)
            for (this.vertices.push(new THREE.Vector3(0, -k, 0)), i = 0; d > i; i++) {
                var w = l[e][i + 1],
                    x = l[e][i],
                    y = this.vertices.length - 1,
                    A = new THREE.Vector3(0, -1, 0),
                    B = new THREE.Vector3(0, -1, 0),
                    C = new THREE.Vector3(0, -1, 0),
                    E = m[e][i + 1].clone(),
                    F = m[e][i].clone(),
                    G = new THREE.Vector2(F.x, 1);
                this.faces.push(new THREE.Face3(w, x, y, [A, B, C])), this.faceVertexUvs[0].push([E, F, G])
            }
        this.computeFaceNormals()
    }, THREE.CylinderGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.CylinderGeometry.prototype.constructor = THREE.CylinderGeometry, THREE.ExtrudeGeometry = function(a, b) {
        return "undefined" == typeof a ? void(a = []) : (THREE.Geometry.call(this), this.type = "ExtrudeGeometry", a = a instanceof Array ? a : [a], this.addShapeList(a, b), void this.computeFaceNormals())
    }, THREE.ExtrudeGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.ExtrudeGeometry.prototype.constructor = THREE.ExtrudeGeometry, THREE.ExtrudeGeometry.prototype.addShapeList = function(a, b) {
        for (var c = a.length, d = 0; c > d; d++) {
            var e = a[d];
            this.addShape(e, b)
        }
    }, THREE.ExtrudeGeometry.prototype.addShape = function(a, b) {
        function c(a, b, c) {
            return b || console.log("die"), b.clone().multiplyScalar(c).add(a)
        }

        function d(a, b, c) {
            var d, e, f = 1e-10,
                g = 1,
                h = a.x - b.x,
                i = a.y - b.y,
                j = c.x - a.x,
                k = c.y - a.y,
                l = h * h + i * i,
                m = h * k - i * j;
            if (Math.abs(m) > f) {
                var n = Math.sqrt(l),
                    o = Math.sqrt(j * j + k * k),
                    p = b.x - i / n,
                    q = b.y + h / n,
                    r = c.x - k / o,
                    s = c.y + j / o,
                    t = ((r - p) * k - (s - q) * j) / (h * k - i * j);
                d = p + h * t - a.x, e = q + i * t - a.y;
                var u = d * d + e * e;
                if (2 >= u) return new THREE.Vector2(d, e);
                g = Math.sqrt(u / 2)
            } else {
                var v = !1;
                h > f ? j > f && (v = !0) : -f > h ? -f > j && (v = !0) : Math.sign(i) == Math.sign(k) && (v = !0), v ? (d = -i, e = h, g = Math.sqrt(l)) : (d = h, e = i, g = Math.sqrt(l / 2))
            }
            return new THREE.Vector2(d / g, e / g)
        }

        function e() {
            if (t) {
                var a = 0,
                    b = S * a;
                for (V = 0; T > V; V++) R = K[V], i(R[2] + b, R[1] + b, R[0] + b);
                for (a = v + 2 * s, b = S * a, V = 0; T > V; V++) R = K[V], i(R[0] + b, R[1] + b, R[2] + b)
            } else {
                for (V = 0; T > V; V++) R = K[V], i(R[2], R[1], R[0]);
                for (V = 0; T > V; V++) R = K[V], i(R[0] + S * v, R[1] + S * v, R[2] + S * v)
            }
        }

        function f() {
            var a = 0;
            for (g(L, a), a += L.length, C = 0, D = I.length; D > C; C++) B = I[C], g(B, a), a += B.length
        }

        function g(a, b) {
            var c, d;
            for (V = a.length; --V >= 0;) {
                c = V, d = V - 1, 0 > d && (d = a.length - 1);
                var e = 0,
                    f = v + 2 * s;
                for (e = 0; f > e; e++) {
                    var g = S * e,
                        h = S * (e + 1),
                        i = b + c + g,
                        k = b + d + g,
                        l = b + d + h,
                        m = b + c + h;
                    j(i, k, l, m, a, e, f, c, d)
                }
            }
        }

        function h(a, b, c) {
            E.vertices.push(new THREE.Vector3(a, b, c))
        }

        function i(a, b, c) {
            a += F, b += F, c += F, E.faces.push(new THREE.Face3(a, b, c, null, null, y));
            var d = A.generateTopUV(E, a, b, c);
            E.faceVertexUvs[0].push(d)
        }

        function j(a, b, c, d) {
            a += F, b += F, c += F, d += F, E.faces.push(new THREE.Face3(a, b, d, null, null, z)), E.faces.push(new THREE.Face3(b, c, d, null, null, z));
            var e = A.generateSideWallUV(E, a, b, c, d);
            E.faceVertexUvs[0].push([e[0], e[1], e[3]]), E.faceVertexUvs[0].push([e[1], e[2], e[3]])
        }
        var k, l, m, n, o, p = void 0 !== b.amount ? b.amount : 100,
            q = void 0 !== b.bevelThickness ? b.bevelThickness : 6,
            r = void 0 !== b.bevelSize ? b.bevelSize : q - 2,
            s = void 0 !== b.bevelSegments ? b.bevelSegments : 3,
            t = void 0 !== b.bevelEnabled ? b.bevelEnabled : !0,
            u = void 0 !== b.curveSegments ? b.curveSegments : 12,
            v = void 0 !== b.steps ? b.steps : 1,
            w = b.extrudePath,
            x = !1,
            y = b.material,
            z = b.extrudeMaterial,
            A = void 0 !== b.UVGenerator ? b.UVGenerator : THREE.ExtrudeGeometry.WorldUVGenerator;
        w && (k = w.getSpacedPoints(v), x = !0, t = !1, l = void 0 !== b.frames ? b.frames : new THREE.TubeGeometry.FrenetFrames(w, v, !1), m = new THREE.Vector3, n = new THREE.Vector3, o = new THREE.Vector3), t || (s = 0, q = 0, r = 0);
        var B, C, D, E = this,
            F = this.vertices.length,
            G = a.extractPoints(u),
            H = G.shape,
            I = G.holes,
            J = !THREE.Shape.Utils.isClockWise(H);
        if (J) {
            for (H = H.reverse(), C = 0, D = I.length; D > C; C++) B = I[C], THREE.Shape.Utils.isClockWise(B) && (I[C] = B.reverse());
            J = !1
        }
        var K = THREE.Shape.Utils.triangulateShape(H, I),
            L = H;
        for (C = 0, D = I.length; D > C; C++) B = I[C], H = H.concat(B);
        for (var M, N, O, P, Q, R, S = H.length, T = K.length, U = (L.length, 180 / Math.PI, []), V = 0, W = L.length, X = W - 1, Y = V + 1; W > V; V++, X++, Y++) {
            X === W && (X = 0), Y === W && (Y = 0); {
                L[V], L[X], L[Y]
            }
            U[V] = d(L[V], L[X], L[Y])
        }
        var Z, $ = [],
            _ = U.concat();
        for (C = 0, D = I.length; D > C; C++) {
            for (B = I[C], Z = [], V = 0, W = B.length, X = W - 1, Y = V + 1; W > V; V++, X++, Y++) X === W && (X = 0), Y === W && (Y = 0), Z[V] = d(B[V], B[X], B[Y]);
            $.push(Z), _ = _.concat(Z)
        }
        for (M = 0; s > M; M++) {
            for (O = M / s, P = q * (1 - O), N = r * Math.sin(O * Math.PI / 2), V = 0, W = L.length; W > V; V++) Q = c(L[V], U[V], N), h(Q.x, Q.y, -P);
            for (C = 0, D = I.length; D > C; C++)
                for (B = I[C], Z = $[C], V = 0, W = B.length; W > V; V++) Q = c(B[V], Z[V], N), h(Q.x, Q.y, -P)
        }
        for (N = r, V = 0; S > V; V++) Q = t ? c(H[V], _[V], N) : H[V], x ? (n.copy(l.normals[0]).multiplyScalar(Q.x), m.copy(l.binormals[0]).multiplyScalar(Q.y), o.copy(k[0]).add(n).add(m), h(o.x, o.y, o.z)) : h(Q.x, Q.y, 0);
        var aa;
        for (aa = 1; v >= aa; aa++)
            for (V = 0; S > V; V++) Q = t ? c(H[V], _[V], N) : H[V], x ? (n.copy(l.normals[aa]).multiplyScalar(Q.x), m.copy(l.binormals[aa]).multiplyScalar(Q.y), o.copy(k[aa]).add(n).add(m), h(o.x, o.y, o.z)) : h(Q.x, Q.y, p / v * aa);
        for (M = s - 1; M >= 0; M--) {
            for (O = M / s, P = q * (1 - O), N = r * Math.sin(O * Math.PI / 2), V = 0, W = L.length; W > V; V++) Q = c(L[V], U[V], N), h(Q.x, Q.y, p + P);
            for (C = 0, D = I.length; D > C; C++)
                for (B = I[C], Z = $[C], V = 0, W = B.length; W > V; V++) Q = c(B[V], Z[V], N), x ? h(Q.x, Q.y + k[v - 1].y, k[v - 1].x + P) : h(Q.x, Q.y, p + P)
        }
        e(), f()
    }, THREE.ExtrudeGeometry.WorldUVGenerator = {
        generateTopUV: function(a, b, c, d) {
            var e = a.vertices,
                f = e[b],
                g = e[c],
                h = e[d];
            return [new THREE.Vector2(f.x, f.y), new THREE.Vector2(g.x, g.y), new THREE.Vector2(h.x, h.y)]
        },
        generateSideWallUV: function(a, b, c, d, e) {
            var f = a.vertices,
                g = f[b],
                h = f[c],
                i = f[d],
                j = f[e];
            return Math.abs(g.y - h.y) < .01 ? [new THREE.Vector2(g.x, 1 - g.z), new THREE.Vector2(h.x, 1 - h.z), new THREE.Vector2(i.x, 1 - i.z), new THREE.Vector2(j.x, 1 - j.z)] : [new THREE.Vector2(g.y, 1 - g.z), new THREE.Vector2(h.y, 1 - h.z), new THREE.Vector2(i.y, 1 - i.z), new THREE.Vector2(j.y, 1 - j.z)]
        }
    }, THREE.ShapeGeometry = function(a, b) {
        THREE.Geometry.call(this), this.type = "ShapeGeometry", a instanceof Array == !1 && (a = [a]), this.addShapeList(a, b), this.computeFaceNormals()
    }, THREE.ShapeGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.ShapeGeometry.prototype.constructor = THREE.ShapeGeometry, THREE.ShapeGeometry.prototype.addShapeList = function(a, b) {
        for (var c = 0, d = a.length; d > c; c++) this.addShape(a[c], b);
        return this
    }, THREE.ShapeGeometry.prototype.addShape = function(a, b) {
        void 0 === b && (b = {});
        var c, d, e, f = void 0 !== b.curveSegments ? b.curveSegments : 12,
            g = b.material,
            h = void 0 === b.UVGenerator ? THREE.ExtrudeGeometry.WorldUVGenerator : b.UVGenerator,
            i = this.vertices.length,
            j = a.extractPoints(f),
            k = j.shape,
            l = j.holes,
            m = !THREE.Shape.Utils.isClockWise(k);
        if (m) {
            for (k = k.reverse(), c = 0, d = l.length; d > c; c++) e = l[c], THREE.Shape.Utils.isClockWise(e) && (l[c] = e.reverse());
            m = !1
        }
        var n = THREE.Shape.Utils.triangulateShape(k, l),
            o = k;
        for (c = 0, d = l.length; d > c; c++) e = l[c], k = k.concat(e); {
            var p, q, r = k.length,
                s = n.length;
            o.length
        }
        for (c = 0; r > c; c++) p = k[c], this.vertices.push(new THREE.Vector3(p.x, p.y, 0));
        for (c = 0; s > c; c++) {
            q = n[c];
            var t = q[0] + i,
                u = q[1] + i,
                v = q[2] + i;
            this.faces.push(new THREE.Face3(t, u, v, null, null, g)), this.faceVertexUvs[0].push(h.generateTopUV(this, t, u, v))
        }
    }, THREE.LatheGeometry = function(a, b, c, d) {
        THREE.Geometry.call(this), this.type = "LatheGeometry", this.parameters = {
            points: a,
            segments: b,
            phiStart: c,
            phiLength: d
        }, b = b || 12, c = c || 0, d = d || 2 * Math.PI;
        for (var e = 1 / (a.length - 1), f = 1 / b, g = 0, h = b; h >= g; g++)
            for (var i = c + g * f * d, j = Math.cos(i), k = Math.sin(i), l = 0, m = a.length; m > l; l++) {
                var n = a[l],
                    o = new THREE.Vector3;
                o.x = j * n.x - k * n.y, o.y = k * n.x + j * n.y, o.z = n.z, this.vertices.push(o)
            }
        for (var p = a.length, g = 0, h = b; h > g; g++)
            for (var l = 0, m = a.length - 1; m > l; l++) {
                var q = l + p * g,
                    r = q,
                    s = q + p,
                    j = q + 1 + p,
                    t = q + 1,
                    u = g * f,
                    v = l * e,
                    w = u + f,
                    x = v + e;
                this.faces.push(new THREE.Face3(r, s, t)), this.faceVertexUvs[0].push([new THREE.Vector2(u, v), new THREE.Vector2(w, v), new THREE.Vector2(u, x)]), this.faces.push(new THREE.Face3(s, j, t)), this.faceVertexUvs[0].push([new THREE.Vector2(w, v), new THREE.Vector2(w, x), new THREE.Vector2(u, x)])
            }
        this.mergeVertices(), this.computeFaceNormals(), this.computeVertexNormals()
    }, THREE.LatheGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.LatheGeometry.prototype.constructor = THREE.LatheGeometry, THREE.PlaneGeometry = function(a, b, c, d) {
        console.info("THREE.PlaneGeometry: Consider using THREE.PlaneBufferGeometry for lower memory footprint."), THREE.Geometry.call(this), this.type = "PlaneGeometry", this.parameters = {
            width: a,
            height: b,
            widthSegments: c,
            heightSegments: d
        }, this.fromBufferGeometry(new THREE.PlaneBufferGeometry(a, b, c, d))
    }, THREE.PlaneGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.PlaneGeometry.prototype.constructor = THREE.PlaneGeometry, THREE.PlaneBufferGeometry = function(a, b, c, d) {
        THREE.BufferGeometry.call(this), this.type = "PlaneBufferGeometry", this.parameters = {
            width: a,
            height: b,
            widthSegments: c,
            heightSegments: d
        };
        for (var e = a / 2, f = b / 2, g = c || 1, h = d || 1, i = g + 1, j = h + 1, k = a / g, l = b / h, m = new Float32Array(i * j * 3), n = new Float32Array(i * j * 3), o = new Float32Array(i * j * 2), p = 0, q = 0, r = 0; j > r; r++)
            for (var s = r * l - f, t = 0; i > t; t++) {
                var u = t * k - e;
                m[p] = u, m[p + 1] = -s, n[p + 2] = 1, o[q] = t / g, o[q + 1] = 1 - r / h, p += 3, q += 2
            }
        p = 0;
        for (var v = new(m.length / 3 > 65535 ? Uint32Array : Uint16Array)(g * h * 6), r = 0; h > r; r++)
            for (var t = 0; g > t; t++) {
                var w = t + i * r,
                    x = t + i * (r + 1),
                    y = t + 1 + i * (r + 1),
                    z = t + 1 + i * r;
                v[p] = w, v[p + 1] = x, v[p + 2] = z, v[p + 3] = x, v[p + 4] = y, v[p + 5] = z, p += 6
            }
        this.addAttribute("index", new THREE.BufferAttribute(v, 1)), this.addAttribute("position", new THREE.BufferAttribute(m, 3)), this.addAttribute("normal", new THREE.BufferAttribute(n, 3)), this.addAttribute("uv", new THREE.BufferAttribute(o, 2))
    }, THREE.PlaneBufferGeometry.prototype = Object.create(THREE.BufferGeometry.prototype), THREE.PlaneBufferGeometry.prototype.constructor = THREE.PlaneBufferGeometry, THREE.RingGeometry = function(a, b, c, d, e, f) {
        THREE.Geometry.call(this), this.type = "RingGeometry", this.parameters = {
            innerRadius: a,
            outerRadius: b,
            thetaSegments: c,
            phiSegments: d,
            thetaStart: e,
            thetaLength: f
        }, a = a || 0, b = b || 50, e = void 0 !== e ? e : 0, f = void 0 !== f ? f : 2 * Math.PI, c = void 0 !== c ? Math.max(3, c) : 8, d = void 0 !== d ? Math.max(1, d) : 8;
        var g, h, i = [],
            j = a,
            k = (b - a) / d;
        for (g = 0; d + 1 > g; g++) {
            for (h = 0; c + 1 > h; h++) {
                var l = new THREE.Vector3,
                    m = e + h / c * f;
                l.x = j * Math.cos(m), l.y = j * Math.sin(m), this.vertices.push(l), i.push(new THREE.Vector2((l.x / b + 1) / 2, (l.y / b + 1) / 2))
            }
            j += k
        }
        var n = new THREE.Vector3(0, 0, 1);
        for (g = 0; d > g; g++) {
            var o = g * (c + 1);
            for (h = 0; c > h; h++) {
                var m = h + o,
                    p = m,
                    q = m + c + 1,
                    r = m + c + 2;
                this.faces.push(new THREE.Face3(p, q, r, [n.clone(), n.clone(), n.clone()])), this.faceVertexUvs[0].push([i[p].clone(), i[q].clone(), i[r].clone()]), p = m, q = m + c + 2, r = m + 1, this.faces.push(new THREE.Face3(p, q, r, [n.clone(), n.clone(), n.clone()])), this.faceVertexUvs[0].push([i[p].clone(), i[q].clone(), i[r].clone()])
            }
        }
        this.computeFaceNormals(), this.boundingSphere = new THREE.Sphere(new THREE.Vector3, j)
    }, THREE.RingGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.RingGeometry.prototype.constructor = THREE.RingGeometry, THREE.SphereGeometry = function(a, b, c, d, e, f, g) {
        THREE.Geometry.call(this), this.type = "SphereGeometry", this.parameters = {
            radius: a,
            widthSegments: b,
            heightSegments: c,
            phiStart: d,
            phiLength: e,
            thetaStart: f,
            thetaLength: g
        }, a = a || 50, b = Math.max(3, Math.floor(b) || 8), c = Math.max(2, Math.floor(c) || 6), d = void 0 !== d ? d : 0, e = void 0 !== e ? e : 2 * Math.PI, f = void 0 !== f ? f : 0, g = void 0 !== g ? g : Math.PI;
        var h, i, j = [],
            k = [];
        for (i = 0; c >= i; i++) {
            var l = [],
                m = [];
            for (h = 0; b >= h; h++) {
                var n = h / b,
                    o = i / c,
                    p = new THREE.Vector3;
                p.x = -a * Math.cos(d + n * e) * Math.sin(f + o * g), p.y = a * Math.cos(f + o * g), p.z = a * Math.sin(d + n * e) * Math.sin(f + o * g), this.vertices.push(p), l.push(this.vertices.length - 1), m.push(new THREE.Vector2(n, 1 - o))
            }
            j.push(l), k.push(m)
        }
        for (i = 0; c > i; i++)
            for (h = 0; b > h; h++) {
                var q = j[i][h + 1],
                    r = j[i][h],
                    s = j[i + 1][h],
                    t = j[i + 1][h + 1],
                    u = this.vertices[q].clone().normalize(),
                    v = this.vertices[r].clone().normalize(),
                    w = this.vertices[s].clone().normalize(),
                    x = this.vertices[t].clone().normalize(),
                    y = k[i][h + 1].clone(),
                    z = k[i][h].clone(),
                    A = k[i + 1][h].clone(),
                    B = k[i + 1][h + 1].clone();
                Math.abs(this.vertices[q].y) === a ? (y.x = (y.x + z.x) / 2, this.faces.push(new THREE.Face3(q, s, t, [u, w, x])), this.faceVertexUvs[0].push([y, A, B])) : Math.abs(this.vertices[s].y) === a ? (A.x = (A.x + B.x) / 2, this.faces.push(new THREE.Face3(q, r, s, [u, v, w])), this.faceVertexUvs[0].push([y, z, A])) : (this.faces.push(new THREE.Face3(q, r, t, [u, v, x])), this.faceVertexUvs[0].push([y, z, B]), this.faces.push(new THREE.Face3(r, s, t, [v.clone(), w, x.clone()])), this.faceVertexUvs[0].push([z.clone(), A, B.clone()]))
            }
        this.computeFaceNormals(), this.boundingSphere = new THREE.Sphere(new THREE.Vector3, a)
    }, THREE.SphereGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.SphereGeometry.prototype.constructor = THREE.SphereGeometry, THREE.TextGeometry = function(a, b) {
        b = b || {};
        var c = THREE.FontUtils.generateShapes(a, b);
        b.amount = void 0 !== b.height ? b.height : 50, void 0 === b.bevelThickness && (b.bevelThickness = 10), void 0 === b.bevelSize && (b.bevelSize = 8), void 0 === b.bevelEnabled && (b.bevelEnabled = !1), THREE.ExtrudeGeometry.call(this, c, b), this.type = "TextGeometry"
    }, THREE.TextGeometry.prototype = Object.create(THREE.ExtrudeGeometry.prototype),
    THREE.TextGeometry.prototype.constructor = THREE.TextGeometry, THREE.TorusGeometry = function(a, b, c, d, e) {
        THREE.Geometry.call(this), this.type = "TorusGeometry", this.parameters = {
            radius: a,
            tube: b,
            radialSegments: c,
            tubularSegments: d,
            arc: e
        }, a = a || 100, b = b || 40, c = c || 8, d = d || 6, e = e || 2 * Math.PI;
        for (var f = new THREE.Vector3, g = [], h = [], i = 0; c >= i; i++)
            for (var j = 0; d >= j; j++) {
                var k = j / d * e,
                    l = i / c * Math.PI * 2;
                f.x = a * Math.cos(k), f.y = a * Math.sin(k);
                var m = new THREE.Vector3;
                m.x = (a + b * Math.cos(l)) * Math.cos(k), m.y = (a + b * Math.cos(l)) * Math.sin(k), m.z = b * Math.sin(l), this.vertices.push(m), g.push(new THREE.Vector2(j / d, i / c)), h.push(m.clone().sub(f).normalize())
            }
        for (var i = 1; c >= i; i++)
            for (var j = 1; d >= j; j++) {
                var n = (d + 1) * i + j - 1,
                    o = (d + 1) * (i - 1) + j - 1,
                    p = (d + 1) * (i - 1) + j,
                    q = (d + 1) * i + j,
                    r = new THREE.Face3(n, o, q, [h[n].clone(), h[o].clone(), h[q].clone()]);
                this.faces.push(r), this.faceVertexUvs[0].push([g[n].clone(), g[o].clone(), g[q].clone()]), r = new THREE.Face3(o, p, q, [h[o].clone(), h[p].clone(), h[q].clone()]), this.faces.push(r), this.faceVertexUvs[0].push([g[o].clone(), g[p].clone(), g[q].clone()])
            }
        this.computeFaceNormals()
    }, THREE.TorusGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.TorusGeometry.prototype.constructor = THREE.TorusGeometry, THREE.TorusKnotGeometry = function(a, b, c, d, e, f, g) {
        function h(a, b, c, d, e) {
            var f = Math.cos(a),
                g = Math.sin(a),
                h = b / c * a,
                i = Math.cos(h),
                j = d * (2 + i) * .5 * f,
                k = d * (2 + i) * g * .5,
                l = e * d * Math.sin(h) * .5;
            return new THREE.Vector3(j, k, l)
        }
        THREE.Geometry.call(this), this.type = "TorusKnotGeometry", this.parameters = {
            radius: a,
            tube: b,
            radialSegments: c,
            tubularSegments: d,
            p: e,
            q: f,
            heightScale: g
        }, a = a || 100, b = b || 40, c = c || 64, d = d || 8, e = e || 2, f = f || 3, g = g || 1;
        for (var i = new Array(c), j = new THREE.Vector3, k = new THREE.Vector3, l = new THREE.Vector3, m = 0; c > m; ++m) {
            i[m] = new Array(d);
            var n = m / c * 2 * e * Math.PI,
                o = h(n, f, e, a, g),
                p = h(n + .01, f, e, a, g);
            j.subVectors(p, o), k.addVectors(p, o), l.crossVectors(j, k), k.crossVectors(l, j), l.normalize(), k.normalize();
            for (var q = 0; d > q; ++q) {
                var r = q / d * 2 * Math.PI,
                    s = -b * Math.cos(r),
                    t = b * Math.sin(r),
                    u = new THREE.Vector3;
                u.x = o.x + s * k.x + t * l.x, u.y = o.y + s * k.y + t * l.y, u.z = o.z + s * k.z + t * l.z, i[m][q] = this.vertices.push(u) - 1
            }
        }
        for (var m = 0; c > m; ++m)
            for (var q = 0; d > q; ++q) {
                var v = (m + 1) % c,
                    w = (q + 1) % d,
                    x = i[m][q],
                    y = i[v][q],
                    z = i[v][w],
                    A = i[m][w],
                    B = new THREE.Vector2(m / c, q / d),
                    C = new THREE.Vector2((m + 1) / c, q / d),
                    D = new THREE.Vector2((m + 1) / c, (q + 1) / d),
                    E = new THREE.Vector2(m / c, (q + 1) / d);
                this.faces.push(new THREE.Face3(x, y, A)), this.faceVertexUvs[0].push([B, C, E]), this.faces.push(new THREE.Face3(y, z, A)), this.faceVertexUvs[0].push([C.clone(), D, E.clone()])
            }
        this.computeFaceNormals(), this.computeVertexNormals()
    }, THREE.TorusKnotGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.TorusKnotGeometry.prototype.constructor = THREE.TorusKnotGeometry, THREE.TubeGeometry = function(a, b, c, d, e, f) {
        function g(a, b, c) {
            return D.vertices.push(new THREE.Vector3(a, b, c)) - 1
        }
        THREE.Geometry.call(this), this.type = "TubeGeometry", this.parameters = {
            path: a,
            segments: b,
            radius: c,
            radialSegments: d,
            closed: e
        }, b = b || 64, c = c || 1, d = d || 8, e = e || !1, f = f || THREE.TubeGeometry.NoTaper;
        var h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, A, B, C = [],
            D = this,
            E = b + 1,
            F = new THREE.Vector3,
            G = new THREE.TubeGeometry.FrenetFrames(a, b, e),
            H = G.tangents,
            I = G.normals,
            J = G.binormals;
        for (this.tangents = H, this.normals = I, this.binormals = J, q = 0; E > q; q++)
            for (C[q] = [], k = q / (E - 1), p = a.getPointAt(k), h = H[q], i = I[q], j = J[q], m = c * f(k), r = 0; d > r; r++) l = r / d * 2 * Math.PI, n = -m * Math.cos(l), o = m * Math.sin(l), F.copy(p), F.x += n * i.x + o * j.x, F.y += n * i.y + o * j.y, F.z += n * i.z + o * j.z, C[q][r] = g(F.x, F.y, F.z);
        for (q = 0; b > q; q++)
            for (r = 0; d > r; r++) s = e ? (q + 1) % b : q + 1, t = (r + 1) % d, u = C[q][r], v = C[s][r], w = C[s][t], x = C[q][t], y = new THREE.Vector2(q / b, r / d), z = new THREE.Vector2((q + 1) / b, r / d), A = new THREE.Vector2((q + 1) / b, (r + 1) / d), B = new THREE.Vector2(q / b, (r + 1) / d), this.faces.push(new THREE.Face3(u, v, x)), this.faceVertexUvs[0].push([y, z, B]), this.faces.push(new THREE.Face3(v, w, x)), this.faceVertexUvs[0].push([z.clone(), A, B.clone()]);
        this.computeFaceNormals(), this.computeVertexNormals()
    }, THREE.TubeGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.TubeGeometry.prototype.constructor = THREE.TubeGeometry, THREE.TubeGeometry.NoTaper = function() {
        return 1
    }, THREE.TubeGeometry.SinusoidalTaper = function(a) {
        return Math.sin(Math.PI * a)
    }, THREE.TubeGeometry.FrenetFrames = function(a, b, c) {
        function d() {
            n[0] = new THREE.Vector3, o[0] = new THREE.Vector3, f = Number.MAX_VALUE, g = Math.abs(m[0].x), h = Math.abs(m[0].y), i = Math.abs(m[0].z), f >= g && (f = g, l.set(1, 0, 0)), f >= h && (f = h, l.set(0, 1, 0)), f >= i && l.set(0, 0, 1), p.crossVectors(m[0], l).normalize(), n[0].crossVectors(m[0], p), o[0].crossVectors(m[0], n[0])
        }
        var e, f, g, h, i, j, k, l = (new THREE.Vector3, new THREE.Vector3),
            m = (new THREE.Vector3, []),
            n = [],
            o = [],
            p = new THREE.Vector3,
            q = new THREE.Matrix4,
            r = b + 1,
            s = 1e-4;
        for (this.tangents = m, this.normals = n, this.binormals = o, j = 0; r > j; j++) k = j / (r - 1), m[j] = a.getTangentAt(k), m[j].normalize();
        for (d(), j = 1; r > j; j++) n[j] = n[j - 1].clone(), o[j] = o[j - 1].clone(), p.crossVectors(m[j - 1], m[j]), p.length() > s && (p.normalize(), e = Math.acos(THREE.Math.clamp(m[j - 1].dot(m[j]), -1, 1)), n[j].applyMatrix4(q.makeRotationAxis(p, e))), o[j].crossVectors(m[j], n[j]);
        if (c)
            for (e = Math.acos(THREE.Math.clamp(n[0].dot(n[r - 1]), -1, 1)), e /= r - 1, m[0].dot(p.crossVectors(n[0], n[r - 1])) > 0 && (e = -e), j = 1; r > j; j++) n[j].applyMatrix4(q.makeRotationAxis(m[j], e * j)), o[j].crossVectors(m[j], n[j])
    }, THREE.PolyhedronGeometry = function(a, b, c, d) {
        function e(a) {
            var b = a.normalize().clone();
            b.index = k.vertices.push(b) - 1;
            var c = h(a) / 2 / Math.PI + .5,
                d = i(a) / Math.PI + .5;
            return b.uv = new THREE.Vector2(c, 1 - d), b
        }

        function f(a, b, c) {
            var d = new THREE.Face3(a.index, b.index, c.index, [a.clone(), b.clone(), c.clone()]);
            k.faces.push(d), t.copy(a).add(b).add(c).divideScalar(3);
            var e = h(t);
            k.faceVertexUvs[0].push([j(a.uv, a, e), j(b.uv, b, e), j(c.uv, c, e)])
        }

        function g(a, b) {
            for (var c = Math.pow(2, b), d = (Math.pow(4, b), e(k.vertices[a.a])), g = e(k.vertices[a.b]), h = e(k.vertices[a.c]), i = [], j = 0; c >= j; j++) {
                i[j] = [];
                for (var l = e(d.clone().lerp(h, j / c)), m = e(g.clone().lerp(h, j / c)), n = c - j, o = 0; n >= o; o++) i[j][o] = 0 == o && j == c ? l : e(l.clone().lerp(m, o / n))
            }
            for (var j = 0; c > j; j++)
                for (var o = 0; 2 * (c - j) - 1 > o; o++) {
                    var p = Math.floor(o / 2);
                    o % 2 == 0 ? f(i[j][p + 1], i[j + 1][p], i[j][p]) : f(i[j][p + 1], i[j + 1][p + 1], i[j + 1][p])
                }
        }

        function h(a) {
            return Math.atan2(a.z, -a.x)
        }

        function i(a) {
            return Math.atan2(-a.y, Math.sqrt(a.x * a.x + a.z * a.z))
        }

        function j(a, b, c) {
            return 0 > c && 1 === a.x && (a = new THREE.Vector2(a.x - 1, a.y)), 0 === b.x && 0 === b.z && (a = new THREE.Vector2(c / 2 / Math.PI + .5, a.y)), a.clone()
        }
        THREE.Geometry.call(this), this.type = "PolyhedronGeometry", this.parameters = {
            vertices: a,
            indices: b,
            radius: c,
            detail: d
        }, c = c || 1, d = d || 0;
        for (var k = this, l = 0, m = a.length; m > l; l += 3) e(new THREE.Vector3(a[l], a[l + 1], a[l + 2]));
        for (var n = this.vertices, o = [], l = 0, p = 0, m = b.length; m > l; l += 3, p++) {
            var q = n[b[l]],
                r = n[b[l + 1]],
                s = n[b[l + 2]];
            o[p] = new THREE.Face3(q.index, r.index, s.index, [q.clone(), r.clone(), s.clone()])
        }
        for (var t = new THREE.Vector3, l = 0, m = o.length; m > l; l++) g(o[l], d);
        for (var l = 0, m = this.faceVertexUvs[0].length; m > l; l++) {
            var u = this.faceVertexUvs[0][l],
                v = u[0].x,
                w = u[1].x,
                x = u[2].x,
                y = Math.max(v, Math.max(w, x)),
                z = Math.min(v, Math.min(w, x));
            y > .9 && .1 > z && (.2 > v && (u[0].x += 1), .2 > w && (u[1].x += 1), .2 > x && (u[2].x += 1))
        }
        for (var l = 0, m = this.vertices.length; m > l; l++) this.vertices[l].multiplyScalar(c);
        this.mergeVertices(), this.computeFaceNormals(), this.boundingSphere = new THREE.Sphere(new THREE.Vector3, c)
    }, THREE.PolyhedronGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.PolyhedronGeometry.prototype.constructor = THREE.PolyhedronGeometry, THREE.DodecahedronGeometry = function(a, b) {
        this.parameters = {
            radius: a,
            detail: b
        };
        var c = (1 + Math.sqrt(5)) / 2,
            d = 1 / c,
            e = [-1, -1, -1, -1, -1, 1, -1, 1, -1, -1, 1, 1, 1, -1, -1, 1, -1, 1, 1, 1, -1, 1, 1, 1, 0, -d, -c, 0, -d, c, 0, d, -c, 0, d, c, -d, -c, 0, -d, c, 0, d, -c, 0, d, c, 0, -c, 0, -d, c, 0, -d, -c, 0, d, c, 0, d],
            f = [3, 11, 7, 3, 7, 15, 3, 15, 13, 7, 19, 17, 7, 17, 6, 7, 6, 15, 17, 4, 8, 17, 8, 10, 17, 10, 6, 8, 0, 16, 8, 16, 2, 8, 2, 10, 0, 12, 1, 0, 1, 18, 0, 18, 16, 6, 10, 2, 6, 2, 13, 6, 13, 15, 2, 16, 18, 2, 18, 3, 2, 3, 13, 18, 1, 9, 18, 9, 11, 18, 11, 3, 4, 14, 12, 4, 12, 0, 4, 0, 8, 11, 9, 5, 11, 5, 19, 11, 19, 7, 19, 5, 14, 19, 14, 4, 19, 4, 17, 1, 12, 14, 1, 14, 5, 1, 5, 9];
        THREE.PolyhedronGeometry.call(this, e, f, a, b)
    }, THREE.DodecahedronGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.DodecahedronGeometry.prototype.constructor = THREE.DodecahedronGeometry, THREE.IcosahedronGeometry = function(a, b) {
        var c = (1 + Math.sqrt(5)) / 2,
            d = [-1, c, 0, 1, c, 0, -1, -c, 0, 1, -c, 0, 0, -1, c, 0, 1, c, 0, -1, -c, 0, 1, -c, c, 0, -1, c, 0, 1, -c, 0, -1, -c, 0, 1],
            e = [0, 11, 5, 0, 5, 1, 0, 1, 7, 0, 7, 10, 0, 10, 11, 1, 5, 9, 5, 11, 4, 11, 10, 2, 10, 7, 6, 7, 1, 8, 3, 9, 4, 3, 4, 2, 3, 2, 6, 3, 6, 8, 3, 8, 9, 4, 9, 5, 2, 4, 11, 6, 2, 10, 8, 6, 7, 9, 8, 1];
        THREE.PolyhedronGeometry.call(this, d, e, a, b), this.type = "IcosahedronGeometry", this.parameters = {
            radius: a,
            detail: b
        }
    }, THREE.IcosahedronGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.IcosahedronGeometry.prototype.constructor = THREE.IcosahedronGeometry, THREE.OctahedronGeometry = function(a, b) {
        this.parameters = {
            radius: a,
            detail: b
        };
        var c = [1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1],
            d = [0, 2, 4, 0, 4, 3, 0, 3, 5, 0, 5, 2, 1, 2, 5, 1, 5, 3, 1, 3, 4, 1, 4, 2];
        THREE.PolyhedronGeometry.call(this, c, d, a, b), this.type = "OctahedronGeometry", this.parameters = {
            radius: a,
            detail: b
        }
    }, THREE.OctahedronGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.OctahedronGeometry.prototype.constructor = THREE.OctahedronGeometry, THREE.TetrahedronGeometry = function(a, b) {
        var c = [1, 1, 1, -1, -1, 1, -1, 1, -1, 1, -1, -1],
            d = [2, 1, 0, 0, 3, 2, 1, 3, 0, 2, 3, 1];
        THREE.PolyhedronGeometry.call(this, c, d, a, b), this.type = "TetrahedronGeometry", this.parameters = {
            radius: a,
            detail: b
        }
    }, THREE.TetrahedronGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.TetrahedronGeometry.prototype.constructor = THREE.TetrahedronGeometry, THREE.ParametricGeometry = function(a, b, c) {
        THREE.Geometry.call(this), this.type = "ParametricGeometry", this.parameters = {
            func: a,
            slices: b,
            stacks: c
        };
        var d, e, f, g, h, i = this.vertices,
            j = this.faces,
            k = this.faceVertexUvs[0],
            l = b + 1;
        for (d = 0; c >= d; d++)
            for (h = d / c, e = 0; b >= e; e++) g = e / b, f = a(g, h), i.push(f);
        var m, n, o, p, q, r, s, t;
        for (d = 0; c > d; d++)
            for (e = 0; b > e; e++) m = d * l + e, n = d * l + e + 1, o = (d + 1) * l + e + 1, p = (d + 1) * l + e, q = new THREE.Vector2(e / b, d / c), r = new THREE.Vector2((e + 1) / b, d / c), s = new THREE.Vector2((e + 1) / b, (d + 1) / c), t = new THREE.Vector2(e / b, (d + 1) / c), j.push(new THREE.Face3(m, n, p)), k.push([q, r, t]), j.push(new THREE.Face3(n, o, p)), k.push([r.clone(), s, t.clone()]);
        this.computeFaceNormals(), this.computeVertexNormals()
    }, THREE.ParametricGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.ParametricGeometry.prototype.constructor = THREE.ParametricGeometry, THREE.AxisHelper = function(a) {
        a = a || 1;
        var b = new Float32Array([0, 0, 0, a, 0, 0, 0, 0, 0, 0, a, 0, 0, 0, 0, 0, 0, a]),
            c = new Float32Array([1, 0, 0, 1, .6, 0, 0, 1, 0, .6, 1, 0, 0, 0, 1, 0, .6, 1]),
            d = new THREE.BufferGeometry;
        d.addAttribute("position", new THREE.BufferAttribute(b, 3)), d.addAttribute("color", new THREE.BufferAttribute(c, 3));
        var e = new THREE.LineBasicMaterial({
            vertexColors: THREE.VertexColors
        });
        THREE.Line.call(this, d, e, THREE.LinePieces)
    }, THREE.AxisHelper.prototype = Object.create(THREE.Line.prototype), THREE.AxisHelper.prototype.constructor = THREE.AxisHelper, THREE.ArrowHelper = function() {
        var a = new THREE.Geometry;
        a.vertices.push(new THREE.Vector3(0, 0, 0), new THREE.Vector3(0, 1, 0));
        var b = new THREE.CylinderGeometry(0, .5, 1, 5, 1);
        return b.applyMatrix((new THREE.Matrix4).makeTranslation(0, -.5, 0)),
            function(c, d, e, f, g, h) {
                THREE.Object3D.call(this), void 0 === f && (f = 16776960), void 0 === e && (e = 1), void 0 === g && (g = .2 * e), void 0 === h && (h = .2 * g), this.position.copy(d), this.line = new THREE.Line(a, new THREE.LineBasicMaterial({
                    color: f
                })), this.line.matrixAutoUpdate = !1, this.add(this.line), this.cone = new THREE.Mesh(b, new THREE.MeshBasicMaterial({
                    color: f
                })), this.cone.matrixAutoUpdate = !1, this.add(this.cone), this.setDirection(c), this.setLength(e, g, h)
            }
    }(), THREE.ArrowHelper.prototype = Object.create(THREE.Object3D.prototype), THREE.ArrowHelper.prototype.constructor = THREE.ArrowHelper, THREE.ArrowHelper.prototype.setDirection = function() {
        var a, b = new THREE.Vector3;
        return function(c) {
            c.y > .99999 ? this.quaternion.set(0, 0, 0, 1) : c.y < -.99999 ? this.quaternion.set(1, 0, 0, 0) : (b.set(c.z, 0, -c.x).normalize(), a = Math.acos(c.y), this.quaternion.setFromAxisAngle(b, a))
        }
    }(), THREE.ArrowHelper.prototype.setLength = function(a, b, c) {
        void 0 === b && (b = .2 * a), void 0 === c && (c = .2 * b), this.line.scale.set(1, a - b, 1), this.line.updateMatrix(), this.cone.scale.set(c, b, c), this.cone.position.y = a, this.cone.updateMatrix()
    }, THREE.ArrowHelper.prototype.setColor = function(a) {
        this.line.material.color.set(a), this.cone.material.color.set(a)
    }, THREE.BoxHelper = function(a) {
        var b = new THREE.BufferGeometry;
        b.addAttribute("position", new THREE.BufferAttribute(new Float32Array(72), 3)), THREE.Line.call(this, b, new THREE.LineBasicMaterial({
            color: 16776960
        }), THREE.LinePieces), void 0 !== a && this.update(a)
    }, THREE.BoxHelper.prototype = Object.create(THREE.Line.prototype), THREE.BoxHelper.prototype.constructor = THREE.BoxHelper, THREE.BoxHelper.prototype.update = function(a) {
        var b = a.geometry;
        null === b.boundingBox && b.computeBoundingBox();
        var c = b.boundingBox.min,
            d = b.boundingBox.max,
            e = this.geometry.attributes.position.array;
        e[0] = d.x, e[1] = d.y, e[2] = d.z, e[3] = c.x, e[4] = d.y, e[5] = d.z, e[6] = c.x, e[7] = d.y, e[8] = d.z, e[9] = c.x, e[10] = c.y, e[11] = d.z, e[12] = c.x, e[13] = c.y, e[14] = d.z, e[15] = d.x, e[16] = c.y, e[17] = d.z, e[18] = d.x, e[19] = c.y, e[20] = d.z, e[21] = d.x, e[22] = d.y, e[23] = d.z, e[24] = d.x, e[25] = d.y, e[26] = c.z, e[27] = c.x, e[28] = d.y, e[29] = c.z, e[30] = c.x, e[31] = d.y, e[32] = c.z, e[33] = c.x, e[34] = c.y, e[35] = c.z, e[36] = c.x, e[37] = c.y, e[38] = c.z, e[39] = d.x, e[40] = c.y, e[41] = c.z, e[42] = d.x, e[43] = c.y, e[44] = c.z, e[45] = d.x, e[46] = d.y, e[47] = c.z, e[48] = d.x, e[49] = d.y, e[50] = d.z, e[51] = d.x, e[52] = d.y, e[53] = c.z, e[54] = c.x, e[55] = d.y, e[56] = d.z, e[57] = c.x, e[58] = d.y, e[59] = c.z, e[60] = c.x, e[61] = c.y, e[62] = d.z, e[63] = c.x, e[64] = c.y, e[65] = c.z, e[66] = d.x, e[67] = c.y, e[68] = d.z, e[69] = d.x, e[70] = c.y, e[71] = c.z, this.geometry.attributes.position.needsUpdate = !0, this.geometry.computeBoundingSphere(), this.matrix = a.matrixWorld, this.matrixAutoUpdate = !1
    }, THREE.BoundingBoxHelper = function(a, b) {
        var c = void 0 !== b ? b : 8947848;
        this.object = a, this.box = new THREE.Box3, THREE.Mesh.call(this, new THREE.BoxGeometry(1, 1, 1), new THREE.MeshBasicMaterial({
            color: c,
            wireframe: !0
        }))
    }, THREE.BoundingBoxHelper.prototype = Object.create(THREE.Mesh.prototype), THREE.BoundingBoxHelper.prototype.constructor = THREE.BoundingBoxHelper, THREE.BoundingBoxHelper.prototype.update = function() {
        this.box.setFromObject(this.object), this.box.size(this.scale), this.box.center(this.position)
    }, THREE.CameraHelper = function(a) {
        function b(a, b, d) {
            c(a, d), c(b, d)
        }

        function c(a, b) {
            d.vertices.push(new THREE.Vector3), d.colors.push(new THREE.Color(b)), void 0 === f[a] && (f[a] = []), f[a].push(d.vertices.length - 1)
        }
        var d = new THREE.Geometry,
            e = new THREE.LineBasicMaterial({
                color: 16777215,
                vertexColors: THREE.FaceColors
            }),
            f = {},
            g = 16755200,
            h = 16711680,
            i = 43775,
            j = 16777215,
            k = 3355443;
        b("n1", "n2", g), b("n2", "n4", g), b("n4", "n3", g), b("n3", "n1", g), b("f1", "f2", g), b("f2", "f4", g), b("f4", "f3", g), b("f3", "f1", g), b("n1", "f1", g), b("n2", "f2", g), b("n3", "f3", g), b("n4", "f4", g), b("p", "n1", h), b("p", "n2", h), b("p", "n3", h), b("p", "n4", h), b("u1", "u2", i), b("u2", "u3", i), b("u3", "u1", i), b("c", "t", j), b("p", "c", k), b("cn1", "cn2", k), b("cn3", "cn4", k), b("cf1", "cf2", k), b("cf3", "cf4", k), THREE.Line.call(this, d, e, THREE.LinePieces), this.camera = a, this.matrix = a.matrixWorld, this.matrixAutoUpdate = !1, this.pointMap = f, this.update()
    }, THREE.CameraHelper.prototype = Object.create(THREE.Line.prototype), THREE.CameraHelper.prototype.constructor = THREE.CameraHelper, THREE.CameraHelper.prototype.update = function() {
        var a, b, c = new THREE.Vector3,
            d = new THREE.Camera,
            e = function(e, f, g, h) {
                c.set(f, g, h).unproject(d);
                var i = b[e];
                if (void 0 !== i)
                    for (var j = 0, k = i.length; k > j; j++) a.vertices[i[j]].copy(c)
            };
        return function() {
            a = this.geometry, b = this.pointMap;
            var c = 1,
                f = 1;
            d.projectionMatrix.copy(this.camera.projectionMatrix), e("c", 0, 0, -1), e("t", 0, 0, 1), e("n1", -c, -f, -1), e("n2", c, -f, -1), e("n3", -c, f, -1), e("n4", c, f, -1), e("f1", -c, -f, 1), e("f2", c, -f, 1), e("f3", -c, f, 1), e("f4", c, f, 1), e("u1", .7 * c, 1.1 * f, -1), e("u2", .7 * -c, 1.1 * f, -1), e("u3", 0, 2 * f, -1), e("cf1", -c, 0, 1), e("cf2", c, 0, 1), e("cf3", 0, -f, 1), e("cf4", 0, f, 1), e("cn1", -c, 0, -1), e("cn2", c, 0, -1), e("cn3", 0, -f, -1), e("cn4", 0, f, -1), a.verticesNeedUpdate = !0
        }
    }(), THREE.DirectionalLightHelper = function(a, b) {
        THREE.Object3D.call(this), this.light = a, this.light.updateMatrixWorld(), this.matrix = a.matrixWorld, this.matrixAutoUpdate = !1, b = b || 1;
        var c = new THREE.Geometry;
        c.vertices.push(new THREE.Vector3(-b, b, 0), new THREE.Vector3(b, b, 0), new THREE.Vector3(b, -b, 0), new THREE.Vector3(-b, -b, 0), new THREE.Vector3(-b, b, 0));
        var d = new THREE.LineBasicMaterial({
            fog: !1
        });
        d.color.copy(this.light.color).multiplyScalar(this.light.intensity), this.lightPlane = new THREE.Line(c, d), this.add(this.lightPlane), c = new THREE.Geometry, c.vertices.push(new THREE.Vector3, new THREE.Vector3), d = new THREE.LineBasicMaterial({
            fog: !1
        }), d.color.copy(this.light.color).multiplyScalar(this.light.intensity), this.targetLine = new THREE.Line(c, d), this.add(this.targetLine), this.update()
    }, THREE.DirectionalLightHelper.prototype = Object.create(THREE.Object3D.prototype), THREE.DirectionalLightHelper.prototype.constructor = THREE.DirectionalLightHelper, THREE.DirectionalLightHelper.prototype.dispose = function() {
        this.lightPlane.geometry.dispose(), this.lightPlane.material.dispose(), this.targetLine.geometry.dispose(), this.targetLine.material.dispose()
    }, THREE.DirectionalLightHelper.prototype.update = function() {
        var a = new THREE.Vector3,
            b = new THREE.Vector3,
            c = new THREE.Vector3;
        return function() {
            a.setFromMatrixPosition(this.light.matrixWorld), b.setFromMatrixPosition(this.light.target.matrixWorld), c.subVectors(b, a), this.lightPlane.lookAt(c), this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity), this.targetLine.geometry.vertices[1].copy(c), this.targetLine.geometry.verticesNeedUpdate = !0, this.targetLine.material.color.copy(this.lightPlane.material.color)
        }
    }(), THREE.EdgesHelper = function(a, b) {
        var c = void 0 !== b ? b : 16777215,
            d = [0, 0],
            e = {},
            f = function(a, b) {
                return a - b
            },
            g = ["a", "b", "c"],
            h = new THREE.BufferGeometry,
            i = a.geometry.clone();
        i.mergeVertices(), i.computeFaceNormals();
        for (var j = i.vertices, k = i.faces, l = 0, m = 0, n = k.length; n > m; m++)
            for (var o = k[m], p = 0; 3 > p; p++) {
                d[0] = o[g[p]], d[1] = o[g[(p + 1) % 3]], d.sort(f);
                var q = d.toString();
                void 0 === e[q] ? (e[q] = {
                    vert1: d[0],
                    vert2: d[1],
                    face1: m,
                    face2: void 0
                }, l++) : e[q].face2 = m
            }
        var r = new Float32Array(2 * l * 3),
            s = 0;
        for (var q in e) {
            var t = e[q];
            if (void 0 === t.face2 || k[t.face1].normal.dot(k[t.face2].normal) < .9999) {
                var u = j[t.vert1];
                r[s++] = u.x, r[s++] = u.y, r[s++] = u.z, u = j[t.vert2], r[s++] = u.x, r[s++] = u.y, r[s++] = u.z
            }
        }
        h.addAttribute("position", new THREE.BufferAttribute(r, 3)), THREE.Line.call(this, h, new THREE.LineBasicMaterial({
            color: c
        }), THREE.LinePieces), this.matrix = a.matrixWorld, this.matrixAutoUpdate = !1
    }, THREE.EdgesHelper.prototype = Object.create(THREE.Line.prototype), THREE.EdgesHelper.prototype.constructor = THREE.EdgesHelper, THREE.FaceNormalsHelper = function(a, b, c, d) {
        this.object = a, this.size = void 0 !== b ? b : 1;
        for (var e = void 0 !== c ? c : 16776960, f = void 0 !== d ? d : 1, g = new THREE.Geometry, h = this.object.geometry.faces, i = 0, j = h.length; j > i; i++) g.vertices.push(new THREE.Vector3, new THREE.Vector3);
        THREE.Line.call(this, g, new THREE.LineBasicMaterial({
            color: e,
            linewidth: f
        }), THREE.LinePieces), this.matrixAutoUpdate = !1, this.normalMatrix = new THREE.Matrix3, this.update()
    }, THREE.FaceNormalsHelper.prototype = Object.create(THREE.Line.prototype), THREE.FaceNormalsHelper.prototype.constructor = THREE.FaceNormalsHelper, THREE.FaceNormalsHelper.prototype.update = function() {
        var a = this.geometry.vertices,
            b = this.object,
            c = b.geometry.vertices,
            d = b.geometry.faces,
            e = b.matrixWorld;
        b.updateMatrixWorld(!0), this.normalMatrix.getNormalMatrix(e);
        for (var f = 0, g = 0, h = d.length; h > f; f++, g += 2) {
            var i = d[f];
            a[g].copy(c[i.a]).add(c[i.b]).add(c[i.c]).divideScalar(3).applyMatrix4(e), a[g + 1].copy(i.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(a[g])
        }
        return this.geometry.verticesNeedUpdate = !0, this
    }, THREE.GridHelper = function(a, b) {
        var c = new THREE.Geometry,
            d = new THREE.LineBasicMaterial({
                vertexColors: THREE.VertexColors
            });
        this.color1 = new THREE.Color(4473924), this.color2 = new THREE.Color(8947848);
        for (var e = -a; a >= e; e += b) {
            c.vertices.push(new THREE.Vector3(-a, 0, e), new THREE.Vector3(a, 0, e), new THREE.Vector3(e, 0, -a), new THREE.Vector3(e, 0, a));
            var f = 0 === e ? this.color1 : this.color2;
            c.colors.push(f, f, f, f)
        }
        THREE.Line.call(this, c, d, THREE.LinePieces)
    }, THREE.GridHelper.prototype = Object.create(THREE.Line.prototype), THREE.GridHelper.prototype.constructor = THREE.GridHelper, THREE.GridHelper.prototype.setColors = function(a, b) {
        this.color1.set(a), this.color2.set(b), this.geometry.colorsNeedUpdate = !0
    }, THREE.HemisphereLightHelper = function(a, b) {
        THREE.Object3D.call(this), this.light = a, this.light.updateMatrixWorld(), this.matrix = a.matrixWorld, this.matrixAutoUpdate = !1, this.colors = [new THREE.Color, new THREE.Color];
        var c = new THREE.SphereGeometry(b, 4, 2);
        c.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI / 2));
        for (var d = 0, e = 8; e > d; d++) c.faces[d].color = this.colors[4 > d ? 0 : 1];
        var f = new THREE.MeshBasicMaterial({
            vertexColors: THREE.FaceColors,
            wireframe: !0
        });
        this.lightSphere = new THREE.Mesh(c, f), this.add(this.lightSphere), this.update()
    }, THREE.HemisphereLightHelper.prototype = Object.create(THREE.Object3D.prototype), THREE.HemisphereLightHelper.prototype.constructor = THREE.HemisphereLightHelper, THREE.HemisphereLightHelper.prototype.dispose = function() {
        this.lightSphere.geometry.dispose(), this.lightSphere.material.dispose()
    }, THREE.HemisphereLightHelper.prototype.update = function() {
        var a = new THREE.Vector3;
        return function() {
            this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity), this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity), this.lightSphere.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate()), this.lightSphere.geometry.colorsNeedUpdate = !0
        }
    }(), THREE.PointLightHelper = function(a, b) {
        this.light = a, this.light.updateMatrixWorld();
        var c = new THREE.SphereGeometry(b, 4, 2),
            d = new THREE.MeshBasicMaterial({
                wireframe: !0,
                fog: !1
            });
        d.color.copy(this.light.color).multiplyScalar(this.light.intensity), THREE.Mesh.call(this, c, d), this.matrix = this.light.matrixWorld, this.matrixAutoUpdate = !1
    }, THREE.PointLightHelper.prototype = Object.create(THREE.Mesh.prototype), THREE.PointLightHelper.prototype.constructor = THREE.PointLightHelper, THREE.PointLightHelper.prototype.dispose = function() {
        this.geometry.dispose(), this.material.dispose()
    }, THREE.PointLightHelper.prototype.update = function() {
        this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)
    }, THREE.SkeletonHelper = function(a) {
        this.bones = this.getBoneList(a);
        for (var b = new THREE.Geometry, c = 0; c < this.bones.length; c++) {
            var d = this.bones[c];
            d.parent instanceof THREE.Bone && (b.vertices.push(new THREE.Vector3), b.vertices.push(new THREE.Vector3), b.colors.push(new THREE.Color(0, 0, 1)), b.colors.push(new THREE.Color(0, 1, 0)))
        }
        var e = new THREE.LineBasicMaterial({
            vertexColors: THREE.VertexColors,
            depthTest: !1,
            depthWrite: !1,
            transparent: !0
        });
        THREE.Line.call(this, b, e, THREE.LinePieces), this.root = a, this.matrix = a.matrixWorld, this.matrixAutoUpdate = !1, this.update()
    }, THREE.SkeletonHelper.prototype = Object.create(THREE.Line.prototype), THREE.SkeletonHelper.prototype.constructor = THREE.SkeletonHelper, THREE.SkeletonHelper.prototype.getBoneList = function(a) {
        var b = [];
        a instanceof THREE.Bone && b.push(a);
        for (var c = 0; c < a.children.length; c++) b.push.apply(b, this.getBoneList(a.children[c]));
        return b
    }, THREE.SkeletonHelper.prototype.update = function() {
        for (var a = this.geometry, b = (new THREE.Matrix4).getInverse(this.root.matrixWorld), c = new THREE.Matrix4, d = 0, e = 0; e < this.bones.length; e++) {
            var f = this.bones[e];
            f.parent instanceof THREE.Bone && (c.multiplyMatrices(b, f.matrixWorld), a.vertices[d].setFromMatrixPosition(c), c.multiplyMatrices(b, f.parent.matrixWorld), a.vertices[d + 1].setFromMatrixPosition(c), d += 2)
        }
        a.verticesNeedUpdate = !0, a.computeBoundingSphere()
    }, THREE.SpotLightHelper = function(a) {
        THREE.Object3D.call(this), this.light = a, this.light.updateMatrixWorld(), this.matrix = a.matrixWorld, this.matrixAutoUpdate = !1;
        var b = new THREE.CylinderGeometry(0, 1, 1, 8, 1, !0);
        b.applyMatrix((new THREE.Matrix4).makeTranslation(0, -.5, 0)), b.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI / 2));
        var c = new THREE.MeshBasicMaterial({
            wireframe: !0,
            fog: !1
        });
        this.cone = new THREE.Mesh(b, c), this.add(this.cone), this.update()
    }, THREE.SpotLightHelper.prototype = Object.create(THREE.Object3D.prototype), THREE.SpotLightHelper.prototype.constructor = THREE.SpotLightHelper, THREE.SpotLightHelper.prototype.dispose = function() {
        this.cone.geometry.dispose(), this.cone.material.dispose()
    }, THREE.SpotLightHelper.prototype.update = function() {
        var a = new THREE.Vector3,
            b = new THREE.Vector3;
        return function() {
            var c = this.light.distance ? this.light.distance : 1e4,
                d = c * Math.tan(this.light.angle);
            this.cone.scale.set(d, d, c), a.setFromMatrixPosition(this.light.matrixWorld), b.setFromMatrixPosition(this.light.target.matrixWorld), this.cone.lookAt(b.sub(a)), this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)
        }
    }(), THREE.VertexNormalsHelper = function(a, b, c, d) {
        this.object = a, this.size = void 0 !== b ? b : 1;
        for (var e = void 0 !== c ? c : 16711680, f = void 0 !== d ? d : 1, g = new THREE.Geometry, h = (a.geometry.vertices, a.geometry.faces), i = 0, j = h.length; j > i; i++)
            for (var k = h[i], l = 0, m = k.vertexNormals.length; m > l; l++) g.vertices.push(new THREE.Vector3, new THREE.Vector3);
        THREE.Line.call(this, g, new THREE.LineBasicMaterial({
            color: e,
            linewidth: f
        }), THREE.LinePieces), this.matrixAutoUpdate = !1, this.normalMatrix = new THREE.Matrix3, this.update()
    }, THREE.VertexNormalsHelper.prototype = Object.create(THREE.Line.prototype), THREE.VertexNormalsHelper.prototype.constructor = THREE.VertexNormalsHelper, THREE.VertexNormalsHelper.prototype.update = function() {
        var a = new THREE.Vector3;
        return function() {
            var b = ["a", "b", "c", "d"];
            this.object.updateMatrixWorld(!0), this.normalMatrix.getNormalMatrix(this.object.matrixWorld);
            for (var c = this.geometry.vertices, d = this.object.geometry.vertices, e = this.object.geometry.faces, f = this.object.matrixWorld, g = 0, h = 0, i = e.length; i > h; h++)
                for (var j = e[h], k = 0, l = j.vertexNormals.length; l > k; k++) {
                    var m = j[b[k]],
                        n = d[m],
                        o = j.vertexNormals[k];
                    c[g].copy(n).applyMatrix4(f), a.copy(o).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size), a.add(c[g]), g += 1, c[g].copy(a), g += 1
                }
            return this.geometry.verticesNeedUpdate = !0, this
        }
    }(), THREE.VertexTangentsHelper = function(a, b, c, d) {
        this.object = a, this.size = void 0 !== b ? b : 1;
        for (var e = void 0 !== c ? c : 255, f = void 0 !== d ? d : 1, g = new THREE.Geometry, h = (a.geometry.vertices, a.geometry.faces), i = 0, j = h.length; j > i; i++)
            for (var k = h[i], l = 0, m = k.vertexTangents.length; m > l; l++) g.vertices.push(new THREE.Vector3), g.vertices.push(new THREE.Vector3);
        THREE.Line.call(this, g, new THREE.LineBasicMaterial({
            color: e,
            linewidth: f
        }), THREE.LinePieces), this.matrixAutoUpdate = !1, this.update()
    }, THREE.VertexTangentsHelper.prototype = Object.create(THREE.Line.prototype), THREE.VertexTangentsHelper.prototype.constructor = THREE.VertexTangentsHelper, THREE.VertexTangentsHelper.prototype.update = function() {
        var a = new THREE.Vector3;
        return function() {
            var b = ["a", "b", "c", "d"];
            this.object.updateMatrixWorld(!0);
            for (var c = this.geometry.vertices, d = this.object.geometry.vertices, e = this.object.geometry.faces, f = this.object.matrixWorld, g = 0, h = 0, i = e.length; i > h; h++)
                for (var j = e[h], k = 0, l = j.vertexTangents.length; l > k; k++) {
                    var m = j[b[k]],
                        n = d[m],
                        o = j.vertexTangents[k];
                    c[g].copy(n).applyMatrix4(f), a.copy(o).transformDirection(f).multiplyScalar(this.size), a.add(c[g]), g += 1, c[g].copy(a), g += 1
                }
            return this.geometry.verticesNeedUpdate = !0, this
        }
    }(), THREE.WireframeHelper = function(a, b) {
        var c = void 0 !== b ? b : 16777215,
            d = [0, 0],
            e = {},
            f = function(a, b) {
                return a - b
            },
            g = ["a", "b", "c"],
            h = new THREE.BufferGeometry;
        if (a.geometry instanceof THREE.Geometry) {
            for (var i = a.geometry.vertices, j = a.geometry.faces, k = 0, l = new Uint32Array(6 * j.length), m = 0, n = j.length; n > m; m++)
                for (var o = j[m], p = 0; 3 > p; p++) {
                    d[0] = o[g[p]], d[1] = o[g[(p + 1) % 3]], d.sort(f);
                    var q = d.toString();
                    void 0 === e[q] && (l[2 * k] = d[0], l[2 * k + 1] = d[1], e[q] = !0, k++)
                }
            for (var r = new Float32Array(2 * k * 3), m = 0, n = k; n > m; m++)
                for (var p = 0; 2 > p; p++) {
                    var s = i[l[2 * m + p]],
                        t = 6 * m + 3 * p;
                    r[t + 0] = s.x, r[t + 1] = s.y, r[t + 2] = s.z
                }
            h.addAttribute("position", new THREE.BufferAttribute(r, 3))
        } else if (a.geometry instanceof THREE.BufferGeometry)
            if (void 0 !== a.geometry.attributes.index) {
                var i = a.geometry.attributes.position.array,
                    u = a.geometry.attributes.index.array,
                    v = a.geometry.drawcalls,
                    k = 0;
                0 === v.length && (v = [{
                    count: u.length,
                    index: 0,
                    start: 0
                }]);
                for (var l = new Uint32Array(2 * u.length), w = 0, x = v.length; x > w; ++w)
                    for (var y = v[w].start, z = v[w].count, t = v[w].index, m = y, A = y + z; A > m; m += 3)
                        for (var p = 0; 3 > p; p++) {
                            d[0] = t + u[m + p], d[1] = t + u[m + (p + 1) % 3], d.sort(f);
                            var q = d.toString();
                            void 0 === e[q] && (l[2 * k] = d[0], l[2 * k + 1] = d[1], e[q] = !0, k++)
                        }
                for (var r = new Float32Array(2 * k * 3), m = 0, n = k; n > m; m++)
                    for (var p = 0; 2 > p; p++) {
                        var t = 6 * m + 3 * p,
                            B = 3 * l[2 * m + p];
                        r[t + 0] = i[B], r[t + 1] = i[B + 1], r[t + 2] = i[B + 2]
                    }
                h.addAttribute("position", new THREE.BufferAttribute(r, 3))
            } else {
                for (var i = a.geometry.attributes.position.array, k = i.length / 3, C = k / 3, r = new Float32Array(2 * k * 3), m = 0, n = C; n > m; m++)
                    for (var p = 0; 3 > p; p++) {
                        var t = 18 * m + 6 * p,
                            D = 9 * m + 3 * p;
                        r[t + 0] = i[D], r[t + 1] = i[D + 1], r[t + 2] = i[D + 2];
                        var B = 9 * m + 3 * ((p + 1) % 3);
                        r[t + 3] = i[B], r[t + 4] = i[B + 1], r[t + 5] = i[B + 2]
                    }
                h.addAttribute("position", new THREE.BufferAttribute(r, 3))
            }
        THREE.Line.call(this, h, new THREE.LineBasicMaterial({
            color: c
        }), THREE.LinePieces), this.matrix = a.matrixWorld, this.matrixAutoUpdate = !1
    }, THREE.WireframeHelper.prototype = Object.create(THREE.Line.prototype), THREE.WireframeHelper.prototype.constructor = THREE.WireframeHelper, THREE.ImmediateRenderObject = function() {
        THREE.Object3D.call(this), this.render = function() {}
    }, THREE.ImmediateRenderObject.prototype = Object.create(THREE.Object3D.prototype), THREE.ImmediateRenderObject.prototype.constructor = THREE.ImmediateRenderObject, THREE.MorphBlendMesh = function(a, b) {
        THREE.Mesh.call(this, a, b), this.animationsMap = {}, this.animationsList = [];
        var c = this.geometry.morphTargets.length,
            d = "__default",
            e = 0,
            f = c - 1,
            g = c / 1;
        this.createAnimation(d, e, f, g), this.setAnimationWeight(d, 1)
    }, THREE.MorphBlendMesh.prototype = Object.create(THREE.Mesh.prototype), THREE.MorphBlendMesh.prototype.constructor = THREE.MorphBlendMesh, THREE.MorphBlendMesh.prototype.createAnimation = function(a, b, c, d) {
        var e = {
            startFrame: b,
            endFrame: c,
            length: c - b + 1,
            fps: d,
            duration: (c - b) / d,
            lastFrame: 0,
            currentFrame: 0,
            active: !1,
            time: 0,
            direction: 1,
            weight: 1,
            directionBackwards: !1,
            mirroredLoop: !1
        };
        this.animationsMap[a] = e, this.animationsList.push(e)
    }, THREE.MorphBlendMesh.prototype.autoCreateAnimations = function(a) {
        for (var b, c = /([a-z]+)_?(\d+)/, d = {}, e = this.geometry, f = 0, g = e.morphTargets.length; g > f; f++) {
            var h = e.morphTargets[f],
                i = h.name.match(c);
            if (i && i.length > 1) {
                {
                    var j = i[1];
                    i[2]
                }
                d[j] || (d[j] = {
                    start: 1 / 0,
                    end: -(1 / 0)
                });
                var k = d[j];
                f < k.start && (k.start = f), f > k.end && (k.end = f), b || (b = j)
            }
        }
        for (var j in d) {
            var k = d[j];
            this.createAnimation(j, k.start, k.end, a)
        }
        this.firstAnimation = b
    }, THREE.MorphBlendMesh.prototype.setAnimationDirectionForward = function(a) {
        var b = this.animationsMap[a];
        b && (b.direction = 1, b.directionBackwards = !1)
    }, THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward = function(a) {
        var b = this.animationsMap[a];
        b && (b.direction = -1, b.directionBackwards = !0)
    }, THREE.MorphBlendMesh.prototype.setAnimationFPS = function(a, b) {
        var c = this.animationsMap[a];
        c && (c.fps = b, c.duration = (c.end - c.start) / c.fps)
    }, THREE.MorphBlendMesh.prototype.setAnimationDuration = function(a, b) {
        var c = this.animationsMap[a];
        c && (c.duration = b, c.fps = (c.end - c.start) / c.duration)
    }, THREE.MorphBlendMesh.prototype.setAnimationWeight = function(a, b) {
        var c = this.animationsMap[a];
        c && (c.weight = b)
    }, THREE.MorphBlendMesh.prototype.setAnimationTime = function(a, b) {
        var c = this.animationsMap[a];
        c && (c.time = b)
    }, THREE.MorphBlendMesh.prototype.getAnimationTime = function(a) {
        var b = 0,
            c = this.animationsMap[a];
        return c && (b = c.time), b
    }, THREE.MorphBlendMesh.prototype.getAnimationDuration = function(a) {
        var b = -1,
            c = this.animationsMap[a];
        return c && (b = c.duration), b
    }, THREE.MorphBlendMesh.prototype.playAnimation = function(a) {
        var b = this.animationsMap[a];
        b ? (b.time = 0, b.active = !0) : console.warn("animation[" + a + "] undefined")
    }, THREE.MorphBlendMesh.prototype.stopAnimation = function(a) {
        var b = this.animationsMap[a];
        b && (b.active = !1)
    }, THREE.MorphBlendMesh.prototype.update = function(a) {
        for (var b = 0, c = this.animationsList.length; c > b; b++) {
            var d = this.animationsList[b];
            if (d.active) {
                var e = d.duration / d.length;
                d.time += d.direction * a, d.mirroredLoop ? (d.time > d.duration || d.time < 0) && (d.direction *= -1, d.time > d.duration && (d.time = d.duration, d.directionBackwards = !0), d.time < 0 && (d.time = 0, d.directionBackwards = !1)) : (d.time = d.time % d.duration, d.time < 0 && (d.time += d.duration));
                var f = d.startFrame + THREE.Math.clamp(Math.floor(d.time / e), 0, d.length - 1),
                    g = d.weight;
                f !== d.currentFrame && (this.morphTargetInfluences[d.lastFrame] = 0,
                    this.morphTargetInfluences[d.currentFrame] = 1 * g, this.morphTargetInfluences[f] = 0, d.lastFrame = d.currentFrame, d.currentFrame = f);
                var h = d.time % e / e;
                d.directionBackwards && (h = 1 - h), this.morphTargetInfluences[d.currentFrame] = h * g, this.morphTargetInfluences[d.lastFrame] = (1 - h) * g
            }
        }
    }, define("threejs", function(a) {
        return function() {
            var b;
            return b || a.THREE
        }
    }(this)), this.createjs = this.createjs || {},
    function() {
        var a = createjs.SoundJS = createjs.SoundJS || {};
        a.version = "0.6.0", a.buildDate = "Thu, 11 Dec 2014 23:32:09 GMT"
    }(), this.createjs = this.createjs || {}, createjs.extend = function(a, b) {
        "use strict";

        function c() {
            this.constructor = a
        }
        return c.prototype = b.prototype, a.prototype = new c
    }, this.createjs = this.createjs || {}, createjs.promote = function(a, b) {
        "use strict";
        var c = a.prototype,
            d = Object.getPrototypeOf && Object.getPrototypeOf(c) || c.__proto__;
        if (d) {
            c[(b += "_") + "constructor"] = d.constructor;
            for (var e in d) c.hasOwnProperty(e) && "function" == typeof d[e] && (c[b + e] = d[e])
        }
        return a
    }, this.createjs = this.createjs || {}, createjs.indexOf = function(a, b) {
        "use strict";
        for (var c = 0, d = a.length; d > c; c++)
            if (b === a[c]) return c;
        return -1
    }, this.createjs = this.createjs || {},
    function() {
        "use strict";
        createjs.proxy = function(a, b) {
            var c = Array.prototype.slice.call(arguments, 2);
            return function() {
                return a.apply(b, Array.prototype.slice.call(arguments, 0).concat(c))
            }
        }
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";
        var a = Object.defineProperty ? !0 : !1,
            b = {};
        try {
            Object.defineProperty(b, "bar", {
                get: function() {
                    return this._bar
                },
                set: function(a) {
                    this._bar = a
                }
            })
        } catch (c) {
            a = !1
        }
        createjs.definePropertySupported = a
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a() {
            throw "BrowserDetect cannot be instantiated"
        }
        var b = a.agent = window.navigator.userAgent;
        a.isWindowPhone = b.indexOf("IEMobile") > -1 || b.indexOf("Windows Phone") > -1, a.isFirefox = b.indexOf("Firefox") > -1, a.isOpera = null != window.opera, a.isChrome = b.indexOf("Chrome") > -1, a.isIOS = (b.indexOf("iPod") > -1 || b.indexOf("iPhone") > -1 || b.indexOf("iPad") > -1) && !a.isWindowPhone, a.isAndroid = b.indexOf("Android") > -1 && !a.isWindowPhone, a.isBlackberry = b.indexOf("Blackberry") > -1, createjs.BrowserDetect = a
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a() {
            this._listeners = null, this._captureListeners = null
        }
        var b = a.prototype;
        a.initialize = function(a) {
            a.addEventListener = b.addEventListener, a.on = b.on, a.removeEventListener = a.off = b.removeEventListener, a.removeAllEventListeners = b.removeAllEventListeners, a.hasEventListener = b.hasEventListener, a.dispatchEvent = b.dispatchEvent, a._dispatchEvent = b._dispatchEvent, a.willTrigger = b.willTrigger
        }, b.addEventListener = function(a, b, c) {
            var d;
            d = c ? this._captureListeners = this._captureListeners || {} : this._listeners = this._listeners || {};
            var e = d[a];
            return e && this.removeEventListener(a, b, c), e = d[a], e ? e.push(b) : d[a] = [b], b
        }, b.on = function(a, b, c, d, e, f) {
            return b.handleEvent && (c = c || b, b = b.handleEvent), c = c || this, this.addEventListener(a, function(a) {
                b.call(c, a, e), d && a.remove()
            }, f)
        }, b.removeEventListener = function(a, b, c) {
            var d = c ? this._captureListeners : this._listeners;
            if (d) {
                var e = d[a];
                if (e)
                    for (var f = 0, g = e.length; g > f; f++)
                        if (e[f] == b) {
                            1 == g ? delete d[a] : e.splice(f, 1);
                            break
                        }
            }
        }, b.off = b.removeEventListener, b.removeAllEventListeners = function(a) {
            a ? (this._listeners && delete this._listeners[a], this._captureListeners && delete this._captureListeners[a]) : this._listeners = this._captureListeners = null
        }, b.dispatchEvent = function(a) {
            if ("string" == typeof a) {
                var b = this._listeners;
                if (!b || !b[a]) return !1;
                a = new createjs.Event(a)
            } else a.target && a.clone && (a = a.clone());
            try {
                a.target = this
            } catch (c) {}
            if (a.bubbles && this.parent) {
                for (var d = this, e = [d]; d.parent;) e.push(d = d.parent);
                var f, g = e.length;
                for (f = g - 1; f >= 0 && !a.propagationStopped; f--) e[f]._dispatchEvent(a, 1 + (0 == f));
                for (f = 1; g > f && !a.propagationStopped; f++) e[f]._dispatchEvent(a, 3)
            } else this._dispatchEvent(a, 2);
            return a.defaultPrevented
        }, b.hasEventListener = function(a) {
            var b = this._listeners,
                c = this._captureListeners;
            return !!(b && b[a] || c && c[a])
        }, b.willTrigger = function(a) {
            for (var b = this; b;) {
                if (b.hasEventListener(a)) return !0;
                b = b.parent
            }
            return !1
        }, b.toString = function() {
            return "[EventDispatcher]"
        }, b._dispatchEvent = function(a, b) {
            var c, d = 1 == b ? this._captureListeners : this._listeners;
            if (a && d) {
                var e = d[a.type];
                if (!e || !(c = e.length)) return;
                try {
                    a.currentTarget = this
                } catch (f) {}
                try {
                    a.eventPhase = b
                } catch (f) {}
                a.removed = !1, e = e.slice();
                for (var g = 0; c > g && !a.immediatePropagationStopped; g++) {
                    var h = e[g];
                    h.handleEvent ? h.handleEvent(a) : h(a), a.removed && (this.off(a.type, h, 1 == b), a.removed = !1)
                }
            }
        }, createjs.EventDispatcher = a
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c) {
            this.type = a, this.target = null, this.currentTarget = null, this.eventPhase = 0, this.bubbles = !!b, this.cancelable = !!c, this.timeStamp = (new Date).getTime(), this.defaultPrevented = !1, this.propagationStopped = !1, this.immediatePropagationStopped = !1, this.removed = !1
        }
        var b = a.prototype;
        b.preventDefault = function() {
            this.defaultPrevented = this.cancelable && !0
        }, b.stopPropagation = function() {
            this.propagationStopped = !0
        }, b.stopImmediatePropagation = function() {
            this.immediatePropagationStopped = this.propagationStopped = !0
        }, b.remove = function() {
            this.removed = !0
        }, b.clone = function() {
            return new a(this.type, this.bubbles, this.cancelable)
        }, b.set = function(a) {
            for (var b in a) this[b] = a[b];
            return this
        }, b.toString = function() {
            return "[Event (type=" + this.type + ")]"
        }, createjs.Event = a
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c) {
            this.Event_constructor("error"), this.title = a, this.message = b, this.data = c
        }
        var b = createjs.extend(a, createjs.Event);
        b.clone = function() {
            return new createjs.ErrorEvent(this.title, this.message, this.data)
        }, createjs.ErrorEvent = createjs.promote(a, "Event")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b) {
            this.Event_constructor("progress"), this.loaded = a, this.total = null == b ? 1 : b, this.progress = 0 == b ? 0 : this.loaded / this.total
        }
        var b = createjs.extend(a, createjs.Event);
        b.clone = function() {
            return new createjs.ProgressEvent(this.loaded, this.total)
        }, createjs.ProgressEvent = createjs.promote(a, "Event")
    }(window), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a() {
            this.src = null, this.type = null, this.id = null, this.maintainOrder = !1, this.callback = null, this.data = null, this.method = createjs.LoadItem.GET, this.values = null, this.headers = null, this.withCredentials = !1, this.mimeType = null, this.crossOrigin = "Anonymous", this.loadTimeout = 8e3
        }
        var b = a.prototype = {},
            c = a;
        c.create = function(b) {
            if ("string" == typeof b) {
                var d = new a;
                return d.src = b, d
            }
            if (b instanceof c) return b;
            if (b instanceof Object) return b;
            throw new Error("Type not recognized.")
        }, b.set = function(a) {
            for (var b in a) this[b] = a[b];
            return this
        }, createjs.LoadItem = c
    }(),
    function() {
        var a = {};
        a.ABSOLUTE_PATT = /^(?:\w+:)?\/{2}/i, a.RELATIVE_PATT = /^[./]*?\//i, a.EXTENSION_PATT = /\/?[^/]+\.(\w{1,5})$/i, a.parseURI = function(b) {
            var c = {
                absolute: !1,
                relative: !1
            };
            if (null == b) return c;
            var d = b.indexOf("?");
            d > -1 && (b = b.substr(0, d));
            var e;
            return a.ABSOLUTE_PATT.test(b) ? c.absolute = !0 : a.RELATIVE_PATT.test(b) && (c.relative = !0), (e = b.match(a.EXTENSION_PATT)) && (c.extension = e[1].toLowerCase()), c
        }, a.formatQueryString = function(a, b) {
            if (null == a) throw new Error("You must specify data.");
            var c = [];
            for (var d in a) c.push(d + "=" + escape(a[d]));
            return b && (c = c.concat(b)), c.join("&")
        }, a.buildPath = function(a, b) {
            if (null == b) return a;
            var c = [],
                d = a.indexOf("?");
            if (-1 != d) {
                var e = a.slice(d + 1);
                c = c.concat(e.split("&"))
            }
            return -1 != d ? a.slice(0, d) + "?" + this._formatQueryString(b, c) : a + "?" + this._formatQueryString(b, c)
        }, a.isCrossDomain = function(a) {
            var b = document.createElement("a");
            b.href = a.src;
            var c = document.createElement("a");
            c.href = location.href;
            var d = "" != b.hostname && (b.port != c.port || b.protocol != c.protocol || b.hostname != c.hostname);
            return d
        }, a.isLocal = function(a) {
            var b = document.createElement("a");
            return b.href = a.src, "" == b.hostname && "file:" == b.protocol
        }, a.isBinary = function(a) {
            switch (a) {
                case createjs.AbstractLoader.IMAGE:
                case createjs.AbstractLoader.BINARY:
                    return !0;
                default:
                    return !1
            }
        }, a.isImageTag = function(a) {
            return a instanceof HTMLImageElement
        }, a.isAudioTag = function(a) {
            return window.HTMLAudioElement ? a instanceof HTMLAudioElement : !1
        }, a.isVideoTag = function(a) {
            return window.HTMLVideoElement ? a instanceof HTMLVideoElement : void 0
        }, a.isText = function(a) {
            switch (a) {
                case createjs.AbstractLoader.TEXT:
                case createjs.AbstractLoader.JSON:
                case createjs.AbstractLoader.MANIFEST:
                case createjs.AbstractLoader.XML:
                case createjs.AbstractLoader.CSS:
                case createjs.AbstractLoader.SVG:
                case createjs.AbstractLoader.JAVASCRIPT:
                    return !0;
                default:
                    return !1
            }
        }, a.getTypeByExtension = function(a) {
            if (null == a) return createjs.AbstractLoader.TEXT;
            switch (a.toLowerCase()) {
                case "jpeg":
                case "jpg":
                case "gif":
                case "png":
                case "webp":
                case "bmp":
                    return createjs.AbstractLoader.IMAGE;
                case "ogg":
                case "mp3":
                case "webm":
                    return createjs.AbstractLoader.SOUND;
                case "mp4":
                case "webm":
                case "ts":
                    return createjs.AbstractLoader.VIDEO;
                case "json":
                    return createjs.AbstractLoader.JSON;
                case "xml":
                    return createjs.AbstractLoader.XML;
                case "css":
                    return createjs.AbstractLoader.CSS;
                case "js":
                    return createjs.AbstractLoader.JAVASCRIPT;
                case "svg":
                    return createjs.AbstractLoader.SVG;
                default:
                    return createjs.AbstractLoader.TEXT
            }
        }, createjs.RequestUtils = a
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c) {
            this.EventDispatcher_constructor(), this.loaded = !1, this.canceled = !1, this.progress = 0, this.type = c, this.resultFormatter = null, this._item = a ? createjs.LoadItem.create(a) : null, this._preferXHR = b, this._result = null, this._rawResult = null, this._loadedItems = null, this._tagSrcAttribute = null, this._tag = null
        }
        var b = createjs.extend(a, createjs.EventDispatcher),
            c = a;
        c.POST = "POST", c.GET = "GET", c.BINARY = "binary", c.CSS = "css", c.IMAGE = "image", c.JAVASCRIPT = "javascript", c.JSON = "json", c.JSONP = "jsonp", c.MANIFEST = "manifest", c.SOUND = "sound", c.VIDEO = "video", c.SPRITESHEET = "spritesheet", c.SVG = "svg", c.TEXT = "text", c.XML = "xml", b.getItem = function() {
            return this._item
        }, b.getResult = function(a) {
            return a ? this._rawResult : this._result
        }, b.getTag = function() {
            return this._tag
        }, b.setTag = function(a) {
            this._tag = a
        }, b.load = function() {
            this._createRequest(), this._request.on("complete", this, this), this._request.on("progress", this, this), this._request.on("loadStart", this, this), this._request.on("abort", this, this), this._request.on("timeout", this, this), this._request.on("error", this, this);
            var a = new createjs.Event("initialize");
            a.loader = this._request, this.dispatchEvent(a), this._request.load()
        }, b.cancel = function() {
            this.canceled = !0, this.destroy()
        }, b.destroy = function() {
            this._request && (this._request.removeAllEventListeners(), this._request.destroy()), this._request = null, this._item = null, this._rawResult = null, this._result = null, this._loadItems = null, this.removeAllEventListeners()
        }, b.getLoadedItems = function() {
            return this._loadedItems
        }, b._createRequest = function() {
            this._request = this._preferXHR ? new createjs.XHRRequest(this._item) : new createjs.TagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute)
        }, b._createTag = function() {
            return null
        }, b._sendLoadStart = function() {
            this._isCanceled() || this.dispatchEvent("loadstart")
        }, b._sendProgress = function(a) {
            if (!this._isCanceled()) {
                var b = null;
                "number" == typeof a ? (this.progress = a, b = new createjs.ProgressEvent(this.progress)) : (b = a, this.progress = a.loaded / a.total, b.progress = this.progress, (isNaN(this.progress) || this.progress == 1 / 0) && (this.progress = 0)), this.hasEventListener("progress") && this.dispatchEvent(b)
            }
        }, b._sendComplete = function() {
            if (!this._isCanceled()) {
                this.loaded = !0;
                var a = new createjs.Event("complete");
                a.rawResult = this._rawResult, null != this._result && (a.result = this._result), this.dispatchEvent(a)
            }
        }, b._sendError = function(a) {
            !this._isCanceled() && this.hasEventListener("error") && (null == a && (a = new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")), this.dispatchEvent(a))
        }, b._isCanceled = function() {
            return null == window.createjs || this.canceled ? !0 : !1
        }, b.resultFormatter = null, b.handleEvent = function(a) {
            switch (a.type) {
                case "complete":
                    this._rawResult = a.target._response;
                    var b = this.resultFormatter && this.resultFormatter(this),
                        c = this;
                    b instanceof Function ? b(function(a) {
                        c._result = a, c._sendComplete()
                    }) : (this._result = b || this._rawResult, this._sendComplete());
                    break;
                case "progress":
                    this._sendProgress(a);
                    break;
                case "error":
                    this._sendError(a);
                    break;
                case "loadstart":
                    this._sendLoadStart();
                    break;
                case "abort":
                case "timeout":
                    this._isCanceled() || this.dispatchEvent(a.type)
            }
        }, b.buildPath = function(a, b) {
            return createjs.RequestUtils.buildPath(a, b)
        }, b.toString = function() {
            return "[PreloadJS AbstractLoader]"
        }, createjs.AbstractLoader = createjs.promote(a, "EventDispatcher")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c) {
            this.AbstractLoader_constructor(a, b, c), this.resultFormatter = this._formatResult, this._tagSrcAttribute = "src"
        }
        var b = createjs.extend(a, createjs.AbstractLoader);
        b.load = function() {
            this._tag || (this._tag = this._createTag(this._item.src)), this._tag.preload = "auto", this._tag.load(), this.AbstractLoader_load()
        }, b._createTag = function() {}, b._createRequest = function() {
            this._request = this._preferXHR ? new createjs.XHRRequest(this._item) : new createjs.MediaTagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute)
        }, b._formatResult = function(a) {
            return this._tag.removeEventListener && this._tag.removeEventListener("canplaythrough", this._loadedHandler), this._tag.onstalled = null, this._preferXHR && (a.getTag().src = a.getResult(!0)), a.getTag()
        }, createjs.AbstractMediaLoader = createjs.promote(a, "AbstractLoader")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";
        var a = function(a) {
                this._item = a
            },
            b = createjs.extend(a, createjs.EventDispatcher);
        b.load = function() {}, b.destroy = function() {}, b.cancel = function() {}, createjs.AbstractRequest = createjs.promote(a, "EventDispatcher")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c) {
            this.AbstractRequest_constructor(a), this._tag = b, this._tagSrcAttribute = c, this._loadedHandler = createjs.proxy(this._handleTagComplete, this), this._addedToDOM = !1, this._startTagVisibility = null
        }
        var b = createjs.extend(a, createjs.AbstractRequest);
        b.load = function() {
            null == this._tag.parentNode && (window.document.body.appendChild(this._tag), this._addedToDOM = !0), this._tag.onload = createjs.proxy(this._handleTagComplete, this), this._tag.onreadystatechange = createjs.proxy(this._handleReadyStateChange, this);
            var a = new createjs.Event("initialize");
            a.loader = this._tag, this.dispatchEvent(a), this._hideTag(), this._tag[this._tagSrcAttribute] = this._item.src
        }, b.destroy = function() {
            this._clean(), this._tag = null, this.AbstractRequest_destroy()
        }, b._handleReadyStateChange = function() {
            clearTimeout(this._loadTimeout);
            var a = this._tag;
            ("loaded" == a.readyState || "complete" == a.readyState) && this._handleTagComplete()
        }, b._handleTagComplete = function() {
            this._rawResult = this._tag, this._result = this.resultFormatter && this.resultFormatter(this) || this._rawResult, this._clean(), this._showTag(), this.dispatchEvent("complete")
        }, b._clean = function() {
            this._tag.onload = null, this._tag.onreadystatechange = null, this._addedToDOM && null != this._tag.parentNode && this._tag.parentNode.removeChild(this._tag)
        }, b._hideTag = function() {
            this._startTagVisibility = this._tag.style.visibility, this._tag.style.visibility = "hidden"
        }, b._showTag = function() {
            this._tag.style.visibility = this._startTagVisibility
        }, b._handleStalled = function() {}, createjs.TagRequest = createjs.promote(a, "AbstractRequest")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c) {
            this.AbstractRequest_constructor(a), this._tag = b, this._tagSrcAttribute = c, this._loadedHandler = createjs.proxy(this._handleTagComplete, this)
        }
        var b = createjs.extend(a, createjs.TagRequest);
        b.load = function() {
            this._tag.onstalled = createjs.proxy(this._handleStalled, this), this._tag.onprogress = createjs.proxy(this._handleProgress, this), this._tag.addEventListener && this._tag.addEventListener("canplaythrough", this._loadedHandler, !1), this.TagRequest_load()
        }, b._handleReadyStateChange = function() {
            clearTimeout(this._loadTimeout);
            var a = this._tag;
            ("loaded" == a.readyState || "complete" == a.readyState) && this._handleTagComplete()
        }, b._handleStalled = function() {}, b._handleProgress = function(a) {
            if (a && !(a.loaded > 0 && 0 == a.total)) {
                var b = new createjs.ProgressEvent(a.loaded, a.total);
                this.dispatchEvent(b)
            }
        }, b._clean = function() {
            this._tag.removeEventListener && this._tag.removeEventListener("canplaythrough", this._loadedHandler), this._tag.onstalled = null, this._tag.onprogress = null, this.TagRequest__clean()
        }, createjs.MediaTagRequest = createjs.promote(a, "TagRequest")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a) {
            this.AbstractRequest_constructor(a), this._request = null, this._loadTimeout = null, this._xhrLevel = 1, this._response = null, this._rawResponse = null, this._canceled = !1, this._handleLoadStartProxy = createjs.proxy(this._handleLoadStart, this), this._handleProgressProxy = createjs.proxy(this._handleProgress, this), this._handleAbortProxy = createjs.proxy(this._handleAbort, this), this._handleErrorProxy = createjs.proxy(this._handleError, this), this._handleTimeoutProxy = createjs.proxy(this._handleTimeout, this), this._handleLoadProxy = createjs.proxy(this._handleLoad, this), this._handleReadyStateChangeProxy = createjs.proxy(this._handleReadyStateChange, this), !this._createXHR(a)
        }
        var b = createjs.extend(a, createjs.AbstractRequest);
        a.ACTIVEX_VERSIONS = ["Msxml2.XMLHTTP.6.0", "Msxml2.XMLHTTP.5.0", "Msxml2.XMLHTTP.4.0", "MSXML2.XMLHTTP.3.0", "MSXML2.XMLHTTP", "Microsoft.XMLHTTP"], b.getResult = function(a) {
            return a && this._rawResponse ? this._rawResponse : this._response
        }, b.cancel = function() {
            this.canceled = !0, this._clean(), this._request.abort()
        }, b.load = function() {
            if (null == this._request) return void this._handleError();
            this._request.addEventListener("loadstart", this._handleLoadStartProxy, !1), this._request.addEventListener("progress", this._handleProgressProxy, !1), this._request.addEventListener("abort", this._handleAbortProxy, !1), this._request.addEventListener("error", this._handleErrorProxy, !1), this._request.addEventListener("timeout", this._handleTimeoutProxy, !1), this._request.addEventListener("load", this._handleLoadProxy, !1), this._request.addEventListener("readystatechange", this._handleReadyStateChangeProxy, !1), 1 == this._xhrLevel && (this._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout));
            try {
                this._item.values && this._item.method != createjs.AbstractLoader.GET ? this._item.method == createjs.AbstractLoader.POST && this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)) : this._request.send()
            } catch (a) {
                this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND", null, a))
            }
        }, b.setResponseType = function(a) {
            this._request.responseType = a
        }, b.getAllResponseHeaders = function() {
            return this._request.getAllResponseHeaders instanceof Function ? this._request.getAllResponseHeaders() : null
        }, b.getResponseHeader = function(a) {
            return this._request.getResponseHeader instanceof Function ? this._request.getResponseHeader(a) : null
        }, b._handleProgress = function(a) {
            if (a && !(a.loaded > 0 && 0 == a.total)) {
                var b = new createjs.ProgressEvent(a.loaded, a.total);
                this.dispatchEvent(b)
            }
        }, b._handleLoadStart = function() {
            clearTimeout(this._loadTimeout), this.dispatchEvent("loadstart")
        }, b._handleAbort = function(a) {
            this._clean(), this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED", null, a))
        }, b._handleError = function(a) {
            this._clean(), this.dispatchEvent(new createjs.ErrorEvent(a.message))
        }, b._handleReadyStateChange = function() {
            4 == this._request.readyState && this._handleLoad()
        }, b._handleLoad = function() {
            if (!this.loaded) {
                this.loaded = !0;
                var a = this._checkError();
                if (a) return void this._handleError(a);
                this._response = this._getResponse(), this._clean(), this.dispatchEvent(new createjs.Event("complete"))
            }
        }, b._handleTimeout = function(a) {
            this._clean(), this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT", null, a))
        }, b._checkError = function() {
            var a = parseInt(this._request.status);
            switch (a) {
                case 404:
                case 0:
                    return new Error(a)
            }
            return null
        }, b._getResponse = function() {
            if (null != this._response) return this._response;
            if (null != this._request.response) return this._request.response;
            try {
                if (null != this._request.responseText) return this._request.responseText
            } catch (a) {}
            try {
                if (null != this._request.responseXML) return this._request.responseXML
            } catch (a) {}
            return null
        }, b._createXHR = function(a) {
            var b = createjs.RequestUtils.isCrossDomain(a),
                c = {},
                d = null;
            if (window.XMLHttpRequest) d = new XMLHttpRequest, b && void 0 === d.withCredentials && window.XDomainRequest && (d = new XDomainRequest);
            else {
                for (var e = 0, f = s.ACTIVEX_VERSIONS.length; f > e; e++) {
                    {
                        s.ACTIVEX_VERSIONS[e]
                    }
                    try {
                        d = new ActiveXObject(axVersions);
                        break
                    } catch (g) {}
                }
                if (null == d) return !1
            }
            a.mimeType && d.overrideMimeType && d.overrideMimeType(a.mimeType), this._xhrLevel = "string" == typeof d.responseType ? 2 : 1;
            var h = null;
            if (h = a.method == createjs.AbstractLoader.GET ? createjs.RequestUtils.buildPath(a.src, a.values) : a.src, d.open(a.method || createjs.AbstractLoader.GET, h, !0), b && d instanceof XMLHttpRequest && 1 == this._xhrLevel && (c.Origin = location.origin), a.values && a.method == createjs.AbstractLoader.POST && (c["Content-Type"] = "application/x-www-form-urlencoded"), b || c["X-Requested-With"] || (c["X-Requested-With"] = "XMLHttpRequest"), a.headers)
                for (var i in a.headers) c[i] = a.headers[i];
            for (i in c) d.setRequestHeader(i, c[i]);
            return d instanceof XMLHttpRequest && void 0 !== a.withCredentials && (d.withCredentials = a.withCredentials), this._request = d, !0
        }, b._clean = function() {
            clearTimeout(this._loadTimeout), this._request.removeEventListener("loadstart", this._handleLoadStartProxy), this._request.removeEventListener("progress", this._handleProgressProxy), this._request.removeEventListener("abort", this._handleAbortProxy), this._request.removeEventListener("error", this._handleErrorProxy), this._request.removeEventListener("timeout", this._handleTimeoutProxy), this._request.removeEventListener("load", this._handleLoadProxy), this._request.removeEventListener("readystatechange", this._handleReadyStateChangeProxy)
        }, b.toString = function() {
            return "[PreloadJS XHRRequest]"
        }, createjs.XHRRequest = createjs.promote(a, "AbstractRequest")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b) {
            this.AbstractMediaLoader_constructor(a, b, createjs.AbstractLoader.SOUND), createjs.RequestUtils.isAudioTag(a) ? this._tag = a : createjs.RequestUtils.isAudioTag(a.src) ? this._tag = a : createjs.RequestUtils.isAudioTag(a.tag) && (this._tag = createjs.RequestUtils.isAudioTag(a) ? a : a.src), null != this._tag && (this._preferXHR = !1)
        }
        var b = createjs.extend(a, createjs.AbstractMediaLoader),
            c = a;
        c.canLoadItem = function(a) {
            return a.type == createjs.AbstractLoader.SOUND
        }, b._createTag = function(a) {
            var b = document.createElement("audio");
            return b.autoplay = !1, b.preload = "none", b.src = a, b
        }, createjs.SoundLoader = createjs.promote(a, "AbstractMediaLoader")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a() {
            throw "Sound cannot be instantiated"
        }

        function b(a, b) {
            this.init(a, b)
        }
        var c = a;
        c.INTERRUPT_ANY = "any", c.INTERRUPT_EARLY = "early", c.INTERRUPT_LATE = "late", c.INTERRUPT_NONE = "none", c.PLAY_INITED = "playInited", c.PLAY_SUCCEEDED = "playSucceeded", c.PLAY_INTERRUPTED = "playInterrupted", c.PLAY_FINISHED = "playFinished", c.PLAY_FAILED = "playFailed", c.SUPPORTED_EXTENSIONS = ["mp3", "ogg", "mpeg", "wav", "m4a", "mp4", "aiff", "wma", "mid"], c.EXTENSION_MAP = {
            m4a: "mp4"
        }, c.FILE_PATTERN = /^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/, c.defaultInterruptBehavior = c.INTERRUPT_NONE, c.alternateExtensions = [], c.activePlugin = null, c._pluginsRegistered = !1, c._lastID = 0, c._masterVolume = 1, c._masterMute = !1, c._instances = [], c._idHash = {}, c._preloadHash = {}, c.addEventListener = null, c.removeEventListener = null, c.removeAllEventListeners = null, c.dispatchEvent = null, c.hasEventListener = null, c._listeners = null, createjs.EventDispatcher.initialize(c), c.getPreloadHandlers = function() {
            return {
                callback: createjs.proxy(c.initLoad, c),
                types: ["sound"],
                extensions: c.SUPPORTED_EXTENSIONS
            }
        }, c._handleLoadComplete = function(a) {
            var b = a.target.getItem().src;
            if (c._preloadHash[b])
                for (var d = 0, e = c._preloadHash[b].length; e > d; d++) {
                    var f = c._preloadHash[b][d];
                    if (c._preloadHash[b][d] = !0, c.hasEventListener("fileload")) {
                        var a = new createjs.Event("fileload");
                        a.src = f.src, a.id = f.id, a.data = f.data, a.sprite = f.sprite, c.dispatchEvent(a)
                    }
                }
        }, c._handleLoadError = function(a) {
            var b = a.target.getItem().src;
            if (c._preloadHash[b])
                for (var d = 0, e = c._preloadHash[b].length; e > d; d++) {
                    var f = c._preloadHash[b][d];
                    if (c._preloadHash[b][d] = !1, c.hasEventListener("fileerror")) {
                        var a = new createjs.Event("fileerror");
                        a.src = f.src, a.id = f.id, a.data = f.data, a.sprite = f.sprite, c.dispatchEvent(a)
                    }
                }
        }, c._registerPlugin = function(a) {
            return a.isSupported() ? (c.activePlugin = new a, !0) : !1
        }, c.registerPlugins = function(a) {
            c._pluginsRegistered = !0;
            for (var b = 0, d = a.length; d > b; b++)
                if (c._registerPlugin(a[b])) return !0;
            return !1
        }, c.initializeDefaultPlugins = function() {
            return null != c.activePlugin ? !0 : c._pluginsRegistered ? !1 : c.registerPlugins([createjs.WebAudioPlugin, createjs.HTMLAudioPlugin]) ? !0 : !1
        }, c.isReady = function() {
            return null != c.activePlugin
        }, c.getCapabilities = function() {
            return null == c.activePlugin ? null : c.activePlugin._capabilities
        }, c.getCapability = function(a) {
            return null == c.activePlugin ? null : c.activePlugin._capabilities[a]
        }, c.initLoad = function(a) {
            return c._registerSound(a)
        }, c._registerSound = function(a) {
            if (!c.initializeDefaultPlugins()) return !1;
            var d = c._parsePath(a.src);
            if (null == d) return !1;
            a.src = d.src, a.type = "sound";
            var e = a.data,
                f = c.activePlugin.defaultNumChannels || null;
            if (null != e && (isNaN(e.channels) ? isNaN(e) || (f = parseInt(e)) : f = parseInt(e.channels), e.audioSprite))
                for (var g, h = e.audioSprite.length; h--;) g = e.audioSprite[h], c._idHash[g.id] = {
                    src: a.src,
                    startTime: parseInt(g.startTime),
                    duration: parseInt(g.duration)
                };
            null != a.id && (c._idHash[a.id] = {
                src: a.src
            });
            var i = c.activePlugin.register(a, f);
            return b.create(a.src, f), null != e && isNaN(e) ? a.data.channels = f || b.maxPerChannel() : a.data = f || b.maxPerChannel(), i.type && (a.type = i.type), i
        }, c.registerSound = function(a, b, d, e) {
            var f = {
                src: a,
                id: b,
                data: d
            };
            a instanceof Object && (e = b, f = a), f = createjs.LoadItem.create(f), null != e && (f.src = e + a);
            var g = c._registerSound(f);
            if (!g) return !1;
            if (c._preloadHash[f.src] || (c._preloadHash[f.src] = []), c._preloadHash[f.src].push(f), 1 == c._preloadHash[f.src].length) g.on("complete", createjs.proxy(this._handleLoadComplete, this)), g.on("error", createjs.proxy(this._handleLoadError, this)), c.activePlugin.preload(g);
            else if (1 == c._preloadHash[f.src][0]) return !0;
            return f
        }, c.registerSounds = function(a, b) {
            var c = [];
            a.path && (b ? b += a.path : b = a.path);
            for (var d = 0, e = a.length; e > d; d++) c[d] = createjs.Sound.registerSound(a[d].src, a[d].id, a[d].data, b);
            return c
        }, c.registerManifest = function(a, b) {
            try {
                console.log("createjs.Sound.registerManifest is deprecated, please use createjs.Sound.registerSounds.")
            } catch (c) {}
            return this.registerSounds(a, b)
        }, c.removeSound = function(a, d) {
            if (null == c.activePlugin) return !1;
            a instanceof Object && (a = a.src), a = c._getSrcById(a).src, null != d && (a = d + a);
            var e = c._parsePath(a);
            if (null == e) return !1;
            a = e.src;
            for (var f in c._idHash) c._idHash[f].src == a && delete c._idHash[f];
            return b.removeSrc(a), delete c._preloadHash[a], c.activePlugin.removeSound(a), !0
        }, c.removeSounds = function(a, b) {
            var c = [];
            a.path && (b ? b += a.path : b = a.path);
            for (var d = 0, e = a.length; e > d; d++) c[d] = createjs.Sound.removeSound(a[d].src, b);
            return c
        }, c.removeManifest = function(a, b) {
            try {
                console.log("createjs.Sound.removeManifest is deprecated, please use createjs.Sound.removeSounds.")
            } catch (d) {}
            return c.removeSounds(a, b)
        }, c.removeAllSounds = function() {
            c._idHash = {}, c._preloadHash = {}, b.removeAll(), c.activePlugin && c.activePlugin.removeAllSounds()
        }, c.loadComplete = function(a) {
            if (!c.isReady()) return !1;
            var b = c._parsePath(a);
            return a = b ? c._getSrcById(b.src).src : c._getSrcById(a).src, 1 == c._preloadHash[a][0]
        }, c._parsePath = function(a) {
            "string" != typeof a && (a = a.toString());
            var b = a.match(c.FILE_PATTERN);
            if (null == b) return !1;
            for (var d = b[4], e = b[5], f = c.getCapabilities(), g = 0; !f[e];)
                if (e = c.alternateExtensions[g++], g > c.alternateExtensions.length) return null;
            a = a.replace("." + b[5], "." + e);
            var h = {
                name: d,
                src: a,
                extension: e
            };
            return h
        }, c.play = function(a, b, d, e, f, g, h, i, j) {
            b instanceof Object && (d = b.delay, e = b.offset, f = b.loop, g = b.volume, h = b.pan, i = b.startTime, j = b.duration, b = b.interrupt);
            var k = c.createInstance(a, i, j),
                l = c._playInstance(k, b, d, e, f, g, h);
            return l || k._playFailed(), k
        }, c.createInstance = function(a, d, e) {
            if (!c.initializeDefaultPlugins()) return new createjs.DefaultSoundInstance(a, d, e);
            a = c._getSrcById(a);
            var f = c._parsePath(a.src),
                g = null;
            return null != f && null != f.src ? (b.create(f.src), null == d && (d = a.startTime), g = c.activePlugin.create(f.src, d, e || a.duration)) : g = new createjs.DefaultSoundInstance(a, d, e), g.uniqueId = c._lastID++, g
        }, c.setVolume = function(a) {
            if (null == Number(a)) return !1;
            if (a = Math.max(0, Math.min(1, a)), c._masterVolume = a, !this.activePlugin || !this.activePlugin.setVolume || !this.activePlugin.setVolume(a))
                for (var b = this._instances, d = 0, e = b.length; e > d; d++) b[d].setMasterVolume(a)
        }, c.getVolume = function() {
            return c._masterVolume
        }, c.setMute = function(a) {
            if (null == a) return !1;
            if (this._masterMute = a, !this.activePlugin || !this.activePlugin.setMute || !this.activePlugin.setMute(a))
                for (var b = this._instances, c = 0, d = b.length; d > c; c++) b[c].setMasterMute(a);
            return !0
        }, c.getMute = function() {
            return this._masterMute
        }, c.stop = function() {
            for (var a = this._instances, b = a.length; b--;) a[b].stop()
        }, c._playInstance = function(a, b, d, e, f, g, h) {
            if (b instanceof Object && (d = b.delay, e = b.offset, f = b.loop, g = b.volume, h = b.pan, b = b.interrupt), b = b || c.defaultInterruptBehavior, null == d && (d = 0), null == e && (e = a.getPosition()), null == f && (f = a.loop), null == g && (g = a.volume), null == h && (h = a.pan), 0 == d) {
                var i = c._beginPlaying(a, b, e, f, g, h);
                if (!i) return !1
            } else {
                var j = setTimeout(function() {
                    c._beginPlaying(a, b, e, f, g, h)
                }, d);
                a.delayTimeoutId = j
            }
            return this._instances.push(a), !0
        }, c._beginPlaying = function(a, c, d, e, f, g) {
            if (!b.add(a, c)) return !1;
            var h = a._beginPlaying(d, e, f, g);
            if (!h) {
                var i = createjs.indexOf(this._instances, a);
                return i > -1 && this._instances.splice(i, 1), !1
            }
            return !0
        }, c._getSrcById = function(a) {
            return c._idHash[a] || {
                src: a
            }
        }, c._playFinished = function(a) {
            b.remove(a);
            var c = createjs.indexOf(this._instances, a);
            c > -1 && this._instances.splice(c, 1)
        }, createjs.Sound = a, b.channels = {}, b.create = function(a, c) {
            var d = b.get(a);
            return null == d ? (b.channels[a] = new b(a, c), !0) : !1
        }, b.removeSrc = function(a) {
            var c = b.get(a);
            return null == c ? !1 : (c._removeAll(), delete b.channels[a], !0)
        }, b.removeAll = function() {
            for (var a in b.channels) b.channels[a]._removeAll();
            b.channels = {}
        }, b.add = function(a, c) {
            var d = b.get(a.src);
            return null == d ? !1 : d._add(a, c)
        }, b.remove = function(a) {
            var c = b.get(a.src);
            return null == c ? !1 : (c._remove(a), !0)
        }, b.maxPerChannel = function() {
            return d.maxDefault
        }, b.get = function(a) {
            return b.channels[a]
        };
        var d = b.prototype;
        d.constructor = b, d.src = null, d.max = null, d.maxDefault = 100, d.length = 0, d.init = function(a, b) {
            this.src = a, this.max = b || this.maxDefault, -1 == this.max && (this.max = this.maxDefault), this._instances = []
        }, d._get = function(a) {
            return this._instances[a]
        }, d._add = function(a, b) {
            return this._getSlot(b, a) ? (this._instances.push(a), this.length++, !0) : !1
        }, d._remove = function(a) {
            var b = createjs.indexOf(this._instances, a);
            return -1 == b ? !1 : (this._instances.splice(b, 1), this.length--, !0)
        }, d._removeAll = function() {
            for (var a = this.length - 1; a >= 0; a--) this._instances[a].stop()
        }, d._getSlot = function(b) {
            var c, d;
            if (b != a.INTERRUPT_NONE && (d = this._get(0), null == d)) return !0;
            for (var e = 0, f = this.max; f > e; e++) {
                if (c = this._get(e), null == c) return !0;
                if (c.playState == a.PLAY_FINISHED || c.playState == a.PLAY_INTERRUPTED || c.playState == a.PLAY_FAILED) {
                    d = c;
                    break
                }
                b != a.INTERRUPT_NONE && (b == a.INTERRUPT_EARLY && c.getPosition() < d.getPosition() || b == a.INTERRUPT_LATE && c.getPosition() > d.getPosition()) && (d = c)
            }
            return null != d ? (d._interrupt(), this._remove(d), !0) : !1
        }, d.toString = function() {
            return "[Sound SoundChannel]"
        }
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";
        var a = function(a, b, c, d) {
                this.EventDispatcher_constructor(), this.src = a, this.uniqueId = -1, this.playState = null, this.delayTimeoutId = null, this._startTime = Math.max(0, b || 0), this._volume = 1, createjs.definePropertySupported && Object.defineProperty(this, "volume", {
                        get: this.getVolume,
                        set: this.setVolume
                    }), this._pan = 0, createjs.definePropertySupported && Object.defineProperty(this, "pan", {
                        get: this.getPan,
                        set: this.setPan
                    }), this._duration = Math.max(0, c || 0), createjs.definePropertySupported && Object.defineProperty(this, "duration", {
                        get: this.getDuration,
                        set: this.setDuration
                    }), this._playbackResource = null, createjs.definePropertySupported && Object.defineProperty(this, "playbackResource", {
                        get: this.getPlaybackResource,
                        set: this.setPlaybackResource
                    }), d !== !1 && d !== !0 && this.setPlaybackResource(d),
                    this._position = 0, createjs.definePropertySupported && Object.defineProperty(this, "position", {
                        get: this.getPosition,
                        set: this.setPosition
                    }), this._loop = 0, createjs.definePropertySupported && Object.defineProperty(this, "loop", {
                        get: this.getLoop,
                        set: this.setLoop
                    }), this._muted = !1, createjs.definePropertySupported && Object.defineProperty(this, "muted", {
                        get: this.getMuted,
                        set: this.setMuted
                    }), this._paused = !1, createjs.definePropertySupported && Object.defineProperty(this, "paused", {
                        get: this.getPaused,
                        set: this.setPaused
                    })
            },
            b = createjs.extend(a, createjs.EventDispatcher);
        b.play = function(a, b, c, d, e, f) {
            return this.playState == createjs.Sound.PLAY_SUCCEEDED ? (a instanceof Object && (c = a.offset, d = a.loop, e = a.volume, f = a.pan), null != c && this.setPosition(c), null != d && this.setLoop(d), null != e && this.setVolume(e), null != f && this.setPan(f), void(this._paused && this.setPaused(!1))) : (this._cleanUp(), createjs.Sound._playInstance(this, a, b, c, d, e, f), this)
        }, b.pause = function() {
            return this._paused || this.playState != createjs.Sound.PLAY_SUCCEEDED ? !1 : (this.setPaused(!0), !0)
        }, b.resume = function() {
            return this._paused ? (this.setPaused(!1), !0) : !1
        }, b.stop = function() {
            return this._position = 0, this._paused = !1, this._handleStop(), this._cleanUp(), this.playState = createjs.Sound.PLAY_FINISHED, this
        }, b.destroy = function() {
            this._cleanUp(), this.src = null, this.playbackResource = null, this.removeAllEventListeners()
        }, b.toString = function() {
            return "[AbstractSoundInstance]"
        }, b.getPaused = function() {
            return this._paused
        }, b.setPaused = function(a) {
            return a !== !0 && a !== !1 || this._paused == a || 1 == a && this.playState != createjs.Sound.PLAY_SUCCEEDED ? void 0 : (this._paused = a, a ? this._pause() : this._resume(), clearTimeout(this.delayTimeoutId), this)
        }, b.setVolume = function(a) {
            return a == this._volume ? this : (this._volume = Math.max(0, Math.min(1, a)), this._muted || this._updateVolume(), this)
        }, b.getVolume = function() {
            return this._volume
        }, b.setMute = function(a) {
            this.setMuted(a)
        }, b.getMute = function() {
            return this._muted
        }, b.setMuted = function(a) {
            return a === !0 || a === !1 ? (this._muted = a, this._updateVolume(), this) : void 0
        }, b.getMuted = function() {
            return this._muted
        }, b.setPan = function(a) {
            return a == this._pan ? this : (this._pan = Math.max(-1, Math.min(1, a)), this._updatePan(), this)
        }, b.getPan = function() {
            return this._pan
        }, b.getPosition = function() {
            return this._paused || this.playState != createjs.Sound.PLAY_SUCCEEDED ? this._position : this._calculateCurrentPosition()
        }, b.setPosition = function(a) {
            return this._position = Math.max(0, a), this.playState == createjs.Sound.PLAY_SUCCEEDED && this._updatePosition(), this
        }, b.getDuration = function() {
            return this._duration
        }, b.setDuration = function(a) {
            return a == this._duration ? this : (this._duration = Math.max(0, a || 0), this._updateDuration(), this)
        }, b.setPlaybackResource = function(a) {
            return this._playbackResource = a, 0 == this._duration && this._setDurationFromSource(), this
        }, b.getPlaybackResource = function() {
            return this._playbackResource
        }, b.getLoop = function() {
            return this._loop
        }, b.setLoop = function(a) {
            null != this._playbackResource && (0 != this._loop && 0 == a && this._removeLooping(a), 0 == this._loop && 0 != a && this._addLooping(a)), this._loop = a
        }, b._sendEvent = function(a) {
            var b = new createjs.Event(a);
            this.dispatchEvent(b)
        }, b._cleanUp = function() {
            clearTimeout(this.delayTimeoutId), this._handleCleanUp(), this._paused = !1, createjs.Sound._playFinished(this)
        }, b._interrupt = function() {
            this._cleanUp(), this.playState = createjs.Sound.PLAY_INTERRUPTED, this._sendEvent("interrupted")
        }, b._beginPlaying = function(a, b, c, d) {
            return this.setPosition(a), this.setLoop(b), this.setVolume(c), this.setPan(d), null != this._playbackResource && this._position < this._duration ? (this._paused = !1, this._handleSoundReady(), this.playState = createjs.Sound.PLAY_SUCCEEDED, this._sendEvent("succeeded"), !0) : (this._playFailed(), !1)
        }, b._playFailed = function() {
            this._cleanUp(), this.playState = createjs.Sound.PLAY_FAILED, this._sendEvent("failed")
        }, b._handleSoundComplete = function() {
            return this._position = 0, 0 != this._loop ? (this._loop--, this._handleLoop(), void this._sendEvent("loop")) : (this._cleanUp(), this.playState = createjs.Sound.PLAY_FINISHED, void this._sendEvent("complete"))
        }, b._handleSoundReady = function() {}, b._updateVolume = function() {}, b._updatePan = function() {}, b._updateDuration = function() {}, b._setDurationFromSource = function() {}, b._calculateCurrentPosition = function() {}, b._updatePosition = function() {}, b._removeLooping = function() {}, b._addLooping = function() {}, b._pause = function() {}, b._resume = function() {}, b._handleStop = function() {}, b._handleCleanUp = function() {}, b._handleLoop = function() {}, createjs.AbstractSoundInstance = createjs.promote(a, "EventDispatcher"), createjs.DefaultSoundInstance = createjs.AbstractSoundInstance
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";
        var a = function() {
                this._capabilities = null, this._loaders = {}, this._audioSources = {}, this._soundInstances = {}, this._loaderClass, this._soundInstanceClass
            },
            b = a.prototype;
        a._capabilities = null, a.isSupported = function() {
            return !0
        }, b.register = function(a) {
            if (this._audioSources[a.src] = !0, this._soundInstances[a.src] = [], this._loaders[a.src]) return this._loaders[a.src];
            var b = new this._loaderClass(a);
            return b.on("complete", createjs.proxy(this._handlePreloadComplete, this)), this._loaders[a.src] = b, b
        }, b.preload = function(a) {
            a.on("error", createjs.proxy(this._handlePreloadError, this)), a.load()
        }, b.isPreloadStarted = function(a) {
            return null != this._audioSources[a]
        }, b.isPreloadComplete = function(a) {
            return !(null == this._audioSources[a] || 1 == this._audioSources[a])
        }, b.removeSound = function(a) {
            if (this._soundInstances[a]) {
                for (var b = this._soundInstances[a].length; b--;) {
                    var c = this._soundInstances[a][b];
                    c.destroy()
                }
                delete this._soundInstances[a], delete this._audioSources[a], this._loaders[a] && this._loaders[a].destroy(), delete this._loaders[a]
            }
        }, b.removeAllSounds = function() {
            for (var a in this._audioSources) this.removeSound(a)
        }, b.create = function(a, b, c) {
            this.isPreloadStarted(a) || this.preload(this.register(a));
            var d = new this._soundInstanceClass(a, b, c, this._audioSources[a]);
            return this._soundInstances[a].push(d), d
        }, b.setVolume = function(a) {
            return this._volume = a, this._updateVolume(), !0
        }, b.getVolume = function() {
            return this._volume
        }, b.setMute = function() {
            return this._updateVolume(), !0
        }, b.toString = function() {
            return "[AbstractPlugin]"
        }, b._handlePreloadComplete = function(a) {
            var b = a.target.getItem().src;
            this._audioSources[b] = a.result;
            for (var c = 0, d = this._soundInstances[b].length; d > c; c++) {
                var e = this._soundInstances[b][c];
                e.setPlaybackResource(this._audioSources[b])
            }
        }, b._handlePreloadError = function() {}, b._updateVolume = function() {}, createjs.AbstractPlugin = a
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a) {
            this.AbstractLoader_constructor(a, !0, createjs.AbstractLoader.SOUND)
        }
        var b = createjs.extend(a, createjs.AbstractLoader);
        a.context = null, b.toString = function() {
            return "[WebAudioLoader]"
        }, b._createRequest = function() {
            this._request = new createjs.XHRRequest(this._item, !1), this._request.setResponseType("arraybuffer")
        }, b._sendComplete = function() {
            a.context.decodeAudioData(this._rawResult, createjs.proxy(this._handleAudioDecoded, this), createjs.proxy(this._handleError, this))
        }, b._handleAudioDecoded = function(a) {
            this._result = a, this.AbstractLoader__sendComplete()
        }, createjs.WebAudioLoader = createjs.promote(a, "AbstractLoader")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, d, e) {
            this.AbstractSoundInstance_constructor(a, b, d, e), this.gainNode = c.context.createGain(), this.panNode = c.context.createPanner(), this.panNode.panningModel = c._panningModel, this.panNode.connect(this.gainNode), this.sourceNode = null, this._soundCompleteTimeout = null, this._sourceNodeNext = null, this._playbackStartTime = 0, this._endedHandler = createjs.proxy(this._handleSoundComplete, this)
        }
        var b = createjs.extend(a, createjs.AbstractSoundInstance),
            c = a;
        c.context = null, c.destinationNode = null, c._panningModel = "equalpower", b.destroy = function() {
            this.AbstractSoundInstance_destroy(), this.panNode.disconnect(0), this.panNode = null, this.gainNode.disconnect(0), this.gainNode = null
        }, b.toString = function() {
            return "[WebAudioSoundInstance]"
        }, b._updatePan = function() {
            this.panNode.setPosition(this._pan, 0, -.5)
        }, b._removeLooping = function() {
            this._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext)
        }, b._addLooping = function() {
            this.playState == createjs.Sound.PLAY_SUCCEEDED && (this._sourceNodeNext = this._createAndPlayAudioNode(this._playbackStartTime, 0))
        }, b._setDurationFromSource = function() {
            this._duration = 1e3 * this.playbackResource.duration
        }, b._handleCleanUp = function() {
            this.sourceNode && this.playState == createjs.Sound.PLAY_SUCCEEDED && (this.sourceNode = this._cleanUpAudioNode(this.sourceNode), this._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext)), 0 != this.gainNode.numberOfOutputs && this.gainNode.disconnect(0), clearTimeout(this._soundCompleteTimeout), this._playbackStartTime = 0
        }, b._cleanUpAudioNode = function(a) {
            return a && (a.stop(0), a.disconnect(0), a = null), a
        }, b._handleSoundReady = function() {
            this.gainNode.connect(c.destinationNode);
            var a = .001 * this._duration,
                b = .001 * this._position;
            this.sourceNode = this._createAndPlayAudioNode(c.context.currentTime - a, b), this._playbackStartTime = this.sourceNode.startTime - b, this._soundCompleteTimeout = setTimeout(this._endedHandler, 1e3 * (a - b)), 0 != this._loop && (this._sourceNodeNext = this._createAndPlayAudioNode(this._playbackStartTime, 0))
        }, b._createAndPlayAudioNode = function(a, b) {
            var d = c.context.createBufferSource();
            d.buffer = this.playbackResource, d.connect(this.panNode);
            var e = .001 * this._duration;
            return d.startTime = a + e, d.start(d.startTime, b + .001 * this._startTime, e - b), d
        }, b._pause = function() {
            this._position = 1e3 * (c.context.currentTime - this._playbackStartTime), this.sourceNode = this._cleanUpAudioNode(this.sourceNode), this._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext), 0 != this.gainNode.numberOfOutputs && this.gainNode.disconnect(0), clearTimeout(this._soundCompleteTimeout)
        }, b._resume = function() {
            this._handleSoundReady()
        }, b._updateVolume = function() {
            var a = this._muted ? 0 : this._volume;
            a != this.gainNode.gain.value && (this.gainNode.gain.value = a)
        }, b._calculateCurrentPosition = function() {
            return 1e3 * (c.context.currentTime - this._playbackStartTime)
        }, b._updatePosition = function() {
            this.sourceNode = this._cleanUpAudioNode(this.sourceNode), this._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext), clearTimeout(this._soundCompleteTimeout), this._paused || this._handleSoundReady()
        }, b._handleLoop = function() {
            this._cleanUpAudioNode(this.sourceNode), this.sourceNode = this._sourceNodeNext, this._playbackStartTime = this.sourceNode.startTime, this._sourceNodeNext = this._createAndPlayAudioNode(this._playbackStartTime, 0), this._soundCompleteTimeout = setTimeout(this._endedHandler, this._duration)
        }, b._updateDuration = function() {
            this._pause(), this._resume()
        }, createjs.WebAudioSoundInstance = createjs.promote(a, "AbstractSoundInstance")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a() {
            this.AbstractPlugin_constructor(), this._panningModel = c._panningModel, this._volume = 1, this.context = c.context, this.dynamicsCompressorNode = this.context.createDynamicsCompressor(), this.dynamicsCompressorNode.connect(this.context.destination), this.gainNode = this.context.createGain(), this.gainNode.connect(this.dynamicsCompressorNode), createjs.WebAudioSoundInstance.destinationNode = this.gainNode, this._capabilities = c._capabilities, this._loaderClass = createjs.WebAudioLoader, this._soundInstanceClass = createjs.WebAudioSoundInstance, this._addPropsToClasses()
        }
        var b = createjs.extend(a, createjs.AbstractPlugin),
            c = a;
        c._capabilities = null, c._panningModel = "equalpower", c.context = null, c.isSupported = function() {
            var a = createjs.BrowserDetect.isIOS || createjs.BrowserDetect.isAndroid || createjs.BrowserDetect.isBlackberry;
            return "file:" != location.protocol || a || this._isFileXHRSupported() ? (c._generateCapabilities(), null == c.context ? !1 : !0) : !1
        }, c.playEmptySound = function() {
            var a = c.context.createBufferSource();
            a.buffer = c.context.createBuffer(1, 1, 22050), a.connect(c.context.destination), a.start(0, 0, 0)
        }, c._isFileXHRSupported = function() {
            var a = !0,
                b = new XMLHttpRequest;
            try {
                b.open("GET", "WebAudioPluginTest.fail", !1)
            } catch (c) {
                return a = !1
            }
            b.onerror = function() {
                a = !1
            }, b.onload = function() {
                a = 404 == this.status || 200 == this.status || 0 == this.status && "" != this.response
            };
            try {
                b.send()
            } catch (c) {
                a = !1
            }
            return a
        }, c._generateCapabilities = function() {
            if (null == c._capabilities) {
                var a = document.createElement("audio");
                if (null == a.canPlayType) return null;
                if (null == c.context)
                    if (window.AudioContext) c.context = new AudioContext;
                    else {
                        if (!window.webkitAudioContext) return null;
                        c.context = new webkitAudioContext
                    }
                c._compatibilitySetUp(), c.playEmptySound(), c._capabilities = {
                    panning: !0,
                    volume: !0,
                    tracks: -1
                };
                for (var b = createjs.Sound.SUPPORTED_EXTENSIONS, d = createjs.Sound.EXTENSION_MAP, e = 0, f = b.length; f > e; e++) {
                    var g = b[e],
                        h = d[g] || g;
                    c._capabilities[g] = "no" != a.canPlayType("audio/" + g) && "" != a.canPlayType("audio/" + g) || "no" != a.canPlayType("audio/" + h) && "" != a.canPlayType("audio/" + h)
                }
                c.context.destination.numberOfChannels < 2 && (c._capabilities.panning = !1)
            }
        }, c._compatibilitySetUp = function() {
            if (c._panningModel = "equalpower", !c.context.createGain) {
                c.context.createGain = c.context.createGainNode;
                var a = c.context.createBufferSource();
                a.__proto__.start = a.__proto__.noteGrainOn, a.__proto__.stop = a.__proto__.noteOff, c._panningModel = 0
            }
        }, b.toString = function() {
            return "[WebAudioPlugin]"
        }, b._addPropsToClasses = function() {
            var a = this._soundInstanceClass;
            a.context = this.context, a.destinationNode = this.gainNode, a._panningModel = this._panningModel, this._loaderClass.context = this.context
        }, b._updateVolume = function() {
            var a = createjs.Sound._masterMute ? 0 : this._volume;
            a != this.gainNode.gain.value && (this.gainNode.gain.value = a)
        }, createjs.WebAudioPlugin = createjs.promote(a, "AbstractPlugin")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a) {
            this.src = a, this.length = 0, this.available = 0, this.tags = [], this.duration = 0
        }
        var b = a.prototype;
        b.constructor = a;
        var c = a;
        c.tags = {}, c.get = function(b) {
            var d = c.tags[b];
            return null == d && (d = c.tags[b] = new a(b)), d
        }, c.remove = function(a) {
            var b = c.tags[a];
            return null == b ? !1 : (b.removeAll(), delete c.tags[a], !0)
        }, c.getInstance = function(a) {
            var b = c.tags[a];
            return null == b ? null : b.get()
        }, c.setInstance = function(a, b) {
            var d = c.tags[a];
            return null == d ? null : d.set(b)
        }, c.getDuration = function(a) {
            var b = c.tags[a];
            return null == b ? 0 : b.getDuration()
        }, b.add = function(a) {
            this.tags.push(a), this.length++, this.available++
        }, b.removeAll = function() {
            for (var a; this.length--;) a = this.tags[this.length], a.parentNode && a.parentNode.removeChild(a), delete this.tags[this.length];
            this.src = null, this.tags.length = 0
        }, b.get = function() {
            if (0 == this.tags.length) return null;
            this.available = this.tags.length;
            var a = this.tags.pop();
            return null == a.parentNode && document.body.appendChild(a), a
        }, b.set = function(a) {
            var b = createjs.indexOf(this.tags, a); - 1 == b && this.tags.push(a), this.available = this.tags.length
        }, b.getDuration = function() {
            return this.duration || (this.duration = 1e3 * this.tags[this.tags.length - 1].duration), this.duration
        }, b.toString = function() {
            return "[HTMLAudioTagPool]"
        }, createjs.HTMLAudioTagPool = a
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c, d) {
            this.AbstractSoundInstance_constructor(a, b, c, d), this._audioSpriteStopTime = null, this._delayTimeoutId = null, this._endedHandler = createjs.proxy(this._handleSoundComplete, this), this._readyHandler = createjs.proxy(this._handleTagReady, this), this._stalledHandler = createjs.proxy(this.playFailed, this), this._audioSpriteEndHandler = createjs.proxy(this._handleAudioSpriteLoop, this), this._loopHandler = createjs.proxy(this._handleSoundComplete, this), c ? this._audioSpriteStopTime = .001 * (b + c) : this._duration = createjs.HTMLAudioTagPool.getDuration(this.src)
        }
        var b = createjs.extend(a, createjs.AbstractSoundInstance);
        b.setMasterVolume = function() {
            this._updateVolume()
        }, b.setMasterMute = function() {
            this._updateVolume()
        }, b.toString = function() {
            return "[HTMLAudioSoundInstance]"
        }, b._removeLooping = function() {
            null != this._playbackResource && (this._playbackResource.loop = !1, this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, !1))
        }, b._addLooping = function() {
            null == this._playbackResource || this._audioSpriteStopTime || (this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, !1), this._playbackResource.loop = !0)
        }, b._handleCleanUp = function() {
            var a = this._playbackResource;
            if (null != a) {
                a.pause(), a.loop = !1, a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, !1), a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY, this._readyHandler, !1), a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED, this._stalledHandler, !1), a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, !1), a.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, !1);
                try {
                    a.currentTime = this._startTime
                } catch (b) {}
                createjs.HTMLAudioTagPool.setInstance(this.src, a), this._playbackResource = null
            }
        }, b._beginPlaying = function(a, b, c, d) {
            return this._playbackResource = createjs.HTMLAudioTagPool.getInstance(this.src), this.AbstractSoundInstance__beginPlaying(a, b, c, d)
        }, b._handleSoundReady = function() {
            if (4 !== this._playbackResource.readyState) {
                var a = this._playbackResource;
                return a.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY, this._readyHandler, !1), a.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED, this._stalledHandler, !1), a.preload = "auto", void a.load()
            }
            this._updateVolume(), this._playbackResource.currentTime = .001 * (this._startTime + this._position), this._audioSpriteStopTime ? this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, !1) : (this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, !1), 0 != this._loop && (this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, !1), this._playbackResource.loop = !0)), this._playbackResource.play()
        }, b._handleTagReady = function() {
            this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY, this._readyHandler, !1), this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED, this._stalledHandler, !1), this._handleSoundReady()
        }, b._pause = function() {
            this._playbackResource.pause()
        }, b._resume = function() {
            this._playbackResource.play()
        }, b._updateVolume = function() {
            if (null != this._playbackResource) {
                var a = this._muted || createjs.Sound._masterMute ? 0 : this._volume * createjs.Sound._masterVolume;
                a != this._playbackResource.volume && (this._playbackResource.volume = a)
            }
        }, b._calculateCurrentPosition = function() {
            return 1e3 * this._playbackResource.currentTime - this._startTime
        }, b._updatePosition = function() {
            this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, !1), this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._handleSetPositionSeek, !1);
            try {
                this._playbackResource.currentTime = .001 * (this._position + this._startTime)
            } catch (a) {
                this._handleSetPositionSeek(null)
            }
        }, b._handleSetPositionSeek = function() {
            null != this._playbackResource && (this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._handleSetPositionSeek, !1), this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, !1))
        }, b._handleAudioSpriteLoop = function() {
            this._playbackResource.currentTime <= this._audioSpriteStopTime || (this._playbackResource.pause(), 0 == this._loop ? this._handleSoundComplete(null) : (this._position = 0, this._loop--, this._playbackResource.currentTime = .001 * this._startTime, this._paused || this._playbackResource.play(), this._sendEvent("loop")))
        }, b._handleLoop = function() {
            0 == this._loop && (this._playbackResource.loop = !1, this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, !1))
        }, b._updateDuration = function() {
            this._audioSpriteStopTime = .001 * (startTime + duration), this.playState == createjs.Sound.PLAY_SUCCEEDED && (this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, !1), this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, !1))
        }, createjs.HTMLAudioSoundInstance = createjs.promote(a, "AbstractSoundInstance")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a() {
            this.AbstractPlugin_constructor(), this.defaultNumChannels = 2, this._capabilities = c._capabilities, this._loaderClass = createjs.SoundLoader, this._soundInstanceClass = createjs.HTMLAudioSoundInstance
        }
        var b = createjs.extend(a, createjs.AbstractPlugin),
            c = a;
        c.MAX_INSTANCES = 30, c._AUDIO_READY = "canplaythrough", c._AUDIO_ENDED = "ended", c._AUDIO_SEEKED = "seeked", c._AUDIO_STALLED = "stalled", c._TIME_UPDATE = "timeupdate", c._capabilities = null, c.enableIOS = !1, c.isSupported = function() {
            return c._generateCapabilities(), null == c._capabilities ? !1 : !0
        }, c._generateCapabilities = function() {
            if (null == c._capabilities) {
                var a = document.createElement("audio");
                if (null == a.canPlayType) return null;
                c._capabilities = {
                    panning: !0,
                    volume: !0,
                    tracks: -1
                };
                for (var b = createjs.Sound.SUPPORTED_EXTENSIONS, d = createjs.Sound.EXTENSION_MAP, e = 0, f = b.length; f > e; e++) {
                    var g = b[e],
                        h = d[g] || g;
                    c._capabilities[g] = "no" != a.canPlayType("audio/" + g) && "" != a.canPlayType("audio/" + g) || "no" != a.canPlayType("audio/" + h) && "" != a.canPlayType("audio/" + h)
                }
            }
        }, b.register = function(a, b) {
            for (var c = createjs.HTMLAudioTagPool.get(a.src), d = null, e = 0; b > e; e++) d = this._createTag(a.src), c.add(d);
            var f = this.AbstractPlugin_register(a, b);
            return f.setTag(d), f
        }, b.removeSound = function(a) {
            this.AbstractPlugin_removeSound(a), createjs.HTMLAudioTagPool.remove(a)
        }, b.create = function(a, b, c) {
            var d = this.AbstractPlugin_create(a, b, c);
            return d.setPlaybackResource(null), d
        }, b.toString = function() {
            return "[HTMLAudioPlugin]"
        }, b.setVolume = b.getVolume = b.setMute = null, b._createTag = function(a) {
            var b = document.createElement("audio");
            return b.autoplay = !1, b.preload = "none", b.src = a, b
        }, createjs.HTMLAudioPlugin = createjs.promote(a, "AbstractPlugin")
    }(), define("soundjs", function(a) {
        return function() {
            var b;
            return b || a.createjs
        }
    }(this)), (window._gsQueue || (window._gsQueue = [])).push(function() {
        "use strict";
        window._gsDefine("TweenMax", ["core.Animation", "core.SimpleTimeline", "TweenLite"], function(a, b, c) {
                var d = [].slice,
                    e = function(a, b, d) {
                        c.call(this, a, b, d), this._cycle = 0, this._yoyo = this.vars.yoyo === !0, this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._dirty = !0, this.render = e.prototype.render
                    },
                    f = 1e-10,
                    g = c._internals,
                    h = g.isSelector,
                    i = g.isArray,
                    j = e.prototype = c.to({}, .1, {}),
                    k = [];
                e.version = "1.12.1", j.constructor = e, j.kill()._gc = !1, e.killTweensOf = e.killDelayedCallsTo = c.killTweensOf, e.getTweensOf = c.getTweensOf, e.lagSmoothing = c.lagSmoothing, e.ticker = c.ticker, e.render = c.render, j.invalidate = function() {
                    return this._yoyo = this.vars.yoyo === !0, this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._uncache(!0), c.prototype.invalidate.call(this)
                }, j.updateTo = function(a, b) {
                    var d, e = this.ratio;
                    b && this._startTime < this._timeline._time && (this._startTime = this._timeline._time, this._uncache(!1), this._gc ? this._enabled(!0, !1) : this._timeline.insert(this, this._startTime - this._delay));
                    for (d in a) this.vars[d] = a[d];
                    if (this._initted)
                        if (b) this._initted = !1;
                        else if (this._gc && this._enabled(!0, !1), this._notifyPluginsOfEnabled && this._firstPT && c._onPluginEvent("_onDisable", this), this._time / this._duration > .998) {
                        var f = this._time;
                        this.render(0, !0, !1), this._initted = !1, this.render(f, !0, !1)
                    } else if (this._time > 0) {
                        this._initted = !1, this._init();
                        for (var g, h = 1 / (1 - e), i = this._firstPT; i;) g = i.s + i.c, i.c *= h, i.s = g - i.c, i = i._next
                    }
                    return this
                }, j.render = function(a, b, c) {
                    this._initted || 0 === this._duration && this.vars.repeat && this.invalidate();
                    var d, e, h, i, j, l, m, n, o = this._dirty ? this.totalDuration() : this._totalDuration,
                        p = this._time,
                        q = this._totalTime,
                        r = this._cycle,
                        s = this._duration,
                        t = this._rawPrevTime;
                    if (a >= o ? (this._totalTime = o, this._cycle = this._repeat, this._yoyo && 0 !== (1 & this._cycle) ? (this._time = 0, this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0) : (this._time = s, this.ratio = this._ease._calcEnd ? this._ease.getRatio(1) : 1), this._reversed || (d = !0, e = "onComplete"), 0 === s && (this._initted || !this.vars.lazy || c) && (this._startTime === this._timeline._duration && (a = 0), (0 === a || 0 > t || t === f) && t !== a && (c = !0, t > f && (e = "onReverseComplete")), this._rawPrevTime = n = !b || a || t === a ? a : f)) : 1e-7 > a ? (this._totalTime = this._time = this._cycle = 0, this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0, (0 !== q || 0 === s && t > 0 && t !== f) && (e = "onReverseComplete", d = this._reversed), 0 > a ? (this._active = !1, 0 === s && (this._initted || !this.vars.lazy || c) && (t >= 0 && (c = !0), this._rawPrevTime = n = !b || a || t === a ? a : f)) : this._initted || (c = !0)) : (this._totalTime = this._time = a, 0 !== this._repeat && (i = s + this._repeatDelay, this._cycle = this._totalTime / i >> 0, 0 !== this._cycle && this._cycle === this._totalTime / i && this._cycle--, this._time = this._totalTime - this._cycle * i, this._yoyo && 0 !== (1 & this._cycle) && (this._time = s - this._time), this._time > s ? this._time = s : this._time < 0 && (this._time = 0)), this._easeType ? (j = this._time / s, l = this._easeType, m = this._easePower, (1 === l || 3 === l && j >= .5) && (j = 1 - j), 3 === l && (j *= 2), 1 === m ? j *= j : 2 === m ? j *= j * j : 3 === m ? j *= j * j * j : 4 === m && (j *= j * j * j * j), this.ratio = 1 === l ? 1 - j : 2 === l ? j : this._time / s < .5 ? j / 2 : 1 - j / 2) : this.ratio = this._ease.getRatio(this._time / s)), p === this._time && !c && r === this._cycle) return void(q !== this._totalTime && this._onUpdate && (b || this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || k)));
                    if (!this._initted) {
                        if (this._init(), !this._initted || this._gc) return;
                        if (!c && this._firstPT && (this.vars.lazy !== !1 && this._duration || this.vars.lazy && !this._duration)) return this._time = p, this._totalTime = q, this._rawPrevTime = t, this._cycle = r, g.lazyTweens.push(this), void(this._lazy = a);
                        this._time && !d ? this.ratio = this._ease.getRatio(this._time / s) : d && this._ease._calcEnd && (this.ratio = this._ease.getRatio(0 === this._time ? 0 : 1))
                    }
                    for (this._lazy !== !1 && (this._lazy = !1), this._active || !this._paused && this._time !== p && a >= 0 && (this._active = !0), 0 === q && (2 === this._initted && a > 0 && this._init(), this._startAt && (a >= 0 ? this._startAt.render(a, b, c) : e || (e = "_dummyGS")), this.vars.onStart && (0 !== this._totalTime || 0 === s) && (b || this.vars.onStart.apply(this.vars.onStartScope || this, this.vars.onStartParams || k))), h = this._firstPT; h;) h.f ? h.t[h.p](h.c * this.ratio + h.s) : h.t[h.p] = h.c * this.ratio + h.s, h = h._next;
                    this._onUpdate && (0 > a && this._startAt && this._startTime && this._startAt.render(a, b, c), b || (this._totalTime !== q || d) && this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || k)), this._cycle !== r && (b || this._gc || this.vars.onRepeat && this.vars.onRepeat.apply(this.vars.onRepeatScope || this, this.vars.onRepeatParams || k)), e && (this._gc || (0 > a && this._startAt && !this._onUpdate && this._startTime && this._startAt.render(a, b, c), d && (this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !b && this.vars[e] && this.vars[e].apply(this.vars[e + "Scope"] || this, this.vars[e + "Params"] || k), 0 === s && this._rawPrevTime === f && n !== f && (this._rawPrevTime = 0)))
                }, e.to = function(a, b, c) {
                    return new e(a, b, c)
                }, e.from = function(a, b, c) {
                    return c.runBackwards = !0, c.immediateRender = 0 != c.immediateRender, new e(a, b, c)
                }, e.fromTo = function(a, b, c, d) {
                    return d.startAt = c, d.immediateRender = 0 != d.immediateRender && 0 != c.immediateRender, new e(a, b, d)
                }, e.staggerTo = e.allTo = function(a, b, f, g, j, l, m) {
                    g = g || 0;
                    var n, o, p, q, r = f.delay || 0,
                        s = [],
                        t = function() {
                            f.onComplete && f.onComplete.apply(f.onCompleteScope || this, arguments), j.apply(m || this, l || k)
                        };
                    for (i(a) || ("string" == typeof a && (a = c.selector(a) || a), h(a) && (a = d.call(a, 0))), n = a.length, p = 0; n > p; p++) {
                        o = {};
                        for (q in f) o[q] = f[q];
                        o.delay = r, p === n - 1 && j && (o.onComplete = t), s[p] = new e(a[p], b, o), r += g
                    }
                    return s
                }, e.staggerFrom = e.allFrom = function(a, b, c, d, f, g, h) {
                    return c.runBackwards = !0, c.immediateRender = 0 != c.immediateRender, e.staggerTo(a, b, c, d, f, g, h)
                }, e.staggerFromTo = e.allFromTo = function(a, b, c, d, f, g, h, i) {
                    return d.startAt = c, d.immediateRender = 0 != d.immediateRender && 0 != c.immediateRender, e.staggerTo(a, b, d, f, g, h, i)
                }, e.delayedCall = function(a, b, c, d, f) {
                    return new e(b, 0, {
                        delay: a,
                        onComplete: b,
                        onCompleteParams: c,
                        onCompleteScope: d,
                        onReverseComplete: b,
                        onReverseCompleteParams: c,
                        onReverseCompleteScope: d,
                        immediateRender: !1,
                        useFrames: f,
                        overwrite: 0
                    })
                }, e.set = function(a, b) {
                    return new e(a, 0, b)
                }, e.isTweening = function(a) {
                    return c.getTweensOf(a, !0).length > 0
                };
                var l = function(a, b) {
                        for (var d = [], e = 0, f = a._first; f;) f instanceof c ? d[e++] = f : (b && (d[e++] = f), d = d.concat(l(f, b)), e = d.length), f = f._next;
                        return d
                    },
                    m = e.getAllTweens = function(b) {
                        return l(a._rootTimeline, b).concat(l(a._rootFramesTimeline, b))
                    };
                e.killAll = function(a, c, d, e) {
                    null == c && (c = !0), null == d && (d = !0);
                    var f, g, h, i = m(0 != e),
                        j = i.length,
                        k = c && d && e;
                    for (h = 0; j > h; h++) g = i[h], (k || g instanceof b || (f = g.target === g.vars.onComplete) && d || c && !f) && (a ? g.totalTime(g._reversed ? 0 : g.totalDuration()) : g._enabled(!1, !1))
                }, e.killChildTweensOf = function(a, b) {
                    if (null != a) {
                        var f, j, k, l, m, n = g.tweenLookup;
                        if ("string" == typeof a && (a = c.selector(a) || a), h(a) && (a = d.call(a, 0)), i(a))
                            for (l = a.length; --l > -1;) e.killChildTweensOf(a[l], b);
                        else {
                            f = [];
                            for (k in n)
                                for (j = n[k].target.parentNode; j;) j === a && (f = f.concat(n[k].tweens)), j = j.parentNode;
                            for (m = f.length, l = 0; m > l; l++) b && f[l].totalTime(f[l].totalDuration()), f[l]._enabled(!1, !1)
                        }
                    }
                };
                var n = function(a, c, d, e) {
                    c = c !== !1, d = d !== !1, e = e !== !1;
                    for (var f, g, h = m(e), i = c && d && e, j = h.length; --j > -1;) g = h[j], (i || g instanceof b || (f = g.target === g.vars.onComplete) && d || c && !f) && g.paused(a)
                };
                return e.pauseAll = function(a, b, c) {
                    n(!0, a, b, c)
                }, e.resumeAll = function(a, b, c) {
                    n(!1, a, b, c)
                }, e.globalTimeScale = function(b) {
                    var d = a._rootTimeline,
                        e = c.ticker.time;
                    return arguments.length ? (b = b || f, d._startTime = e - (e - d._startTime) * d._timeScale / b, d = a._rootFramesTimeline, e = c.ticker.frame, d._startTime = e - (e - d._startTime) * d._timeScale / b, d._timeScale = a._rootTimeline._timeScale = b, b) : d._timeScale
                }, j.progress = function(a) {
                    return arguments.length ? this.totalTime(this.duration() * (this._yoyo && 0 !== (1 & this._cycle) ? 1 - a : a) + this._cycle * (this._duration + this._repeatDelay), !1) : this._time / this.duration()
                }, j.totalProgress = function(a) {
                    return arguments.length ? this.totalTime(this.totalDuration() * a, !1) : this._totalTime / this.totalDuration()
                }, j.time = function(a, b) {
                    return arguments.length ? (this._dirty && this.totalDuration(), a > this._duration && (a = this._duration), this._yoyo && 0 !== (1 & this._cycle) ? a = this._duration - a + this._cycle * (this._duration + this._repeatDelay) : 0 !== this._repeat && (a += this._cycle * (this._duration + this._repeatDelay)), this.totalTime(a, b)) : this._time
                }, j.duration = function(b) {
                    return arguments.length ? a.prototype.duration.call(this, b) : this._duration
                }, j.totalDuration = function(a) {
                    return arguments.length ? -1 === this._repeat ? this : this.duration((a - this._repeat * this._repeatDelay) / (this._repeat + 1)) : (this._dirty && (this._totalDuration = -1 === this._repeat ? 999999999999 : this._duration * (this._repeat + 1) + this._repeatDelay * this._repeat, this._dirty = !1), this._totalDuration)
                }, j.repeat = function(a) {
                    return arguments.length ? (this._repeat = a, this._uncache(!0)) : this._repeat
                }, j.repeatDelay = function(a) {
                    return arguments.length ? (this._repeatDelay = a, this._uncache(!0)) : this._repeatDelay
                }, j.yoyo = function(a) {
                    return arguments.length ? (this._yoyo = a, this) : this._yoyo
                }, e
            }, !0), window._gsDefine("TimelineLite", ["core.Animation", "core.SimpleTimeline", "TweenLite"], function(a, b, c) {
                var d = function(a) {
                        b.call(this, a), this._labels = {}, this.autoRemoveChildren = this.vars.autoRemoveChildren === !0, this.smoothChildTiming = this.vars.smoothChildTiming === !0, this._sortChildren = !0, this._onUpdate = this.vars.onUpdate;
                        var c, d, e = this.vars;
                        for (d in e) c = e[d], g(c) && -1 !== c.join("").indexOf("{self}") && (e[d] = this._swapSelfInParams(c));
                        g(e.tweens) && this.add(e.tweens, 0, e.align, e.stagger)
                    },
                    e = 1e-10,
                    f = c._internals.isSelector,
                    g = c._internals.isArray,
                    h = [],
                    i = window._gsDefine.globals,
                    j = function(a) {
                        var b, c = {};
                        for (b in a) c[b] = a[b];
                        return c
                    },
                    k = function(a, b, c, d) {
                        a._timeline.pause(a._startTime), b && b.apply(d || a._timeline, c || h)
                    },
                    l = h.slice,
                    m = d.prototype = new b;
                return d.version = "1.12.1", m.constructor = d, m.kill()._gc = !1, m.to = function(a, b, d, e) {
                    var f = d.repeat && i.TweenMax || c;
                    return b ? this.add(new f(a, b, d), e) : this.set(a, d, e)
                }, m.from = function(a, b, d, e) {
                    return this.add((d.repeat && i.TweenMax || c).from(a, b, d), e)
                }, m.fromTo = function(a, b, d, e, f) {
                    var g = e.repeat && i.TweenMax || c;
                    return b ? this.add(g.fromTo(a, b, d, e), f) : this.set(a, e, f)
                }, m.staggerTo = function(a, b, e, g, h, i, k, m) {
                    var n, o = new d({
                        onComplete: i,
                        onCompleteParams: k,
                        onCompleteScope: m,
                        smoothChildTiming: this.smoothChildTiming
                    });
                    for ("string" == typeof a && (a = c.selector(a) || a), f(a) && (a = l.call(a, 0)), g = g || 0, n = 0; n < a.length; n++) e.startAt && (e.startAt = j(e.startAt)), o.to(a[n], b, j(e), n * g);
                    return this.add(o, h);

                }, m.staggerFrom = function(a, b, c, d, e, f, g, h) {
                    return c.immediateRender = 0 != c.immediateRender, c.runBackwards = !0, this.staggerTo(a, b, c, d, e, f, g, h)
                }, m.staggerFromTo = function(a, b, c, d, e, f, g, h, i) {
                    return d.startAt = c, d.immediateRender = 0 != d.immediateRender && 0 != c.immediateRender, this.staggerTo(a, b, d, e, f, g, h, i)
                }, m.call = function(a, b, d, e) {
                    return this.add(c.delayedCall(0, a, b, d), e)
                }, m.set = function(a, b, d) {
                    return d = this._parseTimeOrLabel(d, 0, !0), null == b.immediateRender && (b.immediateRender = d === this._time && !this._paused), this.add(new c(a, 0, b), d)
                }, d.exportRoot = function(a, b) {
                    a = a || {}, null == a.smoothChildTiming && (a.smoothChildTiming = !0);
                    var e, f, g = new d(a),
                        h = g._timeline;
                    for (null == b && (b = !0), h._remove(g, !0), g._startTime = 0, g._rawPrevTime = g._time = g._totalTime = h._time, e = h._first; e;) f = e._next, b && e instanceof c && e.target === e.vars.onComplete || g.add(e, e._startTime - e._delay), e = f;
                    return h.add(g, 0), g
                }, m.add = function(e, f, h, i) {
                    var j, k, l, m, n, o;
                    if ("number" != typeof f && (f = this._parseTimeOrLabel(f, 0, !0, e)), !(e instanceof a)) {
                        if (e instanceof Array || e && e.push && g(e)) {
                            for (h = h || "normal", i = i || 0, j = f, k = e.length, l = 0; k > l; l++) g(m = e[l]) && (m = new d({
                                tweens: m
                            })), this.add(m, j), "string" != typeof m && "function" != typeof m && ("sequence" === h ? j = m._startTime + m.totalDuration() / m._timeScale : "start" === h && (m._startTime -= m.delay())), j += i;
                            return this._uncache(!0)
                        }
                        if ("string" == typeof e) return this.addLabel(e, f);
                        if ("function" != typeof e) throw "Cannot add " + e + " into the timeline; it is not a tween, timeline, function, or string.";
                        e = c.delayedCall(0, e)
                    }
                    if (b.prototype.add.call(this, e, f), (this._gc || this._time === this._duration) && !this._paused && this._duration < this.duration())
                        for (n = this, o = n.rawTime() > e._startTime; n._timeline;) o && n._timeline.smoothChildTiming ? n.totalTime(n._totalTime, !0) : n._gc && n._enabled(!0, !1), n = n._timeline;
                    return this
                }, m.remove = function(b) {
                    if (b instanceof a) return this._remove(b, !1);
                    if (b instanceof Array || b && b.push && g(b)) {
                        for (var c = b.length; --c > -1;) this.remove(b[c]);
                        return this
                    }
                    return "string" == typeof b ? this.removeLabel(b) : this.kill(null, b)
                }, m._remove = function(a, c) {
                    b.prototype._remove.call(this, a, c);
                    var d = this._last;
                    return d ? this._time > d._startTime + d._totalDuration / d._timeScale && (this._time = this.duration(), this._totalTime = this._totalDuration) : this._time = this._totalTime = this._duration = this._totalDuration = 0, this
                }, m.append = function(a, b) {
                    return this.add(a, this._parseTimeOrLabel(null, b, !0, a))
                }, m.insert = m.insertMultiple = function(a, b, c, d) {
                    return this.add(a, b || 0, c, d)
                }, m.appendMultiple = function(a, b, c, d) {
                    return this.add(a, this._parseTimeOrLabel(null, b, !0, a), c, d)
                }, m.addLabel = function(a, b) {
                    return this._labels[a] = this._parseTimeOrLabel(b), this
                }, m.addPause = function(a, b, c, d) {
                    return this.call(k, ["{self}", b, c, d], this, a)
                }, m.removeLabel = function(a) {
                    return delete this._labels[a], this
                }, m.getLabelTime = function(a) {
                    return null != this._labels[a] ? this._labels[a] : -1
                }, m._parseTimeOrLabel = function(b, c, d, e) {
                    var f;
                    if (e instanceof a && e.timeline === this) this.remove(e);
                    else if (e && (e instanceof Array || e.push && g(e)))
                        for (f = e.length; --f > -1;) e[f] instanceof a && e[f].timeline === this && this.remove(e[f]);
                    if ("string" == typeof c) return this._parseTimeOrLabel(c, d && "number" == typeof b && null == this._labels[c] ? b - this.duration() : 0, d);
                    if (c = c || 0, "string" != typeof b || !isNaN(b) && null == this._labels[b]) null == b && (b = this.duration());
                    else {
                        if (f = b.indexOf("="), -1 === f) return null == this._labels[b] ? d ? this._labels[b] = this.duration() + c : c : this._labels[b] + c;
                        c = parseInt(b.charAt(f - 1) + "1", 10) * Number(b.substr(f + 1)), b = f > 1 ? this._parseTimeOrLabel(b.substr(0, f - 1), 0, d) : this.duration()
                    }
                    return Number(b) + c
                }, m.seek = function(a, b) {
                    return this.totalTime("number" == typeof a ? a : this._parseTimeOrLabel(a), b !== !1)
                }, m.stop = function() {
                    return this.paused(!0)
                }, m.gotoAndPlay = function(a, b) {
                    return this.play(a, b)
                }, m.gotoAndStop = function(a, b) {
                    return this.pause(a, b)
                }, m.render = function(a, b, c) {
                    this._gc && this._enabled(!0, !1);
                    var d, f, g, i, j, k = this._dirty ? this.totalDuration() : this._totalDuration,
                        l = this._time,
                        m = this._startTime,
                        n = this._timeScale,
                        o = this._paused;
                    if (a >= k ? (this._totalTime = this._time = k, this._reversed || this._hasPausedChild() || (f = !0, i = "onComplete", 0 === this._duration && (0 === a || this._rawPrevTime < 0 || this._rawPrevTime === e) && this._rawPrevTime !== a && this._first && (j = !0, this._rawPrevTime > e && (i = "onReverseComplete"))), this._rawPrevTime = this._duration || !b || a || this._rawPrevTime === a ? a : e, a = k + 1e-4) : 1e-7 > a ? (this._totalTime = this._time = 0, (0 !== l || 0 === this._duration && this._rawPrevTime !== e && (this._rawPrevTime > 0 || 0 > a && this._rawPrevTime >= 0)) && (i = "onReverseComplete", f = this._reversed), 0 > a ? (this._active = !1, 0 === this._duration && this._rawPrevTime >= 0 && this._first && (j = !0), this._rawPrevTime = a) : (this._rawPrevTime = this._duration || !b || a || this._rawPrevTime === a ? a : e, a = 0, this._initted || (j = !0))) : this._totalTime = this._time = this._rawPrevTime = a, this._time !== l && this._first || c || j) {
                        if (this._initted || (this._initted = !0), this._active || !this._paused && this._time !== l && a > 0 && (this._active = !0), 0 === l && this.vars.onStart && 0 !== this._time && (b || this.vars.onStart.apply(this.vars.onStartScope || this, this.vars.onStartParams || h)), this._time >= l)
                            for (d = this._first; d && (g = d._next, !this._paused || o);)(d._active || d._startTime <= this._time && !d._paused && !d._gc) && (d._reversed ? d.render((d._dirty ? d.totalDuration() : d._totalDuration) - (a - d._startTime) * d._timeScale, b, c) : d.render((a - d._startTime) * d._timeScale, b, c)), d = g;
                        else
                            for (d = this._last; d && (g = d._prev, !this._paused || o);)(d._active || d._startTime <= l && !d._paused && !d._gc) && (d._reversed ? d.render((d._dirty ? d.totalDuration() : d._totalDuration) - (a - d._startTime) * d._timeScale, b, c) : d.render((a - d._startTime) * d._timeScale, b, c)), d = g;
                        this._onUpdate && (b || this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || h)), i && (this._gc || (m === this._startTime || n !== this._timeScale) && (0 === this._time || k >= this.totalDuration()) && (f && (this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !b && this.vars[i] && this.vars[i].apply(this.vars[i + "Scope"] || this, this.vars[i + "Params"] || h)))
                    }
                }, m._hasPausedChild = function() {
                    for (var a = this._first; a;) {
                        if (a._paused || a instanceof d && a._hasPausedChild()) return !0;
                        a = a._next
                    }
                    return !1
                }, m.getChildren = function(a, b, d, e) {
                    e = e || -9999999999;
                    for (var f = [], g = this._first, h = 0; g;) g._startTime < e || (g instanceof c ? b !== !1 && (f[h++] = g) : (d !== !1 && (f[h++] = g), a !== !1 && (f = f.concat(g.getChildren(!0, b, d)), h = f.length))), g = g._next;
                    return f
                }, m.getTweensOf = function(a, b) {
                    var d, e, f = this._gc,
                        g = [],
                        h = 0;
                    for (f && this._enabled(!0, !0), d = c.getTweensOf(a), e = d.length; --e > -1;)(d[e].timeline === this || b && this._contains(d[e])) && (g[h++] = d[e]);
                    return f && this._enabled(!1, !0), g
                }, m._contains = function(a) {
                    for (var b = a.timeline; b;) {
                        if (b === this) return !0;
                        b = b.timeline
                    }
                    return !1
                }, m.shiftChildren = function(a, b, c) {
                    c = c || 0;
                    for (var d, e = this._first, f = this._labels; e;) e._startTime >= c && (e._startTime += a), e = e._next;
                    if (b)
                        for (d in f) f[d] >= c && (f[d] += a);
                    return this._uncache(!0)
                }, m._kill = function(a, b) {
                    if (!a && !b) return this._enabled(!1, !1);
                    for (var c = b ? this.getTweensOf(b) : this.getChildren(!0, !0, !1), d = c.length, e = !1; --d > -1;) c[d]._kill(a, b) && (e = !0);
                    return e
                }, m.clear = function(a) {
                    var b = this.getChildren(!1, !0, !0),
                        c = b.length;
                    for (this._time = this._totalTime = 0; --c > -1;) b[c]._enabled(!1, !1);
                    return a !== !1 && (this._labels = {}), this._uncache(!0)
                }, m.invalidate = function() {
                    for (var a = this._first; a;) a.invalidate(), a = a._next;
                    return this
                }, m._enabled = function(a, c) {
                    if (a === this._gc)
                        for (var d = this._first; d;) d._enabled(a, !0), d = d._next;
                    return b.prototype._enabled.call(this, a, c)
                }, m.duration = function(a) {
                    return arguments.length ? (0 !== this.duration() && 0 !== a && this.timeScale(this._duration / a), this) : (this._dirty && this.totalDuration(), this._duration)
                }, m.totalDuration = function(a) {
                    if (!arguments.length) {
                        if (this._dirty) {
                            for (var b, c, d = 0, e = this._last, f = 999999999999; e;) b = e._prev, e._dirty && e.totalDuration(), e._startTime > f && this._sortChildren && !e._paused ? this.add(e, e._startTime - e._delay) : f = e._startTime, e._startTime < 0 && !e._paused && (d -= e._startTime, this._timeline.smoothChildTiming && (this._startTime += e._startTime / this._timeScale), this.shiftChildren(-e._startTime, !1, -9999999999), f = 0), c = e._startTime + e._totalDuration / e._timeScale, c > d && (d = c), e = b;
                            this._duration = this._totalDuration = d, this._dirty = !1
                        }
                        return this._totalDuration
                    }
                    return 0 !== this.totalDuration() && 0 !== a && this.timeScale(this._totalDuration / a), this
                }, m.usesFrames = function() {
                    for (var b = this._timeline; b._timeline;) b = b._timeline;
                    return b === a._rootFramesTimeline
                }, m.rawTime = function() {
                    return this._paused ? this._totalTime : (this._timeline.rawTime() - this._startTime) * this._timeScale
                }, d
            }, !0), window._gsDefine("TimelineMax", ["TimelineLite", "TweenLite", "easing.Ease"], function(a, b, c) {
                var d = function(b) {
                        a.call(this, b), this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._cycle = 0, this._yoyo = this.vars.yoyo === !0, this._dirty = !0
                    },
                    e = 1e-10,
                    f = [],
                    g = new c(null, null, 1, 0),
                    h = d.prototype = new a;
                return h.constructor = d, h.kill()._gc = !1, d.version = "1.12.1", h.invalidate = function() {
                    return this._yoyo = this.vars.yoyo === !0, this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._uncache(!0), a.prototype.invalidate.call(this)
                }, h.addCallback = function(a, c, d, e) {
                    return this.add(b.delayedCall(0, a, d, e), c)
                }, h.removeCallback = function(a, b) {
                    if (a)
                        if (null == b) this._kill(null, a);
                        else
                            for (var c = this.getTweensOf(a, !1), d = c.length, e = this._parseTimeOrLabel(b); --d > -1;) c[d]._startTime === e && c[d]._enabled(!1, !1);
                    return this
                }, h.tweenTo = function(a, c) {
                    c = c || {};
                    var d, e, h, i = {
                        ease: g,
                        overwrite: c.delay ? 2 : 1,
                        useFrames: this.usesFrames(),
                        immediateRender: !1
                    };
                    for (e in c) i[e] = c[e];
                    return i.time = this._parseTimeOrLabel(a), d = Math.abs(Number(i.time) - this._time) / this._timeScale || .001, h = new b(this, d, i), i.onStart = function() {
                        h.target.paused(!0), h.vars.time !== h.target.time() && d === h.duration() && h.duration(Math.abs(h.vars.time - h.target.time()) / h.target._timeScale), c.onStart && c.onStart.apply(c.onStartScope || h, c.onStartParams || f)
                    }, h
                }, h.tweenFromTo = function(a, b, c) {
                    c = c || {}, a = this._parseTimeOrLabel(a), c.startAt = {
                        onComplete: this.seek,
                        onCompleteParams: [a],
                        onCompleteScope: this
                    }, c.immediateRender = c.immediateRender !== !1;
                    var d = this.tweenTo(b, c);
                    return d.duration(Math.abs(d.vars.time - a) / this._timeScale || .001)
                }, h.render = function(a, b, c) {
                    this._gc && this._enabled(!0, !1);
                    var d, g, h, i, j, k, l = this._dirty ? this.totalDuration() : this._totalDuration,
                        m = this._duration,
                        n = this._time,
                        o = this._totalTime,
                        p = this._startTime,
                        q = this._timeScale,
                        r = this._rawPrevTime,
                        s = this._paused,
                        t = this._cycle;
                    if (a >= l ? (this._locked || (this._totalTime = l, this._cycle = this._repeat), this._reversed || this._hasPausedChild() || (g = !0, i = "onComplete", 0 === this._duration && (0 === a || 0 > r || r === e) && r !== a && this._first && (j = !0, r > e && (i = "onReverseComplete"))), this._rawPrevTime = this._duration || !b || a || this._rawPrevTime === a ? a : e, this._yoyo && 0 !== (1 & this._cycle) ? this._time = a = 0 : (this._time = m, a = m + 1e-4)) : 1e-7 > a ? (this._locked || (this._totalTime = this._cycle = 0), this._time = 0, (0 !== n || 0 === m && r !== e && (r > 0 || 0 > a && r >= 0) && !this._locked) && (i = "onReverseComplete", g = this._reversed), 0 > a ? (this._active = !1, 0 === m && r >= 0 && this._first && (j = !0), this._rawPrevTime = a) : (this._rawPrevTime = m || !b || a || this._rawPrevTime === a ? a : e, a = 0, this._initted || (j = !0))) : (0 === m && 0 > r && (j = !0), this._time = this._rawPrevTime = a, this._locked || (this._totalTime = a, 0 !== this._repeat && (k = m + this._repeatDelay, this._cycle = this._totalTime / k >> 0, 0 !== this._cycle && this._cycle === this._totalTime / k && this._cycle--, this._time = this._totalTime - this._cycle * k, this._yoyo && 0 !== (1 & this._cycle) && (this._time = m - this._time), this._time > m ? (this._time = m, a = m + 1e-4) : this._time < 0 ? this._time = a = 0 : a = this._time))), this._cycle !== t && !this._locked) {
                        var u = this._yoyo && 0 !== (1 & t),
                            v = u === (this._yoyo && 0 !== (1 & this._cycle)),
                            w = this._totalTime,
                            x = this._cycle,
                            y = this._rawPrevTime,
                            z = this._time;
                        if (this._totalTime = t * m, this._cycle < t ? u = !u : this._totalTime += m, this._time = n, this._rawPrevTime = 0 === m ? r - 1e-4 : r, this._cycle = t, this._locked = !0, n = u ? 0 : m, this.render(n, b, 0 === m), b || this._gc || this.vars.onRepeat && this.vars.onRepeat.apply(this.vars.onRepeatScope || this, this.vars.onRepeatParams || f), v && (n = u ? m + 1e-4 : -1e-4, this.render(n, !0, !1)), this._locked = !1, this._paused && !s) return;
                        this._time = z, this._totalTime = w, this._cycle = x, this._rawPrevTime = y
                    }
                    if (!(this._time !== n && this._first || c || j)) return void(o !== this._totalTime && this._onUpdate && (b || this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || f)));
                    if (this._initted || (this._initted = !0), this._active || !this._paused && this._totalTime !== o && a > 0 && (this._active = !0), 0 === o && this.vars.onStart && 0 !== this._totalTime && (b || this.vars.onStart.apply(this.vars.onStartScope || this, this.vars.onStartParams || f)), this._time >= n)
                        for (d = this._first; d && (h = d._next, !this._paused || s);)(d._active || d._startTime <= this._time && !d._paused && !d._gc) && (d._reversed ? d.render((d._dirty ? d.totalDuration() : d._totalDuration) - (a - d._startTime) * d._timeScale, b, c) : d.render((a - d._startTime) * d._timeScale, b, c)), d = h;
                    else
                        for (d = this._last; d && (h = d._prev, !this._paused || s);)(d._active || d._startTime <= n && !d._paused && !d._gc) && (d._reversed ? d.render((d._dirty ? d.totalDuration() : d._totalDuration) - (a - d._startTime) * d._timeScale, b, c) : d.render((a - d._startTime) * d._timeScale, b, c)), d = h;
                    this._onUpdate && (b || this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || f)), i && (this._locked || this._gc || (p === this._startTime || q !== this._timeScale) && (0 === this._time || l >= this.totalDuration()) && (g && (this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !b && this.vars[i] && this.vars[i].apply(this.vars[i + "Scope"] || this, this.vars[i + "Params"] || f)))
                }, h.getActive = function(a, b, c) {
                    null == a && (a = !0), null == b && (b = !0), null == c && (c = !1);
                    var d, e, f = [],
                        g = this.getChildren(a, b, c),
                        h = 0,
                        i = g.length;
                    for (d = 0; i > d; d++) e = g[d], e.isActive() && (f[h++] = e);
                    return f
                }, h.getLabelAfter = function(a) {
                    a || 0 !== a && (a = this._time);
                    var b, c = this.getLabelsArray(),
                        d = c.length;
                    for (b = 0; d > b; b++)
                        if (c[b].time > a) return c[b].name;
                    return null
                }, h.getLabelBefore = function(a) {
                    null == a && (a = this._time);
                    for (var b = this.getLabelsArray(), c = b.length; --c > -1;)
                        if (b[c].time < a) return b[c].name;
                    return null
                }, h.getLabelsArray = function() {
                    var a, b = [],
                        c = 0;
                    for (a in this._labels) b[c++] = {
                        time: this._labels[a],
                        name: a
                    };
                    return b.sort(function(a, b) {
                        return a.time - b.time
                    }), b
                }, h.progress = function(a) {
                    return arguments.length ? this.totalTime(this.duration() * (this._yoyo && 0 !== (1 & this._cycle) ? 1 - a : a) + this._cycle * (this._duration + this._repeatDelay), !1) : this._time / this.duration()
                }, h.totalProgress = function(a) {
                    return arguments.length ? this.totalTime(this.totalDuration() * a, !1) : this._totalTime / this.totalDuration()
                }, h.totalDuration = function(b) {
                    return arguments.length ? -1 === this._repeat ? this : this.duration((b - this._repeat * this._repeatDelay) / (this._repeat + 1)) : (this._dirty && (a.prototype.totalDuration.call(this), this._totalDuration = -1 === this._repeat ? 999999999999 : this._duration * (this._repeat + 1) + this._repeatDelay * this._repeat), this._totalDuration)
                }, h.time = function(a, b) {
                    return arguments.length ? (this._dirty && this.totalDuration(), a > this._duration && (a = this._duration), this._yoyo && 0 !== (1 & this._cycle) ? a = this._duration - a + this._cycle * (this._duration + this._repeatDelay) : 0 !== this._repeat && (a += this._cycle * (this._duration + this._repeatDelay)), this.totalTime(a, b)) : this._time
                }, h.repeat = function(a) {
                    return arguments.length ? (this._repeat = a, this._uncache(!0)) : this._repeat
                }, h.repeatDelay = function(a) {
                    return arguments.length ? (this._repeatDelay = a, this._uncache(!0)) : this._repeatDelay
                }, h.yoyo = function(a) {
                    return arguments.length ? (this._yoyo = a, this) : this._yoyo
                }, h.currentLabel = function(a) {
                    return arguments.length ? this.seek(a, !0) : this.getLabelBefore(this._time + 1e-8)
                }, d
            }, !0),
            function() {
                var a = 180 / Math.PI,
                    b = [],
                    c = [],
                    d = [],
                    e = {},
                    f = function(a, b, c, d) {
                        this.a = a, this.b = b, this.c = c, this.d = d, this.da = d - a, this.ca = c - a, this.ba = b - a
                    },
                    g = ",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",
                    h = function(a, b, c, d) {
                        var e = {
                                a: a
                            },
                            f = {},
                            g = {},
                            h = {
                                c: d
                            },
                            i = (a + b) / 2,
                            j = (b + c) / 2,
                            k = (c + d) / 2,
                            l = (i + j) / 2,
                            m = (j + k) / 2,
                            n = (m - l) / 8;
                        return e.b = i + (a - i) / 4, f.b = l + n, e.c = f.a = (e.b + f.b) / 2, f.c = g.a = (l + m) / 2, g.b = m - n, h.b = k + (d - k) / 4, g.c = h.a = (g.b + h.b) / 2, [e, f, g, h]
                    },
                    i = function(a, e, f, g, i) {
                        var j, k, l, m, n, o, p, q, r, s, t, u, v, w = a.length - 1,
                            x = 0,
                            y = a[0].a;
                        for (j = 0; w > j; j++) n = a[x], k = n.a, l = n.d, m = a[x + 1].d, i ? (t = b[j], u = c[j], v = (u + t) * e * .25 / (g ? .5 : d[j] || .5), o = l - (l - k) * (g ? .5 * e : 0 !== t ? v / t : 0), p = l + (m - l) * (g ? .5 * e : 0 !== u ? v / u : 0), q = l - (o + ((p - o) * (3 * t / (t + u) + .5) / 4 || 0))) : (o = l - (l - k) * e * .5, p = l + (m - l) * e * .5, q = l - (o + p) / 2), o += q, p += q, n.c = r = o, n.b = 0 !== j ? y : y = n.a + .6 * (n.c - n.a), n.da = l - k, n.ca = r - k, n.ba = y - k, f ? (s = h(k, y, r, l), a.splice(x, 1, s[0], s[1], s[2], s[3]), x += 4) : x++, y = p;
                        n = a[x], n.b = y, n.c = y + .4 * (n.d - y), n.da = n.d - n.a, n.ca = n.c - n.a, n.ba = y - n.a, f && (s = h(n.a, y, n.c, n.d), a.splice(x, 1, s[0], s[1], s[2], s[3]))
                    },
                    j = function(a, d, e, g) {
                        var h, i, j, k, l, m, n = [];
                        if (g)
                            for (a = [g].concat(a), i = a.length; --i > -1;) "string" == typeof(m = a[i][d]) && "=" === m.charAt(1) && (a[i][d] = g[d] + Number(m.charAt(0) + m.substr(2)));
                        if (h = a.length - 2, 0 > h) return n[0] = new f(a[0][d], 0, 0, a[-1 > h ? 0 : 1][d]), n;
                        for (i = 0; h > i; i++) j = a[i][d], k = a[i + 1][d], n[i] = new f(j, 0, 0, k), e && (l = a[i + 2][d], b[i] = (b[i] || 0) + (k - j) * (k - j), c[i] = (c[i] || 0) + (l - k) * (l - k));
                        return n[i] = new f(a[i][d], 0, 0, a[i + 1][d]), n
                    },
                    k = function(a, f, h, k, l, m) {
                        var n, o, p, q, r, s, t, u, v = {},
                            w = [],
                            x = m || a[0];
                        l = "string" == typeof l ? "," + l + "," : g, null == f && (f = 1);
                        for (o in a[0]) w.push(o);
                        if (a.length > 1) {
                            for (u = a[a.length - 1], t = !0, n = w.length; --n > -1;)
                                if (o = w[n], Math.abs(x[o] - u[o]) > .05) {
                                    t = !1;
                                    break
                                }
                            t && (a = a.concat(), m && a.unshift(m), a.push(a[1]), m = a[a.length - 3])
                        }
                        for (b.length = c.length = d.length = 0, n = w.length; --n > -1;) o = w[n], e[o] = -1 !== l.indexOf("," + o + ","), v[o] = j(a, o, e[o], m);
                        for (n = b.length; --n > -1;) b[n] = Math.sqrt(b[n]), c[n] = Math.sqrt(c[n]);
                        if (!k) {
                            for (n = w.length; --n > -1;)
                                if (e[o])
                                    for (p = v[w[n]], s = p.length - 1, q = 0; s > q; q++) r = p[q + 1].da / c[q] + p[q].da / b[q], d[q] = (d[q] || 0) + r * r;
                            for (n = d.length; --n > -1;) d[n] = Math.sqrt(d[n])
                        }
                        for (n = w.length, q = h ? 4 : 1; --n > -1;) o = w[n], p = v[o], i(p, f, h, k, e[o]), t && (p.splice(0, q), p.splice(p.length - q, q));
                        return v
                    },
                    l = function(a, b, c) {
                        b = b || "soft";
                        var d, e, g, h, i, j, k, l, m, n, o, p = {},
                            q = "cubic" === b ? 3 : 2,
                            r = "soft" === b,
                            s = [];
                        if (r && c && (a = [c].concat(a)), null == a || a.length < q + 1) throw "invalid Bezier data";
                        for (m in a[0]) s.push(m);
                        for (j = s.length; --j > -1;) {
                            for (m = s[j], p[m] = i = [], n = 0, l = a.length, k = 0; l > k; k++) d = null == c ? a[k][m] : "string" == typeof(o = a[k][m]) && "=" === o.charAt(1) ? c[m] + Number(o.charAt(0) + o.substr(2)) : Number(o), r && k > 1 && l - 1 > k && (i[n++] = (d + i[n - 2]) / 2), i[n++] = d;
                            for (l = n - q + 1, n = 0, k = 0; l > k; k += q) d = i[k], e = i[k + 1], g = i[k + 2], h = 2 === q ? 0 : i[k + 3], i[n++] = o = 3 === q ? new f(d, e, g, h) : new f(d, (2 * e + d) / 3, (2 * e + g) / 3, g);
                            i.length = n
                        }
                        return p
                    },
                    m = function(a, b, c) {
                        for (var d, e, f, g, h, i, j, k, l, m, n, o = 1 / c, p = a.length; --p > -1;)
                            for (m = a[p], f = m.a, g = m.d - f, h = m.c - f, i = m.b - f, d = e = 0, k = 1; c >= k; k++) j = o * k, l = 1 - j, d = e - (e = (j * j * g + 3 * l * (j * h + l * i)) * j), n = p * c + k - 1, b[n] = (b[n] || 0) + d * d
                    },
                    n = function(a, b) {
                        b = b >> 0 || 6;
                        var c, d, e, f, g = [],
                            h = [],
                            i = 0,
                            j = 0,
                            k = b - 1,
                            l = [],
                            n = [];
                        for (c in a) m(a[c], g, b);
                        for (e = g.length, d = 0; e > d; d++) i += Math.sqrt(g[d]), f = d % b, n[f] = i, f === k && (j += i, f = d / b >> 0, l[f] = n, h[f] = j, i = 0, n = []);
                        return {
                            length: j,
                            lengths: h,
                            segments: l
                        }
                    },
                    o = window._gsDefine.plugin({
                        propName: "bezier",
                        priority: -1,
                        version: "1.3.2",
                        API: 2,
                        global: !0,
                        init: function(a, b, c) {
                            this._target = a, b instanceof Array && (b = {
                                values: b
                            }), this._func = {}, this._round = {}, this._props = [], this._timeRes = null == b.timeResolution ? 6 : parseInt(b.timeResolution, 10);
                            var d, e, f, g, h, i = b.values || [],
                                j = {},
                                m = i[0],
                                o = b.autoRotate || c.vars.orientToBezier;
                            this._autoRotate = o ? o instanceof Array ? o : [
                                ["x", "y", "rotation", o === !0 ? 0 : Number(o) || 0]
                            ] : null;
                            for (d in m) this._props.push(d);
                            for (f = this._props.length; --f > -1;) d = this._props[f], this._overwriteProps.push(d), e = this._func[d] = "function" == typeof a[d], j[d] = e ? a[d.indexOf("set") || "function" != typeof a["get" + d.substr(3)] ? d : "get" + d.substr(3)]() : parseFloat(a[d]), h || j[d] !== i[0][d] && (h = j);
                            if (this._beziers = "cubic" !== b.type && "quadratic" !== b.type && "soft" !== b.type ? k(i, isNaN(b.curviness) ? 1 : b.curviness, !1, "thruBasic" === b.type, b.correlate, h) : l(i, b.type, j), this._segCount = this._beziers[d].length, this._timeRes) {
                                var p = n(this._beziers, this._timeRes);
                                this._length = p.length, this._lengths = p.lengths, this._segments = p.segments, this._l1 = this._li = this._s1 = this._si = 0, this._l2 = this._lengths[0], this._curSeg = this._segments[0], this._s2 = this._curSeg[0], this._prec = 1 / this._curSeg.length
                            }
                            if (o = this._autoRotate)
                                for (this._initialRotations = [], o[0] instanceof Array || (this._autoRotate = o = [o]), f = o.length; --f > -1;) {
                                    for (g = 0; 3 > g; g++) d = o[f][g], this._func[d] = "function" == typeof a[d] ? a[d.indexOf("set") || "function" != typeof a["get" + d.substr(3)] ? d : "get" + d.substr(3)] : !1;
                                    d = o[f][2], this._initialRotations[f] = this._func[d] ? this._func[d].call(this._target) : this._target[d]
                                }
                            return this._startRatio = c.vars.runBackwards ? 1 : 0, !0
                        },
                        set: function(b) {
                            var c, d, e, f, g, h, i, j, k, l, m = this._segCount,
                                n = this._func,
                                o = this._target,
                                p = b !== this._startRatio;
                            if (this._timeRes) {
                                if (k = this._lengths, l = this._curSeg, b *= this._length, e = this._li, b > this._l2 && m - 1 > e) {
                                    for (j = m - 1; j > e && (this._l2 = k[++e]) <= b;);
                                    this._l1 = k[e - 1], this._li = e, this._curSeg = l = this._segments[e], this._s2 = l[this._s1 = this._si = 0]
                                } else if (b < this._l1 && e > 0) {
                                    for (; e > 0 && (this._l1 = k[--e]) >= b;);
                                    0 === e && b < this._l1 ? this._l1 = 0 : e++, this._l2 = k[e], this._li = e, this._curSeg = l = this._segments[e], this._s1 = l[(this._si = l.length - 1) - 1] || 0, this._s2 = l[this._si]
                                }
                                if (c = e, b -= this._l1, e = this._si, b > this._s2 && e < l.length - 1) {
                                    for (j = l.length - 1; j > e && (this._s2 = l[++e]) <= b;);
                                    this._s1 = l[e - 1], this._si = e
                                } else if (b < this._s1 && e > 0) {
                                    for (; e > 0 && (this._s1 = l[--e]) >= b;);
                                    0 === e && b < this._s1 ? this._s1 = 0 : e++, this._s2 = l[e], this._si = e
                                }
                                h = (e + (b - this._s1) / (this._s2 - this._s1)) * this._prec
                            } else c = 0 > b ? 0 : b >= 1 ? m - 1 : m * b >> 0, h = (b - c * (1 / m)) * m;
                            for (d = 1 - h, e = this._props.length; --e > -1;) f = this._props[e], g = this._beziers[f][c], i = (h * h * g.da + 3 * d * (h * g.ca + d * g.ba)) * h + g.a, this._round[f] && (i = Math.round(i)), n[f] ? o[f](i) : o[f] = i;
                            if (this._autoRotate) {
                                var q, r, s, t, u, v, w, x = this._autoRotate;
                                for (e = x.length; --e > -1;) f = x[e][2], v = x[e][3] || 0, w = x[e][4] === !0 ? 1 : a, g = this._beziers[x[e][0]], q = this._beziers[x[e][1]], g && q && (g = g[c], q = q[c], r = g.a + (g.b - g.a) * h, t = g.b + (g.c - g.b) * h, r += (t - r) * h, t += (g.c + (g.d - g.c) * h - t) * h, s = q.a + (q.b - q.a) * h, u = q.b + (q.c - q.b) * h, s += (u - s) * h, u += (q.c + (q.d - q.c) * h - u) * h, i = p ? Math.atan2(u - s, t - r) * w + v : this._initialRotations[e], n[f] ? o[f](i) : o[f] = i)
                            }
                        }
                    }),
                    p = o.prototype;
                o.bezierThrough = k, o.cubicToQuadratic = h, o._autoCSS = !0, o.quadraticToCubic = function(a, b, c) {
                    return new f(a, (2 * b + a) / 3, (2 * b + c) / 3, c)
                }, o._cssRegister = function() {
                    var a = window._gsDefine.globals.CSSPlugin;
                    if (a) {
                        var b = a._internals,
                            c = b._parseToProxy,
                            d = b._setPluginRatio,
                            e = b.CSSPropTween;
                        b._registerComplexSpecialProp("bezier", {
                            parser: function(a, b, f, g, h, i) {
                                b instanceof Array && (b = {
                                    values: b
                                }), i = new o;
                                var j, k, l, m = b.values,
                                    n = m.length - 1,
                                    p = [],
                                    q = {};
                                if (0 > n) return h;
                                for (j = 0; n >= j; j++) l = c(a, m[j], g, h, i, n !== j), p[j] = l.end;
                                for (k in b) q[k] = b[k];
                                return q.values = p, h = new e(a, "bezier", 0, 0, l.pt, 2), h.data = l, h.plugin = i, h.setRatio = d, 0 === q.autoRotate && (q.autoRotate = !0), !q.autoRotate || q.autoRotate instanceof Array || (j = q.autoRotate === !0 ? 0 : Number(q.autoRotate), q.autoRotate = null != l.end.left ? [
                                    ["left", "top", "rotation", j, !1]
                                ] : null != l.end.x ? [
                                    ["x", "y", "rotation", j, !1]
                                ] : !1), q.autoRotate && (g._transform || g._enableTransforms(!1), l.autoRotate = g._target._gsTransform), i._onInitTween(l.proxy, q, g._tween), h
                            }
                        })
                    }
                }, p._roundProps = function(a, b) {
                    for (var c = this._overwriteProps, d = c.length; --d > -1;)(a[c[d]] || a.bezier || a.bezierThrough) && (this._round[c[d]] = b)
                }, p._kill = function(a) {
                    var b, c, d = this._props;
                    for (b in this._beziers)
                        if (b in a)
                            for (delete this._beziers[b], delete this._func[b], c = d.length; --c > -1;) d[c] === b && d.splice(c, 1);
                    return this._super._kill.call(this, a)
                }
            }(), window._gsDefine("plugins.CSSPlugin", ["plugins.TweenPlugin", "TweenLite"], function(a, b) {
                var c, d, e, f, g = function() {
                        a.call(this, "css"), this._overwriteProps.length = 0, this.setRatio = g.prototype.setRatio
                    },
                    h = {},
                    i = g.prototype = new a("css");
                i.constructor = g, g.version = "1.12.1", g.API = 2, g.defaultTransformPerspective = 0, g.defaultSkewType = "compensated", i = "px", g.suffixMap = {
                    top: i,
                    right: i,
                    bottom: i,
                    left: i,
                    width: i,
                    height: i,
                    fontSize: i,
                    padding: i,
                    margin: i,
                    perspective: i,
                    lineHeight: ""
                };
                var j, k, l, m, n, o, p = /(?:\d|\-\d|\.\d|\-\.\d)+/g,
                    q = /(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,
                    r = /(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,
                    s = /[^\d\-\.]/g,
                    t = /(?:\d|\-|\+|=|#|\.)*/g,
                    u = /opacity *= *([^)]*)/i,
                    v = /opacity:([^;]*)/i,
                    w = /alpha\(opacity *=.+?\)/i,
                    x = /^(rgb|hsl)/,
                    y = /([A-Z])/g,
                    z = /-([a-z])/gi,
                    A = /(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,
                    B = function(a, b) {
                        return b.toUpperCase()
                    },
                    C = /(?:Left|Right|Width)/i,
                    D = /(M11|M12|M21|M22)=[\d\-\.e]+/gi,
                    E = /progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,
                    F = /,(?=[^\)]*(?:\(|$))/gi,
                    G = Math.PI / 180,
                    H = 180 / Math.PI,
                    I = {},
                    J = document,
                    K = J.createElement("div"),
                    L = J.createElement("img"),
                    M = g._internals = {
                        _specialProps: h
                    },
                    N = navigator.userAgent,
                    O = function() {
                        var a, b = N.indexOf("Android"),
                            c = J.createElement("div");
                        return l = -1 !== N.indexOf("Safari") && -1 === N.indexOf("Chrome") && (-1 === b || Number(N.substr(b + 8, 1)) > 3), n = l && Number(N.substr(N.indexOf("Version/") + 8, 1)) < 6, m = -1 !== N.indexOf("Firefox"), /MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(N) && (o = parseFloat(RegExp.$1)), c.innerHTML = "<a style='top:1px;opacity:.55;'>a</a>", a = c.getElementsByTagName("a")[0], a ? /^0.55/.test(a.style.opacity) : !1
                    }(),
                    P = function(a) {
                        return u.test("string" == typeof a ? a : (a.currentStyle ? a.currentStyle.filter : a.style.filter) || "") ? parseFloat(RegExp.$1) / 100 : 1
                    },
                    Q = function(a) {
                        window.console && console.log(a)
                    },
                    R = "",
                    S = "",
                    T = function(a, b) {
                        b = b || K;
                        var c, d, e = b.style;
                        if (void 0 !== e[a]) return a;
                        for (a = a.charAt(0).toUpperCase() + a.substr(1), c = ["O", "Moz", "ms", "Ms", "Webkit"], d = 5; --d > -1 && void 0 === e[c[d] + a];);
                        return d >= 0 ? (S = 3 === d ? "ms" : c[d], R = "-" + S.toLowerCase() + "-", S + a) : null
                    },
                    U = J.defaultView ? J.defaultView.getComputedStyle : function() {},
                    V = g.getStyle = function(a, b, c, d, e) {
                        var f;
                        return O || "opacity" !== b ? (!d && a.style[b] ? f = a.style[b] : (c = c || U(a)) ? f = c[b] || c.getPropertyValue(b) || c.getPropertyValue(b.replace(y, "-$1").toLowerCase()) : a.currentStyle && (f = a.currentStyle[b]), null == e || f && "none" !== f && "auto" !== f && "auto auto" !== f ? f : e) : P(a)
                    },
                    W = M.convertToPixels = function(a, c, d, e, f) {
                        if ("px" === e || !e) return d;
                        if ("auto" === e || !d) return 0;
                        var h, i, j, k = C.test(c),
                            l = a,
                            m = K.style,
                            n = 0 > d;
                        if (n && (d = -d), "%" === e && -1 !== c.indexOf("border")) h = d / 100 * (k ? a.clientWidth : a.clientHeight);
                        else {
                            if (m.cssText = "border:0 solid red;position:" + V(a, "position") + ";line-height:0;", "%" !== e && l.appendChild) m[k ? "borderLeftWidth" : "borderTopWidth"] = d + e;
                            else {
                                if (l = a.parentNode || J.body, i = l._gsCache, j = b.ticker.frame, i && k && i.time === j) return i.width * d / 100;
                                m[k ? "width" : "height"] = d + e
                            }
                            l.appendChild(K), h = parseFloat(K[k ? "offsetWidth" : "offsetHeight"]), l.removeChild(K), k && "%" === e && g.cacheWidths !== !1 && (i = l._gsCache = l._gsCache || {}, i.time = j, i.width = h / d * 100), 0 !== h || f || (h = W(a, c, d, e, !0))
                        }
                        return n ? -h : h
                    },
                    X = M.calculateOffset = function(a, b, c) {
                        if ("absolute" !== V(a, "position", c)) return 0;
                        var d = "left" === b ? "Left" : "Top",
                            e = V(a, "margin" + d, c);
                        return a["offset" + d] - (W(a, b, parseFloat(e), e.replace(t, "")) || 0)
                    },
                    Y = function(a, b) {
                        var c, d, e = {};
                        if (b = b || U(a, null))
                            if (c = b.length)
                                for (; --c > -1;) e[b[c].replace(z, B)] = b.getPropertyValue(b[c]);
                            else
                                for (c in b) e[c] = b[c];
                        else if (b = a.currentStyle || a.style)
                            for (c in b) "string" == typeof c && void 0 === e[c] && (e[c.replace(z, B)] = b[c]);
                        return O || (e.opacity = P(a)), d = ya(a, b, !1), e.rotation = d.rotation, e.skewX = d.skewX, e.scaleX = d.scaleX, e.scaleY = d.scaleY, e.x = d.x, e.y = d.y, wa && (e.z = d.z, e.rotationX = d.rotationX, e.rotationY = d.rotationY, e.scaleZ = d.scaleZ), e.filters && delete e.filters, e
                    },
                    Z = function(a, b, c, d, e) {
                        var f, g, h, i = {},
                            j = a.style;
                        for (g in c) "cssText" !== g && "length" !== g && isNaN(g) && (b[g] !== (f = c[g]) || e && e[g]) && -1 === g.indexOf("Origin") && ("number" == typeof f || "string" == typeof f) && (i[g] = "auto" !== f || "left" !== g && "top" !== g ? "" !== f && "auto" !== f && "none" !== f || "string" != typeof b[g] || "" === b[g].replace(s, "") ? f : 0 : X(a, g), void 0 !== j[g] && (h = new la(j, g, j[g], h)));
                        if (d)
                            for (g in d) "className" !== g && (i[g] = d[g]);
                        return {
                            difs: i,
                            firstMPT: h
                        }
                    },
                    $ = {
                        width: ["Left", "Right"],
                        height: ["Top", "Bottom"]
                    },
                    _ = ["marginLeft", "marginRight", "marginTop", "marginBottom"],
                    aa = function(a, b, c) {
                        var d = parseFloat("width" === b ? a.offsetWidth : a.offsetHeight),
                            e = $[b],
                            f = e.length;
                        for (c = c || U(a, null); --f > -1;) d -= parseFloat(V(a, "padding" + e[f], c, !0)) || 0, d -= parseFloat(V(a, "border" + e[f] + "Width", c, !0)) || 0;
                        return d
                    },
                    ba = function(a, b) {
                        (null == a || "" === a || "auto" === a || "auto auto" === a) && (a = "0 0");
                        var c = a.split(" "),
                            d = -1 !== a.indexOf("left") ? "0%" : -1 !== a.indexOf("right") ? "100%" : c[0],
                            e = -1 !== a.indexOf("top") ? "0%" : -1 !== a.indexOf("bottom") ? "100%" : c[1];
                        return null == e ? e = "0" : "center" === e && (e = "50%"), ("center" === d || isNaN(parseFloat(d)) && -1 === (d + "").indexOf("=")) && (d = "50%"), b && (b.oxp = -1 !== d.indexOf("%"), b.oyp = -1 !== e.indexOf("%"), b.oxr = "=" === d.charAt(1), b.oyr = "=" === e.charAt(1), b.ox = parseFloat(d.replace(s, "")), b.oy = parseFloat(e.replace(s, ""))), d + " " + e + (c.length > 2 ? " " + c[2] : "")
                    },
                    ca = function(a, b) {
                        return "string" == typeof a && "=" === a.charAt(1) ? parseInt(a.charAt(0) + "1", 10) * parseFloat(a.substr(2)) : parseFloat(a) - parseFloat(b)
                    },
                    da = function(a, b) {
                        return null == a ? b : "string" == typeof a && "=" === a.charAt(1) ? parseInt(a.charAt(0) + "1", 10) * Number(a.substr(2)) + b : parseFloat(a)
                    },
                    ea = function(a, b, c, d) {
                        var e, f, g, h, i = 1e-6;
                        return null == a ? h = b : "number" == typeof a ? h = a : (e = 360, f = a.split("_"), g = Number(f[0].replace(s, "")) * (-1 === a.indexOf("rad") ? 1 : H) - ("=" === a.charAt(1) ? 0 : b), f.length && (d && (d[c] = b + g), -1 !== a.indexOf("short") && (g %= e, g !== g % (e / 2) && (g = 0 > g ? g + e : g - e)), -1 !== a.indexOf("_cw") && 0 > g ? g = (g + 9999999999 * e) % e - (g / e | 0) * e : -1 !== a.indexOf("ccw") && g > 0 && (g = (g - 9999999999 * e) % e - (g / e | 0) * e)), h = b + g), i > h && h > -i && (h = 0), h
                    },
                    fa = {
                        aqua: [0, 255, 255],
                        lime: [0, 255, 0],
                        silver: [192, 192, 192],
                        black: [0, 0, 0],
                        maroon: [128, 0, 0],
                        teal: [0, 128, 128],
                        blue: [0, 0, 255],
                        navy: [0, 0, 128],
                        white: [255, 255, 255],
                        fuchsia: [255, 0, 255],
                        olive: [128, 128, 0],
                        yellow: [255, 255, 0],
                        orange: [255, 165, 0],
                        gray: [128, 128, 128],
                        purple: [128, 0, 128],
                        green: [0, 128, 0],
                        red: [255, 0, 0],
                        pink: [255, 192, 203],
                        cyan: [0, 255, 255],
                        transparent: [255, 255, 255, 0]
                    },
                    ga = function(a, b, c) {
                        return a = 0 > a ? a + 1 : a > 1 ? a - 1 : a, 255 * (1 > 6 * a ? b + (c - b) * a * 6 : .5 > a ? c : 2 > 3 * a ? b + (c - b) * (2 / 3 - a) * 6 : b) + .5 | 0
                    },
                    ha = function(a) {
                        var b, c, d, e, f, g;
                        return a && "" !== a ? "number" == typeof a ? [a >> 16, a >> 8 & 255, 255 & a] : ("," === a.charAt(a.length - 1) && (a = a.substr(0, a.length - 1)), fa[a] ? fa[a] : "#" === a.charAt(0) ? (4 === a.length && (b = a.charAt(1), c = a.charAt(2), d = a.charAt(3), a = "#" + b + b + c + c + d + d), a = parseInt(a.substr(1), 16), [a >> 16, a >> 8 & 255, 255 & a]) : "hsl" === a.substr(0, 3) ? (a = a.match(p), e = Number(a[0]) % 360 / 360, f = Number(a[1]) / 100, g = Number(a[2]) / 100, c = .5 >= g ? g * (f + 1) : g + f - g * f, b = 2 * g - c, a.length > 3 && (a[3] = Number(a[3])), a[0] = ga(e + 1 / 3, b, c), a[1] = ga(e, b, c), a[2] = ga(e - 1 / 3, b, c), a) : (a = a.match(p) || fa.transparent, a[0] = Number(a[0]), a[1] = Number(a[1]), a[2] = Number(a[2]), a.length > 3 && (a[3] = Number(a[3])), a)) : fa.black
                    },
                    ia = "(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";
                for (i in fa) ia += "|" + i + "\\b";
                ia = new RegExp(ia + ")", "gi");
                var ja = function(a, b, c, d) {
                        if (null == a) return function(a) {
                            return a
                        };
                        var e, f = b ? (a.match(ia) || [""])[0] : "",
                            g = a.split(f).join("").match(r) || [],
                            h = a.substr(0, a.indexOf(g[0])),
                            i = ")" === a.charAt(a.length - 1) ? ")" : "",
                            j = -1 !== a.indexOf(" ") ? " " : ",",
                            k = g.length,
                            l = k > 0 ? g[0].replace(p, "") : "";
                        return k ? e = b ? function(a) {
                            var b, m, n, o;
                            if ("number" == typeof a) a += l;
                            else if (d && F.test(a)) {
                                for (o = a.replace(F, "|").split("|"), n = 0; n < o.length; n++) o[n] = e(o[n]);
                                return o.join(",")
                            }
                            if (b = (a.match(ia) || [f])[0], m = a.split(b).join("").match(r) || [], n = m.length, k > n--)
                                for (; ++n < k;) m[n] = c ? m[(n - 1) / 2 | 0] : g[n];
                            return h + m.join(j) + j + b + i + (-1 !== a.indexOf("inset") ? " inset" : "")
                        } : function(a) {
                            var b, f, m;
                            if ("number" == typeof a) a += l;
                            else if (d && F.test(a)) {
                                for (f = a.replace(F, "|").split("|"), m = 0; m < f.length; m++) f[m] = e(f[m]);
                                return f.join(",")
                            }
                            if (b = a.match(r) || [], m = b.length, k > m--)
                                for (; ++m < k;) b[m] = c ? b[(m - 1) / 2 | 0] : g[m];
                            return h + b.join(j) + i
                        } : function(a) {
                            return a
                        }
                    },
                    ka = function(a) {
                        return a = a.split(","),
                            function(b, c, d, e, f, g, h) {
                                var i, j = (c + "").split(" ");
                                for (h = {}, i = 0; 4 > i; i++) h[a[i]] = j[i] = j[i] || j[(i - 1) / 2 >> 0];
                                return e.parse(b, h, f, g)
                            }
                    },
                    la = (M._setPluginRatio = function(a) {
                        this.plugin.setRatio(a);
                        for (var b, c, d, e, f = this.data, g = f.proxy, h = f.firstMPT, i = 1e-6; h;) b = g[h.v], h.r ? b = Math.round(b) : i > b && b > -i && (b = 0), h.t[h.p] = b, h = h._next;
                        if (f.autoRotate && (f.autoRotate.rotation = g.rotation), 1 === a)
                            for (h = f.firstMPT; h;) {
                                if (c = h.t, c.type) {
                                    if (1 === c.type) {
                                        for (e = c.xs0 + c.s + c.xs1, d = 1; d < c.l; d++) e += c["xn" + d] + c["xs" + (d + 1)];
                                        c.e = e
                                    }
                                } else c.e = c.s + c.xs0;
                                h = h._next
                            }
                    }, function(a, b, c, d, e) {
                        this.t = a, this.p = b, this.v = c, this.r = e, d && (d._prev = this, this._next = d)
                    }),
                    ma = (M._parseToProxy = function(a, b, c, d, e, f) {
                        var g, h, i, j, k, l = d,
                            m = {},
                            n = {},
                            o = c._transform,
                            p = I;
                        for (c._transform = null, I = b, d = k = c.parse(a, b, d, e), I = p, f && (c._transform = o, l && (l._prev = null, l._prev && (l._prev._next = null))); d && d !== l;) {
                            if (d.type <= 1 && (h = d.p, n[h] = d.s + d.c, m[h] = d.s, f || (j = new la(d, "s", h, j, d.r), d.c = 0), 1 === d.type))
                                for (g = d.l; --g > 0;) i = "xn" + g, h = d.p + "_" + i, n[h] = d.data[i], m[h] = d[i], f || (j = new la(d, i, h, j, d.rxp[i]));

                            d = d._next
                        }
                        return {
                            proxy: m,
                            end: n,
                            firstMPT: j,
                            pt: k
                        }
                    }, M.CSSPropTween = function(a, b, d, e, g, h, i, j, k, l, m) {
                        this.t = a, this.p = b, this.s = d, this.c = e, this.n = i || b, a instanceof ma || f.push(this.n), this.r = j, this.type = h || 0, k && (this.pr = k, c = !0), this.b = void 0 === l ? d : l, this.e = void 0 === m ? d + e : m, g && (this._next = g, g._prev = this)
                    }),
                    na = g.parseComplex = function(a, b, c, d, e, f, g, h, i, k) {
                        c = c || f || "", g = new ma(a, b, 0, 0, g, k ? 2 : 1, null, !1, h, c, d), d += "";
                        var l, m, n, o, r, s, t, u, v, w, y, z, A = c.split(", ").join(",").split(" "),
                            B = d.split(", ").join(",").split(" "),
                            C = A.length,
                            D = j !== !1;
                        for ((-1 !== d.indexOf(",") || -1 !== c.indexOf(",")) && (A = A.join(" ").replace(F, ", ").split(" "), B = B.join(" ").replace(F, ", ").split(" "), C = A.length), C !== B.length && (A = (f || "").split(" "), C = A.length), g.plugin = i, g.setRatio = k, l = 0; C > l; l++)
                            if (o = A[l], r = B[l], u = parseFloat(o), u || 0 === u) g.appendXtra("", u, ca(r, u), r.replace(q, ""), D && -1 !== r.indexOf("px"), !0);
                            else if (e && ("#" === o.charAt(0) || fa[o] || x.test(o))) z = "," === r.charAt(r.length - 1) ? ")," : ")", o = ha(o), r = ha(r), v = o.length + r.length > 6, v && !O && 0 === r[3] ? (g["xs" + g.l] += g.l ? " transparent" : "transparent", g.e = g.e.split(B[l]).join("transparent")) : (O || (v = !1), g.appendXtra(v ? "rgba(" : "rgb(", o[0], r[0] - o[0], ",", !0, !0).appendXtra("", o[1], r[1] - o[1], ",", !0).appendXtra("", o[2], r[2] - o[2], v ? "," : z, !0), v && (o = o.length < 4 ? 1 : o[3], g.appendXtra("", o, (r.length < 4 ? 1 : r[3]) - o, z, !1)));
                        else if (s = o.match(p)) {
                            if (t = r.match(q), !t || t.length !== s.length) return g;
                            for (n = 0, m = 0; m < s.length; m++) y = s[m], w = o.indexOf(y, n), g.appendXtra(o.substr(n, w - n), Number(y), ca(t[m], y), "", D && "px" === o.substr(w + y.length, 2), 0 === m), n = w + y.length;
                            g["xs" + g.l] += o.substr(n)
                        } else g["xs" + g.l] += g.l ? " " + o : o;
                        if (-1 !== d.indexOf("=") && g.data) {
                            for (z = g.xs0 + g.data.s, l = 1; l < g.l; l++) z += g["xs" + l] + g.data["xn" + l];
                            g.e = z + g["xs" + l]
                        }
                        return g.l || (g.type = -1, g.xs0 = g.e), g.xfirst || g
                    },
                    oa = 9;
                for (i = ma.prototype, i.l = i.pr = 0; --oa > 0;) i["xn" + oa] = 0, i["xs" + oa] = "";
                i.xs0 = "", i._next = i._prev = i.xfirst = i.data = i.plugin = i.setRatio = i.rxp = null, i.appendXtra = function(a, b, c, d, e, f) {
                    var g = this,
                        h = g.l;
                    return g["xs" + h] += f && h ? " " + a : a || "", c || 0 === h || g.plugin ? (g.l++, g.type = g.setRatio ? 2 : 1, g["xs" + g.l] = d || "", h > 0 ? (g.data["xn" + h] = b + c, g.rxp["xn" + h] = e, g["xn" + h] = b, g.plugin || (g.xfirst = new ma(g, "xn" + h, b, c, g.xfirst || g, 0, g.n, e, g.pr), g.xfirst.xs0 = 0), g) : (g.data = {
                        s: b + c
                    }, g.rxp = {}, g.s = b, g.c = c, g.r = e, g)) : (g["xs" + h] += b + (d || ""), g)
                };
                var pa = function(a, b) {
                        b = b || {}, this.p = b.prefix ? T(a) || a : a, h[a] = h[this.p] = this, this.format = b.formatter || ja(b.defaultValue, b.color, b.collapsible, b.multi), b.parser && (this.parse = b.parser), this.clrs = b.color, this.multi = b.multi, this.keyword = b.keyword, this.dflt = b.defaultValue, this.pr = b.priority || 0
                    },
                    qa = M._registerComplexSpecialProp = function(a, b, c) {
                        "object" != typeof b && (b = {
                            parser: c
                        });
                        var d, e, f = a.split(","),
                            g = b.defaultValue;
                        for (c = c || [g], d = 0; d < f.length; d++) b.prefix = 0 === d && b.prefix, b.defaultValue = c[d] || g, e = new pa(f[d], b)
                    },
                    ra = function(a) {
                        if (!h[a]) {
                            var b = a.charAt(0).toUpperCase() + a.substr(1) + "Plugin";
                            qa(a, {
                                parser: function(a, c, d, e, f, g, i) {
                                    var j = (window.GreenSockGlobals || window).com.greensock.plugins[b];
                                    return j ? (j._cssRegister(), h[d].parse(a, c, d, e, f, g, i)) : (Q("Error: " + b + " js file not loaded."), f)
                                }
                            })
                        }
                    };
                i = pa.prototype, i.parseComplex = function(a, b, c, d, e, f) {
                    var g, h, i, j, k, l, m = this.keyword;
                    if (this.multi && (F.test(c) || F.test(b) ? (h = b.replace(F, "|").split("|"), i = c.replace(F, "|").split("|")) : m && (h = [b], i = [c])), i) {
                        for (j = i.length > h.length ? i.length : h.length, g = 0; j > g; g++) b = h[g] = h[g] || this.dflt, c = i[g] = i[g] || this.dflt, m && (k = b.indexOf(m), l = c.indexOf(m), k !== l && (c = -1 === l ? i : h, c[g] += " " + m));
                        b = h.join(", "), c = i.join(", ")
                    }
                    return na(a, this.p, b, c, this.clrs, this.dflt, d, this.pr, e, f)
                }, i.parse = function(a, b, c, d, f, g) {
                    return this.parseComplex(a.style, this.format(V(a, this.p, e, !1, this.dflt)), this.format(b), f, g)
                }, g.registerSpecialProp = function(a, b, c) {
                    qa(a, {
                        parser: function(a, d, e, f, g, h) {
                            var i = new ma(a, e, 0, 0, g, 2, e, !1, c);
                            return i.plugin = h, i.setRatio = b(a, d, f._tween, e), i
                        },
                        priority: c
                    })
                };
                var sa = "scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective".split(","),
                    ta = T("transform"),
                    ua = R + "transform",
                    va = T("transformOrigin"),
                    wa = null !== T("perspective"),
                    xa = M.Transform = function() {
                        this.skewY = 0
                    },
                    ya = M.getTransform = function(a, b, c, d) {
                        if (a._gsTransform && c && !d) return a._gsTransform;
                        var e, f, h, i, j, k, l, m, n, o, p, q, r, s = c ? a._gsTransform || new xa : new xa,
                            t = s.scaleX < 0,
                            u = 2e-5,
                            v = 1e5,
                            w = 179.99,
                            x = w * G,
                            y = wa ? parseFloat(V(a, va, b, !1, "0 0 0").split(" ")[2]) || s.zOrigin || 0 : 0;
                        for (ta ? e = V(a, ua, b, !0) : a.currentStyle && (e = a.currentStyle.filter.match(D), e = e && 4 === e.length ? [e[0].substr(4), Number(e[2].substr(4)), Number(e[1].substr(4)), e[3].substr(4), s.x || 0, s.y || 0].join(",") : ""), f = (e || "").match(/(?:\-|\b)[\d\-\.e]+\b/gi) || [], h = f.length; --h > -1;) i = Number(f[h]), f[h] = (j = i - (i |= 0)) ? (j * v + (0 > j ? -.5 : .5) | 0) / v + i : i;
                        if (16 === f.length) {
                            var z = f[8],
                                A = f[9],
                                B = f[10],
                                C = f[12],
                                E = f[13],
                                F = f[14];
                            if (s.zOrigin && (F = -s.zOrigin, C = z * F - f[12], E = A * F - f[13], F = B * F + s.zOrigin - f[14]), !c || d || null == s.rotationX) {
                                var I, J, K, L, M, N, O, P = f[0],
                                    Q = f[1],
                                    R = f[2],
                                    S = f[3],
                                    T = f[4],
                                    U = f[5],
                                    W = f[6],
                                    X = f[7],
                                    Y = f[11],
                                    Z = Math.atan2(W, B),
                                    $ = -x > Z || Z > x;
                                s.rotationX = Z * H, Z && (L = Math.cos(-Z), M = Math.sin(-Z), I = T * L + z * M, J = U * L + A * M, K = W * L + B * M, z = T * -M + z * L, A = U * -M + A * L, B = W * -M + B * L, Y = X * -M + Y * L, T = I, U = J, W = K), Z = Math.atan2(z, P), s.rotationY = Z * H, Z && (N = -x > Z || Z > x, L = Math.cos(-Z), M = Math.sin(-Z), I = P * L - z * M, J = Q * L - A * M, K = R * L - B * M, A = Q * M + A * L, B = R * M + B * L, Y = S * M + Y * L, P = I, Q = J, R = K), Z = Math.atan2(Q, U), s.rotation = Z * H, Z && (O = -x > Z || Z > x, L = Math.cos(-Z), M = Math.sin(-Z), P = P * L + T * M, J = Q * L + U * M, U = Q * -M + U * L, W = R * -M + W * L, Q = J), O && $ ? s.rotation = s.rotationX = 0 : O && N ? s.rotation = s.rotationY = 0 : N && $ && (s.rotationY = s.rotationX = 0), s.scaleX = (Math.sqrt(P * P + Q * Q) * v + .5 | 0) / v, s.scaleY = (Math.sqrt(U * U + A * A) * v + .5 | 0) / v, s.scaleZ = (Math.sqrt(W * W + B * B) * v + .5 | 0) / v, s.skewX = 0, s.perspective = Y ? 1 / (0 > Y ? -Y : Y) : 0, s.x = C, s.y = E, s.z = F
                            }
                        } else if (!(wa && !d && f.length && s.x === f[4] && s.y === f[5] && (s.rotationX || s.rotationY) || void 0 !== s.x && "none" === V(a, "display", b))) {
                            var _ = f.length >= 6,
                                aa = _ ? f[0] : 1,
                                ba = f[1] || 0,
                                ca = f[2] || 0,
                                da = _ ? f[3] : 1;
                            s.x = f[4] || 0, s.y = f[5] || 0, k = Math.sqrt(aa * aa + ba * ba), l = Math.sqrt(da * da + ca * ca), m = aa || ba ? Math.atan2(ba, aa) * H : s.rotation || 0, n = ca || da ? Math.atan2(ca, da) * H + m : s.skewX || 0, o = k - Math.abs(s.scaleX || 0), p = l - Math.abs(s.scaleY || 0), Math.abs(n) > 90 && Math.abs(n) < 270 && (t ? (k *= -1, n += 0 >= m ? 180 : -180, m += 0 >= m ? 180 : -180) : (l *= -1, n += 0 >= n ? 180 : -180)), q = (m - s.rotation) % 180, r = (n - s.skewX) % 180, (void 0 === s.skewX || o > u || -u > o || p > u || -u > p || q > -w && w > q && q * v | !1 || r > -w && w > r && r * v | !1) && (s.scaleX = k, s.scaleY = l, s.rotation = m, s.skewX = n), wa && (s.rotationX = s.rotationY = s.z = 0, s.perspective = parseFloat(g.defaultTransformPerspective) || 0, s.scaleZ = 1)
                        }
                        s.zOrigin = y;
                        for (h in s) s[h] < u && s[h] > -u && (s[h] = 0);
                        return c && (a._gsTransform = s), s
                    },
                    za = function(a) {
                        var b, c, d = this.data,
                            e = -d.rotation * G,
                            f = e + d.skewX * G,
                            g = 1e5,
                            h = (Math.cos(e) * d.scaleX * g | 0) / g,
                            i = (Math.sin(e) * d.scaleX * g | 0) / g,
                            j = (Math.sin(f) * -d.scaleY * g | 0) / g,
                            k = (Math.cos(f) * d.scaleY * g | 0) / g,
                            l = this.t.style,
                            m = this.t.currentStyle;
                        if (m) {
                            c = i, i = -j, j = -c, b = m.filter, l.filter = "";
                            var n, p, q = this.t.offsetWidth,
                                r = this.t.offsetHeight,
                                s = "absolute" !== m.position,
                                v = "progid:DXImageTransform.Microsoft.Matrix(M11=" + h + ", M12=" + i + ", M21=" + j + ", M22=" + k,
                                w = d.x,
                                x = d.y;
                            if (null != d.ox && (n = (d.oxp ? q * d.ox * .01 : d.ox) - q / 2, p = (d.oyp ? r * d.oy * .01 : d.oy) - r / 2, w += n - (n * h + p * i), x += p - (n * j + p * k)), s ? (n = q / 2, p = r / 2, v += ", Dx=" + (n - (n * h + p * i) + w) + ", Dy=" + (p - (n * j + p * k) + x) + ")") : v += ", sizingMethod='auto expand')", l.filter = -1 !== b.indexOf("DXImageTransform.Microsoft.Matrix(") ? b.replace(E, v) : v + " " + b, (0 === a || 1 === a) && 1 === h && 0 === i && 0 === j && 1 === k && (s && -1 === v.indexOf("Dx=0, Dy=0") || u.test(b) && 100 !== parseFloat(RegExp.$1) || -1 === b.indexOf("gradient(" && b.indexOf("Alpha")) && l.removeAttribute("filter")), !s) {
                                var y, z, A, B = 8 > o ? 1 : -1;
                                for (n = d.ieOffsetX || 0, p = d.ieOffsetY || 0, d.ieOffsetX = Math.round((q - ((0 > h ? -h : h) * q + (0 > i ? -i : i) * r)) / 2 + w), d.ieOffsetY = Math.round((r - ((0 > k ? -k : k) * r + (0 > j ? -j : j) * q)) / 2 + x), oa = 0; 4 > oa; oa++) z = _[oa], y = m[z], c = -1 !== y.indexOf("px") ? parseFloat(y) : W(this.t, z, parseFloat(y), y.replace(t, "")) || 0, A = c !== d[z] ? 2 > oa ? -d.ieOffsetX : -d.ieOffsetY : 2 > oa ? n - d.ieOffsetX : p - d.ieOffsetY, l[z] = (d[z] = Math.round(c - A * (0 === oa || 2 === oa ? 1 : B))) + "px"
                            }
                        }
                    },
                    Aa = M.set3DTransformRatio = function(a) {
                        var b, c, d, e, f, g, h, i, j, k, l, n, o, p, q, r, s, t, u, v, w, x, y, z = this.data,
                            A = this.t.style,
                            B = z.rotation * G,
                            C = z.scaleX,
                            D = z.scaleY,
                            E = z.scaleZ,
                            F = z.perspective;
                        if ((1 === a || 0 === a) && "auto" === z.force3D && !(z.rotationY || z.rotationX || 1 !== E || F || z.z)) return void Ba.call(this, a);
                        if (m) {
                            var H = 1e-4;
                            H > C && C > -H && (C = E = 2e-5), H > D && D > -H && (D = E = 2e-5), !F || z.z || z.rotationX || z.rotationY || (F = 0)
                        }
                        if (B || z.skewX) t = Math.cos(B), u = Math.sin(B), b = t, f = u, z.skewX && (B -= z.skewX * G, t = Math.cos(B), u = Math.sin(B), "simple" === z.skewType && (v = Math.tan(z.skewX * G), v = Math.sqrt(1 + v * v), t *= v, u *= v)), c = -u, g = t;
                        else {
                            if (!(z.rotationY || z.rotationX || 1 !== E || F)) return void(A[ta] = "translate3d(" + z.x + "px," + z.y + "px," + z.z + "px)" + (1 !== C || 1 !== D ? " scale(" + C + "," + D + ")" : ""));
                            b = g = 1, c = f = 0
                        }
                        l = 1, d = e = h = i = j = k = n = o = p = 0, q = F ? -1 / F : 0, r = z.zOrigin, s = 1e5, B = z.rotationY * G, B && (t = Math.cos(B), u = Math.sin(B), j = l * -u, o = q * -u, d = b * u, h = f * u, l *= t, q *= t, b *= t, f *= t), B = z.rotationX * G, B && (t = Math.cos(B), u = Math.sin(B), v = c * t + d * u, w = g * t + h * u, x = k * t + l * u, y = p * t + q * u, d = c * -u + d * t, h = g * -u + h * t, l = k * -u + l * t, q = p * -u + q * t, c = v, g = w, k = x, p = y), 1 !== E && (d *= E, h *= E, l *= E, q *= E), 1 !== D && (c *= D, g *= D, k *= D, p *= D), 1 !== C && (b *= C, f *= C, j *= C, o *= C), r && (n -= r, e = d * n, i = h * n, n = l * n + r), e = (v = (e += z.x) - (e |= 0)) ? (v * s + (0 > v ? -.5 : .5) | 0) / s + e : e, i = (v = (i += z.y) - (i |= 0)) ? (v * s + (0 > v ? -.5 : .5) | 0) / s + i : i, n = (v = (n += z.z) - (n |= 0)) ? (v * s + (0 > v ? -.5 : .5) | 0) / s + n : n, A[ta] = "matrix3d(" + [(b * s | 0) / s, (f * s | 0) / s, (j * s | 0) / s, (o * s | 0) / s, (c * s | 0) / s, (g * s | 0) / s, (k * s | 0) / s, (p * s | 0) / s, (d * s | 0) / s, (h * s | 0) / s, (l * s | 0) / s, (q * s | 0) / s, e, i, n, F ? 1 + -n / F : 1].join(",") + ")"
                    },
                    Ba = M.set2DTransformRatio = function(a) {
                        var b, c, d, e, f, g = this.data,
                            h = this.t,
                            i = h.style;
                        return g.rotationX || g.rotationY || g.z || g.force3D === !0 || "auto" === g.force3D && 1 !== a && 0 !== a ? (this.setRatio = Aa, void Aa.call(this, a)) : void(g.rotation || g.skewX ? (b = g.rotation * G, c = b - g.skewX * G, d = 1e5, e = g.scaleX * d, f = g.scaleY * d, i[ta] = "matrix(" + (Math.cos(b) * e | 0) / d + "," + (Math.sin(b) * e | 0) / d + "," + (Math.sin(c) * -f | 0) / d + "," + (Math.cos(c) * f | 0) / d + "," + g.x + "," + g.y + ")") : i[ta] = "matrix(" + g.scaleX + ",0,0," + g.scaleY + "," + g.x + "," + g.y + ")")
                    };
                qa("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType", {
                    parser: function(a, b, c, d, f, h, i) {
                        if (d._transform) return f;
                        var j, k, l, m, n, o, p, q = d._transform = ya(a, e, !0, i.parseTransform),
                            r = a.style,
                            s = 1e-6,
                            t = sa.length,
                            u = i,
                            v = {};
                        if ("string" == typeof u.transform && ta) l = K.style, l[ta] = u.transform, l.display = "block", l.position = "absolute", J.body.appendChild(K), j = ya(K, null, !1), J.body.removeChild(K);
                        else if ("object" == typeof u) {
                            if (j = {
                                    scaleX: da(null != u.scaleX ? u.scaleX : u.scale, q.scaleX),
                                    scaleY: da(null != u.scaleY ? u.scaleY : u.scale, q.scaleY),
                                    scaleZ: da(u.scaleZ, q.scaleZ),
                                    x: da(u.x, q.x),
                                    y: da(u.y, q.y),
                                    z: da(u.z, q.z),
                                    perspective: da(u.transformPerspective, q.perspective)
                                }, p = u.directionalRotation, null != p)
                                if ("object" == typeof p)
                                    for (l in p) u[l] = p[l];
                                else u.rotation = p;
                            j.rotation = ea("rotation" in u ? u.rotation : "shortRotation" in u ? u.shortRotation + "_short" : "rotationZ" in u ? u.rotationZ : q.rotation, q.rotation, "rotation", v), wa && (j.rotationX = ea("rotationX" in u ? u.rotationX : "shortRotationX" in u ? u.shortRotationX + "_short" : q.rotationX || 0, q.rotationX, "rotationX", v), j.rotationY = ea("rotationY" in u ? u.rotationY : "shortRotationY" in u ? u.shortRotationY + "_short" : q.rotationY || 0, q.rotationY, "rotationY", v)), j.skewX = null == u.skewX ? q.skewX : ea(u.skewX, q.skewX), j.skewY = null == u.skewY ? q.skewY : ea(u.skewY, q.skewY), (k = j.skewY - q.skewY) && (j.skewX += k, j.rotation += k)
                        }
                        for (wa && null != u.force3D && (q.force3D = u.force3D, o = !0), q.skewType = u.skewType || q.skewType || g.defaultSkewType, n = q.force3D || q.z || q.rotationX || q.rotationY || j.z || j.rotationX || j.rotationY || j.perspective, n || null == u.scale || (j.scaleZ = 1); --t > -1;) c = sa[t], m = j[c] - q[c], (m > s || -s > m || null != I[c]) && (o = !0, f = new ma(q, c, q[c], m, f), c in v && (f.e = v[c]), f.xs0 = 0, f.plugin = h, d._overwriteProps.push(f.n));
                        return m = u.transformOrigin, (m || wa && n && q.zOrigin) && (ta ? (o = !0, c = va, m = (m || V(a, c, e, !1, "50% 50%")) + "", f = new ma(r, c, 0, 0, f, -1, "transformOrigin"), f.b = r[c], f.plugin = h, wa ? (l = q.zOrigin, m = m.split(" "), q.zOrigin = (m.length > 2 && (0 === l || "0px" !== m[2]) ? parseFloat(m[2]) : l) || 0, f.xs0 = f.e = m[0] + " " + (m[1] || "50%") + " 0px", f = new ma(q, "zOrigin", 0, 0, f, -1, f.n), f.b = l, f.xs0 = f.e = q.zOrigin) : f.xs0 = f.e = m) : ba(m + "", q)), o && (d._transformType = n || 3 === this._transformType ? 3 : 2), f
                    },
                    prefix: !0
                }), qa("boxShadow", {
                    defaultValue: "0px 0px 0px 0px #999",
                    prefix: !0,
                    color: !0,
                    multi: !0,
                    keyword: "inset"
                }), qa("borderRadius", {
                    defaultValue: "0px",
                    parser: function(a, b, c, f, g) {
                        b = this.format(b);
                        var h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x = ["borderTopLeftRadius", "borderTopRightRadius", "borderBottomRightRadius", "borderBottomLeftRadius"],
                            y = a.style;
                        for (p = parseFloat(a.offsetWidth), q = parseFloat(a.offsetHeight), h = b.split(" "), i = 0; i < x.length; i++) this.p.indexOf("border") && (x[i] = T(x[i])), l = k = V(a, x[i], e, !1, "0px"), -1 !== l.indexOf(" ") && (k = l.split(" "), l = k[0], k = k[1]), m = j = h[i], n = parseFloat(l), s = l.substr((n + "").length), t = "=" === m.charAt(1), t ? (o = parseInt(m.charAt(0) + "1", 10), m = m.substr(2), o *= parseFloat(m), r = m.substr((o + "").length - (0 > o ? 1 : 0)) || "") : (o = parseFloat(m), r = m.substr((o + "").length)), "" === r && (r = d[c] || s), r !== s && (u = W(a, "borderLeft", n, s), v = W(a, "borderTop", n, s), "%" === r ? (l = u / p * 100 + "%", k = v / q * 100 + "%") : "em" === r ? (w = W(a, "borderLeft", 1, "em"), l = u / w + "em", k = v / w + "em") : (l = u + "px", k = v + "px"), t && (m = parseFloat(l) + o + r, j = parseFloat(k) + o + r)), g = na(y, x[i], l + " " + k, m + " " + j, !1, "0px", g);
                        return g
                    },
                    prefix: !0,
                    formatter: ja("0px 0px 0px 0px", !1, !0)
                }), qa("backgroundPosition", {
                    defaultValue: "0 0",
                    parser: function(a, b, c, d, f, g) {
                        var h, i, j, k, l, m, n = "background-position",
                            p = e || U(a, null),
                            q = this.format((p ? o ? p.getPropertyValue(n + "-x") + " " + p.getPropertyValue(n + "-y") : p.getPropertyValue(n) : a.currentStyle.backgroundPositionX + " " + a.currentStyle.backgroundPositionY) || "0 0"),
                            r = this.format(b);
                        if (-1 !== q.indexOf("%") != (-1 !== r.indexOf("%")) && (m = V(a, "backgroundImage").replace(A, ""), m && "none" !== m)) {
                            for (h = q.split(" "), i = r.split(" "), L.setAttribute("src", m), j = 2; --j > -1;) q = h[j], k = -1 !== q.indexOf("%"), k !== (-1 !== i[j].indexOf("%")) && (l = 0 === j ? a.offsetWidth - L.width : a.offsetHeight - L.height, h[j] = k ? parseFloat(q) / 100 * l + "px" : parseFloat(q) / l * 100 + "%");
                            q = h.join(" ")
                        }
                        return this.parseComplex(a.style, q, r, f, g)
                    },
                    formatter: ba
                }), qa("backgroundSize", {
                    defaultValue: "0 0",
                    formatter: ba
                }), qa("perspective", {
                    defaultValue: "0px",
                    prefix: !0
                }), qa("perspectiveOrigin", {
                    defaultValue: "50% 50%",
                    prefix: !0
                }), qa("transformStyle", {
                    prefix: !0
                }), qa("backfaceVisibility", {
                    prefix: !0
                }), qa("userSelect", {
                    prefix: !0
                }), qa("margin", {
                    parser: ka("marginTop,marginRight,marginBottom,marginLeft")
                }), qa("padding", {
                    parser: ka("paddingTop,paddingRight,paddingBottom,paddingLeft")
                }), qa("clip", {
                    defaultValue: "rect(0px,0px,0px,0px)",
                    parser: function(a, b, c, d, f, g) {
                        var h, i, j;
                        return 9 > o ? (i = a.currentStyle, j = 8 > o ? " " : ",", h = "rect(" + i.clipTop + j + i.clipRight + j + i.clipBottom + j + i.clipLeft + ")", b = this.format(b).split(",").join(j)) : (h = this.format(V(a, this.p, e, !1, this.dflt)), b = this.format(b)), this.parseComplex(a.style, h, b, f, g)
                    }
                }), qa("textShadow", {
                    defaultValue: "0px 0px 0px #999",
                    color: !0,
                    multi: !0
                }), qa("autoRound,strictUnits", {
                    parser: function(a, b, c, d, e) {
                        return e
                    }
                }), qa("border", {
                    defaultValue: "0px solid #000",
                    parser: function(a, b, c, d, f, g) {
                        return this.parseComplex(a.style, this.format(V(a, "borderTopWidth", e, !1, "0px") + " " + V(a, "borderTopStyle", e, !1, "solid") + " " + V(a, "borderTopColor", e, !1, "#000")), this.format(b), f, g)
                    },
                    color: !0,
                    formatter: function(a) {
                        var b = a.split(" ");
                        return b[0] + " " + (b[1] || "solid") + " " + (a.match(ia) || ["#000"])[0]
                    }
                }), qa("borderWidth", {
                    parser: ka("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")
                }), qa("float,cssFloat,styleFloat", {
                    parser: function(a, b, c, d, e) {
                        var f = a.style,
                            g = "cssFloat" in f ? "cssFloat" : "styleFloat";
                        return new ma(f, g, 0, 0, e, -1, c, !1, 0, f[g], b)
                    }
                });
                var Ca = function(a) {
                    var b, c = this.t,
                        d = c.filter || V(this.data, "filter"),
                        e = this.s + this.c * a | 0;
                    100 === e && (-1 === d.indexOf("atrix(") && -1 === d.indexOf("radient(") && -1 === d.indexOf("oader(") ? (c.removeAttribute("filter"), b = !V(this.data, "filter")) : (c.filter = d.replace(w, ""), b = !0)), b || (this.xn1 && (c.filter = d = d || "alpha(opacity=" + e + ")"), -1 === d.indexOf("pacity") ? 0 === e && this.xn1 || (c.filter = d + " alpha(opacity=" + e + ")") : c.filter = d.replace(u, "opacity=" + e))
                };
                qa("opacity,alpha,autoAlpha", {
                    defaultValue: "1",
                    parser: function(a, b, c, d, f, g) {
                        var h = parseFloat(V(a, "opacity", e, !1, "1")),
                            i = a.style,
                            j = "autoAlpha" === c;
                        return "string" == typeof b && "=" === b.charAt(1) && (b = ("-" === b.charAt(0) ? -1 : 1) * parseFloat(b.substr(2)) + h), j && 1 === h && "hidden" === V(a, "visibility", e) && 0 !== b && (h = 0), O ? f = new ma(i, "opacity", h, b - h, f) : (f = new ma(i, "opacity", 100 * h, 100 * (b - h), f), f.xn1 = j ? 1 : 0, i.zoom = 1, f.type = 2, f.b = "alpha(opacity=" + f.s + ")", f.e = "alpha(opacity=" + (f.s + f.c) + ")", f.data = a, f.plugin = g, f.setRatio = Ca), j && (f = new ma(i, "visibility", 0, 0, f, -1, null, !1, 0, 0 !== h ? "inherit" : "hidden", 0 === b ? "hidden" : "inherit"), f.xs0 = "inherit", d._overwriteProps.push(f.n), d._overwriteProps.push(c)), f
                    }
                });
                var Da = function(a, b) {
                        b && (a.removeProperty ? ("ms" === b.substr(0, 2) && (b = "M" + b.substr(1)), a.removeProperty(b.replace(y, "-$1").toLowerCase())) : a.removeAttribute(b))
                    },
                    Ea = function(a) {
                        if (this.t._gsClassPT = this, 1 === a || 0 === a) {
                            this.t.setAttribute("class", 0 === a ? this.b : this.e);
                            for (var b = this.data, c = this.t.style; b;) b.v ? c[b.p] = b.v : Da(c, b.p), b = b._next;
                            1 === a && this.t._gsClassPT === this && (this.t._gsClassPT = null)
                        } else this.t.getAttribute("class") !== this.e && this.t.setAttribute("class", this.e)
                    };
                qa("className", {
                    parser: function(a, b, d, f, g, h, i) {
                        var j, k, l, m, n, o = a.getAttribute("class") || "",
                            p = a.style.cssText;
                        if (g = f._classNamePT = new ma(a, d, 0, 0, g, 2), g.setRatio = Ea, g.pr = -11, c = !0, g.b = o, k = Y(a, e), l = a._gsClassPT) {
                            for (m = {}, n = l.data; n;) m[n.p] = 1, n = n._next;
                            l.setRatio(1)
                        }
                        return a._gsClassPT = g, g.e = "=" !== b.charAt(1) ? b : o.replace(new RegExp("\\s*\\b" + b.substr(2) + "\\b"), "") + ("+" === b.charAt(0) ? " " + b.substr(2) : ""), f._tween._duration && (a.setAttribute("class", g.e), j = Z(a, k, Y(a), i, m), a.setAttribute("class", o), g.data = j.firstMPT, a.style.cssText = p, g = g.xfirst = f.parse(a, j.difs, g, h)), g
                    }
                });
                var Fa = function(a) {
                    if ((1 === a || 0 === a) && this.data._totalTime === this.data._totalDuration && "isFromStart" !== this.data.data) {
                        var b, c, d, e, f = this.t.style,
                            g = h.transform.parse;
                        if ("all" === this.e) f.cssText = "", e = !0;
                        else
                            for (b = this.e.split(","), d = b.length; --d > -1;) c = b[d], h[c] && (h[c].parse === g ? e = !0 : c = "transformOrigin" === c ? va : h[c].p), Da(f, c);
                        e && (Da(f, ta), this.t._gsTransform && delete this.t._gsTransform)
                    }
                };
                for (qa("clearProps", {
                        parser: function(a, b, d, e, f) {
                            return f = new ma(a, d, 0, 0, f, 2), f.setRatio = Fa, f.e = b, f.pr = -10, f.data = e._tween, c = !0, f
                        }
                    }), i = "bezier,throwProps,physicsProps,physics2D".split(","), oa = i.length; oa--;) ra(i[oa]);
                i = g.prototype, i._firstPT = null, i._onInitTween = function(a, b, h) {
                    if (!a.nodeType) return !1;
                    this._target = a, this._tween = h, this._vars = b, j = b.autoRound, c = !1, d = b.suffixMap || g.suffixMap, e = U(a, ""), f = this._overwriteProps;
                    var i, m, o, p, q, r, s, t, u, w = a.style;
                    if (k && "" === w.zIndex && (i = V(a, "zIndex", e), ("auto" === i || "" === i) && this._addLazySet(w, "zIndex", 0)), "string" == typeof b && (p = w.cssText, i = Y(a, e), w.cssText = p + ";" + b, i = Z(a, i, Y(a)).difs, !O && v.test(b) && (i.opacity = parseFloat(RegExp.$1)), b = i, w.cssText = p), this._firstPT = m = this.parse(a, b, null), this._transformType) {
                        for (u = 3 === this._transformType, ta ? l && (k = !0, "" === w.zIndex && (s = V(a, "zIndex", e), ("auto" === s || "" === s) && this._addLazySet(w, "zIndex", 0)), n && this._addLazySet(w, "WebkitBackfaceVisibility", this._vars.WebkitBackfaceVisibility || (u ? "visible" : "hidden"))) : w.zoom = 1, o = m; o && o._next;) o = o._next;
                        t = new ma(a, "transform", 0, 0, null, 2), this._linkCSSP(t, null, o), t.setRatio = u && wa ? Aa : ta ? Ba : za, t.data = this._transform || ya(a, e, !0), f.pop()
                    }
                    if (c) {
                        for (; m;) {
                            for (r = m._next, o = p; o && o.pr > m.pr;) o = o._next;
                            (m._prev = o ? o._prev : q) ? m._prev._next = m: p = m, (m._next = o) ? o._prev = m : q = m, m = r
                        }
                        this._firstPT = p
                    }
                    return !0
                }, i.parse = function(a, b, c, f) {
                    var g, i, k, l, m, n, o, p, q, r, s = a.style;
                    for (g in b) n = b[g], i = h[g], i ? c = i.parse(a, n, g, this, c, f, b) : (m = V(a, g, e) + "", q = "string" == typeof n, "color" === g || "fill" === g || "stroke" === g || -1 !== g.indexOf("Color") || q && x.test(n) ? (q || (n = ha(n), n = (n.length > 3 ? "rgba(" : "rgb(") + n.join(",") + ")"), c = na(s, g, m, n, !0, "transparent", c, 0, f)) : !q || -1 === n.indexOf(" ") && -1 === n.indexOf(",") ? (k = parseFloat(m), o = k || 0 === k ? m.substr((k + "").length) : "", ("" === m || "auto" === m) && ("width" === g || "height" === g ? (k = aa(a, g, e), o = "px") : "left" === g || "top" === g ? (k = X(a, g, e), o = "px") : (k = "opacity" !== g ? 0 : 1, o = "")), r = q && "=" === n.charAt(1), r ? (l = parseInt(n.charAt(0) + "1", 10), n = n.substr(2), l *= parseFloat(n), p = n.replace(t, "")) : (l = parseFloat(n), p = q ? n.substr((l + "").length) || "" : ""), "" === p && (p = g in d ? d[g] : o), n = l || 0 === l ? (r ? l + k : l) + p : b[g], o !== p && "" !== p && (l || 0 === l) && k && (k = W(a, g, k, o), "%" === p ? (k /= W(a, g, 100, "%") / 100, b.strictUnits !== !0 && (m = k + "%")) : "em" === p ? k /= W(a, g, 1, "em") : "px" !== p && (l = W(a, g, l, p), p = "px"), r && (l || 0 === l) && (n = l + k + p)), r && (l += k), !k && 0 !== k || !l && 0 !== l ? void 0 !== s[g] && (n || n + "" != "NaN" && null != n) ? (c = new ma(s, g, l || k || 0, 0, c, -1, g, !1, 0, m, n), c.xs0 = "none" !== n || "display" !== g && -1 === g.indexOf("Style") ? n : m) : Q("invalid " + g + " tween value: " + b[g]) : (c = new ma(s, g, k, l - k, c, 0, g, j !== !1 && ("px" === p || "zIndex" === g), 0, m, n), c.xs0 = p)) : c = na(s, g, m, n, !0, null, c, 0, f)), f && c && !c.plugin && (c.plugin = f);
                    return c
                }, i.setRatio = function(a) {
                    var b, c, d, e = this._firstPT,
                        f = 1e-6;
                    if (1 !== a || this._tween._time !== this._tween._duration && 0 !== this._tween._time)
                        if (a || this._tween._time !== this._tween._duration && 0 !== this._tween._time || this._tween._rawPrevTime === -1e-6)
                            for (; e;) {
                                if (b = e.c * a + e.s, e.r ? b = Math.round(b) : f > b && b > -f && (b = 0), e.type)
                                    if (1 === e.type)
                                        if (d = e.l, 2 === d) e.t[e.p] = e.xs0 + b + e.xs1 + e.xn1 + e.xs2;
                                        else if (3 === d) e.t[e.p] = e.xs0 + b + e.xs1 + e.xn1 + e.xs2 + e.xn2 + e.xs3;
                                else if (4 === d) e.t[e.p] = e.xs0 + b + e.xs1 + e.xn1 + e.xs2 + e.xn2 + e.xs3 + e.xn3 + e.xs4;
                                else if (5 === d) e.t[e.p] = e.xs0 + b + e.xs1 + e.xn1 + e.xs2 + e.xn2 + e.xs3 + e.xn3 + e.xs4 + e.xn4 + e.xs5;
                                else {
                                    for (c = e.xs0 + b + e.xs1, d = 1; d < e.l; d++) c += e["xn" + d] + e["xs" + (d + 1)];
                                    e.t[e.p] = c
                                } else -1 === e.type ? e.t[e.p] = e.xs0 : e.setRatio && e.setRatio(a);
                                else e.t[e.p] = b + e.xs0;
                                e = e._next
                            } else
                                for (; e;) 2 !== e.type ? e.t[e.p] = e.b : e.setRatio(a), e = e._next;
                        else
                            for (; e;) 2 !== e.type ? e.t[e.p] = e.e : e.setRatio(a), e = e._next
                }, i._enableTransforms = function(a) {
                    this._transformType = a || 3 === this._transformType ? 3 : 2, this._transform = this._transform || ya(this._target, e, !0)
                };
                var Ga = function() {
                    this.t[this.p] = this.e, this.data._linkCSSP(this, this._next, null, !0)
                };
                i._addLazySet = function(a, b, c) {
                    var d = this._firstPT = new ma(a, b, 0, 0, this._firstPT, 2);
                    d.e = c, d.setRatio = Ga, d.data = this
                }, i._linkCSSP = function(a, b, c, d) {
                    return a && (b && (b._prev = a), a._next && (a._next._prev = a._prev), a._prev ? a._prev._next = a._next : this._firstPT === a && (this._firstPT = a._next, d = !0), c ? c._next = a : d || null !== this._firstPT || (this._firstPT = a), a._next = b, a._prev = c), a
                }, i._kill = function(b) {
                    var c, d, e, f = b;
                    if (b.autoAlpha || b.alpha) {
                        f = {};
                        for (d in b) f[d] = b[d];
                        f.opacity = 1, f.autoAlpha && (f.visibility = 1)
                    }
                    return b.className && (c = this._classNamePT) && (e = c.xfirst, e && e._prev ? this._linkCSSP(e._prev, c._next, e._prev._prev) : e === this._firstPT && (this._firstPT = c._next), c._next && this._linkCSSP(c._next, c._next._next, e._prev), this._classNamePT = null), a.prototype._kill.call(this, f)
                };
                var Ha = function(a, b, c) {
                    var d, e, f, g;
                    if (a.slice)
                        for (e = a.length; --e > -1;) Ha(a[e], b, c);
                    else
                        for (d = a.childNodes, e = d.length; --e > -1;) f = d[e], g = f.type, f.style && (b.push(Y(f)), c && c.push(f)), 1 !== g && 9 !== g && 11 !== g || !f.childNodes.length || Ha(f, b, c)
                };
                return g.cascadeTo = function(a, c, d) {
                    var e, f, g, h = b.to(a, c, d),
                        i = [h],
                        j = [],
                        k = [],
                        l = [],
                        m = b._internals.reservedProps;
                    for (a = h._targets || h.target, Ha(a, j, l), h.render(c, !0), Ha(a, k), h.render(0, !0), h._enabled(!0), e = l.length; --e > -1;)
                        if (f = Z(l[e], j[e], k[e]), f.firstMPT) {
                            f = f.difs;
                            for (g in d) m[g] && (f[g] = d[g]);
                            i.push(b.to(l[e], c, f))
                        }
                    return i
                }, a.activate([g]), g
            }, !0),
            function() {
                var a = window._gsDefine.plugin({
                        propName: "roundProps",
                        priority: -1,
                        API: 2,
                        init: function(a, b, c) {
                            return this._tween = c, !0
                        }
                    }),
                    b = a.prototype;
                b._onInitAllProps = function() {
                    for (var a, b, c, d = this._tween, e = d.vars.roundProps instanceof Array ? d.vars.roundProps : d.vars.roundProps.split(","), f = e.length, g = {}, h = d._propLookup.roundProps; --f > -1;) g[e[f]] = 1;
                    for (f = e.length; --f > -1;)
                        for (a = e[f], b = d._firstPT; b;) c = b._next, b.pg ? b.t._roundProps(g, !0) : b.n === a && (this._add(b.t, a, b.s, b.c), c && (c._prev = b._prev), b._prev ? b._prev._next = c : d._firstPT === b && (d._firstPT = c), b._next = b._prev = null, d._propLookup[a] = h), b = c;
                    return !1
                }, b._add = function(a, b, c, d) {
                    this._addTween(a, b, c, c + d, b, !0), this._overwriteProps.push(b)
                }
            }(), window._gsDefine.plugin({
                propName: "attr",
                API: 2,
                version: "0.3.2",
                init: function(a, b) {
                    var c, d, e;
                    if ("function" != typeof a.setAttribute) return !1;
                    this._target = a, this._proxy = {}, this._start = {}, this._end = {};
                    for (c in b) this._start[c] = this._proxy[c] = d = a.getAttribute(c), e = this._addTween(this._proxy, c, parseFloat(d), b[c], c), this._end[c] = e ? e.s + e.c : b[c], this._overwriteProps.push(c);
                    return !0
                },
                set: function(a) {
                    this._super.setRatio.call(this, a);
                    for (var b, c = this._overwriteProps, d = c.length, e = 1 === a ? this._end : a ? this._proxy : this._start; --d > -1;) b = c[d], this._target.setAttribute(b, e[b] + "")
                }
            }), window._gsDefine.plugin({
                propName: "directionalRotation",
                API: 2,
                version: "0.2.0",
                init: function(a, b) {
                    "object" != typeof b && (b = {
                        rotation: b
                    }), this.finals = {};
                    var c, d, e, f, g, h, i = b.useRadians === !0 ? 2 * Math.PI : 360,
                        j = 1e-6;
                    for (c in b) "useRadians" !== c && (h = (b[c] + "").split("_"), d = h[0], e = parseFloat("function" != typeof a[c] ? a[c] : a[c.indexOf("set") || "function" != typeof a["get" + c.substr(3)] ? c : "get" + c.substr(3)]()), f = this.finals[c] = "string" == typeof d && "=" === d.charAt(1) ? e + parseInt(d.charAt(0) + "1", 10) * Number(d.substr(2)) : Number(d) || 0, g = f - e, h.length && (d = h.join("_"), -1 !== d.indexOf("short") && (g %= i, g !== g % (i / 2) && (g = 0 > g ? g + i : g - i)), -1 !== d.indexOf("_cw") && 0 > g ? g = (g + 9999999999 * i) % i - (g / i | 0) * i : -1 !== d.indexOf("ccw") && g > 0 && (g = (g - 9999999999 * i) % i - (g / i | 0) * i)), (g > j || -j > g) && (this._addTween(a, c, e, e + g, c), this._overwriteProps.push(c)));
                    return !0
                },
                set: function(a) {
                    var b;
                    if (1 !== a) this._super.setRatio.call(this, a);
                    else
                        for (b = this._firstPT; b;) b.f ? b.t[b.p](this.finals[b.p]) : b.t[b.p] = this.finals[b.p], b = b._next
                }
            })._autoCSS = !0, window._gsDefine("easing.Back", ["easing.Ease"], function(a) {
                var b, c, d, e = window.GreenSockGlobals || window,
                    f = e.com.greensock,
                    g = 2 * Math.PI,
                    h = Math.PI / 2,
                    i = f._class,
                    j = function(b, c) {
                        var d = i("easing." + b, function() {}, !0),
                            e = d.prototype = new a;
                        return e.constructor = d, e.getRatio = c, d
                    },
                    k = a.register || function() {},
                    l = function(a, b, c, d) {
                        var e = i("easing." + a, {
                            easeOut: new b,
                            easeIn: new c,
                            easeInOut: new d
                        }, !0);
                        return k(e, a), e
                    },
                    m = function(a, b, c) {
                        this.t = a, this.v = b, c && (this.next = c, c.prev = this, this.c = c.v - b, this.gap = c.t - a)
                    },
                    n = function(b, c) {
                        var d = i("easing." + b, function(a) {
                                this._p1 = a || 0 === a ? a : 1.70158, this._p2 = 1.525 * this._p1
                            }, !0),
                            e = d.prototype = new a;
                        return e.constructor = d, e.getRatio = c, e.config = function(a) {
                            return new d(a)
                        }, d
                    },
                    o = l("Back", n("BackOut", function(a) {
                        return (a -= 1) * a * ((this._p1 + 1) * a + this._p1) + 1
                    }), n("BackIn", function(a) {
                        return a * a * ((this._p1 + 1) * a - this._p1)
                    }), n("BackInOut", function(a) {
                        return (a *= 2) < 1 ? .5 * a * a * ((this._p2 + 1) * a - this._p2) : .5 * ((a -= 2) * a * ((this._p2 + 1) * a + this._p2) + 2)
                    })),
                    p = i("easing.SlowMo", function(a, b, c) {
                        b = b || 0 === b ? b : .7, null == a ? a = .7 : a > 1 && (a = 1), this._p = 1 !== a ? b : 0, this._p1 = (1 - a) / 2, this._p2 = a, this._p3 = this._p1 + this._p2, this._calcEnd = c === !0
                    }, !0),
                    q = p.prototype = new a;
                return q.constructor = p, q.getRatio = function(a) {
                    var b = a + (.5 - a) * this._p;
                    return a < this._p1 ? this._calcEnd ? 1 - (a = 1 - a / this._p1) * a : b - (a = 1 - a / this._p1) * a * a * a * b : a > this._p3 ? this._calcEnd ? 1 - (a = (a - this._p3) / this._p1) * a : b + (a - b) * (a = (a - this._p3) / this._p1) * a * a * a : this._calcEnd ? 1 : b
                }, p.ease = new p(.7, .7), q.config = p.config = function(a, b, c) {
                    return new p(a, b, c)
                }, b = i("easing.SteppedEase", function(a) {
                    a = a || 1, this._p1 = 1 / a, this._p2 = a + 1
                }, !0), q = b.prototype = new a, q.constructor = b, q.getRatio = function(a) {
                    return 0 > a ? a = 0 : a >= 1 && (a = .999999999), (this._p2 * a >> 0) * this._p1
                }, q.config = b.config = function(a) {
                    return new b(a)
                }, c = i("easing.RoughEase", function(b) {
                    b = b || {};
                    for (var c, d, e, f, g, h, i = b.taper || "none", j = [], k = 0, l = 0 | (b.points || 20), n = l, o = b.randomize !== !1, p = b.clamp === !0, q = b.template instanceof a ? b.template : null, r = "number" == typeof b.strength ? .4 * b.strength : .4; --n > -1;) c = o ? Math.random() : 1 / l * n, d = q ? q.getRatio(c) : c, "none" === i ? e = r : "out" === i ? (f = 1 - c, e = f * f * r) : "in" === i ? e = c * c * r : .5 > c ? (f = 2 * c, e = f * f * .5 * r) : (f = 2 * (1 - c), e = f * f * .5 * r), o ? d += Math.random() * e - .5 * e : n % 2 ? d += .5 * e : d -= .5 * e, p && (d > 1 ? d = 1 : 0 > d && (d = 0)), j[k++] = {
                        x: c,
                        y: d
                    };
                    for (j.sort(function(a, b) {
                            return a.x - b.x
                        }), h = new m(1, 1, null), n = l; --n > -1;) g = j[n], h = new m(g.x, g.y, h);
                    this._prev = new m(0, 0, 0 !== h.t ? h : h.next)
                }, !0), q = c.prototype = new a, q.constructor = c, q.getRatio = function(a) {
                    var b = this._prev;
                    if (a > b.t) {
                        for (; b.next && a >= b.t;) b = b.next;
                        b = b.prev
                    } else
                        for (; b.prev && a <= b.t;) b = b.prev;
                    return this._prev = b, b.v + (a - b.t) / b.gap * b.c
                }, q.config = function(a) {
                    return new c(a)
                }, c.ease = new c, l("Bounce", j("BounceOut", function(a) {
                    return 1 / 2.75 > a ? 7.5625 * a * a : 2 / 2.75 > a ? 7.5625 * (a -= 1.5 / 2.75) * a + .75 : 2.5 / 2.75 > a ? 7.5625 * (a -= 2.25 / 2.75) * a + .9375 : 7.5625 * (a -= 2.625 / 2.75) * a + .984375
                }), j("BounceIn", function(a) {
                    return (a = 1 - a) < 1 / 2.75 ? 1 - 7.5625 * a * a : 2 / 2.75 > a ? 1 - (7.5625 * (a -= 1.5 / 2.75) * a + .75) : 2.5 / 2.75 > a ? 1 - (7.5625 * (a -= 2.25 / 2.75) * a + .9375) : 1 - (7.5625 * (a -= 2.625 / 2.75) * a + .984375)
                }), j("BounceInOut", function(a) {
                    var b = .5 > a;
                    return a = b ? 1 - 2 * a : 2 * a - 1, a = 1 / 2.75 > a ? 7.5625 * a * a : 2 / 2.75 > a ? 7.5625 * (a -= 1.5 / 2.75) * a + .75 : 2.5 / 2.75 > a ? 7.5625 * (a -= 2.25 / 2.75) * a + .9375 : 7.5625 * (a -= 2.625 / 2.75) * a + .984375, b ? .5 * (1 - a) : .5 * a + .5
                })), l("Circ", j("CircOut", function(a) {
                    return Math.sqrt(1 - (a -= 1) * a)
                }), j("CircIn", function(a) {
                    return -(Math.sqrt(1 - a * a) - 1)
                }), j("CircInOut", function(a) {
                    return (a *= 2) < 1 ? -.5 * (Math.sqrt(1 - a * a) - 1) : .5 * (Math.sqrt(1 - (a -= 2) * a) + 1)
                })), d = function(b, c, d) {
                    var e = i("easing." + b, function(a, b) {
                            this._p1 = a || 1, this._p2 = b || d, this._p3 = this._p2 / g * (Math.asin(1 / this._p1) || 0)
                        }, !0),
                        f = e.prototype = new a;
                    return f.constructor = e, f.getRatio = c, f.config = function(a, b) {
                        return new e(a, b)
                    }, e
                }, l("Elastic", d("ElasticOut", function(a) {
                    return this._p1 * Math.pow(2, -10 * a) * Math.sin((a - this._p3) * g / this._p2) + 1
                }, .3), d("ElasticIn", function(a) {
                    return -(this._p1 * Math.pow(2, 10 * (a -= 1)) * Math.sin((a - this._p3) * g / this._p2))
                }, .3), d("ElasticInOut", function(a) {
                    return (a *= 2) < 1 ? -.5 * this._p1 * Math.pow(2, 10 * (a -= 1)) * Math.sin((a - this._p3) * g / this._p2) : this._p1 * Math.pow(2, -10 * (a -= 1)) * Math.sin((a - this._p3) * g / this._p2) * .5 + 1
                }, .45)), l("Expo", j("ExpoOut", function(a) {
                    return 1 - Math.pow(2, -10 * a)
                }), j("ExpoIn", function(a) {
                    return Math.pow(2, 10 * (a - 1)) - .001
                }), j("ExpoInOut", function(a) {
                    return (a *= 2) < 1 ? .5 * Math.pow(2, 10 * (a - 1)) : .5 * (2 - Math.pow(2, -10 * (a - 1)))
                })), l("Sine", j("SineOut", function(a) {
                    return Math.sin(a * h)
                }), j("SineIn", function(a) {
                    return -Math.cos(a * h) + 1
                }), j("SineInOut", function(a) {
                    return -.5 * (Math.cos(Math.PI * a) - 1)
                })), i("easing.EaseLookup", {
                    find: function(b) {
                        return a.map[b]
                    }
                }, !0), k(e.SlowMo, "SlowMo", "ease,"), k(c, "RoughEase", "ease,"), k(b, "SteppedEase", "ease,"), o
            }, !0)
    }),
    function(a) {
        "use strict";
        var b = a.GreenSockGlobals || a;
        if (!b.TweenLite) {
            var c, d, e, f, g, h = function(a) {
                    var c, d = a.split("."),
                        e = b;
                    for (c = 0; c < d.length; c++) e[d[c]] = e = e[d[c]] || {};
                    return e
                },
                i = h("com.greensock"),
                j = 1e-10,
                k = [].slice,
                l = function() {},
                m = function() {
                    var a = Object.prototype.toString,
                        b = a.call([]);
                    return function(c) {
                        return null != c && (c instanceof Array || "object" == typeof c && !!c.push && a.call(c) === b)
                    }
                }(),
                n = {},
                o = function(c, d, e, f) {
                    this.sc = n[c] ? n[c].sc : [], n[c] = this, this.gsClass = null, this.func = e;
                    var g = [];
                    this.check = function(i) {
                        for (var j, k, l, m, p = d.length, q = p; --p > -1;)(j = n[d[p]] || new o(d[p], [])).gsClass ? (g[p] = j.gsClass, q--) : i && j.sc.push(this);
                        if (0 === q && e)
                            for (k = ("com.greensock." + c).split("."), l = k.pop(), m = h(k.join("."))[l] = this.gsClass = e.apply(e, g), f && (b[l] = m, "function" == typeof define && define.amd ? define((a.GreenSockAMDPath ? a.GreenSockAMDPath + "/" : "") + c.split(".").join("/"), [], function() {
                                    return m
                                }) : "undefined" != typeof module && module.exports && (module.exports = m)), p = 0; p < this.sc.length; p++) this.sc[p].check()
                    }, this.check(!0)
                },
                p = a._gsDefine = function(a, b, c, d) {
                    return new o(a, b, c, d)
                },
                q = i._class = function(a, b, c) {
                    return b = b || function() {}, p(a, [], function() {
                        return b
                    }, c), b
                };
            p.globals = b;
            var r = [0, 0, 1, 1],
                s = [],
                t = q("easing.Ease", function(a, b, c, d) {
                    this._func = a, this._type = c || 0, this._power = d || 0, this._params = b ? r.concat(b) : r
                }, !0),
                u = t.map = {},
                v = t.register = function(a, b, c, d) {
                    for (var e, f, g, h, j = b.split(","), k = j.length, l = (c || "easeIn,easeOut,easeInOut").split(","); --k > -1;)
                        for (f = j[k], e = d ? q("easing." + f, null, !0) : i.easing[f] || {}, g = l.length; --g > -1;) h = l[g], u[f + "." + h] = u[h + f] = e[h] = a.getRatio ? a : a[h] || new a
                };
            for (e = t.prototype, e._calcEnd = !1, e.getRatio = function(a) {
                    if (this._func) return this._params[0] = a, this._func.apply(null, this._params);
                    var b = this._type,
                        c = this._power,
                        d = 1 === b ? 1 - a : 2 === b ? a : .5 > a ? 2 * a : 2 * (1 - a);
                    return 1 === c ? d *= d : 2 === c ? d *= d * d : 3 === c ? d *= d * d * d : 4 === c && (d *= d * d * d * d), 1 === b ? 1 - d : 2 === b ? d : .5 > a ? d / 2 : 1 - d / 2
                }, c = ["Linear", "Quad", "Cubic", "Quart", "Quint,Strong"], d = c.length; --d > -1;) e = c[d] + ",Power" + d, v(new t(null, null, 1, d), e, "easeOut", !0), v(new t(null, null, 2, d), e, "easeIn" + (0 === d ? ",easeNone" : "")), v(new t(null, null, 3, d), e, "easeInOut");
            u.linear = i.easing.Linear.easeIn, u.swing = i.easing.Quad.easeInOut;

            var w = q("events.EventDispatcher", function(a) {
                this._listeners = {}, this._eventTarget = a || this
            });
            e = w.prototype, e.addEventListener = function(a, b, c, d, e) {
                e = e || 0;
                var h, i, j = this._listeners[a],
                    k = 0;
                for (null == j && (this._listeners[a] = j = []), i = j.length; --i > -1;) h = j[i], h.c === b && h.s === c ? j.splice(i, 1) : 0 === k && h.pr < e && (k = i + 1);
                j.splice(k, 0, {
                    c: b,
                    s: c,
                    up: d,
                    pr: e
                }), this !== f || g || f.wake()
            }, e.removeEventListener = function(a, b) {
                var c, d = this._listeners[a];
                if (d)
                    for (c = d.length; --c > -1;)
                        if (d[c].c === b) return void d.splice(c, 1)
            }, e.dispatchEvent = function(a) {
                var b, c, d, e = this._listeners[a];
                if (e)
                    for (b = e.length, c = this._eventTarget; --b > -1;) d = e[b], d.up ? d.c.call(d.s || c, {
                        type: a,
                        target: c
                    }) : d.c.call(d.s || c)
            };
            var x = a.requestAnimationFrame,
                y = a.cancelAnimationFrame,
                z = Date.now || function() {
                    return (new Date).getTime()
                },
                A = z();
            for (c = ["ms", "moz", "webkit", "o"], d = c.length; --d > -1 && !x;) x = a[c[d] + "RequestAnimationFrame"], y = a[c[d] + "CancelAnimationFrame"] || a[c[d] + "CancelRequestAnimationFrame"];
            q("Ticker", function(a, b) {
                var c, d, e, h, i, k = this,
                    m = z(),
                    n = b !== !1 && x,
                    o = 500,
                    p = 33,
                    q = function(a) {
                        var b, f, g = z() - A;
                        g > o && (m += g - p), A += g, k.time = (A - m) / 1e3, b = k.time - i, (!c || b > 0 || a === !0) && (k.frame++, i += b + (b >= h ? .004 : h - b), f = !0), a !== !0 && (e = d(q)), f && k.dispatchEvent("tick")
                    };
                w.call(k), k.time = k.frame = 0, k.tick = function() {
                    q(!0)
                }, k.lagSmoothing = function(a, b) {
                    o = a || 1 / j, p = Math.min(b, o, 0)
                }, k.sleep = function() {
                    null != e && (n && y ? y(e) : clearTimeout(e), d = l, e = null, k === f && (g = !1))
                }, k.wake = function() {
                    null !== e ? k.sleep() : k.frame > 10 && (A = z() - o + 5), d = 0 === c ? l : n && x ? x : function(a) {
                        return setTimeout(a, 1e3 * (i - k.time) + 1 | 0)
                    }, k === f && (g = !0), q(2)
                }, k.fps = function(a) {
                    return arguments.length ? (c = a, h = 1 / (c || 60), i = this.time + h, void k.wake()) : c
                }, k.useRAF = function(a) {
                    return arguments.length ? (k.sleep(), n = a, void k.fps(c)) : n
                }, k.fps(a), setTimeout(function() {
                    n && (!e || k.frame < 5) && k.useRAF(!1)
                }, 1500)
            }), e = i.Ticker.prototype = new i.events.EventDispatcher, e.constructor = i.Ticker;
            var B = q("core.Animation", function(a, b) {
                if (this.vars = b = b || {}, this._duration = this._totalDuration = a || 0, this._delay = Number(b.delay) || 0, this._timeScale = 1, this._active = b.immediateRender === !0, this.data = b.data, this._reversed = b.reversed === !0, Q) {
                    g || f.wake();
                    var c = this.vars.useFrames ? P : Q;
                    c.add(this, c._time), this.vars.paused && this.paused(!0)
                }
            });
            f = B.ticker = new i.Ticker, e = B.prototype, e._dirty = e._gc = e._initted = e._paused = !1, e._totalTime = e._time = 0, e._rawPrevTime = -1, e._next = e._last = e._onUpdate = e._timeline = e.timeline = null, e._paused = !1;
            var C = function() {
                g && z() - A > 2e3 && f.wake(), setTimeout(C, 2e3)
            };
            C(), e.play = function(a, b) {
                return null != a && this.seek(a, b), this.reversed(!1).paused(!1)
            }, e.pause = function(a, b) {
                return null != a && this.seek(a, b), this.paused(!0)
            }, e.resume = function(a, b) {
                return null != a && this.seek(a, b), this.paused(!1)
            }, e.seek = function(a, b) {
                return this.totalTime(Number(a), b !== !1)
            }, e.restart = function(a, b) {
                return this.reversed(!1).paused(!1).totalTime(a ? -this._delay : 0, b !== !1, !0)
            }, e.reverse = function(a, b) {
                return null != a && this.seek(a || this.totalDuration(), b), this.reversed(!0).paused(!1)
            }, e.render = function() {}, e.invalidate = function() {
                return this
            }, e.isActive = function() {
                var a, b = this._timeline,
                    c = this._startTime;
                return !b || !this._gc && !this._paused && b.isActive() && (a = b.rawTime()) >= c && a < c + this.totalDuration() / this._timeScale
            }, e._enabled = function(a, b) {
                return g || f.wake(), this._gc = !a, this._active = this.isActive(), b !== !0 && (a && !this.timeline ? this._timeline.add(this, this._startTime - this._delay) : !a && this.timeline && this._timeline._remove(this, !0)), !1
            }, e._kill = function() {
                return this._enabled(!1, !1)
            }, e.kill = function(a, b) {
                return this._kill(a, b), this
            }, e._uncache = function(a) {
                for (var b = a ? this : this.timeline; b;) b._dirty = !0, b = b.timeline;
                return this
            }, e._swapSelfInParams = function(a) {
                for (var b = a.length, c = a.concat(); --b > -1;) "{self}" === a[b] && (c[b] = this);
                return c
            }, e.eventCallback = function(a, b, c, d) {
                if ("on" === (a || "").substr(0, 2)) {
                    var e = this.vars;
                    if (1 === arguments.length) return e[a];
                    null == b ? delete e[a] : (e[a] = b, e[a + "Params"] = m(c) && -1 !== c.join("").indexOf("{self}") ? this._swapSelfInParams(c) : c, e[a + "Scope"] = d), "onUpdate" === a && (this._onUpdate = b)
                }
                return this
            }, e.delay = function(a) {
                return arguments.length ? (this._timeline.smoothChildTiming && this.startTime(this._startTime + a - this._delay), this._delay = a, this) : this._delay
            }, e.duration = function(a) {
                return arguments.length ? (this._duration = this._totalDuration = a, this._uncache(!0), this._timeline.smoothChildTiming && this._time > 0 && this._time < this._duration && 0 !== a && this.totalTime(this._totalTime * (a / this._duration), !0), this) : (this._dirty = !1, this._duration)
            }, e.totalDuration = function(a) {
                return this._dirty = !1, arguments.length ? this.duration(a) : this._totalDuration
            }, e.time = function(a, b) {
                return arguments.length ? (this._dirty && this.totalDuration(), this.totalTime(a > this._duration ? this._duration : a, b)) : this._time
            }, e.totalTime = function(a, b, c) {
                if (g || f.wake(), !arguments.length) return this._totalTime;
                if (this._timeline) {
                    if (0 > a && !c && (a += this.totalDuration()), this._timeline.smoothChildTiming) {
                        this._dirty && this.totalDuration();
                        var d = this._totalDuration,
                            e = this._timeline;
                        if (a > d && !c && (a = d), this._startTime = (this._paused ? this._pauseTime : e._time) - (this._reversed ? d - a : a) / this._timeScale, e._dirty || this._uncache(!1), e._timeline)
                            for (; e._timeline;) e._timeline._time !== (e._startTime + e._totalTime) / e._timeScale && e.totalTime(e._totalTime, !0), e = e._timeline
                    }
                    this._gc && this._enabled(!0, !1), (this._totalTime !== a || 0 === this._duration) && (this.render(a, b, !1), H.length && R())
                }
                return this
            }, e.progress = e.totalProgress = function(a, b) {
                return arguments.length ? this.totalTime(this.duration() * a, b) : this._time / this.duration()
            }, e.startTime = function(a) {
                return arguments.length ? (a !== this._startTime && (this._startTime = a, this.timeline && this.timeline._sortChildren && this.timeline.add(this, a - this._delay)), this) : this._startTime
            }, e.timeScale = function(a) {
                if (!arguments.length) return this._timeScale;
                if (a = a || j, this._timeline && this._timeline.smoothChildTiming) {
                    var b = this._pauseTime,
                        c = b || 0 === b ? b : this._timeline.totalTime();
                    this._startTime = c - (c - this._startTime) * this._timeScale / a
                }
                return this._timeScale = a, this._uncache(!1)
            }, e.reversed = function(a) {
                return arguments.length ? (a != this._reversed && (this._reversed = a, this.totalTime(this._timeline && !this._timeline.smoothChildTiming ? this.totalDuration() - this._totalTime : this._totalTime, !0)), this) : this._reversed
            }, e.paused = function(a) {
                if (!arguments.length) return this._paused;
                if (a != this._paused && this._timeline) {
                    g || a || f.wake();
                    var b = this._timeline,
                        c = b.rawTime(),
                        d = c - this._pauseTime;
                    !a && b.smoothChildTiming && (this._startTime += d, this._uncache(!1)), this._pauseTime = a ? c : null, this._paused = a, this._active = this.isActive(), !a && 0 !== d && this._initted && this.duration() && this.render(b.smoothChildTiming ? this._totalTime : (c - this._startTime) / this._timeScale, !0, !0)
                }
                return this._gc && !a && this._enabled(!0, !1), this
            };
            var D = q("core.SimpleTimeline", function(a) {
                B.call(this, 0, a), this.autoRemoveChildren = this.smoothChildTiming = !0
            });
            e = D.prototype = new B, e.constructor = D, e.kill()._gc = !1, e._first = e._last = null, e._sortChildren = !1, e.add = e.insert = function(a, b) {
                var c, d;
                if (a._startTime = Number(b || 0) + a._delay, a._paused && this !== a._timeline && (a._pauseTime = a._startTime + (this.rawTime() - a._startTime) / a._timeScale), a.timeline && a.timeline._remove(a, !0), a.timeline = a._timeline = this, a._gc && a._enabled(!0, !0), c = this._last, this._sortChildren)
                    for (d = a._startTime; c && c._startTime > d;) c = c._prev;
                return c ? (a._next = c._next, c._next = a) : (a._next = this._first, this._first = a), a._next ? a._next._prev = a : this._last = a, a._prev = c, this._timeline && this._uncache(!0), this
            }, e._remove = function(a, b) {
                return a.timeline === this && (b || a._enabled(!1, !0), a.timeline = null, a._prev ? a._prev._next = a._next : this._first === a && (this._first = a._next), a._next ? a._next._prev = a._prev : this._last === a && (this._last = a._prev), this._timeline && this._uncache(!0)), this
            }, e.render = function(a, b, c) {
                var d, e = this._first;
                for (this._totalTime = this._time = this._rawPrevTime = a; e;) d = e._next, (e._active || a >= e._startTime && !e._paused) && (e._reversed ? e.render((e._dirty ? e.totalDuration() : e._totalDuration) - (a - e._startTime) * e._timeScale, b, c) : e.render((a - e._startTime) * e._timeScale, b, c)), e = d
            }, e.rawTime = function() {
                return g || f.wake(), this._totalTime
            };
            var E = q("TweenLite", function(b, c, d) {
                    if (B.call(this, c, d), this.render = E.prototype.render, null == b) throw "Cannot tween a null target.";
                    this.target = b = "string" != typeof b ? b : E.selector(b) || b;
                    var e, f, g, h = b.jquery || b.length && b !== a && b[0] && (b[0] === a || b[0].nodeType && b[0].style && !b.nodeType),
                        i = this.vars.overwrite;
                    if (this._overwrite = i = null == i ? O[E.defaultOverwrite] : "number" == typeof i ? i >> 0 : O[i], (h || b instanceof Array || b.push && m(b)) && "number" != typeof b[0])
                        for (this._targets = g = k.call(b, 0), this._propLookup = [], this._siblings = [], e = 0; e < g.length; e++) f = g[e], f ? "string" != typeof f ? f.length && f !== a && f[0] && (f[0] === a || f[0].nodeType && f[0].style && !f.nodeType) ? (g.splice(e--, 1), this._targets = g = g.concat(k.call(f, 0))) : (this._siblings[e] = S(f, this, !1), 1 === i && this._siblings[e].length > 1 && T(f, this, null, 1, this._siblings[e])) : (f = g[e--] = E.selector(f), "string" == typeof f && g.splice(e + 1, 1)) : g.splice(e--, 1);
                    else this._propLookup = {}, this._siblings = S(b, this, !1), 1 === i && this._siblings.length > 1 && T(b, this, null, 1, this._siblings);
                    (this.vars.immediateRender || 0 === c && 0 === this._delay && this.vars.immediateRender !== !1) && (this._time = -j, this.render(-this._delay))
                }, !0),
                F = function(b) {
                    return b.length && b !== a && b[0] && (b[0] === a || b[0].nodeType && b[0].style && !b.nodeType)
                },
                G = function(a, b) {
                    var c, d = {};
                    for (c in a) N[c] || c in b && "transform" !== c && "x" !== c && "y" !== c && "width" !== c && "height" !== c && "className" !== c && "border" !== c || !(!K[c] || K[c] && K[c]._autoCSS) || (d[c] = a[c], delete a[c]);
                    a.css = d
                };
            e = E.prototype = new B, e.constructor = E, e.kill()._gc = !1, e.ratio = 0, e._firstPT = e._targets = e._overwrittenProps = e._startAt = null, e._notifyPluginsOfEnabled = e._lazy = !1, E.version = "1.12.1", E.defaultEase = e._ease = new t(null, null, 1, 1), E.defaultOverwrite = "auto", E.ticker = f, E.autoSleep = !0, E.lagSmoothing = function(a, b) {
                f.lagSmoothing(a, b)
            }, E.selector = a.$ || a.jQuery || function(b) {
                return a.$ ? (E.selector = a.$, a.$(b)) : a.document ? a.document.getElementById("#" === b.charAt(0) ? b.substr(1) : b) : b
            };
            var H = [],
                I = {},
                J = E._internals = {
                    isArray: m,
                    isSelector: F,
                    lazyTweens: H
                },
                K = E._plugins = {},
                L = J.tweenLookup = {},
                M = 0,
                N = J.reservedProps = {
                    ease: 1,
                    delay: 1,
                    overwrite: 1,
                    onComplete: 1,
                    onCompleteParams: 1,
                    onCompleteScope: 1,
                    useFrames: 1,
                    runBackwards: 1,
                    startAt: 1,
                    onUpdate: 1,
                    onUpdateParams: 1,
                    onUpdateScope: 1,
                    onStart: 1,
                    onStartParams: 1,
                    onStartScope: 1,
                    onReverseComplete: 1,
                    onReverseCompleteParams: 1,
                    onReverseCompleteScope: 1,
                    onRepeat: 1,
                    onRepeatParams: 1,
                    onRepeatScope: 1,
                    easeParams: 1,
                    yoyo: 1,
                    immediateRender: 1,
                    repeat: 1,
                    repeatDelay: 1,
                    data: 1,
                    paused: 1,
                    reversed: 1,
                    autoCSS: 1,
                    lazy: 1
                },
                O = {
                    none: 0,
                    all: 1,
                    auto: 2,
                    concurrent: 3,
                    allOnStart: 4,
                    preexisting: 5,
                    "true": 1,
                    "false": 0
                },
                P = B._rootFramesTimeline = new D,
                Q = B._rootTimeline = new D,
                R = function() {
                    var a = H.length;
                    for (I = {}; --a > -1;) c = H[a], c && c._lazy !== !1 && (c.render(c._lazy, !1, !0), c._lazy = !1);
                    H.length = 0
                };
            Q._startTime = f.time, P._startTime = f.frame, Q._active = P._active = !0, setTimeout(R, 1), B._updateRoot = E.render = function() {
                var a, b, c;
                if (H.length && R(), Q.render((f.time - Q._startTime) * Q._timeScale, !1, !1), P.render((f.frame - P._startTime) * P._timeScale, !1, !1), H.length && R(), !(f.frame % 120)) {
                    for (c in L) {
                        for (b = L[c].tweens, a = b.length; --a > -1;) b[a]._gc && b.splice(a, 1);
                        0 === b.length && delete L[c]
                    }
                    if (c = Q._first, (!c || c._paused) && E.autoSleep && !P._first && 1 === f._listeners.tick.length) {
                        for (; c && c._paused;) c = c._next;
                        c || f.sleep()
                    }
                }
            }, f.addEventListener("tick", B._updateRoot);
            var S = function(a, b, c) {
                    var d, e, f = a._gsTweenID;
                    if (L[f || (a._gsTweenID = f = "t" + M++)] || (L[f] = {
                            target: a,
                            tweens: []
                        }), b && (d = L[f].tweens, d[e = d.length] = b, c))
                        for (; --e > -1;) d[e] === b && d.splice(e, 1);
                    return L[f].tweens
                },
                T = function(a, b, c, d, e) {
                    var f, g, h, i;
                    if (1 === d || d >= 4) {
                        for (i = e.length, f = 0; i > f; f++)
                            if ((h = e[f]) !== b) h._gc || h._enabled(!1, !1) && (g = !0);
                            else if (5 === d) break;
                        return g
                    }
                    var k, l = b._startTime + j,
                        m = [],
                        n = 0,
                        o = 0 === b._duration;
                    for (f = e.length; --f > -1;)(h = e[f]) === b || h._gc || h._paused || (h._timeline !== b._timeline ? (k = k || U(b, 0, o), 0 === U(h, k, o) && (m[n++] = h)) : h._startTime <= l && h._startTime + h.totalDuration() / h._timeScale > l && ((o || !h._initted) && l - h._startTime <= 2e-10 || (m[n++] = h)));
                    for (f = n; --f > -1;) h = m[f], 2 === d && h._kill(c, a) && (g = !0), (2 !== d || !h._firstPT && h._initted) && h._enabled(!1, !1) && (g = !0);
                    return g
                },
                U = function(a, b, c) {
                    for (var d = a._timeline, e = d._timeScale, f = a._startTime; d._timeline;) {
                        if (f += d._startTime, e *= d._timeScale, d._paused) return -100;
                        d = d._timeline
                    }
                    return f /= e, f > b ? f - b : c && f === b || !a._initted && 2 * j > f - b ? j : (f += a.totalDuration() / a._timeScale / e) > b + j ? 0 : f - b - j
                };
            e._init = function() {
                var a, b, c, d, e, f = this.vars,
                    g = this._overwrittenProps,
                    h = this._duration,
                    i = !!f.immediateRender,
                    j = f.ease;
                if (f.startAt) {
                    this._startAt && (this._startAt.render(-1, !0), this._startAt.kill()), e = {};
                    for (d in f.startAt) e[d] = f.startAt[d];
                    if (e.overwrite = !1, e.immediateRender = !0, e.lazy = i && f.lazy !== !1, e.startAt = e.delay = null, this._startAt = E.to(this.target, 0, e), i)
                        if (this._time > 0) this._startAt = null;
                        else if (0 !== h) return
                } else if (f.runBackwards && 0 !== h)
                    if (this._startAt) this._startAt.render(-1, !0), this._startAt.kill(), this._startAt = null;
                    else {
                        c = {};
                        for (d in f) N[d] && "autoCSS" !== d || (c[d] = f[d]);
                        if (c.overwrite = 0, c.data = "isFromStart", c.lazy = i && f.lazy !== !1, c.immediateRender = i, this._startAt = E.to(this.target, 0, c), i) {
                            if (0 === this._time) return
                        } else this._startAt._init(), this._startAt._enabled(!1)
                    }
                if (this._ease = j ? j instanceof t ? f.easeParams instanceof Array ? j.config.apply(j, f.easeParams) : j : "function" == typeof j ? new t(j, f.easeParams) : u[j] || E.defaultEase : E.defaultEase, this._easeType = this._ease._type, this._easePower = this._ease._power, this._firstPT = null, this._targets)
                    for (a = this._targets.length; --a > -1;) this._initProps(this._targets[a], this._propLookup[a] = {}, this._siblings[a], g ? g[a] : null) && (b = !0);
                else b = this._initProps(this.target, this._propLookup, this._siblings, g);
                if (b && E._onPluginEvent("_onInitAllProps", this), g && (this._firstPT || "function" != typeof this.target && this._enabled(!1, !1)), f.runBackwards)
                    for (c = this._firstPT; c;) c.s += c.c, c.c = -c.c, c = c._next;
                this._onUpdate = f.onUpdate, this._initted = !0
            }, e._initProps = function(b, c, d, e) {
                var f, g, h, i, j, k;
                if (null == b) return !1;
                I[b._gsTweenID] && R(), this.vars.css || b.style && b !== a && b.nodeType && K.css && this.vars.autoCSS !== !1 && G(this.vars, b);
                for (f in this.vars) {
                    if (k = this.vars[f], N[f]) k && (k instanceof Array || k.push && m(k)) && -1 !== k.join("").indexOf("{self}") && (this.vars[f] = k = this._swapSelfInParams(k, this));
                    else if (K[f] && (i = new K[f])._onInitTween(b, this.vars[f], this)) {
                        for (this._firstPT = j = {
                                _next: this._firstPT,
                                t: i,
                                p: "setRatio",
                                s: 0,
                                c: 1,
                                f: !0,
                                n: f,
                                pg: !0,
                                pr: i._priority
                            }, g = i._overwriteProps.length; --g > -1;) c[i._overwriteProps[g]] = this._firstPT;
                        (i._priority || i._onInitAllProps) && (h = !0), (i._onDisable || i._onEnable) && (this._notifyPluginsOfEnabled = !0)
                    } else this._firstPT = c[f] = j = {
                        _next: this._firstPT,
                        t: b,
                        p: f,
                        f: "function" == typeof b[f],
                        n: f,
                        pg: !1,
                        pr: 0
                    }, j.s = j.f ? b[f.indexOf("set") || "function" != typeof b["get" + f.substr(3)] ? f : "get" + f.substr(3)]() : parseFloat(b[f]), j.c = "string" == typeof k && "=" === k.charAt(1) ? parseInt(k.charAt(0) + "1", 10) * Number(k.substr(2)) : Number(k) - j.s || 0;
                    j && j._next && (j._next._prev = j)
                }
                return e && this._kill(e, b) ? this._initProps(b, c, d, e) : this._overwrite > 1 && this._firstPT && d.length > 1 && T(b, this, c, this._overwrite, d) ? (this._kill(c, b), this._initProps(b, c, d, e)) : (this._firstPT && (this.vars.lazy !== !1 && this._duration || this.vars.lazy && !this._duration) && (I[b._gsTweenID] = !0), h)
            }, e.render = function(a, b, c) {
                var d, e, f, g, h = this._time,
                    i = this._duration,
                    k = this._rawPrevTime;
                if (a >= i) this._totalTime = this._time = i, this.ratio = this._ease._calcEnd ? this._ease.getRatio(1) : 1, this._reversed || (d = !0, e = "onComplete"), 0 === i && (this._initted || !this.vars.lazy || c) && (this._startTime === this._timeline._duration && (a = 0), (0 === a || 0 > k || k === j) && k !== a && (c = !0, k > j && (e = "onReverseComplete")), this._rawPrevTime = g = !b || a || k === a ? a : j);
                else if (1e-7 > a) this._totalTime = this._time = 0, this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0, (0 !== h || 0 === i && k > 0 && k !== j) && (e = "onReverseComplete", d = this._reversed), 0 > a ? (this._active = !1, 0 === i && (this._initted || !this.vars.lazy || c) && (k >= 0 && (c = !0), this._rawPrevTime = g = !b || a || k === a ? a : j)) : this._initted || (c = !0);
                else if (this._totalTime = this._time = a, this._easeType) {
                    var l = a / i,
                        m = this._easeType,
                        n = this._easePower;
                    (1 === m || 3 === m && l >= .5) && (l = 1 - l), 3 === m && (l *= 2), 1 === n ? l *= l : 2 === n ? l *= l * l : 3 === n ? l *= l * l * l : 4 === n && (l *= l * l * l * l), this.ratio = 1 === m ? 1 - l : 2 === m ? l : .5 > a / i ? l / 2 : 1 - l / 2
                } else this.ratio = this._ease.getRatio(a / i);
                if (this._time !== h || c) {
                    if (!this._initted) {
                        if (this._init(), !this._initted || this._gc) return;
                        if (!c && this._firstPT && (this.vars.lazy !== !1 && this._duration || this.vars.lazy && !this._duration)) return this._time = this._totalTime = h, this._rawPrevTime = k, H.push(this), void(this._lazy = a);
                        this._time && !d ? this.ratio = this._ease.getRatio(this._time / i) : d && this._ease._calcEnd && (this.ratio = this._ease.getRatio(0 === this._time ? 0 : 1))
                    }
                    for (this._lazy !== !1 && (this._lazy = !1), this._active || !this._paused && this._time !== h && a >= 0 && (this._active = !0), 0 === h && (this._startAt && (a >= 0 ? this._startAt.render(a, b, c) : e || (e = "_dummyGS")), this.vars.onStart && (0 !== this._time || 0 === i) && (b || this.vars.onStart.apply(this.vars.onStartScope || this, this.vars.onStartParams || s))), f = this._firstPT; f;) f.f ? f.t[f.p](f.c * this.ratio + f.s) : f.t[f.p] = f.c * this.ratio + f.s, f = f._next;
                    this._onUpdate && (0 > a && this._startAt && this._startTime && this._startAt.render(a, b, c), b || (this._time !== h || d) && this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || s)), e && (this._gc || (0 > a && this._startAt && !this._onUpdate && this._startTime && this._startAt.render(a, b, c), d && (this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !b && this.vars[e] && this.vars[e].apply(this.vars[e + "Scope"] || this, this.vars[e + "Params"] || s), 0 === i && this._rawPrevTime === j && g !== j && (this._rawPrevTime = 0)))
                }
            }, e._kill = function(a, b) {
                if ("all" === a && (a = null), null == a && (null == b || b === this.target)) return this._lazy = !1, this._enabled(!1, !1);
                b = "string" != typeof b ? b || this._targets || this.target : E.selector(b) || b;
                var c, d, e, f, g, h, i, j;
                if ((m(b) || F(b)) && "number" != typeof b[0])
                    for (c = b.length; --c > -1;) this._kill(a, b[c]) && (h = !0);
                else {
                    if (this._targets) {
                        for (c = this._targets.length; --c > -1;)
                            if (b === this._targets[c]) {
                                g = this._propLookup[c] || {}, this._overwrittenProps = this._overwrittenProps || [], d = this._overwrittenProps[c] = a ? this._overwrittenProps[c] || {} : "all";
                                break
                            }
                    } else {
                        if (b !== this.target) return !1;
                        g = this._propLookup, d = this._overwrittenProps = a ? this._overwrittenProps || {} : "all"
                    }
                    if (g) {
                        i = a || g, j = a !== d && "all" !== d && a !== g && ("object" != typeof a || !a._tempKill);
                        for (e in i)(f = g[e]) && (f.pg && f.t._kill(i) && (h = !0), f.pg && 0 !== f.t._overwriteProps.length || (f._prev ? f._prev._next = f._next : f === this._firstPT && (this._firstPT = f._next), f._next && (f._next._prev = f._prev), f._next = f._prev = null), delete g[e]), j && (d[e] = 1);
                        !this._firstPT && this._initted && this._enabled(!1, !1)
                    }
                }
                return h
            }, e.invalidate = function() {
                return this._notifyPluginsOfEnabled && E._onPluginEvent("_onDisable", this), this._firstPT = null, this._overwrittenProps = null, this._onUpdate = null, this._startAt = null, this._initted = this._active = this._notifyPluginsOfEnabled = this._lazy = !1, this._propLookup = this._targets ? {} : [], this
            }, e._enabled = function(a, b) {
                if (g || f.wake(), a && this._gc) {
                    var c, d = this._targets;
                    if (d)
                        for (c = d.length; --c > -1;) this._siblings[c] = S(d[c], this, !0);
                    else this._siblings = S(this.target, this, !0)
                }
                return B.prototype._enabled.call(this, a, b), this._notifyPluginsOfEnabled && this._firstPT ? E._onPluginEvent(a ? "_onEnable" : "_onDisable", this) : !1
            }, E.to = function(a, b, c) {
                return new E(a, b, c)
            }, E.from = function(a, b, c) {
                return c.runBackwards = !0, c.immediateRender = 0 != c.immediateRender, new E(a, b, c)
            }, E.fromTo = function(a, b, c, d) {
                return d.startAt = c, d.immediateRender = 0 != d.immediateRender && 0 != c.immediateRender, new E(a, b, d)
            }, E.delayedCall = function(a, b, c, d, e) {
                return new E(b, 0, {
                    delay: a,
                    onComplete: b,
                    onCompleteParams: c,
                    onCompleteScope: d,
                    onReverseComplete: b,
                    onReverseCompleteParams: c,
                    onReverseCompleteScope: d,
                    immediateRender: !1,
                    useFrames: e,
                    overwrite: 0
                })
            }, E.set = function(a, b) {
                return new E(a, 0, b)
            }, E.getTweensOf = function(a, b) {
                if (null == a) return [];
                a = "string" != typeof a ? a : E.selector(a) || a;
                var c, d, e, f;
                if ((m(a) || F(a)) && "number" != typeof a[0]) {
                    for (c = a.length, d = []; --c > -1;) d = d.concat(E.getTweensOf(a[c], b));
                    for (c = d.length; --c > -1;)
                        for (f = d[c], e = c; --e > -1;) f === d[e] && d.splice(c, 1)
                } else
                    for (d = S(a).concat(), c = d.length; --c > -1;)(d[c]._gc || b && !d[c].isActive()) && d.splice(c, 1);
                return d
            }, E.killTweensOf = E.killDelayedCallsTo = function(a, b, c) {
                "object" == typeof b && (c = b, b = !1);
                for (var d = E.getTweensOf(a, b), e = d.length; --e > -1;) d[e]._kill(c, a)
            };
            var V = q("plugins.TweenPlugin", function(a, b) {
                this._overwriteProps = (a || "").split(","), this._propName = this._overwriteProps[0], this._priority = b || 0, this._super = V.prototype
            }, !0);
            if (e = V.prototype, V.version = "1.10.1", V.API = 2, e._firstPT = null, e._addTween = function(a, b, c, d, e, f) {
                    var g, h;
                    return null != d && (g = "number" == typeof d || "=" !== d.charAt(1) ? Number(d) - c : parseInt(d.charAt(0) + "1", 10) * Number(d.substr(2))) ? (this._firstPT = h = {
                        _next: this._firstPT,
                        t: a,
                        p: b,
                        s: c,
                        c: g,
                        f: "function" == typeof a[b],
                        n: e || b,
                        r: f
                    }, h._next && (h._next._prev = h), h) : void 0
                }, e.setRatio = function(a) {
                    for (var b, c = this._firstPT, d = 1e-6; c;) b = c.c * a + c.s, c.r ? b = Math.round(b) : d > b && b > -d && (b = 0), c.f ? c.t[c.p](b) : c.t[c.p] = b, c = c._next
                }, e._kill = function(a) {
                    var b, c = this._overwriteProps,
                        d = this._firstPT;
                    if (null != a[this._propName]) this._overwriteProps = [];
                    else
                        for (b = c.length; --b > -1;) null != a[c[b]] && c.splice(b, 1);
                    for (; d;) null != a[d.n] && (d._next && (d._next._prev = d._prev), d._prev ? (d._prev._next = d._next, d._prev = null) : this._firstPT === d && (this._firstPT = d._next)), d = d._next;
                    return !1
                }, e._roundProps = function(a, b) {
                    for (var c = this._firstPT; c;)(a[this._propName] || null != c.n && a[c.n.split(this._propName + "_").join("")]) && (c.r = b), c = c._next
                }, E._onPluginEvent = function(a, b) {
                    var c, d, e, f, g, h = b._firstPT;
                    if ("_onInitAllProps" === a) {
                        for (; h;) {
                            for (g = h._next, d = e; d && d.pr > h.pr;) d = d._next;
                            (h._prev = d ? d._prev : f) ? h._prev._next = h: e = h, (h._next = d) ? d._prev = h : f = h, h = g
                        }
                        h = b._firstPT = e
                    }
                    for (; h;) h.pg && "function" == typeof h.t[a] && h.t[a]() && (c = !0), h = h._next;
                    return c
                }, V.activate = function(a) {
                    for (var b = a.length; --b > -1;) a[b].API === V.API && (K[(new a[b])._propName] = a[b]);
                    return !0
                }, p.plugin = function(a) {
                    if (!(a && a.propName && a.init && a.API)) throw "illegal plugin definition.";
                    var b, c = a.propName,
                        d = a.priority || 0,
                        e = a.overwriteProps,
                        f = {
                            init: "_onInitTween",
                            set: "setRatio",
                            kill: "_kill",
                            round: "_roundProps",
                            initAll: "_onInitAllProps"
                        },
                        g = q("plugins." + c.charAt(0).toUpperCase() + c.substr(1) + "Plugin", function() {
                            V.call(this, c, d), this._overwriteProps = e || []
                        }, a.global === !0),
                        h = g.prototype = new V(c);
                    h.constructor = g, g.API = a.API;
                    for (b in f) "function" == typeof a[b] && (h[f[b]] = a[b]);
                    return g.version = a.version, V.activate([g]), g
                }, c = a._gsQueue) {
                for (d = 0; d < c.length; d++) c[d]();
                for (e in n) n[e].func || a.console.log("GSAP encountered missing dependency: com.greensock." + e)
            }
            g = !1
        }
    }(window), define("tweenMax", function(a) {
        return function() {
            var b;
            return b || a.TweenMax
        }
    }(this)), (window._gsQueue || (window._gsQueue = [])).push(function() {
        "use strict";
        window._gsDefine("easing.Back", ["easing.Ease"], function(a) {
            var b, c, d, e = window.GreenSockGlobals || window,
                f = e.com.greensock,
                g = 2 * Math.PI,
                h = Math.PI / 2,
                i = f._class,
                j = function(b, c) {
                    var d = i("easing." + b, function() {}, !0),
                        e = d.prototype = new a;
                    return e.constructor = d, e.getRatio = c, d
                },
                k = a.register || function() {},
                l = function(a, b, c, d) {
                    var e = i("easing." + a, {
                        easeOut: new b,
                        easeIn: new c,
                        easeInOut: new d
                    }, !0);
                    return k(e, a), e
                },
                m = function(a, b, c) {
                    this.t = a, this.v = b, c && (this.next = c, c.prev = this, this.c = c.v - b, this.gap = c.t - a)
                },
                n = function(b, c) {
                    var d = i("easing." + b, function(a) {
                            this._p1 = a || 0 === a ? a : 1.70158, this._p2 = 1.525 * this._p1
                        }, !0),
                        e = d.prototype = new a;
                    return e.constructor = d, e.getRatio = c, e.config = function(a) {
                        return new d(a)
                    }, d
                },
                o = l("Back", n("BackOut", function(a) {
                    return (a -= 1) * a * ((this._p1 + 1) * a + this._p1) + 1
                }), n("BackIn", function(a) {
                    return a * a * ((this._p1 + 1) * a - this._p1)
                }), n("BackInOut", function(a) {
                    return (a *= 2) < 1 ? .5 * a * a * ((this._p2 + 1) * a - this._p2) : .5 * ((a -= 2) * a * ((this._p2 + 1) * a + this._p2) + 2)
                })),
                p = i("easing.SlowMo", function(a, b, c) {
                    b = b || 0 === b ? b : .7, null == a ? a = .7 : a > 1 && (a = 1), this._p = 1 !== a ? b : 0, this._p1 = (1 - a) / 2, this._p2 = a, this._p3 = this._p1 + this._p2, this._calcEnd = c === !0
                }, !0),
                q = p.prototype = new a;
            return q.constructor = p, q.getRatio = function(a) {
                var b = a + (.5 - a) * this._p;
                return a < this._p1 ? this._calcEnd ? 1 - (a = 1 - a / this._p1) * a : b - (a = 1 - a / this._p1) * a * a * a * b : a > this._p3 ? this._calcEnd ? 1 - (a = (a - this._p3) / this._p1) * a : b + (a - b) * (a = (a - this._p3) / this._p1) * a * a * a : this._calcEnd ? 1 : b
            }, p.ease = new p(.7, .7), q.config = p.config = function(a, b, c) {
                return new p(a, b, c)
            }, b = i("easing.SteppedEase", function(a) {
                a = a || 1, this._p1 = 1 / a, this._p2 = a + 1
            }, !0), q = b.prototype = new a, q.constructor = b, q.getRatio = function(a) {
                return 0 > a ? a = 0 : a >= 1 && (a = .999999999), (this._p2 * a >> 0) * this._p1
            }, q.config = b.config = function(a) {
                return new b(a)
            }, c = i("easing.RoughEase", function(b) {
                b = b || {};
                for (var c, d, e, f, g, h, i = b.taper || "none", j = [], k = 0, l = 0 | (b.points || 20), n = l, o = b.randomize !== !1, p = b.clamp === !0, q = b.template instanceof a ? b.template : null, r = "number" == typeof b.strength ? .4 * b.strength : .4; --n > -1;) c = o ? Math.random() : 1 / l * n, d = q ? q.getRatio(c) : c, "none" === i ? e = r : "out" === i ? (f = 1 - c, e = f * f * r) : "in" === i ? e = c * c * r : .5 > c ? (f = 2 * c, e = f * f * .5 * r) : (f = 2 * (1 - c), e = f * f * .5 * r), o ? d += Math.random() * e - .5 * e : n % 2 ? d += .5 * e : d -= .5 * e, p && (d > 1 ? d = 1 : 0 > d && (d = 0)), j[k++] = {
                    x: c,
                    y: d
                };
                for (j.sort(function(a, b) {
                        return a.x - b.x
                    }), h = new m(1, 1, null), n = l; --n > -1;) g = j[n], h = new m(g.x, g.y, h);
                this._prev = new m(0, 0, 0 !== h.t ? h : h.next)
            }, !0), q = c.prototype = new a, q.constructor = c, q.getRatio = function(a) {
                var b = this._prev;
                if (a > b.t) {
                    for (; b.next && a >= b.t;) b = b.next;
                    b = b.prev
                } else
                    for (; b.prev && a <= b.t;) b = b.prev;
                return this._prev = b, b.v + (a - b.t) / b.gap * b.c
            }, q.config = function(a) {
                return new c(a)
            }, c.ease = new c, l("Bounce", j("BounceOut", function(a) {
                return 1 / 2.75 > a ? 7.5625 * a * a : 2 / 2.75 > a ? 7.5625 * (a -= 1.5 / 2.75) * a + .75 : 2.5 / 2.75 > a ? 7.5625 * (a -= 2.25 / 2.75) * a + .9375 : 7.5625 * (a -= 2.625 / 2.75) * a + .984375
            }), j("BounceIn", function(a) {
                return (a = 1 - a) < 1 / 2.75 ? 1 - 7.5625 * a * a : 2 / 2.75 > a ? 1 - (7.5625 * (a -= 1.5 / 2.75) * a + .75) : 2.5 / 2.75 > a ? 1 - (7.5625 * (a -= 2.25 / 2.75) * a + .9375) : 1 - (7.5625 * (a -= 2.625 / 2.75) * a + .984375)
            }), j("BounceInOut", function(a) {
                var b = .5 > a;
                return a = b ? 1 - 2 * a : 2 * a - 1, a = 1 / 2.75 > a ? 7.5625 * a * a : 2 / 2.75 > a ? 7.5625 * (a -= 1.5 / 2.75) * a + .75 : 2.5 / 2.75 > a ? 7.5625 * (a -= 2.25 / 2.75) * a + .9375 : 7.5625 * (a -= 2.625 / 2.75) * a + .984375, b ? .5 * (1 - a) : .5 * a + .5
            })), l("Circ", j("CircOut", function(a) {
                return Math.sqrt(1 - (a -= 1) * a)
            }), j("CircIn", function(a) {
                return -(Math.sqrt(1 - a * a) - 1)
            }), j("CircInOut", function(a) {
                return (a *= 2) < 1 ? -.5 * (Math.sqrt(1 - a * a) - 1) : .5 * (Math.sqrt(1 - (a -= 2) * a) + 1)
            })), d = function(b, c, d) {
                var e = i("easing." + b, function(a, b) {
                        this._p1 = a || 1, this._p2 = b || d, this._p3 = this._p2 / g * (Math.asin(1 / this._p1) || 0)
                    }, !0),
                    f = e.prototype = new a;
                return f.constructor = e, f.getRatio = c, f.config = function(a, b) {
                    return new e(a, b)
                }, e
            }, l("Elastic", d("ElasticOut", function(a) {
                return this._p1 * Math.pow(2, -10 * a) * Math.sin((a - this._p3) * g / this._p2) + 1
            }, .3), d("ElasticIn", function(a) {
                return -(this._p1 * Math.pow(2, 10 * (a -= 1)) * Math.sin((a - this._p3) * g / this._p2))
            }, .3), d("ElasticInOut", function(a) {
                return (a *= 2) < 1 ? -.5 * this._p1 * Math.pow(2, 10 * (a -= 1)) * Math.sin((a - this._p3) * g / this._p2) : this._p1 * Math.pow(2, -10 * (a -= 1)) * Math.sin((a - this._p3) * g / this._p2) * .5 + 1
            }, .45)), l("Expo", j("ExpoOut", function(a) {
                return 1 - Math.pow(2, -10 * a)
            }), j("ExpoIn", function(a) {
                return Math.pow(2, 10 * (a - 1)) - .001
            }), j("ExpoInOut", function(a) {
                return (a *= 2) < 1 ? .5 * Math.pow(2, 10 * (a - 1)) : .5 * (2 - Math.pow(2, -10 * (a - 1)))
            })), l("Sine", j("SineOut", function(a) {
                return Math.sin(a * h)
            }), j("SineIn", function(a) {
                return -Math.cos(a * h) + 1
            }), j("SineInOut", function(a) {
                return -.5 * (Math.cos(Math.PI * a) - 1)
            })), i("easing.EaseLookup", {
                find: function(b) {
                    return a.map[b]
                }
            }, !0), k(e.SlowMo, "SlowMo", "ease,"), k(c, "RoughEase", "ease,"), k(b, "SteppedEase", "ease,"), o
        }, !0)
    }), window._gsDefine && window._gsQueue.pop()(), define("easing", function(a) {
        return function() {
            var b;
            return b || a.easing
        }
    }(this)), define("audio/ThumpAudioInstance", ["soundjs", "tweenMax", "easing"], function() {
        var a = function() {
            this.onFileLoad = this.onFileLoad.bind(this), this.onComplete = this.onComplete.bind(this), this.onFailed = this.onFailed.bind(this), this.onSucceeded = this.onSucceeded.bind(this)
        };
        a.useWebAudio = function() {
            try {
                return window.AudioContext = window.AudioContext || window.webkitAudioContext, new window.AudioContext, !0
            } catch (a) {
                return !1
            }
        }();
        var b = a.prototype;
        return createjs.EventDispatcher.initialize(b), Object.defineProperty(b, "isPlaying", {
            get: function() {
                return this._isPlaying
            }
        }), Object.defineProperty(b, "isLoading", {
            get: function() {
                return this._isLoading
            }
        }), Object.defineProperty(b, "isLoaded", {
            get: function() {
                try {
                    return createjs.Sound.loadComplete(this.id)
                } catch (a) {
                    return !1
                }
            }
        }), Object.defineProperty(b, "mute", {
            get: function() {
                return this._mute
            },
            set: function(a) {
                this._mute = a, this.applyTransform()
            }
        }), Object.defineProperty(b, "volume", {
            get: function() {
                return this._volume
            },
            set: function(a) {
                isNaN(a) || (0 > a ? a = 0 : a > 1 && (a = 1), this._volume = a, this.applyTransform())
            }
        }), Object.defineProperty(b, "pan", {
            get: function() {
                return this._pan
            },
            set: function(a) {
                a > 1 ? a = 1 : -1 > a && (a = -1), this._pan = a, this.applyTransform()
            }
        }), Object.defineProperty(b, "position", {
            get: function() {
                return this.instance ? this.instance.getPosition() : 0
            }
        }), Object.defineProperty(b, "duration", {
            get: function() {
                return this.instance ? this.instance.getDuration() : 0
            }
        }), b.init = function(a, b, c, d) {
            return this.id = b, this.src = c, this.type = a, this.preload = d, this.instance = null, this._mute = !1, this._volume = 1, this._pan = 0, this._fadeCoefficient = 1, this._isPlaying = !1, this._timeline = null, this._timer = null, this._playOnLoaded = !1, this._isLoading = !1, this._applyWhenSucceededQueue = [], d && this.load(), this
        }, b.load = function() {
            return this._isLoading || this.isLoaded || (this._isLoading = !0, createjs.EventDispatcher.initialize(this), createjs.Sound.registerSound(this.src, this.id), createjs.Sound.addEventListener("fileload", this.onFileLoad, null, !0)), this
        }, b.onFileLoad = function(a) {
            a.id === this.id && this.isLoaded && (this._isLoading = !1, this.instance = createjs.Sound.createInstance(this.id), this.instance.addEventListener("complete", this.onComplete), this.instance.addEventListener("failed", this.onFailed), this.dispatchEvent({
                type: "loaded",
                id: this.id,
                src: this.src
            }), this._playOnLoaded && this.play(this._playArguments))
        }, b.applyWhenSucceeded = function(a, b) {
            b || (b = []), this._applyWhenSucceededQueue.push({
                func: a,
                parameters: b
            })
        }, b.executeApplyWhenSucceededQueue = function() {
            for (var a; this._applyWhenSucceededQueue.length;) a = this._applyWhenSucceededQueue.shift(), a.func.apply(this, a.parameters)
        }, b.onFailed = function(a) {
            console.log(a)
        }, b.play = function(a) {
            if (this.isLoaded || this._isLoading) {
                if (this.instance) {
                    this.instance.addEventListener("succeeded", this.onSucceeded);
                    var b = a ? -1 : 0,
                        c = {
                            interrupt: createjs.Sound.INTERRUPT_ANY,
                            loop: b
                        };
                    try {
                        "object" == typeof a ? (a.interrupt = createjs.Sound.INTERRUPT_ANY, this.instance.play(a)) : this.instance.play(c)
                    } catch (d) {}
                    this._isPlaying = !0
                }
            } else this._playArguments = a, this._playOnLoaded = !0;
            return this
        }, b.onSucceeded = function() {
            this.applyTransform(), this.executeApplyWhenSucceededQueue()
        }, b.pause = function() {
            return this._playOnLoaded = !1, this._isPlaying = !1, this.isLoading ? this.applyWhenSucceeded(this.pause) : this.instance.pause(), this
        }, b.resume = function() {
            return this.isLoaded ? (this.instance.resume(), this._isPlaying = !0) : this.applyWhenSucceeded(this.resume), this
        }, b.seek = function(a) {
            return this.isLoaded ? this.instance.setPosition(a) : this.applyWhenSucceeded(this.seek, [a]), this
        }, b.stop = function() {
            if (this.isLoaded) {
                try {
                    this.instance.stop()
                } catch (a) {}
                this._isPlaying = !1
            } else this.applyWhenSucceeded(this.stop);
            return this
        }, b.fadeIn = function(a) {
            return a = a || 5, this.isLoaded ? (this._fadeCoefficient = 0, this.fadeTransition(a, !1, 1)) : this.applyWhenSucceeded(this.fadeIn, [a]), this
        }, b.fadeOut = function(a) {
            return a = a || 5, this.isLoaded ? this.fadeTransition(a, !0, 0) : this.applyWhenSucceeded(this.fadeOut, [a]), this
        }, b.fadeTransition = function(a, b, c) {
            var d;
            this.isLoaded ? (this._timeline && this._timeline.kill(), d = {
                onUpdate: function() {
                    this.applyTransform()
                },
                onUpdateScope: this,
                onComplete: function(a) {
                    a && this.stop()
                },
                onCompleteParams: [b],
                onCompleteScope: this
            }, this._timeline = new TimelineMax(d), this._timeline.insert(TweenMax.to(this, a, {
                ease: Linear.easeNone,
                _fadeCoefficient: c
            })), this.applyTransform()) : this.applyWhenSucceeded(this.fadeTransition, [a, b, c])
        }, b.applyTransform = function() {
            this.isLoaded ? (this.instance.setMute(this._mute), this.instance.setVolume(this._volume * this._fadeCoefficient), this.instance.setPan(this._pan)) : this.applyWhenSucceeded(this.applyTransform)
        }, b.activateTimer = function() {
            this.isLoaded ? this._timer || (this._timer = setInterval(function() {
                this._isPlaying && this.dispatchEvent({
                    type: "positionUpdate",
                    position: this.position,
                    duration: this.duration
                })
            }.bind(this), 100)) : this.applyWhenSucceeded(this.activateTimer)
        }, b.cancelTimer = function() {
            this.isLoaded ? this._timer && (clearInterval(this._timer),
                this._timer = null) : this.applyWhenSucceeded(this.cancelTimer)
        }, b.onComplete = function() {
            this.stop()
        }, b.dispose = function() {
            createjs.Sound.removeEventListener("fileload", this.onFileLoad), this._timeline && this._timeline.kill(), this._timeline = null, this.cancelTimer(), this.instance && (this.stop(), this.instance.removeEventListener("complete", this.onComplete), this.instance.removeEventListener("failed", this.onFailed), this.instance.removeEventListener("succeeded", this.onSucceeded)), createjs.Sound.remove(this.id), this.instance = null
        }, b.toString = function() {
            return "ThumpAudioInstance: " + this.id
        }, a
    }), define("config", [], function() {
        var a = {},
            b = {
                localhost: "development",
                "www.stg.sbs.com.au": "staging",
                "www.sbs.com.au": "production",
                "sbs.com.au": "production"
            }[window.location.hostname],
            c = !1,
            d = !1;
        ("production" == b || "staging" == b) && (d = !0);
        var e = !1;
        return "ie" == Detectizr.browser.name || "production" != b && "staging" != b || (e = !0), a.deploymentLevel = b, a.isCORSOnDataAvailable = c, a.isCORSOnMediaAvailable = d, a.isCORSOnImagesAvailable = e, a.cdnBasePath = "http://videocdn.sbs.com.au/u/video/theboat/", a.dataBasePath = "", a.videoBasePath = "", a.audioBasePath = "", a.imagesBasePath = "", a.htmlBasePath = "", c && (a.dataBasePath = a.cdnBasePath + a.dataBasePath), e && (a.imagesBasePath = a.cdnBasePath + a.imagesBasePath), d && (a.videoBasePath = a.cdnBasePath + a.videoBasePath, a.audioBasePath = a.cdnBasePath + a.audioBasePath), a.isKioskMode = window.location.search.indexOf("kioskMode") > -1, a
    }), window.Modernizr = function(a, b, c) {
        function d(a) {
            t.cssText = a
        }

        function e(a, b) {
            return d(x.join(a + ";") + (b || ""))
        }

        function f(a, b) {
            return typeof a === b
        }

        function g(a, b) {
            return !!~("" + a).indexOf(b)
        }

        function h(a, b) {
            for (var d in a) {
                var e = a[d];
                if (!g(e, "-") && t[e] !== c) return "pfx" == b ? e : !0
            }
            return !1
        }

        function i(a, b, d) {
            for (var e in a) {
                var g = b[a[e]];
                if (g !== c) return d === !1 ? a[e] : f(g, "function") ? g.bind(d || b) : g
            }
            return !1
        }

        function j(a, b, c) {
            var d = a.charAt(0).toUpperCase() + a.slice(1),
                e = (a + " " + z.join(d + " ") + d).split(" ");
            return f(b, "string") || f(b, "undefined") ? h(e, b) : (e = (a + " " + A.join(d + " ") + d).split(" "), i(e, b, c))
        }

        function k() {
            o.input = function(c) {
                for (var d = 0, e = c.length; e > d; d++) E[c[d]] = !!(c[d] in u);
                return E.list && (E.list = !(!b.createElement("datalist") || !a.HTMLDataListElement)), E
            }("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")), o.inputtypes = function(a) {
                for (var d, e, f, g = 0, h = a.length; h > g; g++) u.setAttribute("type", e = a[g]), d = "text" !== u.type, d && (u.value = v, u.style.cssText = "position:absolute;visibility:hidden;", /^range$/.test(e) && u.style.WebkitAppearance !== c ? (q.appendChild(u), f = b.defaultView, d = f.getComputedStyle && "textfield" !== f.getComputedStyle(u, null).WebkitAppearance && 0 !== u.offsetHeight, q.removeChild(u)) : /^(search|tel)$/.test(e) || (d = /^(url|email)$/.test(e) ? u.checkValidity && u.checkValidity() === !1 : u.value != v)), D[a[g]] = !!d;
                return D
            }("search tel url email datetime date month week time datetime-local number range color".split(" "))
        }
        var l, m, n = "2.8.3",
            o = {},
            p = !0,
            q = b.documentElement,
            r = "modernizr",
            s = b.createElement(r),
            t = s.style,
            u = b.createElement("input"),
            v = ":)",
            w = {}.toString,
            x = " -webkit- -moz- -o- -ms- ".split(" "),
            y = "Webkit Moz O ms",
            z = y.split(" "),
            A = y.toLowerCase().split(" "),
            B = {
                svg: "http://www.w3.org/2000/svg"
            },
            C = {},
            D = {},
            E = {},
            F = [],
            G = F.slice,
            H = function(a, c, d, e) {
                var f, g, h, i, j = b.createElement("div"),
                    k = b.body,
                    l = k || b.createElement("body");
                if (parseInt(d, 10))
                    for (; d--;) h = b.createElement("div"), h.id = e ? e[d] : r + (d + 1), j.appendChild(h);
                return f = ["&#173;", '<style id="s', r, '">', a, "</style>"].join(""), j.id = r, (k ? j : l).innerHTML += f, l.appendChild(j), k || (l.style.background = "", l.style.overflow = "hidden", i = q.style.overflow, q.style.overflow = "hidden", q.appendChild(l)), g = c(j, a), k ? j.parentNode.removeChild(j) : (l.parentNode.removeChild(l), q.style.overflow = i), !!g
            },
            I = function() {
                function a(a, e) {
                    e = e || b.createElement(d[a] || "div"), a = "on" + a;
                    var g = a in e;
                    return g || (e.setAttribute || (e = b.createElement("div")), e.setAttribute && e.removeAttribute && (e.setAttribute(a, ""), g = f(e[a], "function"), f(e[a], "undefined") || (e[a] = c), e.removeAttribute(a))), e = null, g
                }
                var d = {
                    select: "input",
                    change: "input",
                    submit: "form",
                    reset: "form",
                    error: "img",
                    load: "img",
                    abort: "img"
                };
                return a
            }(),
            J = {}.hasOwnProperty;
        m = f(J, "undefined") || f(J.call, "undefined") ? function(a, b) {
            return b in a && f(a.constructor.prototype[b], "undefined")
        } : function(a, b) {
            return J.call(a, b)
        }, Function.prototype.bind || (Function.prototype.bind = function(a) {
            var b = this;
            if ("function" != typeof b) throw new TypeError;
            var c = G.call(arguments, 1),
                d = function() {
                    if (this instanceof d) {
                        var e = function() {};
                        e.prototype = b.prototype;
                        var f = new e,
                            g = b.apply(f, c.concat(G.call(arguments)));
                        return Object(g) === g ? g : f
                    }
                    return b.apply(a, c.concat(G.call(arguments)))
                };
            return d
        }), C.flexbox = function() {
            return j("flexWrap")
        }, C.canvas = function() {
            var a = b.createElement("canvas");
            return !(!a.getContext || !a.getContext("2d"))
        }, C.canvastext = function() {
            return !(!o.canvas || !f(b.createElement("canvas").getContext("2d").fillText, "function"))
        }, C.webgl = function() {
            return !!a.WebGLRenderingContext
        }, C.touch = function() {
            var c;
            return "ontouchstart" in a || a.DocumentTouch && b instanceof DocumentTouch ? c = !0 : H(["@media (", x.join("touch-enabled),("), r, ")", "{#modernizr{top:9px;position:absolute}}"].join(""), function(a) {
                c = 9 === a.offsetTop
            }), c
        }, C.geolocation = function() {
            return "geolocation" in navigator
        }, C.postmessage = function() {
            return !!a.postMessage
        }, C.websqldatabase = function() {
            return !!a.openDatabase
        }, C.indexedDB = function() {
            return !!j("indexedDB", a)
        }, C.hashchange = function() {
            return I("hashchange", a) && (b.documentMode === c || b.documentMode > 7)
        }, C.history = function() {
            return !(!a.history || !history.pushState)
        }, C.draganddrop = function() {
            var a = b.createElement("div");
            return "draggable" in a || "ondragstart" in a && "ondrop" in a
        }, C.websockets = function() {
            return "WebSocket" in a || "MozWebSocket" in a
        }, C.rgba = function() {
            return d("background-color:rgba(150,255,150,.5)"), g(t.backgroundColor, "rgba")
        }, C.hsla = function() {
            return d("background-color:hsla(120,40%,100%,.5)"), g(t.backgroundColor, "rgba") || g(t.backgroundColor, "hsla")
        }, C.multiplebgs = function() {
            return d("background:url(https://),url(https://),red url(https://)"), /(url\s*\(.*?){3}/.test(t.background)
        }, C.backgroundsize = function() {
            return j("backgroundSize")
        }, C.borderimage = function() {
            return j("borderImage")
        }, C.borderradius = function() {
            return j("borderRadius")
        }, C.boxshadow = function() {
            return j("boxShadow")
        }, C.textshadow = function() {
            return "" === b.createElement("div").style.textShadow
        }, C.opacity = function() {
            return e("opacity:.55"), /^0.55$/.test(t.opacity)
        }, C.cssanimations = function() {
            return j("animationName")
        }, C.csscolumns = function() {
            return j("columnCount")
        }, C.cssgradients = function() {
            var a = "background-image:",
                b = "gradient(linear,left top,right bottom,from(#9f9),to(white));",
                c = "linear-gradient(left top,#9f9, white);";
            return d((a + "-webkit- ".split(" ").join(b + a) + x.join(c + a)).slice(0, -a.length)), g(t.backgroundImage, "gradient")
        }, C.cssreflections = function() {
            return j("boxReflect")
        }, C.csstransforms = function() {
            return !!j("transform")
        }, C.csstransforms3d = function() {
            var a = !!j("perspective");
            return a && "webkitPerspective" in q.style && H("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}", function(b) {
                a = 9 === b.offsetLeft && 3 === b.offsetHeight
            }), a
        }, C.csstransitions = function() {
            return j("transition")
        }, C.fontface = function() {
            var a;
            return H('@font-face {font-family:"font";src:url("https://")}', function(c, d) {
                var e = b.getElementById("smodernizr"),
                    f = e.sheet || e.styleSheet,
                    g = f ? f.cssRules && f.cssRules[0] ? f.cssRules[0].cssText : f.cssText || "" : "";
                a = /src/i.test(g) && 0 === g.indexOf(d.split(" ")[0])
            }), a
        }, C.generatedcontent = function() {
            var a;
            return H(["#", r, "{font:0/0 a}#", r, ':after{content:"', v, '";visibility:hidden;font:3px/1 a}'].join(""), function(b) {
                a = b.offsetHeight >= 3
            }), a
        }, C.video = function() {
            var a = b.createElement("video"),
                c = !1;
            try {
                (c = !!a.canPlayType) && (c = new Boolean(c), c.ogg = a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/, ""), c.h264 = a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/, ""), c.webm = a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/, ""))
            } catch (d) {}
            return c
        }, C.audio = function() {
            var a = b.createElement("audio"),
                c = !1;
            try {
                (c = !!a.canPlayType) && (c = new Boolean(c), c.ogg = a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""), c.mp3 = a.canPlayType("audio/mpeg;").replace(/^no$/, ""), c.wav = a.canPlayType('audio/wav; codecs="1"').replace(/^no$/, ""), c.m4a = (a.canPlayType("audio/x-m4a;") || a.canPlayType("audio/aac;")).replace(/^no$/, ""))
            } catch (d) {}
            return c
        }, C.localstorage = function() {
            try {
                return localStorage.setItem(r, r), localStorage.removeItem(r), !0
            } catch (a) {
                return !1
            }
        }, C.sessionstorage = function() {
            try {
                return sessionStorage.setItem(r, r), sessionStorage.removeItem(r), !0
            } catch (a) {
                return !1
            }
        }, C.webworkers = function() {
            return !!a.Worker
        }, C.applicationcache = function() {
            return !!a.applicationCache
        }, C.svg = function() {
            return !!b.createElementNS && !!b.createElementNS(B.svg, "svg").createSVGRect
        }, C.inlinesvg = function() {
            var a = b.createElement("div");
            return a.innerHTML = "<svg/>", (a.firstChild && a.firstChild.namespaceURI) == B.svg
        }, C.smil = function() {
            return !!b.createElementNS && /SVGAnimate/.test(w.call(b.createElementNS(B.svg, "animate")))
        }, C.svgclippaths = function() {
            return !!b.createElementNS && /SVGClipPath/.test(w.call(b.createElementNS(B.svg, "clipPath")))
        };
        for (var K in C) m(C, K) && (l = K.toLowerCase(), o[l] = C[K](), F.push((o[l] ? "" : "no-") + l));
        return o.input || k(), o.addTest = function(a, b) {
                if ("object" == typeof a)
                    for (var d in a) m(a, d) && o.addTest(d, a[d]);
                else {
                    if (a = a.toLowerCase(), o[a] !== c) return o;
                    b = "function" == typeof b ? b() : b, "undefined" != typeof p && p && (q.className += " " + (b ? "" : "no-") + a), o[a] = b
                }
                return o
            }, d(""), s = u = null,
            function(a, b) {
                function c(a, b) {
                    var c = a.createElement("p"),
                        d = a.getElementsByTagName("head")[0] || a.documentElement;
                    return c.innerHTML = "x<style>" + b + "</style>", d.insertBefore(c.lastChild, d.firstChild)
                }

                function d() {
                    var a = s.elements;
                    return "string" == typeof a ? a.split(" ") : a
                }

                function e(a) {
                    var b = r[a[p]];
                    return b || (b = {}, q++, a[p] = q, r[q] = b), b
                }

                function f(a, c, d) {
                    if (c || (c = b), k) return c.createElement(a);
                    d || (d = e(c));
                    var f;
                    return f = d.cache[a] ? d.cache[a].cloneNode() : o.test(a) ? (d.cache[a] = d.createElem(a)).cloneNode() : d.createElem(a), !f.canHaveChildren || n.test(a) || f.tagUrn ? f : d.frag.appendChild(f)
                }

                function g(a, c) {
                    if (a || (a = b), k) return a.createDocumentFragment();
                    c = c || e(a);
                    for (var f = c.frag.cloneNode(), g = 0, h = d(), i = h.length; i > g; g++) f.createElement(h[g]);
                    return f
                }

                function h(a, b) {
                    b.cache || (b.cache = {}, b.createElem = a.createElement, b.createFrag = a.createDocumentFragment, b.frag = b.createFrag()), a.createElement = function(c) {
                        return s.shivMethods ? f(c, a, b) : b.createElem(c)
                    }, a.createDocumentFragment = Function("h,f", "return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&(" + d().join().replace(/[\w\-]+/g, function(a) {
                        return b.createElem(a), b.frag.createElement(a), 'c("' + a + '")'
                    }) + ");return n}")(s, b.frag)
                }

                function i(a) {
                    a || (a = b);
                    var d = e(a);
                    return !s.shivCSS || j || d.hasCSS || (d.hasCSS = !!c(a, "article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")), k || h(a, d), a
                }
                var j, k, l = "3.7.0",
                    m = a.html5 || {},
                    n = /^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,
                    o = /^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,
                    p = "_html5shiv",
                    q = 0,
                    r = {};
                ! function() {
                    try {
                        var a = b.createElement("a");
                        a.innerHTML = "<xyz></xyz>", j = "hidden" in a, k = 1 == a.childNodes.length || function() {
                            b.createElement("a");
                            var a = b.createDocumentFragment();
                            return "undefined" == typeof a.cloneNode || "undefined" == typeof a.createDocumentFragment || "undefined" == typeof a.createElement
                        }()
                    } catch (c) {
                        j = !0, k = !0
                    }
                }();
                var s = {
                    elements: m.elements || "abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",
                    version: l,
                    shivCSS: m.shivCSS !== !1,
                    supportsUnknownElements: k,
                    shivMethods: m.shivMethods !== !1,
                    type: "default",
                    shivDocument: i,
                    createElement: f,
                    createDocumentFragment: g
                };
                a.html5 = s, i(b)
            }(this, b), o._version = n, o._prefixes = x, o._domPrefixes = A, o._cssomPrefixes = z, o.hasEvent = I, o.testProp = function(a) {
                return h([a])
            }, o.testAllProps = j, o.testStyles = H, o.prefixed = function(a, b, c) {
                return b ? j(a, b, c) : j(a, "pfx")
            }, q.className = q.className.replace(/(^|\s)no-js(\s|$)/, "$1$2") + (p ? " js " + F.join(" ") : ""), o
    }(this, this.document),
    function(a, b, c) {
        function d(a) {
            return "[object Function]" == q.call(a)
        }

        function e(a) {
            return "string" == typeof a
        }

        function f() {}

        function g(a) {
            return !a || "loaded" == a || "complete" == a || "uninitialized" == a
        }

        function h() {
            var a = r.shift();
            s = 1, a ? a.t ? o(function() {
                ("c" == a.t ? m.injectCss : m.injectJs)(a.s, 0, a.a, a.x, a.e, 1)
            }, 0) : (a(), h()) : s = 0
        }

        function i(a, c, d, e, f, i, j) {
            function k(b) {
                if (!n && g(l.readyState) && (t.r = n = 1, !s && h(), l.onload = l.onreadystatechange = null, b)) {
                    "img" != a && o(function() {
                        v.removeChild(l)
                    }, 50);
                    for (var d in A[c]) A[c].hasOwnProperty(d) && A[c][d].onload()
                }
            }
            var j = j || m.errorTimeout,
                l = b.createElement(a),
                n = 0,
                q = 0,
                t = {
                    t: d,
                    s: c,
                    e: f,
                    a: i,
                    x: j
                };
            1 === A[c] && (q = 1, A[c] = []), "object" == a ? l.data = c : (l.src = c, l.type = a), l.width = l.height = "0", l.onerror = l.onload = l.onreadystatechange = function() {
                k.call(this, q)
            }, r.splice(e, 0, t), "img" != a && (q || 2 === A[c] ? (v.insertBefore(l, u ? null : p), o(k, j)) : A[c].push(l))
        }

        function j(a, b, c, d, f) {
            return s = 0, b = b || "j", e(a) ? i("c" == b ? x : w, a, b, this.i++, c, d, f) : (r.splice(this.i++, 0, a), 1 == r.length && h()), this
        }

        function k() {
            var a = m;
            return a.loader = {
                load: j,
                i: 0
            }, a
        }
        var l, m, n = b.documentElement,
            o = a.setTimeout,
            p = b.getElementsByTagName("script")[0],
            q = {}.toString,
            r = [],
            s = 0,
            t = "MozAppearance" in n.style,
            u = t && !!b.createRange().compareNode,
            v = u ? n : p.parentNode,
            n = a.opera && "[object Opera]" == q.call(a.opera),
            n = !!b.attachEvent && !n,
            w = t ? "object" : n ? "script" : "img",
            x = n ? "script" : w,
            y = Array.isArray || function(a) {
                return "[object Array]" == q.call(a)
            },
            z = [],
            A = {},
            B = {
                timeout: function(a, b) {
                    return b.length && (a.timeout = b[0]), a
                }
            };
        m = function(a) {
            function b(a) {
                var b, c, d, a = a.split("!"),
                    e = z.length,
                    f = a.pop(),
                    g = a.length,
                    f = {
                        url: f,
                        origUrl: f,
                        prefixes: a
                    };
                for (c = 0; g > c; c++) d = a[c].split("="), (b = B[d.shift()]) && (f = b(f, d));
                for (c = 0; e > c; c++) f = z[c](f);
                return f
            }

            function g(a, e, f, g, h) {
                var i = b(a),
                    j = i.autoCallback;
                i.url.split(".").pop().split("?").shift(), i.bypass || (e && (e = d(e) ? e : e[a] || e[g] || e[a.split("/").pop().split("?")[0]]), i.instead ? i.instead(a, e, f, g, h) : (A[i.url] ? i.noexec = !0 : A[i.url] = 1, f.load(i.url, i.forceCSS || !i.forceJS && "css" == i.url.split(".").pop().split("?").shift() ? "c" : c, i.noexec, i.attrs, i.timeout), (d(e) || d(j)) && f.load(function() {
                    k(), e && e(i.origUrl, h, g), j && j(i.origUrl, h, g), A[i.url] = 2
                })))
            }

            function h(a, b) {
                function c(a, c) {
                    if (a) {
                        if (e(a)) c || (l = function() {
                            var a = [].slice.call(arguments);
                            m.apply(this, a), n()
                        }), g(a, l, b, 0, j);
                        else if (Object(a) === a)
                            for (i in h = function() {
                                    var b, c = 0;
                                    for (b in a) a.hasOwnProperty(b) && c++;
                                    return c
                                }(), a) a.hasOwnProperty(i) && (!c && !--h && (d(l) ? l = function() {
                                var a = [].slice.call(arguments);
                                m.apply(this, a), n()
                            } : l[i] = function(a) {
                                return function() {
                                    var b = [].slice.call(arguments);
                                    a && a.apply(this, b), n()
                                }
                            }(m[i])), g(a[i], l, b, i, j))
                    } else !c && n()
                }
                var h, i, j = !!a.test,
                    k = a.load || a.both,
                    l = a.callback || f,
                    m = l,
                    n = a.complete || f;
                c(j ? a.yep : a.nope, !!k), k && c(k)
            }
            var i, j, l = this.yepnope.loader;
            if (e(a)) g(a, 0, l, 0);
            else if (y(a))
                for (i = 0; i < a.length; i++) j = a[i], e(j) ? g(j, 0, l, 0) : y(j) ? m(j) : Object(j) === j && h(j, l);
            else Object(a) === a && h(a, l)
        }, m.addPrefix = function(a, b) {
            B[a] = b
        }, m.addFilter = function(a) {
            z.push(a)
        }, m.errorTimeout = 1e4, null == b.readyState && b.addEventListener && (b.readyState = "loading", b.addEventListener("DOMContentLoaded", l = function() {
            b.removeEventListener("DOMContentLoaded", l, 0), b.readyState = "complete"
        }, 0)), a.yepnope = k(), a.yepnope.executeStack = h, a.yepnope.injectJs = function(a, c, d, e, i, j) {
            var k, l, n = b.createElement("script"),
                e = e || m.errorTimeout;
            n.src = a;
            for (l in d) n.setAttribute(l, d[l]);
            c = j ? h : c || f, n.onreadystatechange = n.onload = function() {
                !k && g(n.readyState) && (k = 1, c(), n.onload = n.onreadystatechange = null)
            }, o(function() {
                k || (k = 1, c(1))
            }, e), i ? n.onload() : p.parentNode.insertBefore(n, p)
        }, a.yepnope.injectCss = function(a, c, d, e, g, i) {
            var j, e = b.createElement("link"),
                c = i ? h : c || f;
            e.href = a, e.rel = "stylesheet", e.type = "text/css";
            for (j in d) e.setAttribute(j, d[j]);
            g || (p.parentNode.insertBefore(e, p), o(c, 0))
        }
    }(this, document), Modernizr.load = function() {
        yepnope.apply(window, [].slice.call(arguments, 0))
    }, Modernizr.addTest("cors", !!(window.XMLHttpRequest && "withCredentials" in new XMLHttpRequest)), Modernizr.addTest("devicemotion", "DeviceMotionEvent" in window), Modernizr.addTest("deviceorientation", "DeviceOrientationEvent" in window), Modernizr.addTest("fullscreen", function() {
        for (var a = 0; a < Modernizr._domPrefixes.length; a++)
            if (document[Modernizr._domPrefixes[a].toLowerCase() + "CancelFullScreen"]) return !0;
        return !!document.cancelFullScreen || !1
    }), Modernizr.addTest("vibrate", !!Modernizr.prefixed("vibrate", navigator)),
    function() {
        if (Modernizr.webgl) {
            var a, b, c;
            try {
                a = document.createElement("canvas"), b = a.getContext("webgl") || a.getContext("experimental-webgl"), c = b.getSupportedExtensions()
            } catch (d) {
                return
            }
            Modernizr.webgl = new Boolean(void 0 === b ? !1 : !0);
            for (var e = -1, f = c.length; ++e < f;) Modernizr.webgl[c[e]] = !0;
            window.TEST && TEST.audvid && TEST.audvid.push("webgl"), a = void 0
        }
    }(), define("modernizr", function(a) {
        return function() {
            var b;
            return b || a.Modernizr
        }
    }(this)), define("audio/Thump", ["audio/ThumpAudioInstance", "config", "jquery", "underscore", "modernizr", "soundjs"], function(a, b, c, d, e, f) {
        var g = function() {};
        return f.Sound.registerPlugins([f.HTMLAudioPlugin]), f.Sound.alternateExtensions = ["mp3", "ogg"], f.EventDispatcher.initialize(g), g.audioInstanceLookup = {}, g.isPreloadComplete = !1, g.preloadInstanceCount = 0, g.preloadInstanceLoadedCount = 0, Object.defineProperty(g, "progress", {
            get: function() {
                return 0 === g.preloadInstanceCount ? 1 : g.preloadInstanceCount ? g.preloadInstanceLoadedCount / g.preloadInstanceCount : 0
            }
        }), Object.defineProperty(g, "volume", {
            get: function() {
                return f.Sound.getVolume()
            },
            set: function(a) {
                f.Sound.setVolume(a)
            }
        }), Object.defineProperty(g, "mute", {
            get: function() {
                return f.Sound.getMute()
            },
            set: function(a) {
                f.Sound.setMute(a)
            }
        }), Object.defineProperty(g, "autoPlaySupported", {
            get: function() {
                return "tablet" != Detectizr.device.type && "mobile" != Detectizr.device.type
            }
        }), g.init = function(e) {
            e = e || "data/audio-manifest.json", c.ajax({
                dataType: "json",
                url: e,
                error: function() {
                    console.error("Thump: error loading manifest. Is the path correct? Is the json well-formed?")
                },
                success: function(c) {
                    var e, f, h;
                    g._manifest = c, d.each(g._manifest.sources, function(a) {
                        d.each(a, function(a) {
                            a.src = b.audioBasePath + a.src
                        })
                    });
                    for (e in c.sources.sfx) f = {
                        id: e,
                        src: c.sources.sfx[e].src
                    }, h = (new a).init("sfx", e, f.src, !0), h.addEventListener("loaded", g.onPreloadInstanceLoaded), g.preloadInstanceCount++, g.audioInstanceLookup[e] = h;
                    for (e in c.sources.music) f = {
                        id: e,
                        src: c.sources.music[e].src
                    }, h = (new a).init("music", e, f.src, !1), g.audioInstanceLookup[e] = h;
                    g.dispatchEvent({
                        type: "initComplete",
                        manifest: c
                    })
                }
            })
        }, g.onPreloadInstanceLoaded = function(a) {
            var b = a.target;
            a.target.preload && (g.preloadInstanceLoadedCount++, g.dispatchEvent({
                type: "preloadProgress",
                id: a.id,
                src: a.src,
                instance: b
            }), g.preloadInstanceLoadedCount >= g.preloadInstanceCount && g.dispatchEvent({
                type: "preloadComplete"
            }))
        }, g.get = function(a) {
            try {
                return g.audioInstanceLookup[a]
            } catch (b) {
                return console.error("Whack: No sound instance exists for that ID"), !1
            }
        }, g.remove = function(a) {
            var b = g.audioInstanceLookup[a];
            b.dispose(), b = null, delete g.audioInstanceLookup[a]
        }, g.stopAll = function() {
            return f.Sound.stop(), g
        }, g
    }), define("tracking/Tracking", [], function() {
        var a = function() {};
        return a.init = function(b) {
            a.prefix = b
        }, a.sendCustomEvent = function(b) {
            console.log("tracking", b);
            try {
                window.sbs_s && (window.sbs_s.manageVars("clearVars"), window.sbs_s.contextData = {}, window.sbs_s.linkTrackVars = "", window.sbs_s.tl(!0, "o", a.prefix + "/" + b), window.sbs_s.manageVars("clearVars"))
            } catch (c) {
                console.log("tracking error")
            }
        }, a
    }), define("utils/inherit", [], function() {
        var a = {};
        return a.extend = function(a, b) {
            function c() {
                this.constructor = a
            }
            return c.prototype = b.prototype, a.prototype = new c
        }, a.promote = function(a, b) {
            var c = a.prototype,
                d = Object.getPrototypeOf && Object.getPrototypeOf(c) || c.__proto__;
            if (d) {
                c[(b += "_") + "constructor"] = d.constructor;
                for (var e in d) c.hasOwnProperty(e) && "function" == typeof d[e] && (c[b + e] = d[e])
            }
            return a
        }, a
    }), define("dat/utils/css", [], function() {
        return {
            load: function(a, b) {
                b = b || document;
                var c = b.createElement("link");
                c.type = "text/css", c.rel = "stylesheet", c.href = a, b.getElementsByTagName("head")[0].appendChild(c)
            },
            inject: function(a, b) {
                b = b || document;
                var c = document.createElement("style");
                c.type = "text/css", c.innerHTML = a, b.getElementsByTagName("head")[0].appendChild(c)
            }
        }
    }), define("text", ["module"], function(a) {
        "use strict";
        var b, c, d, e, f, g = ["Msxml2.XMLHTTP", "Microsoft.XMLHTTP", "Msxml2.XMLHTTP.4.0"],
            h = /^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,
            i = /<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,
            j = "undefined" != typeof location && location.href,
            k = j && location.protocol && location.protocol.replace(/\:/, ""),
            l = j && location.hostname,
            m = j && (location.port || void 0),
            n = {},
            o = a.config && a.config() || {};
        return b = {
            version: "2.0.12",
            strip: function(a) {
                if (a) {
                    a = a.replace(h, "");
                    var b = a.match(i);
                    b && (a = b[1])
                } else a = "";
                return a
            },
            jsEscape: function(a) {
                return a.replace(/(['\\])/g, "\\$1").replace(/[\f]/g, "\\f").replace(/[\b]/g, "\\b").replace(/[\n]/g, "\\n").replace(/[\t]/g, "\\t").replace(/[\r]/g, "\\r").replace(/[\u2028]/g, "\\u2028").replace(/[\u2029]/g, "\\u2029")
            },
            createXhr: o.createXhr || function() {
                var a, b, c;
                if ("undefined" != typeof XMLHttpRequest) return new XMLHttpRequest;
                if ("undefined" != typeof ActiveXObject)
                    for (b = 0; 3 > b; b += 1) {
                        c = g[b];
                        try {
                            a = new ActiveXObject(c)
                        } catch (d) {}
                        if (a) {
                            g = [c];
                            break
                        }
                    }
                return a
            },
            parseName: function(a) {
                var b, c, d, e = !1,
                    f = a.indexOf("."),
                    g = 0 === a.indexOf("./") || 0 === a.indexOf("../");
                return -1 !== f && (!g || f > 1) ? (b = a.substring(0, f), c = a.substring(f + 1, a.length)) : b = a, d = c || b, f = d.indexOf("!"), -1 !== f && (e = "strip" === d.substring(f + 1), d = d.substring(0, f), c ? c = d : b = d), {
                    moduleName: b,
                    ext: c,
                    strip: e
                }
            },
            xdRegExp: /^((\w+)\:)?\/\/([^\/\\]+)/,
            useXhr: function(a, c, d, e) {
                var f, g, h, i = b.xdRegExp.exec(a);
                return i ? (f = i[2], g = i[3], g = g.split(":"), h = g[1], g = g[0], !(f && f !== c || g && g.toLowerCase() !== d.toLowerCase() || (h || g) && h !== e)) : !0
            },
            finishLoad: function(a, c, d, e) {
                d = c ? b.strip(d) : d, o.isBuild && (n[a] = d), e(d)
            },
            load: function(a, c, d, e) {
                if (e && e.isBuild && !e.inlineText) return void d();
                o.isBuild = e && e.isBuild;
                var f = b.parseName(a),
                    g = f.moduleName + (f.ext ? "." + f.ext : ""),
                    h = c.toUrl(g),
                    i = o.useXhr || b.useXhr;
                return 0 === h.indexOf("empty:") ? void d() : void(!j || i(h, k, l, m) ? b.get(h, function(c) {
                    b.finishLoad(a, f.strip, c, d)
                }, function(a) {
                    d.error && d.error(a)
                }) : c([g], function(a) {
                    b.finishLoad(f.moduleName + "." + f.ext, f.strip, a, d)
                }))
            },
            write: function(a, c, d) {
                if (n.hasOwnProperty(c)) {
                    var e = b.jsEscape(n[c]);
                    d.asModule(a + "!" + c, "define(function () { return '" + e + "';});\n")
                }
            },
            writeFile: function(a, c, d, e, f) {
                var g = b.parseName(c),
                    h = g.ext ? "." + g.ext : "",
                    i = g.moduleName + h,
                    j = d.toUrl(g.moduleName + h) + ".js";
                b.load(i, d, function() {
                    var c = function(a) {
                        return e(j, a)
                    };
                    c.asModule = function(a, b) {
                        return e.asModule(a, j, b)
                    }, b.write(a, i, c, f)
                }, f)
            }
        }, "node" === o.env || !o.env && "undefined" != typeof process && process.versions && process.versions.node && !process.versions["node-webkit"] ? (c = require.nodeRequire("fs"), b.get = function(a, b, d) {
            try {
                var e = c.readFileSync(a, "utf8");
                0 === e.indexOf("\ufeff") && (e = e.substring(1)), b(e)
            } catch (f) {
                d && d(f)
            }
        }) : "xhr" === o.env || !o.env && b.createXhr() ? b.get = function(a, c, d, e) {
            var f, g = b.createXhr();
            if (g.open("GET", a, !0), e)
                for (f in e) e.hasOwnProperty(f) && g.setRequestHeader(f.toLowerCase(), e[f]);
            o.onXhr && o.onXhr(g, a), g.onreadystatechange = function() {
                var b, e;
                4 === g.readyState && (b = g.status || 0, b > 399 && 600 > b ? (e = new Error(a + " HTTP status: " + b), e.xhr = g, d && d(e)) : c(g.responseText), o.onXhrComplete && o.onXhrComplete(g, a))
            }, g.send(null)
        } : "rhino" === o.env || !o.env && "undefined" != typeof Packages && "undefined" != typeof java ? b.get = function(a, b) {
            var c, d, e = "utf-8",
                f = new java.io.File(a),
                g = java.lang.System.getProperty("line.separator"),
                h = new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(f), e)),
                i = "";
            try {
                for (c = new java.lang.StringBuffer, d = h.readLine(), d && d.length() && 65279 === d.charAt(0) && (d = d.substring(1)), null !== d && c.append(d); null !== (d = h.readLine());) c.append(g), c.append(d);
                i = String(c.toString())
            } finally {
                h.close()
            }
            b(i)
        } : ("xpconnect" === o.env || !o.env && "undefined" != typeof Components && Components.classes && Components.interfaces) && (d = Components.classes, e = Components.interfaces, Components.utils["import"]("resource://gre/modules/FileUtils.jsm"), f = "@mozilla.org/windows-registry-key;1" in d, b.get = function(a, b) {
            var c, g, h, i = {};
            f && (a = a.replace(/\//g, "\\")), h = new FileUtils.File(a);
            try {
                c = d["@mozilla.org/network/file-input-stream;1"].createInstance(e.nsIFileInputStream), c.init(h, 1, 0, !1), g = d["@mozilla.org/intl/converter-input-stream;1"].createInstance(e.nsIConverterInputStream), g.init(c, "utf-8", c.available(), e.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER), g.readString(c.available(), i), g.close(), c.close(), b(i.value)
            } catch (j) {
                throw new Error((h && h.path || "") + ": " + j)
            }
        }), b
    }), define("text!dat/gui/saveDialogue.html", [], function() {
        return '<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>'
    }), define("text!dat/gui/style.css", [], function() {
        return ".dg {\n  /** Clear list styles */\n  /* Auto-place container */\n  /* Auto-placed GUI's */\n  /* Line items that don't contain folders. */\n  /** Folder names */\n  /** Hides closed items */\n  /** Controller row */\n  /** Name-half (left) */\n  /** Controller-half (right) */\n  /** Controller placement */\n  /** Shorter number boxes when slider is present. */\n  /** Ensure the entire boolean and function row shows a hand */ }\n  .dg ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    clear: both; }\n  .dg.ac {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 0;\n    z-index: 0; }\n  .dg:not(.ac) .main {\n    /** Exclude mains in ac so that we don't hide close button */\n    overflow: hidden; }\n  .dg.main {\n    -webkit-transition: opacity 0.1s linear;\n    -o-transition: opacity 0.1s linear;\n    -moz-transition: opacity 0.1s linear;\n    transition: opacity 0.1s linear; }\n    .dg.main.taller-than-window {\n      overflow-y: auto; }\n      .dg.main.taller-than-window .close-button {\n        opacity: 1;\n        /* TODO, these are style notes */\n        margin-top: -1px;\n        border-top: 1px solid #2c2c2c; }\n    .dg.main ul.closed .close-button {\n      opacity: 1 !important; }\n    .dg.main:hover .close-button,\n    .dg.main .close-button.drag {\n      opacity: 1; }\n    .dg.main .close-button {\n      /*opacity: 0;*/\n      -webkit-transition: opacity 0.1s linear;\n      -o-transition: opacity 0.1s linear;\n      -moz-transition: opacity 0.1s linear;\n      transition: opacity 0.1s linear;\n      border: 0;\n      position: absolute;\n      line-height: 19px;\n      height: 20px;\n      /* TODO, these are style notes */\n      cursor: pointer;\n      text-align: center;\n      background-color: #000; }\n      .dg.main .close-button:hover {\n        background-color: #111; }\n  .dg.a {\n    float: right;\n    margin-right: 15px;\n    overflow-x: hidden; }\n    .dg.a.has-save > ul {\n      margin-top: 27px; }\n      .dg.a.has-save > ul.closed {\n        margin-top: 0; }\n    .dg.a .save-row {\n      position: fixed;\n      top: 0;\n      z-index: 1002; }\n  .dg li {\n    -webkit-transition: height 0.1s ease-out;\n    -o-transition: height 0.1s ease-out;\n    -moz-transition: height 0.1s ease-out;\n    transition: height 0.1s ease-out; }\n  .dg li:not(.folder) {\n    cursor: auto;\n    height: 27px;\n    line-height: 27px;\n    overflow: hidden;\n    padding: 0 4px 0 5px; }\n  .dg li.folder {\n    padding: 0;\n    border-left: 4px solid rgba(0, 0, 0, 0); }\n  .dg li.title {\n    cursor: pointer;\n    margin-left: -4px; }\n  .dg .closed li:not(.title),\n  .dg .closed ul li,\n  .dg .closed ul li > * {\n    height: 0;\n    overflow: hidden;\n    border: 0; }\n  .dg .cr {\n    clear: both;\n    padding-left: 3px;\n    height: 27px; }\n  .dg .property-name {\n    cursor: default;\n    float: left;\n    clear: left;\n    width: 40%;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .dg .c {\n    float: left;\n    width: 60%; }\n  .dg .c input[type=text] {\n    border: 0;\n    margin-top: 4px;\n    padding: 3px;\n    width: 100%;\n    float: right; }\n  .dg .has-slider input[type=text] {\n    width: 30%;\n    /*display: none;*/\n    margin-left: 0; }\n  .dg .slider {\n    float: left;\n    width: 66%;\n    margin-left: -5px;\n    margin-right: 0;\n    height: 19px;\n    margin-top: 4px; }\n  .dg .slider-fg {\n    height: 100%; }\n  .dg .c input[type=checkbox] {\n    margin-top: 9px; }\n  .dg .c select {\n    margin-top: 5px; }\n  .dg .cr.function,\n  .dg .cr.function .property-name,\n  .dg .cr.function *,\n  .dg .cr.boolean,\n  .dg .cr.boolean * {\n    cursor: pointer; }\n  .dg .selector {\n    display: none;\n    position: absolute;\n    margin-left: -9px;\n    margin-top: 23px;\n    z-index: 10; }\n  .dg .c:hover .selector,\n  .dg .selector.drag {\n    display: block; }\n  .dg li.save-row {\n    padding: 0; }\n    .dg li.save-row .button {\n      display: inline-block;\n      padding: 0px 6px; }\n  .dg.dialogue {\n    background-color: #222;\n    width: 460px;\n    padding: 15px;\n    font-size: 13px;\n    line-height: 15px; }\n\n/* TODO Separate style and structure */\n#dg-new-constructor {\n  padding: 10px;\n  color: #222;\n  font-family: Monaco, monospace;\n  font-size: 10px;\n  border: 0;\n  resize: none;\n  box-shadow: inset 1px 1px 1px #888;\n  word-wrap: break-word;\n  margin: 12px 0;\n  display: block;\n  width: 440px;\n  overflow-y: scroll;\n  height: 100px;\n  position: relative; }\n\n#dg-local-explain {\n  display: none;\n  font-size: 11px;\n  line-height: 17px;\n  border-radius: 3px;\n  background-color: #333;\n  padding: 8px;\n  margin-top: 10px; }\n  #dg-local-explain code {\n    font-size: 10px; }\n\n#dat-gui-save-locally {\n  display: none; }\n\n/** Main type */\n.dg {\n  color: #eee;\n  font: 11px 'Lucida Grande', sans-serif;\n  text-shadow: 0 -1px 0 #111;\n  /** Auto place */\n  /* Controller row, <li> */\n  /** Controllers */ }\n  .dg.main {\n    /** Scrollbar */ }\n    .dg.main::-webkit-scrollbar {\n      width: 5px;\n      background: #1a1a1a; }\n    .dg.main::-webkit-scrollbar-corner {\n      height: 0;\n      display: none; }\n    .dg.main::-webkit-scrollbar-thumb {\n      border-radius: 5px;\n      background: #676767; }\n  .dg li:not(.folder) {\n    background: #1a1a1a;\n    border-bottom: 1px solid #2c2c2c; }\n  .dg li.save-row {\n    line-height: 25px;\n    background: #dad5cb;\n    border: 0; }\n    .dg li.save-row select {\n      margin-left: 5px;\n      width: 108px; }\n    .dg li.save-row .button {\n      margin-left: 5px;\n      margin-top: 1px;\n      border-radius: 2px;\n      font-size: 9px;\n      line-height: 7px;\n      padding: 4px 4px 5px 4px;\n      background: #c5bdad;\n      color: #fff;\n      text-shadow: 0 1px 0 #b0a58f;\n      box-shadow: 0 -1px 0 #b0a58f;\n      cursor: pointer; }\n      .dg li.save-row .button.gears {\n        background: #c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;\n        height: 7px;\n        width: 8px; }\n      .dg li.save-row .button:hover {\n        background-color: #bab19e;\n        box-shadow: 0 -1px 0 #b0a58f; }\n  .dg li.folder {\n    border-bottom: 0; }\n  .dg li.title {\n    padding-left: 16px;\n    background: black url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;\n    cursor: pointer;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2); }\n  .dg .closed li.title {\n    background-image: url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==); }\n  .dg .cr.boolean {\n    border-left: 3px solid #806787; }\n  .dg .cr.function {\n    border-left: 3px solid #e61d5f; }\n  .dg .cr.number {\n    border-left: 3px solid #2fa1d6; }\n    .dg .cr.number input[type=text] {\n      color: #2fa1d6; }\n  .dg .cr.string {\n    border-left: 3px solid #1ed36f; }\n    .dg .cr.string input[type=text] {\n      color: #1ed36f; }\n  .dg .cr.function:hover, .dg .cr.boolean:hover {\n    background: #111; }\n  .dg .c input[type=text] {\n    background: #303030;\n    outline: none; }\n    .dg .c input[type=text]:hover {\n      background: #3c3c3c; }\n    .dg .c input[type=text]:focus {\n      background: #494949;\n      color: #fff; }\n  .dg .c .slider {\n    background: #303030;\n    cursor: ew-resize; }\n  .dg .c .slider-fg {\n    background: #2fa1d6; }\n  .dg .c .slider:hover {\n    background: #3c3c3c; }\n    .dg .c .slider:hover .slider-fg {\n      background: #44abda; }\n";

    }), define("dat/utils/common", [], function() {
        var a = Array.prototype.forEach,
            b = Array.prototype.slice;
        return {
            BREAK: {},
            extend: function(a) {
                return this.each(b.call(arguments, 1), function(b) {
                    for (var c in b) this.isUndefined(b[c]) || (a[c] = b[c])
                }, this), a
            },
            defaults: function(a) {
                return this.each(b.call(arguments, 1), function(b) {
                    for (var c in b) this.isUndefined(a[c]) && (a[c] = b[c])
                }, this), a
            },
            compose: function() {
                var a = b.call(arguments);
                return function() {
                    for (var c = b.call(arguments), d = a.length - 1; d >= 0; d--) c = [a[d].apply(this, c)];
                    return c[0]
                }
            },
            each: function(b, c, d) {
                if (b)
                    if (a && b.forEach && b.forEach === a) b.forEach(c, d);
                    else if (b.length === b.length + 0) {
                    for (var e = 0, f = b.length; f > e; e++)
                        if (e in b && c.call(d, b[e], e) === this.BREAK) return
                } else
                    for (var e in b)
                        if (c.call(d, b[e], e) === this.BREAK) return
            },
            defer: function(a) {
                setTimeout(a, 0)
            },
            toArray: function(a) {
                return a.toArray ? a.toArray() : b.call(a)
            },
            isUndefined: function(a) {
                return void 0 === a
            },
            isNull: function(a) {
                return null === a
            },
            isNaN: function(a) {
                return a !== a
            },
            isArray: Array.isArray || function(a) {
                return a.constructor === Array
            },
            isObject: function(a) {
                return a === Object(a)
            },
            isNumber: function(a) {
                return a === a + 0
            },
            isString: function(a) {
                return a === a + ""
            },
            isBoolean: function(a) {
                return a === !1 || a === !0
            },
            isFunction: function(a) {
                return "[object Function]" === Object.prototype.toString.call(a)
            }
        }
    }), define("dat/controllers/Controller", ["dat/utils/common"], function(a) {
        var b = function(a, b) {
            this.initialValue = a[b], this.domElement = document.createElement("div"), this.object = a, this.property = b, this.__onChange = void 0, this.__onFinishChange = void 0
        };
        return a.extend(b.prototype, {
            onChange: function(a) {
                return this.__onChange = a, this
            },
            onFinishChange: function(a) {
                return this.__onFinishChange = a, this
            },
            setValue: function(a) {
                return this.object[this.property] = a, this.__onChange && this.__onChange.call(this, a), this.updateDisplay(), this
            },
            getValue: function() {
                return this.object[this.property]
            },
            updateDisplay: function() {
                return this
            },
            isModified: function() {
                return this.initialValue !== this.getValue()
            }
        }), b
    }), define("dat/dom/dom", ["dat/utils/common"], function(a) {
        function b(b) {
            if ("0" === b || a.isUndefined(b)) return 0;
            var c = b.match(e);
            return a.isNull(c) ? 0 : parseFloat(c[1])
        }
        var c = {
                HTMLEvents: ["change"],
                MouseEvents: ["click", "mousemove", "mousedown", "mouseup", "mouseover"],
                KeyboardEvents: ["keydown"]
            },
            d = {};
        a.each(c, function(b, c) {
            a.each(b, function(a) {
                d[a] = c
            })
        });
        var e = /(\d+(\.\d+)?)px/,
            f = {
                makeSelectable: function(a, b) {
                    void 0 !== a && void 0 !== a.style && (a.onselectstart = b ? function() {
                        return !1
                    } : function() {}, a.style.MozUserSelect = b ? "auto" : "none", a.style.KhtmlUserSelect = b ? "auto" : "none", a.unselectable = b ? "on" : "off")
                },
                makeFullscreen: function(b, c, d) {
                    a.isUndefined(c) && (c = !0), a.isUndefined(d) && (d = !0), b.style.position = "absolute", c && (b.style.left = 0, b.style.right = 0), d && (b.style.top = 0, b.style.bottom = 0)
                },
                fakeEvent: function(b, c, e, f) {
                    e = e || {};
                    var g = d[c];
                    if (!g) throw new Error("Event type " + c + " not supported.");
                    var h = document.createEvent(g);
                    switch (g) {
                        case "MouseEvents":
                            var i = e.x || e.clientX || 0,
                                j = e.y || e.clientY || 0;
                            h.initMouseEvent(c, e.bubbles || !1, e.cancelable || !0, window, e.clickCount || 1, 0, 0, i, j, !1, !1, !1, !1, 0, null);
                            break;
                        case "KeyboardEvents":
                            var k = h.initKeyboardEvent || h.initKeyEvent;
                            a.defaults(e, {
                                cancelable: !0,
                                ctrlKey: !1,
                                altKey: !1,
                                shiftKey: !1,
                                metaKey: !1,
                                keyCode: void 0,
                                charCode: void 0
                            }), k(c, e.bubbles || !1, e.cancelable, window, e.ctrlKey, e.altKey, e.shiftKey, e.metaKey, e.keyCode, e.charCode);
                            break;
                        default:
                            h.initEvent(c, e.bubbles || !1, e.cancelable || !0)
                    }
                    a.defaults(h, f), b.dispatchEvent(h)
                },
                bind: function(a, b, c, d) {
                    return d = d || !1, a.addEventListener ? a.addEventListener(b, c, d) : a.attachEvent && a.attachEvent("on" + b, c), f
                },
                unbind: function(a, b, c, d) {
                    return d = d || !1, a.removeEventListener ? a.removeEventListener(b, c, d) : a.detachEvent && a.detachEvent("on" + b, c), f
                },
                addClass: function(a, b) {
                    if (void 0 === a.className) a.className = b;
                    else if (a.className !== b) {
                        var c = a.className.split(/ +/); - 1 == c.indexOf(b) && (c.push(b), a.className = c.join(" ").replace(/^\s+/, "").replace(/\s+$/, ""))
                    }
                    return f
                },
                removeClass: function(a, b) {
                    if (b)
                        if (void 0 === a.className);
                        else if (a.className === b) a.removeAttribute("class");
                    else {
                        var c = a.className.split(/ +/),
                            d = c.indexOf(b); - 1 != d && (c.splice(d, 1), a.className = c.join(" "))
                    } else a.className = void 0;
                    return f
                },
                hasClass: function(a, b) {
                    return new RegExp("(?:^|\\s+)" + b + "(?:\\s+|$)").test(a.className) || !1
                },
                getWidth: function(a) {
                    var c = getComputedStyle(a);
                    return b(c["border-left-width"]) + b(c["border-right-width"]) + b(c["padding-left"]) + b(c["padding-right"]) + b(c.width)
                },
                getHeight: function(a) {
                    var c = getComputedStyle(a);
                    return b(c["border-top-width"]) + b(c["border-bottom-width"]) + b(c["padding-top"]) + b(c["padding-bottom"]) + b(c.height)
                },
                getOffset: function(a) {
                    var b = {
                        left: 0,
                        top: 0
                    };
                    if (a.offsetParent)
                        do b.left += a.offsetLeft, b.top += a.offsetTop; while (a = a.offsetParent);
                    return b
                },
                isActive: function(a) {
                    return a === document.activeElement && (a.type || a.href)
                }
            };
        return f
    }), define("dat/controllers/OptionController", ["dat/controllers/Controller", "dat/dom/dom", "dat/utils/common"], function(a, b, c) {
        var d = function(a, e, f) {
            d.superclass.call(this, a, e);
            var g = this;
            if (this.__select = document.createElement("select"), c.isArray(f)) {
                var h = {};
                c.each(f, function(a) {
                    h[a] = a
                }), f = h
            }
            c.each(f, function(a, b) {
                var c = document.createElement("option");
                c.innerHTML = b, c.setAttribute("value", a), g.__select.appendChild(c)
            }), this.updateDisplay(), b.bind(this.__select, "change", function() {
                var a = this.options[this.selectedIndex].value;
                g.setValue(a)
            }), this.domElement.appendChild(this.__select)
        };
        return d.superclass = a, c.extend(d.prototype, a.prototype, {
            setValue: function(a) {
                var b = d.superclass.prototype.setValue.call(this, a);
                return this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()), b
            },
            updateDisplay: function() {
                return this.__select.value = this.getValue(), d.superclass.prototype.updateDisplay.call(this)
            }
        }), d
    }), define("dat/controllers/NumberController", ["dat/controllers/Controller", "dat/utils/common"], function(a, b) {
        function c(a) {
            return a = a.toString(), a.indexOf(".") > -1 ? a.length - a.indexOf(".") - 1 : 0
        }
        var d = function(a, e, f) {
            d.superclass.call(this, a, e), f = f || {}, this.__min = f.min, this.__max = f.max, this.__step = f.step, this.__impliedStep = b.isUndefined(this.__step) ? 0 == this.initialValue ? 1 : Math.pow(10, Math.floor(Math.log(this.initialValue) / Math.LN10)) / 10 : this.__step, this.__precision = c(this.__impliedStep)
        };
        return d.superclass = a, b.extend(d.prototype, a.prototype, {
            setValue: function(a) {
                return void 0 !== this.__min && a < this.__min ? a = this.__min : void 0 !== this.__max && a > this.__max && (a = this.__max), void 0 !== this.__step && a % this.__step != 0 && (a = Math.round(a / this.__step) * this.__step), d.superclass.prototype.setValue.call(this, a)
            },
            min: function(a) {
                return this.__min = a, this
            },
            max: function(a) {
                return this.__max = a, this
            },
            step: function(a) {
                return this.__step = a, this.__impliedStep = a, this.__precision = c(a), this
            }
        }), d
    }), define("dat/controllers/NumberControllerBox", ["dat/controllers/NumberController", "dat/dom/dom", "dat/utils/common"], function(a, b, c) {
        function d(a, b) {
            var c = Math.pow(10, b);
            return Math.round(a * c) / c
        }
        var e = function(a, d, f) {
            function g() {
                var a = parseFloat(m.__input.value);
                c.isNaN(a) || m.setValue(a)
            }

            function h() {
                g(), m.__onFinishChange && m.__onFinishChange.call(m, m.getValue())
            }

            function i(a) {
                b.bind(window, "mousemove", j), b.bind(window, "mouseup", k), l = a.clientY
            }

            function j(a) {
                var b = l - a.clientY;
                m.setValue(m.getValue() + b * m.__impliedStep), l = a.clientY
            }

            function k() {
                b.unbind(window, "mousemove", j), b.unbind(window, "mouseup", k)
            }
            this.__truncationSuspended = !1, e.superclass.call(this, a, d, f);
            var l, m = this;
            this.__input = document.createElement("input"), this.__input.setAttribute("type", "text"), b.bind(this.__input, "change", g), b.bind(this.__input, "blur", h), b.bind(this.__input, "mousedown", i), b.bind(this.__input, "keydown", function(a) {
                13 === a.keyCode && (m.__truncationSuspended = !0, this.blur(), m.__truncationSuspended = !1)
            }), this.updateDisplay(), this.domElement.appendChild(this.__input)
        };
        return e.superclass = a, c.extend(e.prototype, a.prototype, {
            updateDisplay: function() {
                return this.__input.value = this.__truncationSuspended ? this.getValue() : d(this.getValue(), this.__precision), e.superclass.prototype.updateDisplay.call(this)
            }
        }), e
    }), define("text!dat/controllers/NumberControllerSlider.css", [], function() {
        return "/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n.slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"
    }), define("dat/controllers/NumberControllerSlider", ["dat/controllers/NumberController", "dat/dom/dom", "dat/utils/css", "dat/utils/common", "text!dat/controllers/NumberControllerSlider.css"], function(a, b, c, d, e) {
        function f(a, b, c, d, e) {
            return d + (e - d) * ((a - b) / (c - b))
        }
        var g = function(a, c, d, e, h) {
            function i(a) {
                b.bind(window, "mousemove", j), b.bind(window, "mouseup", k), j(a)
            }

            function j(a) {
                a.preventDefault();
                var c = b.getOffset(l.__background),
                    d = b.getWidth(l.__background);
                return l.setValue(f(a.clientX, c.left, c.left + d, l.__min, l.__max)), !1
            }

            function k() {
                b.unbind(window, "mousemove", j), b.unbind(window, "mouseup", k), l.__onFinishChange && l.__onFinishChange.call(l, l.getValue())
            }
            g.superclass.call(this, a, c, {
                min: d,
                max: e,
                step: h
            });
            var l = this;
            this.__background = document.createElement("div"), this.__foreground = document.createElement("div"), b.bind(this.__background, "mousedown", i), b.addClass(this.__background, "slider"), b.addClass(this.__foreground, "slider-fg"), this.updateDisplay(), this.__background.appendChild(this.__foreground), this.domElement.appendChild(this.__background)
        };
        return g.superclass = a, g.useDefaultStyles = function() {
            c.inject(e)
        }, d.extend(g.prototype, a.prototype, {
            updateDisplay: function() {
                var a = (this.getValue() - this.__min) / (this.__max - this.__min);
                return this.__foreground.style.width = 100 * a + "%", g.superclass.prototype.updateDisplay.call(this)
            }
        }), g
    }), define("dat/controllers/StringController", ["dat/controllers/Controller", "dat/dom/dom", "dat/utils/common"], function(a, b, c) {
        var d = function(a, c) {
            function e() {
                g.setValue(g.__input.value)
            }

            function f() {
                g.__onFinishChange && g.__onFinishChange.call(g, g.getValue())
            }
            d.superclass.call(this, a, c);
            var g = this;
            this.__input = document.createElement("input"), this.__input.setAttribute("type", "text"), b.bind(this.__input, "keyup", e), b.bind(this.__input, "change", e), b.bind(this.__input, "blur", f), b.bind(this.__input, "keydown", function(a) {
                13 === a.keyCode && this.blur()
            }), this.updateDisplay(), this.domElement.appendChild(this.__input)
        };
        return d.superclass = a, c.extend(d.prototype, a.prototype, {
            updateDisplay: function() {
                return b.isActive(this.__input) || (this.__input.value = this.getValue()), d.superclass.prototype.updateDisplay.call(this)
            }
        }), d
    }), define("dat/controllers/FunctionController", ["dat/controllers/Controller", "dat/dom/dom", "dat/utils/common"], function(a, b, c) {
        var d = function(a, c, e) {
            d.superclass.call(this, a, c);
            var f = this;
            this.__button = document.createElement("div"), this.__button.innerHTML = void 0 === e ? "Fire" : e, b.bind(this.__button, "click", function(a) {
                return a.preventDefault(), f.fire(), !1
            }), b.addClass(this.__button, "button"), this.domElement.appendChild(this.__button)
        };
        return d.superclass = a, c.extend(d.prototype, a.prototype, {
            fire: function() {
                this.__onChange && this.__onChange.call(this), this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()), this.getValue().call(this.object)
            }
        }), d
    }), define("dat/controllers/BooleanController", ["dat/controllers/Controller", "dat/dom/dom", "dat/utils/common"], function(a, b, c) {
        var d = function(a, c) {
            function e() {
                f.setValue(!f.__prev)
            }
            d.superclass.call(this, a, c);
            var f = this;
            this.__prev = this.getValue(), this.__checkbox = document.createElement("input"), this.__checkbox.setAttribute("type", "checkbox"), b.bind(this.__checkbox, "change", e, !1), this.domElement.appendChild(this.__checkbox), this.updateDisplay()
        };
        return d.superclass = a, c.extend(d.prototype, a.prototype, {
            setValue: function(a) {
                var b = d.superclass.prototype.setValue.call(this, a);
                return this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()), this.__prev = this.getValue(), b
            },
            updateDisplay: function() {
                return this.getValue() === !0 ? (this.__checkbox.setAttribute("checked", "checked"), this.__checkbox.checked = !0) : this.__checkbox.checked = !1, d.superclass.prototype.updateDisplay.call(this)
            }
        }), d
    }), define("dat/controllers/factory", ["dat/controllers/OptionController", "dat/controllers/NumberControllerBox", "dat/controllers/NumberControllerSlider", "dat/controllers/StringController", "dat/controllers/FunctionController", "dat/controllers/BooleanController", "dat/utils/common"], function(a, b, c, d, e, f, g) {
        return function(h, i) {
            var j = h[i];
            return g.isArray(arguments[2]) || g.isObject(arguments[2]) ? new a(h, i, arguments[2]) : g.isNumber(j) ? g.isNumber(arguments[2]) && g.isNumber(arguments[3]) ? new c(h, i, arguments[2], arguments[3]) : new b(h, i, {
                min: arguments[2],
                max: arguments[3]
            }) : g.isString(j) ? new d(h, i) : g.isFunction(j) ? new e(h, i, "") : g.isBoolean(j) ? new f(h, i) : void 0
        }
    }), define("dat/color/toString", ["dat/utils/common"], function(a) {
        return function(b) {
            if (1 == b.a || a.isUndefined(b.a)) {
                for (var c = b.hex.toString(16); c.length < 6;) c = "0" + c;
                return "#" + c
            }
            return "rgba(" + Math.round(b.r) + "," + Math.round(b.g) + "," + Math.round(b.b) + "," + b.a + ")"
        }
    }), define("dat/color/interpret", ["dat/color/toString", "dat/utils/common"], function(a, b) {
        var c, d, e = function() {
                d = !1;
                var a = arguments.length > 1 ? b.toArray(arguments) : arguments[0];
                return b.each(f, function(e) {
                    return e.litmus(a) ? (b.each(e.conversions, function(e, f) {
                        return c = e.read(a), d === !1 && c !== !1 ? (d = c, c.conversionName = f, c.conversion = e, b.BREAK) : void 0
                    }), b.BREAK) : void 0
                }), d
            },
            f = [{
                litmus: b.isString,
                conversions: {
                    THREE_CHAR_HEX: {
                        read: function(a) {
                            var b = a.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);
                            return null === b ? !1 : {
                                space: "HEX",
                                hex: parseInt("0x" + b[1].toString() + b[1].toString() + b[2].toString() + b[2].toString() + b[3].toString() + b[3].toString())
                            }
                        },
                        write: a
                    },
                    SIX_CHAR_HEX: {
                        read: function(a) {
                            var b = a.match(/^#([A-F0-9]{6})$/i);
                            return null === b ? !1 : {
                                space: "HEX",
                                hex: parseInt("0x" + b[1].toString())
                            }
                        },
                        write: a
                    },
                    CSS_RGB: {
                        read: function(a) {
                            var b = a.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);
                            return null === b ? !1 : {
                                space: "RGB",
                                r: parseFloat(b[1]),
                                g: parseFloat(b[2]),
                                b: parseFloat(b[3])
                            }
                        },
                        write: a
                    },
                    CSS_RGBA: {
                        read: function(a) {
                            var b = a.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);
                            return null === b ? !1 : {
                                space: "RGB",
                                r: parseFloat(b[1]),
                                g: parseFloat(b[2]),
                                b: parseFloat(b[3]),
                                a: parseFloat(b[4])
                            }
                        },
                        write: a
                    }
                }
            }, {
                litmus: b.isNumber,
                conversions: {
                    HEX: {
                        read: function(a) {
                            return {
                                space: "HEX",
                                hex: a,
                                conversionName: "HEX"
                            }
                        },
                        write: function(a) {
                            return a.hex
                        }
                    }
                }
            }, {
                litmus: b.isArray,
                conversions: {
                    RGB_ARRAY: {
                        read: function(a) {
                            return 3 != a.length ? !1 : {
                                space: "RGB",
                                r: a[0],
                                g: a[1],
                                b: a[2]
                            }
                        },
                        write: function(a) {
                            return [a.r, a.g, a.b]
                        }
                    },
                    RGBA_ARRAY: {
                        read: function(a) {
                            return 4 != a.length ? !1 : {
                                space: "RGB",
                                r: a[0],
                                g: a[1],
                                b: a[2],
                                a: a[3]
                            }
                        },
                        write: function(a) {
                            return [a.r, a.g, a.b, a.a]
                        }
                    }
                }
            }, {
                litmus: b.isObject,
                conversions: {
                    RGBA_OBJ: {
                        read: function(a) {
                            return b.isNumber(a.r) && b.isNumber(a.g) && b.isNumber(a.b) && b.isNumber(a.a) ? {
                                space: "RGB",
                                r: a.r,
                                g: a.g,
                                b: a.b,
                                a: a.a
                            } : !1
                        },
                        write: function(a) {
                            return {
                                r: a.r,
                                g: a.g,
                                b: a.b,
                                a: a.a
                            }
                        }
                    },
                    RGB_OBJ: {
                        read: function(a) {
                            return b.isNumber(a.r) && b.isNumber(a.g) && b.isNumber(a.b) ? {
                                space: "RGB",
                                r: a.r,
                                g: a.g,
                                b: a.b
                            } : !1
                        },
                        write: function(a) {
                            return {
                                r: a.r,
                                g: a.g,
                                b: a.b
                            }
                        }
                    },
                    HSVA_OBJ: {
                        read: function(a) {
                            return b.isNumber(a.h) && b.isNumber(a.s) && b.isNumber(a.v) && b.isNumber(a.a) ? {
                                space: "HSV",
                                h: a.h,
                                s: a.s,
                                v: a.v,
                                a: a.a
                            } : !1
                        },
                        write: function(a) {
                            return {
                                h: a.h,
                                s: a.s,
                                v: a.v,
                                a: a.a
                            }
                        }
                    },
                    HSV_OBJ: {
                        read: function(a) {
                            return b.isNumber(a.h) && b.isNumber(a.s) && b.isNumber(a.v) ? {
                                space: "HSV",
                                h: a.h,
                                s: a.s,
                                v: a.v
                            } : !1
                        },
                        write: function(a) {
                            return {
                                h: a.h,
                                s: a.s,
                                v: a.v
                            }
                        }
                    }
                }
            }];
        return e
    }), define("dat/color/math", [], function() {
        var a;
        return {
            hsv_to_rgb: function(a, b, c) {
                var d = Math.floor(a / 60) % 6,
                    e = a / 60 - Math.floor(a / 60),
                    f = c * (1 - b),
                    g = c * (1 - e * b),
                    h = c * (1 - (1 - e) * b),
                    i = [
                        [c, h, f],
                        [g, c, f],
                        [f, c, h],
                        [f, g, c],
                        [h, f, c],
                        [c, f, g]
                    ][d];
                return {
                    r: 255 * i[0],
                    g: 255 * i[1],
                    b: 255 * i[2]
                }
            },
            rgb_to_hsv: function(a, b, c) {
                var d, e, f = Math.min(a, b, c),
                    g = Math.max(a, b, c),
                    h = g - f;
                return 0 == g ? {
                    h: 0 / 0,
                    s: 0,
                    v: 0
                } : (e = h / g, d = a == g ? (b - c) / h : b == g ? 2 + (c - a) / h : 4 + (a - b) / h, d /= 6, 0 > d && (d += 1), {
                    h: 360 * d,
                    s: e,
                    v: g / 255
                })
            },
            rgb_to_hex: function(a, b, c) {
                var d = this.hex_with_component(0, 2, a);
                return d = this.hex_with_component(d, 1, b), d = this.hex_with_component(d, 0, c)
            },
            component_from_hex: function(a, b) {
                return a >> 8 * b & 255
            },
            hex_with_component: function(b, c, d) {
                return d << (a = 8 * c) | b & ~(255 << a)
            }
        }
    }), define("dat/color/Color", ["dat/color/interpret", "dat/color/math", "dat/color/toString", "dat/utils/common"], function(a, b, c, d) {
        function e(a, b, c) {
            Object.defineProperty(a, b, {
                get: function() {
                    return "RGB" === this.__state.space ? this.__state[b] : (g(this, b, c), this.__state[b])
                },
                set: function(a) {
                    "RGB" !== this.__state.space && (g(this, b, c), this.__state.space = "RGB"), this.__state[b] = a
                }
            })
        }

        function f(a, b) {
            Object.defineProperty(a, b, {
                get: function() {
                    return "HSV" === this.__state.space ? this.__state[b] : (h(this), this.__state[b])
                },
                set: function(a) {
                    "HSV" !== this.__state.space && (h(this), this.__state.space = "HSV"), this.__state[b] = a
                }
            })
        }

        function g(a, c, e) {
            if ("HEX" === a.__state.space) a.__state[c] = b.component_from_hex(a.__state.hex, e);
            else {
                if ("HSV" !== a.__state.space) throw "Corrupted color state";
                d.extend(a.__state, b.hsv_to_rgb(a.__state.h, a.__state.s, a.__state.v))
            }
        }

        function h(a) {
            var c = b.rgb_to_hsv(a.r, a.g, a.b);
            d.extend(a.__state, {
                s: c.s,
                v: c.v
            }), d.isNaN(c.h) ? d.isUndefined(a.__state.h) && (a.__state.h = 0) : a.__state.h = c.h
        }
        var i = function() {
            if (this.__state = a.apply(this, arguments), this.__state === !1) throw "Failed to interpret color arguments";
            this.__state.a = this.__state.a || 1
        };
        return i.COMPONENTS = ["r", "g", "b", "h", "s", "v", "hex", "a"], d.extend(i.prototype, {
            toString: function() {
                return c(this)
            },
            toOriginal: function() {
                return this.__state.conversion.write(this)
            }
        }), e(i.prototype, "r", 2), e(i.prototype, "g", 1), e(i.prototype, "b", 0), f(i.prototype, "h"), f(i.prototype, "s"), f(i.prototype, "v"), Object.defineProperty(i.prototype, "a", {
            get: function() {
                return this.__state.a
            },
            set: function(a) {
                this.__state.a = a
            }
        }), Object.defineProperty(i.prototype, "hex", {
            get: function() {
                return "HEX" !== !this.__state.space && (this.__state.hex = b.rgb_to_hex(this.r, this.g, this.b)), this.__state.hex
            },
            set: function(a) {
                this.__state.space = "HEX", this.__state.hex = a
            }
        }), i
    }), define("dat/controllers/ColorController", ["dat/controllers/Controller", "dat/dom/dom", "dat/color/Color", "dat/color/interpret", "dat/utils/common"], function(a, b, c, d, e) {
        function f(a, b, c, d) {
            a.style.background = "", e.each(i, function(e) {
                a.style.cssText += "background: " + e + "linear-gradient(" + b + ", " + c + " 0%, " + d + " 100%); "
            })
        }

        function g(a) {
            a.style.background = "", a.style.cssText += "background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);", a.style.cssText += "background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);", a.style.cssText += "background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);", a.style.cssText += "background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);", a.style.cssText += "background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"
        }
        var h = function(a, i) {
            function j(a) {
                n(a), b.bind(window, "mousemove", n), b.bind(window, "mouseup", k)
            }

            function k() {
                b.unbind(window, "mousemove", n), b.unbind(window, "mouseup", k)
            }

            function l() {
                var a = d(this.value);
                a !== !1 ? (p.__color.__state = a, p.setValue(p.__color.toOriginal())) : this.value = p.__color.toString()
            }

            function m() {
                b.unbind(window, "mousemove", o), b.unbind(window, "mouseup", m)
            }

            function n(a) {
                a.preventDefault();
                var c = b.getWidth(p.__saturation_field),
                    d = b.getOffset(p.__saturation_field),
                    e = (a.clientX - d.left + document.body.scrollLeft) / c,
                    f = 1 - (a.clientY - d.top + document.body.scrollTop) / c;
                return f > 1 ? f = 1 : 0 > f && (f = 0), e > 1 ? e = 1 : 0 > e && (e = 0), p.__color.v = f, p.__color.s = e, p.setValue(p.__color.toOriginal()), !1
            }

            function o(a) {
                a.preventDefault();
                var c = b.getHeight(p.__hue_field),
                    d = b.getOffset(p.__hue_field),
                    e = 1 - (a.clientY - d.top + document.body.scrollTop) / c;
                return e > 1 ? e = 1 : 0 > e && (e = 0), p.__color.h = 360 * e, p.setValue(p.__color.toOriginal()), !1
            }
            h.superclass.call(this, a, i), this.__color = new c(this.getValue()), this.__temp = new c(0);
            var p = this;
            this.domElement = document.createElement("div"), b.makeSelectable(this.domElement, !1), this.__selector = document.createElement("div"), this.__selector.className = "selector", this.__saturation_field = document.createElement("div"), this.__saturation_field.className = "saturation-field", this.__field_knob = document.createElement("div"), this.__field_knob.className = "field-knob", this.__field_knob_border = "2px solid ", this.__hue_knob = document.createElement("div"), this.__hue_knob.className = "hue-knob", this.__hue_field = document.createElement("div"), this.__hue_field.className = "hue-field", this.__input = document.createElement("input"), this.__input.type = "text", this.__input_textShadow = "0 1px 1px ", b.bind(this.__input, "keydown", function(a) {
                13 === a.keyCode && l.call(this)
            }), b.bind(this.__input, "blur", l), b.bind(this.__selector, "mousedown", function() {
                b.addClass(this, "drag").bind(window, "mouseup", function() {
                    b.removeClass(p.__selector, "drag")
                })
            });
            var q = document.createElement("div");
            e.extend(this.__selector.style, {
                width: "122px",
                height: "102px",
                padding: "3px",
                backgroundColor: "#222",
                boxShadow: "0px 1px 3px rgba(0,0,0,0.3)"
            }), e.extend(this.__field_knob.style, {
                position: "absolute",
                width: "12px",
                height: "12px",
                border: this.__field_knob_border + (this.__color.v < .5 ? "#fff" : "#000"),
                boxShadow: "0px 1px 3px rgba(0,0,0,0.5)",
                borderRadius: "12px",
                zIndex: 1
            }), e.extend(this.__hue_knob.style, {
                position: "absolute",
                width: "15px",
                height: "2px",
                borderRight: "4px solid #fff",
                zIndex: 1
            }), e.extend(this.__saturation_field.style, {
                width: "100px",
                height: "100px",
                border: "1px solid #555",
                marginRight: "3px",
                display: "inline-block",
                cursor: "pointer"
            }), e.extend(q.style, {
                width: "100%",
                height: "100%",
                background: "none"
            }), f(q, "top", "rgba(0,0,0,0)", "#000"), e.extend(this.__hue_field.style, {
                width: "15px",
                height: "100px",
                display: "inline-block",
                border: "1px solid #555",
                cursor: "ns-resize"
            }), g(this.__hue_field), e.extend(this.__input.style, {
                outline: "none",
                textAlign: "center",
                color: "#fff",
                border: 0,
                fontWeight: "bold",
                textShadow: this.__input_textShadow + "rgba(0,0,0,0.7)"
            }), b.bind(this.__saturation_field, "mousedown", j), b.bind(this.__field_knob, "mousedown", j), b.bind(this.__hue_field, "mousedown", function(a) {
                o(a), b.bind(window, "mousemove", o), b.bind(window, "mouseup", m)
            }), this.__saturation_field.appendChild(q), this.__selector.appendChild(this.__field_knob), this.__selector.appendChild(this.__saturation_field), this.__selector.appendChild(this.__hue_field), this.__hue_field.appendChild(this.__hue_knob), this.domElement.appendChild(this.__input), this.domElement.appendChild(this.__selector), this.updateDisplay()
        };
        h.superclass = a, e.extend(h.prototype, a.prototype, {
            updateDisplay: function() {
                var a = d(this.getValue());
                if (a !== !1) {
                    var b = !1;
                    e.each(c.COMPONENTS, function(c) {
                        return e.isUndefined(a[c]) || e.isUndefined(this.__color.__state[c]) || a[c] === this.__color.__state[c] ? void 0 : (b = !0, {})
                    }, this), b && e.extend(this.__color.__state, a)
                }
                e.extend(this.__temp.__state, this.__color.__state), this.__temp.a = 1;
                var g = this.__color.v < .5 || this.__color.s > .5 ? 255 : 0,
                    h = 255 - g;
                e.extend(this.__field_knob.style, {
                    marginLeft: 100 * this.__color.s - 7 + "px",
                    marginTop: 100 * (1 - this.__color.v) - 7 + "px",
                    backgroundColor: this.__temp.toString(),
                    border: this.__field_knob_border + "rgb(" + g + "," + g + "," + g + ")"
                }), this.__hue_knob.style.marginTop = 100 * (1 - this.__color.h / 360) + "px", this.__temp.s = 1, this.__temp.v = 1, f(this.__saturation_field, "left", "#fff", this.__temp.toString()), e.extend(this.__input.style, {
                    backgroundColor: this.__input.value = this.__color.toString(),
                    color: "rgb(" + g + "," + g + "," + g + ")",
                    textShadow: this.__input_textShadow + "rgba(" + h + "," + h + "," + h + ",.7)"
                })
            }
        });
        var i = ["-moz-", "-o-", "-webkit-", "-ms-", ""];
        return h
    }), define("dat/utils/requestAnimationFrame", [], function() {
        return window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function(a) {
            window.setTimeout(a, 1e3 / 60)
        }
    }), define("dat/dom/CenteredDiv", ["dat/dom/dom", "dat/utils/common"], function(a, b) {
        var c = function() {
            this.backgroundElement = document.createElement("div"), b.extend(this.backgroundElement.style, {
                backgroundColor: "rgba(0,0,0,0.8)",
                top: 0,
                left: 0,
                display: "none",
                zIndex: "1000",
                opacity: 0,
                WebkitTransition: "opacity 0.2s linear"
            }), a.makeFullscreen(this.backgroundElement), this.backgroundElement.style.position = "fixed", this.domElement = document.createElement("div"), b.extend(this.domElement.style, {
                position: "fixed",
                display: "none",
                zIndex: "1001",
                opacity: 0,
                WebkitTransition: "-webkit-transform 0.2s ease-out, opacity 0.2s linear"
            }), document.body.appendChild(this.backgroundElement), document.body.appendChild(this.domElement);
            var c = this;
            a.bind(this.backgroundElement, "click", function() {
                c.hide()
            })
        };
        return c.prototype.show = function() {
            var a = this;
            this.backgroundElement.style.display = "block", this.domElement.style.display = "block", this.domElement.style.opacity = 0, this.domElement.style.webkitTransform = "scale(1.1)", this.layout(), b.defer(function() {
                a.backgroundElement.style.opacity = 1, a.domElement.style.opacity = 1, a.domElement.style.webkitTransform = "scale(1)"
            })
        }, c.prototype.hide = function() {
            var b = this,
                c = function() {
                    b.domElement.style.display = "none", b.backgroundElement.style.display = "none", a.unbind(b.domElement, "webkitTransitionEnd", c), a.unbind(b.domElement, "transitionend", c), a.unbind(b.domElement, "oTransitionEnd", c)
                };
            a.bind(this.domElement, "webkitTransitionEnd", c), a.bind(this.domElement, "transitionend", c), a.bind(this.domElement, "oTransitionEnd", c), this.backgroundElement.style.opacity = 0, this.domElement.style.opacity = 0, this.domElement.style.webkitTransform = "scale(1.1)"
        }, c.prototype.layout = function() {
            this.domElement.style.left = window.innerWidth / 2 - a.getWidth(this.domElement) / 2 + "px", this.domElement.style.top = window.innerHeight / 2 - a.getHeight(this.domElement) / 2 + "px"
        }, c
    }), define("dat/gui/GUI", ["dat/utils/css", "text!dat/gui/saveDialogue.html", "text!dat/gui/style.css", "dat/controllers/factory", "dat/controllers/Controller", "dat/controllers/BooleanController", "dat/controllers/FunctionController", "dat/controllers/NumberControllerBox", "dat/controllers/NumberControllerSlider", "dat/controllers/OptionController", "dat/controllers/ColorController", "dat/utils/requestAnimationFrame", "dat/dom/CenteredDiv", "dat/dom/dom", "dat/utils/common"], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
        function p(a, b, c, f) {
            if (void 0 === b[c]) throw new Error("Object " + b + ' has no property "' + c + '"');
            var g;
            if (f.color) g = new k(b, c);
            else {
                var h = [b, c].concat(f.factoryArgs);
                g = d.apply(a, h)
            }
            f.before instanceof e && (f.before = f.before.__li), s(a, g), n.addClass(g.domElement, "c");
            var i = document.createElement("span");
            n.addClass(i, "property-name"), i.innerHTML = g.property;
            var j = document.createElement("div");
            j.appendChild(i), j.appendChild(g.domElement);
            var l = q(a, j, f.before);
            return n.addClass(l, M.CLASS_CONTROLLER_ROW), n.addClass(l, typeof g.getValue()), r(a, l, g), a.__controllers.push(g), g
        }

        function q(a, b, c) {
            var d = document.createElement("li");
            return b && d.appendChild(b), c ? a.__ul.insertBefore(d, params.before) : a.__ul.appendChild(d), a.onResize(), d
        }

        function r(a, b, c) {
            if (c.__li = b, c.__gui = a, o.extend(c, {
                    options: function(b) {
                        return arguments.length > 1 ? (c.remove(), p(a, c.object, c.property, {
                            before: c.__li.nextElementSibling,
                            factoryArgs: [o.toArray(arguments)]
                        })) : o.isArray(b) || o.isObject(b) ? (c.remove(), p(a, c.object, c.property, {
                            before: c.__li.nextElementSibling,
                            factoryArgs: [b]
                        })) : void 0
                    },
                    name: function(a) {
                        return c.__li.firstElementChild.firstElementChild.innerHTML = a, c
                    },
                    listen: function() {
                        return c.__gui.listen(c), c
                    },
                    remove: function() {
                        return c.__gui.remove(c), c
                    }
                }), c instanceof i) {
                var d = new h(c.object, c.property, {
                    min: c.__min,
                    max: c.__max,
                    step: c.__step
                });
                o.each(["updateDisplay", "onChange", "onFinishChange"], function(a) {
                    var b = c[a],
                        e = d[a];
                    c[a] = d[a] = function() {
                        var a = Array.prototype.slice.call(arguments);
                        return b.apply(c, a), e.apply(d, a)
                    }
                }), n.addClass(b, "has-slider"), c.domElement.insertBefore(d.domElement, c.domElement.firstElementChild)
            } else if (c instanceof h) {
                var e = function(b) {
                    return o.isNumber(c.__min) && o.isNumber(c.__max) ? (c.remove(), p(a, c.object, c.property, {
                        before: c.__li.nextElementSibling,
                        factoryArgs: [c.__min, c.__max, c.__step]
                    })) : b
                };
                c.min = o.compose(e, c.min), c.max = o.compose(e, c.max)
            } else c instanceof f ? (n.bind(b, "click", function() {
                n.fakeEvent(c.__checkbox, "click")
            }), n.bind(c.__checkbox, "click", function(a) {
                a.stopPropagation()
            })) : c instanceof g ? (n.bind(b, "click", function() {
                n.fakeEvent(c.__button, "click")
            }), n.bind(b, "mouseover", function() {
                n.addClass(c.__button, "hover")
            }), n.bind(b, "mouseout", function() {
                n.removeClass(c.__button, "hover")
            })) : c instanceof k && (n.addClass(b, "color"), c.updateDisplay = o.compose(function(a) {
                return b.style.borderLeftColor = c.__color.toString(), a
            }, c.updateDisplay), c.updateDisplay());
            c.setValue = o.compose(function(b) {
                return a.getRoot().__preset_select && c.isModified() && A(a.getRoot(), !0), b
            }, c.setValue)
        }

        function s(a, b) {
            var c = a.getRoot(),
                d = c.__rememberedObjects.indexOf(b.object);
            if (-1 != d) {
                var e = c.__rememberedObjectIndecesToControllers[d];
                if (void 0 === e && (e = {}, c.__rememberedObjectIndecesToControllers[d] = e), e[b.property] = b, c.load && c.load.remembered) {
                    var f, g = c.load.remembered;
                    if (g[a.preset]) f = g[a.preset];
                    else {
                        if (!g[H]) return;
                        f = g[H]
                    }
                    if (f[d] && void 0 !== f[d][b.property]) {
                        var h = f[d][b.property];
                        b.initialValue = h, b.setValue(h)
                    }
                }
            }
        }

        function t(a, b) {
            return document.location.href + "." + b
        }

        function u(a) {
            function b() {
                j.style.display = a.useLocalStorage ? "block" : "none"
            }
            var c = a.__save_row = document.createElement("li");
            n.addClass(a.domElement, "has-save"), a.__ul.insertBefore(c, a.__ul.firstChild), n.addClass(c, "save-row");
            var d = document.createElement("span");
            d.innerHTML = "&nbsp;", n.addClass(d, "button gears");
            var e = document.createElement("span");
            e.innerHTML = "Save", n.addClass(e, "button"), n.addClass(e, "save");
            var f = document.createElement("span");
            f.innerHTML = "New", n.addClass(f, "button"), n.addClass(f, "save-as");
            var g = document.createElement("span");
            g.innerHTML = "Revert", n.addClass(g, "button"), n.addClass(g, "revert");
            var h = a.__preset_select = document.createElement("select");
            if (a.load && a.load.remembered ? o.each(a.load.remembered, function(b, c) {
                    y(a, c, c == a.preset)
                }) : y(a, H, !1), n.bind(h, "change", function() {
                    for (var b = 0; b < a.__preset_select.length; b++) a.__preset_select[b].innerHTML = a.__preset_select[b].value;
                    a.preset = this.value
                }), c.appendChild(h), c.appendChild(d), c.appendChild(e), c.appendChild(f), c.appendChild(g), I) {
                var i = document.getElementById("dg-save-locally"),
                    j = document.getElementById("dg-local-explain");
                i.style.display = "block";
                var k = document.getElementById("dg-local-storage");
                "true" === localStorage.getItem(t(a, "isLocal")) && k.setAttribute("checked", "checked"), b(), n.bind(k, "change", function() {
                    a.useLocalStorage = !a.useLocalStorage, b()
                })
            }
            var l = document.getElementById("dg-new-constructor");
            n.bind(l, "keydown", function(a) {
                !a.metaKey || 67 !== a.which && 67 != a.keyCode || C.hide()
            }), n.bind(d, "click", function() {
                l.innerHTML = JSON.stringify(a.getSaveObject(), void 0, 2), C.show(), l.focus(), l.select()
            }), n.bind(e, "click", function() {
                a.save()
            }), n.bind(f, "click", function() {
                var b = prompt("Enter a new preset name.");
                b && a.saveAs(b)
            }), n.bind(g, "click", function() {
                a.revert()
            })
        }

        function v(a) {
            function b(b) {
                return b.preventDefault(), e = b.clientX, n.addClass(a.__closeButton, M.CLASS_DRAG), n.bind(window, "mousemove", c), n.bind(window, "mouseup", d), !1
            }

            function c(b) {
                return b.preventDefault(), a.width += e - b.clientX, a.onResize(), e = b.clientX, !1
            }

            function d() {
                n.removeClass(a.__closeButton, M.CLASS_DRAG), n.unbind(window, "mousemove", c), n.unbind(window, "mouseup", d)
            }
            a.__resize_handle = document.createElement("div"), o.extend(a.__resize_handle.style, {
                width: "6px",
                marginLeft: "-3px",
                height: "200px",
                cursor: "ew-resize",
                position: "absolute"
            });
            var e;
            n.bind(a.__resize_handle, "mousedown", b), n.bind(a.__closeButton, "mousedown", b), a.domElement.insertBefore(a.__resize_handle, a.domElement.firstElementChild)
        }

        function w(a, b) {
            a.domElement.style.width = b + "px", a.__save_row && a.autoPlace && (a.__save_row.style.width = b + "px"), a.__closeButton && (a.__closeButton.style.width = b + "px")
        }

        function x(a, b) {
            var c = {};
            return o.each(a.__rememberedObjects, function(d, e) {
                var f = {},
                    g = a.__rememberedObjectIndecesToControllers[e];
                o.each(g, function(a, c) {
                    f[c] = b ? a.initialValue : a.getValue()
                }), c[e] = f
            }), c
        }

        function y(a, b, c) {
            var d = document.createElement("option");
            d.innerHTML = b, d.value = b, a.__preset_select.appendChild(d), c && (a.__preset_select.selectedIndex = a.__preset_select.length - 1)
        }

        function z(a) {
            for (var b = 0; b < a.__preset_select.length; b++) a.__preset_select[b].value == a.preset && (a.__preset_select.selectedIndex = b)
        }

        function A(a, b) {
            var c = a.__preset_select[a.__preset_select.selectedIndex];
            c.innerHTML = b ? c.value + "*" : c.value
        }

        function B(a) {
            0 != a.length && l(function() {
                B(a)
            }), o.each(a, function(a) {
                a.updateDisplay()
            })
        }
        a.inject(c);
        var C, D, E = "dg",
            F = 72,
            G = 20,
            H = "Default",
            I = function() {
                try {
                    return "localStorage" in window && null !== window.localStorage
                } catch (a) {
                    return !1
                }
            }(),
            J = !0,
            K = !1,
            L = [],
            M = function(a) {
                function b() {
                    var a = c.getRoot();
                    a.width += 1, o.defer(function() {
                        a.width -= 1
                    })
                }
                var c = this;
                this.domElement = document.createElement("div"), this.__ul = document.createElement("ul"), this.domElement.appendChild(this.__ul), n.addClass(this.domElement, E), this.__folders = {}, this.__controllers = [], this.__rememberedObjects = [], this.__rememberedObjectIndecesToControllers = [], this.__listening = [], a = a || {}, a = o.defaults(a, {
                    autoPlace: !0,
                    width: M.DEFAULT_WIDTH
                }), a = o.defaults(a, {
                    resizable: a.autoPlace,
                    hideable: a.autoPlace
                }), o.isUndefined(a.load) ? a.load = {
                    preset: H
                } : a.preset && (a.load.preset = a.preset), o.isUndefined(a.parent) && a.hideable && L.push(this), a.resizable = o.isUndefined(a.parent) && a.resizable, a.autoPlace && o.isUndefined(a.scrollable) && (a.scrollable = !0);
                var d, e = I && "true" === localStorage.getItem(t(this, "isLocal"));
                if (Object.defineProperties(this, {
                        parent: {
                            get: function() {
                                return a.parent
                            }
                        },
                        scrollable: {
                            get: function() {
                                return a.scrollable
                            }
                        },
                        autoPlace: {
                            get: function() {
                                return a.autoPlace
                            }
                        },
                        preset: {
                            get: function() {
                                return c.parent ? c.getRoot().preset : a.load.preset
                            },
                            set: function(b) {
                                c.parent ? c.getRoot().preset = b : a.load.preset = b, z(this), c.revert()
                            }
                        },
                        width: {
                            get: function() {
                                return a.width
                            },
                            set: function(b) {
                                a.width = b, w(c, b)
                            }
                        },
                        name: {
                            get: function() {
                                return a.name
                            },
                            set: function(b) {
                                a.name = b, g && (g.innerHTML = a.name)
                            }
                        },
                        closed: {
                            get: function() {
                                return a.closed
                            },
                            set: function(b) {
                                a.closed = b, a.closed ? n.addClass(c.__ul, M.CLASS_CLOSED) : n.removeClass(c.__ul, M.CLASS_CLOSED), this.onResize(), c.__closeButton && (c.__closeButton.innerHTML = b ? M.TEXT_OPEN : M.TEXT_CLOSED)
                            }
                        },
                        load: {
                            get: function() {
                                return a.load
                            }
                        },
                        useLocalStorage: {
                            get: function() {
                                return e
                            },
                            set: function(a) {
                                I && (e = a, a ? n.bind(window, "unload", d) : n.unbind(window, "unload", d), localStorage.setItem(t(c, "isLocal"), a))
                            }
                        }
                    }), o.isUndefined(a.parent)) {
                    if (a.closed = !1, n.addClass(this.domElement, M.CLASS_MAIN), n.makeSelectable(this.domElement, !1), I && e) {
                        c.useLocalStorage = !0;
                        var f = localStorage.getItem(t(this, "gui"));
                        f && (a.load = JSON.parse(f))
                    }
                    this.__closeButton = document.createElement("div"), this.__closeButton.innerHTML = M.TEXT_CLOSED, n.addClass(this.__closeButton, M.CLASS_CLOSE_BUTTON), this.domElement.appendChild(this.__closeButton), n.bind(this.__closeButton, "click", function() {
                        c.closed = !c.closed
                    })
                } else {
                    void 0 === a.closed && (a.closed = !0);
                    var g = document.createTextNode(a.name);
                    n.addClass(g, "controller-name");
                    var h = q(c, g),
                        i = function(a) {
                            return a.preventDefault(), c.closed = !c.closed, !1
                        };
                    n.addClass(this.__ul, M.CLASS_CLOSED), n.addClass(h, "title"), n.bind(h, "click", i), a.closed || (this.closed = !1)
                }
                a.autoPlace && (o.isUndefined(a.parent) && (J && (D = document.createElement("div"), n.addClass(D, E), n.addClass(D, M.CLASS_AUTO_PLACE_CONTAINER), document.body.appendChild(D), J = !1), D.appendChild(this.domElement), n.addClass(this.domElement, M.CLASS_AUTO_PLACE)), this.parent || w(c, a.width)), n.bind(window, "resize", function() {
                    c.onResize()
                }), n.bind(this.__ul, "webkitTransitionEnd", function() {
                    c.onResize()
                }), n.bind(this.__ul, "transitionend", function() {
                    c.onResize()
                }), n.bind(this.__ul, "oTransitionEnd", function() {
                    c.onResize()
                }), this.onResize(), a.resizable && v(this), d = function() {
                    I && "true" === localStorage.getItem(t(c, "isLocal")) && localStorage.setItem(t(c, "gui"), JSON.stringify(c.getSaveObject()))
                }, this.saveToLocalStorageIfPossible = d;
                c.getRoot();
                a.parent || b()
            };
        return M.toggleHide = function() {
            K = !K, o.each(L, function(a) {
                a.domElement.style.zIndex = K ? -999 : 999, a.domElement.style.opacity = K ? 0 : 1
            })
        }, M.CLASS_AUTO_PLACE = "a", M.CLASS_AUTO_PLACE_CONTAINER = "ac", M.CLASS_MAIN = "main", M.CLASS_CONTROLLER_ROW = "cr", M.CLASS_TOO_TALL = "taller-than-window", M.CLASS_CLOSED = "closed", M.CLASS_CLOSE_BUTTON = "close-button", M.CLASS_DRAG = "drag", M.DEFAULT_WIDTH = 245, M.TEXT_CLOSED = "Close Controls", M.TEXT_OPEN = "Open Controls", n.bind(window, "keydown", function(a) {
            "text" === document.activeElement.type || a.which !== F && a.keyCode != F || M.toggleHide()
        }, !1), o.extend(M.prototype, {
            add: function(a, b) {
                return p(this, a, b, {
                    factoryArgs: Array.prototype.slice.call(arguments, 2)
                })
            },
            addColor: function(a, b) {
                return p(this, a, b, {
                    color: !0
                })
            },
            remove: function(a) {
                this.__ul.removeChild(a.__li), this.__controllers.slice(this.__controllers.indexOf(a), 1);
                var b = this;
                o.defer(function() {
                    b.onResize()
                })
            },
            destroy: function() {
                this.autoPlace && D.removeChild(this.domElement)
            },
            addFolder: function(a) {
                if (void 0 !== this.__folders[a]) throw new Error('You already have a folder in this GUI by the name "' + a + '"');
                var b = {
                    name: a,
                    parent: this
                };
                b.autoPlace = this.autoPlace, this.load && this.load.folders && this.load.folders[a] && (b.closed = this.load.folders[a].closed, b.load = this.load.folders[a]);
                var c = new M(b);
                this.__folders[a] = c;
                var d = q(this, c.domElement);
                return n.addClass(d, "folder"), c
            },
            open: function() {
                this.closed = !1
            },
            close: function() {
                this.closed = !0
            },
            onResize: function() {
                var a = this.getRoot();
                if (a.scrollable) {
                    var b = n.getOffset(a.__ul).top,
                        c = 0;
                    o.each(a.__ul.childNodes, function(b) {
                        a.autoPlace && b === a.__save_row || (c += n.getHeight(b))
                    }), window.innerHeight - b - G < c ? (n.addClass(a.domElement, M.CLASS_TOO_TALL), a.__ul.style.height = window.innerHeight - b - G + "px") : (n.removeClass(a.domElement, M.CLASS_TOO_TALL), a.__ul.style.height = "auto")
                }
                a.__resize_handle && o.defer(function() {
                    a.__resize_handle.style.height = a.__ul.offsetHeight + "px"
                }), a.__closeButton && (a.__closeButton.style.width = a.width + "px")
            },
            remember: function() {
                if (o.isUndefined(C) && (C = new m, C.domElement.innerHTML = b), this.parent) throw new Error("You can only call remember on a top level GUI.");
                var a = this;
                o.each(Array.prototype.slice.call(arguments), function(b) {
                    0 == a.__rememberedObjects.length && u(a), -1 == a.__rememberedObjects.indexOf(b) && a.__rememberedObjects.push(b)
                }), this.autoPlace && w(this, this.width)
            },
            getRoot: function() {
                for (var a = this; a.parent;) a = a.parent;
                return a
            },
            getSaveObject: function() {
                var a = this.load;
                return a.closed = this.closed, this.__rememberedObjects.length > 0 && (a.preset = this.preset, a.remembered || (a.remembered = {}), a.remembered[this.preset] = x(this)), a.folders = {}, o.each(this.__folders, function(b, c) {
                    a.folders[c] = b.getSaveObject()
                }), a
            },
            save: function() {
                this.load.remembered || (this.load.remembered = {}), this.load.remembered[this.preset] = x(this), A(this, !1), this.saveToLocalStorageIfPossible()
            },
            saveAs: function(a) {
                this.load.remembered || (this.load.remembered = {}, this.load.remembered[H] = x(this, !0)), this.load.remembered[a] = x(this), this.preset = a, y(this, a, !0), this.saveToLocalStorageIfPossible()
            },
            revert: function(a) {
                o.each(this.__controllers, function(b) {
                    this.getRoot().load.remembered ? s(a || this.getRoot(), b) : b.setValue(b.initialValue)
                }, this), o.each(this.__folders, function(a) {
                    a.revert(a)
                }), a || A(this.getRoot(), !1)
            },
            listen: function(a) {
                var b = 0 == this.__listening.length;
                this.__listening.push(a), b && B(this.__listening)
            }
        }), M
    }), define("comic/audio/Atmos", ["underscore", "utils/inherit", "audio/Thump", "dat/gui/GUI"], function(a, b, c, d) {
        var e = function(b) {
                this.thumpId = b, this._volumeIn = 0, this._volumeOut = 0, a.throttle(this.update, 1e3 / 30), this.update()
            },
            f = e.prototype;
        Object.defineProperties(f, {
            volumeIn: {
                set: function(a) {
                    a > 1 && (a = 1), 0 > a && (a = 0), this._volumeIn = a, this.update()
                },
                get: function() {
                    return this._volumeIn
                }
            },
            volumeOut: {
                set: function(a) {
                    a > 1 && (a = 1), 0 > a && (a = 0), this._volumeOut = a, this.update()
                },
                get: function() {
                    return this._volumeOut
                }
            }
        });
        var f = e.prototype;
        return f.update = function() {
            this.applyVolume()
        }, f.applyVolume = function() {
            if (this.volumeMixed = this._volumeIn * this._volumeOut, !this.thumpInstance && this.volumeMixed > 0 ? (console.log(this.thumpId, "loading"), this.thumpInstance = c.get(this.thumpId), this.thumpInstance.load()) : this.thumpInstance && this.volumeMixed <= 0 && (console.log(this.thumpId, "pause"), this.thumpInstance.pause(), this.thumpInstance = null, this.guiFolder && this.guiFolder.close()), this.thumpInstance && this.thumpInstance.isLoaded && !this.thumpInstance.isPlaying)
                if (console.log(this.thumpId, "play"), this.thumpInstance.play(-1), e.gui && !this.guiFolder) {
                    var a = Math.floor(1e5 * Math.random());
                    this.guiFolder = e.gui.addFolder(this.thumpId + " UID: " + a), this.guiFolder.add(this, "_volumeIn").listen(), this.guiFolder.add(this, "_volumeOut").listen(), this.guiFolder.open()
                } else this.guiFolder && this.guiFolder.open();
            this.thumpInstance && this.thumpInstance.volume != this.volumeMixed && (this.thumpInstance.volume = this.volumeMixed)
        }, e.initialized = function() {
            return "?samMode" == window.location.search && (e.gui = new d), !0
        }(), e
    }), define("comic/audio/SoundEffect", ["utils/inherit", "audio/Thump"], function(a, b) {
        var c = function(a, b) {
                this.thumpId = a, this.volume = isNaN(b) ? 1 : b
            },
            d = c.prototype;
        return d.play = function() {
            this.playedOnce || (this.playedOnce = !0, this.thumpInstance = b.get(this.thumpId), this.thumpInstance.volume = this.volume, this.thumpInstance.play())
        }, c
    }), define("math/ArmyKnife", [], function() {
        var a = function() {
            throw "Only static methods to be found here."
        };
        return a.map = function(a, b, c, d, e, f, g, h) {
            f = void 0 === f ? !1 : f, g = void 0 === g ? !0 : g, h = void 0 === h ? !0 : h;
            var i = (a - b) / (c - b),
                j = i * (e - d) + d;
            return f && (j = Math.round(j)), g && d > j ? d : h && j > e ? e : j
        }, a.radiansToDegrees = function(a) {
            return 180 * a / Math.PI
        }, a.radiansToDegrees = function(a) {
            return 180 * a / Math.PI
        }, a.rangeToPercent = function(a, b, c, d, e) {
            return d = void 0 === d ? !0 : d, e = void 0 === e ? !0 : e, d && b > a ? 0 : e && a > c ? 1 : (a - b) / (c - b)
        }, a.percentToRange = function(a, b, c) {
            return a * (c - b) + b
        }, a.sign = function(a) {
            return 0 > a ? -1 : 1
        }, a.between = function(a, b, c) {
            var d = Math.min(b, c),
                e = Math.max(b, c);
            return a >= d && e >= a
        }, a
    }), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c) {
            this.type = a, this.target = null, this.currentTarget = null, this.eventPhase = 0, this.bubbles = !!b, this.cancelable = !!c, this.timeStamp = (new Date).getTime(), this.defaultPrevented = !1, this.propagationStopped = !1, this.immediatePropagationStopped = !1, this.removed = !1
        }
        var b = a.prototype;
        b.preventDefault = function() {
            this.defaultPrevented = this.cancelable && !0
        }, b.stopPropagation = function() {
            this.propagationStopped = !0
        }, b.stopImmediatePropagation = function() {
            this.immediatePropagationStopped = this.propagationStopped = !0
        }, b.remove = function() {
            this.removed = !0
        }, b.clone = function() {
            return new a(this.type, this.bubbles, this.cancelable)
        }, b.set = function(a) {
            for (var b in a) this[b] = a[b];
            return this
        }, b.toString = function() {
            return "[Event (type=" + this.type + ")]"
        }, createjs.Event = a
    }(), define("createjsEvent", function() {}), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a() {
            this._listeners = null, this._captureListeners = null
        }
        var b = a.prototype;
        a.initialize = function(a) {
            a.addEventListener = b.addEventListener, a.on = b.on, a.removeEventListener = a.off = b.removeEventListener, a.removeAllEventListeners = b.removeAllEventListeners, a.hasEventListener = b.hasEventListener, a.dispatchEvent = b.dispatchEvent, a._dispatchEvent = b._dispatchEvent, a.willTrigger = b.willTrigger
        }, b.addEventListener = function(a, b, c) {
            var d;
            d = c ? this._captureListeners = this._captureListeners || {} : this._listeners = this._listeners || {};
            var e = d[a];
            return e && this.removeEventListener(a, b, c), e = d[a], e ? e.push(b) : d[a] = [b], b
        }, b.on = function(a, b, c, d, e, f) {
            return b.handleEvent && (c = c || b, b = b.handleEvent), c = c || this, this.addEventListener(a, function(a) {
                b.call(c, a, e), d && a.remove()
            }, f)
        }, b.removeEventListener = function(a, b, c) {
            var d = c ? this._captureListeners : this._listeners;
            if (d) {
                var e = d[a];
                if (e)
                    for (var f = 0, g = e.length; g > f; f++)
                        if (e[f] == b) {
                            1 == g ? delete d[a] : e.splice(f, 1);
                            break
                        }
            }
        }, b.off = b.removeEventListener, b.removeAllEventListeners = function(a) {
            a ? (this._listeners && delete this._listeners[a], this._captureListeners && delete this._captureListeners[a]) : this._listeners = this._captureListeners = null
        }, b.dispatchEvent = function(a) {
            if ("string" == typeof a) {
                var b = this._listeners;
                if (!b || !b[a]) return !1;
                a = new createjs.Event(a)
            } else a.target && a.clone && (a = a.clone());
            try {
                a.target = this
            } catch (c) {}
            if (a.bubbles && this.parent) {
                for (var d = this, e = [d]; d.parent;) e.push(d = d.parent);
                var f, g = e.length;
                for (f = g - 1; f >= 0 && !a.propagationStopped; f--) e[f]._dispatchEvent(a, 1 + (0 == f));
                for (f = 1; g > f && !a.propagationStopped; f++) e[f]._dispatchEvent(a, 3)
            } else this._dispatchEvent(a, 2);
            return a.defaultPrevented
        }, b.hasEventListener = function(a) {
            var b = this._listeners,
                c = this._captureListeners;
            return !!(b && b[a] || c && c[a])
        }, b.willTrigger = function(a) {
            for (var b = this; b;) {
                if (b.hasEventListener(a)) return !0;
                b = b.parent
            }
            return !1
        }, b.toString = function() {
            return "[EventDispatcher]"
        }, b._dispatchEvent = function(a, b) {
            var c, d = 1 == b ? this._captureListeners : this._listeners;
            if (a && d) {
                var e = d[a.type];
                if (!e || !(c = e.length)) return;
                try {
                    a.currentTarget = this
                } catch (f) {}
                try {
                    a.eventPhase = b
                } catch (f) {}
                a.removed = !1, e = e.slice();
                for (var g = 0; c > g && !a.immediatePropagationStopped; g++) {
                    var h = e[g];
                    h.handleEvent ? h.handleEvent(a) : h(a), a.removed && (this.off(a.type, h, 1 == b), a.removed = !1)
                }
            }
        }, createjs.EventDispatcher = a
    }(), define("createjsEventDispatcher", ["createjsEvent"], function(a) {
        return function() {
            var b;
            return b || a.createjs
        }
    }(this)), define("comic/display/Image", ["underscore", "threejs", "createjsEventDispatcher", "config"], function(a, b, c, d) {
        var e = function(c, e, f, g, h) {
                h = h || {};
                var i = null;
                c && (this.imgURL = this.rewriteTabletURL(c), this.imgURL = d.imagesBasePath + this.imgURL), this.crossOrigin = d.isCORSOnImagesAvailable, this.width = e || 100, this.height = f || 100, this.scale = g || 1, this.bufferGeometry = void 0 === h.bufferGeometry ? !0 : h.bufferGeometry, this.widthSegments = h.widthSegments || 1, this.heightSegments = h.heightSegments || 1, this.color = isNaN(h.color) ? null : h.color, this.cacheTexture = void 0 === h.cacheTexture ? !0 : h.cacheTexture, i = this.bufferGeometry ? b.PlaneBufferGeometry : b.PlaneGeometry, this.geometry = new i(this.width * this.scale, this.height * this.scale, this.widthSegments, this.heightSegments), this.texture = this.getTexture(this.cacheTexture, c), this.material = new b.MeshBasicMaterial({
                    color: this.color
                }), this.material.shading = b.NoShading, this.material.needsUpdate = !0, this.mesh = new b.Mesh(this.geometry, this.material), this.material.transparent = !0, a.bindAll(this, "onLoad")
            },
            f = e.prototype;
        return c.EventDispatcher.initialize(f), Object.defineProperties(f, {
            img: {
                set: function(a) {
                    this._img = a, this.texture && (this.texture.image = this._img, this.texture.needsUpdate = !0, this.material.map = this.texture, this.material.needsUpdate = !0)
                },
                get: function() {
                    return this._img
                }
            }
        }), e.textureCache = [], f.rewriteTabletURL = function(a) {
            return "tablet" == Detectizr.device.type || "mobile" == Detectizr.device.type ? a.split("images/").join("images-tablet/") : a
        }, f.load = function() {
            this.loader = new b.ImageLoader, this.crossOrigin && (this.loader.crossOrigin = "anonymous"), this.loader.load(this.imgURL, this.onLoad)
        }, f.getTexture = function(c, d) {
            var f = a.findWhere(e.textureCache, {
                imgURL: d
            });
            if (f) return f.texture;
            var g = new b.Texture;
            return g.minFilter = b.LinearFilter, c && e.textureCache.push({
                imgURL: d,
                texture: g
            }), g
        }, f.removeTextureFromCache = function(a) {
            for (var b = [], c = 0; c < e.textureCache.length; c++) {
                var d = e.textureCache[c];
                d.texture != a && b.push(d)
            }
            e.textureCache = b
        }, f.onLoad = function(b) {
            this.loaded = !0, this.disposed || a.defer(function() {
                this.img = b, this.dispatchEvent({
                    type: "load"
                })
            }.bind(this))
        }, f.dispose = function() {
            this.geometry.dispose(), this.material.dispose(), this.texture.dispose(), this.cacheTexture && this.removeTextureFromCache(this.texture), this.geometry = null, this.material = null, this.texture = null, this.mesh = null, this._img = null, this.loader = null, this.disposed = !0
        }, e
    }), define("comic/ComicMetrics", [], function() {
        var a = {};
        return a.columnsTotal = 12, a.columnSize = 102, a.columnGutterSize = 15, a.tierSize = 450, a.tierGutterSize = 90, a.width = a.columnsTotal * a.columnSize + (a.columnsTotal - 1) * a.columnGutterSize, a.left = a.width * -.5, a.right = .5 * a.width, a.getWidthOf = function(b) {
            return b * a.columnSize + (b - 1) * a.columnGutterSize
        }, a.getHeightOf = function(b) {
            return b * a.tierSize + (b - 1) * a.tierGutterSize
        }, a
    }), define("comic/UnitParser", ["comic/ComicMetrics"], function(a) {
        var b = {};
        return b.toPixels = function(b) {
            var c = 0;
            return "number" == typeof b ? b : ("string" == typeof b && (-1 != b.lastIndexOf("col") ? (b = b.substring(0, b.length - 3), c = a.getWidthOf(b)) : -1 != b.lastIndexOf("tier") ? (b = b.substring(0, b.length - 4), c = a.getHeightOf(b)) : -1 != b.lastIndexOf("px") && (b = b.substring(0, b.length - 2), c = parseInt(b, 10))), c)
        }, b
    }), define("comic/Queue", ["underscore", "createjsEventDispatcher"], function(a, b) {
        var c = function(b, c) {
                this.lookup = [], this.defaultStartFunctionName = b, this.defaultEventType = c, a.bindAll(this, "onEvent")
            },
            d = c.prototype;
        return b.EventDispatcher.initialize(d), d.add = function(a, b, c, d) {
            this.lookup.push({
                dispatcher: a,
                startFunctionName: b || this.defaultStartFunctionName,
                eventType: c || this.defaultEventType,
                args: d || []
            })
        }, d.start = function() {
            var a, b;
            if (this.started = !0, 0 == this.lookup.length) return void this.dispatchEvent({
                type: "complete"
            });
            for (var c = 0; c < this.lookup.length; c++) a = this.lookup[c], a.dispatcher.addEventListener(a.eventType, this.onEvent), b = a.dispatcher[a.startFunctionName], b.call(a.dispatcher, a.args)
        }, d.dispose = function() {
            for (var a, b = 0; b < this.lookup.length; b++) a = this.lookup[b], a.dispatcher.removeEventListener(a.eventType, this.onEvent);
            this.lookup = null
        }, d.onEvent = function(b) {
            var c = b.target,
                d = a.findWhere(this.lookup, {
                    dispatcher: c
                });
            c.removeEventListener(d.eventType, this.onEvent), this.lookup = a.filter(this.lookup, function(a) {
                return a.dispatcher != c
            }), 0 == this.lookup.length && (this.complete = !0, this.dispatchEvent({
                type: "complete"
            }))
        }, c
    }), define("utils/Color", [], function() {
        var a = function(a, b, c) {
                this.r = a, this.g = b, this.b = c
            },
            b = a.prototype;
        return a.random = function() {
            return new a(Math.random(), Math.random(), Math.random())
        }, a.fromRGB = function(b, c, d) {
            return new a(b, c, d)
        }, a.fromInt = function(b) {
            var c = b >> 16 & 255,
                d = b >> 8 & 255,
                e = 255 & b;
            return new a(c / 255, d / 255, e / 255)
        }, b.toInt = function() {
            return 255 * this.b & 255 | (255 * this.g & 255) << 8 | (255 * this.r & 255) << 16
        }, b.toHTML = function() {
            var a = function(a) {
                    var b;
                    return a = Math.floor(255 * a), b = a.toString(16), b.length <= 1 && (b = "0" + b), b
                },
                b = "#" + a(this.r) + a(this.g) + a(this.b);
            return b
        }, b.toHSV = function() {
            var a = {},
                b = Math.min(this.r, this.g, this.b),
                c = Math.max(this.r, this.g, this.b),
                d = c - b;
            return a.v = c, 0 == c ? (a.s = 0, void(a.h = -1)) : (a.s = d / c, a.h = this.r == c ? (this.g - this.b) / d : this.g == c ? 2 + (this.b - this.r) / d : 4 + (this.r - this.g) / d, a.h *= 60, a.h < 0 && (a.h += 360), a)
        }, b.clone = function() {
            return new a(this.r, this.g, this.b)
        }, a
    }), THREE.CSS3DObject = function(a) {
        THREE.Object3D.call(this), this.element = a, this.element.style.position = "absolute", this.addEventListener("removed", function() {
            null !== this.element.parentNode && this.element.parentNode.removeChild(this.element)
        })
    }, THREE.CSS3DObject.prototype = Object.create(THREE.Object3D.prototype), THREE.CSS3DObject.prototype.constructor = THREE.CSS3DObject, THREE.CSS3DSprite = function(a) {
        THREE.CSS3DObject.call(this, a)
    }, THREE.CSS3DSprite.prototype = Object.create(THREE.CSS3DObject.prototype), THREE.CSS3DSprite.prototype.constructor = THREE.CSS3DSprite, THREE.CSS3DRenderer = function() {
        console.log("THREE.CSS3DRenderer", THREE.REVISION);
        var a, b, c, d, e = new THREE.Matrix4,
            f = {
                camera: {
                    fov: 0,
                    style: ""
                },
                objects: {}
            },
            g = document.createElement("div");
        g.style.overflow = "hidden", g.style.WebkitTransformStyle = "preserve-3d", g.style.MozTransformStyle = "preserve-3d", g.style.oTransformStyle = "preserve-3d", g.style.transformStyle = "preserve-3d", this.domElement = g;
        var h = document.createElement("div");
        h.style.WebkitTransformStyle = "preserve-3d", h.style.MozTransformStyle = "preserve-3d", h.style.oTransformStyle = "preserve-3d", h.style.transformStyle = "preserve-3d", g.appendChild(h), this.setClearColor = function() {}, this.setSize = function(e, f) {
            a = e, b = f, c = a / 2, d = b / 2, g.style.width = e + "px", g.style.height = f + "px", h.style.width = e + "px", h.style.height = f + "px"
        };
        var i = function(a) {
                return Math.abs(a) < 1e-6 ? 0 : a
            },
            j = function(a) {
                var b = a.elements;
                return "matrix3d(" + i(b[0]) + "," + i(-b[1]) + "," + i(b[2]) + "," + i(b[3]) + "," + i(b[4]) + "," + i(-b[5]) + "," + i(b[6]) + "," + i(b[7]) + "," + i(b[8]) + "," + i(-b[9]) + "," + i(b[10]) + "," + i(b[11]) + "," + i(b[12]) + "," + i(-b[13]) + "," + i(b[14]) + "," + i(b[15]) + ")"
            },
            k = function(a) {
                var b = a.elements;
                return "translate3d(-50%,-50%,0) matrix3d(" + i(b[0]) + "," + i(b[1]) + "," + i(b[2]) + "," + i(b[3]) + "," + i(-b[4]) + "," + i(-b[5]) + "," + i(-b[6]) + "," + i(-b[7]) + "," + i(b[8]) + "," + i(b[9]) + "," + i(b[10]) + "," + i(b[11]) + "," + i(b[12]) + "," + i(b[13]) + "," + i(b[14]) + "," + i(b[15]) + ")"
            },
            l = function(a, b) {
                if (a instanceof THREE.CSS3DObject) {
                    var c;
                    a instanceof THREE.CSS3DSprite ? (e.copy(b.matrixWorldInverse), e.transpose(), e.copyPosition(a.matrixWorld), e.scale(a.scale), e.elements[3] = 0, e.elements[7] = 0, e.elements[11] = 0, e.elements[15] = 1, c = k(e)) : c = k(a.matrixWorld);
                    var d = a.element,
                        g = f.objects[a.id];
                    (void 0 === g || g !== c) && (d.style.WebkitTransform = c, d.style.MozTransform = c, d.style.oTransform = c, d.style.transform = c, f.objects[a.id] = c), d.parentNode !== h && h.appendChild(d)
                }
                for (var i = 0, j = a.children.length; j > i; i++) l(a.children[i], b)
            };
        this.render = function(a, e) {
            var i = .5 / Math.tan(THREE.Math.degToRad(.5 * e.fov)) * b;
            f.camera.fov !== i && (g.style.WebkitPerspective = i + "px", g.style.MozPerspective = i + "px", g.style.oPerspective = i + "px", g.style.perspective = i + "px", f.camera.fov = i), a.updateMatrixWorld(), void 0 === e.parent && e.updateMatrixWorld(), e.matrixWorldInverse.getInverse(e.matrixWorld);
            var k = "translate3d(0,0," + i + "px)" + j(e.matrixWorldInverse) + " translate3d(" + c + "px," + d + "px, 0)";
            f.camera.style !== k && (h.style.WebkitTransform = k, h.style.MozTransform = k, h.style.oTransform = k, h.style.transform = k, f.camera.style = k), l(a, e)
        }
    }, define("threejsCSS", ["threejs"], function(a) {
        return function() {
            var b;
            return b || a.THREE
        }
    }(this)), define("comic/display/ComicObject", ["underscore", "utils/inherit", "comic/UnitParser", "comic/display/ComicObject", "comic/Queue", "utils/Color", "threejs", "threejsCSS", "createjsEventDispatcher"], function(a, b, c, d, e, f, g, h, i) {
        var d = function(b, d) {
                a.bindAll(this, "onLoadQueueComplete"), this._x = 0, this._y = 0, this._active = !1, this.debug = !1, this.useGL = !1, this.useCSS = !1, this.width = c.toPixels(b), this.height = c.toPixels(d), this.uid = function() {
                    function a() {
                        return Math.floor(65536 * (1 + Math.random())).toString(16).substring(1)
                    }
                    return a() + a() + "-" + a() + "-" + a() + "-" + a() + "-" + a() + a() + a()
                }()
            },
            j = d.prototype;
        return i.EventDispatcher.initialize(j), Object.defineProperties(j, {
            x: {
                set: function(a) {
                    this._x = a, this.draw()
                },
                get: function() {
                    return this._x
                }
            },
            y: {
                set: function(a) {
                    this._y = a, this.draw()
                },
                get: function() {
                    return this._y
                }
            },
            active: {
                set: function(a) {
                    a && !this._active ? (this.createActiveModeObjects(), this.load(), this.draw(), this.update()) : !a && this._active && this.disposeActiveModeObjects(), this._active = a
                },
                get: function() {
                    return this._active
                }
            }
        }), j.createCSS = function() {
            if (this.domElement = document.createElement("div"), this.domElement.style.width = this.width + "px", this.domElement.style.height = this.height + "px", this.domElement.style.willChange = "transform", this.objectCSS = new h.CSS3DObject(this.domElement), this.objectCSS.visible = !1, this.debug) {
                var a = document.createElement("div");
                a.innerHTML = this.width + " x " + this.height + " (" + 2 * this.width + " x " + 2 * this.height + ")", a.style.color = "black", this.domElement.appendChild(a)
            }
        }, j.disposeCSS = function() {
            this.objectCSS && (this.domElement.innerHTML = "", this.domElement = null, this.objectCSS = null)
        }, j.createGL = function() {
            this.objectGL = new g.Object3D, this.loadQueue = new e("load", "load"), this.objectGL.visible = !1, this.debug && (this.originGLPlaneGeom = new g.PlaneBufferGeometry(10, 10, 1, 1), this.originGLMaterial = new g.MeshBasicMaterial({
                color: 0,
                wireframe: !0
            }), this.originGLPlane = new g.Mesh(this.originGLPlaneGeom, this.originGLMaterial), this.objectGL.add(this.originGLPlane), this.debugGLPlaneGeom = new g.PlaneBufferGeometry(this.width, this.height, 1, 1), this.debugGLMaterial = new g.MeshBasicMaterial({
                color: f.random().toInt(),
                wireframe: !0,
                wireframeLinewidth: 2
            }), this.debugGLPlane = new g.Mesh(this.debugGLPlaneGeom, this.debugGLMaterial), this.objectGL.add(this.debugGLPlane))
        }, j.disposeGL = function() {
            this.objectGL && (this.objectGL = null), this.loadQueue && (this.loadQueue.dispose(), this.loadQueue = null), this.timeline && (this.timeline.kill(), this.timeline = null)
        }, j.draw = function() {
            this.objectGL && (this.objectGL.position.x = this._x, this.objectGL.position.y = this._y), this.objectCSS && (this.objectCSS.position.x = this._x, this.objectCSS.position.y = this._y)
        }, j.load = function() {
            this.loadQueue && (this.objectGL && (this.objectGL.visible = !1), this.objectCSS && (this.objectCSS.visible = !1), this.loadQueue.addEventListener("complete", this.onLoadQueueComplete), this.loadQueue.start())
        }, j.onLoadQueueComplete = function() {
            this.objectGL && (this.objectGL.visible = !0), this.objectCSS && (this.objectCSS.visible = !0), this.dispatchEvent({
                type: "load"
            })
        }, j.update = function() {}, j.createActiveModeObjects = function() {
            this.useGL && this.createGL(), this.useCSS && this.createCSS(), this.update()
        }, j.disposeActiveModeObjects = function() {
            this.disposeGL(), this.disposeCSS()
        }, j.dispose = j.disposeActiveModeObjects, d
    }), define("comic/display/BasicText", ["jquery", "underscore", "utils/inherit", "comic/display/Image", "comic/ComicMetrics", "comic/display/ComicObject"], function(a, b, c, d, e, f) {
        var g = function(a, c, d, e) {
                this.params = e || {}, this.params.rasterize = !1, this.params.offsetX = this.params.offsetX || 0, this.params.offsetY = this.params.offsetY || 0, this.params.offsetZ = this.params.offsetZ || 0, this.htmlText = b.isArray(d) ? d.join("") : d, this.ComicObject_constructor(a, c), this.useGL = !1, this.useCSS = !0, this._visible = !0
            },
            h = c.extend(g, f);
        return Object.defineProperties(h, {
            visible: {
                set: function(a) {
                    this._visible = a, this.domElement && (this.domElement.style.display = this._visible ? "block" : "none")
                },
                get: function() {
                    return this._visible
                }
            }
        }), h.createCSS = function() {
            this.ComicObject_createCSS(), this.div = document.createElement("div"), this.div.innerHTML = this.htmlText;
            try {
                a(this.div).find("p").widont()
            } catch (b) {}
            this.domElement.appendChild(this.div), this.objectCSS.position.z = this.params.offsetZ, TweenMax.set(this.div, {
                x: this.params.offsetX,
                y: this.params.offsetY
            })
        }, h.disposeCSS = function() {
            this.domElement && this.domElement.removeChild(this.div), this.div = null, this.ComicObject_disposeCSS()
        }, c.promote(g, "ComicObject"), g
    }), define("utils/ThreeUtils", ["threejs"], function(a) {
        var b = function() {
                this.zero = new a.Vector3, this.toScreenVector2 = new a.Vector2, this.toCanvasXYAVector2 = new a.Vector2, this.toCanvasXYBVector2 = new a.Vector2, this.toWindowXYAVector2 = new a.Vector2, this.toWindowXYBVector2 = new a.Vector2
            },
            c = b.prototype;
        return c.objectPositionToScreen = function(a, c) {
            var d = a.localToWorld(b.zero);
            return this.toScreen(d, c)
        }, c.localPositionToScreen = function(a, b, c) {
            c.updateMatrixWorld();
            var d = c.localToWorld(a);
            return this.toScreen(d, b)
        }, c.toScreen = function(a, b) {
            a = a.clone();
            var c = a.project(b);
            return this.toScreenVector2.x = (c.x + 1) / 2, this.toScreenVector2.y = (-c.y + 1) / 2, this.toScreenVector2
        }, c.toCanvasXY = function(a, b, c) {
            var d = this.toScreen(a, b);
            return this.toCanvasXYAVector2.x = 0, this.toCanvasXYAVector2.y = 0, this.toCanvasXYBVector2.x = c.width, this.toCanvasXYBVector2.y = c.height, this.toCanvasXYAVector2.multiplyVectors(this.toCanvasXYBVector2, d)
        }, c.toWindowXY = function(a, b) {
            var c = this.toScreen(a, b);
            return this.toWindowXYAVector2.x = 0, this.toWindowXYAVector2.y = 0, this.toWindowXYBVector2.x = canvas.width, this.toWindowXYBVector2.y = canvas.height, new this.toWindowXYAVector2(this.toWindowXYBVector2, c)
        }, c.isDescendantOf = function(a, b) {
            if (a && a.children)
                for (var c = 0; c < a.children.length; c++) {
                    var d = a.children[c];
                    if (d == b) return !0;
                    if (d.children) return this.isDescendantOf(d, b)
                }
            return !1
        }, b
    }), define("comic/ScreenPositionCache", ["underscore", "createjsEventDispatcher", "comic/display/BasicText", "utils/ThreeUtils"], function(a, b, c, d) {
        var e = function(b, c, e) {
                this.camera = b, this.containerGL = c, this.containerCSS = e, this.lookup = [], this.cssTasks = [], this.utils = new d, this.tmpComicObjectPosition = new THREE.Vector3, this.yieldedAtIndex = 0, this.totalOnScreen = 0, this.totalTextOnScreen = 0, this.totalCharsOnScreen = 0, this.optimiseLookup = a.throttle(this.optimiseLookup, 500)
            },
            f = e.prototype;
        return b.EventDispatcher.initialize(f), f.add = function(a) {
            this.lookup.push({
                comicObject: a,
                screenPosition: 0
            })
        }, f.update = function(a) {
            var b = Date.now();
            this.yieldedAtIndex >= this.lookup.length - 1 && (this.totalOnScreen = 0, this.totalTextOnScreen = 0, this.yieldedAtIndex = 0, this.totalCharsOnScreen = 0);
            for (var d = this.yieldedAtIndex, e = d; e < this.lookup.length; e++) {
                var f = this.lookup[e],
                    g = f.comicObject;
                if (this.tmpComicObjectPosition.set(g.x, g.y, 0), f.screenPosition = this.utils.localPositionToScreen(this.tmpComicObjectPosition, this.camera, this.containerGL).y, f.screenPosition >= 0 && f.screenPosition <= 1 && (this.totalOnScreen++, f.comicObject instanceof c && (this.totalTextOnScreen++, this.totalCharsOnScreen = f.comicObject.htmlText.length)), this.yieldedAtIndex = e, Date.now() - b >= 1e3 / 180 && !a) return
            }
            this.optimiseLookup()
        }, f.optimiseLookup = function() {
            this.lookup = this.lookup.sort(this._optimiseSortFunction)
        }, f._optimiseSortFunction = function(a) {
            return a.screenPosition >= 6 && a.screenPosition <= -6
        }, f.get = function(b) {
            var c = a.findWhere(this.lookup, {
                comicObject: b
            }).screenPosition;
            return c
        }, f._filterFunction = function(a) {
            return a.comicObject == this
        }, e
    }), define("comic/InteractivityManager", ["underscore", "threejs", "utils/ThreeUtils", "createjsEventDispatcher"], function(a, b, c, d) {
        var e = function(b, d) {
                this.utils = new c, this.domElement = b, this.camera = d, this.comicObjects = [], this.prevIntersectingComicObjects = [], this.position = {
                    x: 0,
                    y: 0
                }, this.prevPosition = {
                    x: 0,
                    y: 0
                }, a.bindAll(this, "onMouseDown", "onMouseMove", "onInterval"), this.domElement.addEventListener("mousedown", this.onMouseDown, !1), this.domElement.addEventListener("mousemove", this.onMouseMove, !1), setInterval(this.onInterval, 1e3 / 30)
            },
            f = e.prototype;
        return d.EventDispatcher.initialize(f), f.add = function(a) {
            this.comicObjects.push(a)
        }, f.checkInteractions = function() {
            if (this.comicObjects && this.comicObjects.length) {
                var c = new b.Vector3(this.position.x, this.position.y, .5);
                c.unproject(this.camera);
                var d = a.flatten(a.pluck(this.comicObjects, "objectGL"));
                if (d = a.without(d, void 0, null), d && d.length) {
                    var e = new b.Raycaster(this.camera.position, c.sub(this.camera.position).normalize()),
                        f = e.intersectObjects(d, !0),
                        g = a.flatten(a.pluck(f, "object"));
                    if (g && g.length) {
                        for (var h = [], i = 0; i < g.length; i++) {
                            var j = g[i],
                                k = this.getParentComicObject(j);
                            h.push(k), k && (this.position.x != this.prevPosition.x && this.position.y != this.prevPosition.y && this.dispatch("mouseMove", k), a.contains(this.prevIntersectingComicObjects, k) || this.dispatch("rollOver", k), this.wasClicked && this.dispatch("click", k))
                        }
                        this.domElement.style.cursor = "pointer"
                    } else this.domElement.style.cursor = "auto";
                    h = a.without(a.unique(h), null, void 0);
                    for (var l = 0; l < this.prevIntersectingComicObjects.length; l++) {
                        var m = this.prevIntersectingComicObjects[l];
                        a.contains(h, m) || this.dispatch("rollOut", m)
                    }
                    this.prevIntersectingComicObjects = h || []
                }
                this.wasClicked = !1
            }
        }, f.getParentComicObject = function(a) {
            for (var b = 0; b < this.comicObjects.length; b++) {
                var c = this.comicObjects[b],
                    d = c.objectGL;
                if (this.utils.isDescendantOf(d, a)) return c
            }
            return null
        }, f.onInterval = function() {
            this.checkInteractions()
        }, f.onMouseMove = function(a) {
            this.prevPosition = this.position, this.position.x = a.clientX / window.innerWidth * 2 - 1, this.position.y = 2 * -(a.clientY / window.innerHeight) + 1
        }, f.onMouseDown = function() {
            this.wasClicked = !0
        }, f.dispatch = function(a, b) {
            b.dispatchEvent({
                type: a
            }), this.dispatchEvent({
                type: a,
                object: b
            })
        }, e
    }), define("comic/ResourceManager", ["underscore", "createjsEventDispatcher", "utils/ThreeUtils"], function(a, b, c) {
        var d = function(b, d, e, f) {
                this.camera = b, this.screenPositionCache = d, this.containerGL = e, this.containerCSS = f, this.lookup = [], this.cssTasks = [], this.comicObjectPosition = new THREE.Vector3, this.utils = new c, this.time = 0, this.yieldedAtIndex = 0, this.processCSSTasks = "desktop" == Detectizr.device.type ? a.throttle(this.processCSSTasks, 500) : a.throttle(this.processCSSTasks, 2500)
            },
            e = d.prototype;
        return b.EventDispatcher.initialize(e), e.add = function(a, b) {
            b = b || {}, b.activeBetweenScreenPosition = b.activeBetweenScreenPosition || {
                min: -3,
                max: 4.5
            }, this.lookup.push({
                comicObject: a,
                params: b,
                hasLoaded: !1
            })
        }, e.update = function() {
            this.flagActive();
            for (var a = 0; a < this.lookup.length; a++) {
                var b = this.lookup[a],
                    c = b.comicObject;
                c.active && c.update()
            }
            this.processCSSTasks(), this.time++
        }, e.flagActive = function() {
            this.yieldedAtIndex >= this.lookup.length - 1 && (this.yieldedAtIndex = 0);
            for (var a = this.yieldedAtIndex, b = Date.now(), c = a; c < this.lookup.length; c++) {
                var d = this.lookup[c],
                    e = d.comicObject,
                    f = d.params,
                    g = this.screenPositionCache.get(e);
                if (g >= f.activeBetweenScreenPosition.min && g <= f.activeBetweenScreenPosition.max && 0 == e.active ? (e.active = !0, e.objectGL && this.containerGL.add(e.objectGL), e.objectCSS && this.cssTasks.push({
                        type: "add",
                        objectCSS: e.objectCSS
                    })) : (g < f.activeBetweenScreenPosition.min || g > f.activeBetweenScreenPosition.max) && 1 == e.active && (e.objectGL && this.containerGL.remove(e.objectGL), e.objectCSS && this.cssTasks.push({
                        type: "remove",
                        objectCSS: e.objectCSS
                    }), e.active = !1), this.yieldedAtIndex = c, Date.now() - b >= 1e3 / 240) return
            }
        }, e.processCSSTasks = function() {
            for (; this.cssTasks.length > 0;) {
                var a = this.cssTasks.shift();
                "add" == a.type && a.objectCSS && this.containerCSS.add(a.objectCSS), "remove" == a.type && a.objectCSS && this.containerCSS.remove(a.objectCSS)
            }
        }, d
    }), define("comic/TriggerManager", ["underscore", "createjsEventDispatcher", "comic/display/ComicObject"], function(a, b, c) {
        var d = function(b, c, d) {
                this.camera = b, this.screenPositionCache = c, this.container = d, this.lookup = [], this.comicObjectPosition = new THREE.Vector3, this.enabled = !0, this.yieldedAtIndex = 0, this.update = a.throttle(this.update, 200)
            },
            e = d.prototype;
        return e.add = function(a, b) {
            b = b || [], this.lookup.push({
                comicObject: a,
                triggers: b,
                previousScreenPosition: null
            })
        }, e.enable = function() {
            this.enabled = !0;
            for (var a = 0; a < this.lookup.length; a++) {
                var b = this.lookup[a];
                b.previousScreenPosition = null
            }
        }, e.disable = function() {
            this.enabled = !1
        }, e.update = function() {
            if (this.enabled) {
                var a = Date.now();
                this.yieldedAtIndex >= this.lookup.length - 1 && (this.yieldedAtIndex = 0);
                for (var b = this.yieldedAtIndex, d = b; d < this.lookup.length; d++) {
                    var e = this.lookup[d],
                        f = e.comicObject,
                        g = e.triggers,
                        h = this.screenPositionCache.get(f),
                        i = e.previousScreenPosition;
                    if (i)
                        for (var j = 0; j < g.length; j++) {
                            var k = g[j],
                                l = k.target || f,
                                m = k.call,
                                n = k.params || [];
                            h <= k.atScreenPosition && i > k.atScreenPosition && (l instanceof c && l[m] ? l.active && l[m].apply(l, n) : !l || l instanceof c || !l[m] || l[m].apply(l, n))
                        }
                    if (e.previousScreenPosition = h, Date.now() - a >= 1e3 / 150) return;
                    this.yieldedAtIndex = d
                }
            }
        }, d
    }), define("comic/MapsManager", ["underscore", "math/ArmyKnife"], function(a, b) {
        var c = function(a, b, c) {
                this.camera = a, this.container = c, this.screenPositionCache = b, this.lookup = [], this.time = 0
            },
            d = c.prototype;
        return d.add = function(a, b) {
            b = b || [], this.lookup.push({
                comicObject: a,
                maps: b
            })
        }, d.update = function() {
            for (var c = 0; c < this.lookup.length; c++)
                for (var d = this.lookup[c], e = d.comicObject, f = d.maps, g = this.screenPositionCache.get(e), h = 0; h < f.length; h++) {
                    var i = [],
                        j = f[h],
                        k = j.target || e,
                        l = j.property;
                    a.contains(i, l) || (b.between(g, j.startScreenPosition, j.endScreenPosition) ? (k[l] = b.map(g, j.startScreenPosition, j.endScreenPosition, j.startValue, j.endValue, !1, !1, !1), i.push(l)) : j.startScreenPosition < j.endScreenPosition ? g < j.startScreenPosition ? k[l] = j.startValue : g > j.endScreenPosition && (k[l] = j.endValue) : j.startScreenPosition > j.endScreenPosition && (g > j.startScreenPosition ? k[l] = j.startValue : g < j.endScreenPosition && (k[l] = j.endValue)))
                }
        }, c
    }), define("math/Interpolation", [], function() {
        var a = function() {
            throw "Only static methods to be found here."
        };
        return a.lerp = function(a, b, c) {
            return a + (b - a) * c
        }, a
    }), define("comic/FPS", ["createjsEventDispatcher"], function(a) {
        var b = function(a) {
                return this.targetFPS = a || 60, this.targetFrameDurationMS = 1e3 / this.targetFPS, this.lastTickTime = (new Date).valueOf(), this.deltaTime = 1, this
            },
            c = b.prototype;
        return a.EventDispatcher.initialize(c), c.step = function() {
            var a = (new Date).valueOf(),
                b = a - this.lastTickTime;
            this.deltaTime = b / this.targetFrameDurationMS, this.lastTickTime = a
        }, b
    }), define("comic/ScrollManager", ["underscore", "createjsEventDispatcher", "math/Interpolation", "math/ArmyKnife", "comic/FPS"], function(a, b, c, d, e) {
        var f = function(b, c, d) {
                this._position = 0, this.screenPositionCache = d, this.scrollScale = "firefox" == Detectizr.browser.name ? .45 : 1, this.domElement = b || document.body, this.scrollHeight = (c || 1e4) * this.scrollScale, this.outerContainer = document.createElement("div"), this.container = document.createElement("div"), this.fakeContent = document.createElement("div"), this.outerContainer.id = "scroll-manager-outer-container", this.container.id = "scroll-manager-container", this.fakeContent.id = "scroll-manager-fake-content", this.outerContainer.appendChild(this.container), this.container.appendChild(this.fakeContent), this.onMouseWheel = a.throttle(this.onMouseWheel, 300), this.fakeContent.style.height = this.scrollHeight + "px", this.interpolationEnabled = !0, this.fps = new e, a.bindAll(this, "onScroll", "onMouseWheel", "onTouch", "onClick", "onBeforeUnload", "onKeyDown"), window.addEventListener("beforeunload", this.onBeforeUnload), this.enable()
            },
            g = f.prototype;
        return b.EventDispatcher.initialize(g), Object.defineProperties(g, {
            autoScroll: {
                set: function(a) {
                    a != this.autoScroll && (this._autoScroll = a)
                },
                get: function() {
                    return this._autoScroll
                }
            }
        }), Object.defineProperties(g, {
            position: {
                set: function(a) {
                    this._position = a, this.container.scrollTop = this._position * this.scrollScale
                },
                get: function() {
                    return this._position
                }
            }
        }), g.enable = function() {
            this.enabled = !0, this.domElement.appendChild(this.outerContainer), this.container.addEventListener("scroll", this.onScroll), this.container.addEventListener("mousewheel", this.onMouseWheel), this.container.addEventListener("touchstart", this.onTouch), this.container.addEventListener("click", this.onClick), window.addEventListener("keydown", this.onKeyDown), this.fakeContent.tabIndex = -1, this.fakeContent.focus()
        }, g.disable = function() {
            this.enabled = !1, this.domElement.removeChild(this.outerContainer), this.container.removeEventListener("scroll", this.onScroll), this.container.removeEventListener("mousewheel", this.onMouseWheel), this.container.removeEventListener("touchstart", this.onTouch), this.container.removeEventListener("click", this.onClick), window.removeEventListener("keydown", this.onKeyDown)
        }, g.onTouch = function() {
            this.interpolationEnabled = !1
        }, g.onClick = function() {
            this.interpolationEnabled = !0
        }, g.update = function() {
            if (this.enabled) {
                var a = this.container.scrollTop * (1 / this.scrollScale);
                if (a != this.position && (this._position = this.interpolationEnabled ? c.lerp(this.position, a, .1) : a, this.dispatchEvent({
                        type: "scroll",
                        position: this.position
                    })), this.autoScroll) {
                    var b = 1.6;
                    this.container.scrollTop += b
                }
            }
        }, g.onKeyDown = function(a) {
            switch (a.keyCode) {
                case 38:
                    a.preventDefault(), this.container.scrollTop -= 150;
                    break;
                case 40:
                    a.preventDefault(), this.container.scrollTop += 150
            }
        }, g.onMouseWheel = function() {}, g.onScroll = function() {}, g.onBeforeUnload = function() {
            this.container.scrollTop = 0
        }, f
    }), THREE.CopyShader = {
        uniforms: {
            tDiffuse: {
                type: "t",
                value: null
            },
            opacity: {
                type: "f",
                value: 1
            }
        },
        vertexShader: ["varying vec2 vUv;", "void main() {", "vUv = uv;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
        fragmentShader: ["uniform float opacity;", "uniform sampler2D tDiffuse;", "varying vec2 vUv;", "void main() {", "vec4 texel = texture2D( tDiffuse, vUv );", "gl_FragColor = opacity * texel;", "}"].join("\n")
    }, define("threejsCopyShader", ["threejs"], function(a) {
        return function() {
            var b;
            return b || a.THREE
        }
    }(this)), THREE.NoiseShader = {
        uniforms: {
            tDiffuse: {
                type: "t",
                value: null
            },
            time: {
                type: "f",
                value: 0
            },
            nIntensity: {
                type: "f",
                value: .5
            },
            grayscale: {
                type: "i",
                value: 1
            }
        },
        vertexShader: ["varying vec2 vUv;", "void main() {", "vUv = uv;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
        fragmentShader: ["uniform float time;", "uniform bool grayscale;", "uniform float nIntensity;", "uniform sampler2D tDiffuse;", "varying vec2 vUv;", "void main() {", "vec4 cTextureScreen = texture2D( tDiffuse, vUv );", "float x = vUv.x * vUv.y * time *  1000.0;", "x = mod( x, 13.0 ) * mod( x, 123.0 );", "float dx = mod( x, 0.01 );", "vec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx * 100.0, 0.0, 1.0 );", "cResult = cTextureScreen.rgb + clamp( nIntensity, 0.0,1.0 ) * ( cResult - cTextureScreen.rgb );", "if( grayscale ) {", "cResult = vec3( cResult.r * 0.3 + cResult.g * 0.59 + cResult.b * 0.11 );", "}", "gl_FragColor =  vec4( cResult, cTextureScreen.a );", "}"].join("\n")
    }, define("threejsNoiseShader", ["threejs"], function(a) {
        return function() {
            var b;
            return b || a.THREE
        }
    }(this)), THREE.NoisePass = function(a, b) {
        void 0 === THREE.NoiseShader && console.error("THREE.FilmPass relies on THREE.FilmShader");
        var c = THREE.NoiseShader;
        this.uniforms = THREE.UniformsUtils.clone(c.uniforms), this.material = new THREE.ShaderMaterial({
            uniforms: this.uniforms,
            vertexShader: c.vertexShader,
            fragmentShader: c.fragmentShader
        }), void 0 !== b && (this.uniforms.grayscale.value = b), void 0 !== a && (this.uniforms.nIntensity.value = a), this.enabled = !0, this.renderToScreen = !1, this.needsSwap = !0, this.camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1), this.scene = new THREE.Scene, this.quad = new THREE.Mesh(new THREE.PlaneBufferGeometry(2, 2), null), this.scene.add(this.quad)
    }, THREE.NoisePass.prototype = {
        render: function(a, b, c, d) {
            this.uniforms.tDiffuse.value = c, this.uniforms.time.value += d, this.quad.material = this.material, this.renderToScreen ? a.render(this.scene, this.camera) : a.render(this.scene, this.camera, b, !1)
        }
    }, define("threejsNoisePass", ["threejs", "threejsNoiseShader"], function(a) {
        return function() {
            var b;
            return b || a.THREE
        }
    }(this)), THREE.RenderPass = function(a, b, c, d, e) {
        this.scene = a, this.camera = b, this.overrideMaterial = c, this.clearColor = d, this.clearAlpha = void 0 !== e ? e : 1, this.oldClearColor = new THREE.Color, this.oldClearAlpha = 1, this.enabled = !0, this.clear = !0, this.needsSwap = !1
    }, THREE.RenderPass.prototype = {
        render: function(a, b, c) {
            this.scene.overrideMaterial = this.overrideMaterial, this.clearColor && (this.oldClearColor.copy(a.getClearColor()), this.oldClearAlpha = a.getClearAlpha(), a.setClearColor(this.clearColor, this.clearAlpha)), a.render(this.scene, this.camera, c, this.clear), this.clearColor && a.setClearColor(this.oldClearColor, this.oldClearAlpha), this.scene.overrideMaterial = null
        }
    }, define("threejsRenderPass", ["threejs"], function(a) {
        return function() {
            var b;
            return b || a.THREE
        }
    }(this)), THREE.MaskPass = function(a, b) {
        this.scene = a, this.camera = b, this.enabled = !0, this.clear = !0, this.needsSwap = !1, this.inverse = !1
    }, THREE.MaskPass.prototype = {
        render: function(a, b, c) {
            var d = a.context;
            d.colorMask(!1, !1, !1, !1), d.depthMask(!1);
            var e, f;
            this.inverse ? (e = 0, f = 1) : (e = 1, f = 0), d.enable(d.STENCIL_TEST), d.stencilOp(d.REPLACE, d.REPLACE, d.REPLACE), d.stencilFunc(d.ALWAYS, e, 4294967295), d.clearStencil(f), a.render(this.scene, this.camera, c, this.clear), a.render(this.scene, this.camera, b, this.clear), d.colorMask(!0, !0, !0, !0), d.depthMask(!0), d.stencilFunc(d.EQUAL, 1, 4294967295), d.stencilOp(d.KEEP, d.KEEP, d.KEEP)
        }
    }, THREE.ClearMaskPass = function() {
        this.enabled = !0
    }, THREE.ClearMaskPass.prototype = {
        render: function(a) {
            var b = a.context;
            b.disable(b.STENCIL_TEST)
        }
    }, define("threejsMaskPass", ["threejs"], function(a) {
        return function() {
            var b;
            return b || a.THREE
        }
    }(this)), THREE.ShaderPass = function(a, b) {
        this.textureID = void 0 !== b ? b : "tDiffuse", this.uniforms = THREE.UniformsUtils.clone(a.uniforms), this.material = new THREE.ShaderMaterial({
            defines: a.defines || {},
            uniforms: this.uniforms,
            vertexShader: a.vertexShader,
            fragmentShader: a.fragmentShader
        }), this.renderToScreen = !1, this.enabled = !0, this.needsSwap = !0, this.clear = !1, this.camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1), this.scene = new THREE.Scene, this.quad = new THREE.Mesh(new THREE.PlaneBufferGeometry(2, 2), null), this.scene.add(this.quad)
    }, THREE.ShaderPass.prototype = {
        render: function(a, b, c) {
            this.uniforms[this.textureID] && (this.uniforms[this.textureID].value = c), this.quad.material = this.material, this.renderToScreen ? a.render(this.scene, this.camera) : a.render(this.scene, this.camera, b, this.clear)
        }
    }, define("threejsShaderPass", ["threejs"], function(a) {
        return function() {
            var b;
            return b || a.THREE
        }
    }(this)), THREE.EffectComposer = function(a, b) {
        if (this.renderer = a, void 0 === b) {
            var c = a.getPixelRatio(),
                d = Math.floor(a.context.canvas.width / c) || 1,
                e = Math.floor(a.context.canvas.height / c) || 1,
                f = {
                    minFilter: THREE.LinearFilter,
                    magFilter: THREE.LinearFilter,
                    format: THREE.RGBFormat,
                    stencilBuffer: !1
                };
            b = new THREE.WebGLRenderTarget(d, e, f)
        }
        this.renderTarget1 = b, this.renderTarget2 = b.clone(), this.writeBuffer = this.renderTarget1, this.readBuffer = this.renderTarget2, this.passes = [], void 0 === THREE.CopyShader && console.error("THREE.EffectComposer relies on THREE.CopyShader"), this.copyPass = new THREE.ShaderPass(THREE.CopyShader)
    }, THREE.EffectComposer.prototype = {
        swapBuffers: function() {
            var a = this.readBuffer;
            this.readBuffer = this.writeBuffer, this.writeBuffer = a
        },
        addPass: function(a) {
            this.passes.push(a)
        },
        insertPass: function(a, b) {
            this.passes.splice(b, 0, a)
        },
        render: function(a) {
            this.writeBuffer = this.renderTarget1, this.readBuffer = this.renderTarget2;
            var b, c, d = !1,
                e = this.passes.length;
            for (c = 0; e > c; c++)
                if (b = this.passes[c], b.enabled) {
                    if (b.render(this.renderer, this.writeBuffer, this.readBuffer, a, d), b.needsSwap) {
                        if (d) {
                            var f = this.renderer.context;
                            f.stencilFunc(f.NOTEQUAL, 1, 4294967295), this.copyPass.render(this.renderer, this.writeBuffer, this.readBuffer, a), f.stencilFunc(f.EQUAL, 1, 4294967295)
                        }
                        this.swapBuffers()
                    }
                    b instanceof THREE.MaskPass ? d = !0 : b instanceof THREE.ClearMaskPass && (d = !1)
                }
        },
        reset: function(a) {
            if (void 0 === a) {
                a = this.renderTarget1.clone();
                var b = renderer.getPixelRatio();
                a.width = Math.floor(this.renderer.context.canvas.width / b), a.height = Math.floor(this.renderer.context.canvas.height / b)
            }
            this.renderTarget1 = a, this.renderTarget2 = a.clone(), this.writeBuffer = this.renderTarget1, this.readBuffer = this.renderTarget2
        },
        setSize: function(a, b) {
            var c = this.renderTarget1.clone();
            c.width = a, c.height = b, this.reset(c)
        }
    }, define("threejsFX", ["threejs", "threejsCopyShader", "threejsNoisePass", "threejsNoiseShader", "threejsRenderPass", "threejsMaskPass", "threejsShaderPass"], function(a) {
        return function() {
            var b;
            return b || a.THREE
        }
    }(this));
var Stats = function() {
    var a = Date.now(),
        b = a,
        c = 0,
        d = 1 / 0,
        e = 0,
        f = 0,
        g = 1 / 0,
        h = 0,
        i = 0,
        j = 0,
        k = document.createElement("div");
    k.id = "stats", k.addEventListener("mousedown", function(a) {
        a.preventDefault(), s(++j % 2)
    }, !1), k.style.cssText = "width:80px;opacity:0.9;cursor:pointer";
    var l = document.createElement("div");
    l.id = "fps", l.style.cssText = "padding:0 0 3px 3px;text-align:left;background-color:#002", k.appendChild(l);
    var m = document.createElement("div");
    m.id = "fpsText", m.style.cssText = "color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px", m.innerHTML = "FPS", l.appendChild(m);
    var n = document.createElement("div");
    for (n.id = "fpsGraph", n.style.cssText = "position:relative;width:74px;height:30px;background-color:#0ff", l.appendChild(n); 74 > n.children.length;) {
        var o = document.createElement("span");
        o.style.cssText = "width:1px;height:30px;float:left;background-color:#113", n.appendChild(o)
    }
    var p = document.createElement("div");
    p.id = "ms", p.style.cssText = "padding:0 0 3px 3px;text-align:left;background-color:#020;display:none", k.appendChild(p);
    var q = document.createElement("div");
    q.id = "msText", q.style.cssText = "color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px", q.innerHTML = "MS", p.appendChild(q);
    var r = document.createElement("div");
    for (r.id = "msGraph", r.style.cssText = "position:relative;width:74px;height:30px;background-color:#0f0", p.appendChild(r); 74 > r.children.length;) o = document.createElement("span"), o.style.cssText = "width:1px;height:30px;float:left;background-color:#131", r.appendChild(o);
    var s = function(a) {
        switch (j = a) {
            case 0:
                l.style.display = "block", p.style.display = "none";
                break;
            case 1:
                l.style.display = "none", p.style.display = "block"
        }
    };
    return {
        REVISION: 12,
        domElement: k,
        setMode: s,
        begin: function() {
            a = Date.now()
        },
        end: function() {
            var j = Date.now();
            c = j - a, d = Math.min(d, c), e = Math.max(e, c), q.textContent = c + " MS (" + d + "-" + e + ")";
            var k = Math.min(30, 30 - 30 * (c / 200));
            return r.appendChild(r.firstChild).style.height = k + "px", i++, j > b + 1e3 && (f = Math.round(1e3 * i / (j - b)), g = Math.min(g, f), h = Math.max(h, f), m.textContent = f + " FPS (" + g + "-" + h + ")", k = Math.min(30, 30 - 30 * (f / 100)), n.appendChild(n.firstChild).style.height = k + "px", b = j, i = 0), j
        },
        update: function() {
            a = this.end()
        }
    }
};
"object" == typeof module && (module.exports = Stats), define("statsjs", function() {}), window.Detectizr = function(a, b, c, d) {
        function e(a, b) {
            var c, d, f;
            if (arguments.length > 2)
                for (c = 1, d = arguments.length; d > c; c += 1) e(a, arguments[c]);
            else
                for (f in b) b.hasOwnProperty(f) && (a[f] = b[f]);
            return a
        }

        function f(a) {
            return s.browser.userAgent.indexOf(a) > -1
        }

        function g(a) {
            return a.test(s.browser.userAgent)
        }

        function h(a) {
            return a.exec(s.browser.userAgent)
        }

        function i(a) {
            return a.replace(/^\s+|\s+$/g, "")
        }

        function j(a) {
            return null === a || a === d ? "" : String(a).replace(/((\s|\-|\.)+[a-z0-9])/g, function(a) {
                return a.toUpperCase().replace(/(\s|\-|\.)/g, "")
            })
        }

        function k(a, b) {
            var c = b || "",
                d = 1 === a.nodeType && (a.className ? (" " + a.className + " ").replace(x, " ") : "");
            if (d) {
                for (; d.indexOf(" " + c + " ") >= 0;) d = d.replace(" " + c + " ", " ");
                a.className = b ? i(d) : ""
            }
        }

        function l(a, b, c) {
            a && (a = j(a), b && (b = j(b), n(a + b, !0), c && n(a + b + "_" + c, !0)))
        }

        function m() {
            a.clearTimeout(q), q = a.setTimeout(function() {
                r = s.device.orientation, s.device.orientation = a.innerHeight > a.innerWidth ? "portrait" : "landscape", n(s.device.orientation, !0), r !== s.device.orientation && n(r, !1)
            }, 10)
        }

        function n(a, b) {
            a && t && (v.addAllFeaturesAsClass ? t.addTest(a, b) : (b = "function" == typeof b ? b() : b, b ? t.addTest(a, !0) : (delete t[a], k(y, a))))
        }

        function o(a, b) {
            a.version = b;
            var c = b.split(".");
            c.length > 0 ? (c = c.reverse(), a.major = c.pop(), c.length > 0 ? (a.minor = c.pop(), c.length > 0 ? (c = c.reverse(), a.patch = c.join(".")) : a.patch = "0") : a.minor = "0") : a.major = "0"
        }

        function p(d) {
            var i, k, p, q, r, x, y, z, A = this;
            if (v = e({}, v, d || {}), v.detectDevice) {
                for (s.device = {
                        type: "",
                        model: "",
                        orientation: ""
                    }, q = s.device, g(/googletv|smarttv|internet.tv|netcast|nettv|appletv|boxee|kylo|roku|dlnadoc|ce\-html/) ? (q.type = u[0], q.model = "smartTv") : g(/xbox|playstation.3|wii/) ? (q.type = u[0], q.model = "gameConsole") : g(/ip(a|ro)d/) ? (q.type = u[1], q.model = "ipad") : g(/tablet/) && !g(/rx-34/) || g(/folio/) ? (q.type = u[1], q.model = String(h(/playbook/) || "")) : g(/linux/) && g(/android/) && !g(/fennec|mobi|htc.magic|htcX06ht|nexus.one|sc-02b|fone.945/) ? (q.type = u[1], q.model = "android") : g(/kindle/) || g(/mac.os/) && g(/silk/) ? (q.type = u[1], q.model = "kindle") : g(/gt-p10|sc-01c|shw-m180s|sgh-t849|sch-i800|shw-m180l|sph-p100|sgh-i987|zt180|htc(.flyer|\_flyer)|sprint.atp51|viewpad7|pandigital(sprnova|nova)|ideos.s7|dell.streak.7|advent.vega|a101it|a70bht|mid7015|next2|nook/) || g(/mb511/) && g(/rutem/) ? (q.type = u[1], q.model = "android") : g(/bb10/) ? (q.type = u[1], q.model = "blackberry") : (q.model = h(/iphone|ipod|android|blackberry|opera mini|opera mobi|skyfire|maemo|windows phone|palm|iemobile|symbian|symbianos|fennec|j2me/), null !== q.model ? (q.type = u[2], q.model = String(q.model)) : (q.model = "", g(/bolt|fennec|iris|maemo|minimo|mobi|mowser|netfront|novarra|prism|rx-34|skyfire|tear|xv6875|xv6975|google.wireless.transcoder/) ? q.type = u[2] : g(/opera/) && g(/windows.nt.5/) && g(/htc|xda|mini|vario|samsung\-gt\-i8000|samsung\-sgh\-i9/) ? q.type = u[2] : g(/windows.(nt|xp|me|9)/) && !g(/phone/) || g(/win(9|.9|nt)/) || g(/\(windows 8\)/) ? q.type = u[3] : g(/macintosh|powerpc/) && !g(/silk/) ? (q.type = u[3], q.model = "mac") : g(/linux/) && g(/x11/) ? q.type = u[3] : g(/solaris|sunos|bsd/) ? q.type = u[3] : g(/bot|crawler|spider|yahoo|ia_archiver|covario-ids|findlinks|dataparksearch|larbin|mediapartners-google|ng-search|snappy|teoma|jeeves|tineye/) && !g(/mobile/) ? (q.type = u[3], q.model = "crawler") : q.type = u[2])), i = 0, k = u.length; k > i; i += 1) n(u[i], q.type === u[i]);
                v.detectDeviceModel && n(j(q.model), !0)
            }
            if (v.detectScreen && (t && t.mq && (n("smallScreen", t.mq("only screen and (max-width: 480px)")), n("verySmallScreen", t.mq("only screen and (max-width: 320px)")), n("veryVerySmallScreen", t.mq("only screen and (max-width: 240px)"))), q.type === u[1] || q.type === u[2] ? (a.onresize = function(a) {
                    m(a)
                }, m()) : (q.orientation = "landscape", n(q.orientation, !0))), v.detectOS && (s.os = {}, r = s.os, "" !== q.model && ("ipad" === q.model || "iphone" === q.model || "ipod" === q.model ? (r.name = "ios", o(r, (g(/os\s([\d_]+)/) ? RegExp.$1 : "").replace(/_/g, "."))) : "android" === q.model ? (r.name = "android", o(r, g(/android\s([\d\.]+)/) ? RegExp.$1 : "")) : "blackberry" === q.model ? (r.name = "blackberry", o(r, g(/version\/([^\s]+)/) ? RegExp.$1 : "")) : "playbook" === q.model && (r.name = "blackberry", o(r, g(/os ([^\s]+)/) ? RegExp.$1.replace(";", "") : ""))), r.name || (f("win") || f("16bit") ? (r.name = "windows", f("windows nt 6.3") ? o(r, "8.1") : f("windows nt 6.2") || g(/\(windows 8\)/) ? o(r, "8") : f("windows nt 6.1") ? o(r, "7") : f("windows nt 6.0") ? o(r, "vista") : f("windows nt 5.2") || f("windows nt 5.1") || f("windows xp") ? o(r, "xp") : f("windows nt 5.0") || f("windows 2000") ? o(r, "2k") : f("winnt") || f("windows nt") ? o(r, "nt") : f("win98") || f("windows 98") ? o(r, "98") : (f("win95") || f("windows 95")) && o(r, "95")) : f("mac") || f("darwin") ? (r.name = "mac os", f("68k") || f("68000") ? o(r, "68k") : f("ppc") || f("powerpc") ? o(r, "ppc") : f("os x") && o(r, (g(/os\sx\s([\d_]+)/) ? RegExp.$1 : "os x").replace(/_/g, "."))) : f("webtv") ? r.name = "webtv" : f("x11") || f("inux") ? r.name = "linux" : f("sunos") ? r.name = "sun" : f("irix") ? r.name = "irix" : f("freebsd") ? r.name = "freebsd" : f("bsd") && (r.name = "bsd")), r.name && (n(r.name, !0), r.major && (l(r.name, r.major), r.minor && l(r.name, r.major, r.minor))), r.addressRegisterSize = g(/\sx64|\sx86|\swin64|\swow64|\samd64/) ? "64bit" : "32bit", n(r.addressRegisterSize, !0)), v.detectBrowser && (x = s.browser, g(/opera|webtv/) || !g(/msie\s([\d\w\.]+)/) && !f("trident") ? f("firefox") ? (x.engine = "gecko", x.name = "firefox", o(x, g(/firefox\/([\d\w\.]+)/) ? RegExp.$1 : "")) : f("gecko/") ? x.engine = "gecko" : f("opera") ? (x.name = "opera", x.engine = "presto", o(x, g(/version\/([\d\.]+)/) ? RegExp.$1 : g(/opera(\s|\/)([\d\.]+)/) ? RegExp.$2 : "")) : f("konqueror") ? x.name = "konqueror" : f("chrome") ? (x.engine = "webkit", x.name = "chrome", o(x, g(/chrome\/([\d\.]+)/) ? RegExp.$1 : "")) : f("iron") ? (x.engine = "webkit", x.name = "iron") : f("crios") ? (x.name = "chrome", x.engine = "webkit", o(x, g(/crios\/([\d\.]+)/) ? RegExp.$1 : "")) : f("applewebkit/") ? (x.name = "safari", x.engine = "webkit", o(x, g(/version\/([\d\.]+)/) ? RegExp.$1 : "")) : f("mozilla/") && (x.engine = "gecko") : (x.engine = "trident", x.name = "ie", !a.addEventListener && c.documentMode && 7 === c.documentMode ? o(x, "8.compat") : g(/trident.*rv[ :](\d+)\./) ? o(x, RegExp.$1) : o(x, g(/trident\/4\.0/) ? "8" : RegExp.$1)), x.name && (n(x.name, !0), x.major && (l(x.name, x.major), x.minor && l(x.name, x.major, x.minor))), n(x.engine, !0), x.language = b.userLanguage || b.language, n(x.language, !0)), v.detectPlugins) {
                for (x.plugins = [], A.detectPlugin = function(a) {
                        var c, d, e, f = b.plugins;
                        for (k = f.length - 1; k >= 0; k--) {
                            for (c = f[k], d = c.name + c.description, e = 0, p = a.length; p >= 0; p--) - 1 !== d.indexOf(a[p]) && (e += 1);
                            if (e === a.length) return !0
                        }
                        return !1
                    }, A.detectObject = function(a) {
                        for (k = a.length - 1; k >= 0; k--) try {
                            new ActiveXObject(a[k])
                        } catch (b) {}
                        return !1
                    }, i = w.length - 1; i >= 0; i--) y = w[i], z = !1, a.ActiveXObject ? z = A.detectObject(y.progIds) : b.plugins && (z = A.detectPlugin(y.substrs)), z && (x.plugins.push(y.name), n(y.name, !0));
                b.javaEnabled() && (x.plugins.push("java"), n("java", !0))
            }
        }
        var q, r, s = {},
            t = a.Modernizr,
            u = ["tv", "tablet", "mobile", "desktop"],
            v = {
                addAllFeaturesAsClass: !1,
                detectDevice: !0,
                detectDeviceModel: !0,
                detectScreen: !0,
                detectOS: !0,
                detectBrowser: !0,
                detectPlugins: !0
            },
            w = [{
                name: "adobereader",
                substrs: ["Adobe", "Acrobat"],
                progIds: ["AcroPDF.PDF", "PDF.PDFCtrl.5"]
            }, {
                name: "flash",
                substrs: ["Shockwave Flash"],
                progIds: ["ShockwaveFlash.ShockwaveFlash.1"]
            }, {
                name: "wmplayer",
                substrs: ["Windows Media"],
                progIds: ["wmplayer.ocx"]
            }, {
                name: "silverlight",
                substrs: ["Silverlight"],
                progIds: ["AgControl.AgControl"]
            }, {
                name: "quicktime",
                substrs: ["QuickTime"],
                progIds: ["QuickTime.QuickTime"]
            }],
            x = /[\t\r\n]/g,
            y = c.documentElement;
        return s.detect = function(a) {
            return p(a)
        }, s.init = function() {
            s !== d && (s.browser = {
                userAgent: (b.userAgent || b.vendor || a.opera).toLowerCase()
            }, s.detect())
        }, s.init(), s
    }(this, this.navigator, this.document), define("detectizr", function() {}), define("comic/Comic", ["underscore", "math/ArmyKnife", "comic/ScreenPositionCache", "comic/InteractivityManager", "comic/ResourceManager", "comic/TriggerManager", "comic/MapsManager", "comic/ComicMetrics", "comic/ScrollManager", "threejs", "threejsCSS", "threejsFX", "createjsEventDispatcher", "math/Interpolation", "statsjs", "detectizr"], function(a, b, c, d, e, f, g, h, i, j, k, l, m) {
        var n = function(b) {
            this.domElement = b || document.createElement("div"), this.comicObjects = [], this.comicObjectsToPreload = [], this.anchors = [], this.fxs = [], this.paused = !1, a.bindAll(this, "step", "onComicBookObjectClick", "onScroll", "onComicObjectLoad"), this.createRenderer(), this.time = 0
        };
        n.CAMERA_Z = 1200, n.CLEAR_COLOR_BEFORE_INIT = 0, n.CLEAR_COLOR_AFTER_INIT = 16777215;
        var o = n.prototype;
        return m.EventDispatcher.initialize(o), Object.defineProperties(o, {
            autoScroll: {
                set: function(a) {
                    this.scroller.autoScroll = a
                },
                get: function() {
                    return this.scroller.autoScroll
                }
            }
        }), o.createRenderer = function() {
            this.fps = "desktop" == Detectizr.device.type ? 60 : 30, this.frameInterval = 1e3 / this.fps, this.prevTime = Date.now(), this.sceneGL = new j.Scene, this.sceneCSS = new j.Scene, this.precision = "highp", this.precision = "android" == Detectizr.os.name ? "lowp" : this.precision, this.rendererGL = new j.WebGLRenderer({
                antialias: !1,
                precision: this.precision
            }), this.rendererCSS = new k.CSS3DRenderer, this.rendererGL.setClearColor(n.CLEAR_COLOR_BEFORE_INIT, 1), this.rendererCSS.setClearColor(n.CLEAR_COLOR_BEFORE_INIT, 1);
            var a = window.devicePixelRatio || 1;
            a > 2 && (a = 2), "safari" == Detectizr.browser.name && "desktop" == Detectizr.device.type && (a = 1), this.rendererGL.setPixelRatio(a), this.rootGL = new j.Object3D, this.rootCSS = new j.Object3D, this.containerGL = new j.Object3D, this.containerCSS = new j.Object3D, this.rootGL.add(this.containerGL), this.rootCSS.add(this.containerCSS), this.sceneGL.add(this.rootGL), this.sceneCSS.add(this.rootCSS), this.camera = new j.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 1, 85e3), this.camera.position.z = n.CAMERA_Z, this.rendererCSS.domElement.style.position = this.rendererGL.domElement.style.position = "fixed", this.rendererCSS.domElement.style.top = this.rendererGL.domElement.style.top = "0", this.rendererCSS.domElement.style.pointerEvents = "none", this.rendererCSS.domElement.style.zoom = "reset", document.body.style.zoom = "reset", this.screenPositionCache = new c(this.camera, this.containerGL, this.containerCSS), this.interactivityManager = new d(this.domElement, this.camera), this.interactivityManager.addEventListener("click", this.onComicBookObjectClick), this.resourceManager = new e(this.camera, this.screenPositionCache, this.containerGL, this.containerCSS), this.triggerManager = new f(this.camera, this.screenPositionCache, this.containerGL), this.mapsManager = new g(this.camera, this.screenPositionCache, this.containerGL), this.useComposer = "desktop" == Detectizr.device.type && "chrome" == Detectizr.browser.name, this.useComposer && (this.composerRenderTarget = new j.WebGLRenderTarget(3e3, 2500, {
                minFilter: j.LinearFilter,
                magFilter: j.LinearFilter,
                format: j.RGBFormat,
                stencilBuffer: !0
            }), this.composer = new j.EffectComposer(this.rendererGL, this.composerRenderTarget), this.composer.addPass(new j.RenderPass(this.sceneGL, this.camera)), this.effect = new j.NoisePass(.25, !1), this.effect.renderToScreen = !0, this.effect.uniforms.time.value = 4, this.composer.addPass(this.effect)), this.insertAt = {
                x: h.left,
                y: 0
            }
        }, o.createAnchor = function(b) {
            var c = {
                position: -1 * this.insertAt.y,
                name: b
            };
            this.anchors.push(c), a.sortBy(this.anchors, "position")
        }, o.gotoAnchor = function(b) {
            this.transitioning = !0;
            var c = a.findWhere(this.anchors, {
                name: b
            });
            this.triggerManager.disable(), this.scroller.position = c.position - 1200, this.triggerManager.enable(), this.screenPositionCache.update(!0), TweenMax.killTweensOf(this.scroller), TweenMax.to(this.scroller, 2, {
                ease: Power2.easeOut,
                position: c.position,
                onComplete: function() {
                    this.transitioning = !1
                },
                onCompleteScope: this
            })
        }, o.createScroller = function() {
            this.scroller = new i(this.domElement, Math.abs(this.insertAt.y), this.screenPositionCache), this.scroller.on("scroll", this.onScroll)
        }, o.add = function(a, b) {
            b = b || {};
            var c = .5 * a.width;
            this.insertAt.x += c, b.center ? (a.x = 0, a.y = this.insertAt.y) : (a.x = this.insertAt.x, a.y = this.insertAt.y, this.insertAt.x += c + h.columnGutterSize), this.screenPositionCache.add(a), a.interactive && this.interactivityManager.add(a);
            var d = {};
            b.activeBetweenScreenPosition && (d.activeBetweenScreenPosition = b.activeBetweenScreenPosition), this.resourceManager.add(a, d), b.triggers && this.triggerManager.add(a, b.triggers), b.maps && this.mapsManager.add(a, b.maps), b.preload && (this.comicObjectsToPreload.push(a), a.addEventListener("load", this.onComicObjectLoad)), this.comicObjects.push(a)
        }, o.setPreloader = function(a) {
            this.preloaderComicObject = a, this.preloaderComicObject.active = !0, this.containerGL.add(a.objectGL)
        }, o.onComicObjectLoad = function(b) {
            var c = b.target;
            c.removeEventListener("load", this.onComicObjectLoad), this.comicObjectsToPreload = a.without(this.comicObjectsToPreload, c), this.checkPreloaded()
        }, o.checkPreloaded = function() {
            this.preloaded = !0, 0 == this.comicObjectsToPreload.length && (this.preloaderComicObject && (this.containerGL.remove(this.preloaderComicObject), this.preloaderComicObject.dispose(), this.preloaderComicObject = null, this.rendererGL.setClearColor(n.CLEAR_COLOR_AFTER_INIT, 1), this.rendererCSS.setClearColor(n.CLEAR_COLOR_AFTER_INIT, 1)), this.dispatchEvent({
                type: "preload"
            }))
        }, o.remove = function() {}, o.addFX = function(a) {
            a.init({
                camera: this.camera,
                rendererGL: this.rendererGL,
                rendererCSS: this.rendererCSS,
                rootGL: this.rootGL,
                containerGL: this.containerGL,
                rootCSS: this.rootCSS,
                containerCSS: this.containerCSS
            }), this.fxs.push(a)
        }, o.wrap = function(a) {
            this.insertAt.x = h.left, this.insertAt.y -= isNaN(a) ? h.tierSize + h.tierGutterSize : a
        }, o.setSize = function(a, b) {
            this._width = a, this._height = b, this.domElement.style.width = a + "px", this.domElement.style.height = b + "px", this.composerRenderTarget && (this.composerRenderTarget.width = a, this.composerRenderTarget.height = b), this.rendererCSS.setSize(a, b), this.rendererGL.setSize(a, b);
            var c = a / b;
            c = c > 2.4 ? 2.4 : c, this.camera.aspect = c, this.camera.updateProjectionMatrix()
        }, o.start = function() {
            this.domElement.appendChild(this.rendererGL.domElement), this.domElement.appendChild(this.rendererCSS.domElement), this.createScroller(), this.screenPositionCache.update(!0), this.step(), this.checkPreloaded()
        }, o.step = function() {
            var a = Date.now(),
                b = a - this.prevTime;
            b > this.frameInterval && (this.prevTime = a - b % this.frameInterval, this.preloaderComicObject && this.preloaderComicObject.update(), this.preloaded && this.updateChildren(), this.render()), this.paused || window.requestAnimationFrame(this.step)
        }, o.updateChildren = function() {
            var a = this.scroller.position;
            this.scroller.update(), a != this.scroller.position && (this.containerGL.position.y = this.scroller.position, this.containerCSS.position.y = this.scroller.position, this.updateAnchors()), this.fxs.forEach(function(a) {
                a.beforeUpdate()
            }), this.screenPositionCache.update(), this.triggerManager.update(), this.mapsManager.update(), this.resourceManager.update(), this.fxs.forEach(function(a) {
                a.update()
            })
        }, o.updateAnchors = function() {
            if (!this.transitioning) {
                for (var a = this.currentAnchor, c = 0; c < this.anchors.length; c++) {
                    var d = this.anchors[c],
                        e = c == this.anchors.length ? null : this.anchors[c + 1];
                    e ? b.between(this.scroller.position, d.position, e.position) && (this.currentAnchor = d.name) : b.between(this.scroller.position, d.position, Math.abs(this.insertAt.y)) && (this.currentAnchor = d.name)
                }
                a != this.currentAnchor && (this.fxs.forEach(function(a) {
                    a.revert && a.revert()
                }), this.dispatchEvent({
                    type: "anchorChange",
                    name: this.currentAnchor
                }))
            }
        }, o.render = function() {
            this.useComposer ? this.composer.render(.01) : this.rendererGL.render(this.sceneGL, this.camera), this.rendererCSS.render(this.sceneCSS, this.camera)
        }, o.pause = function() {
            this.paused = !0
        }, o.resume = function() {
            this.paused && (this.paused = !1, this.step())
        }, o.onComicBookObjectClick = function() {}, o.onScroll = function() {}, n
    }), define("theboat/TheBoatComic", ["utils/inherit", "comic/Comic", "utils/Color", "comic/ScreenPositionCache", "comic/display/BasicText", "comic/InteractivityManager", "comic/ResourceManager", "comic/TriggerManager", "comic/MapsManager", "comic/ComicMetrics", "comic/ScrollManager"], function(a, b, c, d, e, f, g, h, i, j) {
        var k = function() {
                this.Comic_constructor(), this.authoringStoryLine = null, this.activeStoryLine = null, this.storyLines = [], this.clearColor = c.fromInt(k.CLEAR_COLOR_DEFAULT)
            },
            l = a.extend(k, b);
        return k.CLEAR_COLOR_DEFAULT = b.CLEAR_COLOR_AFTER_INIT, k.CLEAR_COLOR_SIDE_STORY = 0, l.createStoryLine = function(a, b, c) {
            var e = new THREE.Object3D,
                j = new THREE.Object3D;
            b = b || "left";
            var k = {
                left: -4700,
                right: 4700,
                middle: 0
            }[b];
            e.position.x = k, e.position.z = 2050, j.position.x = e.position.x, j.position.z = e.position.z, e.visible = !1, j.visible = !1;
            var l = new d(this.camera, e, j),
                m = new g(this.camera, l, e, j),
                n = new h(this.camera, l, e),
                o = new i(this.camera, l, e),
                p = new f(this.domElement, this.camera);
            m.debug = c;
            var q = {
                name: a,
                screenPositionCache: l,
                containerGL: e,
                containerCSS: j,
                resourceManager: m,
                triggerManager: n,
                mapsManager: o,
                interactivityManager: p,
                comicObjects: [],
                limitScrollPosition: {
                    min: 0,
                    max: 30
                },
                insertAt: {
                    x: 0,
                    y: 0
                },
                position: b
            };
            this.storyLines.push(q), this.rootGL.add(e), this.rootCSS.add(j)
        }, l.createRenderer = function() {
            this.Comic_createRenderer()
        }, l.startAuthoringStoryLine = function(a) {
            this.authoringStoryLine = a;
            var b = this.getStoryLine(this.authoringStoryLine);
            b.insertAt.x = this.insertAt.x, b.insertAt.y = this.insertAt.y, b.limitScrollPosition.min = Math.abs(b.insertAt.y)
        }, l.endAuthoringStoryLine = function() {
            var a = this.getStoryLine(this.authoringStoryLine);
            a.limitScrollPosition.max = Math.abs(a.insertAt.y), this.authoringStoryLine = null
        }, l.add = function(a, b) {
            if (this.authoringStoryLine) {
                b = b || {};
                var c = this.getStoryLine(this.authoringStoryLine),
                    d = .5 * a.width;
                c.insertAt.x += d, b.center ? (a.x = 0, a.y = c.insertAt.y) : (a.x = c.insertAt.x, a.y = c.insertAt.y, c.insertAt.x += d + j.columnGutterSize), c.screenPositionCache.add(a), a.interactive && c.interactivityManager.add(a);
                var e = {};
                b.activeBetweenScreenPosition && (e.activeBetweenScreenPosition = b.activeBetweenScreenPosition), c.resourceManager.add(a, e), b.triggers && c.triggerManager.add(a, b.triggers), b.maps && c.mapsManager.add(a, b.maps), c.comicObjects.push(a)
            } else this.Comic_add(a, b)
        }, l.wrap = function(a) {
            if (this.authoringStoryLine) {
                var b = this.getStoryLine(this.authoringStoryLine);
                b.insertAt.x = j.left, b.insertAt.y -= isNaN(a) ? j.tierSize + j.tierGutterSize : a
            } else this.Comic_wrap(a)
        }, l.updateChildren = function() {
            var a = this.clearColor.toInt();
            if (this.prevClearColorInt != a && (this.rendererGL.setClearColor(a, 1), this.rendererCSS.setClearColor(a, 1), this.prevClearColorInt = a), this.activeStoryLine) {
                this.containerGL.position.y = this.scroller.position, this.containerCSS.position.y = this.scroller.position;
                var b = this.getStoryLine(this.activeStoryLine);
                this.scroller.update(), this.transitioning || (this.scroller.position < b.limitScrollPosition.min && (this.scroller.position = b.limitScrollPosition.min), this.scroller.position > b.limitScrollPosition.max && (this.scroller.position = b.limitScrollPosition.max)), b.containerGL.position.y = this.scroller.position, b.containerCSS.position.y = this.scroller.position, b.screenPositionCache.update(), b.triggerManager.update(), b.mapsManager.update(), b.resourceManager.update()
            } else this.Comic_updateChildren()
        }, l.getStoryLine = function(a) {
            return _.findWhere(this.storyLines, {
                name: a
            })
        }, l.switchStoryLine = function(a) {
            var d = c.fromInt(k.CLEAR_COLOR_SIDE_STORY);
            this.activeStoryLine = a, this.defaultStoryLineScrollPosition = this.scroller.position;
            var f = this.getStoryLine(this.activeStoryLine),
                g = "left" == f.position ? -.1 : .1,
                h = "left" == f.position ? .45 : -.45;
            this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.to(this.clearColor, 2, {
                r: d.r,
                g: d.g,
                b: d.b
            })), this.timeline.insert(TweenMax.to(this.camera.position, 3, {
                ease: Power4.easeOut,
                x: f.containerGL.position.x,
                z: f.containerGL.position.z + b.CAMERA_Z + 30
            })), this.timeline.insert(TweenMax.to(this.camera.position, 4.75, {
                ease: Power2.easeInOut,
                z: f.containerGL.position.z + b.CAMERA_Z
            }), 3.15), this.timeline.insert(TweenMax.to(this.camera.rotation, 1.5, {
                ease: Power4.easeOut,
                z: g
            }), 0), this.timeline.insert(TweenMax.to(this.containerGL.rotation, 1.5, {
                ease: Power4.easeOut,
                y: h
            }), 0), this.timeline.insert(TweenMax.to(this.containerCSS.rotation, 1.5, {
                ease: Power4.easeOut,
                y: h
            }), 0);
            for (var i = 0; i < this.comicObjects.length; i++) {
                var j = this.comicObjects[i];
                j instanceof e && (j.visible = !1)
            }
            f.containerGL.visible = !0, f.containerCSS.visible = !0, this.updateChildren(), this.dispatchEvent({
                type: "switchStoryLine"
            })
        }, l.defaultStoryLine = function() {
            this.transitioning = !0;
            var a = c.fromInt(k.CLEAR_COLOR_DEFAULT);
            this.timeline && this.timeline.kill(), this.timeline = new TimelineMax({
                onComplete: this.onDefaultStoryLineComplete,
                onCompleteScope: this
            }), this.timeline.insert(TweenMax.to(this.camera.position, 2, {
                ease: Power4.easeInOut,
                x: 0,
                z: b.CAMERA_Z
            }), 1), this.timeline.insert(TweenMax.to(this.camera.rotation, 1.5, {
                ease: Power4.easeInOut,
                z: 0
            }), .5), this.timeline.insert(TweenMax.to(this.containerGL.rotation, 1.5, {
                ease: Power4.easeOut,
                y: 0
            }), 2), this.timeline.insert(TweenMax.to(this.containerCSS.rotation, 1.5, {
                ease: Power4.easeOut,
                y: 0
            }), 2), this.timeline.insert(TweenMax.to(this.scroller, 1.5, {
                ease: Power2.easeInOut,
                position: this.defaultStoryLineScrollPosition
            })), this.timeline.insert(TweenMax.to(this.clearColor, 2, {
                r: a.r,
                g: a.g,
                b: a.b
            }), .75);
            for (var d = 0; d < this.comicObjects.length; d++) {
                var f = this.comicObjects[d];
                f instanceof e && (f.visible = !0)
            }
        }, l.onDefaultStoryLineComplete = function() {
            this.transitioning = !1;
            for (var a = this.getStoryLine(this.activeStoryLine), b = 0; b < a.comicObjects.length; b++) {
                var c = a.comicObjects[b];
                c.active = !1
            }
            a.containerGL.visible = !1, a.containerCSS.visible = !1, this.activeStoryLine = null, this.dispatchEvent({
                type: "switchDefaultStoryLine"
            })
        }, a.promote(k, "Comic"), k
    }), define("comic/display/Frame", ["utils/inherit", "comic/ComicMetrics", "comic/display/ComicObject", "utils/Color", "threejs", "threejsCSS"], function(a, b, c) {
        var d = function(a, b) {
                this.ComicObject_constructor(a, b), this.useGL = !1, this.useCSS = !1
            },
            e = a.extend(d, c);
        return e.createCSS = function() {
            this.ComicObject_createCSS()
        }, e.createGL = function() {
            this.ComicObject_createGL()
        }, e.draw = function() {
            this.ComicObject_draw()
        }, e.update = function() {
            this.ComicObject_update()
        }, a.promote(d, "ComicObject"), d
    }), define("utils/Random", [], function() {
        var a = function() {
            throw "Pls don't <3"
        };
        return a.canvasCache = [], a.fromArray = function(a) {
            return a[Math.floor(a.length * Math.random())]
        }, a.between = function(a, b, c) {
            var d = b - a,
                e = Math.random() * d,
                f = a + e;
            return c && (f = Math.round(f)), f
        }, a.fromSeed = function(a) {
            var b;
            return a = (9301 * a + 49297) % 233280, b = a / 233280
        }, a.generateSeedFromString = function(a) {
            a = a.toString();
            for (var b = 0, c = 0; c < a.length; c++) b += a.charCodeAt(c);
            return b
        }, a.pixel = function(b, c) {
            var d, e, f, g, h, i, j, k, l, m, n, o, p;
            for (p = 0; p < a.canvasCache.length; p++) {
                var q = a.canvasCache[p];
                b === q.canvas && c.r === q.color.r && c.g === q.color.g && c.b === q.color.b && c.a === q.color.a && (f = q.pixelsOfColor)
            }
            if (0 === f.length) {
                for (d = b.getContext("2d"), e = d.getImageData(0, 0, b.width, b.height), f = [], g = b.width, p = 0; p < e.data.length; p += 4) h = e.data[p + 0], i = e.data[p + 1], j = e.data[p + 2], k = e.data[p + 3], l = p / 4, h === c.r && i === c.g && j === c.b && k === c.a && (n = l / g, m = l % g, o = {
                    x: m,
                    y: n,
                    r: c.r,
                    g: c.g,
                    b: c.b,
                    a: c.a
                }, f.push(o));
                a.canvasCache.push({
                    canvas: b,
                    color: c,
                    pixelsOfColor: f
                })
            }
            return f.length ? a.fromArray(f) : null
        }, a.shuffle = function(a) {
            for (var b, c, d = a.length; 0 !== d;) c = Math.floor(Math.random() * d), d -= 1, b = a[d], a[d] = a[c], a[c] = b;
            return a
        }, a
    }), define("comic/display/ImageFrame", ["utils/inherit", "comic/ComicMetrics", "comic/display/Frame", "comic/display/Image", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b, c, d) {
            this.imgURL = c, this.params = d || {}, this.params.offsetX = this.params.offsetX || 0, this.params.offsetY = this.params.offsetY || 0, this.params.offsetZ = this.params.offsetZ || 0, this.Frame_constructor(a, b), this.useGL = !0, this.useCSS = !1
        };
        f.preloaderDisplayClass = null;
        var g = a.extend(f, c);
        return g.createCSS = function() {
            this.Frame_createCSS()
        }, g.createGL = function() {
            this.Frame_createGL(), this.image = new d(this.imgURL, this.width, this.height), this.image.mesh.position.x = this.params.offsetX, this.image.mesh.position.y = this.params.offsetY, this.image.mesh.position.z = this.params.offsetZ + e.between(-50, 50), this.image.mesh.rotation.x = e.between(-.1, .1), this.image.mesh.rotation.y = e.between(-.1, .1), this.image.material.depthTest = !1, this.image.material.depthWrite = !1, this.objectGL.add(this.image.mesh), this.loadQueue.add(this.image), f.preloaderDisplayClass && (this.preloaderDisplay = new f.preloaderDisplayClass, this.objectGL.add(this.preloaderDisplay.object), this.objectGL.visible = !0)
        }, g.load = function() {
            this.Frame_load(), this.objectGL.visible = !0, this.image.mesh.visible = !1
        }, g.onLoadQueueComplete = function() {
            this.Frame_onLoadQueueComplete(), this.preloaderDisplay && (this.objectGL.remove(this.preloaderDisplay.object), this.preloaderDisplay.dispose(), this.preloaderDisplay = null, this.image.mesh.visible = !0)
        }, g.update = function() {
            this.active && this.preloaderDisplay && this.preloaderDisplay.update(), this.Frame_update()
        }, g.disposeGL = function() {
            this.objectGL.remove(this.image.mesh), this.preloaderDisplay && (this.objectGL.remove(this.preloaderDisplay.object), this.preloaderDisplay.dispose(), this.preloaderDisplay = null), this.image.dispose(), this.image = null, this.Frame_disposeGL()
        }, a.promote(f, "Frame"), f
    }), define("comic/display/Splash", ["utils/inherit", "comic/ComicMetrics", "comic/display/ComicObject", "utils/Color", "threejs", "threejsCSS"], function(a, b, c) {
        var d = function(a, b) {
            a = a || 2200, b = b || 1300, this.ComicObject_constructor(a, b), this.useGL = !0, this.useCSS = !1, this.usePreloader = !0
        };
        d.preloaderDisplayClass = null;
        var e = a.extend(d, c);
        return e.createGL = function() {
            this.ComicObject_createGL(), this.rootObject = new THREE.Object3D, this.rootObject.visible = !1
        }, e.load = function() {
            this.ComicObject_load(), d.preloaderDisplayClass && this.usePreloader && (this.preloaderDisplay = new d.preloaderDisplayClass, this.objectGL.add(this.preloaderDisplay.object), this.objectGL.visible = !0)
        }, e.onLoadQueueComplete = function() {
            this.ComicObject_onLoadQueueComplete(), this.preloaderDisplay && (this.objectGL.remove(this.preloaderDisplay.object), this.preloaderDisplay.dispose(), this.preloaderDisplay = null), this.rootObject.visible = !0
        }, e.disposeGL = function() {
            this.preloaderDisplay && (this.objectGL.remove(this.preloaderDisplay.object), this.preloaderDisplay.dispose(), this.preloaderDisplay = null), this.objectGL.remove(this.rootObject), this.rootObject = null, this.ComicObject_disposeGL()
        }, a.promote(d, "ComicObject"), d
    }),
    function(a) {
        "use strict";
        var b = a.GreenSockGlobals || a,
            c = function(a) {
                var c, d = a.split("."),
                    e = b;
                for (c = 0; c < d.length; c++) e[d[c]] = e = e[d[c]] || {};
                return e
            },
            d = c("com.greensock.utils"),
            e = function(a) {
                var b = a.nodeType,
                    c = "";
                if (1 === b || 9 === b || 11 === b) {
                    if ("string" == typeof a.textContent) return a.textContent;
                    for (a = a.firstChild; a; a = a.nextSibling) c += e(a)
                } else if (3 === b || 4 === b) return a.nodeValue;
                return c
            },
            f = document,
            g = f.defaultView ? f.defaultView.getComputedStyle : function() {},
            h = /([A-Z])/g,
            i = function(a, b, c, d) {
                var e;
                return (c = c || g(a, null)) ? (a = c.getPropertyValue(b.replace(h, "-$1").toLowerCase()), e = a || c.length ? a : c[b]) : a.currentStyle && (c = a.currentStyle, e = c[b]), d ? e : parseInt(e, 10) || 0
            },
            j = function(a) {
                return a.length && a[0] && (a[0].nodeType && a[0].style && !a.nodeType || a[0].length && a[0][0]) ? !0 : !1
            },
            k = function(a) {
                var b, c, d, e = [],
                    f = a.length;
                for (b = 0; f > b; b++)
                    if (c = a[b], j(c))
                        for (d = c.length, d = 0; d < c.length; d++) e.push(c[d]);
                    else e.push(c);
                return e
            },
            l = ")eefec303079ad17405c",
            m = /(?:<br>|<br\/>|<br \/>)/gi,
            n = f.all && !f.addEventListener,
            o = "<div style='position:relative;display:inline-block;" + (n ? "*display:inline;*zoom:1;'" : "'"),
            p = function(a) {
                a = a || "";
                var b = -1 !== a.indexOf("++"),
                    c = 1;
                return b && (a = a.split("++").join("")),
                    function() {
                        return o + (a ? " class='" + a + (b ? c++ : "") + "'>" : ">")
                    }
            },
            q = d.SplitText = b.SplitText = function(a, b) {
                if ("string" == typeof a && (a = q.selector(a)), !a) throw "cannot split a null element.";
                this.elements = j(a) ? k(a) : [a], this.chars = [], this.words = [], this.lines = [], this._originals = [], this.vars = b || {}, this.split(b)
            },
            r = function(a, b, c, d, h) {
                m.test(a.innerHTML) && (a.innerHTML = a.innerHTML.replace(m, l));
                var j, k, n, o, q, r, s, t, u, v, w, x, y, z = e(a),
                    A = b.type || b.split || "chars,words,lines",
                    B = -1 !== A.indexOf("lines") ? [] : null,
                    C = -1 !== A.indexOf("words"),
                    D = -1 !== A.indexOf("chars"),
                    E = "absolute" === b.position || b.absolute === !0,
                    F = E ? "&#173; " : " ",
                    G = -999,
                    H = g(a),
                    I = i(a, "paddingLeft", H),
                    J = i(a, "borderBottomWidth", H) + i(a, "borderTopWidth", H),
                    K = i(a, "borderLeftWidth", H) + i(a, "borderRightWidth", H),
                    L = i(a, "paddingTop", H) + i(a, "paddingBottom", H),
                    M = i(a, "paddingLeft", H) + i(a, "paddingRight", H),
                    N = i(a, "textAlign", H, !0),
                    O = a.clientHeight,
                    P = a.clientWidth,
                    Q = z.length,
                    R = "</div>",
                    S = p(b.wordsClass),
                    T = p(b.charsClass),
                    U = -1 !== (b.linesClass || "").indexOf("++"),
                    V = b.linesClass;
                for (U && (V = V.split("++").join("")), n = S(), o = 0; Q > o; o++) r = z.charAt(o), ")" === r && z.substr(o, 20) === l ? (n += R + "<BR/>", o !== Q - 1 && (n += " " + S()), o += 19) : " " === r && " " !== z.charAt(o - 1) && o !== Q - 1 ? (n += R, o !== Q - 1 && (n += F + S())) : n += D && " " !== r ? T() + r + "</div>" : r;
                for (a.innerHTML = n + R, q = a.getElementsByTagName("*"), Q = q.length, s = [], o = 0; Q > o; o++) s[o] = q[o];
                if (B || E)
                    for (o = 0; Q > o; o++) t = s[o], k = t.parentNode === a, (k || E || D && !C) && (u = t.offsetTop, B && k && u !== G && "BR" !== t.nodeName && (j = [], B.push(j), G = u), E && (t._x = t.offsetLeft, t._y = u, t._w = t.offsetWidth, t._h = t.offsetHeight), B && (C !== k && D || (j.push(t), t._x -= I), k && o && (s[o - 1]._wordEnd = !0)));
                for (o = 0; Q > o; o++) t = s[o], k = t.parentNode === a, "BR" !== t.nodeName ? (E && (w = t.style, C || k || (t._x += t.parentNode._x, t._y += t.parentNode._y), w.left = t._x + "px", w.top = t._y + "px", w.position = "absolute", w.display = "block", w.width = t._w + 1 + "px", w.height = t._h + "px"), C ? k ? d.push(t) : D && c.push(t) : k ? (a.removeChild(t), s.splice(o--, 1), Q--) : !k && D && (u = !B && !E && t.nextSibling, a.appendChild(t), u || a.appendChild(f.createTextNode(" ")), c.push(t))) : B || E ? (a.removeChild(t), s.splice(o--, 1), Q--) : C || a.appendChild(t);
                if (B) {
                    for (E && (v = f.createElement("div"), a.appendChild(v), x = v.offsetWidth + "px", u = v.offsetParent === a ? 0 : a.offsetLeft, a.removeChild(v)), w = a.style.cssText, a.style.cssText = "display:none;"; a.firstChild;) a.removeChild(a.firstChild);
                    for (y = !E || !C && !D, o = 0; o < B.length; o++) {
                        for (j = B[o], v = f.createElement("div"), v.style.cssText = "display:block;text-align:" + N + ";position:" + (E ? "absolute;" : "relative;"), V && (v.className = V + (U ? o + 1 : "")), h.push(v), Q = j.length, q = 0; Q > q; q++) "BR" !== j[q].nodeName && (t = j[q], v.appendChild(t), y && (t._wordEnd || C) && v.appendChild(f.createTextNode(" ")), E && (0 === q && (v.style.top = t._y + "px", v.style.left = I + u + "px"), t.style.top = "0px", u && (t.style.left = t._x - u + "px")));
                        C || D || (v.innerHTML = e(v).split(String.fromCharCode(160)).join(" ")), E && (v.style.width = x, v.style.height = t._h + "px"), a.appendChild(v)
                    }
                    a.style.cssText = w
                }
                E && (O > a.clientHeight && (a.style.height = O - L + "px", a.clientHeight < O && (a.style.height = O + J + "px")), P > a.clientWidth && (a.style.width = P - M + "px", a.clientWidth < P && (a.style.width = P + K + "px")))
            },
            s = q.prototype;
        s.split = function(a) {
            this.isSplit && this.revert(), this.vars = a || this.vars, this._originals.length = this.chars.length = this.words.length = this.lines.length = 0;
            for (var b = 0; b < this.elements.length; b++) this._originals[b] = this.elements[b].innerHTML, r(this.elements[b], this.vars, this.chars, this.words, this.lines);
            return this.isSplit = !0, this
        }, s.revert = function() {
            if (!this._originals) throw "revert() call wasn't scoped properly.";
            for (var a = this._originals.length; --a > -1;) this.elements[a].innerHTML = this._originals[a];
            return this.chars = [], this.words = [], this.lines = [], this.isSplit = !1, this
        }, q.selector = a.$ || a.jQuery || function(b) {
            return a.$ ? (q.selector = a.$, a.$(b)) : f ? f.getElementById("#" === b.charAt(0) ? b.substr(1) : b) : b
        }
    }(window || {}), define("splitText", function() {}), define("comic/display/BubbleText", ["underscore", "utils/inherit", "comic/display/BasicText", "splitText"], function(a, b, c) {
        var d = function(a, b, c, d) {
            this.params = d || {}, this.params.offsetZ = this.params.offsetZ || 85, this.BasicText_constructor(a, b, c, d), this.useGL = !1, this.useCSS = !0
        };
        d.defaultTrigger = {
            atScreenPosition: .9,
            call: "transitionIn"
        }, d.directionRules = [{
            search: "-nt",
            x: 0,
            y: 0
        }, {
            search: "-t",
            x: 0,
            y: 1
        }, {
            search: "-tr",
            x: 1,
            y: 1
        }, {
            search: "-r",
            x: 1,
            y: 0
        }, {
            search: "-br",
            x: 1,
            y: -1
        }, {
            search: "-b",
            x: 0,
            y: -1
        }, {
            search: "-bl",
            x: -1,
            y: -1
        }, {
            search: "-l",
            x: -1,
            y: 0
        }, {
            search: "-tl",
            x: -1,
            y: 1
        }], d.sequenceTransitionIn = function(b) {
            d.sequence || (d.sequence = [], a.bindAll(d, "next")), d.sequence.push(b), 1 == d.sequence.length && d.next()
        }, d.next = function() {
            var a = d.sequence[0];
            a._transitionIn.apply(a);
            var b = 450;
            d.sequence.length >= 5 && (b = 350), d.sequence.length >= 10 && (b = 200), d.sequence.length >= 15 && (b = 75), setTimeout(function() {
                d.sequence.shift(), d.sequence.length > 0 && d.next()
            }, b)
        };
        var e = b.extend(d, c);
        return e.createCSS = function() {
            this.BasicText_createCSS(), "desktop" == Detectizr.device.type && (this.splitText = new SplitText(this.div.getElementsByClassName("dialog")[0], {
                type: "words"
            }), TweenMax.set(this.splitText.words, {
                css: {
                    opacity: 0
                }
            })), TweenMax.set(this.domElement, {
                opacity: 0
            })
        }, e.getRule = function() {
            for (var a = 0; a < d.directionRules.length; a++) {
                var b = d.directionRules[a];
                if (-1 != this.htmlText.indexOf(b.search)) return b
            }
            return {
                x: 0,
                y: 0
            }
        }, e.disposeCSS = function() {
            this.BasicText_disposeCSS(), this.timeline && (this.timeline.kill(), this.timeline = null), this.splitText && (this.splitText.revert(), this.splitText = null), this.hasTransitionedIn = !1, TweenMax.killTweensOf(this.domElement)
        }, e.transitionIn = function() {
            d.sequenceTransitionIn(this)
        }, e._transitionIn = function() {
            if (!this.hasTransitionedIn) {
                if (this.hasTransitionedIn = !0, this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.domElement) {
                    var a = this.getRule();
                    this.timeline.add(TweenMax.fromTo(this.div, .2, {
                        x: this.params.offsetX + 60 * a.x,
                        y: this.params.offsetY + -60 * a.y,
                        ease: Power4.easeOut
                    }, {
                        x: this.params.offsetX,
                        y: this.params.offsetY
                    }), 0), this.timeline.add(TweenMax.to(this.domElement, .2, {
                        opacity: 1
                    }), 0)
                }
                if (this.splitText)
                    for (var b = this.splitText.words.length, c = 0; b > c; c++) {
                        var d = this.splitText.words[c];
                        d.style.padding = "30px", d.style.margin = "-30px", this.timeline.add(TweenMax.to(this.splitText.words[c], .2, {
                            opacity: 1
                        }), .1 * c + .15)
                    }
            }
        }, b.promote(d, "BasicText"), d
    }), define("theboat/001landing/rain/RainAlt", ["underscore", "createjsEventDispatcher", "threejs", "comic/Queue", "comic/display/Image"], function(a, b, c, d, e) {
        var f = function() {
                this.object = new c.Object3D, this.loadQueue = new d("load", "load"), a.bindAll(this, "onLoad"), this.draw()
            },
            g = f.prototype;
        return b.EventDispatcher.initialize(g), g.draw = function() {
            var a = 2,
                b = 3;
            this.rain1 = new e("images/rain/rain-light-pot.png", 2048 * a, 2048 * b, 2.5), this.rain1.mesh.position.y = 1500, this.rain1.mesh.position.z = -500, this.rain1.texture.wrapS = c.RepeatWrapping, this.rain1.texture.wrapT = c.RepeatWrapping, this.rain1.texture.repeat.x = a, this.rain1.texture.repeat.y = b, this.rain1.material.depthWrite = !1, this.rain1.material.depthTest = !1, this.object.add(this.rain1.mesh), this.loadQueue.add(this.rain1), this.rain2 = new e("images/rain/rain-light-pot.png", 2048 * a, 2048 * b, 2.5), this.rain2.mesh.position.y = 1500, this.rain2.mesh.position.z = -1e3, this.rain2.texture.wrapS = c.RepeatWrapping, this.rain2.texture.wrapT = c.RepeatWrapping, this.rain2.texture.repeat.x = a, this.rain2.texture.repeat.y = b, this.rain2.material.depthWrite = !1, this.rain2.material.depthTest = !1, this.rain2.texture.wrapS = c.RepeatWrapping, this.object.add(this.rain2.mesh), this.loadQueue.add(this.rain2), this.object.rotation.x = -.65, this.object.rotation.z = -.45
        }, g.update = function() {
            this.rain1.texture.offset.y += .025
        }, g.dispose = function() {
            this.loadQueue.removeEventListener("complete", this.onLoad), this.loadQueue.dispose(), this.loadQueue = null, this.object.remove(this.rain1.mesh), this.object.remove(this.rain2.mesh), this.rain1.dispose(), this.rain2.dispose(), this.rain1 = null, this.rain2 = null
        }, g.load = function() {
            this.loadQueue.addEventListener("complete", this.onLoad), this.loadQueue.start()
        }, g.onLoad = function() {
            this.dispatchEvent({
                type: "load"
            })
        }, f
    }), define("theboat/000preloaderrain/PreloaderRainSplash", ["underscore", "utils/inherit", "comic/ComicMetrics", "comic/display/Splash", "theboat/001landing/rain/RainAlt"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b), this.usePreloader = !1
            },
            g = b.extend(f, d);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.rain = new e, this.rootObject.add(this.rain.object), this.blackMattePlane = new THREE.PlaneBufferGeometry(8e4, 3e4), this.blackMatteMaterial = new THREE.MeshBasicMaterial({
                color: 0
            }), this.blackMatte = new THREE.Mesh(this.blackMattePlane, this.blackMatteMaterial), this.blackMatte.position.x = 0, this.blackMatte.position.z = -2e4, this.rootObject.add(this.blackMatte), this.objectGL.position.z = -300, this.objectGL.add(this.rootObject), this.loadQueue.add(this.rain), this.rain.rain1.material.opacity = 0, this.rain.rain2.material.opacity = 0
        }, g.onLoadQueueComplete = function() {
            this.timeline = new TimelineMax, this.rain.object.visible = !0, this.timeline.insert(TweenMax.to(this.rain.rain1.material, 2, {
                opacity: 1
            })), this.timeline.insert(TweenMax.to(this.rain.rain2.material, 2, {
                opacity: 1
            }), 2), this.Splash_onLoadQueueComplete()
        }, g.disposeGL = function() {
            this.timeline && this.timeline.kill(), this.rootObject.remove(this.rain.object), this.rootObject.remove(this.blackMatte), this.blackMattePlane.dispose(), this.blackMatteMaterial.dispose(), this.blackMatte = null, this.blackMattePlane = null, this.blackMatteMaterial = null, this.rain = null, this.Splash_disposeGL()
        }, g.draw = function() {
            this.Splash_draw()
        }, g.update = function() {
            this.active && this.rain.update()
        }, b.promote(f, "Splash"), f
    }), define("comic/display/ChunkedImage", ["underscore", "threejs", "createjsEventDispatcher", "config", "comic/display/Image"], function(a, b, c, d, e) {
        var f = function(c, d, e, f, g) {
                this.imgURL = c, this.width = d, this.height = e, this.scale = f, this.params = g || {}, this.params.widthSegments = 6, this.params.heightSegments = 6, this.mesh = new b.Object3D, this._opacity = 1, this._transparent = !0, this.drawnUnits = 0, this.currentUnit = 0, this.subImages = [], a.bindAll(this, "onLoad", "drawNext")
            },
            g = f.prototype;
        return c.EventDispatcher.initialize(g), Object.defineProperties(g, {
            opacity: {
                set: function(a) {
                    this._opacity = a;
                    for (var b = 0; b < this.subImages.length; b++) {
                        var c = this.subImages[b];
                        c.material.opacity = this._opacity
                    }
                },
                get: function() {
                    return this._opacity
                }
            },
            transparent: {
                set: function(a) {
                    this._transparent = a;
                    for (var b = 0; b < this.subImages.length; b++) {
                        var c = this.subImages[b];
                        c.material.transparent = this._transparent
                    }
                },
                get: function() {
                    return this._transparent
                }
            }
        }), g.load = function() {
            this.loader = new b.ImageLoader, this.crossOrigin && (this.loader.crossOrigin = "anonymous"), this.loader.load(this.imgURL, this.onLoad)
        }, g.onLoad = function(a) {
            this.disposed || (this.img = a, this.draw())
        }, g.draw = function() {
            this.timeoutId = setTimeout(this.drawNext, 1)
        }, g.drawNext = function() {
            for (var a = Date.now(), b = this.params.widthSegments, c = this.params.heightSegments, d = this.width * this.scale, f = this.height * this.scale, g = this.width / b * this.scale, h = this.height / c * this.scale, i = this.width / b, j = this.height / c, k = b * c; this.currentUnit < k;) {
                var l = this.currentUnit,
                    m = new e(null, g, h, 1, {
                        cacheTexture: !1
                    }),
                    n = l % b,
                    o = Math.floor(l / c),
                    p = document.createElement("canvas");
                p.width = i, p.height = j;
                var q = p.getContext("2d");
                if (q.fillStyle = "#ff0000", q.drawImage(this.img, n * i, o * j, i, j, 0, 0, i, j), m.img = p, m.mesh.position.x = n * g - .5 * d + .5 * g, m.mesh.position.y = -1 * (o * h - .5 * f + .5 * h), m.material.opacity = this._opacity, m.material.transparent = this._transparent, this.mesh.add(m.mesh), this.subImages.push(m), this.currentUnit++, this.currentUnit >= k) return void this.dispatchEvent({
                    type: "load"
                });
                if (Date.now() - a >= 1e3 / 120) return void(this.timeoutId = setTimeout(this.drawNext, 1))
            }
        }, g.dispose = function() {
            this.disposed = !0, this.timeoutId && clearTimeout(this.timeoutId);
            for (var a = 0; a < this.subImages.length; a++) {
                var b = this.subImages[a];
                this.mesh.remove(b.mesh), b.dispose()
            }
            this.subImages = null
        }, f
    }), define("theboat/001landing/ScrollCTA", ["underscore", "threejs", "comic/display/Image", "createjsEventDispatcher", "utils/Random", "utils/Color", "comic/Queue"], function(a, b, c, d, e, f, g) {
        var h = function() {
                a.bindAll(this, "onLoad"), this.object = new b.Object3D, this.loadQueue = new g("load", "load"), this.draw()
            },
            i = h.prototype;
        return d.EventDispatcher.initialize(i), i.draw = function() {
            this.arrow = new c("images/001-landing/arrow.png", 69, 98, .75), this.object.add(this.arrow.mesh), this.loadQueue.add(this.arrow), this.arrow.material.opacity = 0, this.label20mins = new c("images/001-landing/text-20-mins.png", 336, 72, .75), this.object.add(this.label20mins.mesh), this.loadQueue.add(this.label20mins), this.label20mins.material.opacity = 0, this.labelScroll = new c("images/001-landing/text-scroll.png", 154, 42, .75), this.object.add(this.labelScroll.mesh), this.loadQueue.add(this.labelScroll), this.labelScroll.material.opacity = 0
        }, i.load = function() {
            this.loadQueue.addEventListener("complete", this.onLoad), this.loadQueue.start()
        }, i.onLoad = function() {
            this.dispatchEvent({
                type: "load"
            })
        }, i.transitionIn = function() {
            this.hasTransitionedOut || (this.label20mins.mesh.position.set(0, 210, 400), this.labelScroll.mesh.position.set(0, 210, 400), this.arrow.mesh.position.set(0, 600, 1200), this.arrow.mesh.rotation.set(1, 0, 0), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.to(this.arrow.mesh.position, 2.5, {
                ease: Power4.easeOut,
                y: 0,
                z: 0
            })), this.timeline.insert(TweenMax.to(this.arrow.mesh.rotation, 1.25, {
                ease: Power4.easeOut,
                x: 0
            })), this.timeline.insert(TweenMax.to(this.arrow.material, .35, {
                ease: Linear.easeOut,
                opacity: 1
            })), this.timeline.insert(TweenMax.to(this.label20mins.material, 2, {
                ease: Power2.easeOut,
                opacity: 1
            }), .5), this.timeline.insert(TweenMax.to(this.label20mins.mesh.position, 2, {
                ease: Power2.easeOut,
                y: 70,
                z: 0
            }), .5), this.timeline.insert(TweenMax.to(this.label20mins.material, 2, {
                ease: Power2.easeOut,
                opacity: 0
            }), 3), this.timeline.insert(TweenMax.to(this.label20mins.mesh.position, 2, {
                ease: Power2.easeOut,
                y: -70,
                z: -400
            }), 3), this.timeline.insert(TweenMax.to(this.labelScroll.material, 2, {
                ease: Power2.easeOut,
                opacity: 1
            }), 3.5), this.timeline.insert(TweenMax.to(this.labelScroll.mesh.position, 2, {
                ease: Power2.easeOut,
                y: 70,
                z: 0
            }), 3.5))
        }, i.transitionOut = function() {
            this.hasTransitionedOut || (this.hasTransitionedOut = !0, this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.to(this.labelScroll.mesh.position, 1, {
                ease: Power2.easeIn,
                y: 70,
                z: 400
            }), 0), this.timeline.insert(TweenMax.to(this.labelScroll.material, 2, {
                ease: Power2.easeOut,
                opacity: 0
            }), 0), this.timeline.insert(TweenMax.to(this.label20mins.mesh.position, 1, {
                ease: Power2.easeIn,
                y: 70,
                z: 400
            }), 0), this.timeline.insert(TweenMax.to(this.label20mins.material, 2, {
                ease: Power2.easeOut,
                opacity: 0
            }), 0), this.timeline.insert(TweenMax.to(this.arrow.material, 1, {
                ease: Power2.easeOut,
                opacity: 0
            }), 0), this.timeline.insert(TweenMax.to(this.arrow.mesh.position, 1, {
                ease: Power4.easeInOut,
                y: -340
            }), 0))
        }, i.dispose = function() {
            this.timeline && (this.timeline.kill(), this.timeline = null), this.loadQueue.removeEventListener("complete", this.onLoad), this.loadQueue.dispose(), this.loadQueue = null, this.object.remove(this.arrow.mesh), this.object.remove(this.labelScroll.mesh), this.object.remove(this.label20mins.mesh), this.arrow.dispose(), this.labelScroll.dispose(), this.label20mins.dispose(), this.arrow = null, this.labelScroll = null, this.label20mins = null
        }, i.update = function() {}, h
    }), define("theboat/001landing/clouds/Cloud", ["underscore", "createjsEventDispatcher", "utils/inherit", "utils/Random", "comic/display/Image", "math/ArmyKnife", "threejs"], function(a, b, c, d, e, f) {
        var g = function() {
                a.bindAll(this, "onLoad"), this.draw()
            },
            h = g.prototype;
        return b.EventDispatcher.initialize(h), h.draw = function() {
            this.image = new e("images/001-landing/cloud-pot-01.png", 512, 256, 5), this.object = this.image.mesh, this.image.material.opacity = f.map(this.object.position.z, -1e4, -2e3, .2, .85)
        }, h.update = function() {
            this.object.position.x -= 4.8, this.object.position.x < -12e3 && (this.object.position.x = 12e3)
        }, h.dispose = function() {
            this.image.removeEventListener("load", this.onLoad), this.object.remove(this.image.mesh), this.image.dispose(), this.image = null
        }, h.load = function() {
            this.image.addEventListener("load", this.onLoad), this.image.load()
        }, h.onLoad = function() {
            this.dispatchEvent({
                type: "load"
            })
        }, g
    }), define("theboat/001landing/clouds/Clouds", ["underscore", "createjsEventDispatcher", "comic/Queue", "threejs", "theboat/001landing/clouds/Cloud", "comic/display/Image", "math/ArmyKnife", "utils/Random"], function(a, b, c, d, e, f, g, h) {
        var i = function() {
                a.bindAll(this, "onLoad"), this.loadQueue = new c("load", "load"), this.object = new d.Object3D, this.clouds = [], this.draw()
            },
            j = i.prototype;
        return b.EventDispatcher.initialize(j), j.draw = function() {
            this.foreClouds = new f("images/001-landing/foreground-clouds-pot.png", 2748, 512, 5.15), this.foreClouds.material.opacity = .75, this.foreClouds.mesh.position.y = 1550, this.foreClouds.mesh.position.z = -3e3, this.foreClouds.texture.repeat.x = 1.4, this.foreClouds.texture.wrapS = d.RepeatWrapping, this.object.add(this.foreClouds.mesh), this.loadQueue.add(this.foreClouds);
            for (var a = 35, b = 0; a > b; b++) {
                var c = new e;
                this.object.add(c.object), this.clouds.push(c), this.loadQueue.add(c), c.object.position.x = h.between(-9e3, 9e3), c.object.position.y = h.between(0, 1700), c.object.position.z = g.map(b, a, 0, -3500, -8e3, !1, !1, !1), c.image.material.opacity = g.map(c.object.position.z, -8e3, -2e3, .2, 1, !1, !1, !1)
            }
        }, j.update = function() {
            this.foreClouds.texture.offset.x += .0015;
            for (var a = 0; a < this.clouds.length; a++) {
                var b = this.clouds[a];
                b.update()
            }
        }, j.load = function() {
            this.loadQueue.addEventListener("complete", this.onLoad), this.loadQueue.start()
        }, j.dispose = function() {
            this.loadQueue.removeEventListener("complete", this.onLoad), this.loadQueue.dispose(), this.loadQueue = null, this.object.remove(this.foreClouds.mesh), this.foreClouds.dispose(), this.foreClouds = null;
            for (var a = 0; a < this.clouds.length; a++) {
                var b = this.clouds[a];
                this.object.remove(b.object), b.dispose()
            }
            this.clouds = null
        }, j.onLoad = function() {
            this.dispatchEvent({
                type: "load"
            })
        }, i
    }), define("theboat/001landing/lightning/LightningBolt", ["underscore", "createjsEventDispatcher", "utils/inherit", "comic/Queue", "utils/Random", "comic/display/Image", "audio/Thump", "threejs", "tweenMax"], function(a, b, c, d, e, f, g, h) {
        var i = function() {
                a.bindAll(this, "onLoad"), this.bolts = [], this.loadQueue = new d("load", "load"), this.draw(), this.audioIndex = 0, this.audioIds = ["thunder01", "thunder02", "thunder03", "thunder04", "thunder05"]
            },
            j = i.prototype;
        return b.EventDispatcher.initialize(j), i.dimensions = [{
            width: 614,
            height: 1284
        }, {
            width: 570,
            height: 769
        }, {
            width: 367,
            height: 861
        }, {
            width: 353,
            height: 638
        }], j.draw = function() {
            this.object = new h.Object3D;
            for (var a = 0; a < i.dimensions.length; a++) {
                var b = i.dimensions[a],
                    c = new f("images/lightning/lightning-bolt-0" + (a + 1) + ".png", b.width, b.height, 2);
                c.mesh.visible = !1, this.bolts.push(c), this.object.add(c.mesh), this.loadQueue.add(c)
            }
            this.flashMaterial = new h.MeshBasicMaterial({
                color: 16777215
            }), this.flashGeometry = new h.PlaneBufferGeometry(13e3, 1e5), this.flashMesh = new h.Mesh(this.flashGeometry, this.flashMaterial), this.flashMaterial.transparent = !0, this.flashMaterial.opacity = 0, this.flashMesh.position.z = -1e3, this.object.add(this.flashMesh)
        }, j.strike = function(a, b) {
            a = a || .5, b = b || 0;
            for (var c = 0; c < this.bolts.length; c++) this.bolts[c].mesh.visible = !1;
            var d = e.fromArray(this.bolts),
                f = d.mesh,
                h = d.material;
            f.position.x = e.between(-3e3, 3e3), f.position.y = e.between(800, 1e3), f.position.z = e.between(-1900, -1900), f.visible = !0, this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.fromTo(h, 2, {
                easing: Power4.easeOut,
                opacity: 1
            }, {
                opacity: 0,
                onComplete: function() {
                    f.visible = !1
                }
            })), TweenMax.set(this.flashMaterial, {
                opacity: 1
            }), this.timeline.insert(TweenMax.fromTo(this.flashMaterial, a, {
                easing: Power4.easeOut,
                opacity: 1
            }, {
                opacity: 0
            }), b);
            var i = this.audioIds[this.audioIndex],
                j = g.get(i);
            this.audioIndex++, this.audioIndex >= this.audioIds.length && (this.audioIndex = 0), j.volume = .05 * Math.random() + .05, j.isLoaded && j.seek(0).play()
        }, j.bigStrike = function() {
            this.strike(2, .2), TweenMax.delayedCall(.5, this.strike, null, this), TweenMax.delayedCall(.8, this.strike, null, this), TweenMax.delayedCall(.9, this.strike, null, this)
        }, j.load = function() {
            this.loadQueue.addEventListener("complete", this.onLoad), this.loadQueue.start()
        }, j.dispose = function() {
            this.loadQueue.removeEventListener("complete", this.onLoad), this.loadQueue.dispose(), this.loadQueue = null;
            for (var a = 0; a < this.bolts.length; a++) {
                var b = this.bolts[a];
                b.dispose()
            }
            this.bolts = null, this.object.remove(this.flashMesh), this.flashMaterial.dispose(), this.flashGeometry.dispose(), this.flashMesh = null, this.flashMaterial = null, this.flashGeometry = null
        }, j.onLoad = function() {
            this.dispatchEvent({
                type: "load"
            })
        }, i
    }), define("theboat/001landing/lightning/Lightning", ["underscore", "createjsEventDispatcher", "threejs", "theboat/001landing/lightning/LightningBolt"], function(a, b, c, d) {
        var e = function() {
                a.bindAll(this, "onLoad"), this.object = new c.Object3D, this.draw()
            },
            f = e.prototype;
        return b.EventDispatcher.initialize(f), f.draw = function() {
            this.lightningBolt = new d, this.object.add(this.lightningBolt.object)
        }, f.update = function() {
            Math.random() > .995 && this.lightningBolt.strike()
        }, f.strike = function(a, b) {
            this.lightningBolt.strike(a, b), this.dispatchEvent({
                type: "strike"
            })
        }, f.bigStrike = function() {
            this.lightningBolt.bigStrike()
        }, f.load = function() {
            this.lightningBolt.addEventListener("load", this.onLoad), this.lightningBolt.load()
        }, f.dispose = function() {
            this.object.remove(this.lightningBolt.object), this.lightningBolt.removeEventListener("load", this.onLoad), this.lightningBolt.dispose(), this.lightningBolt = null
        }, f.onLoad = function() {
            this.dispatchEvent({
                type: "load"
            })
        }, e
    }), define("theboat/001landing/Boat", ["underscore", "threejs", "comic/display/Image", "createjsEventDispatcher", "utils/Random", "utils/Color", "comic/Queue"], function(a, b, c, d, e, f, g) {
        var h = function() {
                a.bindAll(this, "onLoad"), this.object = new b.Object3D, this.time = 0, this.loadQueue = new g("load", "load"), this.draw()
            },
            j = h.prototype;
        return d.EventDispatcher.initialize(j), j.draw = function() {
            var a = ["images/001-landing/boat-01.png", "images/001-landing/boat-02.png"];
            this.boats = [];
            for (var d = 0; d < a.length; d++) {
                var e = new c(a[d], 1104, 555, 5.5);
                this.loadQueue.add(e), this.boats.push(e)
            }
            this.object.add(this.boats[0].mesh), this.activeBoatIndex = 0, this.hook = new c("images/001-landing/hook-01.png", 72, 271, 5.5), this.loadQueue.add(this.hook), this.hookContainer = new b.Object3D, this.hookContainer.add(this.hook.mesh), this.object.add(this.hookContainer), this.hook.mesh.position.y = -745, this.hook.material.depthWrite = !1, this.hook.material.depthTest = !1, this.hookContainer.position.x = -2810, this.hookContainer.position.y = 950, this.hookContainer.position.z = -10
        }, j.dispose = function() {
            for (this.loadQueue.removeEventListener("complete", this.onLoad), this.loadQueue.dispose(), this.loadQueue = null, i = 0; i < this.boats.length; i++) {
                var a = this.boats[i];
                this.object.remove(a.mesh)
            }
            this.boats = null, this.object.remove(this.hookContainer), this.hookContainer.remove(this.hook), this.hook.dispose(), this.hook = null, this.hookContainer = null
        }, j.load = function() {
            this.loadQueue.addEventListener("complete", this.onLoad), this.loadQueue.start()
        }, j.onLoad = function() {
            this.dispatchEvent({
                type: "load"
            })
        }, j.changeBoat = function() {}, j.update = function() {
            var a = -1 * this.object.rotation.z - .8,
                b = .25 * Math.sin(.035 * this.time),
                c = .1 * Math.sin(.15 * this.time);
            this.hookContainer.rotation.z = a - b + c, this.time++
        }, h
    }), define("theboat/001landing/waves/Waves", ["underscore", "threejs", "comic/display/Image", "createjsEventDispatcher", "utils/Random", "utils/Color", "comic/Queue", "theboat/001landing/Boat"], function(a, b, c, d, e, f, g, h) {
        var i = function() {
                a.bindAll(this, "onLoad"), this.object = new b.Object3D, this.time = 0, this.loadQueue = new g("load", "load"), this.draw()
            },
            j = i.prototype;
        return d.EventDispatcher.initialize(j), j.draw = function() {
            var a = 15,
                d = -500;
            this.waves = [];
            for (var e = 0; a > e; e++) {
                var g = .015 * e,
                    i = new f(g, g, g).toInt(),
                    j = new c("images/001-landing/waves-pot.png", 5120, 300, 10, {
                        color: 0 != e ? i : null,
                        cacheTexture: !1
                    });
                j.texture.wrapS = b.RepeatWrapping, j.texture.repeat.x = 2.5, j.texture.offset.x = Math.random(), j.material.opacity = 0 == e ? 1 : .85, j.mesh.position.z = e * d - 100, j.mesh.position.y = 200 * e, j.material.depthWrite = !1, j.material.depthTest = !1, this.waves.push(j), this.object.add(j.mesh), this.loadQueue.add(j)
            }
            this.object.position.y = -5800, this.object.position.z = -2500, this.gradient = new c("images/001-landing/white-gradient.png", 3048, 1e3, 9), this.object.add(this.gradient.mesh), this.gradient.mesh.position.y = -700, this.loadQueue.add(this.gradient), this.boat = new h, this.object.add(this.boat.object), this.loadQueue.add(this.boat), this.boat.object.position.z = -5800, this.boat.object.position.y = 3800
        }, j.dispose = function() {
            this.loadQueue.removeEventListener("complete", this.onLoad), this.loadQueue.dispose(), this.loadQueue = null;
            var a;
            for (a = 0; a < this.waves.length; a++) {
                var b = this.waves[a];
                this.object.remove(b.mesh)
            }
            this.object.remove(this.boat.object), this.boat.dispose(), this.gradient.dispose(), this.gradient = null, this.boat = null, this.waves = null
        }, j.load = function() {
            this.loadQueue.addEventListener("complete", this.onLoad), this.loadQueue.start()
        }, j.onLoad = function() {
            this.dispatchEvent({
                type: "load"
            })
        }, j.changeBoat = function() {
            this.boat.changeBoat()
        }, j.update = function() {
            for (var a = 0; a < this.waves.length; a++) {
                var b = 18 * a,
                    c = 5 * Math.sin(.035 * (this.time + b)),
                    d = 3 * Math.sin(.015 * (this.time + b)),
                    e = 2 * Math.sin(.02 * (this.time + b)),
                    f = this.waves[a];
                f.mesh.position.y += c * d * e, f.mesh.rotation.z = c * e * .031, f.texture.offset.x += 75e-5 * (Math.sin(.01 * (this.time + a)) - .5) + .0011, 0 == a && (this.gradient.mesh.position.x = f.mesh.position.x, this.gradient.mesh.position.y = f.mesh.position.y - 1500, this.gradient.mesh.position.z = f.mesh.position.z + 600, this.gradient.mesh.rotation.x = f.mesh.rotation.x, this.gradient.mesh.rotation.y = f.mesh.rotation.y, this.gradient.mesh.rotation.z = f.mesh.rotation.z), 9 == a && (this.boat.object.position.x += 3 * e, this.boat.object.position.y += 1.7 * c, this.boat.object.position.z += c * e * -35e-5, this.boat.object.rotation.z += c * e * -35e-5, this.object.rotation.y += e * d * 35e-5)
            }
            this.boat.update(), this.time++
        }, i
    }), define("theboat/001landing/fog/Fog", ["underscore", "threejs", "comic/display/Image", "createjsEventDispatcher", "utils/Random", "utils/Color", "comic/Queue"], function(a, b, c, d, e, f, g) {
        var h = function() {
                a.bindAll(this, "onLoad"), this.object = new b.Object3D, this.time = 0, this.loadQueue = new g("load", "load"), this.draw()
            },
            i = h.prototype;
        return d.EventDispatcher.initialize(i), i.draw = function() {
            this.fog = new c("images/001-landing/fog-pot.png", 4096, 1536, 4), this.fog.mesh.position.z = -3300, this.fog.texture.wrapS = b.RepeatWrapping, this.fog.texture.repeat.x = 1, this.fog.material.opacity = .85, this.object.add(this.fog.mesh), this.loadQueue.add(this.fog)
        }, i.load = function() {
            this.loadQueue.addEventListener("complete", this.onLoad), this.loadQueue.start()
        }, i.onLoad = function() {
            this.dispatchEvent({
                type: "load"
            })
        }, i.dispose = function() {
            this.loadQueue.removeEventListener("complete", this.onLoad), this.loadQueue.dispose(), this.loadQueue = null, this.object.remove(this.fog.mesh), this.fog.dispose(), this.fog = null
        }, i.update = function() {
            this.fog.texture.offset.x += .01;
            var a = 5 * Math.sin(.035 * this.time),
                b = 3 * Math.sin(.015 * this.time),
                c = 2 * Math.sin(.02 * this.time);
            this.fog.mesh.rotation.z += a * c * 15e-5, this.fog.mesh.position.y += a * b * c, this.time++
        }, h
    }), define("theboat/001landing/Laurels", ["underscore", "threejs", "comic/display/Image", "createjsEventDispatcher", "utils/Random", "utils/Color", "comic/Queue"], function(a, b, c, d, e, f, g) {
        var h = function() {
                a.bindAll(this, "onLoad"), this.object = new b.Object3D, this.loadQueue = new g("load", "load"), this.draw()
            },
            i = h.prototype;
        return d.EventDispatcher.initialize(i), i.draw = function() {
            var a = .35;
            this.images = [];
            for (var b = 250 * a, c = b * this.images.length, d = c * -.5 + 91.5 * a, e = 0; e < this.images.length; e++) {
                var f = this.images[e];
                f.mesh.position.x = d, this.object.add(f.mesh), this.loadQueue.add(f), d += b
            }
        }, i.load = function() {
            this.loadQueue.addEventListener("complete", this.onLoad), this.loadQueue.start()
        }, i.onLoad = function() {
            this.dispatchEvent({
                type: "load"
            })
        }, i.transitionIn = function() {
            this.timeline = new TimelineMax;
            for (var a = 0; a < this.images.length; a++) {
                var b = this.images[a],
                    c = 1.3 * Math.random();
                b.material.opacity = 0, b.mesh.position.y = -30, b.mesh.position.z = 100, this.timeline.insert(TweenMax.to(b.material, 2, {
                    opacity: 1
                }), c), this.timeline.insert(TweenMax.to(b.mesh.position, 3, {
                    ease: Power4.easeOut,
                    y: 0,
                    z: 0
                }), c)
            }
        }, i.dispose = function() {
            this.timeline && (this.timeline.kill(), this.timeline = null);
            for (var a = 0; a < this.images.length; a++) {
                var b = this.images[a];
                b.dispose()
            }
            this.images = null, this.loadQueue.removeEventListener("complete", this.onLoad), this.loadQueue.dispose(), this.loadQueue = null
        }, i.update = function() {}, h
    }), define("theboat/001landing/LandingSplash", ["underscore", "utils/inherit", "utils/Random", "comic/ComicMetrics", "comic/display/Splash", "comic/display/Image", "comic/display/ChunkedImage", "theboat/001landing/ScrollCTA", "theboat/001landing/rain/RainAlt", "theboat/001landing/clouds/Clouds", "theboat/001landing/lightning/Lightning", "theboat/001landing/waves/Waves", "theboat/001landing/fog/Fog", "theboat/001landing/Laurels"], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n) {
        var o = function(a, b) {
                this.Splash_constructor(a, b), this.time = 0, this.usePreloader = !1
            },
            p = b.extend(o, e);
        return p.createCSS = function() {
            this.Splash_createCSS()
        }, p.createGL = function() {
            this.Splash_createGL(), this.strikes = 0, this.bg = new g("images/001-landing/bg.jpg", 2602, 1695, 15), this.rootObject.add(this.bg.mesh), this.bg.mesh.position.z = -21e3, this.bg.mesh.position.y = -1100, this.title = new f("images/001-landing/title.png", 1643, 339, .4), this.rootObject.add(this.title.mesh), this.title.mesh.position.z = 900, this.title.mesh.position.y = 100, this.nam = new f("images/001-landing/text-nam.png", 1078, 65, .4), this.rootObject.add(this.nam.mesh), this.nam.mesh.position.z = 700, this.nam.mesh.position.y = 10, this.matt = new f("images/001-landing/text-matt.png", 958, 66, .4), this.rootObject.add(this.matt.mesh), this.matt.mesh.position.z = 700, this.matt.mesh.position.y = -30, this.sbs = new f("images/001-landing/text-sbs.png", 735, 63, .35), this.rootObject.add(this.sbs.mesh), this.sbs.mesh.position.z = 700, this.sbs.mesh.position.y = -70, this.rain = new i, this.rootObject.add(this.rain.object), this.clouds = new j, this.rootObject.add(this.clouds.object), this.lightning = new k, this.rootObject.add(this.lightning.object), this.waves = new l, this.rootObject.add(this.waves.object), this.fog = new m, this.rootObject.add(this.fog.object), this.cta = new h, this.objectGL.add(this.cta.object), this.cta.object.position.y = -570, this.laurels = new n, this.objectGL.add(this.laurels.object), this.laurels.object.position.y = 200, this.laurels.object.position.z = 940, this.objectGL.position.z = -300, this.objectGL.add(this.rootObject), this.loadQueue.add(this.bg), this.loadQueue.add(this.matt), this.loadQueue.add(this.nam), this.loadQueue.add(this.sbs), this.loadQueue.add(this.title), this.loadQueue.add(this.rain), this.loadQueue.add(this.clouds), this.loadQueue.add(this.lightning), this.loadQueue.add(this.waves), this.loadQueue.add(this.fog), this.loadQueue.add(this.cta), this.loadQueue.add(this.laurels), this.hasTransitionedIn || (this.title.mesh.visible = !1, this.nam.mesh.visible = !1, this.matt.mesh.visible = !1, this.sbs.mesh.visible = !1, this.laurels.object.visible = !1), a.bindAll(this, "onLightningStrike"), this.lightning.addEventListener("strike", this.onLightningStrike)
        }, p.disposeGL = function() {
            this.lightning.removeEventListener("strike", this.onLightningStrike), this.timeline && (this.timeline.kill(), this.timeline = null), this.rootObject.remove(this.bg.mesh), this.rootObject.remove(this.title.mesh), this.rootObject.remove(this.rain.object), this.rootObject.remove(this.clouds.object), this.rootObject.remove(this.waves.object), this.rootObject.remove(this.fog.object), this.rootObject.remove(this.lightning.object), this.objectGL.remove(this.laurels.object), this.objectGL.remove(this.cta.object), this.matt.dispose(), this.nam.dispose(), this.sbs.dispose(), this.bg.dispose(), this.title.dispose(), this.rain.dispose(), this.clouds.dispose(), this.waves.dispose(), this.lightning.dispose(), this.fog.dispose(), this.laurels.dispose(), this.cta.dispose(), this.matt = null, this.nam = null, this.sbs = null, this.bg = null, this.title = null, this.rain = null, this.clouds = null, this.lightning = null, this.fog = null, this.cta = null, this.laurels = null, this.Splash_disposeGL()
        }, p.draw = function() {
            this.Splash_draw()
        }, p.update = function() {
            if (this.active) {
                var a = .2 * Math.sin(.005 * this.time) - .1,
                    b = .2 * Math.sin(.015 * this.time) - .1,
                    c = .2 * Math.sin(.01 * this.time) - .1,
                    d = .2 * Math.sin(.0075 * this.time) - .1,
                    e = .2 * Math.sin(.01 * this.time) - .1,
                    f = .1 * Math.sin(.015 * this.time) - .05;
                this.title.mesh.rotation.x = .3 * b, this.title.mesh.rotation.y = .4 * e, this.title.mesh.rotation.z = .3 * a, this.rootObject.rotation.y = a * b * c, this.rootObject.rotation.x = d * e * f, this.rootObject.rotation.z = a * b * 1.5, this.rain.update(), this.clouds.update(), this.lightning.update(), this.waves.update(), this.fog.update(), this.time++
            }
        }, p.transitionIn = function() {
            this.hasTransitionedIn || (this.hasTransitionedIn = !0, this.lightning.strike(2, .2), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.delayedCall(0, this.lightning.strike, null, this.lightning), .3), this.timeline.insert(TweenMax.delayedCall(0, this.lightning.strike, null, this.lightning), .5), this.timeline.insert(TweenMax.delayedCall(0, this.showTitle, null, this), 2.5), this.timeline.insert(TweenMax.delayedCall(0, this.lightning.strike, [2, .2], this.lightning), 2.5), this.timeline.insert(TweenMax.delayedCall(0, this.lightning.strike, null, this.lightning), 2.8), this.timeline.insert(TweenMax.delayedCall(0, this.showCredits, null, this), 3.5), this.timeline.insert(TweenMax.delayedCall(0, this.lightning.strike, [2, .2], this.lightning), 3.5), this.timeline.insert(TweenMax.delayedCall(0, this.lightning.strike, null, this.lightning), 3.8), this.timeline.insert(TweenMax.delayedCall(0, this.showLaurels, null, this), 4.3), this.timeline.insert(TweenMax.delayedCall(0, this.cta.transitionIn, null, this.cta), 4.2))
        }, p.showTitle = function() {
            this.active && (this.title.mesh.visible = !0, TweenMax.from(this.title.mesh.position, 4.5, {
                ease: Power3.easeOut,
                z: 1200
            }), TweenMax.from(this.objectGL.rotation, 2.5, {
                ease: Power4.easeOut,
                z: -.2
            }))
        }, p.showCredits = function() {
            this.active && (this.nam.mesh.visible = !0, this.matt.mesh.visible = !0, this.sbs.mesh.visible = !0, TweenMax.from(this.nam.mesh.position, 4.5, {
                ease: Power3.easeOut,
                z: 1300,
                delay: 0
            }), TweenMax.from(this.matt.mesh.position, 4.5, {
                ease: Power3.easeOut,
                z: 1300,
                delay: 0
            }), TweenMax.from(this.sbs.mesh.position, 4.5, {
                ease: Power3.easeOut,
                z: 1300,
                delay: 0
            }), TweenMax.from(this.objectGL.rotation, 2.5, {
                ease: Power4.easeOut,
                z: .2
            }))
        }, p.showLaurels = function() {
            this.active && (this.laurels.object.visible = !0, this.laurels.transitionIn())
        }, p.hideCTA = function() {
            this.cta.transitionOut()
        }, p.onLightningStrike = function() {}, p.changeBoat = function() {
            this.waves.changeBoat()
        }, b.promote(o, "Splash"), o
    }), define("theboat/007stormarrived/StormArrivedSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/ChunkedImage", "comic/display/Splash", "audio/Thump"], function(a, b, c, d, e, f, g) {
        var h = function(a, b) {
                this.Splash_constructor(a, b), this._blackMatteOpacity = 1, this.hasArrived = !1, this.time = 0
            },
            i = a.extend(h, f);
        return Object.defineProperties(i, {
            blackMatteOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._blackMatteOpacity = a
                },
                get: function() {
                    return this._blackMatteOpacity
                }
            }
        }), i.createCSS = function() {
            this.Splash_createCSS()
        }, i.createGL = function() {
            this.Splash_createGL(), this.bg = new d("images/007-storm-arrived/bg-pot-02.jpg", 4096, 2048, 1.5), this.bg.texture.wrapS = b.RepeatWrapping, this.bg.texture.wrapT = b.RepeatWrapping, this.bg.texture.repeat.x = 2, this.bg.texture.repeat.y = 1, this.bg.mesh.position.z = -900, this.bg.mesh.position.y = -800, this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.lightning = new d("images/007-storm-arrived/lightning.png", 616, 1205, 1.1), this.lightning.mesh.position.x = 600, this.lightning.mesh.position.y = -290, this.lightning.mesh.position.z = 200, this.lightning.mesh.rotation.z = -.3, this.rootObject.add(this.lightning.mesh), this.loadQueue.add(this.lightning), this.blackMattePlane = new b.PlaneBufferGeometry(3903, 4500), this.blackMatteMaterial = new b.MeshBasicMaterial({
                color: 0
            }), this.blackMatte = new b.Mesh(this.blackMattePlane, this.blackMatteMaterial), this.blackMatteMaterial.transparent = !0, this.blackMatte.position.x = 0, this.blackMatte.position.y = -4300, this.blackMatte.position.z = -300, this.rootObject.add(this.blackMatte), this.rain1 = new d("images/007-storm-arrived/rain-02-black-pot.png", 4096, 2048, 1), this.rain1.mesh.position.y = -900, this.rain1.mesh.position.z = -260, this.rain1.texture.wrapS = b.RepeatWrapping, this.rain1.texture.wrapT = b.RepeatWrapping, this.rain1.texture.repeat.x = 3, this.rain1.texture.repeat.y = 1.5, this.rootObject.add(this.rain1.mesh), this.loadQueue.add(this.rain1), this.rain1.material.opacity = .5, this.clouds = new d("images/007-storm-arrived/clouds-pot.png", 4096, 1024, .75), this.clouds.mesh.position.y = 100, this.clouds.mesh.position.z = 680, this.clouds.texture.wrapS = b.RepeatWrapping, this.clouds.texture.wrapT = b.RepeatWrapping, this.clouds.texture.repeat.x = 1, this.clouds.texture.repeat.y = 1, this.rootObject.add(this.clouds.mesh), this.loadQueue.add(this.clouds), this.bg.material.opacity = 0, this.lightning.material.opacity = 0, this.rain1.material.opacity = 0, this.clouds.material.opacity = 0, this.hasArrived && (TweenMax.set(this.bg.material, {
                opacity: 1
            }), TweenMax.set(this.rain1.material, {
                opacity: 1
            }), TweenMax.set(this.bg.mesh.position, {
                z: -320
            }), TweenMax.set(this.lightning.material, {
                opacity: 1
            }), TweenMax.set(this.lightning.mesh.position, {
                z: -50
            }), TweenMax.set(this.clouds.material, {
                opacity: 1
            }), TweenMax.set(this.clouds.mesh.position, {
                z: 150
            })), this.objectGL.add(this.rootObject)
        }, i.disposeGL = function() {
            this.rootObject.remove(this.bg.mesh), this.rootObject.remove(this.lightning.mesh), this.rootObject.remove(this.blackMatte), this.rootObject.remove(this.rain1), this.rootObject.remove(this.clouds), this.bg.dispose(), this.lightning.dispose(), this.clouds.dispose(), this.rain1.dispose(), this.blackMattePlane.dispose(), this.blackMatteMaterial.dispose(), this.bg = null, this.lightning = null, this.clouds = null, this.rain1 = null, this.blackMattePlane = null, this.blackMatteMaterial = null, this.blackMatte = null, this.timeline && (this.timeline.kill(), this.timeline = null), this.Splash_disposeGL()
        }, i.stormArrives = function() {
            if (!this.hasArrived && this.active) {
                this.hasArrived = !0;
                var a = g.get("thunder02");
                a.seek(0).play(), this.timeline = new TimelineMax, this.timeline.add(TweenMax.to(this.bg.material, .5, {
                    opacity: 1
                }), 0), this.timeline.add(TweenMax.to(this.bg.mesh.position, 1, {
                    z: -320,
                    ease: Power4.easeOut
                }), 0), this.timeline.add(TweenMax.to(this.lightning.material, .5, {
                    opacity: 1
                }), 0), this.timeline.add(TweenMax.to(this.lightning.mesh.position, .25, {
                    z: 170
                }), 0), this.timeline.add(TweenMax.to(this.rain1.material, .5, {
                    opacity: 1
                }), .2), this.timeline.add(TweenMax.to(this.clouds.mesh.position, .25, {
                    z: 150
                }), 0), this.timeline.add(TweenMax.to(this.clouds.material, .25, {
                    opacity: 1
                }), 0)
            }
        }, i.update = function() {
            this.Splash_update(), this.active && (this.blackMatteMaterial.opacity = this._blackMatteOpacity, this.rain1.texture.offset.x += .035, this.rain1.texture.offset.y += .0455, this.bg.texture.offset.x += .002, this.clouds.texture.offset.x += .007, this.time++)
        }, a.promote(h, "Splash"), h
    }), define("theboat/007stormarrived/StormArrivedText", ["underscore", "utils/inherit", "comic/display/BasicText", "utils/Random", "splitText"], function(a, b, c, d) {
        var e = function(a, b, c) {
            this.BasicText_constructor(a, b, c)
        };
        e.defaultTrigger = {
            atScreenPosition: .9,
            call: "transitionIn"
        };
        var f = b.extend(e, c);
        return f.createCSS = function() {
            this.BasicText_createCSS(), this.hasArrived && TweenMax.set(this.div.children[0], {
                color: 16777215
            })
        }, f.createGL = function() {
            this.BasicText_createGL()
        }, f.draw = function() {
            this.BasicText_draw()
        }, f.stormArrives = function() {
            if (!this.hasArrived && (this.hasArrived = !0, this.div)) {
                TweenMax.to(this.div.children[0], .2, {
                    color: 16777215
                }); {
                    RoughEase.ease.config({
                        strength: 1,
                        template: Quint.easeOut,
                        taper: "out"
                    })
                }
            }
        }, f.disposeCSS = function() {
            this.BasicText_disposeCSS(), this.timeline && (this.timeline.kill(), this.timeline = null), this.splitText && (this.splitText.revert(), this.splitText = null)
        }, f.blowAway = function() {
            if (!this.hasBlownAway && (this.hasBlownAway = !0, this.splitText = new SplitText(this.div.children[0], {
                    type: "words"
                }), this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.splitText))
                for (var a = this.splitText.words.length, b = 0; a > b; b++) {
                    var c = (Math.random() > .3 ? .05 * Math.random() : 0) * b;
                    this.timeline.add(TweenMax.to(this.splitText.words[b], d.between(.5, 1), {
                        ease: Power4.easeIn,
                        x: -1200,
                        y: d.between(800, -300),
                        scale: 7,
                        opacity: 0,
                        rotation: d.between(-180, 180)
                    }), c)
                }
        }, b.promote(e, "BasicText"), e
    }), define("theboat/013incense/IncenseSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/ChunkedImage", "comic/display/Splash"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.bg1 = new d("images/013-021/bg-incense-01.png", 1290, 961, 1.3), this.bg1.mesh.position.x = 700, this.bg1.mesh.position.y = -1500, this.bg1.mesh.position.z = -900, this.rootObject.add(this.bg1.mesh), this.loadQueue.add(this.bg1), this.bg2 = new d("images/013-021/bg-incense-02.png", 1424, 1997, 1.3), this.bg2.mesh.position.x = 500, this.bg2.mesh.position.y = -300, this.bg2.mesh.position.z = -1e3, this.rootObject.add(this.bg2.mesh), this.loadQueue.add(this.bg2), this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.rootObject.remove(this.bg1.mesh), this.rootObject.remove(this.bg2.mesh), this.bg1.dispose(), this.bg2.dispose(), this.bg1 = null, this.bg2 = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/015song/SongPt1Splash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Color", "utils/Random"], function(a, b, c, d, e, f) {
        var g = function(a, b) {
                this.Splash_constructor(a, b)
            },
            h = a.extend(g, e);
        return Object.defineProperties(h, {
            bgInOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgInOpacity = a
                },
                get: function() {
                    return this._bgInOpacity
                }
            },
            bgMidOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgMidOpacity = a
                },
                get: function() {
                    return this._bgMidOpacity
                }
            },
            bgOutOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgOutOpacity = a
                },
                get: function() {
                    return this._bgOutOpacity
                }
            },
            bgSaturation: {
                set: function(a) {
                    a != this._bgSaturation && (a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgSaturation = a)
                },
                get: function() {
                    return this._bgSaturation
                }
            }
        }), h.createCSS = function() {
            this.Splash_createCSS()
        }, h.createGL = function() {
            this.Splash_createGL(), this.time = 0, this.baseColor = f.fromInt(16728873), this.lyrics1 = new d("images/013-021/song-pt1-lyrics.png", 1246, 348, 1, {
                widthSegments: 10,
                heightSegments: 5,
                bufferGeometry: !1
            }), this.rootObject.add(this.lyrics1.mesh), this.loadQueue.add(this.lyrics1), this.lyrics1.mesh.geometry.dynamic = !0, this.bgLeft = new d("images/013-021/song-pt1-bg-flowers-white-left.png", 1169, 926, 9), this.bgLeft.mesh.position.x = -8800, this.bgLeft.mesh.position.y = -400, this.bgLeft.mesh.position.z = -13e3, this.rootObject.add(this.bgLeft.mesh), this.loadQueue.add(this.bgLeft), this.bgRight = new d("images/013-021/song-pt1-bg-flowers-white-right.png", 1609, 859, 9), this.bgRight.mesh.position.x = 8e3, this.bgRight.mesh.position.y = 2e3, this.bgRight.mesh.position.z = -13e3, this.rootObject.add(this.bgRight.mesh), this.loadQueue.add(this.bgRight), this.bgInOpacity = 0, this.bgMidOpacity = 0, this.bgOutOpacity = 0, this.bgSaturation = 1, this.bgLeft.material.opacity = 0, this.bgRight.material.opacity = 0, this.objectGL.add(this.rootObject)
        }, h.disposeGL = function() {
            this.rootObject.remove(this.lyrics1.mesh), this.rootObject.remove(this.bgLeft.mesh), this.rootObject.remove(this.bgRight.mesh), this.lyrics1.dispose(), this.bgLeft.dispose(), this.bgRight.dispose(), this.lyrics1 = null, this.bgLeft = null, this.bgRight = null, this.Splash_disposeGL()
        }, h.update = function() {
            if (this.active) {
                for (var a = this.lyrics1.mesh.geometry.vertices, b = 0; b < a.length; b++) {
                    var c = a[b],
                        d = this.time + 7.7 * b;
                    c.x += .035 * Math.sin(.015 * d), c.y += .05 * Math.sin(.025 * d), c.z += .05 * Math.sin(.01 * d)
                }
                this.lyrics1.mesh.needsUpdate = !0, this.lyrics1.mesh.geometry.verticesNeedUpdate = !0, this.bgLeft.material.opacity = this._bgInOpacity * this._bgMidOpacity * this._bgOutOpacity, this.bgRight.material.opacity = this.bgLeft.material.opacity;
                var e = this.baseColor.clone();
                e.r *= this._bgSaturation, e.g *= this._bgSaturation, e.b *= this._bgSaturation, this.bgRight.material.color.setHex(e.toInt()), this.bgLeft.material.color.setHex(e.toInt()), this.time++
            }
        }, a.promote(g, "Splash"), g
    }), define("theboat/015song/SongPt2Splash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random", "math/ArmyKnife"], function(a, b, c, d, e, f, g) {
        var h = function(a, b) {
                this.Splash_constructor(a, b)
            },
            i = a.extend(h, e);
        return i.createCSS = function() {
            this.Splash_createCSS()
        }, i.createGL = function() {
            this.Splash_createGL(), this.time = 0;
            var a = [{
                file: "images/013-021/song-pt2-left-leaf-01.png",
                width: 141,
                height: 170
            }, {
                file: "images/013-021/song-pt2-left-leaf-02.png",
                width: 153,
                height: 86
            }, {
                file: "images/013-021/song-pt2-left-leaf-02.png",
                width: 126,
                height: 70
            }, {
                file: "images/013-021/song-pt2-right-leaf-01.png",
                width: 135,
                height: 141
            }, {
                file: "images/013-021/song-pt2-right-leaf-02.png",
                width: 112,
                height: 97
            }, {
                file: "images/013-021/song-pt2-right-leaf-03.png",
                width: 114,
                height: 134
            }];
            this.leaves = [];
            for (var b = 0; 20 > b; b++) {
                var c = f.fromArray(a),
                    e = new d(c.file, c.width, c.height, 1.5);
                this.loadQueue.add(e), this.rootObject.add(e.mesh), e.mesh.position.x = f.between(-2e3, 2e3), e.mesh.position.y = f.between(-1e3, 1e3), e.mesh.position.z = f.between(-500, -3e3), e.mesh.rotation.z = f.between(0, 2 * Math.PI), this.leaves.push(e)
            }
            this.lyrics1 = new d("images/013-021/song-pt2-lyrics.png", 1246, 348, 1, {
                widthSegments: 10,
                heightSegments: 5,
                bufferGeometry: !1
            }), this.rootObject.add(this.lyrics1.mesh), this.loadQueue.add(this.lyrics1), this.lyrics1.mesh.geometry.dynamic = !0, this.leftFlower01 = new d("images/013-021/song-pt2-left-flower-01.png", 272, 295, 1.1), this.leftFlower01.mesh.position.x = -650, this.leftFlower01.mesh.position.y = -220, this.leftFlower01.mesh.position.z = 75, this.rootObject.add(this.leftFlower01.mesh), this.loadQueue.add(this.leftFlower01), this.leftFlower02 = new d("images/013-021/song-pt2-left-flower-02.png", 218, 212, 1.1), this.leftFlower02.mesh.position.x = -700, this.leftFlower02.mesh.position.y = 250, this.leftFlower02.mesh.position.z = -200, this.rootObject.add(this.leftFlower02.mesh), this.loadQueue.add(this.leftFlower02), this.leftFlower03 = new d("images/013-021/song-pt2-left-flower-03.png", 289, 305, 1.1), this.leftFlower03.mesh.position.x = -900, this.leftFlower03.mesh.position.y = 0, this.leftFlower03.mesh.position.z = -100, this.rootObject.add(this.leftFlower03.mesh), this.loadQueue.add(this.leftFlower03), this.rightFlower01 = new d("images/013-021/song-pt2-right-flower-01.png", 264, 261, 1.1), this.rightFlower01.mesh.position.x = 650, this.rightFlower01.mesh.position.y = -180, this.rightFlower01.mesh.position.z = 75, this.rootObject.add(this.rightFlower01.mesh), this.loadQueue.add(this.rightFlower01), this.rightFlower02 = new d("images/013-021/song-pt2-right-flower-02.png", 352, 266, 1.1), this.rightFlower02.mesh.position.x = 700, this.rightFlower02.mesh.position.y = 200, this.rightFlower02.mesh.position.z = -200, this.rootObject.add(this.rightFlower02.mesh), this.loadQueue.add(this.rightFlower02), this.rightFlower03 = new d("images/013-021/song-pt2-right-flower-03.png", 235, 187, 1.1), this.rightFlower03.mesh.position.x = 900, this.rightFlower03.mesh.position.y = 0, this.rightFlower03.mesh.position.z = -100, this.rootObject.add(this.rightFlower03.mesh), this.loadQueue.add(this.rightFlower03), this.objectGL.add(this.rootObject)
        }, i.fall = function() {
            this.falling || (this.falling = !0, this.timeline = new TimelineMax)
        }, i.update = function() {
            if (this.active) {
                var a, b = this.lyrics1.mesh.geometry.vertices;
                for (a = 0; a < b.length; a++) {
                    var c = b[a],
                        d = this.time + 7.7 * a;
                    c.x += .035 * Math.sin(.015 * d), c.y += .05 * Math.sin(.025 * d), c.z += .05 * Math.sin(.01 * d)
                }
                if (this.lyrics1.mesh.needsUpdate = !0, this.lyrics1.mesh.geometry.verticesNeedUpdate = !0, this.time++, this.falling)
                    for (a = 0; a < this.leaves.length; a++) {
                        var e = this.leaves[a],
                            f = 1;
                        e.mesh.position.y -= .75, e.mesh.position.x += .3, e.mesh.rotation.z += .005, f = g.map(e.mesh.position.y, -1e3, -2500, 1, 0, !1, !1, !1), f = f > 1 ? 1 : f, f = 0 > f ? 0 : f, e.material.opacity = f
                    }
            }
        }, i.disposeGL = function() {
            this.rootObject.remove(this.lyrics1.mesh), this.rootObject.remove(this.leftFlower01.mesh), this.rootObject.remove(this.leftFlower02.mesh), this.rootObject.remove(this.leftFlower03.mesh), this.rootObject.remove(this.rightFlower01.mesh), this.rootObject.remove(this.rightFlower02.mesh), this.rootObject.remove(this.rightFlower03.mesh), this.lyrics1.dispose(), this.leftFlower01.dispose(), this.leftFlower02.dispose(), this.leftFlower03.dispose(), this.rightFlower01.dispose(), this.rightFlower02.dispose(), this.rightFlower03.dispose(), this.lyrics1 = null, this.leftFlower01 = null, this.leftFlower02 = null, this.leftFlower03 = null, this.rightFlower01 = null, this.rightFlower02 = null, this.rightFlower03 = null;
            for (var a = 0; a < this.leaves.length; a++) {
                var b = this.leaves[a];
                this.rootObject.remove(b.mesh), b.dispose()
            }
            this.leaves = null, this.Splash_disposeGL()
        }, a.promote(h, "Splash"), h
    }), define("theboat/015song/SongPt3Splash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.time = 0, this.lyrics1 = new d("images/013-021/song-pt3-lyrics.png", 1246, 348, 1, {
                widthSegments: 10,
                heightSegments: 5,
                bufferGeometry: !1
            }), this.rootObject.add(this.lyrics1.mesh), this.loadQueue.add(this.lyrics1), this.lyrics1.mesh.geometry.dynamic = !0, this.mai = new d("images/013-021/song-pt3-mai.png", 214, 680, 0), this.mai.mesh.position.x = -850, this.rootObject.add(this.mai.mesh), this.loadQueue.add(this.mai), this.flower01 = new d("images/013-021/song-pt3-flower-01.png", 336, 514, 1.1), this.flower01.mesh.position.x = -1100, this.flower01.mesh.position.y = 0, this.flower01.mesh.position.z = 75, this.rootObject.add(this.flower01.mesh), this.loadQueue.add(this.flower01), this.flower02 = new d("images/013-021/song-pt3-flower-02.png", 353, 272, 1.1), this.flower02.mesh.position.x = -600, this.flower02.mesh.position.y = 300, this.flower02.mesh.position.z = -200, this.rootObject.add(this.flower02.mesh), this.loadQueue.add(this.flower02), this.flower03 = new d("images/013-021/song-pt3-flower-03.png", 604, 292, 1.1), this.flower03.mesh.position.x = 650, this.flower03.mesh.position.y = 300, this.flower03.mesh.position.z = -200, this.rootObject.add(this.flower03.mesh), this.loadQueue.add(this.flower03), this.flower04 = new d("images/013-021/song-pt3-flower-04.png", 539, 324, 1.1), this.flower04.mesh.position.x = 500, this.flower04.mesh.position.y = -210, this.flower04.mesh.position.z = 75, this.rootObject.add(this.flower04.mesh), this.loadQueue.add(this.flower04), this.flower05 = new d("images/013-021/song-pt3-flower-05.png", 409, 323, 1.1), this.flower05.mesh.position.x = -550, this.flower05.mesh.position.y = -270, this.flower05.mesh.position.z = 75, this.rootObject.add(this.flower05.mesh), this.loadQueue.add(this.flower05), this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.rootObject.remove(this.lyrics1.mesh), this.rootObject.remove(this.mai.mesh), this.rootObject.remove(this.flower01.mesh), this.rootObject.remove(this.flower02.mesh), this.rootObject.remove(this.flower03.mesh), this.rootObject.remove(this.flower04.mesh), this.rootObject.remove(this.flower05.mesh), this.lyrics1.dispose(), this.mai.dispose(), this.flower01.dispose(), this.flower02.dispose(), this.flower03.dispose(), this.flower04.dispose(), this.flower05.dispose(), this.lyrics1 = null, this.mai = null, this.flower01 = null, this.flower02 = null, this.flower03 = null, this.flower04 = null, this.flower05 = null, this.Splash_disposeGL()
        }, g.update = function() {
            if (this.active) {
                var a, b = this.lyrics1.mesh.geometry.vertices;
                for (a = 0; a < b.length; a++) {
                    var c = b[a],
                        d = this.time + 7.7 * a;
                    c.x += .035 * Math.sin(.015 * d), c.y += .05 * Math.sin(.025 * d), c.z += .05 * Math.sin(.01 * d)
                }
                this.lyrics1.mesh.needsUpdate = !0, this.lyrics1.mesh.geometry.verticesNeedUpdate = !0, this.time++
            }
        }, a.promote(f, "Splash"), f
    }), define("theboat/021garden/GardenSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.garden = new d("images/022-028/garden.jpg", 1562, 932, 1), this.rootObject.add(this.garden.mesh), this.loadQueue.add(this.garden), this.flowers = new d("images/022-028/flowers.png", 1878, 1479, .85), this.flowers.mesh.position.y = 100, this.flowers.mesh.position.z = 100, this.rootObject.add(this.flowers.mesh), this.loadQueue.add(this.flowers), this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.rootObject.remove(this.garden.mesh), this.rootObject.remove(this.flowers.mesh), this.flowers.dispose(), this.garden.dispose(), this.flowers = null, this.garden = null, this.Splash_disposeGL()
        }, g.update = function() {
            this.active && this.Splash_update()
        }, a.promote(f, "Splash"), f
    }), define("theboat/022ba/BaSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.running = new d("images/022-028/01.png", 1625, 658, 1.2), this.running.mesh.position.z = -300, this.rootObject.add(this.running.mesh), this.loadQueue.add(this.running), this.objectGL.add(this.rootObject)
        }, g.update = function() {}, g.disposeGL = function() {
            this.rootObject.remove(this.running.mesh), this.running.dispose(), this.running = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/026busletter/BusLetterSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.running = new d("images/022-028/bus-letter.jpg", 1817, 586, 1.2), this.running.mesh.position.z = -300, this.rootObject.add(this.running.mesh), this.loadQueue.add(this.running), this.objectGL.add(this.rootObject)
        }, g.update = function() {}, g.disposeGL = function() {
            this.rootObject.remove(this.running.mesh), this.running.dispose(), this.running = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/028closingwound/ClosingWoundSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random", "math/ArmyKnife"], function(a, b, c, d, e, f, g) {
        var h = function(a, b) {
                this.Splash_constructor(a, b), this._bgInOpacity = 0, this._bgOutOpacity = 0
            },
            i = a.extend(h, e);
        return Object.defineProperties(i, {
            bgInOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgInOpacity = a
                },
                get: function() {
                    return this._bgInOpacity
                }
            },
            bgOutOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgOutOpacity = a
                },
                get: function() {
                    return this._bgOutOpacity
                }
            },
            bgDistance: {
                set: function(a) {
                    a != this._bgDistance && (a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgDistance = a)
                },
                get: function() {
                    return this._bgDistance
                }
            }
        }), i.createCSS = function() {
            this.Splash_createCSS()
        }, i.createGL = function() {
            this.Splash_createGL(), this.time = 0, this.bg = new d("images/022-028/closing-wound.jpg", 1838, 660, 13, {
                widthSegments: 10,
                heightSegments: 5,
                bufferGeometry: !1
            }), this.bg.mesh.position.z = -15e3, this.bg.mesh.geometry.dynamic = !0, this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.bgOpacity = 0, this.bgDistance = 0, this.objectGL.add(this.rootObject)
        }, i.disposeGL = function() {
            this.rootObject.remove(this.bg.mesh), this.bg.dispose(), this.bg = null, this.Splash_disposeGL()
        }, i.update = function() {
            if (this.active) {
                var a, b = this.bg.mesh.geometry.vertices;
                for (a = 0; a < b.length; a++) {
                    var c = b[a],
                        d = this.time + 7.7 * a;
                    c.x += 4 * Math.sin(.015 * d) * (1 - this.bgDistance), c.y += 4 * Math.sin(.025 * d) * (1 - this.bgDistance), c.z += 2 * Math.sin(.01 * d) * (1 - this.bgDistance)
                }
                this.bg.mesh.needsUpdate = !0, this.bg.mesh.geometry.verticesNeedUpdate = !0, this.bg.material.opacity = this._bgInOpacity * this._bgOutOpacity, 1 - this.bgDistance > .66 && (this.bg.material.opacity -= f.between(0, .2 * (1 - this.bgDistance)));
                var e = g.map(this._bgDistance, 1, 0, -15e3, -25e3, !1, !1, !1);
                this.bg.mesh.position.z = e, this.time++
            }
        }, a.promote(h, "Splash"), h
    }), define("theboat/033markets/MarketsSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random", "math/ArmyKnife", "math/Interpolation"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b), this._progress = 0
            },
            g = a.extend(f, e);
        return Object.defineProperties(g, {
            progress: {
                set: function(a) {
                    this._progress = a
                },
                get: function() {
                    return this._progress
                }
            }
        }), g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.time = 0, this.markets = new d("images/033-markets/markets.png", 1389, 677, 1), this.rootObject.add(this.markets.mesh), this.loadQueue.add(this.markets), this.inset = new d("images/033-markets/mai-inset.png", 472, 450, .8), this.inset.mesh.position.x = 500, this.inset.mesh.position.y = 0, this.inset.mesh.position.z = 150, this.inset.material.opacity = 0, this.rootObject.add(this.inset.mesh), this.loadQueue.add(this.inset), this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.rootObject.remove(this.markets.mesh), this.rootObject.remove(this.inset.mesh), this.markets.dispose(), this.inset.dispose(), this.markets = null, this.inset = null, this.Splash_disposeGL()
        }, g.transitionIn = function() {
            this.timeline = new TimelineMax, this.timeline.add(TweenMax.to(this.markets.material, 2, {
                opacity: .6,
                ease: Power3.easeInOut
            }), 0), this.timeline.add(TweenMax.to(this.inset.mesh.position, 2, {
                x: 250,
                ease: Power3.easeOut
            }), 0), this.timeline.add(TweenMax.to(this.inset.material, 1, {
                opacity: 1,
                ease: Power3.easeInOut
            }), 0)
        }, a.promote(f, "Splash"), f
    }), define("theboat/037canoe/Signal", ["underscore", "threejs", "comic/display/Image", "createjsEventDispatcher", "utils/Random", "utils/Color", "comic/Queue", "math/ArmyKnife"], function(a, b, c, d, e, f, g, h) {
        var i = function() {
                a.bindAll(this, "onLoad"), this.object = new b.Object3D, this.time = 0, this.loadQueue = new g("load", "load"), this.masterOpacity = 0, this.flickerOpacity = 0, this.smokeOpacity = 0, this.draw()
            },
            j = i.prototype;
        return d.EventDispatcher.initialize(j), j.draw = function() {
            this.smoke = new c("images/037-canoe/signal-smoke-3.png", 128, 512, 11, {
                bufferGeometry: !1,
                widthSegments: 10,
                heightSegments: 5
            }), this.smoke.mesh.rotation.z = 1, this.smoke.mesh.position.z = -150, this.smoke.material.opacity = 0, this.object.add(this.smoke.mesh), this.loadQueue.add(this.smoke), this.flickerDict = [{
                width: 5,
                height: 30,
                minOpacity: .1,
                maxOpacity: .2
            }, {
                width: 8,
                height: 8,
                minOpacity: .3,
                maxOpacity: 1
            }, {
                width: 120,
                height: 120,
                minOpacity: .05,
                maxOpacity: .2
            }, {
                width: 300,
                height: 300,
                minOpacity: .15,
                maxOpacity: .2
            }], this.flickers = [];
            for (var a = 0; a < this.flickerDict.length; a++) {
                var b = this.flickerDict[a],
                    d = new c("images/037-canoe/flicker-2.png", b.width, b.height, 11);
                d.mesh.position.x = 1750, d.mesh.position.y = -1300, d.mesh.position.z = 100 * a, d.mesh.renderDepth = -1 * a, this.object.add(d.mesh), this.loadQueue.add(d), this.flickers.push(d)
            }
            this.lenseFlare2 = new c("images/037-canoe/lense-flare.png", 32, 32, 11), this.lenseFlare2.mesh.position.x = 1750, this.lenseFlare2.mesh.position.y = -1300, this.lenseFlare2.mesh.position.z = 35, this.object.add(this.lenseFlare2.mesh), this.loadQueue.add(this.lenseFlare2), this.object.visible = !1
        }, j.load = function() {
            this.loadQueue.addEventListener("complete", this.onLoad), this.loadQueue.start()
        }, j.onLoad = function() {
            this.dispatchEvent({
                type: "load"
            })
        }, j.dispose = function() {
            this.loadQueue.removeEventListener("complete", this.onLoad), this.loadQueue.dispose(), this.loadQueue = null, this.timeline && (this.timeline.kill(), this.timeline = null);
            for (var a = 0; a < this.flickers.length; a++) {
                var b = this.flickers[a];
                this.object.remove(b), b.dispose()
            }
            this.flickers = null, this.object.remove(this.lenseFlare2.mesh), this.lenseFlare2.dispose(), this.lenseFlare2 = null, this.object.remove(this.smoke.mesh), this.smoke.dispose(), this.smoke = null
        }, j.transitionIn = function() {
            TweenMax.to(this, 7, {
                smokeOpacity: 1
            }), TweenMax.to(this, .5, {
                flickerOpacity: 1
            }), this.object.visible = !0
        }, j.update = function() {
            for (var a = this.smoke.mesh.geometry.vertices, b = 0; b < a.length; b++) {
                var c = a[b],
                    d = h.map(c.y, -2816, 2816, 0, 1, !1, !1, !1),
                    f = this.time + 7.7 * b;
                c.x += Math.sin(.015 * f) * d * 10, c.y += Math.sin(.005 * f) * d * 5
            }
            this.smoke.mesh.needsUpdate = !0, this.smoke.mesh.geometry.verticesNeedUpdate = !0, this.smoke.material.opacity = this.smokeOpacity * this.masterOpacity;
            for (var b = 0; b < this.flickerDict.length; b++) {
                var g = this.flickerDict[b],
                    i = this.flickers[b];
                i.material.opacity = e.between(g.minOpacity, g.maxOpacity) * this.flickerOpacity * this.masterOpacity
            }
            Math.random() > .4 && (this.lenseFlare2.mesh.rotation.z = Math.random() * Math.PI * 2), this.lenseFlare2.material.opacity = e.between(.75, .85) * this.flickerOpacity * this.masterOpacity, this.time++
        }, i
    }), define("theboat/037canoe/CanoeSplash", ["utils/inherit", "threejs", "theboat/037canoe/Signal", "comic/ComicMetrics", "comic/display/Image", "comic/display/ChunkedImage", "comic/display/Splash", "audio/Thump", "math/ArmyKnife", "math/Interpolation"], function(a, b, c, d, e, f, g, h, i, j) {
        var k = function(a, b) {
                this.Splash_constructor(a, b), this._canoePosition = 0, this._canoeOpacity = 0, this._blackMatteOpacityIn = 0, this._bgOpacityOut = 1, this._visibleHack = 0, this.time = 0
            },
            l = a.extend(k, g);
        return Object.defineProperties(l, {
            whiteMatteOpacityIn: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._blackMatteOpacityIn = a
                },
                get: function() {
                    return this._blackMatteOpacityIn
                }
            },
            canoeOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._canoeOpacity = a
                },
                get: function() {
                    return this._canoeOpacity
                }
            },
            canoePosition: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._canoePosition = a
                },
                get: function() {
                    return this._canoePosition
                }
            },
            visibleHack: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._visibleHack = a
                },
                get: function() {
                    return this._visibleHack
                }
            }
        }), l.createCSS = function() {
            this.Splash_createCSS()
        }, l.createGL = function() {
            this.Splash_createGL(), this.blackMatteInPlane = new b.PlaneBufferGeometry(6e3, 1e4), this.blackMatteInMaterial = new b.MeshBasicMaterial({
                color: 16777215,
                opacity: 0
            }), this.blackMatteIn = new b.Mesh(this.blackMatteInPlane, this.blackMatteInMaterial), this.blackMatteInMaterial.transparent = !0, this.blackMatteIn.position.x = 0, this.blackMatteIn.position.y = 0, this.blackMatteIn.position.z = -500, this.rootObject.add(this.blackMatteIn), this.blackMattePlane = new b.PlaneBufferGeometry(7e4, 1e5), this.blackMatteMaterial = new b.MeshBasicMaterial({
                color: 0,
                opacity: 1
            }), this.blackMatte = new b.Mesh(this.blackMattePlane, this.blackMatteMaterial), this.blackMatteMaterial.transparent = !1, this.blackMatte.position.x = 0, this.blackMatte.position.y = 0, this.blackMatte.position.z = -21e3, this.rootObject.add(this.blackMatte), this.bg = new f("images/037-canoe/bg-alt.jpg", 2602, 1441, 13.5), this.bg.transparent = !1, this.bg.mesh.position.y = 3e3, this.bg.mesh.position.z = -2e4, this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.canoe = new e("images/037-canoe/canoe-2.png", 781, 222, 10), this.canoe.mesh.position.x = -1e4, this.canoe.mesh.position.y = -1e3, this.canoe.mesh.position.z = -18e3, this.rootObject.add(this.canoe.mesh), this.loadQueue.add(this.canoe), this.signal = new c, this.signal.object.position.x = this.canoe.mesh.position.x, this.signal.object.position.y = this.canoe.mesh.position.y, this.signal.object.position.z = this.canoe.mesh.position.z, this.rootObject.add(this.signal.object), this.loadQueue.add(this.signal), this.objectGL.add(this.rootObject)
        }, l.disposeGL = function() {
            this.rootObject.remove(this.blackMatteIn), this.rootObject.remove(this.blackMatte), this.rootObject.remove(this.canoe.mesh), this.rootObject.remove(this.signal.object), this.blackMatteInMaterial.dispose(), this.blackMatteInPlane.dispose(), this.blackMatteMaterial.dispose(), this.blackMattePlane.dispose(), this.canoe.dispose(), this.signal.dispose(), this.blackMatteInMaterial = null, this.blackMatteInPlane = null, this.blackMatteMaterial = null, this.blackMattePlane = null, this.bg = null, this.canoe = null, this.signal = null, this.Splash_disposeGL()
        }, l.showSignal = function() {
            this.signal.transitionIn()
        }, l.update = function() {
            if (this.Splash_update(), this.active) {
                this.time++, this.rootObject.visible = this._visibleHack > 0, this.blackMatteInMaterial.opacity = this._blackMatteOpacityIn, this.canoe.material.opacity = this._canoeOpacity, this.signal.masterOpacity = this._canoeOpacity;
                var a = i.map(this._canoePosition, 0, 1, -1e4, 3e4, !1, !1, !1);
                a < this.canoe.mesh.position.x && (a = this.canoe.mesh.position.x);
                var b = 75 * Math.sin(.025 * this.time);
                this.canoe.mesh.position.x = j.lerp(this.canoe.mesh.position.x, a, .025), this.canoe.mesh.position.y = b, this.signal.object.position.x = this.canoe.mesh.position.x + 930, this.signal.object.position.y = this.canoe.mesh.position.y + 1600, this.signal.update()
            }
        }, a.promote(k, "Splash"), k
    }), define("theboat/040signal/SignalSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b), this.time = 0
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.bg = new d("images/040-signal/bg.png", 1139, 706, 1), this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.canoe = new d("images/040-signal/canoe.png", 1007, 298, 1), this.canoe.mesh.position.y = -1, this.canoe.mesh.position.z = 20, this.rootObject.add(this.canoe.mesh), this.loadQueue.add(this.canoe), this.signal = new d("images/040-signal/signal.png", 1139, 706, 1), this.signal.material.opacity = 0, this.signal.mesh.position.z = 10, this.rootObject.add(this.signal.mesh), this.loadQueue.add(this.signal), this.objectGL.add(this.rootObject)
        }, g.update = function() {
            this.Splash_update(), this.active && (this.time++, this.canoe.mesh.position.y = 3 * Math.sin(.025 * this.time) - 10)
        }, g.flash = function() {
            this.timeline = new TimelineMax;
            for (var a = 0; 3 > a; a++) {
                var b = 1.5 * a;
                this.timeline.insert(TweenMax.to(this.signal.material, .05, {
                    opacity: 1
                }), b), this.timeline.insert(TweenMax.to(this.signal.material, 1, {
                    opacity: 0
                }), b + .5)
            }
            this.timeline.insert(TweenMax.to(this.signal.material, .05, {
                opacity: 1
            }), 1.5 * a)
        }, g.disposeGL = function() {
            this.timeline && this.timeline.kill(), this.rootObject.remove(this.bg.mesh), this.rootObject.remove(this.canoe.mesh), this.rootObject.remove(this.signal.mesh), this.bg.dispose(), this.canoe.dispose(), this.signal.dispose(), this.bg = null, this.canoe = null, this.signal = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/041canoeandboat/CanoeAndBoatSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random", "math/Interpolation", "math/ArmyKnife"], function(a, b, c, d, e, f, g, h) {
        var i = function(a, b) {
                this.Splash_constructor(a, b), this.time = 0, this._canoePosition = .5
            },
            j = a.extend(i, e);
        return Object.defineProperties(j, {
            canoePosition: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._canoePosition = a
                },
                get: function() {
                    return this._canoePosition
                }
            }
        }), j.createCSS = function() {
            this.Splash_createCSS()
        }, j.createGL = function() {
            this.Splash_createGL(), this.bg = new d("images/041-canoe-and-boat/bg.png", 1139, 706, 1), this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.boat = new d("images/041-canoe-and-boat/boat.png", 677, 271, 1), this.boat.mesh.position.x = 200, this.boat.mesh.position.y = 200, this.boat.mesh.position.z = 15, this.rootObject.add(this.boat.mesh), this.loadQueue.add(this.boat), this.canoe = new d("images/041-canoe-and-boat/canoe-pot.png", 1139, 256, 1), this.canoe.mesh.position.y = -175, this.canoe.mesh.position.z = 30, this.canoe.texture.wrapS = b.ClampToEdgeWrapping, this.canoe.texture.repeat.x = 1.3, this.rootObject.add(this.canoe.mesh), this.loadQueue.add(this.canoe), this.objectGL.add(this.rootObject)
        }, j.update = function() {
            if (this.Splash_update(), this.active) {
                this.time++, this.boat.mesh.position.y = 3 * Math.sin(.025 * this.time) + 60;
                var a = h.map(this._canoePosition, 0, 1, 0, 1, !1, !1, !1),
                    b = 6 * Math.sin(.025 * this.time) - 175;
                this.canoe.texture.offset.x = g.lerp(this.canoe.texture.offset.x, a, .01), this.canoe.mesh.position.y = b
            }
        }, j.disposeGL = function() {
            this.rootObject.remove(this.bg.mesh), this.rootObject.remove(this.boat.mesh), this.rootObject.remove(this.canoe.mesh), this.bg.dispose(), this.boat.dispose(), this.canoe.dispose(), this.bg = null, this.boat = null, this.canoe = null, this.Splash_disposeGL()
        }, a.promote(i, "Splash"), i
    }), define("theboat/042boat/BoatSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.running = new d("images/042-boat/01.png", 1139, 706, 1), this.rootObject.add(this.running.mesh), this.loadQueue.add(this.running), this.objectGL.add(this.rootObject)
        }, g.update = function() {}, g.disposeGL = function() {
            this.rootObject.remove(this.running.mesh), this.running.dispose(), this.running = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/044bodies/BodiesSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/ChunkedImage", "comic/display/Splash", "utils/Color", "utils/Random"], function(a, b, c, d, e, f) {
        var g = function(a, b) {
                this.Splash_constructor(a, b), this._bgOpacity = 1
            },
            h = a.extend(g, f);
        return Object.defineProperties(h, {
            bgOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgOpacity = a
                },
                get: function() {
                    return this._bgInOpacity
                }
            }
        }), h.createGL = function() {
            this.Splash_createGL(), this.time = 0, this.bodies = new e("images/044-bodies/bg3.png", 2376, 2911, 3), this.bodies.mesh.position.z = -2e3, this.rootObject.add(this.bodies.mesh), this.loadQueue.add(this.bodies), this.ripples = new d("images/044-bodies/ripples4-pot.png", 8192, 2048, 2.8), this.ripples.material.transparent = !1, this.ripples.mesh.position.z = -2500, this.ripples.texture.wrapS = b.RepeatWrapping, this.ripples.texture.repeat.x = 8, this.rootObject.add(this.ripples.mesh), this.loadQueue.add(this.ripples), this.gradient = new d("images/044-bodies/black-gradient.png", 5048, 1024, 2), this.rootObject.add(this.gradient.mesh), this.gradient.mesh.position.y = -3900, this.gradient.mesh.position.z = -1800, this.loadQueue.add(this.gradient), this.objectGL.add(this.rootObject)
        }, h.update = function() {
            this.active && (this._bgOpacity > 0 && (this.ripples.texture.offset.x += 5e-4, this.ripples.material.opacity = this._bgOpacity, this.time++), this.ripples.material.transparent = this._bgOpacity < 1, this._bgOpacity <= 0 && this.rootObject.parent || this._bgOpacity > 0 && !this.rootObject.parent && this.objectGL.add(this.rootObject))
        }, h.disposeGL = function() {
            this.rootObject.remove(this.bodies.mesh), this.rootObject.remove(this.ripples.mesh), this.bodies.dispose(), this.ripples.dispose(), this.bodies = null, this.ripples = null, this.Splash_disposeGL()
        }, a.promote(g, "Splash"), g
    }), define("theboat/051afterstorm/AfterStormSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/ChunkedImage", "comic/display/Splash", "audio/Thump", "math/ArmyKnife", "math/Interpolation", "utils/Random"], function(a, b, c, d, e, f, g, h, i, j) {
        var k = function(a, b) {
                this.Splash_constructor(a, b), this._canoePosition = 0, this._bgOpacityIn = 1, this._glare = 0, this.time = 0
            },
            l = a.extend(k, f);
        return Object.defineProperties(l, {
            bgOpacityIn: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgOpacityIn = a
                },
                get: function() {
                    return this._bgOpacityIn
                }
            },
            glare: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._glare = a
                },
                get: function() {
                    return this._glare
                }
            }
        }), l.createCSS = function() {
            this.Splash_createCSS()
        }, l.createGL = function() {
            this.Splash_createGL(), this.rootObject.position.y = -3700, this.blackMattePlane = new b.PlaneBufferGeometry(2e4, 3e4), this.blackMatteMaterial = new b.MeshBasicMaterial({
                color: 0,
                opacity: 1
            }), this.blackMatte = new b.Mesh(this.blackMattePlane, this.blackMatteMaterial), this.blackMatteMaterial.transparent = !0, this.blackMatte.position.x = 0, this.blackMatte.position.y = 0, this.blackMatte.position.z = -3e3, this.objectGL.add(this.blackMatte), this.glareMattePlane = new b.PlaneBufferGeometry(2e4, 2e4), this.glareMatteMaterial = new b.MeshBasicMaterial({
                color: 16777215,
                opacity: 0
            }), this.glareMatte = new b.Mesh(this.glareMattePlane, this.glareMatteMaterial), this.glareMatteMaterial.transparent = !0, this.glareMatte.position.z = -3100, this.rootObject.add(this.glareMatte), this.whiteMattePlane = new b.PlaneBufferGeometry(2e4, 4e3), this.whiteMatteMaterial = new b.MeshBasicMaterial({
                color: 16777215
            }), this.whiteMatte = new b.Mesh(this.whiteMattePlane, this.whiteMatteMaterial), this.whiteMatte.position.y = -7e3, this.whiteMatte.position.z = -5900, this.rootObject.add(this.whiteMatte), this.bg = new e("images/051-after-storm/bg-alt.jpg", 2602, 1695, 15), this.bg.transparent = !1, this.bg.mesh.position.z = -2e4, this.bg.mesh.position.y = -3e3, this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.boat = new d("images/051-after-storm/boat.png", 672, 358, 5), this.boat.mesh.position.z = -5800, this.boat.mesh.position.y = -1400, this.rootObject.add(this.boat.mesh), this.loadQueue.add(this.boat), this.wave = new d("images/051-after-storm/water-pot.png", 6144, 512, 6), this.wave.texture.wrapS = b.RepeatWrapping, this.wave.texture.repeat.x = 3, this.wave.texture.offset.x = Math.random(), this.wave.mesh.position.z = -5900, this.wave.mesh.position.y = -3100, this.rootObject.add(this.wave.mesh), this.loadQueue.add(this.wave), this.sunsLookup = [{
                y: 800,
                rotationDelta: -15e-5,
                scale: 10
            }, {
                y: 800,
                rotationDelta: -26e-5,
                scale: 11
            }, {
                y: 800,
                rotationDelta: 16e-5,
                scale: 15
            }], this.suns = [];
            for (var a = 0; a < this.sunsLookup.length; a++) {
                var c = this.sunsLookup[a],
                    f = new d("images/051-after-storm/sun.png", 2e3, 2e3, c.scale);
                f.mesh.position.y = c.y, f.mesh.position.z = -16e3 + -400 * a, f.mesh.rotation.z = j.between(0, 2 * Math.PI), f.material.depthTest = !1, f.material.depthWrite = !1, this.rootObject.add(f.mesh), this.loadQueue.add(f), this.suns.push(f)
            }
            this.glareSun = new d("images/051-after-storm/sun.png", 2e3, 2e3, 5), this.glareSun.mesh.position.y = -1e3, this.glareSun.mesh.position.z = -5e3, this.glareSun.material.opacity = 0, this.rootObject.add(this.glareSun.mesh), this.loadQueue.add(this.glareSun)
        }, l.update = function() {
            if (this.Splash_update(), this.active)
                if (this._bgOpacityIn < 1) {
                    this.time++, this.boat.mesh.position.y = 15 * Math.sin(.025 * this.time) - 1450, this.wave.mesh.position.y = 35 * Math.sin(.017 * this.time) - 3600;
                    for (var a = 0; a < this.suns.length; a++) {
                        var b = this.suns[a];
                        Math.random() > .97 && (b.mesh.rotation.z = j.between(0, 2 * Math.PI)), b.material.opacity = j.between(.55, .75), b.mesh.rotation.z += this.sunsLookup[a].rotationDelta
                    }
                    this.wave.texture.offset.x += 1e-4, this.blackMatteMaterial.opacity = this._bgOpacityIn, this.glareMatteMaterial.opacity = j.between(this._glare, this._glare + .1) * this._glare, this.glareSun.mesh.rotation.z += 5e-4, this.glareSun.material.opacity = 1.75 * this._glare, this.rootObject.parent || this.objectGL.add(this.rootObject)
                } else this.rootObject.parent
        }, l.disposeGL = function() {
            this.objectGL.remove(this.blackMatte), this.rootObject.remove(this.whiteMatte), this.rootObject.remove(this.glareMatte), this.rootObject.remove(this.bg.mesh), this.rootObject.remove(this.boat.mesh), this.rootObject.remove(this.wave.mesh), this.blackMatteMaterial.dispose(), this.blackMattePlane.dispose(), this.whiteMatteMaterial.dispose(), this.whiteMattePlane.dispose(), this.glareMatteMaterial.dispose(), this.glareMattePlane.dispose(), this.bg.dispose(), this.boat.dispose(), this.wave.dispose();
            for (var a = 0; a < this.suns.length; a++) {
                var b = this.suns[a];
                this.rootObject.remove(b.mesh), b.dispose()
            }
            this.suns = null, this.bg = null, this.blackMatte = null, this.blackMatteMaterial = null, this.whiteMatte = null, this.whiteMatteMaterial = null, this.whiteMattePlane = null, this.glareMatte = null, this.glareMatteMaterial = null, this.glareMattePlane = null, this.suns = null, this.Splash_disposeGL()
        }, a.promote(k, "Splash"), k
    }), define("theboat/054maifeveralt/MaiFeverSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Color", "utils/Random"], function(a, b, c, d, e, f, g) {
        var h = function(a, b) {
                this.Splash_constructor(a, b), this._bgInOpacity = 0, this._hazeOpacity = 1
            },
            i = a.extend(h, e);
        return Object.defineProperties(i, {
            bgInOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgInOpacity = a
                },
                get: function() {
                    return this._bgInOpacity
                }
            }
        }), i.createCSS = function() {
            this.Splash_createCSS()
        }, i.createGL = function() {
            this.Splash_createGL(), this.time = 0, this.baseColor = f.fromInt(16728873), this.bg = new d("images/054-mai-fever-alt/bg-pot.jpg", 6144, 4096, 6, {
                widthSegments: 10,
                heightSegments: 5,
                bufferGeometry: !1
            }), this.bg.mesh.position.z = -8500, this.bg.texture.wrapS = b.RepeatWrapping, this.bg.texture.repeat.x = 3, this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.bg.mesh.geometry.dynamic = !0, this.haze = new d("images/054-mai-fever/haze.png", 8e3, 9e3), this.haze.mesh.position.z = -1e3, this.haze.texture.wrapS = b.RepeatWrapping, this.haze.texture.wrapT = b.RepeatWrapping, this.haze.texture.repeat.x = 5, this.haze.texture.repeat.y = 5, this.haze.material.opacity = .55, this.rootObject.add(this.haze.mesh), this.loadQueue.add(this.haze), this.particleTexture = b.ImageUtils.loadTexture("images/054-mai-fever-alt/particle-01.png"), this.particleMaterial = new b.PointCloudMaterial({
                size: 600,
                map: this.particleTexture,
                transparent: !0,
                depthTest: !1
            }), this.particleGeom = new b.Geometry;
            for (var a = 0; 50 > a; a++) {
                var c = new b.Vector3(g.between(-5e3, 5e3), g.between(-2e3, 5e3), g.between(-6500, 6500));
                c.vx = g.between(-10, 10), c.vy = g.between(-5, 5), c.vz = g.between(-10, 10), this.particleGeom.vertices.push(c)
            }
            this.particles = new b.PointCloud(this.particleGeom, this.particleMaterial), this.rootObject.add(this.particles), this.objectGL.add(this.rootObject)
        }, i.onLoadQueueComplete = function(a) {
            this.Splash_onLoadQueueComplete(a)
        }, i.update = function() {
            if (this.active) {
                this.haze.texture.offset.x = .6 * Math.sin(.01 * this.time) + .8 * Math.sin(.005 * this.time), this.haze.texture.offset.y = .5 * Math.sin(.02 * this.time) + .9 * Math.sin(.003 * this.time), this.haze.material.opacity = g.between(.025, .065) * this._hazeOpacity, Math.random() > .99 && (this.haze.material.opacity = .6);
                for (var a = this.bg.mesh.geometry.vertices, b = 0; b < a.length; b++) {
                    var c = a[b],
                        d = this.time + 7.7 * b;
                    c.x += 10 * Math.sin(.01 * d), c.y += 8 * Math.sin(.005 * d)
                }
                this.bg.mesh.needsUpdate = !0, this.bg.mesh.geometry.verticesNeedUpdate = !0, this.bg.texture.offset.x += 5e-4;
                for (var b = 0; b < this.particleGeom.vertices.length; b++) {
                    var e = this.particleGeom.vertices[b];
                    e.set(e.x + e.vx, e.y + e.vy, e.z + e.vz), e.x > 5e3 && (e.x = -5e3), e.x < -5e3 && (e.x = 5e3), e.y > 5e3 && (e.y = -2e3), e.y < -2e3 && (e.y = 5e3), e.z > -1500 && (e.z = -8e3), e.z < -8e3 && (e.z = -1500)
                }
                this.particleGeom.verticesNeedUpdate = !0, this.bg.material.opacity = this._bgInOpacity, this.time++
            }
        }, i.disposeGL = function() {
            this.rootObject.remove(this.bg.mesh), this.rootObject.remove(this.haze.mesh), this.bg.dispose(), this.haze.dispose(), this.particleMaterial.dispose(), this.particleTexture.dispose(), this.particleGeom.dispose(), this.rootObject.remove(this.particles), this.particleMaterial = null, this.particleTexture = null, this.particleGeom = null, this.particles = null, this.bg = null, this.haze = null, this.Splash_disposeGL()
        }, a.promote(h, "Splash"), h
    }), define("theboat/058maifeverbreaks/MaiFeverBreaksSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random", "math/Interpolation", "math/ArmyKnife"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b), this.time = 0, this._whiteMatteOpacity = 0
            },
            g = a.extend(f, e);
        return Object.defineProperties(g, {
            whiteMatteOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._whiteMatteOpacity = a
                },
                get: function() {
                    return this._whiteMatteOpacity
                }
            }
        }), g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.bg = new d("images/058-mai-fever-breaks/bg.png", 1634, 1272, 1.4), this.bg.mesh.position.z = -800, this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.mai = new d("images/058-mai-fever-breaks/mai.png", 656, 849, 1.3), this.mai.mesh.position.x = 100, this.mai.mesh.position.y = -100, this.mai.mesh.position.z = -300, this.rootObject.add(this.mai.mesh), this.loadQueue.add(this.mai), this.kaboom = new d("images/058-mai-fever-breaks/kaboom.png", 1514, 1024, 1.1), this.kaboom.mesh.position.x = 50, this.kaboom.mesh.position.y = 0, this.kaboom.mesh.position.z = -500, this.rootObject.add(this.kaboom.mesh), this.loadQueue.add(this.kaboom), this.whiteMattePlane = new b.PlaneBufferGeometry(2e4, 8e4), this.whiteMatteMaterial = new b.MeshBasicMaterial({
                color: 16777215
            }), this.whiteMatte = new b.Mesh(this.whiteMattePlane, this.whiteMatteMaterial), this.whiteMatteMaterial.transparent = !0, this.whiteMatte.position.z = -1350, this.rootObject.add(this.whiteMatte), this.bg.material.opacity = 0, this.mai.material.opacity = 0, this.kaboom.material.opacity = 0, this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.rootObject.remove(this.bg.mesh), this.rootObject.remove(this.mai.mesh), this.rootObject.remove(this.kaboom.mesh), this.rootObject.remove(this.whiteMatte), this.bg.dispose(), this.mai.dispose(), this.kaboom.dispose(), this.whiteMatteMaterial.dispose(), this.whiteMattePlane.dispose(), this.bg = null, this.mai = null, this.kaboom = null, this.whiteMatteMaterial = null, this.whiteMattePlane = null, this.Splash_disposeGL()
        }, g.transitionIn = function() {
            if (!this.transitionedIn) {
                this.timeline = new TimelineMax;
                var a = (RoughEase.ease.config({
                    strength: 3,
                    template: Power4.easeOut,
                    taper: "out",
                    randomize: !1
                }), RoughEase.ease.config({
                    strength: .5,
                    points: 120,
                    template: Power4.easeOut,
                    taper: "out",
                    randomize: !0
                }));
                this.timeline.add(TweenMax.from(this.bg.mesh.position, 1, {
                    ease: a,
                    z: -5e3
                }), 0), this.timeline.add(TweenMax.to(this.bg.material, .3, {
                    opacity: 1
                }), 0), this.timeline.add(TweenMax.from(this.mai.mesh.position, 1, {
                    ease: a,
                    z: -1e3
                }), .4), this.timeline.add(TweenMax.to(this.mai.material, .3, {
                    opacity: 1
                }), .4), this.timeline.add(TweenMax.from(this.kaboom.mesh.position, 1, {
                    ease: a,
                    z: -3e3
                }), .2), this.timeline.add(TweenMax.to(this.kaboom.material, .3, {
                    opacity: 1
                }), .2), this.transitionedIn = !0
            }
        }, g.update = function() {
            this.Splash_update(), this.active && (this.whiteMatteMaterial.opacity = this._whiteMatteOpacity, this.time++)
        }, a.promote(f, "Splash"), f
    }), define("theboat/060batroung/BaTroungSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b), this.time = 0
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.running = new d("images/060-ba-troung/01.png", 620, 619, 1.2), this.running.mesh.position.z = -300, this.rootObject.add(this.running.mesh), this.loadQueue.add(this.running), this.troung = new d("images/060-ba-troung/troung.png", 467, 1449, 1), this.troung.mesh.position.y = -2100, this.rootObject.add(this.troung.mesh), this.loadQueue.add(this.troung), this.mainTrip = new d("images/060-ba-troung/main-trip.png", 568, 1236, 1), this.mainTrip.mesh.position.z = -100, this.mainTrip.mesh.position.y = -800, this.rootObject.add(this.mainTrip.mesh), this.loadQueue.add(this.mainTrip), this.sideTrip = new d("images/060-ba-troung/side-trip.png", 815, 773, 1), this.sideTrip.mesh.position.z = -200, this.sideTrip.mesh.position.x = -50, this.sideTrip.mesh.position.y = -800, this.rootObject.add(this.sideTrip.mesh), this.loadQueue.add(this.sideTrip), this.sideTrip2 = new d("images/060-ba-troung/side-trip.png", 815, 773, 3), this.sideTrip2.mesh.position.z = -700, this.sideTrip2.mesh.position.x = -50, this.sideTrip2.mesh.position.y = -800, this.rootObject.add(this.sideTrip2.mesh), this.loadQueue.add(this.sideTrip2), this.troung.material.opacity = 0, this.mainTrip.material.opacity = 0, this.sideTrip.material.opacity = 0, this.sideTrip2.material.opacity = .03, this.images = [], this.lookup = [{
                img: "images/060-ba-troung/02.png",
                width: 364,
                height: 481,
                x: 540,
                y: -320,
                z: -108,
                scale: .7,
                inOpacity: 0,
                opacity: .27
            }, {
                img: "images/060-ba-troung/03.png",
                width: 448,
                height: 399,
                x: -450,
                y: -420,
                z: -303,
                scale: .3,
                inOpacity: 0,
                opacity: .16
            }, {
                img: "images/060-ba-troung/04.png",
                width: 493,
                height: 454,
                x: 700,
                y: -620,
                z: -105,
                scale: .5,
                inOpacity: 0,
                opacity: .19
            }, {
                img: "images/060-ba-troung/05.png",
                width: 358,
                height: 459,
                x: -390,
                y: -950,
                z: -305,
                scale: .3,
                inOpacity: 0,
                opacity: .27
            }, {
                img: "images/060-ba-troung/06.png",
                width: 312,
                height: 443,
                x: 420,
                y: -1e3,
                z: -100,
                scale: .3,
                inOpacity: 0,
                opacity: .3
            }, {
                img: "images/060-ba-troung/07.png",
                width: 319,
                height: 465,
                x: 570,
                y: -1230,
                z: -310,
                scale: .5,
                inOpacity: 0,
                opacity: .14
            }];
            for (var a = 0; a < this.lookup.length; a++) {
                var b = this.lookup[a],
                    c = new d(b.img, b.width, b.height, b.scale, {
                        widthSegments: 1,
                        heightSegments: 1,
                        bufferGeometry: !1
                    });
                c.mesh.position.x = b.x, c.mesh.position.y = b.y, c.mesh.position.z = b.z, c.material.opacity = b.inOpacity, this.rootObject.add(c.mesh), this.loadQueue.add(c), this.images.push(c)
            }
            this.objectGL.add(this.rootObject)
        }, g.transitionIn = function() {
            var a = new TimelineMax;
            a.add(TweenMax.to(this.mainTrip.material, 2, {
                opacity: 1
            }), 0), a.add(TweenMax.to(this.sideTrip.material, 2, {
                opacity: 1
            }), .75), a.add(TweenMax.to(this.troung.material, 2, {
                opacity: 1
            }), 1.5);
            for (var b = 0; b < this.images.length; b++) {
                var c = this.images[b],
                    d = this.lookup[b],
                    e = .25 * b;
                a.add(TweenMax.to(c.material, 4, {
                    opacity: d.opacity
                }), e)
            }
        }, g.update = function() {
            if (this.Splash_update(), this.active) {
                this.time++;
                for (var a = 0; a < this.images.length; a++) {
                    var b = this.images[a],
                        c = this.lookup[a],
                        d = Math.sqrt(c.x * c.x + c.z * c.z),
                        e = Math.atan2(b.mesh.position.z, b.mesh.position.x);
                    e += .0025, b.mesh.position.z = Math.sin(e) * d, b.mesh.position.x = Math.cos(e) * d
                }
            }
        }, g.disposeGL = function() {
            this.rootObject.remove(this.running.mesh), this.rootObject.remove(this.troung.mesh), this.rootObject.remove(this.sideTrip.mesh), this.rootObject.remove(this.sideTrip2.mesh), this.running.dispose(), this.troung.dispose(), this.sideTrip.dispose(), this.sideTrip2.dispose();
            for (var a = 0; a < this.images.length; a++) {
                var b = this.images[a];
                this.rootObject.remove(b.mesh), b.dispose()
            }
            this.images = null, this.running = null, this.troung = null, this.sideTrip = null, this.sideTrip2 = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/063troungshadow/TroungShadowSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.troung = new d("images/063-troung-shadow/troung.png", 659, 656, 1), this.troung.mesh.position.x = 50, this.troung.mesh.position.z = -300, this.rootObject.add(this.troung.mesh), this.loadQueue.add(this.troung), this.shadow = new d("images/063-troung-shadow/crane-shadow.png", 1785, 939, 1), this.shadow.mesh.position.x = 50, this.shadow.mesh.position.z = -500, this.rootObject.add(this.shadow.mesh), this.loadQueue.add(this.shadow), this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.rootObject.remove(this.troung.mesh), this.rootObject.remove(this.shadow.mesh), this.troung.dispose(), this.shadow.dispose(), this.troung = null, this.shadow = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/068troungcrane/TroungCraneSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b), this.time = 0
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.troung = new d("images/068-troung-crane/bg.png", 831, 1587, 1.3), this.troung.mesh.position.x = 50, this.troung.mesh.position.z = -300, this.rootObject.add(this.troung.mesh), this.loadQueue.add(this.troung), this.hook = new d("images/068-troung-crane/crane-hook.png", 142, 939, 1.3), this.loadQueue.add(this.hook), this.hookContainer = new b.Object3D, this.hookContainer.add(this.hook.mesh), this.hook.mesh.position.y = -550, this.hookContainer.position.x = -280, this.hookContainer.position.y = 650, this.hookContainer.position.z = -200, this.rootObject.add(this.hookContainer), this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.rootObject.remove(this.troung.mesh), this.rootObject.remove(this.hookContainer), this.hookContainer.remove(this.hook.mesh), this.troung.dispose(), this.hook.dispose(), this.troung = null, this.hook = null, this.hookContainer = null, this.Splash_disposeGL()
        }, g.update = function() {
            this.Splash_update(), this.active && (this.time++, this.hookContainer.rotation.z = .05 * Math.sin(.02 * this.time))
        }, a.promote(f, "Splash"), f
    }), define("theboat/071punch/PunchSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.mai = new d("images/071-punch/mai.png", 862, 557, 1.2), this.mai.mesh.position.x = -600, this.mai.mesh.position.y = -100, this.mai.mesh.position.z = -300, this.rootObject.add(this.mai.mesh), this.loadQueue.add(this.mai), this.fist = new d("images/071-punch/fist.png", 756, 282, 1), this.fist.mesh.position.x = 0, this.fist.mesh.position.y = -50, this.fist.mesh.position.z = -100, this.fist.mesh.rotation.y = -.3, this.fist.mesh.rotation.z = .7, this.rootObject.add(this.fist.mesh), this.loadQueue.add(this.fist), this.bottle = new d("images/071-punch/bottle.png", 350, 373, 1), this.bottle.mesh.position.x = 380, this.bottle.mesh.position.y = 300, this.bottle.mesh.position.z = 0, this.bottle.mesh.rotation.y = 0, this.rootObject.add(this.bottle.mesh), this.loadQueue.add(this.bottle), this.kaboom = new d("images/071-punch/kaboom.png", 839, 520, 1.2), this.kaboom.mesh.position.x = 200, this.kaboom.mesh.position.y = 0, this.kaboom.mesh.position.z = -200, this.rootObject.add(this.kaboom.mesh), this.loadQueue.add(this.kaboom), this.frame1 = new d("images/071-punch/01.png", 472, 450, 1), this.frame1.mesh.position.x = 380, this.frame1.mesh.position.y = 300, this.frame1.mesh.position.z = -1, this.rootObject.add(this.frame1.mesh), this.loadQueue.add(this.frame1), this.frame2 = new d("images/071-punch/02.png", 323, 323, .6), this.frame2.mesh.position.x = 570, this.frame2.mesh.position.y = 150, this.frame2.mesh.position.z = 150, this.rootObject.add(this.frame2.mesh), this.loadQueue.add(this.frame2), this.frame3 = new d("images/071-punch/03.png", 323, 323, .6), this.frame3.mesh.position.x = 570, this.frame3.mesh.position.y = -100, this.frame3.mesh.position.z = 150, this.rootObject.add(this.frame3.mesh), this.loadQueue.add(this.frame3), this.frame4 = new d("images/071-punch/04.png", 323, 323, .6), this.frame4.mesh.position.x = 570, this.frame4.mesh.position.y = -350, this.frame4.mesh.position.z = 150, this.rootObject.add(this.frame4.mesh), this.loadQueue.add(this.frame4), this.mai.material.opacity = this.fist.material.opacity = this.bottle.material.opacity = this.kaboom.material.opacity = this.frame1.material.opacity = this.frame2.material.opacity = this.frame3.material.opacity = this.frame4.material.opacity = 0, this.objectGL.add(this.rootObject)
        }, g.update = function() {}, g.transitionIn = function() {
            if (!this.transitionedIn) {
                this.timeline = new TimelineMax;
                var a = RoughEase.ease.config({
                    strength: .4,
                    template: Quint.easeOut,
                    taper: "out",
                    randomize: !1
                });
                this.timeline.add(TweenMax.from(this.fist.mesh.rotation, .3, {
                    z: -.5
                }), 0), this.timeline.add(TweenMax.from(this.fist.mesh.position, .2, {
                    x: 500,
                    y: 100
                }), 0), this.timeline.add(TweenMax.to(this.fist.material, .3, {
                    opacity: 1
                }), 0), this.timeline.add(TweenMax.to(this.fist.mesh.rotation, .5, {
                    y: 0,
                    z: .5
                }), .2), this.timeline.add(TweenMax.from(this.mai.mesh.position, .5, {
                    ease: a,
                    x: -300
                }), .15), this.timeline.add(TweenMax.to(this.mai.material, .3, {
                    opacity: 1
                }), .15), this.timeline.add(TweenMax.from(this.kaboom.mesh.position, .2, {
                    x: 150
                }), .15), this.timeline.add(TweenMax.to(this.kaboom.material, .1, {
                    opacity: 1
                }), .15), this.timeline.add(TweenMax.from(this.rootObject.rotation, 1.5, {
                    ease: Power4.easeOut,
                    y: -.2,
                    x: .3,
                    z: .3
                }), .15), this.timeline.add(TweenMax.from(this.bottle.mesh.position, 1, {
                    ease: Power4.easeOut,
                    x: -100,
                    y: 250
                }), .2), this.timeline.add(TweenMax.from(this.bottle.mesh.rotation, 1.5, {
                    ease: Power4.easeOut,
                    z: 2
                }), .2), this.timeline.add(TweenMax.to(this.bottle.material, .1, {
                    opacity: 1
                }), .2), this.timeline.add(TweenMax.to(this.frame1.material, 2, {
                    opacity: 1
                }), 1), this.timeline.add(TweenMax.from(this.frame2.mesh.position, 6, {
                    ease: Power4.easeOut,
                    y: 200
                }), 1.5), this.timeline.add(TweenMax.to(this.frame2.material, 2, {
                    opacity: 1
                }), 1.5), this.timeline.add(TweenMax.from(this.frame3.mesh.position, 4, {
                    ease: Power4.easeOut,
                    y: -50
                }), 2), this.timeline.add(TweenMax.to(this.frame3.material, 2, {
                    opacity: 1
                }), 2), this.timeline.add(TweenMax.from(this.frame4.mesh.position, 2, {
                    ease: Power4.easeOut,
                    y: -300
                }), 2.5), this.timeline.add(TweenMax.to(this.frame4.material, 2, {
                    opacity: 1
                }), 2.5), this.transitionedIn = !0
            }
        }, g.disposeGL = function() {
            this.rootObject.remove(this.mai.mesh), this.rootObject.remove(this.fist.mesh), this.rootObject.remove(this.bottle.mesh), this.rootObject.remove(this.kaboom.mesh), this.rootObject.remove(this.frame1.mesh), this.rootObject.remove(this.frame2.mesh), this.rootObject.remove(this.frame3.mesh), this.rootObject.remove(this.frame4.mesh), this.mai.dispose(), this.fist.dispose(), this.bottle.dispose(), this.kaboom.dispose(), this.frame1.dispose(), this.frame2.dispose(), this.frame3.dispose(), this.frame4.dispose(), this.mai = null, this.fist = null, this.bottle = null, this.kaboom = null, this.frame1 = null, this.frame2 = null, this.frame3 = null, this.frame4 = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/072notacloud/NotACloudSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/ChunkedImage", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e, f, g) {
        var h = function(a, b) {
                this.Splash_constructor(a, b), this._whiteMatteOpacity = 0
            },
            i = a.extend(h, f);
        return Object.defineProperties(i, {
            whiteMatteOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._whiteMatteOpacity = a
                },
                get: function() {
                    return this._whiteMatteOpacity
                }
            }
        }), i.createCSS = function() {
            this.Splash_createCSS()
        }, i.createGL = function() {
            this.Splash_createGL(), this.deck1 = new e("images/072-not-a-cloud/deck-01.png", 3150, 1470, 2.4), this.deck1.mesh.position.z = -2e3, this.rootObject.add(this.deck1.mesh), this.loadQueue.add(this.deck1), this.glare = new d("images/072-not-a-cloud/glare.png", 2340, 1108, 2.4), this.glare.mesh.position.z = -1500, this.rootObject.add(this.glare.mesh), this.loadQueue.add(this.glare), this.blackMattePlane = new b.PlaneBufferGeometry(2e4, 1e4), this.blackMatteMaterial = new b.MeshBasicMaterial({
                color: 0
            }), this.blackMatte = new b.Mesh(this.blackMattePlane, this.blackMatteMaterial), this.blackMatte.position.x = 0, this.blackMatte.position.y = -5500, this.blackMatte.position.z = -2500, this.rootObject.add(this.blackMatte), this.whiteMattePlane = new b.PlaneBufferGeometry(2e4, 1e4), this.whiteMatteMaterial = new b.MeshBasicMaterial({
                color: 16777215
            }), this.whiteMatte = new b.Mesh(this.whiteMattePlane, this.whiteMatteMaterial), this.whiteMatteMaterial.transparent = !0, this.whiteMatte.position.x = 0, this.whiteMatte.position.y = -5500, this.whiteMatte.position.z = -1100, this.whiteMatteMaterial.opacity = 0, this.rootObject.add(this.whiteMatte), this.objectGL.add(this.rootObject)
        }, i.disposeGL = function() {
            this.rootObject.remove(this.blackMatte), this.rootObject.remove(this.whiteMatte), this.rootObject.remove(this.deck1.mesh), this.rootObject.remove(this.glare.mesh), this.blackMatteMaterial.dispose(), this.blackMattePlane.dispose(), this.whiteMatteMaterial.dispose(), this.whiteMattePlane.dispose(), this.deck1.dispose(), this.glare.dispose(), this.blackMatte = null, this.blackMatteMaterial = null, this.blackMattePlane = null, this.whiteMatte = null, this.whiteMatteMaterial = null, this.whiteMattePlane = null, this.deck1 = null, this.glare = null, this.Splash_disposeGL()
        }, i.update = function() {
            this.Splash_update(), this.active && (this.whiteMatteMaterial.opacity = this._whiteMatteOpacity, this.glare.material.opacity = g.between(.85, 1))
        }, a.promote(h, "Splash"), h
    }), define("theboat/075derrickcrane/DerrickCraneSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.bg = new d("images/075-derrick-crane/bg.png", 1635, 1067, 1.2), this.bg.mesh.position.z = -400, this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.rootObject.remove(this.bg.mesh), this.bg.dispose(), this.bg = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/076belowdeck/BelowDeckSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b), this._blackMatteInOpacity = 0, this._blackMatteOutOpacity = 1, this.usePreloader = !1
            },
            g = a.extend(f, e);
        return Object.defineProperties(g, {
            blackMatteInOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._blackMatteInOpacity = a
                },
                get: function() {
                    return this._blackMatteInOpacity
                }
            },
            blackMatteOutOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._blackMatteOutOpacity = a
                },
                get: function() {
                    return this._blackMatteOutOpacity
                }
            }
        }), g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.blackMattePlane = new b.PlaneBufferGeometry(8e3, 8e4), this.blackMatteMaterial = new b.MeshBasicMaterial({
                color: 0
            }), this.blackMatte = new b.Mesh(this.blackMattePlane, this.blackMatteMaterial), this.blackMatteMaterial.transparent = !0, this.blackMatte.position.z = -1e3, this.rootObject.add(this.blackMatte), this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.rootObject.remove(this.blackMatte), this.blackMatteMaterial.dispose(), this.blackMattePlane.dispose(), this.blackMatteMaterial = null, this.blackMattePlane = null, this.blackMatte = null, this.Splash_disposeGL()
        }, g.update = function() {
            this.Splash_update(), this.active && (this.blackMatteMaterial.opacity = this._blackMatteInOpacity * this._blackMatteOutOpacity)
        }, a.promote(f, "Splash"), f
    }), define("theboat/080troungfever/TroungFeverSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Color", "utils/Random"], function(a, b, c, d, e, f, g) {
        var h = function(a, b) {
                this.Splash_constructor(a, b), this._bgInOpacity = 1, this._bgOutOpacity = 0
            },
            i = a.extend(h, e);
        return Object.defineProperties(i, {
            bgInOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgInOpacity = a
                },
                get: function() {
                    return this._bgInOpacity
                }
            },
            bgOutOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgOutOpacity = a
                },
                get: function() {
                    return this._bgOutOpacity
                }
            }
        }), i.createCSS = function() {
            this.Splash_createCSS()
        }, i.createGL = function() {
            this.Splash_createGL(), this.time = 0, this.baseColor = f.fromInt(16728873), this.bg = new d("images/080-troung-fever/bg-pot.jpg", 6144, 4096, 6, {
                widthSegments: 10,
                heightSegments: 5,
                bufferGeometry: !1
            }), this.bg.mesh.position.z = -8e3, this.bg.texture.wrapS = b.RepeatWrapping, this.bg.texture.repeat.x = 3, this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.bg.mesh.geometry.dynamic = !0, this.maiTroung = new d("images/080-troung-fever/mai-troung-alt.png", 856, 969), this.maiTroung.mesh.position.y = -1050, this.rootObject.add(this.maiTroung.mesh), this.loadQueue.add(this.maiTroung), this.haze = new d("images/054-mai-fever/haze.png", 8e3, 9e3), this.haze.mesh.position.z = -1100, this.haze.texture.wrapS = b.RepeatWrapping, this.haze.texture.wrapT = b.RepeatWrapping, this.haze.texture.repeat.x = 5, this.haze.texture.repeat.y = 5, this.haze.material.opacity = .55, this.rootObject.add(this.haze.mesh), this.loadQueue.add(this.haze), this.particleTexture = b.ImageUtils.loadTexture("images/054-mai-fever-alt/particle-01.png"), this.particleMaterial = new b.PointCloudMaterial({
                size: 600,
                map: this.particleTexture,
                transparent: !0,
                depthTest: !1
            }), this.particleGeom = new b.Geometry;
            for (var a = 0; 50 > a; a++) {
                var c = new b.Vector3(g.between(-5e3, 5e3), g.between(-2e3, 5e3), g.between(-6500, 6500));
                c.vx = g.between(-10, 10), c.vy = g.between(-5, 5), c.vz = g.between(-10, 10), this.particleGeom.vertices.push(c)
            }
            this.particles = new b.PointCloud(this.particleGeom, this.particleMaterial), this.rootObject.add(this.particles), this.objectGL.add(this.rootObject)
        }, i.update = function() {
            if (this.active) {
                this.bg.material.opacity = this._bgInOpacity * this._bgOutOpacity;
                for (var a = this.bg.mesh.geometry.vertices, b = 0; b < a.length; b++) {
                    var c = a[b],
                        d = this.time + 7.7 * b;
                    c.x += 10 * Math.sin(.01 * d), c.y += 8 * Math.sin(.005 * d)
                }
                this.bg.mesh.needsUpdate = !0, this.bg.mesh.geometry.verticesNeedUpdate = !0, this.bg.texture.offset.x += 5e-4, this.haze.texture.offset.x = .6 * Math.sin(.01 * this.time) + .8 * Math.sin(.005 * this.time), this.haze.texture.offset.y = .5 * Math.sin(.02 * this.time) + .9 * Math.sin(.003 * this.time), this.haze.material.opacity = g.between(.025, .065), Math.random() > .99 && (this.haze.material.opacity = .6);
                for (var b = 0; b < this.particleGeom.vertices.length; b++) {
                    var e = this.particleGeom.vertices[b];
                    e.set(e.x + e.vx, e.y + e.vy, e.z + e.vz), e.x > 5e3 && (e.x = -5e3), e.x < -5e3 && (e.x = 5e3), e.y > 4e3 && (e.y = -4e3), e.y < -4e3 && (e.y = 4e3), e.z > -1200 && (e.z = -6500), e.z < -6500 && (e.z = -1200)
                }
                this.particleGeom.verticesNeedUpdate = !0, this.particleMaterial.opacity = this.bg.material.opacity, this.time++
            }
        }, i.disposeGL = function() {
            this.rootObject.remove(this.bg.mesh), this.rootObject.remove(this.haze.mesh), this.bg.dispose(), this.haze.dispose(), this.particleMaterial.dispose(), this.particleTexture.dispose(), this.particleGeom.dispose(), this.rootObject.remove(this.particles), this.particleMaterial = null, this.particleTexture = null, this.particleGeom = null, this.particles = null, this.bg = null, this.haze = null, this.Splash_disposeGL()
        }, a.promote(h, "Splash"), h
    }), define("theboat/082iwanttogoup/IWantToGoUpSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.running = new d("images/082-i-want-to-go-up/bg.png", 1544, 800, 1), this.running.mesh.position.z = 0, this.rootObject.add(this.running.mesh), this.loadQueue.add(this.running), this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.rootObject.remove(this.running.mesh), this.running.dispose(), this.running = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/082deck/DeckSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b), this._bgInOpacity = 0, this._bgOutOpacity = 1
            },
            g = a.extend(f, e);
        return Object.defineProperties(g, {
            bgInOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgInOpacity = a
                },
                get: function() {
                    return this._bgInOpacity
                }
            },
            bgOutOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgOutOpacity = a
                },
                get: function() {
                    return this._bgOutOpacity
                }
            }
        }), g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.bg = new d("images/082-deck/bg.jpg", 1444, 1085, 2.5), this.bg.mesh.position.z = -1400, this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.rootObject.remove(this.bg.mesh), this.bg.dispose(), this.bg = null, this.Splash_disposeGL()
        }, g.update = function() {
            this.Splash_update(), this.active && (this.bg.material.opacity = this._bgInOpacity * this._bgOutOpacity)
        }, a.promote(f, "Splash"), f
    }), define("theboat/083troungface/TroungFaceSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b), this._bgInOpacity = 0, this._bgMidOpacity = 1, this._bgOutOpacity = 1
            },
            g = a.extend(f, e);
        return Object.defineProperties(g, {
            bgInOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgInOpacity = a
                },
                get: function() {
                    return this._bgInOpacity
                }
            },
            bgMidOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgMidOpacity = a
                },
                get: function() {
                    return this._bgMidOpacity
                }
            },
            bgOutOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgOutOpacity = a
                },
                get: function() {
                    return this._bgOutOpacity
                }
            }
        }), g.createGL = function() {
            this.Splash_createGL(), this.bg = new d("images/083-troung-face/bg.jpg", 1982, 1384, 1.85), this.bg.mesh.position.z = -1500, this.bg.mesh.position.y = -500, this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.frame1 = new d("images/083-troung-face/01.png", 460, 453, .9), this.frame1.mesh.position.x = -510, this.frame1.mesh.position.y = -1300, this.rootObject.add(this.frame1.mesh), this.loadQueue.add(this.frame1), this.frame2 = new d("images/083-troung-face/02.png", 391, 368, .9), this.frame2.mesh.position.x = 100, this.frame2.mesh.position.y = -800, this.rootObject.add(this.frame2.mesh), this.loadQueue.add(this.frame2), this.frame3 = new d("images/083-troung-face/03.png", 468, 493, .9), this.frame3.mesh.position.x = 510, this.frame3.mesh.position.y = -1050, this.rootObject.add(this.frame3.mesh), this.loadQueue.add(this.frame3), this.frame1.material.opacity = 0, this.frame2.material.opacity = 0, this.frame3.material.opacity = 0, this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.timeline && this.timeline.kill(), this.rootObject.remove(this.bg.mesh), this.rootObject.remove(this.frame1.mesh), this.rootObject.remove(this.frame2.mesh), this.rootObject.remove(this.frame3.mesh), this.bg.dispose(), this.frame1.dispose(), this.frame2.dispose(), this.frame3.dispose(), this.bg = null, this.frame1 = null, this.frame2 = null, this.frame3 = null, this.Splash_disposeGL()
        }, g.transitionIn = function() {
            this.timeline = new TimelineMax, this.timeline.add(TweenMax.to(this.frame1.material, 1, {
                opacity: 1
            }), 0), this.timeline.add(TweenMax.to(this.frame2.material, 1, {
                opacity: 1
            }), .75), this.timeline.add(TweenMax.to(this.frame3.material, 1, {
                opacity: 1
            }), 1.5)
        }, g.update = function() {
            this.Splash_update(), this.active && (this.bg.material.opacity = this._bgInOpacity * this._bgMidOpacity * this._bgOutOpacity)
        }, a.promote(f, "Splash"), f
    }), define("theboat/085hatch/HatchSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random", "math/ArmyKnife", "math/Interpolation"], function(a, b, c, d, e, f, g, h) {
        var i = function(a, b) {
                this.Splash_constructor(a, b), this._bgInOpacity = 0, this._bgOutOpacity = 1, this._boatPosition = 0, this.time = 0
            },
            j = a.extend(i, e);
        return Object.defineProperties(j, {
            bgInOpacity: {
                set: function(a) {
                    this.hasOpenedHatch || (a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgInOpacity = a)
                },
                get: function() {
                    return this._bgInOpacity
                }
            },
            bgOutOpacity: {
                set: function(a) {
                    this.hasOpenedHatch && (a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgOutOpacity = a)
                },
                get: function() {
                    return this._bgOutOpacity
                }
            },
            boatPosition: {
                set: function(a) {
                    this.hasOpenedHatch || (a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._boatPosition = a)
                },
                get: function() {
                    return this._boatPosition
                }
            }
        }), j.createGL = function() {
            this.Splash_createGL(), this.boat = new b.Object3D, this.rootObject.add(this.boat), this.bg = new d("images/085-hatch/bg.jpg", 1198, 2179, 8), this.boat.add(this.bg.mesh), this.loadQueue.add(this.bg), this.hatch = new d("images/085-hatch/hatch.png", 281, 229, 9.5), this.hatch.mesh.position.x = 650, this.hatch.mesh.position.y = 4700, this.hatch.mesh.position.z = 500, this.loadQueue.add(this.hatch), this.objectGL.add(this.rootObject)
        }, j.disposeGL = function() {
            this.timeline && this.timeline.kill(), this.rootObject.remove(this.bg.mesh), this.rootObject.remove(this.boat), this.rootObject.remove(this.hatch.mesh), this.bg.dispose(), this.hatch.dispose(), this.bg = null, this.boat = null, this.hatch = null, this.Splash_disposeGL()
        }, j.openHatch = function() {
            if (!this.hasOpenedHatch) {
                this.hasOpenedHatch = !0, this.boat.add(this.hatch.mesh), this.rootObject.rotation.z = -.1, this.rootObject.position.z = 4e3;
                var a = RoughEase.ease.config({
                    strength: .7,
                    points: 150,
                    template: Power4.easeOut,
                    taper: "out",
                    randomize: !1
                });
                this.timeline = new TimelineMax, this.timeline.add(TweenMax.to(this.rootObject.position, 1, {
                    ease: a,
                    z: 6e3
                }), 0), this.timeline.add(TweenMax.to(this.rootObject.rotation, 1, {
                    ease: Back.easeOut,
                    z: 0
                }), 0)
            }
        }, j.update = function() {
            if (this.Splash_update(), this.active) {
                this.bg.material.opacity = this._bgInOpacity * this._bgOutOpacity;
                var a = g.map(this._boatPosition, 0, 1, 3e3, -1e4, !1, !1, !1),
                    b = g.map(this._boatPosition, 0, 1, -25e3, -13e3, !1, !1, !1);
                this.boat.position.y = h.lerp(this.boat.position.y, a, .7), this.boat.position.z = h.lerp(this.boat.position.z, b, .7), this.boat.position.y += 100 * Math.sin(.02 * this.time), this.time++
            }
        }, a.promote(i, "Splash"), i
    }), define("theboat/092scream/ScreamSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.bg = new d("images/092-scream/bg.jpg", 1452, 458, 1.2), this.bg.mesh.position.z = -300, this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.aaaa = new d("images/092-scream/aaaa.png", 828, 246, 1), this.aaaa.mesh.position.x = -340, this.aaaa.mesh.position.y = 150, this.aaaa.mesh.position.z = 400, this.aaaa.mesh.rotation.y = .85, this.rootObject.add(this.aaaa.mesh), this.loadQueue.add(this.aaaa), this.iiii = new d("images/092-scream/iiii.png", 498, 157, 1), this.iiii.mesh.position.x = 450, this.iiii.mesh.position.y = 100, this.iiii.mesh.position.z = 400, this.iiii.mesh.rotation.y = -.85, this.rootObject.add(this.iiii.mesh), this.loadQueue.add(this.iiii), this.aaaa.material.opacity = 0, this.iiii.material.opacity = 0, this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.rootObject.remove(this.bg.mesh), this.rootObject.remove(this.aaaa.mesh), this.rootObject.remove(this.iiii.mesh), this.bg.dispose(), this.aaaa.dispose(), this.iiii.dispose(), this.bg = null, this.aaaa = null, this.iiii = null, this.Splash_disposeGL()
        }, g.scream = function() {
            if (!this.screamed) {
                this.timeline = new TimelineMax;
                var a = RoughEase.ease.config({
                    strength: .55,
                    template: Back.easeOut,
                    taper: "out",
                    randomize: !1
                });
                this.timeline.add(TweenMax.from(this.aaaa.mesh.rotation, 1, {
                    ease: a,
                    y: .6,
                    x: .2,
                    z: -.2
                }), 0), this.timeline.add(TweenMax.from(this.aaaa.mesh.position, 1, {
                    ease: Back.easeOut,
                    y: 75
                }), 0), this.timeline.add(TweenMax.to(this.aaaa.material, .6, {
                    opacity: 1
                }), 0), this.timeline.add(TweenMax.from(this.iiii.mesh.rotation, 1, {
                    ease: a,
                    y: -.6,
                    x: .2,
                    z: .2
                }), .4), this.timeline.add(TweenMax.from(this.iiii.mesh.position, 1, {
                    ease: Back.easeOut,
                    y: 75
                }), .4), this.timeline.add(TweenMax.to(this.iiii.material, .6, {
                    opacity: 1
                }), .4), this.timeline.add(TweenMax.to(this.rootObject.position, .75, {
                    ease: Power4.easeOut,
                    z: -300
                }), 0), this.timeline.add(TweenMax.to(this.rootObject.position, 1, {
                    ease: Power4.easeInOut,
                    z: 0
                }), .75), this.screamed = !0
            }
        }, g.update = function() {}, a.promote(f, "Splash"), f
    }), define("theboat/FeverImage", ["utils/inherit", "comic/ComicMetrics", "comic/display/Image", "utils/Random", "audio/Thump", "modernizr", "tweenMax"], function(a, b, c) {
        var d = function(a, b, c, d, e) {
                e = e || {}, e.widthSegments = 4, e.heightSegments = 4, e.bufferGeometry = !1, this.time = 0, this.xt = e.xt || .03 * Math.random(), this.xd = e.xd || .15 * Math.random() + .1, this.yt = e.yt || .03 * Math.random(), this.yd = e.yd || .15 * Math.random() + .1, this.Image_constructor(a, b, c, d, e)
            },
            e = a.extend(d, c);
        return e.update = function() {
            for (var a = this.mesh.geometry.vertices, b = 0; b < a.length; b++) {
                var c = a[b],
                    d = this.time + 7.7 * b;
                c.x += Math.sin(d * this.xt) * this.xd, c.y += Math.sin(d * this.yt) * this.yd
            }
            this.mesh.needsUpdate = !0, this.mesh.geometry.verticesNeedUpdate = !0, this.time++
        }, a.promote(d, "Image"), d
    }), define("theboat/094thatafternoon/ThatAfternoonSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "theboat/FeverImage", "comic/display/Splash", "utils/Random", "math/ArmyKnife"], function(a, b, c, d, e, f, g, h) {
        var i = function(a, b) {
                this.Splash_constructor(a, b), this._bodyPosition = 0, this.time = 0
            },
            j = a.extend(i, f);
        return Object.defineProperties(j, {
            bodyPosition: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bodyPosition = a
                },
                get: function() {
                    return this._bodyPosition
                }
            }
        }), j.createCSS = function() {
            this.Splash_createCSS()
        }, j.createGL = function() {
            this.Splash_createGL(), this.image1 = new e("images/094-that-afternoon/01.png", 1523, 1007, 1, {
                xt: .1,
                yt: .01,
                xd: .1,
                yd: .2
            }), this.image1.mesh.position.y = 0, this.image1.mesh.position.z = -500, this.rootObject.add(this.image1.mesh), this.loadQueue.add(this.image1), this.image2 = new e("images/094-that-afternoon/02.png", 1530, 813, 1.1, {
                xt: .05,
                yt: .01,
                xd: .2,
                yd: .1
            }), this.image2.mesh.position.y = -1e3, this.image2.mesh.position.z = -1e3, this.rootObject.add(this.image2.mesh), this.loadQueue.add(this.image2), this.image3 = new e("images/094-that-afternoon/03.png", 1045, 642, 1.3, {
                xt: .01,
                yt: .05,
                xd: .1,
                yd: .2
            }), this.image3.mesh.position.y = -2e3, this.image3.mesh.position.z = -1500, this.rootObject.add(this.image3.mesh), this.loadQueue.add(this.image3), this.body = new b.Object3D, this.leftArmImage = new d("images/094-that-afternoon/left-arm.png", 177, 140, 1.9), this.leftArmImage.material.depthWrite = !1, this.leftArmImage.material.depthTest = !1, this.leftArm = new b.Object3D, this.leftArm.add(this.leftArmImage.mesh), this.leftArmImage.mesh.position.x = 100, this.leftArmImage.mesh.position.y = 100, this.leftArm.position.x = -310, this.leftArm.position.y = 110, this.leftArm.position.z = -25, this.loadQueue.add(this.leftArmImage), this.rightArm = new d("images/094-that-afternoon/right-arm.png", 150, 77, 1.9), this.rightArm.mesh.position.x = 200, this.rightArm.mesh.position.y = 200, this.rightArm.mesh.position.z = -20, this.loadQueue.add(this.rightArm), this.leftLegImage = new d("images/094-that-afternoon/left-leg.png", 147, 239, 1.9), this.leftLegImage.material.depthWrite = !1, this.leftLegImage.material.depthTest = !1, this.leftLeg = new b.Object3D, this.leftLeg.add(this.leftLegImage.mesh), this.leftLegImage.mesh.position.x = 50, this.leftLeg.position.x = -100, this.leftLeg.position.y = -270, this.leftLeg.position.z = -15, this.loadQueue.add(this.leftLegImage), this.rightLegImage = new d("images/094-that-afternoon/right-leg.png", 310, 205, 1.9), this.rightLegImage.material.depthWrite = !1, this.rightLegImage.material.depthTest = !1, this.rightLeg = new b.Object3D, this.rightLeg.add(this.rightLegImage.mesh), this.rightLegImage.mesh.position.x = 150, this.rightLeg.position.x = 150, this.rightLeg.position.y = -170, this.rightLeg.position.z = -20, this.loadQueue.add(this.rightLegImage), this.trunk = new d("images/094-that-afternoon/trunk.png", 338, 163, 1.9), this.trunk.mesh.position.z = -50, this.loadQueue.add(this.trunk), this.head = new d("images/094-that-afternoon/head.png", 66, 72, 1.9), this.head.mesh.position.y = 180, this.head.mesh.position.z = 20, this.loadQueue.add(this.head), this.body.add(this.leftArm, this.rightArm.mesh, this.leftLeg, this.rightLeg, this.trunk.mesh, this.head.mesh), this.body.position.y = -3e3, this.body.position.z = -300, this.rootObject.add(this.body), this.objectGL.add(this.rootObject)
        }, j.disposeGL = function() {
            this.rootObject.remove(this.image1.mesh), this.rootObject.remove(this.image2.mesh), this.rootObject.remove(this.image3.mesh), this.rootObject.remove(this.leftArmImage.mesh), this.rootObject.remove(this.rightArm.mesh), this.rootObject.remove(this.leftLegImage.mesh), this.rootObject.remove(this.rightLegImage.mesh), this.rootObject.remove(this.trunk.mesh), this.rootObject.remove(this.head.mesh), this.rootObject.remove(this.body.mesh), this.image1.dispose(), this.image2.dispose(), this.image3.dispose(), this.leftArmImage.dispose(), this.rightArm.dispose(), this.leftLegImage.dispose(), this.rightLegImage.dispose(), this.trunk.dispose(), this.head.dispose(), this.image1 = null, this.image2 = null, this.image3 = null, this.leftArmImage = null, this.rightArm = null, this.leftLegImage = null, this.image3 = null, this.rightLegImage = null, this.trunk = null, this.head = null, this.body = null, this.Splash_disposeGL()
        }, j.update = function() {
            this.active && (this.body.position.z = h.map(this._bodyPosition, 0, 1, -1500, -6e3, !1, !1, !1), this.leftArm.rotation.z = .25 * Math.sin(.015 * this.time), this.leftLeg.rotation.z = Math.sin(.009 * this.time) * -.3, this.rightLeg.rotation.z = .3 * Math.sin(.01 * this.time), this.head.mesh.rotation.z = .3 * Math.sin(.011 * this.time), this.body.rotation.x = .3 * Math.sin(.01 * this.time) - .15, this.body.rotation.y = .3 * Math.sin(.013 * this.time) - .15, this.body.rotation.z = .2 * Math.sin(.012 * this.time) - .1, this.image1.update(), this.image2.update(), this.image3.update(), this.time++)
        }, a.promote(i, "Splash"), i
    }), define("theboat/098songpt4/SongPt4Splash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random", "math/ArmyKnife"], function(a, b, c, d, e, f, g) {
        var h = function(a, b) {
                this.Splash_constructor(a, b), this._bgOpacityIn = 0, this._bgOpacityOut = 1
            },
            j = a.extend(h, e);
        return Object.defineProperties(j, {
            bgOpacityIn: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgOpacityIn = a
                },
                get: function() {
                    return this._bgOpacityIn
                }
            },
            bgOpacityOut: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgOpacityOut = a
                },
                get: function() {
                    return this._bgOpacityOut
                }
            }
        }), j.createCSS = function() {
            this.Splash_createCSS()
        }, j.createGL = function() {
            this.Splash_createGL(), this.time = 0, this.lyrics1 = new d("images/098-song-pt4/song-pt4-lyrics.png", 1246, 261, 1, {
                widthSegments: 10,
                heightSegments: 3,
                bufferGeometry: !1
            }), this.rootObject.add(this.lyrics1.mesh), this.loadQueue.add(this.lyrics1), this.lyrics1.mesh.geometry.dynamic = !0;
            var a = [{
                file: "images/013-021/song-pt2-left-leaf-01.png",
                width: 141,
                height: 170
            }, {
                file: "images/013-021/song-pt2-left-leaf-02.png",
                width: 153,
                height: 86
            }, {
                file: "images/013-021/song-pt2-left-leaf-02.png",
                width: 126,
                height: 70
            }, {
                file: "images/013-021/song-pt2-right-leaf-01.png",
                width: 135,
                height: 141
            }, {
                file: "images/013-021/song-pt2-right-leaf-02.png",
                width: 112,
                height: 97
            }, {
                file: "images/013-021/song-pt2-right-leaf-03.png",
                width: 114,
                height: 134
            }];
            this.leaves = [];
            for (var c = 0; 20 > c; c++) {
                var e = f.fromArray(a),
                    g = new d(e.file, e.width, e.height, 1.5);
                this.loadQueue.add(g), this.rootObject.add(g.mesh), g.mesh.position.x = f.between(-2e3, 2e3), g.mesh.position.y = f.between(-1e3, 1e3), g.mesh.position.z = f.between(-500, -3e3), g.mesh.rotation.z = f.between(0, 2 * Math.PI), g.material.opacity = 0, this.leaves.push(g)
            }
            this.blackMattePlane = new b.PlaneBufferGeometry(2e4, 8e4), this.blackMatteMaterial = new b.MeshBasicMaterial({
                color: 0
            }), this.blackMatte = new b.Mesh(this.blackMattePlane, this.blackMatteMaterial), this.blackMatteMaterial.transparent = !0, this.blackMatteMaterial.opacity = 0, this.blackMatte.position.z = -3100, this.rootObject.add(this.blackMatte), this.objectGL.add(this.rootObject)
        }, j.disposeGL = function() {
            this.rootObject.remove(this.lyrics1.mesh), this.lyrics1.dispose(), this.lyrics1 = null, this.blackMattePlane.dispose(), this.blackMatteMaterial.dispose(), this.blackMatte = null;
            for (var a = 0; a < this.leaves.length; a++) {
                var b = this.leaves[a];
                this.rootObject.remove(b.mesh), b.dispose()
            }
            this.leaves = null, this.Splash_disposeGL()
        }, j.update = function() {
            if (this.active) {
                this.blackMatteMaterial.opacity = this._bgOpacityIn * this._bgOpacityOut;
                var a, b = this.lyrics1.mesh.geometry.vertices;
                for (a = 0; a < b.length; a++) {
                    var c = b[a],
                        d = this.time + 7.7 * a;
                    c.x += .035 * Math.sin(.015 * d), c.y += .05 * Math.sin(.025 * d), c.z += .05 * Math.sin(.01 * d)
                }
                if (this.lyrics1.mesh.needsUpdate = !0,
                    this.lyrics1.mesh.geometry.verticesNeedUpdate = !0, this.falling)
                    for (a = 0; a < this.leaves.length; a++) {
                        var e = this.leaves[a];
                        e.mesh.position.y -= .75, e.mesh.position.x += .3, e.mesh.rotation.z += .005
                    }
                this.time++
            }
        }, j.fall = function() {
            if (!this.falling)
                for (this.falling = !0, i = 0; i < this.leaves.length; i++) {
                    var a = this.leaves[i],
                        b = g.map(a.mesh.position.z, -500, -3e3, 1, 0);
                    TweenMax.to(a.material, 3, {
                        delay: f.between(0, 5),
                        opacity: b
                    }), TweenMax.to(a.material, 3, {
                        delay: f.between(5, 20),
                        opacity: 0
                    })
                }
        }, a.promote(h, "Splash"), h
    }), define("theboat/101birds/BirdsSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random", "math/ArmyKnife"], function(a, b, c, d, e, f, g) {
        var h = function(a, b) {
                this.Splash_constructor(a, b), this.time = 0, this._blackMatteOpacity = 0
            },
            i = a.extend(h, e);
        return Object.defineProperties(i, {
            blackMatteOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._blackMatteOpacity = a
                },
                get: function() {
                    return this._blackMatteOutOpacity
                }
            }
        }), i.createCSS = function() {
            this.Splash_createCSS()
        }, i.createGL = function() {
            this.Splash_createGL(), this.ocean = new d("images/101-birds/ocean-alt3.jpg", 2340, 2340, 25, {
                widthSegments: 20,
                heightSegments: 10,
                bufferGeometry: !1
            }), this.ocean.mesh.position.y = -5e3, this.ocean.mesh.position.z = -25e3, this.ocean.mesh.rotation.x = Math.PI * -.4, this.rootObject.add(this.ocean.mesh), this.loadQueue.add(this.ocean), this.bird1 = new d("images/101-birds/bird-01.png", 224, 202, 6), this.rootObject.add(this.bird1.mesh), this.loadQueue.add(this.bird1), this.bird1.mesh.position.x = -5500, this.bird1.mesh.position.y = 1900, this.bird1.mesh.position.z = 3e3, this.bird2 = new d("images/101-birds/bird-02.png", 299, 129, 6), this.bird2.mesh.position.x = -5200, this.bird2.mesh.position.y = 2900, this.bird2.mesh.position.z = 3e3, this.rootObject.add(this.bird2.mesh), this.loadQueue.add(this.bird2), this.bird3 = new d("images/101-birds/bird-03.png", 126, 121, 6), this.bird3.mesh.position.x = 4e3, this.bird3.mesh.position.y = 700, this.bird3.mesh.position.z = 3e3, this.rootObject.add(this.bird3.mesh), this.loadQueue.add(this.bird3), this.bird4 = new d("images/101-birds/bird-04.png", 363, 116, 6), this.bird4.mesh.position.x = 5500, this.bird4.mesh.position.y = 1200, this.bird4.mesh.position.z = 3e3, this.rootObject.add(this.bird4.mesh), this.loadQueue.add(this.bird4), this.distantBirds = [];
            for (var a = 0; 8 > a; a++) {
                var c = new d("images/101-birds/distant-bird-alt.png", 91, 29, 10);
                c.mesh.position.x = Math.random() > .5 ? f.between(-1e4, -15e3) : f.between(1e4, 15e3), c.mesh.position.y = f.between(3e3, 8e3), c.mesh.position.z = 3e3, this.rootObject.add(c.mesh), this.loadQueue.add(c), this.distantBirds.push(c)
            }
            this.blackMattePlane = new b.PlaneBufferGeometry(2e4, 8e4), this.blackMatteMaterial = new b.MeshBasicMaterial({
                color: 0
            }), this.blackMatte = new b.Mesh(this.blackMattePlane, this.blackMatteMaterial), this.blackMatteMaterial.transparent = !0, this.blackMatte.position.z = -2e3, this.rootObject.add(this.blackMatte), this.objectGL.add(this.rootObject)
        }, i.disposeGL = function() {
            this.timeline && this.timeline.kill(), this.rootObject.remove(this.ocean.mesh), this.rootObject.remove(this.bird1.mesh), this.rootObject.remove(this.bird2.mesh), this.rootObject.remove(this.bird3.mesh), this.rootObject.remove(this.bird4.mesh), this.ocean.dispose(), this.bird1.dispose(), this.bird2.dispose(), this.bird3.dispose(), this.bird4.dispose();
            for (var a = 0; a < this.distantBirds.length; a++) {
                var b = this.distantBirds[a];
                this.rootObject.remove(b), b.dispose()
            }
            this.distantBirds = null, this.rootObject.remove(this.blackMatte), this.blackMatteMaterial.dispose(), this.blackMattePlane.dispose(), this.ocean = null, this.bird1 = null, this.bird2 = null, this.bird3 = null, this.bird4 = null, this.blackMatteMaterial = null, this.blackMattePlane = null, this.blackMatte = null, this.Splash_disposeGL()
        }, i.update = function() {
            if (this.active) {
                this.blackMatteMaterial.opacity = this._blackMatteOpacity;
                for (var a = this.ocean.mesh.geometry.vertices, b = 0; b < a.length; b++) {
                    var c = a[b],
                        d = this.time + 30 * b;
                    c.z = 250 * Math.sin(.015 * d) + 550 * Math.sin(.01 * d)
                }
                this.ocean.mesh.needsUpdate = !0, this.ocean.mesh.geometry.verticesNeedUpdate = !0, this.time++
            }
        }, i.transitionIn = function() {
            if (!this.transitionedIn) {
                this.timeline = new TimelineMax, this.timeline.add(TweenMax.to(this.bird1.mesh.position, 1.5, {
                    ease: Power4.easeOut,
                    bezier: [{
                        y: 0,
                        z: -5e3
                    }, {
                        y: 1e3,
                        z: -1e4
                    }]
                }), .6), this.timeline.add(TweenMax.to(this.bird2.mesh.position, 1.5, {
                    ease: Power4.easeOut,
                    bezier: [{
                        y: 0,
                        z: -4e3
                    }, {
                        y: 3800,
                        z: -9e3
                    }]
                }), .9), this.timeline.add(TweenMax.to(this.bird3.mesh.position, 1.5, {
                    ease: Power4.easeOut,
                    bezier: [{
                        y: 0,
                        z: -5e3
                    }, {
                        y: 1700,
                        z: -11e3
                    }]
                }), .85), this.timeline.add(TweenMax.to(this.bird4.mesh.position, 1.5, {
                    ease: Power4.easeOut,
                    bezier: [{
                        y: 0,
                        z: -5e3
                    }, {
                        y: 1200,
                        z: -8e3
                    }]
                }), .7);
                for (var a = 0; a < this.distantBirds.length; a++) {
                    var b = this.distantBirds[a],
                        c = f.between(7, 9),
                        d = f.between(0, 1),
                        e = f.between(-5500, 5500),
                        h = f.between(-5e4, 5e4);
                    this.timeline.add(TweenMax.to(b.mesh.position, c, {
                        ease: Power2.easeOut,
                        bezier: [{
                            x: e,
                            y: f.between(3e3, 7e3),
                            z: -35e3
                        }, {
                            x: h,
                            y: f.between(1e4, 17e3),
                            z: -85e3
                        }]
                    }), d), this.timeline.add(TweenMax.to(b.mesh.rotation, .25 * c, {
                        ease: Power3.easeOut,
                        z: g.map(h, -5e4, 5e4, 1, -1, !1, !1, !1)
                    }), d + .025 * c), this.timeline.add(TweenMax.to(b.material, 4, {
                        opacity: 0
                    }), d + 2.5)
                }
                this.transitionedIn = !0
            }
        }, a.promote(h, "Splash"), h
    }), define("theboat/103somethingamiss/SomethingAmissSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random", "utils/Color"], function(a, b, c, d, e, f, g) {
        var h = function(a, b) {
                this.Splash_constructor(a, b), this._quyenBrightness = 0
            },
            i = a.extend(h, e);
        return Object.defineProperties(i, {
            quyenBrightness: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._quyenBrightness = a
                },
                get: function() {
                    return this._quyenBrightness
                }
            }
        }), i.createCSS = function() {
            this.Splash_createCSS()
        }, i.createGL = function() {
            this.Splash_createGL(), this.bg = new d("images/103-something-amiss/bg.jpg", 1701, 2237, 1), this.bg.mesh.position.z = -200, this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.quyen = new d("images/103-something-amiss/quyen.png", 1232, 519, 1), this.quyen.mesh.position.x = 100, this.quyen.mesh.position.y = -850, this.quyen.mesh.position.z = 0, this.rootObject.add(this.quyen.mesh), this.loadQueue.add(this.quyen), this.brightnessColor = new g.fromRGB(0, 0, 0), this.objectGL.add(this.rootObject)
        }, i.disposeGL = function() {
            this.rootObject.remove(this.bg.mesh), this.rootObject.remove(this.quyen.mesh), this.bg.dispose(), this.quyen.dispose(), this.bg = null, this.quyen = null, this.Splash_disposeGL()
        }, i.update = function() {
            this.Splash_update(), this.active && (this.brightnessColor.r = this._quyenBrightness, this.brightnessColor.g = this._quyenBrightness, this.brightnessColor.b = this._quyenBrightness, this.quyen.material.color.setHex(this.brightnessColor.toInt()))
        }, a.promote(h, "Splash"), h
    }), define("theboat/106troungbody/TroungBodySplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random", "math/ArmyKnife", "utils/Color"], function(a, b, c, d, e, f, g, h) {
        var i = function(a, b) {
                this.Splash_constructor(a, b), this._progress = 0
            },
            j = a.extend(i, e);
        return Object.defineProperties(j, {
            progress: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._progress = a
                },
                get: function() {
                    return this._progress
                }
            }
        }), j.createCSS = function() {
            this.Splash_createCSS()
        }, j.createGL = function() {
            this.Splash_createGL(), this.body = new d("images/106-troung-body/body.png", 1762, 592, 1.5), this.body.mesh.position.z = -2400, this.rootObject.add(this.body.mesh), this.loadQueue.add(this.body), this.quyen = new d("images/106-troung-body/quyen.png", 982, 880, 2.4), this.quyen.mesh.position.x = -1e3, this.quyen.mesh.position.y = -200, this.quyen.mesh.position.z = -800, this.rootObject.add(this.quyen.mesh), this.loadQueue.add(this.quyen), this.mai = new d("images/106-troung-body/mai.png", 660, 894, 2.4), this.mai.mesh.position.x = 1e3, this.mai.mesh.position.y = -200, this.mai.mesh.position.z = -800, this.rootObject.add(this.mai.mesh), this.loadQueue.add(this.mai), this.blackMattePlane = new b.PlaneBufferGeometry(2e4, 8e4), this.blackMatteMaterial = new b.MeshBasicMaterial({
                color: 0
            }), this.blackMatte = new b.Mesh(this.blackMattePlane, this.blackMatteMaterial), this.blackMatte.position.z = -3e3, this.rootObject.add(this.blackMatte), this.brightnessColor = new h.fromRGB(0, 0, 0), this.rootObject.position.z = 1e3, this.objectGL.add(this.rootObject)
        }, j.disposeGL = function() {
            this.rootObject.remove(this.body.mesh), this.rootObject.remove(this.quyen.mesh), this.rootObject.remove(this.mai.mesh), this.rootObject.remove(this.blackMatte), this.body.dispose(), this.quyen.dispose(), this.mai.dispose(), this.blackMattePlane.dispose(), this.blackMatteMaterial.dispose(), this.body = null, this.quyen = null, this.mai = null, this.blackMatte = null, this.blackMattePlane = null, this.blackMatteMaterial = null, this.Splash_disposeGL()
        }, j.update = function() {
            if (this.Splash_update(), this.active) {
                var a = Power1.easeInOut.getRatio(this._progress);
                this.rootObject.position.z = g.map(a, 0, 1, 1e3, 0, !1, !1, !1), this.rootObject.position.y = g.map(a, 0, 1, 0, -700, !1, !1, !1), this.quyen.mesh.position.x = g.map(a, 0, 1, -1e3, -900, !1, !1, !1), this.quyen.mesh.position.z = g.map(a, 0, 1, -800, -1800, !1, !1, !1), this.mai.mesh.position.x = g.map(a, 0, 1, 1e3, 900, !1, !1, !1), this.mai.mesh.position.z = g.map(a, 0, 1, -800, -1900, !1, !1, !1);
                var b = a;
                this.brightnessColor.r = b, this.brightnessColor.g = b, this.brightnessColor.b = b, this.quyen.material.color.setHex(this.brightnessColor.toInt()), this.mai.material.color.setHex(this.brightnessColor.toInt())
            }
        }, a.promote(i, "Splash"), i
    }), define("theboat/109quyenmourns/QuyenMournsSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b), this._whiteMatteOpacity = 0
            },
            g = a.extend(f, e);
        return Object.defineProperties(g, {
            whiteMatteOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._whiteMatteOpacity = a
                },
                get: function() {
                    return this._whiteMatteOpacity
                }
            }
        }), g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.bg = new d("images/109-quyen-mourns/bg.png", 926, 442, 1.2), this.bg.mesh.position.x = 400, this.bg.mesh.position.y = -100, this.bg.mesh.position.z = -300, this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.whiteMattePlane = new b.PlaneBufferGeometry(2e4, 8e4), this.whiteMatteMaterial = new b.MeshBasicMaterial({
                color: 16777215
            }), this.whiteMatte = new b.Mesh(this.whiteMattePlane, this.whiteMatteMaterial), this.whiteMatteMaterial.transparent = !0, this.whiteMatte.position.z = -350, this.rootObject.add(this.whiteMatte), this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.rootObject.remove(this.bg.mesh), this.rootObject.remove(this.whiteMatte), this.bg.dispose(), this.whiteMatteMaterial.dispose(), this.whiteMattePlane.dispose(), this.bg = null, this.whiteMatte = null, this.whiteMatteMaterial = null, this.whiteMattePlane = null, this.Splash_disposeGL()
        }, g.update = function() {
            this.Splash_update(), this.active && (this.whiteMatteMaterial.opacity = this._whiteMatteOpacity)
        }, a.promote(f, "Splash"), f
    }), define("theboat/115end/EndSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b), this._blackMatteOpacity = 1, this._videoOpacity = 1
            },
            g = a.extend(f, e);
        return Object.defineProperties(g, {
            blackMatteOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._blackMatteOpacity = a
                },
                get: function() {
                    return this._blackMatteOpacity
                }
            },
            videoOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._videoOpacity = a
                },
                get: function() {
                    return this._videoOpacity
                }
            }
        }), g.createGL = function() {
            this.Splash_createGL(), this.videoEl = document.createElement("video"), this.videoEl.width = 1280, this.videoEl.height = 960, this.videoEl.loop = !0, this.mp4Src = document.createElement("source"), this.mp4Src.type = "video/mp4", this.mp4Src.src = "videos/end-4-3-bw.mp4", this.oggSrc = document.createElement("source"), this.oggSrc.type = "video/ogg", this.oggSrc.src = "videos/end-4-3-bw.ogg", this.videoEl.appendChild(this.mp4Src), this.videoEl.appendChild(this.oggSrc);
            var a = 30;
            this.videoTexture = new b.VideoTexture(this.videoEl), this.videoTexture.minFilter = b.LinearFilter, this.videoTexture.magFilter = b.LinearFilter, this.videoTexture.format = b.RGBAFormat, this.videoMaterial = new b.MeshBasicMaterial({
                color: 16777215,
                map: this.videoTexture
            }), this.videoMaterial.transparent = !0, this.videoGeom = new b.PlaneBufferGeometry(1280 * a, 960 * a), this.video = new b.Mesh(this.videoGeom, this.videoMaterial), this.video.position.z = -35e3, this.rootObject.add(this.video), this.maskImage = new d("images/115-end/mask.png", 1400, 1030, a), this.maskImage.mesh.position.z = -34500, this.rootObject.add(this.maskImage.mesh), this.loadQueue.add(this.maskImage), this.maskImage.mesh.visible = !1, this.blackMattePlane = new b.PlaneBufferGeometry(9e4, 8e4), this.blackMatteMaterial = new b.MeshBasicMaterial({
                color: 0
            }), this.blackMatte = new b.Mesh(this.blackMattePlane, this.blackMatteMaterial), this.blackMatteMaterial.transparent = !0, this.blackMatteMaterial.opacity = 0, this.blackMatte.position.x = 0, this.blackMatte.position.z = -4e4, this.rootObject.add(this.blackMatte), this.objectGL.add(this.rootObject)
        }, g.play = function() {
            this.videoEl.play()
        }, g.disposeGL = function() {
            this.rootObject.remove(this.video), this.rootObject.remove(this.blackMatte), this.videoEl && (this.videoEl.pause(), this.videoTexture.dispose(), this.videoMaterial.dispose(), this.videoGeom.dispose()), this.blackMattePlane.dispose(), this.blackMattePlane = null, this.blackMatteMaterial.dispose(), this.blackMatteMaterial = null, this.videoTexture = null, this.videoMaterial = null, this.videoGeom = null, this.video = null, this.videoEl = null, this.mp4Src = null, this.oggSrc = null, this.credits = null, this.Splash_disposeGL()
        }, g.update = function() {
            this.Splash_update(), this.active && (this.videoMaterial.opacity = this._videoOpacity, this.blackMatteMaterial.opacity = this._blackMatteOpacity, this.maskImage.mesh.visible = this.videoMaterial.opacity > 0)
        }, a.promote(f, "Splash"), f
    }), define("comic/display/FadeImage", ["utils/inherit", "comic/ComicMetrics", "comic/display/Image", "tweenMax"], function(a, b, c) {
        var d = function(a, b, c, d, e) {
                this.Image_constructor(a, b, c, d, e), this.targetOpacity = e && e.targetOpacity ? e.targetOpacity : 1
            },
            e = a.extend(d, c);
        return e.onLoad = function(a) {
            this.disposed || (TweenMax.fromTo(this.material, 2, {
                ease: Power3.easeOut,
                opacity: 0
            }, {
                opacity: this.targetOpacity
            }), this.Image_onLoad(a))
        }, a.promote(d, "Image"), d
    }), define("theboat/blineancestors/BLineAncestorsSplash1", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/FadeImage", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e, f, g) {
        var h = function(a, b) {
                this.Splash_constructor(a, b)
            },
            i = a.extend(h, f);
        return i.createCSS = function() {
            this.Splash_createCSS()
        }, i.createGL = function() {
            this.Splash_createGL(), this.archive = new e("images/b-line-ancestors/procession.png", 1118, 703, 1.2, {
                targetOpacity: 1
            }), this.archive.mesh.position.x = 400, this.archive.mesh.position.y = 0, this.archive.mesh.position.z = -400, this.archive.material.opacity = 1, this.rootObject.add(this.archive.mesh), this.loadQueue.add(this.archive), this.backlight = new e("images/b-line-ancestors/procession-backlight.png", 1118, 703, 1.2), this.backlight.mesh.position.x = 400, this.backlight.mesh.position.y = 0, this.backlight.mesh.position.z = -420, this.rootObject.add(this.backlight.mesh), this.loadQueue.add(this.backlight), this.objectGL.add(this.rootObject)
        }, i.update = function() {
            this.active && Math.random() > .3 && (this.backlight.material.opacity = g.between(.15, .35))
        }, i.disposeGL = function() {
            this.rootObject.remove(this.archive.mesh), this.archive.dispose(), this.archive = null, this.Splash_disposeGL()
        }, a.promote(h, "Splash"), h
    }), define("theboat/blineancestors/BLineAncestorsSplash2", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/FadeImage", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e, f) {
        var g = function(a, b) {
                this.Splash_constructor(a, b)
            },
            h = a.extend(g, f);
        return h.createCSS = function() {
            this.Splash_createCSS()
        }, h.createGL = function() {
            this.Splash_createGL(), this.archive = new e("images/b-line-ancestors/archive-02.png", 1197, 793, 2, {
                targetOpacity: .6
            }), this.archive.mesh.position.x = 400, this.archive.mesh.position.y = 400, this.archive.material.opacity = 0, this.archive.mesh.position.z = -500, this.rootObject.add(this.archive.mesh), this.loadQueue.add(this.archive), this.boat = new e("images/b-line-ancestors/boat-moon-light.png", 1142, 515, .8), this.boat.mesh.position.x = 300, this.boat.mesh.position.y = -150, this.boat.mesh.position.z = 0, this.rootObject.add(this.boat.mesh), this.loadQueue.add(this.boat), this.moon = new e("images/b-line-ancestors/moon.png", 267, 234, 2), this.moon.mesh.position.x = -800, this.moon.mesh.position.y = 700, this.moon.mesh.position.z = -1e3, this.rootObject.add(this.moon.mesh), this.loadQueue.add(this.moon), this.objectGL.add(this.rootObject)
        }, h.update = function() {}, h.disposeGL = function() {
            this.rootObject.remove(this.archive.mesh), this.rootObject.remove(this.boat.mesh), this.rootObject.remove(this.moon.mesh), this.archive.dispose(), this.boat.dispose(), this.moon.dispose(), this.archive = null, this.boat = null, this.moon = null, this.Splash_disposeGL()
        }, a.promote(g, "Splash"), g
    }), define("theboat/blineancestors/BLineAncestorsSplash3", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/FadeImage", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e, f) {
        var g = function(a, b) {
                this.Splash_constructor(a, b)
            },
            h = a.extend(g, f);
        return h.createCSS = function() {
            this.Splash_createCSS()
        }, h.createGL = function() {
            this.Splash_createGL(), this.archive = new e("images/b-line-ancestors/archive-01.png", 1197, 793, 1.8, {
                targetOpacity: .45
            }), this.archive.mesh.position.x = -400, this.archive.mesh.position.y = 400, this.archive.material.opacity = .45, this.archive.mesh.position.z = -500, this.rootObject.add(this.archive.mesh), this.loadQueue.add(this.archive), this.boat = new e("images/b-line-ancestors/boat-fog.png", 526, 271, 1), this.boat.mesh.position.x = 300, this.boat.mesh.position.y = -150, this.boat.mesh.position.z = 0, this.rootObject.add(this.boat.mesh), this.loadQueue.add(this.boat), this.fogFG = new e("images/b-line-ancestors/fog-fg.png", 1291, 542, 1.1), this.fogFG.mesh.position.x = 300, this.fogFG.mesh.position.y = 0, this.fogFG.mesh.position.z = 100, this.rootObject.add(this.fogFG.mesh), this.loadQueue.add(this.fogFG), this.fogBG = new e("images/b-line-ancestors/fog-bg.png", 1320, 797, .9), this.fogBG.mesh.position.x = 300, this.fogBG.mesh.position.y = -200, this.fogBG.mesh.position.z = -20, this.fogBG.material.opacity = .35, this.rootObject.add(this.fogBG.mesh), this.loadQueue.add(this.fogBG), this.objectGL.add(this.rootObject)
        }, h.update = function() {}, h.disposeGL = function() {
            this.rootObject.remove(this.archive.mesh), this.rootObject.remove(this.boat.mesh), this.rootObject.remove(this.fogFG.mesh), this.rootObject.remove(this.fogBG.mesh), this.archive.dispose(), this.boat.dispose(), this.fogFG.dispose(), this.fogBG.dispose(), this.archive = null, this.boat = null, this.fogFG = null, this.fogBG = null, this.Splash_disposeGL()
        }, a.promote(g, "Splash"), g
    }), define("theboat/blinebackstory/BLineBackStoryBlackMatte", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b), this.usePreloader = !1
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.blackMattePlane = new b.PlaneBufferGeometry(8e3, 8e4), this.blackMatteMaterial = new b.MeshBasicMaterial({
                color: 0
            }), this.blackMatte = new b.Mesh(this.blackMattePlane, this.blackMatteMaterial), this.blackMatte.position.z = -2e3, this.rootObject.add(this.blackMatte), this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.rootObject.remove(this.blackMatte), this.blackMatteMaterial.dispose(), this.blackMattePlane.dispose(), this.blackMatteMaterial = null, this.blackMattePlane = null, this.blackMatte = null, this.Splash_disposeGL()
        }, g.update = function() {
            this.Splash_update()
        }, a.promote(f, "Splash"), f
    }), define("theboat/blinebackstory/BLineBackStorySplash1", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/FadeImage", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e, f) {
        var g = function(a, b) {
                this.Splash_constructor(a, b)
            },
            h = a.extend(g, f);
        return h.createCSS = function() {
            this.Splash_createCSS()
        }, h.createGL = function() {
            this.Splash_createGL(), this.running = new e("images/b-line-backstory/archive-01.png", 1009, 761, 1.3), this.running.mesh.position.x = 900, this.running.mesh.position.y = -200, this.running.mesh.position.z = -500, this.rootObject.add(this.running.mesh), this.loadQueue.add(this.running), this.archive2 = new e("images/b-line-backstory/archive-02.png", 1209, 849, 2.6, {
                targetOpacity: .5
            }), this.archive2.mesh.position.x = 0, this.archive2.mesh.position.z = -900, this.archive2.material.opacity = .5, this.rootObject.add(this.archive2.mesh), this.loadQueue.add(this.archive2), this.objectGL.add(this.rootObject)
        }, h.update = function() {}, h.disposeGL = function() {
            this.rootObject.remove(this.running.mesh), this.rootObject.remove(this.archive2.mesh), this.running.dispose(), this.archive2.dispose(), this.running = null, this.archive2 = null, this.Splash_disposeGL()
        }, a.promote(g, "Splash"), g
    }), define("theboat/blinebackstory/BLineBackStorySplash2", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.running = new d("images/b-line-backstory/archive-03.png", 1205, 945, 1.3), this.running.mesh.position.x = -900, this.running.mesh.position.y = -200, this.running.mesh.position.z = -500, this.rootObject.add(this.running.mesh), this.loadQueue.add(this.running), this.archive2 = new d("images/b-line-backstory/archive-04.png", 920, 681, 2.9), this.archive2.mesh.position.x = 0, this.archive2.mesh.position.z = -900, this.archive2.material.opacity = .5, this.rootObject.add(this.archive2.mesh), this.loadQueue.add(this.archive2), this.objectGL.add(this.rootObject)
        }, g.update = function() {}, g.disposeGL = function() {
            this.rootObject.remove(this.running.mesh), this.rootObject.remove(this.archive2.mesh), this.running.dispose(), this.archive2.dispose(), this.running = null, this.archive2 = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/blinebackstory/BLineBackStoryRunning", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.running = new d("images/b-line-backstory/running.png", 458, 693, 1.2), this.running.mesh.position.z = -300, this.rootObject.add(this.running.mesh), this.loadQueue.add(this.running), this.objectGL.add(this.rootObject)
        }, g.update = function() {}, g.disposeGL = function() {
            this.rootObject.remove(this.running.mesh), this.running.dispose(), this.running = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/blinereeducation/BLineReeducationSplash1", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/FadeImage", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e, f) {
        var g = function(a, b) {
                this.Splash_constructor(a, b)
            },
            h = a.extend(g, f);
        return h.createCSS = function() {
            this.Splash_createCSS()
        }, h.createGL = function() {
            this.Splash_createGL(), this.archive = new e("images/b-line-reeducation/archive-01.png", 1197, 793, 1.8, {
                targetOpacity: .85
            }), this.archive.mesh.position.x = -400, this.archive.material.opacity = .85, this.archive.mesh.position.z = -500, this.rootObject.add(this.archive.mesh), this.loadQueue.add(this.archive), this.line = new e("images/b-line-reeducation/line.png", 1553, 506, 1.1), this.line.mesh.position.y = -300, this.line.mesh.position.z = 0, this.rootObject.add(this.line.mesh), this.loadQueue.add(this.line), this.guardLeft = new e("images/b-line-reeducation/line-guard-fore-left.png", 347, 505, .9), this.guardLeft.mesh.position.x = -400, this.guardLeft.mesh.position.y = -450, this.guardLeft.mesh.position.z = 100, this.rootObject.add(this.guardLeft.mesh), this.loadQueue.add(this.guardLeft), this.guardRight = new e("images/b-line-reeducation/line-guard-fore-right.png", 320, 566, .9), this.guardRight.mesh.position.x = 400, this.guardRight.mesh.position.y = -450, this.guardRight.mesh.position.z = 100, this.rootObject.add(this.guardRight.mesh), this.loadQueue.add(this.guardRight), this.guardBack = new e("images/b-line-reeducation/line-guard-back.png", 230, 458, 1.1), this.guardBack.mesh.position.x = -200, this.guardBack.mesh.position.y = -270, this.guardBack.mesh.position.z = -100, this.rootObject.add(this.guardBack.mesh), this.loadQueue.add(this.guardBack), this.objectGL.add(this.rootObject)
        }, h.update = function() {}, h.disposeGL = function() {
            this.rootObject.remove(this.archive.mesh), this.rootObject.remove(this.line.mesh), this.rootObject.remove(this.guardLeft.mesh), this.rootObject.remove(this.guardRight.mesh), this.rootObject.remove(this.guardBack.mesh), this.archive.dispose(), this.guardBack.dispose(), this.guardLeft.dispose(), this.guardRight.dispose(), this.archive = null, this.guardBack = null, this.guardLeft = null, this.guardRight = null, this.Splash_disposeGL()
        }, a.promote(g, "Splash"), g
    }), define("theboat/blinereeducation/BLineReeducationSplash2", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.archive2 = new d("images/b-line-reeducation/archive-02.png", 1500, 995, 1.5), this.archive2.mesh.position.x = 400, this.archive2.mesh.position.z = -600, this.archive2.material.opacity = .85, this.rootObject.add(this.archive2.mesh), this.loadQueue.add(this.archive2), this.flee = new d("images/b-line-reeducation/flee.png", 500, 499, 1.3), this.flee.mesh.position.x = -350, this.flee.mesh.position.y = 300, this.flee.mesh.position.z = -100, this.rootObject.add(this.flee.mesh), this.loadQueue.add(this.flee), this.objectGL.add(this.rootObject)
        }, g.update = function() {}, g.disposeGL = function() {
            this.rootObject.remove(this.archive2.mesh), this.rootObject.remove(this.flee.mesh), this.archive2.dispose(), this.flee.dispose(), this.archive2 = null, this.flee = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/blinereeducation/BLineReeducationSplash3", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.archive2 = new d("images/b-line-reeducation/archive-03.png", 1150, 766, 1.8), this.archive2.mesh.position.x = -400, this.archive2.mesh.position.z = -500, this.archive2.material.opacity = .85, this.rootObject.add(this.archive2.mesh), this.loadQueue.add(this.archive2), this.prisoners = new d("images/b-line-reeducation/prisoners.png", 1518, 712, 1), this.prisoners.mesh.position.x = -200, this.prisoners.mesh.position.y = -200, this.prisoners.mesh.position.z = 0, this.rootObject.add(this.prisoners.mesh), this.loadQueue.add(this.prisoners), this.guardLeft = new d("images/b-line-reeducation/reed-guard-left.png", 187, 425, 1.1), this.guardLeft.mesh.position.x = -600, this.guardLeft.mesh.position.y = -500, this.guardLeft.mesh.position.z = 100, this.rootObject.add(this.guardLeft.mesh), this.loadQueue.add(this.guardLeft), this.guardMid = new d("images/b-line-reeducation/reed-guard-middle.png", 267, 464, 1.1), this.guardMid.mesh.position.x = -100, this.guardMid.mesh.position.y = -500, this.guardMid.mesh.position.z = 100, this.rootObject.add(this.guardMid.mesh), this.loadQueue.add(this.guardMid), this.guardRight = new d("images/b-line-reeducation/reed-guard-right.png", 259, 437, 1.1), this.guardRight.mesh.position.x = 400, this.guardRight.mesh.position.y = -500, this.guardRight.mesh.position.z = 100, this.rootObject.add(this.guardRight.mesh), this.loadQueue.add(this.guardRight), this.objectGL.add(this.rootObject)
        }, g.update = function() {}, g.disposeGL = function() {
            this.rootObject.remove(this.archive2.mesh), this.rootObject.remove(this.prisoners.mesh), this.rootObject.remove(this.guardLeft.mesh), this.rootObject.remove(this.guardMid.mesh), this.rootObject.remove(this.guardRight.mesh), this.archive2.dispose(), this.prisoners.dispose(), this.guardLeft.dispose(), this.guardMid.dispose(), this.guardRight.dispose(), this.archive2 = null, this.prisoners = null, this.guardLeft = null, this.guardMid = null, this.guardRight = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/blinebidong/BLineBidongSplash1", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/FadeImage", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e, f) {
        var g = function(a, b) {
                this.Splash_constructor(a, b)
            },
            h = a.extend(g, f);
        return h.createCSS = function() {
            this.Splash_createCSS()
        }, h.createGL = function() {
            this.Splash_createGL(), this.archive1 = new e("images/b-line-bidong/archive-01.png", 1009, 761, 1.3), this.archive1.mesh.position.x = 900, this.archive1.mesh.position.y = -200, this.archive1.mesh.position.z = -500, this.rootObject.add(this.archive1.mesh), this.loadQueue.add(this.archive1), this.archive2 = new e("images/b-line-bidong/archive-02.png", 1209, 849, 2.6, {
                targetOpacity: .5
            }), this.archive2.mesh.position.x = 0, this.archive2.mesh.position.z = -900, this.rootObject.add(this.archive2.mesh), this.loadQueue.add(this.archive2), this.ba = new e("images/b-line-bidong/ba.png", 522, 693, 1), this.ba.mesh.position.x = -650, this.ba.mesh.position.y = 100, this.ba.mesh.position.z = 0, this.rootObject.add(this.ba.mesh), this.loadQueue.add(this.ba), this.objectGL.add(this.rootObject)
        }, h.update = function() {}, h.disposeGL = function() {
            this.rootObject.remove(this.archive1.mesh), this.rootObject.remove(this.archive2.mesh), this.rootObject.remove(this.ba.mesh), this.archive1.dispose(), this.archive2.dispose(), this.ba.dispose(), this.archive1 = null, this.archive2 = null, this.ba = null, this.Splash_disposeGL()
        }, a.promote(g, "Splash"), g
    }), define("theboat/blinebidong/BLineBidongSplash2", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.archive1 = new d("images/b-line-bidong/archive-04.png", 1009, 761, 1.3), this.archive1.mesh.position.x = -900, this.archive1.mesh.position.y = -200, this.archive1.mesh.position.z = -500, this.archive1.material.opacity = .85, this.rootObject.add(this.archive1.mesh), this.loadQueue.add(this.archive1), this.archive2 = new d("images/b-line-bidong/archive-03.png", 1311, 886, 2.6), this.archive2.mesh.position.x = 0, this.archive2.mesh.position.z = -900, this.archive2.material.opacity = .5, this.rootObject.add(this.archive2.mesh), this.loadQueue.add(this.archive2), this.objectGL.add(this.rootObject)
        }, g.update = function() {}, g.disposeGL = function() {
            this.rootObject.remove(this.archive1.mesh), this.rootObject.remove(this.archive2.mesh), this.archive1.dispose(), this.archive2.dispose(), this.archive1 = null, this.archive2 = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/blinebidong/BLineBidongSplash3", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.archive1 = new d("images/b-line-bidong/archive-05.png", 1009, 761, 1.3), this.archive1.mesh.position.x = 900, this.archive1.mesh.position.y = -200, this.archive1.mesh.position.z = -500, this.rootObject.add(this.archive1.mesh), this.loadQueue.add(this.archive1), this.archive2 = new d("images/b-line-bidong/archive-06.png", 1311, 886, 2.6), this.archive2.mesh.position.x = 0, this.archive2.mesh.position.z = -900, this.archive2.material.opacity = .5, this.rootObject.add(this.archive2.mesh), this.loadQueue.add(this.archive2), this.objectGL.add(this.rootObject)
        }, g.update = function() {}, g.disposeGL = function() {
            this.rootObject.remove(this.archive1.mesh), this.rootObject.remove(this.archive2.mesh), this.archive1.dispose(), this.archive2.dispose(), this.archive1 = null, this.archive2 = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/blinebubbles/BubbleAncestors", ["underscore", "utils/inherit", "comic/ComicMetrics", "comic/display/ComicObject", "comic/display/Image", "theboat/FeverImage", "utils/Random", "utils/Color", "threejs", "threejsCSS"], function(a, b, c, d, e, f, g, h, i) {
        var j = function(b, c, d, e) {
                this.ComicObject_constructor(d, e), this.useGL = !0, this.useCSS = !1, this.interactive = !0, this.time = 0, a.bindAll(this, "onRollOver", "onRollOut", "onClick")
            },
            k = b.extend(j, d);
        return k.createCSS = function() {
            this.ComicObject_createCSS()
        }, k.createGL = function() {
            this.ComicObject_createGL(), this.transitionedIn = !1, this.rootObject = new i.Object3D, this.objectGL.add(this.rootObject), this.rootObject.position.x = 900, this.rootObject.position.y = -500, this.bubble = new e("images/b-line-ancestors/bubble/bubble-alt.png", 565, 306, .6), this.bubble.mesh.position.x = 90, this.bubble.mesh.position.y = 30, this.bubble.mesh.position.z = 250, this.rootObject.add(this.bubble.mesh), this.loadQueue.add(this.bubble), this.arrow = new e("images/b-line-ancestors/bubble/arrow.png", 194, 119, .6), this.arrow.mesh.position.x = 80, this.arrow.mesh.position.y = -70, this.arrow.mesh.position.z = 360, this.rootObject.add(this.arrow.mesh), this.loadQueue.add(this.arrow), this.graphic = new e("images/b-line-ancestors/bubble/procession-alt.png", 629, 445, .6), this.graphic.mesh.position.x = 120, this.graphic.mesh.position.y = -30, this.graphic.mesh.position.z = 350, this.rootObject.add(this.graphic.mesh), this.loadQueue.add(this.graphic), this.tail1 = new e("images/b-line-ancestors/bubble/bubble-tail-01.png", 47, 47, .6), this.tail1.mesh.position.x = 0, this.tail1.mesh.position.y = 135, this.tail1.mesh.position.z = 200, this.rootObject.add(this.tail1.mesh), this.loadQueue.add(this.tail1), this.tail2 = new e("images/b-line-ancestors/bubble/bubble-tail-02.png", 47, 47, .6), this.tail2.mesh.position.x = -60, this.tail2.mesh.position.y = 165, this.tail2.mesh.position.z = 150, this.rootObject.add(this.tail2.mesh), this.loadQueue.add(this.tail2), this.tail3 = new e("images/b-line-ancestors/bubble/bubble-tail-03.png", 47, 47, .6), this.tail3.mesh.position.x = -100, this.tail3.mesh.position.y = 180, this.tail3.mesh.position.z = 100, this.rootObject.add(this.tail3.mesh), this.loadQueue.add(this.tail3), this.tail3.material.opacity = this.tail2.material.opacity = this.tail1.material.opacity = this.bubble.material.opacity = this.graphic.material.opacity = this.arrow.material.opacity = 0
        }, k.load = function() {
            this.ComicObject_load(), this.objectGL.visible = !0
        }, k.draw = function() {
            this.ComicObject_draw()
        }, k.transitionIn = function() {
            this.transitionedIn || (this.timeline = new TimelineMax({
                onComplete: this.onTransitionInComplete,
                onCompleteScope: this
            }), this.timeline.insert(TweenMax.from(this.tail3.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-50"
            }), 0), this.timeline.insert(TweenMax.from(this.tail2.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-100"
            }), .2), this.timeline.insert(TweenMax.from(this.tail1.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-150"
            }), .4), this.timeline.insert(TweenMax.from(this.bubble.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-200"
            }), .6), this.timeline.insert(TweenMax.from(this.graphic.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-200"
            }), .6), this.timeline.insert(TweenMax.to(this.tail3.material, 1, {
                opacity: 1
            })), this.timeline.insert(TweenMax.to(this.tail2.material, 1, {
                opacity: 1
            }), .2), this.timeline.insert(TweenMax.to(this.tail1.material, 1, {
                opacity: 1
            }), .4), this.timeline.insert(TweenMax.to(this.bubble.material, 1, {
                opacity: 1
            }), .6), this.timeline.insert(TweenMax.to(this.graphic.material, 1, {
                opacity: 1
            }), .8), this.timeline.insert(TweenMax.to(this.arrow.material, 1, {
                opacity: 1
            }), 1), this.transitionedIn = !0)
        }, k.onTransitionInComplete = function() {
            this.addEventListener("click", this.onClick), this.addEventListener("rollOver", this.onRollOver), this.addEventListener("rollOut", this.onRollOut)
        }, k.onRollOver = function() {
            this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.to(this.graphic.mesh.position, .25, {
                ease: Power2.easeOut,
                x: 120,
                z: 450
            })), this.timeline.insert(TweenMax.to(this.arrow.mesh.position, .25, {
                ease: Power2.easeOut,
                x: 90,
                z: 460
            })), this.timeline.insert(TweenMax.to(this.bubble.mesh.position, .25, {
                ease: Power2.easeOut,
                z: 300
            }), 0), this.timeline.insert(TweenMax.to(this.tail1.mesh.position, .33, {
                ease: Power2.easeOut,
                z: 250
            }), .1), this.timeline.insert(TweenMax.to(this.tail2.mesh.position, .7, {
                ease: Power2.easeOut,
                z: 175
            }), .2), this.timeline.insert(TweenMax.to(this.tail3.mesh.position, 1, {
                ease: Power2.easeOut,
                z: 125
            }), .3)
        }, k.onRollOut = function() {
            this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.to(this.graphic.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                x: 100,
                z: 350
            })), this.timeline.insert(TweenMax.to(this.arrow.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                x: 80,
                z: 360
            })), this.timeline.insert(TweenMax.to(this.bubble.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 250
            }), 0), this.timeline.insert(TweenMax.to(this.tail1.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 200
            }), .2), this.timeline.insert(TweenMax.to(this.tail2.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 150
            }), .4), this.timeline.insert(TweenMax.to(this.tail3.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 100
            }), .6)
        }, k.onClick = function() {}, k.disposeGL = function() {
            this.timeline && this.timeline.kill(), this.objectGL.remove(this.rootObject), this.removeEventListener("click", this.onClick), this.removeEventListener("rollOver", this.onRollOver), this.removeEventListener("rollOut", this.onRollOut), this.rootObject.remove(this.bubble), this.rootObject.remove(this.arrow), this.rootObject.remove(this.graphic), this.rootObject.remove(this.tail1), this.rootObject.remove(this.tail2), this.rootObject.remove(this.tail3), this.bubble.dispose(), this.arrow.dispose(), this.graphic.dispose(), this.tail1.dispose(), this.tail2.dispose(), this.tail3.dispose(), this.bubble = null, this.arrow = null, this.graphic = null, this.tail1 = null, this.tail2 = null, this.tail3 = null, this.rootObject = null, this.ComicObject_disposeGL()
        }, k.update = function() {
            if (this.ComicObject_update(), this.active) {
                this.time++;
                var a = Math.sin(.02 * (this.time + 0)),
                    b = Math.sin(.02 * (this.time + 50)),
                    c = Math.sin(.02 * (this.time + 100)),
                    d = Math.sin(.02 * (this.time + 150));
                this.bubble.mesh.position.x += .1 * a, this.bubble.mesh.position.y += .1 * d, this.tail1.mesh.position.x += .1 * b, this.tail1.mesh.position.y += .1 * c, this.tail2.mesh.position.x += .1 * c, this.tail2.mesh.position.y += .1 * b, this.tail3.mesh.position.x += .1 * d, this.tail3.mesh.position.y += .1 * a
            }
        }, b.promote(j, "ComicObject"), j
    }), define("theboat/blinebubbles/BubbleReeducation", ["underscore", "utils/inherit", "comic/ComicMetrics", "comic/display/ComicObject", "comic/display/Image", "theboat/FeverImage", "utils/Random", "utils/Color", "threejs", "threejsCSS"], function(a, b, c, d, e, f, g, h, i) {
        var j = function(b, c, d, e) {
                this.ComicObject_constructor(d, e), this.useGL = !0, this.useCSS = !1, this.interactive = !0, this.time = 0, a.bindAll(this, "onRollOver", "onRollOut", "onClick")
            },
            k = b.extend(j, d);
        return k.createCSS = function() {
            this.ComicObject_createCSS()
        }, k.createGL = function() {
            this.ComicObject_createGL(), this.transitionedIn = !1, this.rootObject = new i.Object3D, this.objectGL.add(this.rootObject), this.rootObject.position.x = 950, this.rootObject.position.y = -300, this.rootObject.position.z = 0, this.bubble = new e("images/b-line-reeducation/bubble/bubble-alt.png", 565, 306, .6), this.bubble.mesh.position.x = 90, this.bubble.mesh.position.y = 30, this.bubble.mesh.position.z = 250, this.rootObject.add(this.bubble.mesh), this.loadQueue.add(this.bubble), this.arrow = new e("images/b-line-reeducation/bubble/arrow.png", 194, 119, .6), this.arrow.mesh.position.x = 30, this.arrow.mesh.position.y = -70, this.arrow.mesh.position.z = 360, this.rootObject.add(this.arrow.mesh), this.loadQueue.add(this.arrow), this.graphic = new e("images/b-line-reeducation/bubble/flee.png", 333, 333, .6), this.graphic.mesh.position.x = 100, this.graphic.mesh.position.y = 0, this.graphic.mesh.position.z = 350, this.rootObject.add(this.graphic.mesh), this.loadQueue.add(this.graphic), this.tail1 = new e("images/b-line-reeducation/bubble/bubble-tail-01.png", 47, 47, .6), this.tail1.mesh.position.x = 100, this.tail1.mesh.position.y = 135, this.tail1.mesh.position.z = 200, this.rootObject.add(this.tail1.mesh), this.loadQueue.add(this.tail1), this.tail2 = new e("images/b-line-reeducation/bubble/bubble-tail-02.png", 47, 47, .6), this.tail2.mesh.position.x = 160, this.tail2.mesh.position.y = 165, this.tail2.mesh.position.z = 150, this.rootObject.add(this.tail2.mesh), this.loadQueue.add(this.tail2), this.tail3 = new e("images/b-line-reeducation/bubble/bubble-tail-03.png", 47, 47, .6), this.tail3.mesh.position.x = 200, this.tail3.mesh.position.y = 180, this.tail3.mesh.position.z = 100, this.rootObject.add(this.tail3.mesh), this.loadQueue.add(this.tail3), this.tail3.material.opacity = this.tail2.material.opacity = this.tail1.material.opacity = this.bubble.material.opacity = this.graphic.material.opacity = this.arrow.material.opacity = 0
        }, k.load = function() {
            this.ComicObject_load(), this.objectGL.visible = !0
        }, k.draw = function() {
            this.ComicObject_draw()
        }, k.transitionIn = function() {
            this.transitionedIn || (this.timeline = new TimelineMax({
                onComplete: this.onTransitionInComplete,
                onCompleteScope: this
            }), this.timeline.insert(TweenMax.from(this.tail3.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-50"
            }), 0), this.timeline.insert(TweenMax.from(this.tail2.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-100"
            }), .2), this.timeline.insert(TweenMax.from(this.tail1.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-150"
            }), .4), this.timeline.insert(TweenMax.from(this.bubble.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-200"
            }), .6), this.timeline.insert(TweenMax.from(this.graphic.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-200"
            }), .6), this.timeline.insert(TweenMax.to(this.tail3.material, 1, {
                opacity: 1
            })), this.timeline.insert(TweenMax.to(this.tail2.material, 1, {
                opacity: 1
            }), .2), this.timeline.insert(TweenMax.to(this.tail1.material, 1, {
                opacity: 1
            }), .4), this.timeline.insert(TweenMax.to(this.bubble.material, 1, {
                opacity: 1
            }), .6), this.timeline.insert(TweenMax.to(this.graphic.material, 1, {
                opacity: 1
            }), .8), this.timeline.insert(TweenMax.to(this.arrow.material, 1, {
                opacity: 1
            }), 1), this.transitionedIn = !0)
        }, k.onTransitionInComplete = function() {
            this.addEventListener("click", this.onClick), this.addEventListener("rollOver", this.onRollOver), this.addEventListener("rollOut", this.onRollOut)
        }, k.onRollOver = function() {
            this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.to(this.graphic.mesh.position, .25, {
                ease: Power2.easeOut,
                x: 100,
                z: 450
            })), this.timeline.insert(TweenMax.to(this.arrow.mesh.position, .25, {
                ease: Power2.easeOut,
                x: 0,
                z: 460
            })), this.timeline.insert(TweenMax.to(this.bubble.mesh.position, .25, {
                ease: Power2.easeOut,
                z: 300
            }), 0), this.timeline.insert(TweenMax.to(this.tail1.mesh.position, .33, {
                ease: Power2.easeOut,
                z: 250
            }), .1), this.timeline.insert(TweenMax.to(this.tail2.mesh.position, .7, {
                ease: Power2.easeOut,
                z: 175
            }), .2), this.timeline.insert(TweenMax.to(this.tail3.mesh.position, 1, {
                ease: Power2.easeOut,
                z: 125
            }), .3)
        }, k.onRollOut = function() {
            this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.to(this.graphic.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                x: 100,
                z: 350
            })), this.timeline.insert(TweenMax.to(this.arrow.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                x: 30,
                z: 360
            })), this.timeline.insert(TweenMax.to(this.bubble.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 250
            }), 0), this.timeline.insert(TweenMax.to(this.tail1.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 200
            }), .2), this.timeline.insert(TweenMax.to(this.tail2.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 150
            }), .4), this.timeline.insert(TweenMax.to(this.tail3.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 100
            }), .6)
        }, k.onClick = function() {}, k.disposeGL = function() {
            this.timeline && this.timeline.kill(), this.objectGL.remove(this.rootObject), this.removeEventListener("click", this.onClick), this.removeEventListener("rollOver", this.onRollOver), this.removeEventListener("rollOut", this.onRollOut), this.rootObject.remove(this.bubble), this.rootObject.remove(this.arrow), this.rootObject.remove(this.graphic), this.rootObject.remove(this.tail1), this.rootObject.remove(this.tail2), this.rootObject.remove(this.tail3), this.bubble.dispose(), this.arrow.dispose(), this.graphic.dispose(), this.tail1.dispose(), this.tail2.dispose(), this.tail3.dispose(), this.bubble = null, this.arrow = null, this.graphic = null, this.tail1 = null, this.tail2 = null, this.tail3 = null, this.rootObject = null, this.ComicObject_disposeGL()
        }, k.update = function() {
            if (this.ComicObject_update(), this.active) {
                this.time++;
                var a = Math.sin(.02 * (this.time + 0)),
                    b = Math.sin(.02 * (this.time + 50)),
                    c = Math.sin(.02 * (this.time + 100)),
                    d = Math.sin(.02 * (this.time + 150));
                this.bubble.mesh.position.x += .1 * a, this.bubble.mesh.position.y += .1 * d, this.tail1.mesh.position.x += .1 * b, this.tail1.mesh.position.y += .1 * c, this.tail2.mesh.position.x += .1 * c, this.tail2.mesh.position.y += .1 * b, this.tail3.mesh.position.x += .1 * d, this.tail3.mesh.position.y += .1 * a
            }
        }, b.promote(j, "ComicObject"), j
    }), define("theboat/blinebubbles/BubbleBidong", ["underscore", "utils/inherit", "comic/ComicMetrics", "comic/display/ComicObject", "comic/display/Image", "theboat/FeverImage", "utils/Random", "utils/Color", "threejs", "threejsCSS"], function(a, b, c, d, e, f, g, h, i) {
        var j = function(b, c, d, e) {
                this.ComicObject_constructor(d, e), this.useGL = !0, this.useCSS = !1, this.interactive = !0, this.time = 0, a.bindAll(this, "onRollOver", "onRollOut", "onClick")
            },
            k = b.extend(j, d);
        return k.createCSS = function() {
            this.ComicObject_createCSS()
        }, k.createGL = function() {
            this.ComicObject_createGL(), this.transitionedIn = !1, this.rootObject = new i.Object3D, this.objectGL.add(this.rootObject), this.rootObject.position.x = 900, this.rootObject.position.y = -450, this.bubble = new e("images/b-line-bidong/bubble/bubble-alt.png", 565, 306, .6), this.bubble.mesh.position.x = 90, this.bubble.mesh.position.y = 30, this.bubble.mesh.position.z = 250, this.rootObject.add(this.bubble.mesh), this.loadQueue.add(this.bubble), this.arrow = new e("images/b-line-bidong/bubble/arrow.png", 194, 119, .6), this.arrow.mesh.position.x = 250, this.arrow.mesh.position.y = -70, this.arrow.mesh.position.z = 360, this.rootObject.add(this.arrow.mesh), this.loadQueue.add(this.arrow), this.graphic = new e("images/b-line-bidong/bubble/ba.png", 304, 382, .6), this.graphic.mesh.position.x = 100, this.graphic.mesh.position.y = 0, this.graphic.mesh.position.z = 350, this.rootObject.add(this.graphic.mesh), this.loadQueue.add(this.graphic), this.tail1 = new e("images/b-line-bidong/bubble/bubble-tail-01.png", 47, 47, .6), this.tail1.mesh.position.x = 0, this.tail1.mesh.position.y = 135, this.tail1.mesh.position.z = 200, this.rootObject.add(this.tail1.mesh), this.loadQueue.add(this.tail1), this.tail2 = new e("images/b-line-bidong/bubble/bubble-tail-02.png", 47, 47, .6), this.tail2.mesh.position.x = -60, this.tail2.mesh.position.y = 165, this.tail2.mesh.position.z = 150, this.rootObject.add(this.tail2.mesh), this.loadQueue.add(this.tail2), this.tail3 = new e("images/b-line-bidong/bubble/bubble-tail-03.png", 47, 47, .6), this.tail3.mesh.position.x = -100, this.tail3.mesh.position.y = 180, this.tail3.mesh.position.z = 100, this.rootObject.add(this.tail3.mesh), this.loadQueue.add(this.tail3), this.tail3.material.opacity = this.tail2.material.opacity = this.tail1.material.opacity = this.bubble.material.opacity = this.graphic.material.opacity = this.arrow.material.opacity = 0
        }, k.load = function() {
            this.ComicObject_load(), this.objectGL.visible = !0
        }, k.draw = function() {
            this.ComicObject_draw()
        }, k.transitionIn = function() {
            this.transitionedIn || (this.timeline = new TimelineMax({
                onComplete: this.onTransitionInComplete,
                onCompleteScope: this
            }), this.timeline.insert(TweenMax.from(this.tail3.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-50"
            }), 0), this.timeline.insert(TweenMax.from(this.tail2.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-100"
            }), .2), this.timeline.insert(TweenMax.from(this.tail1.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-150"
            }), .4), this.timeline.insert(TweenMax.from(this.bubble.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-200"
            }), .6), this.timeline.insert(TweenMax.from(this.graphic.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-200"
            }), .6), this.timeline.insert(TweenMax.to(this.tail3.material, 1, {
                opacity: 1
            })), this.timeline.insert(TweenMax.to(this.tail2.material, 1, {
                opacity: 1
            }), .2), this.timeline.insert(TweenMax.to(this.tail1.material, 1, {
                opacity: 1
            }), .4), this.timeline.insert(TweenMax.to(this.bubble.material, 1, {
                opacity: 1
            }), .6), this.timeline.insert(TweenMax.to(this.graphic.material, 1, {
                opacity: 1
            }), .8), this.timeline.insert(TweenMax.to(this.arrow.material, 1, {
                opacity: 1
            }), 1), this.transitionedIn = !0)
        }, k.onTransitionInComplete = function() {
            this.addEventListener("click", this.onClick), this.addEventListener("rollOver", this.onRollOver), this.addEventListener("rollOut", this.onRollOut)
        }, k.onRollOver = function() {
            this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.to(this.graphic.mesh.position, .25, {
                ease: Power2.easeOut,
                x: 100,
                z: 450
            })), this.timeline.insert(TweenMax.to(this.arrow.mesh.position, .25, {
                ease: Power2.easeOut,
                x: 280,
                z: 460
            })), this.timeline.insert(TweenMax.to(this.bubble.mesh.position, .25, {
                ease: Power2.easeOut,
                z: 300
            }), 0), this.timeline.insert(TweenMax.to(this.tail1.mesh.position, .33, {
                ease: Power2.easeOut,
                z: 250
            }), .1), this.timeline.insert(TweenMax.to(this.tail2.mesh.position, .7, {
                ease: Power2.easeOut,
                z: 175
            }), .2), this.timeline.insert(TweenMax.to(this.tail3.mesh.position, 1, {
                ease: Power2.easeOut,
                z: 125
            }), .3)
        }, k.onRollOut = function() {
            this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.to(this.graphic.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                x: 100,
                z: 350
            })), this.timeline.insert(TweenMax.to(this.arrow.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                x: 250,
                z: 360
            })), this.timeline.insert(TweenMax.to(this.bubble.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 250
            }), 0), this.timeline.insert(TweenMax.to(this.tail1.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 200
            }), .2), this.timeline.insert(TweenMax.to(this.tail2.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 150
            }), .4), this.timeline.insert(TweenMax.to(this.tail3.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 100
            }), .6)
        }, k.onClick = function() {}, k.disposeGL = function() {
            this.timeline && this.timeline.kill(), this.objectGL.remove(this.rootObject), this.removeEventListener("click", this.onClick), this.removeEventListener("rollOver", this.onRollOver), this.removeEventListener("rollOut", this.onRollOut), this.rootObject.remove(this.bubble), this.rootObject.remove(this.arrow), this.rootObject.remove(this.graphic), this.rootObject.remove(this.tail1), this.rootObject.remove(this.tail2), this.rootObject.remove(this.tail3), this.bubble.dispose(), this.arrow.dispose(), this.graphic.dispose(), this.tail1.dispose(), this.tail2.dispose(), this.tail3.dispose(), this.bubble = null, this.arrow = null, this.graphic = null, this.tail1 = null, this.tail2 = null, this.tail3 = null, this.rootObject = null, this.ComicObject_disposeGL()
        }, k.update = function() {
            if (this.ComicObject_update(), this.active) {
                this.time++;
                var a = Math.sin(.02 * (this.time + 0)),
                    b = Math.sin(.02 * (this.time + 50)),
                    c = Math.sin(.02 * (this.time + 100)),
                    d = Math.sin(.02 * (this.time + 150));
                this.bubble.mesh.position.x += .1 * a, this.bubble.mesh.position.y += .1 * d, this.tail1.mesh.position.x += .1 * b, this.tail1.mesh.position.y += .1 * c, this.tail2.mesh.position.x += .1 * c, this.tail2.mesh.position.y += .1 * b, this.tail3.mesh.position.x += .1 * d, this.tail3.mesh.position.y += .1 * a
            }
        }, b.promote(j, "ComicObject"), j
    }), define("theboat/blinebubbles/BubbleBackstory", ["underscore", "utils/inherit", "comic/ComicMetrics", "comic/display/ComicObject", "comic/display/Image", "theboat/FeverImage", "utils/Random", "utils/Color", "threejs", "threejsCSS"], function(a, b, c, d, e, f, g, h, i) {
        var j = function(b, c, d, e) {
                this.ComicObject_constructor(d, e), this.useGL = !0, this.useCSS = !1, this.interactive = !0, this.time = 0, a.bindAll(this, "onRollOver", "onRollOut", "onClick")
            },
            k = b.extend(j, d);
        return k.createCSS = function() {
            this.ComicObject_createCSS()
        }, k.createGL = function() {
            this.ComicObject_createGL(), this.transitionedIn = !1, this.rootObject = new i.Object3D, this.objectGL.add(this.rootObject), this.rootObject.position.x = 100, this.rootObject.position.y = -130, this.bubble = new e("images/b-line-backstory/bubble/bubble-alt.png", 565, 306, .6), this.bubble.mesh.position.x = 90, this.bubble.mesh.position.y = 30, this.bubble.mesh.position.z = 250, this.rootObject.add(this.bubble.mesh), this.loadQueue.add(this.bubble), this.arrow = new e("images/b-line-backstory/bubble/arrow.png", 194, 119, .6), this.arrow.mesh.position.x = 80, this.arrow.mesh.position.y = -70, this.arrow.mesh.position.z = 360, this.rootObject.add(this.arrow.mesh), this.loadQueue.add(this.arrow), this.graphic = new e("images/b-line-backstory/bubble/flee.png", 289, 445, .6), this.graphic.mesh.position.x = 170, this.graphic.mesh.position.y = -40, this.graphic.mesh.position.z = 350, this.rootObject.add(this.graphic.mesh), this.loadQueue.add(this.graphic), this.tail1 = new e("images/b-line-reeducation/bubble/bubble-tail-01.png", 47, 47, .6), this.tail1.mesh.position.x = 100, this.tail1.mesh.position.y = 135, this.tail1.mesh.position.z = 200, this.rootObject.add(this.tail1.mesh), this.loadQueue.add(this.tail1), this.tail2 = new e("images/b-line-reeducation/bubble/bubble-tail-02.png", 47, 47, .6), this.tail2.mesh.position.x = 160, this.tail2.mesh.position.y = 165, this.tail2.mesh.position.z = 150, this.rootObject.add(this.tail2.mesh), this.loadQueue.add(this.tail2), this.tail3 = new e("images/b-line-reeducation/bubble/bubble-tail-03.png", 47, 47, .6), this.tail3.mesh.position.x = 200, this.tail3.mesh.position.y = 180, this.tail3.mesh.position.z = 100, this.rootObject.add(this.tail3.mesh), this.loadQueue.add(this.tail3), this.tail3.material.opacity = this.tail2.material.opacity = this.tail1.material.opacity = this.bubble.material.opacity = this.graphic.material.opacity = this.arrow.material.opacity = 0
        }, k.load = function() {
            this.ComicObject_load(), this.objectGL.visible = !0
        }, k.draw = function() {
            this.ComicObject_draw()
        }, k.transitionIn = function() {
            this.transitionedIn || (this.timeline = new TimelineMax({
                onComplete: this.onTransitionInComplete,
                onCompleteScope: this
            }), this.timeline.insert(TweenMax.from(this.tail3.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-50"
            }), 0), this.timeline.insert(TweenMax.from(this.tail2.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-100"
            }), .2), this.timeline.insert(TweenMax.from(this.tail1.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-150"
            }), .4), this.timeline.insert(TweenMax.from(this.bubble.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-200"
            }), .6), this.timeline.insert(TweenMax.from(this.graphic.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-200"
            }), .6), this.timeline.insert(TweenMax.to(this.tail3.material, 1, {
                opacity: 1
            })), this.timeline.insert(TweenMax.to(this.tail2.material, 1, {
                opacity: 1
            }), .2), this.timeline.insert(TweenMax.to(this.tail1.material, 1, {
                opacity: 1
            }), .4), this.timeline.insert(TweenMax.to(this.bubble.material, 1, {
                opacity: 1
            }), .6), this.timeline.insert(TweenMax.to(this.graphic.material, 1, {
                opacity: 1
            }), .8), this.timeline.insert(TweenMax.to(this.arrow.material, 1, {
                opacity: 1
            }), 1), this.transitionedIn = !0)
        }, k.onTransitionInComplete = function() {
            this.addEventListener("click", this.onClick), this.addEventListener("rollOver", this.onRollOver), this.addEventListener("rollOut", this.onRollOut)
        }, k.onRollOver = function() {
            this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.to(this.graphic.mesh.position, .25, {
                ease: Power2.easeOut,
                x: 190,
                z: 450
            })), this.timeline.insert(TweenMax.to(this.arrow.mesh.position, .25, {
                ease: Power2.easeOut,
                x: 70,
                z: 460
            })), this.timeline.insert(TweenMax.to(this.bubble.mesh.position, .25, {
                ease: Power2.easeOut,
                z: 300
            }), 0), this.timeline.insert(TweenMax.to(this.tail1.mesh.position, .33, {
                ease: Power2.easeOut,
                z: 250
            }), .1), this.timeline.insert(TweenMax.to(this.tail2.mesh.position, .7, {
                ease: Power2.easeOut,
                z: 175
            }), .2), this.timeline.insert(TweenMax.to(this.tail3.mesh.position, 1, {
                ease: Power2.easeOut,
                z: 125
            }), .3)
        }, k.onRollOut = function() {
            this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.to(this.graphic.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                x: 170,
                z: 350
            })), this.timeline.insert(TweenMax.to(this.arrow.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                x: 30,
                z: 360
            })), this.timeline.insert(TweenMax.to(this.bubble.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 250
            }), 0), this.timeline.insert(TweenMax.to(this.tail1.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 200
            }), .2), this.timeline.insert(TweenMax.to(this.tail2.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 150
            }), .4), this.timeline.insert(TweenMax.to(this.tail3.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 100
            }), .6)
        }, k.onClick = function() {}, k.disposeGL = function() {
            this.timeline && this.timeline.kill(), this.objectGL.remove(this.rootObject), this.removeEventListener("click", this.onClick), this.removeEventListener("rollOver", this.onRollOver), this.removeEventListener("rollOut", this.onRollOut), this.rootObject.remove(this.bubble), this.rootObject.remove(this.arrow), this.rootObject.remove(this.graphic), this.rootObject.remove(this.tail1), this.rootObject.remove(this.tail2), this.rootObject.remove(this.tail3), this.bubble.dispose(), this.arrow.dispose(), this.graphic.dispose(), this.tail1.dispose(), this.tail2.dispose(), this.tail3.dispose(), this.bubble = null, this.arrow = null, this.graphic = null, this.tail1 = null, this.tail2 = null, this.tail3 = null, this.rootObject = null, this.ComicObject_disposeGL()
        }, k.update = function() {
            if (this.ComicObject_update(), this.active) {
                this.time++;
                var a = Math.sin(.02 * (this.time + 0)),
                    b = Math.sin(.02 * (this.time + 50)),
                    c = Math.sin(.02 * (this.time + 100)),
                    d = Math.sin(.02 * (this.time + 150));
                this.bubble.mesh.position.x += .1 * a, this.bubble.mesh.position.y += .1 * d, this.tail1.mesh.position.x += .1 * b, this.tail1.mesh.position.y += .1 * c, this.tail2.mesh.position.x += .1 * c, this.tail2.mesh.position.y += .1 * b, this.tail3.mesh.position.x += .1 * d, this.tail3.mesh.position.y += .1 * a
            }
        }, b.promote(j, "ComicObject"), j
    }), define("theboat/BackButton", ["underscore", "utils/inherit", "comic/ComicMetrics", "comic/display/ComicObject", "comic/display/Image", "utils/Random", "utils/Color", "threejs", "threejsCSS"], function(a, b, c, d, e, f, g, h) {
        var i = function(b, c, d, e) {
                this.ComicObject_constructor(d, e), this.useGL = !0, this.useCSS = !1, this.interactive = !0, this.inverted = b, this.orientation = c, this.primary = this.inverted ? 0 : 16777215, this.secondary = this.inverted ? 16777215 : 0, a.bindAll(this, "onRollOver", "onRollOut", "onClick")
            },
            j = b.extend(i, d);
        return j.createCSS = function() {
            this.ComicObject_createCSS()
        }, j.createGL = function() {
            this.ComicObject_createGL(), this.transitionedIn = !1, this.hitGeom = new h.PlaneBufferGeometry(200, 200), this.hitMaterial = new h.MeshBasicMaterial({
                color: 16711680,
                transparent: !0,
                opacity: 0
            }), this.hit = new h.Mesh(this.hitGeom, this.hitMaterial), this.hit.position.z = 250, this.objectGL.add(this.hit), this.rootObject = new h.Object3D, this.objectGL.add(this.rootObject), this.rootObject.rotation.x = f.between(-.25, .25), this.rootObject.rotation.y = f.between(-.25, .25), this.arrow = new e("images/ui/back/arrow.png", 126, 78, 1), this.arrow.mesh.position.z = 0, this.arrow.mesh.position.y = 0, this.arrow.mesh.rotation.z = "right" == this.orientation ? Math.PI : 0, this.rootObject.add(this.arrow.mesh), this.loadQueue.add(this.arrow), this.arrow.material.color.setHex(this.primary), this.bg1 = new e("images/ui/back/circle-01.png", 177, 177, 1), this.bg1.mesh.position.z = -25, this.bg1.mesh.position.y = 0, this.rootObject.add(this.bg1.mesh), this.loadQueue.add(this.bg1), this.bg1.material.color.setHex(this.secondary), this.bg2 = new e("images/ui/back/circle-02.png", 177, 177, .95), this.bg2.mesh.position.z = -50, this.bg2.mesh.position.y = 0, this.rootObject.add(this.bg2.mesh), this.loadQueue.add(this.bg2), this.bg2.material.color.setHex(this.primary)
        }, j.onLoadQueueComplete = function() {
            this.ComicObject_onLoadQueueComplete()
        }, j.load = function() {
            this.ComicObject_load(), this.objectGL.visible = !0
        }, j.draw = function() {
            this.ComicObject_draw()
        }, j.transitionIn = function() {
            this.transitionedIn || (this.addEventListener("click", this.onClick), this.addEventListener("rollOver", this.onRollOver), this.addEventListener("rollOut", this.onRollOut), this.transitionedIn = !0)
        }, j.onRollOver = function() {
            TweenMax.to(this.rootObject.rotation, .15, {
                ease: Power2.easeOut,
                x: 0,
                y: 0
            }), TweenMax.to(this.rootObject.position, .15, {
                ease: Power2.easeOut,
                z: 200
            }), this.bg1.material.color.setHex(this.primary), this.bg2.material.color.setHex(this.primary), this.arrow.material.color.setHex(this.secondary)
        }, j.onRollOut = function() {
            TweenMax.to(this.rootObject.rotation, .15, {
                ease: Power2.easeInOut,
                x: f.between(-.25, .25),
                y: f.between(-.25, .25)
            }), TweenMax.to(this.rootObject.position, .15, {
                ease: Power2.easeInOut,
                z: 0
            }), this.bg1.material.color.setHex(0), this.bg1.material.color.setHex(this.secondary), this.bg2.material.color.setHex(this.primary), this.arrow.material.color.setHex(this.primary)
        }, j.onClick = function() {
            var a = "right" == this.orientation ? 1 : -1;
            this.removeEventListener("click", this.onClick), this.removeEventListener("rollOver", this.onRollOver), this.removeEventListener("rollOut", this.onRollOut), TweenMax.to(this.rootObject.position, .33, {
                ease: Power2.easeInOut,
                x: 1400 * a
            })
        }, j.disposeGL = function() {
            this.timeline && this.timeline.kill(), this.rootObject.remove(this.bg1.mesh), this.rootObject.remove(this.bg2.mesh), this.rootObject.remove(this.arrow.mesh), this.objectGL.remove(this.rootObject), this.objectGL.remove(this.hit), this.hitGeom.dispose(), this.hitMaterial.dispose(), this.bg1.dispose(), this.bg2.dispose(), this.arrow.dispose(), this.hitGeom = null, this.hitMaterial = null, this.hit = null, this.rootObject = null, this.bg1 = null, this.bg2 = null, this.arrow = null
        }, j.update = function() {
            this.ComicObject_update(), this.active && (this.bg1.mesh.rotation.z += .025, this.bg2.mesh.rotation.z -= .033)
        }, b.promote(i, "ComicObject"), i
    }), define("theboat/SeaSickImageFrame", ["utils/inherit", "comic/ComicMetrics", "comic/display/ImageFrame", "utils/Random", "audio/Thump", "modernizr", "tweenMax"], function(a, b, c, d, e) {
        var f = function(a, b, c) {
                this.ImageFrame_constructor(a, b, c), this.time = d.between(0, 1e3)
            },
            g = a.extend(f, c);
        return f.audioIndex = 0, f.audioIds = ["crash01", "crash02", "crash03", "crash04"], g.createGL = function() {
            this.ImageFrame_createGL(), this.image.mesh.rotation.x = d.between(.1 * Math.PI, Math.PI * -.1), this.image.mesh.rotation.y = d.between(.1 * Math.PI, Math.PI * -.1)
        }, g.disposeGL = function() {
            this.timeline && (this.timeline.kill(), this.timeline = new TimelineMax), this.ImageFrame_disposeGL()
        }, g.update = function() {
            if (this.active) {
                var a = Math.sin(.02 * this.time),
                    b = Math.sin(.01 * this.time),
                    c = Math.sin(.035 * this.time);
                this.image.mesh.rotation.x += .01 * a * .015 * b, this.image.mesh.rotation.y += .03 * b * .04 * c, this.image.mesh.position.x += .75 * a * .85 * b, this.time++
            }
            this.ImageFrame_update()
        }, g.crash = function() {
            if ("ios" != Detectizr.os.name) {
                this.timeline && this.timeline.kill(), this.timeline = new TimelineMax;
                var a = RoughEase.ease.config({
                    strength: 3,
                    template: Quint.easeOut,
                    taper: "out"
                });
                this.timeline.add(TweenMax.to(this.image.mesh.rotation, .35, {
                    y: d.between(-.3, .3),
                    ease: a
                }), 0), this.timeline.add(TweenMax.to(this.image.mesh.rotation, .35, {
                    z: d.between(-.3, .3),
                    ease: a
                }), 0), this.timeline.add(TweenMax.to(this.image.mesh.position, .45, {
                    x: d.between(-400, 400),
                    ease: a
                }), 0), this.timeline.add(TweenMax.to(this.image.mesh.position, .45, {
                    y: d.between(-50, -100),
                    ease: a
                }), 0), this.timeline.add(TweenMax.to(this.image.mesh.position, .85, {
                    z: d.between(100, 300),
                    ease: Power4.easeOut
                }), 0);
                var b = f.audioIds[f.audioIndex],
                    c = e.get(b);
                if (f.audioIndex++, f.audioIndex >= f.audioIds.length && (f.audioIndex = 0), c.volume = .2, c.seek(0).play(), window.navigator.vibrate) {
                    for (var g = [], h = d.between(5, 8), i = 0; h > i; i++) {
                        var j = 1 - 1 / h * i;
                        g.push(i % 2 ? d.between(5, 10) * j : d.between(150, 200) * j)
                    }
                    window.navigator.vibrate(g)
                }
            }
        }, a.promote(f, "ImageFrame"), f
    }), define("theboat/GrindImageFrame", ["utils/inherit", "comic/ComicMetrics", "comic/display/ImageFrame", "utils/Random", "audio/Thump", "modernizr", "tweenMax"], function(a, b, c, d) {
        var e = function(a, b, c) {
                this.ImageFrame_constructor(a, b, c), e.allFrames = e.allFrames || [], e.allFrames.push(this)
            },
            f = a.extend(e, c);
        return e.grind = function() {
            for (var a = 0; a < e.allFrames.length; a++) {
                var b = e.allFrames[a];
                TweenMax.delayedCall(.1 * a, b.grind, null, b)
            }
        }, f.disposeGL = function() {
            this.ImageFrame_disposeGL(), this.timeline && (this.timeline.kill(), this.timeline = null, TweenMax.killDelayedCallsTo(this.grind))
        }, f.grind = function() {
            if (this.active && !this.hasGrinded) {
                this.hasGrinded = !0;
                var a = RoughEase.ease.config({
                    strength: 3,
                    template: Quint.easeInOut,
                    taper: "out"
                });
                if (this.timeline || (this.timeline = new TimelineMax), this.timeline.add(TweenMax.to(this.image.mesh.rotation, .35, {
                        y: d.between(-.3, .3),
                        ease: a
                    }), 0), this.timeline.add(TweenMax.to(this.image.mesh.rotation, 1.35, {
                        z: d.between(-.3, .3),
                        ease: a
                    }), 0), this.timeline.add(TweenMax.to(this.image.mesh.position, .45, {
                        x: d.between(-30, 30),
                        ease: a
                    }), 0), this.timeline.add(TweenMax.to(this.image.mesh.position, 1.45, {
                        y: d.between(-30, 30),
                        ease: a
                    }), 0), this.timeline.add(TweenMax.to(this.image.mesh.position, 2.85, {
                        z: d.between(20, -20),
                        ease: Power4.easeOut
                    }), 0), window.navigator.vibrate) {
                    for (var b = [], c = d.between(5, 8), e = 0; c > e; e++) {
                        var f = 1 - 1 / c * e;
                        b.push(e % 2 ? d.between(5, 10) * f : d.between(150, 200) * f);

                    }
                    window.navigator.vibrate(b)
                }
            }
        }, a.promote(e, "ImageFrame"), e
    }), define("theboat/FeverImageFrame", ["utils/inherit", "comic/ComicMetrics", "comic/display/ImageFrame", "utils/Random", "audio/Thump", "theboat/FeverImage", "modernizr", "tweenMax"], function(a, b, c, d, e, f) {
        var g = function(a, b, c) {
                this.ImageFrame_constructor(a, b, c), this.time = d.between(0, 1e3)
            },
            h = a.extend(g, c);
        return h.createGL = function() {
            this.Frame_createGL(), this.xt = .03 * Math.random(), this.xd = .005 * Math.random(), this.yt = .03 * Math.random(), this.yd = .005 * Math.random(), this.image = new f(this.imgURL, this.width, this.height), this.loadQueue.add(this.image), this.objectGL.add(this.image.mesh), this.image.mesh.rotation.x = d.between(.1 * Math.PI, Math.PI * -.1), this.image.mesh.rotation.y = d.between(.1 * Math.PI, Math.PI * -.1)
        }, h.load = function() {
            this.Frame_load(), this.objectGL.visible = !0, this.image.mesh.visible = !1
        }, h.onLoadQueueComplete = function() {
            this.Frame_onLoadQueueComplete(), this.image.mesh.visible = !0
        }, h.update = function() {
            if (this.active) {
                this.ImageFrame_update();
                var a = Math.sin(.02 * this.time),
                    b = Math.sin(.01 * this.time),
                    c = Math.sin(.035 * this.time);
                this.image.mesh.rotation.x += .01 * a * .015 * b, this.image.mesh.rotation.y += .03 * b * .04 * c, this.image.mesh.position.x += .75 * a * .85 * b, this.image.update(), this.time++
            }
        }, a.promote(g, "ImageFrame"), g
    }), define("theboat/SeaSickText", ["underscore", "utils/inherit", "comic/display/BasicText", "utils/Random", "splitText"], function(a, b, c, d) {
        var e = function(a, b, c) {
            this.BasicText_constructor(a, b, c)
        };
        e.defaultTrigger = {
            atScreenPosition: .9,
            call: "transitionIn"
        };
        var f = b.extend(e, c);
        return f.createCSS = function() {
            this.BasicText_createCSS(), this.splitText = new SplitText(this.div.getElementsByTagName("p")[0], {
                type: "lines"
            });
            for (var a = 0; a < this.splitText.lines.length; a++) {
                var b = this.splitText.lines[a];
                TweenMax.set(b, {
                    z: .1
                })
            }
            this.ease = RoughEase.ease.config({
                strength: 3,
                template: Quint.easeOut,
                taper: "out"
            })
        }, f.createGL = function() {
            this.BasicText_createGL()
        }, f.disposeCSS = function() {
            this.splitText.revert(), this.splitText = null, this.timeline && (this.timeline.kill(), this.timeline = null), this.BasicText_disposeCSS()
        }, f.draw = function() {
            this.BasicText_draw()
        }, f.crash = function() {
            if ("ios" != Detectizr.os.name) {
                this.timeline && this.timeline.kill(), this.timeline = new TimelineMax;
                for (var a = 0; a < this.splitText.lines.length; a++) {
                    var b = this.splitText.lines[a],
                        c = d.between(1.5, 2.5);
                    this.timeline.add(TweenMax.to(b, .45, {
                        x: d.between(-5, 5),
                        y: d.between(-30, -50),
                        z: d.between(-35, 35),
                        rotation: d.between(-10, 10),
                        scale: c,
                        ease: this.ease
                    }), 0), this.timeline.add(TweenMax.to(b, 3, {
                        scale: 1.25,
                        ease: Power2.easeInOut
                    }), 1)
                }
            }
        }, b.promote(e, "BasicText"), e
    }), define("theboat/ActionImageFrame", ["utils/inherit", "comic/ComicMetrics", "comic/display/ImageFrame", "utils/Random", "audio/Thump", "modernizr", "tweenMax"], function(a, b, c, d) {
        var e = function(a, b, c) {
                this.ImageFrame_constructor(a, b, c)
            },
            f = a.extend(e, c);
        return f.createGL = function() {
            this.ImageFrame_createGL(), this.hasTransitionedIn || (this.image.material.opacity = 0)
        }, f.update = function() {
            this.active && this.ImageFrame_update()
        }, f.transitionIn = function(a) {
            if (!this.hasTransitionedIn) {
                var b = "left" == a ? 1 : -1;
                this.image.material.opacity = 1, this.timeline = new TimelineMax, this.timeline.insert(TweenMax.from(this.image.mesh.position, .55, {
                    ease: Power4.easeOut,
                    y: 500,
                    x: 1e3 * b
                })), this.timeline.insert(TweenMax.from(this.image.mesh.position, .75, {
                    ease: Power4.easeOut,
                    z: 2e3
                })), this.timeline.insert(TweenMax.from(this.image.mesh.rotation, 1, {
                    ease: Power4.easeOut,
                    x: d.between(-1.5, 1.5),
                    y: d.between(-.5, .5),
                    z: d.between(-.3, .3)
                })), this.hasTransitionedIn = !0
            }
        }, a.promote(e, "ImageFrame"), e
    }), (window._gsQueue || (window._gsQueue = [])).push(function() {
        "use strict";
        window._gsDefine("TimelineMax", ["TimelineLite", "TweenLite", "easing.Ease"], function(a, b, c) {
            var d = function(b) {
                    a.call(this, b), this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._cycle = 0, this._yoyo = this.vars.yoyo === !0, this._dirty = !0
                },
                e = 1e-10,
                f = [],
                g = new c(null, null, 1, 0),
                h = d.prototype = new a;
            return h.constructor = d, h.kill()._gc = !1, d.version = "1.12.1", h.invalidate = function() {
                return this._yoyo = this.vars.yoyo === !0, this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._uncache(!0), a.prototype.invalidate.call(this)
            }, h.addCallback = function(a, c, d, e) {
                return this.add(b.delayedCall(0, a, d, e), c)
            }, h.removeCallback = function(a, b) {
                if (a)
                    if (null == b) this._kill(null, a);
                    else
                        for (var c = this.getTweensOf(a, !1), d = c.length, e = this._parseTimeOrLabel(b); --d > -1;) c[d]._startTime === e && c[d]._enabled(!1, !1);
                return this
            }, h.tweenTo = function(a, c) {
                c = c || {};
                var d, e, h, i = {
                    ease: g,
                    overwrite: c.delay ? 2 : 1,
                    useFrames: this.usesFrames(),
                    immediateRender: !1
                };
                for (e in c) i[e] = c[e];
                return i.time = this._parseTimeOrLabel(a), d = Math.abs(Number(i.time) - this._time) / this._timeScale || .001, h = new b(this, d, i), i.onStart = function() {
                    h.target.paused(!0), h.vars.time !== h.target.time() && d === h.duration() && h.duration(Math.abs(h.vars.time - h.target.time()) / h.target._timeScale), c.onStart && c.onStart.apply(c.onStartScope || h, c.onStartParams || f)
                }, h
            }, h.tweenFromTo = function(a, b, c) {
                c = c || {}, a = this._parseTimeOrLabel(a), c.startAt = {
                    onComplete: this.seek,
                    onCompleteParams: [a],
                    onCompleteScope: this
                }, c.immediateRender = c.immediateRender !== !1;
                var d = this.tweenTo(b, c);
                return d.duration(Math.abs(d.vars.time - a) / this._timeScale || .001)
            }, h.render = function(a, b, c) {
                this._gc && this._enabled(!0, !1);
                var d, g, h, i, j, k, l = this._dirty ? this.totalDuration() : this._totalDuration,
                    m = this._duration,
                    n = this._time,
                    o = this._totalTime,
                    p = this._startTime,
                    q = this._timeScale,
                    r = this._rawPrevTime,
                    s = this._paused,
                    t = this._cycle;
                if (a >= l ? (this._locked || (this._totalTime = l, this._cycle = this._repeat), this._reversed || this._hasPausedChild() || (g = !0, i = "onComplete", 0 === this._duration && (0 === a || 0 > r || r === e) && r !== a && this._first && (j = !0, r > e && (i = "onReverseComplete"))), this._rawPrevTime = this._duration || !b || a || this._rawPrevTime === a ? a : e, this._yoyo && 0 !== (1 & this._cycle) ? this._time = a = 0 : (this._time = m, a = m + 1e-4)) : 1e-7 > a ? (this._locked || (this._totalTime = this._cycle = 0), this._time = 0, (0 !== n || 0 === m && r !== e && (r > 0 || 0 > a && r >= 0) && !this._locked) && (i = "onReverseComplete", g = this._reversed), 0 > a ? (this._active = !1, 0 === m && r >= 0 && this._first && (j = !0), this._rawPrevTime = a) : (this._rawPrevTime = m || !b || a || this._rawPrevTime === a ? a : e, a = 0, this._initted || (j = !0))) : (0 === m && 0 > r && (j = !0), this._time = this._rawPrevTime = a, this._locked || (this._totalTime = a, 0 !== this._repeat && (k = m + this._repeatDelay, this._cycle = this._totalTime / k >> 0, 0 !== this._cycle && this._cycle === this._totalTime / k && this._cycle--, this._time = this._totalTime - this._cycle * k, this._yoyo && 0 !== (1 & this._cycle) && (this._time = m - this._time), this._time > m ? (this._time = m, a = m + 1e-4) : this._time < 0 ? this._time = a = 0 : a = this._time))), this._cycle !== t && !this._locked) {
                    var u = this._yoyo && 0 !== (1 & t),
                        v = u === (this._yoyo && 0 !== (1 & this._cycle)),
                        w = this._totalTime,
                        x = this._cycle,
                        y = this._rawPrevTime,
                        z = this._time;
                    if (this._totalTime = t * m, this._cycle < t ? u = !u : this._totalTime += m, this._time = n, this._rawPrevTime = 0 === m ? r - 1e-4 : r, this._cycle = t, this._locked = !0, n = u ? 0 : m, this.render(n, b, 0 === m), b || this._gc || this.vars.onRepeat && this.vars.onRepeat.apply(this.vars.onRepeatScope || this, this.vars.onRepeatParams || f), v && (n = u ? m + 1e-4 : -1e-4, this.render(n, !0, !1)), this._locked = !1, this._paused && !s) return;
                    this._time = z, this._totalTime = w, this._cycle = x, this._rawPrevTime = y
                }
                if (!(this._time !== n && this._first || c || j)) return void(o !== this._totalTime && this._onUpdate && (b || this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || f)));
                if (this._initted || (this._initted = !0), this._active || !this._paused && this._totalTime !== o && a > 0 && (this._active = !0), 0 === o && this.vars.onStart && 0 !== this._totalTime && (b || this.vars.onStart.apply(this.vars.onStartScope || this, this.vars.onStartParams || f)), this._time >= n)
                    for (d = this._first; d && (h = d._next, !this._paused || s);)(d._active || d._startTime <= this._time && !d._paused && !d._gc) && (d._reversed ? d.render((d._dirty ? d.totalDuration() : d._totalDuration) - (a - d._startTime) * d._timeScale, b, c) : d.render((a - d._startTime) * d._timeScale, b, c)), d = h;
                else
                    for (d = this._last; d && (h = d._prev, !this._paused || s);)(d._active || d._startTime <= n && !d._paused && !d._gc) && (d._reversed ? d.render((d._dirty ? d.totalDuration() : d._totalDuration) - (a - d._startTime) * d._timeScale, b, c) : d.render((a - d._startTime) * d._timeScale, b, c)), d = h;
                this._onUpdate && (b || this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || f)), i && (this._locked || this._gc || (p === this._startTime || q !== this._timeScale) && (0 === this._time || l >= this.totalDuration()) && (g && (this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !b && this.vars[i] && this.vars[i].apply(this.vars[i + "Scope"] || this, this.vars[i + "Params"] || f)))
            }, h.getActive = function(a, b, c) {
                null == a && (a = !0), null == b && (b = !0), null == c && (c = !1);
                var d, e, f = [],
                    g = this.getChildren(a, b, c),
                    h = 0,
                    i = g.length;
                for (d = 0; i > d; d++) e = g[d], e.isActive() && (f[h++] = e);
                return f
            }, h.getLabelAfter = function(a) {
                a || 0 !== a && (a = this._time);
                var b, c = this.getLabelsArray(),
                    d = c.length;
                for (b = 0; d > b; b++)
                    if (c[b].time > a) return c[b].name;
                return null
            }, h.getLabelBefore = function(a) {
                null == a && (a = this._time);
                for (var b = this.getLabelsArray(), c = b.length; --c > -1;)
                    if (b[c].time < a) return b[c].name;
                return null
            }, h.getLabelsArray = function() {
                var a, b = [],
                    c = 0;
                for (a in this._labels) b[c++] = {
                    time: this._labels[a],
                    name: a
                };
                return b.sort(function(a, b) {
                    return a.time - b.time
                }), b
            }, h.progress = function(a) {
                return arguments.length ? this.totalTime(this.duration() * (this._yoyo && 0 !== (1 & this._cycle) ? 1 - a : a) + this._cycle * (this._duration + this._repeatDelay), !1) : this._time / this.duration()
            }, h.totalProgress = function(a) {
                return arguments.length ? this.totalTime(this.totalDuration() * a, !1) : this._totalTime / this.totalDuration()
            }, h.totalDuration = function(b) {
                return arguments.length ? -1 === this._repeat ? this : this.duration((b - this._repeat * this._repeatDelay) / (this._repeat + 1)) : (this._dirty && (a.prototype.totalDuration.call(this), this._totalDuration = -1 === this._repeat ? 999999999999 : this._duration * (this._repeat + 1) + this._repeatDelay * this._repeat), this._totalDuration)
            }, h.time = function(a, b) {
                return arguments.length ? (this._dirty && this.totalDuration(), a > this._duration && (a = this._duration), this._yoyo && 0 !== (1 & this._cycle) ? a = this._duration - a + this._cycle * (this._duration + this._repeatDelay) : 0 !== this._repeat && (a += this._cycle * (this._duration + this._repeatDelay)), this.totalTime(a, b)) : this._time
            }, h.repeat = function(a) {
                return arguments.length ? (this._repeat = a, this._uncache(!0)) : this._repeat
            }, h.repeatDelay = function(a) {
                return arguments.length ? (this._repeatDelay = a, this._uncache(!0)) : this._repeatDelay
            }, h.yoyo = function(a) {
                return arguments.length ? (this._yoyo = a, this) : this._yoyo
            }, h.currentLabel = function(a) {
                return arguments.length ? this.seek(a, !0) : this.getLabelBefore(this._time + 1e-8)
            }, d
        }, !0), window._gsDefine("TimelineLite", ["core.Animation", "core.SimpleTimeline", "TweenLite"], function(a, b, c) {
            var d = function(a) {
                    b.call(this, a), this._labels = {}, this.autoRemoveChildren = this.vars.autoRemoveChildren === !0, this.smoothChildTiming = this.vars.smoothChildTiming === !0, this._sortChildren = !0, this._onUpdate = this.vars.onUpdate;
                    var c, d, e = this.vars;
                    for (d in e) c = e[d], g(c) && -1 !== c.join("").indexOf("{self}") && (e[d] = this._swapSelfInParams(c));
                    g(e.tweens) && this.add(e.tweens, 0, e.align, e.stagger)
                },
                e = 1e-10,
                f = c._internals.isSelector,
                g = c._internals.isArray,
                h = [],
                i = window._gsDefine.globals,
                j = function(a) {
                    var b, c = {};
                    for (b in a) c[b] = a[b];
                    return c
                },
                k = function(a, b, c, d) {
                    a._timeline.pause(a._startTime), b && b.apply(d || a._timeline, c || h)
                },
                l = h.slice,
                m = d.prototype = new b;
            return d.version = "1.12.1", m.constructor = d, m.kill()._gc = !1, m.to = function(a, b, d, e) {
                var f = d.repeat && i.TweenMax || c;
                return b ? this.add(new f(a, b, d), e) : this.set(a, d, e)
            }, m.from = function(a, b, d, e) {
                return this.add((d.repeat && i.TweenMax || c).from(a, b, d), e)
            }, m.fromTo = function(a, b, d, e, f) {
                var g = e.repeat && i.TweenMax || c;
                return b ? this.add(g.fromTo(a, b, d, e), f) : this.set(a, e, f)
            }, m.staggerTo = function(a, b, e, g, h, i, k, m) {
                var n, o = new d({
                    onComplete: i,
                    onCompleteParams: k,
                    onCompleteScope: m,
                    smoothChildTiming: this.smoothChildTiming
                });
                for ("string" == typeof a && (a = c.selector(a) || a), f(a) && (a = l.call(a, 0)), g = g || 0, n = 0; n < a.length; n++) e.startAt && (e.startAt = j(e.startAt)), o.to(a[n], b, j(e), n * g);
                return this.add(o, h)
            }, m.staggerFrom = function(a, b, c, d, e, f, g, h) {
                return c.immediateRender = 0 != c.immediateRender, c.runBackwards = !0, this.staggerTo(a, b, c, d, e, f, g, h)
            }, m.staggerFromTo = function(a, b, c, d, e, f, g, h, i) {
                return d.startAt = c, d.immediateRender = 0 != d.immediateRender && 0 != c.immediateRender, this.staggerTo(a, b, d, e, f, g, h, i)
            }, m.call = function(a, b, d, e) {
                return this.add(c.delayedCall(0, a, b, d), e)
            }, m.set = function(a, b, d) {
                return d = this._parseTimeOrLabel(d, 0, !0), null == b.immediateRender && (b.immediateRender = d === this._time && !this._paused), this.add(new c(a, 0, b), d)
            }, d.exportRoot = function(a, b) {
                a = a || {}, null == a.smoothChildTiming && (a.smoothChildTiming = !0);
                var e, f, g = new d(a),
                    h = g._timeline;
                for (null == b && (b = !0), h._remove(g, !0), g._startTime = 0, g._rawPrevTime = g._time = g._totalTime = h._time, e = h._first; e;) f = e._next, b && e instanceof c && e.target === e.vars.onComplete || g.add(e, e._startTime - e._delay), e = f;
                return h.add(g, 0), g
            }, m.add = function(e, f, h, i) {
                var j, k, l, m, n, o;
                if ("number" != typeof f && (f = this._parseTimeOrLabel(f, 0, !0, e)), !(e instanceof a)) {
                    if (e instanceof Array || e && e.push && g(e)) {
                        for (h = h || "normal", i = i || 0, j = f, k = e.length, l = 0; k > l; l++) g(m = e[l]) && (m = new d({
                            tweens: m
                        })), this.add(m, j), "string" != typeof m && "function" != typeof m && ("sequence" === h ? j = m._startTime + m.totalDuration() / m._timeScale : "start" === h && (m._startTime -= m.delay())), j += i;
                        return this._uncache(!0)
                    }
                    if ("string" == typeof e) return this.addLabel(e, f);
                    if ("function" != typeof e) throw "Cannot add " + e + " into the timeline; it is not a tween, timeline, function, or string.";
                    e = c.delayedCall(0, e)
                }
                if (b.prototype.add.call(this, e, f), (this._gc || this._time === this._duration) && !this._paused && this._duration < this.duration())
                    for (n = this, o = n.rawTime() > e._startTime; n._timeline;) o && n._timeline.smoothChildTiming ? n.totalTime(n._totalTime, !0) : n._gc && n._enabled(!0, !1), n = n._timeline;
                return this
            }, m.remove = function(b) {
                if (b instanceof a) return this._remove(b, !1);
                if (b instanceof Array || b && b.push && g(b)) {
                    for (var c = b.length; --c > -1;) this.remove(b[c]);
                    return this
                }
                return "string" == typeof b ? this.removeLabel(b) : this.kill(null, b)
            }, m._remove = function(a, c) {
                b.prototype._remove.call(this, a, c);
                var d = this._last;
                return d ? this._time > d._startTime + d._totalDuration / d._timeScale && (this._time = this.duration(), this._totalTime = this._totalDuration) : this._time = this._totalTime = this._duration = this._totalDuration = 0, this
            }, m.append = function(a, b) {
                return this.add(a, this._parseTimeOrLabel(null, b, !0, a))
            }, m.insert = m.insertMultiple = function(a, b, c, d) {
                return this.add(a, b || 0, c, d)
            }, m.appendMultiple = function(a, b, c, d) {
                return this.add(a, this._parseTimeOrLabel(null, b, !0, a), c, d)
            }, m.addLabel = function(a, b) {
                return this._labels[a] = this._parseTimeOrLabel(b), this
            }, m.addPause = function(a, b, c, d) {
                return this.call(k, ["{self}", b, c, d], this, a)
            }, m.removeLabel = function(a) {
                return delete this._labels[a], this
            }, m.getLabelTime = function(a) {
                return null != this._labels[a] ? this._labels[a] : -1
            }, m._parseTimeOrLabel = function(b, c, d, e) {
                var f;
                if (e instanceof a && e.timeline === this) this.remove(e);
                else if (e && (e instanceof Array || e.push && g(e)))
                    for (f = e.length; --f > -1;) e[f] instanceof a && e[f].timeline === this && this.remove(e[f]);
                if ("string" == typeof c) return this._parseTimeOrLabel(c, d && "number" == typeof b && null == this._labels[c] ? b - this.duration() : 0, d);
                if (c = c || 0, "string" != typeof b || !isNaN(b) && null == this._labels[b]) null == b && (b = this.duration());
                else {
                    if (f = b.indexOf("="), -1 === f) return null == this._labels[b] ? d ? this._labels[b] = this.duration() + c : c : this._labels[b] + c;
                    c = parseInt(b.charAt(f - 1) + "1", 10) * Number(b.substr(f + 1)), b = f > 1 ? this._parseTimeOrLabel(b.substr(0, f - 1), 0, d) : this.duration()
                }
                return Number(b) + c
            }, m.seek = function(a, b) {
                return this.totalTime("number" == typeof a ? a : this._parseTimeOrLabel(a), b !== !1)
            }, m.stop = function() {
                return this.paused(!0)
            }, m.gotoAndPlay = function(a, b) {
                return this.play(a, b)
            }, m.gotoAndStop = function(a, b) {
                return this.pause(a, b)
            }, m.render = function(a, b, c) {
                this._gc && this._enabled(!0, !1);
                var d, f, g, i, j, k = this._dirty ? this.totalDuration() : this._totalDuration,
                    l = this._time,
                    m = this._startTime,
                    n = this._timeScale,
                    o = this._paused;
                if (a >= k ? (this._totalTime = this._time = k, this._reversed || this._hasPausedChild() || (f = !0, i = "onComplete", 0 === this._duration && (0 === a || this._rawPrevTime < 0 || this._rawPrevTime === e) && this._rawPrevTime !== a && this._first && (j = !0, this._rawPrevTime > e && (i = "onReverseComplete"))), this._rawPrevTime = this._duration || !b || a || this._rawPrevTime === a ? a : e, a = k + 1e-4) : 1e-7 > a ? (this._totalTime = this._time = 0, (0 !== l || 0 === this._duration && this._rawPrevTime !== e && (this._rawPrevTime > 0 || 0 > a && this._rawPrevTime >= 0)) && (i = "onReverseComplete", f = this._reversed), 0 > a ? (this._active = !1, 0 === this._duration && this._rawPrevTime >= 0 && this._first && (j = !0), this._rawPrevTime = a) : (this._rawPrevTime = this._duration || !b || a || this._rawPrevTime === a ? a : e, a = 0, this._initted || (j = !0))) : this._totalTime = this._time = this._rawPrevTime = a, this._time !== l && this._first || c || j) {
                    if (this._initted || (this._initted = !0), this._active || !this._paused && this._time !== l && a > 0 && (this._active = !0), 0 === l && this.vars.onStart && 0 !== this._time && (b || this.vars.onStart.apply(this.vars.onStartScope || this, this.vars.onStartParams || h)), this._time >= l)
                        for (d = this._first; d && (g = d._next, !this._paused || o);)(d._active || d._startTime <= this._time && !d._paused && !d._gc) && (d._reversed ? d.render((d._dirty ? d.totalDuration() : d._totalDuration) - (a - d._startTime) * d._timeScale, b, c) : d.render((a - d._startTime) * d._timeScale, b, c)), d = g;
                    else
                        for (d = this._last; d && (g = d._prev, !this._paused || o);)(d._active || d._startTime <= l && !d._paused && !d._gc) && (d._reversed ? d.render((d._dirty ? d.totalDuration() : d._totalDuration) - (a - d._startTime) * d._timeScale, b, c) : d.render((a - d._startTime) * d._timeScale, b, c)), d = g;
                    this._onUpdate && (b || this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || h)), i && (this._gc || (m === this._startTime || n !== this._timeScale) && (0 === this._time || k >= this.totalDuration()) && (f && (this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !b && this.vars[i] && this.vars[i].apply(this.vars[i + "Scope"] || this, this.vars[i + "Params"] || h)))
                }
            }, m._hasPausedChild = function() {
                for (var a = this._first; a;) {
                    if (a._paused || a instanceof d && a._hasPausedChild()) return !0;
                    a = a._next
                }
                return !1
            }, m.getChildren = function(a, b, d, e) {
                e = e || -9999999999;
                for (var f = [], g = this._first, h = 0; g;) g._startTime < e || (g instanceof c ? b !== !1 && (f[h++] = g) : (d !== !1 && (f[h++] = g), a !== !1 && (f = f.concat(g.getChildren(!0, b, d)), h = f.length))), g = g._next;
                return f
            }, m.getTweensOf = function(a, b) {
                var d, e, f = this._gc,
                    g = [],
                    h = 0;
                for (f && this._enabled(!0, !0), d = c.getTweensOf(a), e = d.length; --e > -1;)(d[e].timeline === this || b && this._contains(d[e])) && (g[h++] = d[e]);
                return f && this._enabled(!1, !0), g
            }, m._contains = function(a) {
                for (var b = a.timeline; b;) {
                    if (b === this) return !0;
                    b = b.timeline
                }
                return !1
            }, m.shiftChildren = function(a, b, c) {
                c = c || 0;
                for (var d, e = this._first, f = this._labels; e;) e._startTime >= c && (e._startTime += a), e = e._next;
                if (b)
                    for (d in f) f[d] >= c && (f[d] += a);
                return this._uncache(!0)
            }, m._kill = function(a, b) {
                if (!a && !b) return this._enabled(!1, !1);
                for (var c = b ? this.getTweensOf(b) : this.getChildren(!0, !0, !1), d = c.length, e = !1; --d > -1;) c[d]._kill(a, b) && (e = !0);
                return e
            }, m.clear = function(a) {
                var b = this.getChildren(!1, !0, !0),
                    c = b.length;
                for (this._time = this._totalTime = 0; --c > -1;) b[c]._enabled(!1, !1);
                return a !== !1 && (this._labels = {}), this._uncache(!0)
            }, m.invalidate = function() {
                for (var a = this._first; a;) a.invalidate(), a = a._next;
                return this
            }, m._enabled = function(a, c) {
                if (a === this._gc)
                    for (var d = this._first; d;) d._enabled(a, !0), d = d._next;
                return b.prototype._enabled.call(this, a, c)
            }, m.duration = function(a) {
                return arguments.length ? (0 !== this.duration() && 0 !== a && this.timeScale(this._duration / a), this) : (this._dirty && this.totalDuration(), this._duration)
            }, m.totalDuration = function(a) {
                if (!arguments.length) {
                    if (this._dirty) {
                        for (var b, c, d = 0, e = this._last, f = 999999999999; e;) b = e._prev, e._dirty && e.totalDuration(), e._startTime > f && this._sortChildren && !e._paused ? this.add(e, e._startTime - e._delay) : f = e._startTime, e._startTime < 0 && !e._paused && (d -= e._startTime, this._timeline.smoothChildTiming && (this._startTime += e._startTime / this._timeScale), this.shiftChildren(-e._startTime, !1, -9999999999), f = 0), c = e._startTime + e._totalDuration / e._timeScale, c > d && (d = c), e = b;
                        this._duration = this._totalDuration = d, this._dirty = !1
                    }
                    return this._totalDuration
                }
                return 0 !== this.totalDuration() && 0 !== a && this.timeScale(this._totalDuration / a), this
            }, m.usesFrames = function() {
                for (var b = this._timeline; b._timeline;) b = b._timeline;
                return b === a._rootFramesTimeline
            }, m.rawTime = function() {
                return this._paused ? this._totalTime : (this._timeline.rawTime() - this._startTime) * this._timeScale
            }, d
        }, !0)
    }), window._gsDefine && window._gsQueue.pop()(), define("timelineMax", ["tweenMax"], function(a) {
        return function() {
            var b;
            return b || a.TimelineMax
        }
    }(this)), define("theboat/ChapterHeading", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/FadeImage", "comic/display/Splash", "utils/Random", "timelineMax", "tweenMax"], function(a, b, c, d, e, f) {
        var g = function(a) {
            this.Splash_constructor(), this.chapterNum = a
        };
        g.lookup = [{
            chapterImage: {
                url: "images/chapter-headings/chapter-1.png",
                width: 391,
                height: 70
            },
            titleImage: {
                url: "images/chapter-headings/chapter-1-title.png",
                width: 530,
                height: 90
            }
        }, {
            chapterImage: {
                url: "images/chapter-headings/chapter-2.png",
                width: 404,
                height: 57
            },
            titleImage: {
                url: "images/chapter-headings/chapter-2-title.png",
                width: 564,
                height: 88
            }
        }, {
            chapterImage: {
                url: "images/chapter-headings/chapter-3.png",
                width: 395,
                height: 62
            },
            titleImage: {
                url: "images/chapter-headings/chapter-3-title.png",
                width: 863,
                height: 99
            }
        }, {
            chapterImage: {
                url: "images/chapter-headings/chapter-4.png",
                width: 407,
                height: 48
            },
            titleImage: {
                url: "images/chapter-headings/chapter-4-title.png",
                width: 919,
                height: 105
            }
        }, {
            chapterImage: {
                url: "images/chapter-headings/chapter-5.png",
                width: 391,
                height: 51
            },
            titleImage: {
                url: "images/chapter-headings/chapter-5-title.png",
                width: 470,
                height: 112
            }
        }, {
            chapterImage: {
                url: "images/chapter-headings/chapter-6.png",
                width: 417,
                height: 63
            },
            titleImage: {
                url: "images/chapter-headings/chapter-6-title.png",
                width: 718,
                height: 128
            }
        }];
        var h = a.extend(g, f);
        return h.createCSS = function() {
            this.Splash_createCSS()
        }, h.createGL = function() {
            this.Splash_createGL(), this.rootObject = new b.Object3D, this.lookupItem = g.lookup[this.chapterNum], this.chapterImage = new d(this.lookupItem.chapterImage.url, this.lookupItem.chapterImage.width, this.lookupItem.chapterImage.height, .4), this.rootObject.add(this.chapterImage.mesh), this.loadQueue.add(this.chapterImage), this.titleImage = new d(this.lookupItem.titleImage.url, this.lookupItem.titleImage.width, this.lookupItem.titleImage.height, 1), this.rootObject.add(this.titleImage.mesh), this.loadQueue.add(this.titleImage), this.chapterImage.material.opacity = 0, this.titleImage.material.opacity = 0, this.chapterImage.mesh.position.y = 50, this.titleImage.mesh.position.y = -50, this.chapterImage.mesh.position.z = 600, this.titleImage.mesh.position.z = 600, this.hasTransitionedIn && (TweenMax.set(this.chapterImage.mesh.position, {
                z: 0
            }), TweenMax.set(this.chapterImage.material, {
                opacity: 1
            }), TweenMax.set(this.titleImage.mesh.position, {
                z: 0
            }), TweenMax.set(this.titleImage.material, {
                opacity: 1
            })), this.objectGL.add(this.rootObject)
        }, h.transitionIn = function() {
            this.active && (this.hasTransitionedIn = !0, this.timeline = new TimelineMax, this.timeline.add(TweenMax.to(this.chapterImage.mesh.position, 3.5, {
                ease: Power4.easeOut,
                z: 0
            }), 0), this.timeline.add(TweenMax.to(this.titleImage.mesh.position, 3.5, {
                ease: Power4.easeOut,
                z: 0
            }), .25), this.timeline.add(TweenMax.to(this.chapterImage.material, .25, {
                ease: Power2.easeOut,
                opacity: 1
            }), 0), this.timeline.add(TweenMax.to(this.titleImage.material, .25, {
                ease: Power2.easeOut,
                opacity: 1
            }), .25))
        }, h.update = function() {}, h.disposeGL = function() {
            this.timeline && (this.timeline.kill(), this.timeline = null), this.rootObject.remove(this.chapterImage.mesh), this.rootObject.remove(this.titleImage.mesh), this.chapterImage.dispose(), this.titleImage.dispose(), this.chapterImage = null, this.titleImage = null, this.Splash_disposeGL()
        }, a.promote(g, "Splash"), g
    }), define("theboat/fx/SeaSick", ["utils/Random"], function() {
        var a = function() {},
            b = a.prototype;
        return b.init = function(a) {
            this.camera = a.camera, this.i = 1
        }, b.crash = function() {
            if ("ios" != Detectizr.os.name) {
                var a = Date.now();
                if (!this.lastCrash || a - this.lastCrash > 2500) {
                    var b = this.i % 2 == 0 ? -1 : 1;
                    this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.to(this.camera.position, 1.5, {
                        ease: Power4.easeOut,
                        x: 400 * b
                    }), 0), this.timeline.insert(TweenMax.to(this.camera.position, 5.5, {
                        ease: Power4.easeInOut,
                        x: 0 * b
                    }), 1.5), this.timeline.insert(TweenMax.to(this.camera.rotation, .75, {
                        ease: Power4.easeOut,
                        z: .3 * b
                    }), 0), this.timeline.insert(TweenMax.to(this.camera.rotation, 6.75, {
                        ease: Power2.easeInOut,
                        z: .05 * b
                    }), .75), this.i++, this.lastCrash = a
                }
            }
        }, b.revert = function() {
            "ios" != Detectizr.os.name && (this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.to(this.camera.position, 4, {
                ease: Power4.easeInOut,
                x: 0
            })), this.timeline.insert(TweenMax.to(this.camera.rotation, 4, {
                ease: Power4.easeInOut,
                z: 0
            })))
        }, b.update = function() {}, b.beforeUpdate = function() {}, a
    }), define("theboat/fx/UserMotion", ["underscore", "modernizr", "math/ArmyKnife", "math/Interpolation"], function(a, b, c, d) {
        var e = function() {},
            f = e.prototype;
        return f.init = function(b) {
            this.tmpRX = 0, this.tmpRY = 0, this.camera = b.camera, this.containerGL = b.containerGL, this.rootGL = b.rootGL, this.rootCSS = b.rootCSS, this.rendererGL = b.rendererGL, a.bindAll(this, "onMouseMove", "onOrientation"), document.documentElement.addEventListener("mousemove", this.onMouseMove), window.DeviceOrientationEvent && window.addEventListener("deviceorientation", this.onOrientation), this.px = 0, this.py = 0, this.gamma = 0, this.beta = 0
        }, f.onMouseMove = function(a) {
            var b = document.documentElement.offsetWidth,
                d = document.documentElement.offsetWidth;
            this.px = c.map(a.clientX, 0, b, -1, 1, !1, !1, !1), this.py = c.map(a.clientY, 0, d, -1, 1, !1, !1, !1)
        }, f.onOrientation = function(a) {
            this.beta = c.map(a.beta, -27, 27, -1, 1, !1, !0, !0), this.gamma = c.map(a.gamma, -30, -75, -1, 1, !1, !0, !0)
        }, f.beforeUpdate = function() {
            this.tmpRX = this.rootGL.rotation.x, this.tmpRY = this.rootGL.rotation.y, this.rootGL.rotation.x = 0, this.rootGL.rotation.y = 0
        }, f.update = function() {
            var a = 0,
                b = 0;
            "tablet" == Detectizr.device.type || "mobile" == Detectizr.device.type ? (b = c.map(this.beta, -1, 1, -.2, .2, !1, !1, !1), a = c.map(this.gamma, -1, 1, -.05, .05, !1, !1, !1)) : (b = c.map(this.px, -1, 1, -.035, .035, !1, !1, !1), a = c.map(this.py, -1, 1, -.06, .06, !1, !1, !1)), this.rootGL.rotation.y = this.tmpRY, this.rootGL.rotation.y = d.lerp(this.rootGL.rotation.y, b, .05), this.rootCSS.rotation.y = this.rootGL.rotation.y
        }, e
    }), define("theboat/fx/Receed", ["utils/Random"], function() {
        var a = function() {},
            b = a.prototype;
        return b.init = function(a) {
            this.camera = a.camera
        }, b.transitionIn = function() {
            this.onTweenUpdate = this.onTweenUpdate.bind(this), TweenMax.to(this.camera, 1.5, {
                ease: Power4.easeOut,
                fov: 90,
                onUpdate: this.onTweenUpdate
            });
            var a = Math.random() > .5 ? -.2 : .2;
            TweenMax.to(this.camera.rotation, 1.5, {
                z: a
            });
            var b = Math.random() > .5 ? -1200 : 1200;
            TweenMax.to(this.camera.position, 1.5, {
                ease: Power4.easeOut,
                x: b
            })
        }, b.onTweenUpdate = function() {
            this.camera.updateProjectionMatrix()
        }, b.transitionOut = function() {}, b.update = function() {}, b.beforeUpdate = function() {}, a
    }), define("theboat/MiniPreloaderDisplay", ["underscore", "threejs", "comic/display/Image", "createjsEventDispatcher", "utils/Random", "utils/Color", "comic/Queue", "math/ArmyKnife"], function(a, b, c, d, e) {
        var f = function() {
                this.object = new b.Object3D, this.time = 0, this.vz = Math.random() > .5 ? -.1 : -.1, this.draw()
            },
            g = f.prototype;
        return f.geometry = new b.PlaneBufferGeometry(24, 24, 1, 1), f.texture1 = b.ImageUtils.loadTexture("images/ui/preloader-mini-bg-01.png"), f.material1 = new b.MeshBasicMaterial({
            map: f.texture1
        }), f.material1.transparent = !0, f.material1.opacity = .33, g.draw = function() {
            this.innerObject = new b.Object3D, this.circle1 = new b.Mesh(f.geometry, f.material1), this.innerObject.add(this.circle1), this.object.position.z = 90, this.innerObject.rotation.x = e.between(-.5, .5), this.innerObject.rotation.y = e.between(-.5, .5), this.object.add(this.innerObject)
        }, g.dispose = function() {
            this.innerObject.remove(this.circle1), this.object.remove(this.innerObject), this.circle1 = null
        }, g.update = function() {
            this.innerObject.rotation.z += this.vz
        }, f
    }), define("theboat/SplashPreloaderDisplay", ["underscore", "threejs", "comic/display/Image", "createjsEventDispatcher", "utils/Random", "utils/Color", "comic/Queue", "math/ArmyKnife"], function(a, b) {
        var c = function() {
                this.object = new b.Object3D, this.draw()
            },
            d = c.prototype;
        return c.geometry = new b.PlaneBufferGeometry(187, 30, 1, 1), c.texture1 = b.ImageUtils.loadTexture("images/ui/text-loading-grey.png"), c.material1 = new b.MeshBasicMaterial({
            map: c.texture1
        }), c.material1.transparent = !0, c.material1.opacity = .33, d.draw = function() {
            this.mesh = new b.Mesh(c.geometry, c.material1), this.object.position.z = 10, this.object.add(this.mesh)
        }, d.dispose = function() {
            this.object.remove(this.mesh), this.mesh = null, this.object = null
        }, d.update = function() {}, c
    }), define("text!html/credits.html", [], function() {
        return '<div class="end">\n\n    <div class="about">\n        <p>On April 30, 1975, Saigon fell to the North Vietnamese army.</p>\n        <p>Approximately two million people fled Vietnam over the next two decades, often by sea. By 1995, 800,000\n            refugees fleeing by boat had been resettled in other countries. It is estimated between 200,000 and 400,000\n            did not survive the journey.</p>\n        <p>In 1975 there were only 700 Vietnamese living in Australia, and public opinion was against accepting the\n            so-called &lsquo;boat people&rsquo;. It was when the scale of the humanitarian crisis became\n            internationally known in the late 1970s that the government led public opinion and dramatically increased\n            Australia&rsquo;s refugee intake.</p>\n        <p>By 1977, 2,753 Vietnamese refugees had been authorised to resettle in Australia. By 1995 this figure was\n            111,000.</p>\n        <p>Today, approximately 1% of the Australian population were born in Vietnam.</p>\n    </div>\n\n    <div class="credits">\n        <img src="images/115-end/credits-alt.png" alt="Credits" />\n        <div class="top-billings">\n            <p>Based on the short story, &lsquo;The Boat&rsquo;, by Nam Le</p>\n            <ul>\n                <li><strong>Adaptation: </strong>Matt Huynh</li>\n                <li><strong>Interaction: </strong>Matt Smith</li>\n                <li><strong>Producer: </strong>Kylie Boltin</li>\n                <li><strong>Sound design: </strong>Sam Petty</li>\n                <li><strong>Comic consultant: </strong>C.W. Chan</li>\n                <li><strong>Archive research: </strong>Ace Pecenpetelovski</li>\n            </ul>\n        </div>\n        <h3>Archive</h3>\n        <div class="col-1">\n            <h4>Side Story &mdash; Ancestors</h4>\n            <ul>\n                <li>&copy; Stephanie Maze/CORBIS</li>\n                <li>&copy; Jacques Pavlovsky/Sygma/CORBIS</li>\n            </ul>\n\n            <h4>Side Story &mdash; Re-education</h4>\n            <ul>\n                <li>News Ltd/Newspix</li>\n                <li>AP via AAP/Nick Ut</li>\n                <li>&copy; Marc Riboud/Magnum Photos</li>\n            </ul>\n\n            <h4>Side Story &mdash; Bidong Refugee Camp</h4>\n            <ul>\n                <li>NAA: A12111, 2/1981/46A/135</li>\n                <li>National Library of Australia, vn3209945</li>\n                <li>NAA: A12111, 2/1978/46A/10</li>\n                <li>Michael Jensen, Vietnamese boat people disembarking from the boats with their luggage, 1977, National\n                    Library of Australia, vn3209945\n                </li>\n            </ul>\n        </div>\n        <div class="col-2">\n            <ul>\n                <li>&copy; Bettmann/CORBIS</li>\n                <li>AP via AAP</li>\n                <li>British Red Cross</li>\n            </ul>\n            <h4>Side Story &mdash; Quyen and Truong&rsquo;s Backstory</h4>\n            <ul>\n                <li>&copy; Bettmann/CORBIS</li>\n                <li>&copy; Jacques Pavlovsky/Sygma/CORBIS</li>\n                <li>&copy; Bettmann/CORBIS</li>\n                <li>&copy; Bettmann/CORBIS</li>\n                <li>&copy; Bettmann/CORBIS</li>\n            </ul>\n            <ul>\n                <li>Australian Broadcasting Corporation Library Sales</li>\n            </ul>\n            <ul>\n                <li>Historical copy: Dr Scott Brook</li>\n            </ul>\n        </div>\n        <div class="other-billings">\n            <p>&ldquo;The Mother Heart&rdquo; performed by Tuyetle Tran with thanks to SBS Radio and SBS Content.</p>\n        </div>\n        <div class="purchase-points">\n            <p>Locations where the collection of short stories &ldquo;The Boat&rdquo; by Nam Le can be purchased:<br/>\n                <ul>\n                    <li>In Australia: <a target="_blank" href="http://www.penguin.com.au/products/9780143009610/boat">Penguin Books Australia.</a></li>\n                    <li>In the USA: <a target="_blank" href="http://www.amazon.com/The-Boat-Stories-Nam-Le/dp/0307388190">Amazon</a>, <a target="_blank" href="http://www.barnesandnoble.com/w/boat-nam-le/1100265456?ean=9780307388193">Barnes &amp; Noble</a>, and <a target="_blank" href="http://www.powells.com/biblio/61-9780307388193-0">Powell&rsquo;s</a>.</li>\n                    <li>In the UK at <a target="_blank" href="http://www.amazon.co.uk/Boat-Nam/dp/1847671616">Amazon</a> and <a target="_blank" href="https://www.waterstones.com/book/the-boat/nam-le/9781847671615">Waterstones</a>.</li>\n                </ul>\n            </p>\n        </div>\n    </div>\n</div>\n\n';

    }), define("events/appEvents", ["underscore", "backbone"], function(a, b) {
        var c = a.extend({}, b.Events);
        return c
    }), define("views/ComicView", ["jquery", "underscore", "backbone", "tracking/Tracking", "audio/Thump", "comic/audio/Atmos", "comic/audio/SoundEffect", "theboat/TheBoatComic", "comic/display/Frame", "comic/display/ImageFrame", "comic/display/Splash", "comic/display/BasicText", "comic/display/BubbleText", "theboat/000preloaderrain/PreloaderRainSplash", "theboat/001landing/LandingSplash", "theboat/007stormarrived/StormArrivedSplash", "theboat/007stormarrived/StormArrivedText", "theboat/013incense/IncenseSplash", "theboat/015song/SongPt1Splash", "theboat/015song/SongPt2Splash", "theboat/015song/SongPt3Splash", "theboat/021garden/GardenSplash", "theboat/022ba/BaSplash", "theboat/026busletter/BusLetterSplash", "theboat/028closingwound/ClosingWoundSplash", "theboat/033markets/MarketsSplash", "theboat/037canoe/CanoeSplash", "theboat/040signal/SignalSplash", "theboat/041canoeandboat/CanoeAndBoatSplash", "theboat/042boat/BoatSplash", "theboat/044bodies/BodiesSplash", "theboat/051afterstorm/AfterStormSplash", "theboat/054maifeveralt/MaiFeverSplash", "theboat/058maifeverbreaks/MaiFeverBreaksSplash", "theboat/060batroung/BaTroungSplash", "theboat/063troungshadow/TroungShadowSplash", "theboat/068troungcrane/TroungCraneSplash", "theboat/071punch/PunchSplash", "theboat/072notacloud/NotACloudSplash", "theboat/075derrickcrane/DerrickCraneSplash", "theboat/076belowdeck/BelowDeckSplash", "theboat/080troungfever/TroungFeverSplash", "theboat/082iwanttogoup/IWantToGoUpSplash", "theboat/082deck/DeckSplash", "theboat/083troungface/TroungFaceSplash", "theboat/085hatch/HatchSplash", "theboat/092scream/ScreamSplash", "theboat/094thatafternoon/ThatAfternoonSplash", "theboat/098songpt4/SongPt4Splash", "theboat/101birds/BirdsSplash", "theboat/103somethingamiss/SomethingAmissSplash", "theboat/106troungbody/TroungBodySplash", "theboat/109quyenmourns/QuyenMournsSplash", "theboat/115end/EndSplash", "theboat/blineancestors/BLineAncestorsSplash1", "theboat/blineancestors/BLineAncestorsSplash2", "theboat/blineancestors/BLineAncestorsSplash3", "theboat/blinebackstory/BLineBackStoryBlackMatte", "theboat/blinebackstory/BLineBackStorySplash1", "theboat/blinebackstory/BLineBackStorySplash2", "theboat/blinebackstory/BLineBackStoryRunning", "theboat/blinereeducation/BLineReeducationSplash1", "theboat/blinereeducation/BLineReeducationSplash2", "theboat/blinereeducation/BLineReeducationSplash3", "theboat/blinebidong/BLineBidongSplash1", "theboat/blinebidong/BLineBidongSplash2", "theboat/blinebidong/BLineBidongSplash3", "theboat/blinebubbles/BubbleAncestors", "theboat/blinebubbles/BubbleReeducation", "theboat/blinebubbles/BubbleBidong", "theboat/blinebubbles/BubbleBackstory", "theboat/BackButton", "theboat/SeaSickImageFrame", "theboat/GrindImageFrame", "theboat/FeverImageFrame", "theboat/SeaSickText", "theboat/ActionImageFrame", "theboat/ChapterHeading", "theboat/fx/SeaSick", "theboat/fx/UserMotion", "theboat/fx/Receed", "theboat/MiniPreloaderDisplay", "theboat/SplashPreloaderDisplay", "text!html/credits.html", "events/appEvents"], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S, T, U, V, W, X, Y, Z, $, _, aa, ba, ca, da, ea, fa, ga, ha, ia, ja, ka, la, ma, na, oa, pa, qa, ra, sa, ta, ua, va, wa, xa, ya, za, Aa, Ba, Ca, Da, Ea) {
        var Fa = c.View.extend({
            initialize: function() {
                b.bindAll(this, "onResize", "onAutoScroll", "onPreload", "onBackButtonClick", "onChapterClick", "onAnchorChange", "onSwitchStoryLine", "onSwitchDefaultStoryLine")
            },
            onBackButtonClick: function() {
                this.comic.defaultStoryLine()
            },
            createComic: function() {
                window.addEventListener("resize", this.onResize), this.comic = new h, this.comic.setSize(window.innerWidth, window.innerHeight);
                var a, b, c, e, Aa, Ea, Fa, Ga, Ha;
                j.preloaderDisplayClass = Ba, k.preloaderDisplayClass = Ca, this.comic.setPreloader(new n), this.comic.createStoryLine("ancestors", "right"), this.comic.createStoryLine("reeducation", "left"), this.comic.createStoryLine("bidong", "right"), this.comic.createStoryLine("backstory", "left"), this.comic.createAnchor("landing"), Aa = new za, this.comic.addFX(Aa), Aa = new ya, this.comic.addFX(Aa), Fa = new f("stormAtmosExt"), Fa.volumeIn = .3, Fa.volumeOut = .3, c = new o, this.comic.add(c, {
                    center: !0,
                    activeBetweenScreenPosition: {
                        min: -6.5,
                        max: 1
                    },
                    preload: !0,
                    triggers: [{
                        atScreenPosition: .4,
                        call: "hideCTA"
                    }],
                    maps: [{
                        target: Fa,
                        property: "volumeIn",
                        startScreenPosition: -7,
                        endScreenPosition: -8,
                        startValue: .3,
                        endValue: 1
                    }, {
                        target: Fa,
                        property: "volumeOut",
                        startScreenPosition: -9.5,
                        endScreenPosition: -12,
                        startValue: 1,
                        endValue: 0
                    }]
                }), this.comic.wrap(1e3), this.landingSplash = c, this.comic.createAnchor("chapter1"), Ea = new g("chapterMotif"), c = new xa(0), this.comic.add(c, {
                    center: !0,
                    triggers: [{
                        atScreenPosition: .9,
                        call: "transitionIn"
                    }, {
                        atScreenPosition: .9,
                        target: Ea,
                        call: "play"
                    }, {
                        atScreenPosition: .9,
                        target: d,
                        call: "sendCustomEvent",
                        params: ["chapter/1"]
                    }]
                }), this.comic.wrap(1200), b = new l("9col", "2tier", ['<div class="display-text medium light">', "<p>The crosswind surged in, filtering through the apertures in the rotten wood, sounding like a chorus of low moans.</p>", "<p>Hugging a beam at the top of the hatch, Mai looked out and her breath stopped. The boat had heeled so steeply that all she saw was an enormous wall of black-green water bearing down.</p>", "<p>She shut her eyes, opened them again &mdash; now the gunwale had crested the water, the ocean completely vanished.</p>", "</div>"]), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(1200), b = new va("9col", "1tier", '<p class="display-text small">A body collided into hers, slammed her against the side of the hatch door.</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(100), a = new sa("12col", "1tier", "images/003-006/01.png"), this.comic.add(a, {
                    preload: !0,
                    triggers: [{
                        atScreenPosition: .4,
                        target: c,
                        call: "changeBoat"
                    }, {
                        atScreenPosition: .4,
                        target: b,
                        call: "crash"
                    }, {
                        atScreenPosition: .4,
                        target: a,
                        call: "crash"
                    }, {
                        atScreenPosition: .4,
                        target: Aa,
                        call: "crash"
                    }]
                }), this.comic.wrap(700), b = new va("9col", "1tier", '<p class="display-text small">Other bodies &mdash; she was on top of them &mdash; thighs and ribs and arms and heads &mdash; jammed this way and that with each groaning tilt, </p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(100), a = new sa("12col", "1tier", "images/003-006/02.png"), this.comic.add(a, {
                    preload: !0,
                    triggers: [{
                        atScreenPosition: .4,
                        target: c,
                        call: "changeBoat"
                    }, {
                        atScreenPosition: .4,
                        target: b,
                        call: "crash"
                    }, {
                        atScreenPosition: .4,
                        target: a,
                        call: "crash"
                    }, {
                        atScreenPosition: .4,
                        target: Aa,
                        call: "crash"
                    }]
                }), this.comic.wrap(700), b = new va("9col", "1tier", '<p class="display-text small dark">writhing toward space as though impelling the boat to heave to,</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(100), a = new sa("12col", "1tier", "images/003-006/03.png"), this.comic.add(a, {
                    triggers: [{
                        atScreenPosition: .4,
                        target: c,
                        call: "changeBoat"
                    }, {
                        atScreenPosition: .4,
                        target: b,
                        call: "crash"
                    }, {
                        atScreenPosition: .4,
                        target: a,
                        call: "crash"
                    }, {
                        atScreenPosition: .4,
                        target: Aa,
                        call: "crash"
                    }]
                }), this.comic.wrap(700), b = new va("9col", "1tier", '<p class="display-text small dark">back into the wind.</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(100), a = new sa("12col", "1tier", "images/003-006/04.png"), this.comic.add(a, {
                    triggers: [{
                        atScreenPosition: .4,
                        target: c,
                        call: "changeBoat"
                    }, {
                        atScreenPosition: .4,
                        target: b,
                        call: "crash"
                    }, {
                        atScreenPosition: .4,
                        target: a,
                        call: "crash"
                    }, {
                        atScreenPosition: .4,
                        target: Aa,
                        call: "crash"
                    }]
                }), this.comic.wrap(700), b = new va("9col", "1tier", '<p class="display-text small dark">Instantly she looked for Truong.</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(100), a = new sa("12col", "1tier", "images/003-006/05.png"), this.comic.add(a, {
                    triggers: [{
                        atScreenPosition: .5,
                        target: Aa,
                        call: "revert"
                    }]
                }), this.comic.wrap(900), b = new l("10col", "1tier", ['<div class="display-text medium dark">', "<p>There he was, knees drawn up to his chin, face as smooth and impassive as that of a ceramic toy soldier.</p>", "</div>"]), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(400), a = new j("8col", "2tier", "images/003-006/06.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(1e3), c = new p, this.comic.add(c, {
                    center: !0,
                    activeBetweenScreenPosition: {
                        min: -5.5,
                        max: 6
                    },
                    maps: [{
                        property: "blackMatteOpacity",
                        startScreenPosition: -3.8,
                        endScreenPosition: -4,
                        startValue: 1,
                        endValue: 0
                    }]
                }), this.comic.wrap(500), Fa = new f("stormAtmosInt");
                var Ia = new q("9col", "1tier", ['<div class="display-text medium dark">', "Finally the storm arrived in force.", "</div>"]);
                this.comic.add(Ia, {
                    center: !0,
                    triggers: [{
                        atScreenPosition: .6,
                        call: "blowAway"
                    }]
                }), this.comic.wrap(200);
                var Ja = new q("9col", "1tier", ['<div class="display-text medium dark">', "The remaining light drained from the hold. Wind screamed through the cracks. She felt the panicked limbs, people clawing ", "for direction, the banging and shapeless shouts from the deck above.", "</div>"]);
                this.comic.add(Ja, {
                    center: !0
                }), this.comic.wrap(250);
                var Ka = new q("9col", "1tier", ['<div class="display-text medium dark">', "The whole world reeled. Everywhere the stink of vomit. Her stomach forced up, squashed through her throat.", "</div>"]);
                this.comic.add(Ka, {
                    center: !0
                }), this.comic.wrap(200);
                var La = new q("9col", "1tier", ['<div class="display-text medium dark">', "So this was what it was like, she thought, the moment before death.", "</div>"]);
                this.comic.add(La, {
                    center: !0,
                    triggers: [{
                        atScreenPosition: 1.4,
                        target: c,
                        call: "stormArrives"
                    }, {
                        atScreenPosition: 1.4,
                        target: Ia,
                        call: "stormArrives"
                    }, {
                        atScreenPosition: 1.4,
                        target: Ja,
                        call: "stormArrives"
                    }, {
                        atScreenPosition: 1.4,
                        target: Ka,
                        call: "stormArrives"
                    }, {
                        atScreenPosition: 1.4,
                        target: La,
                        call: "stormArrives"
                    }],
                    maps: [{
                        target: Fa,
                        property: "volumeIn",
                        startScreenPosition: 0,
                        endScreenPosition: -2,
                        startValue: 0,
                        endValue: 1
                    }, {
                        target: Fa,
                        property: "volumeOut",
                        startScreenPosition: -4,
                        endScreenPosition: -7.5,
                        startValue: 1,
                        endValue: 0
                    }]
                }), this.comic.wrap(900), b = new l("9col", "1tier", '<p class="display-text small">She tried to recall her father&rsquo;s stories &mdash; storms at sea, ten, fifteen metres high! But they rang shallow against what she&rsquo;d just seen: those dense roaring slabs of water, sky churning overhead like a puddle being mucked with a stick.</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(110), a = new j("12col", "1tier", "images/009-012/01.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(520), b = new l("9col", "1tier", '<p class="display-text small">She was crammed in by a boatload of human bodies &mdash;</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(50), a = new j("12col", "1tier", "images/009-012/02.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(500), b = new l("9col", "1tier", '<p class="display-text small">thinking of her father and becoming overwhelmed, slowly, with loneliness. As much loneliness as fear.</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(50), a = new j("12col", "1tier", "images/009-012/03-alt.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(520), b = new l("9col", "1tier", '<p class="display-text small">Concentrate, she told herself. And she did &mdash; forcing herself to concentrate,</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(50), a = new j("12col", "1tier", "images/009-012/04-alt.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(520), b = new l("9col", "1tier", '<p class="display-text small">if not &mdash; if she was unable to &mdash; on the thought of her family,</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(50), a = new j("12col", "1tier", "images/009-012/05-alt.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(520), b = new l("9col", "1tier", '<p class="display-text small">then on the contact of flesh pressed against her on every side.</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(50), a = new j("12col", "1tier", "images/009-012/06-alt.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(500), e = new i("2col", "1tier"), this.comic.add(e), b = new l("5col", "1tier", '<div class="frame-internal-text medium light"><p>She stayed in that human cocoon, heavy and rolling, concentrating, until it was over.</p></div>'), this.comic.add(b), a = new j("12col", "1tier", "images/009-012/07-alt.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(250), e = new i("6col", "1tier"), this.comic.add(e), b = new m("4col", "1tier", '<div class="bk-x-large-br-01"><div class="dialog"><p>Try to sleep.</p></div></div>'), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), this.comic.wrap(800), c = new r, this.comic.add(c, {
                    center: !0,
                    activeBetweenScreenPosition: {
                        min: -6.5,
                        max: 6
                    }
                }), this.comic.wrap(0), b = new l("12col", "1tier", '<p class="display-text small dark">She opened her eyes. It was Quyen. There was a sort of death in her face.</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(55), a = new j("12col", "1tier", "images/013-021/01.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(500), b = new l("6col", "1tier", '<p class="frame-external-text small dark">Truong had appeared silently behind his mother. He stood close by Quyen without touching her. </p>'), this.comic.add(b), this.comic.wrap(90), a = new j("6col", "1tier", "images/013-021/02.png"), this.comic.add(a), b = new l("6col", "1tier", ['<div class="frame-internal-text small dark">', "<p>", "For a moment Mai was seized with a desire to take the boy up and press him hard against her chest, ", "to keep him &mdash; his stillness, self-containment, whatever it was about him &mdash; close to her.", "</p>", "</div>"]), this.comic.add(b), this.comic.wrap(600), Ha = new na, this.comic.add(Ha, {
                    triggers: [{
                        atScreenPosition: 1.1,
                        call: "transitionIn"
                    }]
                }), Ha.addEventListener("click", function() {
                    this.comic.switchStoryLine("ancestors"), d.sendCustomEvent("sidestory/ancestors")
                }.bind(this)), this.comic.startAuthoringStoryLine("ancestors"), this.comic.wrap(500), b = new l("7col", "1tier", '<div class="display-text medium light"><p>A procession of people stepped over her measuredly, as though hypnotised.</p><p class="display-text medium light">She got up and followed them.</p></div>', {
                    offsetX: -300
                }), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(0), c = new aa, this.comic.add(c, {
                    center: !0
                }), this.comic.wrap(1200), b = new l("7col", "1tier", '<p class="display-text medium light">Pearly light bathed the stunned and salt-specked faces of the hundred people on deck, all of whom had expected to die here but were instead granted this eerie reprieve.</p>', {
                    offsetX: 300
                }), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(300), c = new ba, this.comic.add(c, {
                    center: !0
                }), this.comic.wrap(900), b = new l("9col", "1tier", '<p class="display-text small light">A dim thought struggled, stabilised, in her mind &mdash; maybe the voices on the water were those of their ancestors.</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(55), a = new j("12col", "1tier", "images/b-line-ancestors/01.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(800), b = new l("9col", "1tier", '<p class="display-text small light">What did they know? What were they so desperate to communicate?</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(75), a = new j("12col", "1tier", "images/b-line-ancestors/02.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(800), c = new ca, this.comic.add(c, {
                    center: !0
                }), this.comic.wrap(900), b = new l("9col", "1tier", '<div class="display-text medium light"><p>Now she realised where they were &mdash; where they must be. Everyone had heard about these places.</p><p>They had ventured into the fields of the dead.</p></div>', {}), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(550), Ha = new ra(!1, "left"), this.comic.add(Ha, {
                    center: !0,
                    triggers: [{
                        atScreenPosition: .8,
                        call: "transitionIn"
                    }]
                }), Ha.addEventListener("click", this.onBackButtonClick), this.comic.endAuthoringStoryLine(), this.comic.wrap(400), b = new l("9col", "1tier", '<div class="display-text medium dark">She began to smell incense from the hold. People praying to their ancestors. It lightened her head.</div>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(600), e = new i("6col", "1tier"), this.comic.add(e), b = new l("6col", "1tier", '<p class="frame-external-text small dark">She let herself pretend Quyen was speaking to her and not to Truong.</p>'), this.comic.add(b), this.comic.wrap(90), a = new j("6col", "1tier", "images/013-021/04.png"), this.comic.add(a), a = new j("6col", "1tier", "images/013-021/05.png"), this.comic.add(a), this.comic.wrap(0), b = new m("6col", "1tier", '<div class="bk-large-br-02"><div class="dialog"><p>It&rsquo;s over now. The storm&rsquo;s over, Child.</p></div></div>', {
                    offsetX: 160,
                    offsetY: -150
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), this.comic.wrap(500), b = new l("6col", "1tier", '<p class="frame-external-text small dark">Mai submitted, and when she closed her eyes, she found the hum of the phantom voices almost lulling.</p>'), this.comic.add(b), this.comic.wrap(95), a = new j("6col", "1tier", "images/013-021/06.png"), this.comic.add(a), a = new j("3col", "1tier", "images/013-021/07.png"), this.comic.add(a), b = new l("3col", "1tier", '<div class="frame-internal-text small dark"><p>Almost like a sea wind bearing men&rsquo;s voices up from the wharf.<br/><br/>At times she thought she almost recognised a voice.</p></div>'), this.comic.add(b), this.comic.wrap(0), b = new m("6col", "1tier", '<div class="bk-medium-nt-02"><div class="dialog"><p>Try to sleep.</p></div></div>', {
                    offsetX: 450,
                    offsetY: 290
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), this.comic.wrap(1e3), this.comic.createAnchor("chapter2"), Ea = new g("chapterMotif"), c = new xa(1), this.comic.add(c, {
                    center: !0,
                    triggers: [{
                        atScreenPosition: .9,
                        call: "transitionIn"
                    }, {
                        atScreenPosition: .9,
                        target: Ea,
                        call: "play"
                    }, {
                        atScreenPosition: .9,
                        target: d,
                        call: "sendCustomEvent",
                        params: ["chapter/2"]
                    }]
                }), this.comic.wrap(600);
                var Ma = new f("song");
                Fa = new f("boatAtmosExt"), Ga = new f("motif"), a = new j("12col", "1tier", "images/013-021/08.png"), this.comic.add(a), this.comic.wrap(400), b = new l("9col", "1tier", '<p class="display-text small dark">Four days ago, as Mai had been trying to sleep on deck, the song began.<br />The faint voice drifted out of the hold with a familiar undertow. It was an old<br/>Vietnamese folk song.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(550), c = new s, this.comic.add(c, {
                        center: !0,
                        activeBetweenScreenPosition: {
                            min: -6,
                            max: 3
                        },
                        maps: [{
                            property: "bgInOpacity",
                            startScreenPosition: 1.5,
                            endScreenPosition: .25,
                            startValue: 0,
                            endValue: 1
                        }, {
                            property: "bgSaturation",
                            startScreenPosition: 0,
                            endScreenPosition: -1.5,
                            startValue: 1,
                            endValue: 0
                        }, {
                            property: "bgMidOpacity",
                            startScreenPosition: 0,
                            endScreenPosition: -.75,
                            startValue: 1,
                            endValue: .5
                        }, {
                            property: "bgOutOpacity",
                            startScreenPosition: -.76,
                            endScreenPosition: -5.5,
                            startValue: 1,
                            endValue: 0
                        }, {
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 2.5,
                            endScreenPosition: 1.5,
                            startValue: 0,
                            endValue: .6
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: -4,
                            endScreenPosition: -6.5,
                            startValue: .6,
                            endValue: 0
                        }, {
                            target: Ga,
                            property: "volumeIn",
                            startScreenPosition: 5,
                            endScreenPosition: 1.5,
                            startValue: 0,
                            endValue: .5
                        }, {
                            target: Ga,
                            property: "volumeOut",
                            startScreenPosition: -3,
                            endScreenPosition: -6,
                            startValue: .5,
                            endValue: 0
                        }, {
                            target: Ma,
                            property: "volumeIn",
                            startScreenPosition: 2,
                            endScreenPosition: 0,
                            startValue: 0,
                            endValue: .65
                        }, {
                            target: Ma,
                            property: "volumeOut",
                            startScreenPosition: -1,
                            endScreenPosition: -3,
                            startValue: .65,
                            endValue: 0
                        }]
                    }), this.comic.wrap(700), b = new l("4col", "1tier", '<p class="frame-external-text small dark">In the shade of the hibiscus hedge her mother had once sung the same words to her. Her mother, who had waited each time her husband went to sea &mdash;</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">again when he left to fight the Communists, and then when he left once more, to report for re-education camp.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">That was supposed to have been the last time. And though dusk came, her mother would keep singing the soldier&rsquo;s wife&rsquo;s lament.</p>'), this.comic.add(b), this.comic.wrap(170), a = new j("4col", "1tier", "images/013-021/09.png"), this.comic.add(a), a = new j("4col", "1tier", "images/013-021/10.png"), this.comic.add(a), a = new j("4col", "1tier", "images/013-021/11.png"), this.comic.add(a), this.comic.wrap(520), b = new l("9col", "1tier", '<p class="display-text small dark">Mai followed the song into the hold.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(55), a = new j("12col", "1tier", "images/013-021/12.png"), this.comic.add(a), this.comic.wrap(500), b = new l("9col", "1tier", '<p class="display-text small dark">In the darkness she could just make out Quyen&rsquo;s form, lying on her side in front of Truong as though shielding him.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(95), a = new j("12col", "1tier", "images/013-021/13.png"), this.comic.add(a), this.comic.wrap(730), b = new l("9col", "1tier", '<div class="display-text medium dark"><p>Her voice was thin, attenuated in some way, stripped of vibrato. It didn&rsquo;t slide up to notes the way traditional singers&rsquo; did.</p><p>Overcome with feeling, Mai wanted to ask Quyen to stop singing. How could she explain it all?</p></div>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(500), c = new t, this.comic.add(c, {
                        center: !0,
                        triggers: [{
                            atScreenPosition: 1.2,
                            call: "fall"
                        }]
                    }), this.comic.wrap(800), b = new l("4col", "1tier", '<p class="frame-external-text small dark">With a shock, Mai realised Quyen&rsquo;s mouth was not moving. She was asleep. The singing cut off as Truong lifted, turned his head, staring at Mai with large obsidian eyes.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Stunned, she said nothing. She looked back at his pale face, the slight, girlish curve beneath his nose to his lips. The intentness of his gaze.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Then, slowly, she felt whatever turmoil broke and banked inside her becoming still.</p>'), this.comic.add(b), this.comic.wrap(195), a = new j("4col", "1tier", "images/013-021/14.png"), this.comic.add(a), a = new j("4col", "1tier", "images/013-021/15.png"), this.comic.add(a), a = new j("4col", "1tier", "images/013-021/16.png"), this.comic.add(a), this.comic.wrap(800), b = new l("9col", "1tier", '<p class="display-text medium dark">Watching her the whole time, Truong opened his mouth and took a deep breath:</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(500), c = new u, this.comic.add(c, {
                        center: !0
                    }), this.comic.wrap(900), b = new l("9col", "1tier", '<p class="display-text medium dark">Here&rsquo;s how it began.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(500), b = new l("9col", "1tier", '<p class="display-text small dark">In the yard, beneath branches of mastic and white storax flowers, next to the deciduated hibiscus hedge, her mother had hooked her fingers under her waistband and handed her a damp roll of money.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(315), b = new m("12col", "1tier", '<div class="bk-large-b-01"><div class="dialog"><p>Child can spend<br/>it however Child likes.</p></div></div>', {
                        offsetX: 630,
                        offsetY: -180
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), Fa = new f("gardenAtmos"), c = new v, this.comic.add(c, {
                        center: !0,
                        maps: [{
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 3.5,
                            endScreenPosition: 2,
                            startValue: 0,
                            endValue: 1
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: -1,
                            endScreenPosition: -2,
                            startValue: 1,
                            endValue: 0
                        }]
                    }), this.comic.wrap(700), b = new l("4col", "1tier", '<p class="frame-external-text small dark">The ink faded from counting and recounting.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Knowing her mother&rsquo;s usual frugality, Mai struggled to respond.</p>'), this.comic.add(b), this.comic.wrap(95), b = new m("4col", "1tier", '<div class="bk-medium-tr-01"><div class="dialog"><p>But try to keep it, nha?</p></div></div>', {
                        offsetX: 200,
                        offsetY: -10
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("4col", "1tier", "images/013-021/17.png"), this.comic.add(a), a = new j("4col", "1tier", "images/013-021/18.png"), this.comic.add(a), a = new j("4col", "1tier", "images/013-021/19.png"), this.comic.add(a), this.comic.wrap(700), b = new m("12col", "1tier", '<div class="bk-x-large-nt-01"><div class="dialog"><p>Child is a good child.</p></div></div>', {
                        offsetX: 450
                    }), this.comic.add(b, {
                        center: !0,
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(500), Fa = new f("hospitalAtmos"), b = new l("9col", "1tier", '<p class="display-text small dark">Her father had been released, three months prior, from re-education camp, and immediately admitted into the hospital at Vinh Long. He&rsquo;d barely reacted when she came to greet him. He had gone blind.</p>'), this.comic.add(b, {
                        center: !0,
                        maps: [{
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 1.5,
                            endScreenPosition: .5,
                            startValue: 0,
                            endValue: 1
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: -3,
                            endScreenPosition: -5,
                            startValue: 1,
                            endValue: 0
                        }]
                    }), this.comic.wrap(400), Ha = new oa, this.comic.add(Ha, {
                        triggers: [{
                            atScreenPosition: 1.1,
                            call: "transitionIn"
                        }]
                    }), Ha.addEventListener("click", function() {
                        this.comic.switchStoryLine("reeducation"), d.sendCustomEvent("sidestory/reeducation")
                    }.bind(this)), this.comic.startAuthoringStoryLine("reeducation"), this.comic.wrap(500), b = new l("9col", "1tier", '<p class="display-text medium light">By the time the Communists took Ban Me Thuot in March 1975, the Americans were long gone and the Southern regiments in tatters &mdash;</p>', {
                        offsetX: -200
                    }), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(450), c = new ha, this.comic.add(c, {
                        center: !0
                    }), this.comic.wrap(1200), b = new l("9col", "1tier", '<p class="display-text medium light">soldiers deserting, taking cover as civilians, fleeing into the jungles. Escape on every man&rsquo;s mind.</p>', {
                        offsetX: 200
                    }), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(850), c = new ia, this.comic.add(c, {
                        center: !0
                    }), this.comic.wrap(400), e = new i("8col"), this.comic.add(e), a = new j("4col", "1tier", "images/b-line-reeducation/boots.png"), this.comic.add(a), this.comic.wrap(850), b = new l("9col", "1tier", '<p class="display-text medium light">Soon they all learned there was no escaping the Communists: not in the country they now controlled. They were all skilled at turning north against south, village against village.</p>', {
                        offsetX: -200
                    }), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(850), c = new ja, this.comic.add(c, {
                        center: !0
                    }), this.comic.wrap(1200), b = new l("9col", "1tier", '<p class="display-text medium light">Husbands against wives. Children against parents. The only chance was to denounce everyone, and everything.</p>', {}), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(200), Ha = new ra(!1, "right"), this.comic.add(Ha, {
                        center: !0,
                        triggers: [{
                            atScreenPosition: .8,
                            call: "transitionIn"
                        }]
                    }), Ha.addEventListener("click", this.onBackButtonClick), this.comic.endAuthoringStoryLine(), c = new w, this.comic.add(c, {
                        center: !0
                    }), this.comic.wrap(870), b = new l("7col", "1tier", '<p class="frame-external-text small dark">The doctors were baffled because they could identify no physical abnormality, no root cause. His re-education had blinded him.</p>'), this.comic.add(b), b = new l("5col", "1tier", '<p class="frame-external-text small dark">Mai had come with so much to say &mdash; so much to ask &mdash; but he may as well have been deaf as blind.</p>'), this.comic.add(b), this.comic.wrap(96), a = new j("7col", "1tier", "images/022-028/02.png"), this.comic.add(a), a = new j("5col", "1tier", "images/022-028/03.png"), this.comic.add(a), this.comic.wrap(480), e = new i("8col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small dark">She felt insolent looking at his face when he didn&rsquo;t look back.</p>'), this.comic.add(b), this.comic.wrap(90), b = new m("4col", "1tier", '<div class="bk-small-bl-01"><div class="dialog"><p>Can Ba see?</p></div></div>', {
                        offsetX: 640,
                        offsetY: 50
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("4col", "1tier", '<div class="bk-medium-bl-01"><div class="dialog"><p>Ba will get better?</p></div></div>', {
                        offsetX: 660,
                        offsetY: -10
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("8col", "1tier", "images/022-028/04.png"), this.comic.add(a), a = new j("4col", "1tier", "images/022-028/05.png"), this.comic.add(a), this.comic.wrap(500), b = new m("0col", "1tier", '<div class="bk-large-bl-02"><div class="dialog"><p>At sixteen, Ba had to look after his whole family.</p></div></div>', {
                        offsetX: 730,
                        offsetY: -80
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-bl-01"><div class="dialog"><p>Look after your mother.</p></div></div>', {
                        offsetX: 1150,
                        offsetY: 20
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("4col", "1tier", "images/022-028/06.png"), this.comic.add(a), a = new j("4col", "1tier", "images/022-028/07.png"), this.comic.add(a), a = new j("4col", "1tier", "images/022-028/08.png"), this.comic.add(a), this.comic.wrap(500), a = new j("4col", "1tier", "images/022-028/09.png"), this.comic.add(a), a = new j("4col", "1tier", "images/022-028/10.png"), this.comic.add(a), a = new j("4col", "1tier", "images/022-028/11.png"), this.comic.add(a), this.comic.wrap(500), b = new m("12col", "1tier", '<div class="bk-medium-bl-01"><div class="dialog"><p>Stop crying, Child.</p></div></div>', {
                        offsetX: 500,
                        offsetY: -50
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("12col", "1tier", "images/022-028/12.png"), this.comic.add(a), this.comic.wrap(700), b = new m("12col", "1tier", '<div class="bk-x-large-nt-01"><div class="dialog"><p>Child is a good child.</p></div></div>', {
                        offsetX: 450
                    }), this.comic.add(b, {
                        center: !0,
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(450), b = new l("9col", "1tier", '<p class="display-text small dark">The next day her mother put her on a bus to Rach Gia. It was a five-hour trip, she was told. In the market she would be picked up by an uncle she had never met.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(300), b = new m("12col", "1tier", '<div class="bk-medium-bl-01"><div class="dialog"><p>Give this to him.</p></div></div>', {
                        offsetX: 350,
                        offsetY: 0,
                        offsetZ: -150
                    }), this.comic.add(b, {
                        center: !0,
                        triggers: [{
                            atScreenPosition: .9,
                            call: "transitionIn"
                        }]
                    }), this.comic.wrap(0), Fa = new f("busStationAtmos"), c = new x, this.comic.add(c, {
                        center: !0,
                        maps: [{
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 1.5,
                            endScreenPosition: -1.5,
                            startValue: 0,
                            endValue: .9
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: -3,
                            endScreenPosition: -5,
                            startValue: .9,
                            endValue: 0
                        }]
                    }), this.comic.wrap(800), e = new i("2col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Mai stood there, breathing hard, sensing the larger finality of their parting.</p>'), this.comic.add(b), this.comic.wrap(150), e = new i("2col", "1tier"), this.comic.add(e), b = new m("4col", "1tier", '<div class="bk-medium-br-01"><div class="dialog"><p>Do you still have the money?</p></div></div>', {
                        offsetX: -160,
                        offsetY: 100
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-x-small-tl-01"><div class="dialog"><p>Yes.</p></div></div>', {
                        offsetX: -160,
                        offsetY: 220
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("1col", "1tier", '<div class="bk-large-bl-02"><div class="dialog"><p>Remember not to let anyone see it.</p></div></div>', {
                        offsetX: 170,
                        offsetY: -115
                    }), this.comic.add(b, {
                        triggers: [{
                            atScreenPosition: .7,
                            call: "transitionIn"
                        }]
                    }), b = new m("4col", "1tier", '<div class="bk-x-small-tl-01"><div class="dialog"><p>Yes.</p></div></div>', {
                        offsetX: 155,
                        offsetY: 230
                    }), this.comic.add(b, {
                        triggers: [{
                            atScreenPosition: .5,
                            call: "transitionIn"
                        }]
                    }), this.comic.wrap(0), e = new i("2col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/022-028/13.png"), this.comic.add(a), a = new j("4col", "1tier", "images/022-028/14.png"), this.comic.add(a), this.comic.wrap(500), e = new i("2col", "1tier"), this.comic.add(e), b = new m("4col", "1tier", '<div class="bk-large-br-01"><div class="dialog"><p>Child hasn&rsquo;t said goodbye to Ba.</p></div></div>', {
                        offsetX: -190,
                        offsetY: -40
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("1col", "1tier", '<div class="bk-medium-bl-02"><div class="dialog"><p>Ma will say for Child.</p></div></div>', {
                        offsetX: 30,
                        offsetY: 0
                    }), this.comic.add(b, {
                        triggers: [{
                            atScreenPosition: .7,
                            call: "transitionIn"
                        }]
                    }), this.comic.wrap(0), e = new i("2col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/022-028/15.png"), this.comic.add(a), a = new j("4col", "1tier", "images/022-028/16.png"), this.comic.add(a), this.comic.wrap(500), a = new j("12col", "1tier", "images/022-028/17a.png"), this.comic.add(a), this.comic.wrap(500), b = new l("6col", "1tier", '<p class="frame-external-text small dark">On the bus, Mai looked out the back window &mdash;</p>'),
                    this.comic.add(b), b = new l("6col", "1tier", '<p class="frame-external-text small dark">searching for her mother&rsquo;s face &mdash;</p>'), this.comic.add(b), this.comic.wrap(60), a = new j("6col", "1tier", "images/022-028/17.png"), this.comic.add(a), a = new j("6col", "1tier", "images/022-028/18.png"), this.comic.add(a), this.comic.wrap(1300), Ea = new g("busDrive", .4), c = new y, this.comic.add(c, {
                        center: !0,
                        activeBetweenScreenPosition: {
                            min: -3,
                            max: 2
                        },
                        triggers: [{
                            atScreenPosition: 1,
                            target: Ea,
                            call: "play"
                        }],
                        maps: [{
                            property: "bgInOpacity",
                            startScreenPosition: 2,
                            endScreenPosition: .3,
                            startValue: 0,
                            endValue: .8
                        }, {
                            property: "bgDistance",
                            startScreenPosition: 2,
                            endScreenPosition: -1.15,
                            startValue: 1,
                            endValue: 0
                        }, {
                            property: "bgOutOpacity",
                            startScreenPosition: 0,
                            endScreenPosition: -1.15,
                            startValue: .8,
                            endValue: 0
                        }]
                    }), this.comic.wrap(0), b = new l("9col", "1tier", '<p class="display-text medium dark">but the street, like a wound, had closed over the space where it had been.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(1900), this.comic.createAnchor("chapter3"), c = new xa(2), Ea = new g("chapterMotif"), this.comic.add(c, {
                        center: !0,
                        triggers: [{
                            atScreenPosition: .9,
                            call: "transitionIn"
                        }, {
                            atScreenPosition: .9,
                            target: Ea,
                            call: "play"
                        }, {
                            atScreenPosition: .9,
                            target: d,
                            call: "sendCustomEvent",
                            params: ["chapter/3"]
                        }]
                    }), this.comic.wrap(900), Fa = new f("marketsAtmos"), b = new l("9col", "1tier", '<p class="display-text small dark">In Rach Gia, in the milling market, Mai waited for Uncle next to a grease stand; petrol and oils and lubricants spread out like lunch condiments.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(210), c = new z, this.comic.add(c, {
                        center: !0,
                        triggers: [{
                            atScreenPosition: .6,
                            call: "transitionIn"
                        }],
                        maps: [{
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 1.5,
                            endScreenPosition: .5,
                            startValue: 0,
                            endValue: .75
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: .5,
                            endScreenPosition: -2,
                            startValue: .75,
                            endValue: 0
                        }]
                    }), this.comic.wrap(0), b = new m("12col", "1tier", '<div class="bk-large-bl-01 emphasis bk-font-large"><div class="dialog"><p>Mai!</p></div></div>', {
                        offsetX: 50,
                        offsetY: 180,
                        offsetZ: 300
                    }), this.comic.add(b, {
                        center: !0,
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), b = new m("12col", "1tier", '<div class="bk-small-bl-01 emphasis"><div class="dialog"><p>Mai,<br/>ha?</p></div></div>', {
                        offsetX: 700,
                        offsetY: 290,
                        offsetZ: 200
                    }), this.comic.add(b, {
                        center: !0,
                        triggers: [{
                            atScreenPosition: .6,
                            call: "transitionIn"
                        }]
                    }), this.comic.wrap(650), b = new l("4col", "1tier", '<p class="frame-external-text small dark">She was confused. He said it again and glared straight at her for the first time. She tried hard not to cry.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">All at once Mai remembered her mother&rsquo;s instructions. The folded paper.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">He read it, furtively, refolded it into a tiny square.</p>'), this.comic.add(b), this.comic.wrap(0), b = new m("4col", "1tier", '<div class="bk-medium-tr-02"><div class="dialog"><p>Child has the letter?</p></div></div>', {
                        offsetX: -450,
                        offsetY: 310
                    }), this.comic.add(b, {
                        center: !0,
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(120), a = new j("4col", "1tier", "images/034-041/01.png"), this.comic.add(a), a = new j("4col", "1tier", "images/034-041/02.png"), this.comic.add(a), a = new j("4col", "1tier", "images/034-041/03.png"), this.comic.add(a), this.comic.wrap(800), b = new l("12col", "1tier", ['<div class="display-text medium dark">', "<p>", "The first hiding place was behind a house by the river.", "</p>", "</div>"]), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(410), e = new i("2col"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Uncle told her to climb to the top of a plank bed and stay there, don’t go anywhere.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">She lay with the corrugated aluminium roof just a few thumbs above her head, and in the middle of the day the heat was unbearable.</p>'), this.comic.add(b), this.comic.wrap(130), e = new i("2col"), this.comic.add(e), a = new j("4col", "1tier", "images/034-041/03-a.png"), this.comic.add(a), a = new j("4col", "1tier", "images/034-041/03-b.png"), this.comic.add(a), this.comic.wrap(800), b = new l("4col", "1tier", ['<div class="frame-internal-text small dark">', "<p>", "A few days later Uncle came to get her &mdash; it was the worst of the afternoon heat &mdash; and ", "made her memorise a name and address in case anyone asked questions.", "</p>", "</div>"]), this.comic.add(b), a = new j("4col", "1tier", "images/034-041/04.png"), this.comic.add(a), b = new l("4col", "1tier", ['<div class="frame-internal-text small dark">', "<p>", "It was the last she saw of him.", "</p>", "</div>"]), this.comic.add(b), this.comic.wrap(800), e = new i("2col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/034-041/05.png"), this.comic.add(a), b = new l("6col", "1tier", ['<div class="frame-internal-text small light">', "<p>", "The second hiding place was a boat anchored beneath a bridge on the Loc Thang river.", "<br/><br/>", "One night the owner appeared and tapped her on the shoulder. He tapped five other people as well. They all followed him out ", "into the hot dark strange openness.", "</p>", "</div>"]), this.comic.add(b), this.comic.wrap(800), Ea = new g("match"), Fa = new f("rowingAtmos"), c = new A, this.comic.add(c, {
                        center: !0,
                        activeBetweenScreenPosition: {
                            min: -14,
                            max: 5
                        },
                        triggers: [{
                            atScreenPosition: -2,
                            call: "showSignal"
                        }, {
                            atScreenPosition: -2,
                            target: Ea,
                            call: "play"
                        }],
                        maps: [{
                            property: "visibleHack",
                            startScreenPosition: 2,
                            endScreenPosition: 1.9,
                            startValue: 0,
                            endValue: 1
                        }, {
                            property: "whiteMatteOpacityIn",
                            startScreenPosition: 2,
                            endScreenPosition: 1.5,
                            startValue: 1,
                            endValue: 0
                        }, {
                            property: "canoeOpacity",
                            startScreenPosition: 1,
                            endScreenPosition: .7,
                            startValue: 0,
                            endValue: 1
                        }, {
                            property: "canoePosition",
                            startScreenPosition: 2,
                            endScreenPosition: -13,
                            startValue: 0,
                            endValue: 1
                        }, {
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 2.5,
                            endScreenPosition: .5,
                            startValue: 0,
                            endValue: .75
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: -12,
                            endScreenPosition: -14,
                            startValue: .75,
                            endValue: 0
                        }]
                    }), this.comic.wrap(0), e = new i("1col", "1tier"), this.comic.add(e), b = new l("6col", "1tier", ['<div class="frame-internal-text small light">', "<p>", "A rower waited nearby.", "<br/><br/>", "After some hesitation and muted dissent they climbed into his canoe, Mai in the middle.", "</p>", "</div>"]), this.comic.add(b), a = new j("4col", "1tier", "images/034-041/06.png"), this.comic.add(a), this.comic.wrap(850), a = new j("4col", "1tier", "images/034-041/07.png"), this.comic.add(a), this.comic.wrap(800), e = new i("5col", "1tier"), this.comic.add(e), a = new j("7col", "1tier", "images/034-041/08.png"), this.comic.add(a), this.comic.wrap(800), a = new j("4col", "1tier", "images/034-041/09.png"), this.comic.add(a), this.comic.wrap(225), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/034-041/10.png"), this.comic.add(a), this.comic.wrap(800), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/034-041/11.png"), this.comic.add(a), this.comic.wrap(800), e = new i("9col", "1tier"), this.comic.add(e), a = new j("2col", "1tier", "images/034-041/12.png"), this.comic.add(a), this.comic.wrap(800), a = new j("4col", "1tier", "images/034-041/13.png"), this.comic.add(a), this.comic.wrap(225), e = new i("9col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/034-041/14.png"), this.comic.add(a), this.comic.wrap(950), b = new l("9col", "1tier", ['<div class="display-text small light">', "<p>At that moment Mai realised the incense stick &mdash; its dim glow, its smoke, perhaps &mdash; was their signal.</p>", "</div>"]), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(450), e = new i("5col", "1tier"), this.comic.add(e), b = new m("4col", "1tier", '<div class="bk-medium-bl-02"><div class="dialog"><p>Maybe they&rsquo;re waiting.</p></div></div>', {
                        offsetX: -130,
                        offsetY: -30
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("4col", "1tier", '<div class="bk-large-l-01"><div class="dialog"><p>Move out of the reeds so they can see the signal.</p></div></div>', {
                        offsetX: -590,
                        offsetY: 100
                    }), this.comic.add(b, {
                        triggers: [{
                            atScreenPosition: .7,
                            call: "transitionIn"
                        }]
                    }), this.comic.wrap(0), e = new i("2col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/034-041/18.png"), this.comic.add(a), this.comic.wrap(225), e = new i("7col", "1tier"), this.comic.add(e), b = new m("4col", "1tier", '<div class="bk-medium-r-01 emphasis"><div class="dialog"><p>Keep your head down!</p></div></div>', {
                        offsetX: -50,
                        offsetY: 90
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), e = new i("7col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/034-041/19.png"), this.comic.add(a), this.comic.wrap(337), e = new i("2col", "1tier"), this.comic.add(e), b = new m("4col", "1tier", '<div class="bk-large-bl-01"><div class="dialog"><p>They won&rsquo;t wait! Move out of the reeds!</p></div></div>', {
                        offsetX: 260,
                        offsetY: -80
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), e = new i("2col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/034-041/20.png"), this.comic.add(a), this.comic.wrap(800), Ea = new g("whisper"), e = new i("4col", "1tier"), this.comic.add(e), b = new m("4col", "1tier", '<div class="bk-medium-bl-01"><div class="dialog"><p>My name is Chi Quyen.</p></div></div>', {
                        offsetX: 140,
                        offsetY: -50
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), e = new i("4col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/034-041/21.png"), this.comic.add(a, {
                        triggers: [{
                            atScreenPosition: 1,
                            target: Ea,
                            call: "play"
                        }]
                    }), this.comic.wrap(600), e = new i("1col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small light">The woman used the word &lsquo;Chi&rsquo;, for older sister.</p>'), this.comic.add(b), this.comic.wrap(90), e = new i("1col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/034-041/22.png"), this.comic.add(a), this.comic.wrap(225), e = new i("8col", "1tier"), this.comic.add(e), b = new m("4col", "1tier", '<div class="bk-medium-br-02"><div class="dialog"><p>Chi is by<br/>herself too.</p></div></div>', {
                        offsetX: -140,
                        offsetY: -50
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/034-041/23.png"), this.comic.add(a), this.comic.wrap(600), e = new i("4col", "1tier"), this.comic.add(e), b = new m("0col", "1tier", '<div class="bk-medium-br-02"><div class="dialog"><p>If they come, follow Chi, nha?</p></div></div>', {
                        offsetX: -200,
                        offsetY: -70
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-small-bl-01"><div class="dialog"><p>If who comes?</p></div></div>', {
                        offsetX: 410,
                        offsetY: 40
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-large-t-01"><div class="dialog"><p>Jump out and swim into the reeds. You can swim, no?</p></div></div>', {
                        offsetX: -20,
                        offsetY: 250
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), e = new i("4col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/034-041/24.png"), this.comic.add(a), this.comic.wrap(1e3), Ea = new g("shh"), e = new i("2col", "1tier"), this.comic.add(e), b = new m("0col", "1tier", '<div class="bk-x-large-bl-01 emphasis"><div class="dialog"><p>Fuck<br/>your<br/>mother!</p></div></div>', {
                        offsetX: 560,
                        offsetY: -700
                    }), this.comic.add(b, {
                        triggers: [{
                            atScreenPosition: 1.4,
                            call: "transitionIn"
                        }, {
                            atScreenPosition: 1.4,
                            target: Ea,
                            call: "play"
                        }]
                    }), b = new m("0col", "1tier", '<div class="bk-x-large-nt-01 emphasis"><div class="dialog"><p>I said keep your head down!</p></div></div>', {
                        offsetX: 700,
                        offsetY: 100
                    }), this.comic.add(b, {
                        triggers: [{
                            atScreenPosition: .7,
                            call: "transitionIn"
                        }]
                    }), this.comic.wrap(0), e = new i("2col", "1tier"), this.comic.add(e), a = new j("8col", "2tier", "images/034-041/25.png"), this.comic.add(a), this.comic.wrap(1e3), Ea = new g("signalAccent"), c = new B, this.comic.add(c, {
                        center: !0,
                        activeBetweenScreenPosition: {
                            min: -10,
                            max: 10
                        },
                        triggers: [{
                            atScreenPosition: .7,
                            call: "flash"
                        }, {
                            atScreenPosition: .7,
                            target: Ea,
                            call: "play"
                        }]
                    }), this.comic.wrap(900), c = new C, this.comic.add(c, {
                        center: !0,
                        maps: [{
                            property: "canoePosition",
                            startScreenPosition: 1.3,
                            endScreenPosition: .4,
                            startValue: 1,
                            endValue: 0
                        }]
                    }), this.comic.wrap(900), a = new D, this.comic.add(a, {
                        center: !0
                    }), this.comic.wrap(1200), b = new l("9col", "1tier", '<div class="display-text medium light"><p>Inside the hold, the stench was incredible, almost eye-watering. The smell of urine and human waste, sweat and vomit. The black space full of people. Bodies upon bodies. Eyes and eyes and eyes.</p></div>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(600), a = new sa("12col", "1tier", "images/042-047/01.png"), this.comic.add(a, {
                        center: !0
                    }), this.comic.wrap(900), Fa = new f("boatCreaking"), c = new E, this.comic.add(c, {
                        center: !0,
                        activeBetweenScreenPosition: {
                            min: -6,
                            max: 6
                        },
                        maps: [{
                            property: "bgOpacity",
                            startScreenPosition: 0,
                            endScreenPosition: -2,
                            startValue: 1,
                            endValue: 0
                        }, {
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 2.5,
                            endScreenPosition: .5,
                            startValue: 0,
                            endValue: 1
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: 0,
                            endScreenPosition: -4,
                            startValue: 1,
                            endValue: 0
                        }]
                    }), this.comic.wrap(0), Fa = new f("gunfireAtmos"), b = new l("9col", "1tier", '<div class="display-text medium light"><p>If she&rsquo;d thought the first boat was crowded, here she could barely breathe, let alone move. Later she counted at least two hundred people, squashed into a space meant for fifteen.</p></div>'), this.comic.add(b, {
                        center: !0,
                        maps: [{
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 1,
                            endScreenPosition: .5,
                            startValue: 0,
                            endValue: .75
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: 0,
                            endScreenPosition: -4,
                            startValue: .75,
                            endValue: 0
                        }]
                    }), this.comic.wrap(600), b = new l("4col", "1tier", '<p class="frame-external-text small light">They were gliding into a busy port. Pressed hard beneath her was the body of the boy Quyen had been talking to.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small light">A voice came from above deck, so subdued the person may have been talking to himself.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small light">She settled forward against the young boy, not wanting to hear any more. Trying to block it all out; the voices, the smell.</p>'), this.comic.add(b), this.comic.wrap(170), b = new m("0col", "1tier", '<div class="bk-medium-squiggle-t-01"><div class="bk-font-small dialog"><p>Viet Cong&hellip; manned with two M30s.</p></div></div>', {
                        offsetX: 350,
                        offsetY: -80
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-small-tr-01"><div class="bk-font-small dialog"><p>Automatic, no?</p></div></div>', {
                        offsetX: 450,
                        offsetY: 80,
                        offsetZ: 20
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-small-t-01"><div class="bk-font-small dialog"><p>Machine<br/>guns.</p></div></div>', {
                        offsetX: 350,
                        offsetY: 120,
                        offsetZ: 40
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-squiggle-t-01"><div class="bk-font-small dialog"><p>Leave at night and they shoot. They shoot<br/>anything.</p></div></div>', {
                        offsetX: 820,
                        offsetY: -90
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-small-t-01"><div class="bk-font-small dialog"><p>We&rsquo;ll find out soon<br/>enough.</p></div></div>', {
                        offsetX: 950,
                        offsetY: 60,
                        offsetZ: 80
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), a = new j("4col", "1tier", "images/042-047/02.png"), this.comic.add(a), a = new j("4col", "1tier", "images/042-047/03.png"), this.comic.add(a), a = new j("4col", "1tier", "images/042-047/04.png"), this.comic.add(a), this.comic.wrap(500), b = new l("4col", "1tier", '<p class="frame-external-text small light">She watched as Quyen reached back and with a surprisingly practised gesture pressed her palm against the boy&rsquo;s head.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small light">She pulled the boy&rsquo;s body closer to her;</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small light">it squirmed like a restless animal&rsquo;s.</p>'), this.comic.add(b), this.comic.wrap(0), b = new m("0col", "1tier", '<div class="bk-medium-b-01"><div class="dialog"><p>Don&rsquo;t be nuis-<br/>ance, Child.</p></div></div>', {
                        offsetX: 950,
                        offsetY: 210
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(150), a = new j("4col", "1tier", "images/042-047/05.png"), this.comic.add(a), a = new j("4col", "1tier", "images/042-047/06.png"), this.comic.add(a), a = new j("4col", "1tier", "images/042-047/07.png"), this.comic.add(a), this.comic.wrap(500), Ea = new g("grind"), e = new i("4col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small light">In the silence that followed, even the tidal backwash seemed loud against the hull.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small light">Then a grind against the boat. Mai had never heard a sound so sudden and hideous.</p>'), this.comic.add(b), this.comic.wrap(100), b = new m("0col", "1tier", '<div class="bk-medium-br-02"><div class="dialog"><p>This is my little brat. Truong.</p></div></div>', {
                        offsetX: 300,
                        offsetY: 50
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-small-tl-01"><div class="dialog"><p>Yours? But &mdash;</p></div></div>', {
                        offsetX: 840,
                        offsetY: 160
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-x-small-nt-01 emphasis"><div class="dialog"><p>SHH!</p></div></div>', {
                        offsetX: 600,
                        offsetY: 0
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-x-small-nt-01 emphasis"><div class="dialog"><p>SHH!</p></div></div>', {
                        offsetX: 450,
                        offsetY: 300
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-x-small-nt-01 emphasis"><div class="dialog"><p>SHH!</p></div></div>', {
                        offsetX: 770,
                        offsetY: 400
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new ta("4col", "1tier", "images/042-047/08.png"), this.comic.add(a), a = new ta("4col", "1tier", "images/042-047/09.png"), this.comic.add(a), a = new ta("4col", "1tier", "images/042-047/10.png"), this.comic.add(a), this.comic.wrap(500), e = new i("4col", "1tier"), this.comic.add(e), e = new i("4col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small light">The sound sheared off &mdash; leaving behind a deep, capacious silence.</p>'), this.comic.add(b), this.comic.wrap(75), b = new m("0col", "1tier", '<div class="bk-medium-nt-01"><div class="dialog"><p>What is it?</p></div></div>', {
                        offsetX: -20,
                        offsetY: -10
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-small-nt-01"><div class="dialog"><p>A mine?</p></div></div>', {
                        offsetX: 250,
                        offsetY: 280
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-nt-01"><div class="dialog"><p>I heard they put land mines &mdash;</p></div></div>', {
                        offsetX: 300,
                        offsetY: 360
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new ta("4col", "1tier", "images/042-047/11.png"), this.comic.add(a), a = new ta("4col", "1tier", "images/042-047/12.png"), this.comic.add(a), a = new ta("4col", "1tier", "images/042-047/13.png"), this.comic.add(a, {
                        triggers: [{
                            atScreenPosition: .9,
                            target: Ea,
                            call: "play"
                        }, {
                            atScreenPosition: .9,
                            target: ta,
                            call: "grind"
                        }]
                    }), this.comic.wrap(1e3), Ha = new pa, this.comic.add(Ha, {
                        triggers: [{
                            atScreenPosition: 1.1,
                            call: "transitionIn"
                        }]
                    }), Ha.addEventListener("click", function() {
                        this.comic.switchStoryLine("bidong"), d.sendCustomEvent("sidestory/bidong")
                    }.bind(this)), this.comic.startAuthoringStoryLine("bidong"), this.comic.wrap(500), b = new l("9col", "1tier", '<p class="display-text medium light">According to Quyen, Truong&rsquo;s father &mdash; her husband &mdash; had already made his escape. She told Mai that he had arrived safely in Pulau Bidong, one of the larger Malaysian refugee camps, eight months ago.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(350), c = new ka, this.comic.add(c, {
                        center: !0
                    }), this.comic.wrap(1300), e = new i("4col"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small light">He was waiting for them there. Why hadn&rsquo;t they travelled together?</p>'), this.comic.add(b), this.comic.wrap(75), b = new m("0col", "1tier", '<div class="bk-medium-bl-01"><div class="dialog"><p>We are going to Australia.</p></div></div>', {
                        offsetX: 850,
                        offsetY: -60
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-tl-01"><div class="dialog"><p>Do you have family there?</p></div></div>', {
                        offsetX: 750,
                        offsetY: 250
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), e = new i("4col"), this.comic.add(e), a = new j("4col", "1tier", "images/b-line-bidong/01.png"), this.comic.add(a), this.comic.wrap(1200), c = new la, this.comic.add(c, {
                        center: !0
                    }), this.comic.wrap(700), b = new m("0col", "1tier", '<div class="bk-medium-tr-01"><div class="dialog"><p>I don&rsquo;t know.</p></div></div>', {
                        offsetX: -170,
                        offsetY: 180
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-tl-01"><div class="dialog"><p>You don&rsquo;t know?</p></div></div>', {
                        offsetX: 300,
                        offsetY: 300
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-br-02"><div class="dialog"><p>Then Mai will come with us.</p></div></div>', {
                        offsetX: 560,
                        offsetY: -80
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-x-small-t-01"><div class="dialog"><p>Thoi.</p></div></div>', {
                        offsetX: 600,
                        offsetY: 190
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-t-01"><div class="dialog"><p>You must come.</p></div></div>', {
                        offsetX: 700,
                        offsetY: 230
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-large-t-01"><div class="dialog"><p>This one likes you. He talks about you all the time.</p></div></div>', {
                        offsetX: 1150,
                        offsetY: 280
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("4col", "1tier", "images/b-line-bidong/02.png"), this.comic.add(a), a = new j("4col", "1tier", "images/b-line-bidong/03.png"), this.comic.add(a), a = new j("4col", "1tier", "images/b-line-bidong/04.png"), this.comic.add(a), this.comic.wrap(800), b = new l("9col", "1tier", '<p class="display-text medium light">Mai flushed with pleasure, not fully understanding why.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(250), b = new m("0col", "1tier", '<div class="bk-medium-br-02"><div class="dialog bk-font-small"><p>He is very good.<br/>Very patient.</p></div></div>', {
                        offsetX: -60,
                        offsetY: -50
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-large-t-01"><div class="dialog bk-font-small"><p>And who ever has heard of a boy that can sing like that? It&rsquo;s a miracle. </p></div></div>', {
                        offsetX: 30,
                        offsetY: 300
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-tl-01"><div class="dialog"><p>He will make you rich one day.</p></div></div>', {
                        offsetX: 450,
                        offsetY: 320
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-small-l-01"><div class="dialog"><p>Don&rsquo;t<br/>joke.</p></div></div>', {
                        offsetX: 1270,
                        offsetY: 140
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-t-01"><div class="dialog"><p>I am not joking.</p></div></div>', {
                        offsetX: 930,
                        offsetY: 200
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("4col", "1tier", "images/b-line-bidong/05.png"), this.comic.add(a), a = new j("4col", "1tier", "images/b-line-bidong/06.png"), this.comic.add(a), a = new j("4col", "1tier", "images/b-line-bidong/07.png"), this.comic.add(a), this.comic.wrap(900), b = new m("0col", "1tier", '<div class="bk-medium-bl-01"><div class="dialog"><p>That one was an accident.</p></div></div>', {
                        offsetX: 300,
                        offsetY: -10
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-large-tl-01"><div class="dialog"><p>He slid out in<br/>the middle of the war. I was your age then.</p></div></div>', {
                        offsetX: 200,
                        offsetY: 330
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("4col", "1tier", "images/b-line-bidong/08.png"), this.comic.add(a), b = new l("8col", "1tier", '<p class="display-text medium light">Mai said nothing.</p>', {
                        offsetY: 200
                    }), this.comic.add(b), this.comic.wrap(480), c = new ma, this.comic.add(c, {
                        center: !0
                    }), this.comic.wrap(320), e = new i("2col"), this.comic.add(e), b = new m("0col", "1tier", '<div class="bk-medium-br-01"><div class="dialog bk-font-small"><p>Maybe more accidents will happen.</p></div></div>', {
                        offsetX: -160,
                        offsetY: -30
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-x-small-bl-01 emphasis"><div class="dialog"><p>Hah!</p></div></div>', {
                        offsetX: 410,
                        offsetY: 20
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-large-tl-01"><div class="dialog"><p>When you see your husband again. When we reach land.</p></div></div>', {
                        offsetX: 200,
                        offsetY: 330
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), e = new i("2col"), this.comic.add(e), a = new j("4col", "1tier", "images/b-line-bidong/09.png"), this.comic.add(a), this.comic.wrap(900), b = new l("9col", "1tier", '<p class="display-text medium light">But the mention of land &mdash; coming even from her own mouth cancelled out any joke for Mai.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(450), b = new l("4col", "1tier", '<p class="frame-external-text small light">Watching Truong &mdash; letting in the thought of another day, and after that, another &mdash;</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small light">Mai realised that Quyen&rsquo;s determination felt increasingly superficial to her.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small light">She studied the boy&rsquo;s face. Above his awkward shape it remained as stony and impassive as ever.</p>'), this.comic.add(b), this.comic.wrap(105), b = new m("0col", "1tier", '<div class="bk-medium-bl-02"><div class="dialog bk-font-small"><p>Wasn&rsquo;t it dangerous to escape with Truong so young?</p></div></div>', {
                        offsetX: 250,
                        offsetY: 30
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-tl-01"><div class="dialog bk-font-small"><p>It was because of him I decided to escape.</p></div></div>', {
                        offsetX: 610,
                        offsetY: 310
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("4col", "1tier", "images/b-line-bidong/10.png"), this.comic.add(a), a = new j("4col", "1tier", "images/b-line-bidong/11.png"), this.comic.add(a), a = new j("4col", "1tier", "images/b-line-bidong/12.png"), this.comic.add(a), this.comic.wrap(700), b = new l("8col", "1tier", '<div class="display-text medium light"><p>Mai marvelled at how he lived in a space of his own absorption.</p><p>It seemed impossible they&rsquo;d just met.</p></div>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(500), Ha = new ra, this.comic.add(Ha, {
                        center: !0,
                        triggers: [{
                            atScreenPosition: .8,
                            call: "transitionIn"
                        }]
                    }), Ha.addEventListener("click", this.onBackButtonClick), this.comic.endAuthoringStoryLine(), e = new i("4col", "1tier"), this.comic.add(e), b = new l("8col", "1tier", '<p class="frame-external-text small light">All around them peoples&rsquo; faces were untensing, voices and bodies stirring in restless relief.</p>'), this.comic.add(b), this.comic.wrap(90), b = new m("0col", "1tier", '<div class="bk-medium-b-01 emphasis"><div class="dialog"><p>We&rsquo;re safe for now.</p></div></div>', {
                        offsetX: 90,
                        offsetY: -90
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("4col", "1tier", "images/042-047/14.png"), this.comic.add(a), a = new j("8col", "1tier", "images/042-047/15.png"), this.comic.add(a), this.comic.wrap(1100), this.comic.createAnchor("chapter4"), Ea = new g("engine");
                var Na = new g("chapterMotif");
                c = new xa(3), this.comic.add(c, {
                        center: !0,
                        triggers: [{
                            atScreenPosition: .9,
                            call: "transitionIn"
                        }, {
                            atScreenPosition: .9,
                            target: Na,
                            call: "play"
                        }, {
                            atScreenPosition: .2,
                            target: Ea,
                            call: "play"
                        }, {
                            atScreenPosition: .9,
                            target: d,
                            call: "sendCustomEvent",
                            params: ["chapter/4"]
                        }]
                    }), this.comic.wrap(900), Fa = new f("boatAtmosExt"), c = new F, this.comic.add(c, {
                        center: !0,
                        activeBetweenScreenPosition: {
                            min: -6,
                            max: 5.5
                        },
                        maps: [{
                            property: "bgOpacityIn",
                            startScreenPosition: 1,
                            endScreenPosition: -.33,
                            startValue: 1,
                            endValue: 0
                        }, {
                            property: "glare",
                            startScreenPosition: -2,
                            endScreenPosition: -6,
                            startValue: 0,
                            endValue: 1
                        }, {
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 2.5,
                            endScreenPosition: .5,
                            startValue: 0,
                            endValue: .7
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: -7,
                            endScreenPosition: -8.5,
                            startValue: .7,
                            endValue: 0
                        }]
                    }), this.comic.wrap(1100), b = new l("9col", "1tier", ['<div class="display-text small dark">', "<p>Fishermen on the boat agreed that this storm had come on faster than any they&rsquo;d ever experienced. It destroyed the caulking and much of the planking on the hull. The inboard was flooded, and soon afterward, both engines cut out completely.</p>", "</div>"]), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(120), a = new j("12col", "1tier", "images/048-052/01.png"), this.comic.add(a, {
                        center: !0
                    }), this.comic.wrap(500), b = new l("7col", "1tier", '<p class="frame-external-text small dark">What food had been left was spoiled. Water was short. The remaining supply was rationed out first to children, then the infirm, then everyone else.</p>'), this.comic.add(b), b = new l("5col", "1tier", '<p class="frame-external-text small dark">It amounted to a couple of wet mouthfuls a day.</p>'), this.comic.add(b), this.comic.wrap(120), a = new j("7col", "1tier", "images/048-052/02.png"), this.comic.add(a), a = new j("5col", "1tier", "images/048-052/03.png"), this.comic.add(a), this.comic.wrap(800), b = new l("4col", "1tier", '<p class="frame-external-text small dark">The heat was unbearable.</p>'), this.comic.add(b), this.comic.wrap(70), a = new j("4col", "1tier", "images/048-052/04.png"), this.comic.add(a), this.comic.wrap(120), e = new i("4col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Before long the first body was cast overboard.</p>'), this.comic.add(b), this.comic.wrap(90), e = new i("4col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/048-052/05.png"), this.comic.add(a), this.comic.wrap(120), e = new i("8col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Already a handful of people had been lost during the storm.</p>'), this.comic.add(b), this.comic.wrap(90), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/048-052/06.png"), this.comic.add(a), this.comic.wrap(500), e = new i("8col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small dark">But this was the first casualty witnessed by the entire boat.</p>'), this.comic.add(b), this.comic.wrap(90), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/048-052/07.png"), this.comic.add(a), this.comic.wrap(550), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/048-052/08.png"), this.comic.add(a), this.comic.wrap(500), Ea = new g("bodySplash01"), e = new i("8col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Like everyone else, Mai looked away.</p>'), this.comic.add(b), this.comic.wrap(45), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/048-052/09.png"), this.comic.add(a, {
                        triggers: [{
                            atScreenPosition: .5,
                            target: Ea,
                            call: "play"
                        }]
                    }), this.comic.wrap(1e3), b = new l("9col", "2tier", ['<div class="display-text medium dark">', "<p>After the storm it seemed to Mai that a film had been stripped from the world. ", "The sun hotter, the light more vivid, the sea darker, every word a discordant affront to the new silence.</p>", "<p>The storm had forced people into their privacies.</p>", "<p>Children turned introverted, playing as though conducting conversations with themselves.</p>", "<p>Even time took on a false depth, until it seemed as though everything that had ever happened had happened on the boat.</p>", "</div>"]), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(1e3),
                    b = new l("4col", "1tier", '<p class="frame-external-text small dark">Thirst set in. It was fantastic to be surrounded by so much water and yet be dehydrated. </p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">She imitated some of the other youth, hauling up a bucket tied to the bow-line.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Under the noon sun the seawater was the colour of amethyst. She drank it.</p>'), this.comic.add(b), this.comic.wrap(120), a = new j("4col", "1tier", "images/048-052/10.png"), this.comic.add(a), a = new j("4col", "1tier", "images/048-052/11.png"), this.comic.add(a), a = new j("4col", "1tier", "images/048-052/12.png"), this.comic.add(a), this.comic.wrap(500), b = new l("4col", "1tier", '<p class="frame-external-text small dark">It was all right at first. It was bliss.</p>'), this.comic.add(b), e = new i("4col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Then her throat started scalding and she wanted to claw it out.</p>'), this.comic.add(b), this.comic.wrap(75), a = new j("4col", "1tier", "images/048-052/13.png"), this.comic.add(a), a = new j("4col", "1tier", "images/048-052/15.png"), this.comic.add(a), a = new j("4col", "1tier", "images/048-052/14.png"), this.comic.add(a), this.comic.wrap(1100), b = new l("9col", "1tier", ['<div class="display-text dark medium">', "<p>She tried to sleep, to slide beneath the raw scour of pain in her throat. Her father was persistent in her thoughts now &mdash; all those weeks, even months, he&rsquo;d spent on this same sea, in trawlers much like this one. He&rsquo;d been here before her.</p>", "</div>"]), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(600), a = new ua("4col", "1tier", "images/054-mai-fever-alt/ba-01.png"), this.comic.add(a), b = new l("8col", "1tier", ['<div class="frame-internal-text small light">', "<p>In her fevered mind, it was her father before the war, before re-education, hospitalisation. Back when to see him was to be hoisted onto his shoulders, gripped by the ankles. His hands tough, saltish with the smell of wet rope.</p>", "</div>"]), this.comic.add(b), this.comic.wrap(900), b = new l("9col", "1tier", ['<div class="display-text medium light">', "<p>During his long absences at sea she had lived incompletely, waiting for him to come back so they could tell each other each moment of their time apart.</p>", "</div>"]), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(700), b = new l("9col", "1tier", ['<div class="display-text small light">', "<p>Each time Mai waited.</p>", "</div>"]), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(75), a = new ua("4col", "1tier", "images/054-mai-fever-alt/01.png"), this.comic.add(a, {
                        center: !0
                    }), this.comic.wrap(900), b = new l("9col", "1tier", ['<div class="display-text small light">', "<p>He had left for ten days and returned, strange and newly blind, after two years.</p>", "</div>"]), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(75), a = new ua("6col", "1tier", "images/054-mai-fever-alt/02.png"), this.comic.add(a, {
                        center: !0
                    }), this.comic.wrap(900), b = new l("4col", "1tier", '<p class="frame-external-text small light">A thought connected with another.</p>'), this.comic.add(b), this.comic.wrap(75), b = new m("0col", "1tier", '<div class="bk-large-bl-01 emphasis"><div class="dialog"><p>It was Ba who left Child!</p></div></div>', {
                        offsetX: 350,
                        offsetY: 0
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new ua("4col", "1tier", "images/054-mai-fever-alt/03.png"), this.comic.add(a), this.comic.wrap(900), e = new i("8col"), this.comic.add(e), a = new ua("4col", "1tier", "images/054-mai-fever-alt/ba-02.png"), this.comic.add(a), this.comic.wrap(-1700), Fa = new f("eerieRecollection"), c = new G, this.comic.add(c, {
                        center: !0,
                        activeBetweenScreenPosition: {
                            min: -5.8,
                            max: 6
                        },
                        maps: [{
                            property: "bgInOpacity",
                            startScreenPosition: 3.5,
                            endScreenPosition: 2.5,
                            startValue: 0,
                            endValue: 1
                        }, {
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 4,
                            endScreenPosition: 1,
                            startValue: 0,
                            endValue: 1
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: -4,
                            endScreenPosition: -8,
                            startValue: 1,
                            endValue: 0
                        }]
                    }), this.comic.wrap(2800), b = new l("9col", "1tier", ['<div class="display-text medium dark">', "<p>He was shaking her. She felt fingers groping around in her mouth, a polluting smell. She gasped as the pain flooded back into her body.</p>", "</div>"]), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(550), Ea = new g("cough", .3), c = new H, this.comic.add(c, {
                        center: !0,
                        triggers: [{
                            atScreenPosition: 1,
                            call: "transitionIn"
                        }, {
                            atScreenPosition: 1,
                            target: Ea,
                            call: "play"
                        }],
                        maps: [{
                            property: "whiteMatteOpacity",
                            startScreenPosition: 1.55,
                            endScreenPosition: 1.25,
                            startValue: 0,
                            endValue: 1
                        }]
                    }), this.comic.wrap(500), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/060-064/01.png"), this.comic.add(a, {}), this.comic.wrap(1e3), b = new l("9col", "1tier", ['<div class="display-text medium dark">', "<p>Her eyes refocused and she realised it was not her father she saw but Truong, standing gaunt over her.</p>", "<p>She finally understood, with a deep internal tremor, what it was that had drawn her to the boy all this time.</p>", "</div>"]), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(1e3), b = new l("4col", "1tier", ['<div class="display-text medium dark">', "<p>It was not, as she had first assumed, his age &mdash; his awkward build.</p>", "</div>"], {
                        offsetX: -500,
                        offsetY: 400
                    }), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(0), b = new l("4col", "1tier", ['<div class="display-text medium dark">', "<p>It was his face.</p>", "</div>"], {
                        offsetX: 500,
                        offsetY: 800
                    }), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(0), b = new l("4col", "1tier", ['<div class="display-text medium dark">', "<p>The expression on his face was the same expression she had seen on her father&rsquo;s face&hellip;</p>", "</div>"], {
                        offsetX: -500,
                        offsetY: 1200
                    }), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(0), b = new l("4col", "1tier", ['<div class="display-text medium dark">', "<p>&hellip;every day, since he&rsquo;d returned from re-education.</p>", "</div>"], {
                        offsetX: 500,
                        offsetY: 1600
                    }), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(0), b = new l("4col", "1tier", ['<div class="display-text medium dark">', "<p>It was a face dead of surprise.</p>", "</div>"], {
                        offsetX: -500,
                        offsetY: 2e3
                    }), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(0), c = new I, this.comic.add(c, {
                        center: !0,
                        triggers: [{
                            call: "transitionIn",
                            atScreenPosition: .25
                        }]
                    }), this.comic.wrap(3500), b = new m("0col", "1tier", '<div class="bk-x-large-nt-01"><div class="dialog"><p>Mai&rsquo;s fever has broken!</p></div></div>', {
                        offsetX: 200,
                        offsetY: -150
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-bl-01"><div class="dialog"><p>You slept almost two days.</p></div></div>', {
                        offsetX: 800,
                        offsetY: -100
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-t-01"><div class="dialog"><p>Where is Truong?</p></div></div>', {
                        offsetX: 570,
                        offsetY: 200
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), e = new i("3col"), this.comic.add(e), a = new j("6col", "1tier", "images/060-064/02.png"), this.comic.add(a), this.comic.wrap(550), Fa = new f("boatAtmosExt"), b = new m("12col", "1tier", '<div class="bk-medium-br-01"><div class="dialog"><p>Come. Everyone&rsquo;s up here.</p></div></div>', {
                        offsetX: 280,
                        offsetY: -30
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("12col", "1tier", "images/060-064/03.png"), this.comic.add(a, {
                        maps: [{
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 4,
                            endScreenPosition: -1,
                            startValue: 0,
                            endValue: .6
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: -15,
                            endScreenPosition: -17,
                            startValue: .6,
                            endValue: 0
                        }]
                    }), this.comic.wrap(550), b = new m("0col", "1tier", '<div class="bk-medium-br-01"><div class="dialog"><p>Down there are all the sick people.</p></div></div>', {
                        offsetX: 300,
                        offsetY: 200
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-tl-01"><div class="dialog"><p>Sick people? Where&rsquo;s Truong?</p></div></div>', {
                        offsetX: 710,
                        offsetY: 240
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("12col", "1tier", "images/060-064/04.png"), this.comic.add(a), this.comic.wrap(700), b = new l("9col", "1tier", '<p class="display-text medium dark">She almost cried when she saw him &mdash; gone was the pale, delicate-faced boy she&rsquo;d remembered.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(300), c = new J, this.comic.add(c, {
                        center: !0
                    }), this.comic.wrap(800), b = new l("9col", "1tier", '<p class="display-text medium dark">Now his lips were bloated, the skin of his cheeks brown, chapped in the pattern of bruised glass. An awful new wateriness in his gaze.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(400), b = new m("0col", "1tier", '<div class="bk-medium-br-02"><div class="dialog"><p>Is Child well?</p></div></div>', {
                        offsetX: -20,
                        offsetY: -90
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-tr-01"><div class="dialog"><p>Yes. How is Chi Mai?</p></div></div>', {
                        offsetX: 50,
                        offsetY: 250
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-small-br-01"><div class="dialog"><p>Well.<br/>Better.</p></div></div>', {
                        offsetX: 450,
                        offsetY: -70
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-br-02"><div class="dialog"><p>Ma said Chi Mai was very sick.</p></div></div>', {
                        offsetX: 830,
                        offsetY: -50
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-tl-01"><div class="dialog"><p>Chi is better now.</p></div></div>', {
                        offsetX: 830,
                        offsetY: 270
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("4col", "1tier", "images/060-064/05.png"), this.comic.add(a), a = new j("4col", "1tier", "images/060-064/06.png"), this.comic.add(a), a = new j("4col", "1tier", "images/060-064/07.png"), this.comic.add(a), this.comic.wrap(800), b = new l("9col", "1tier", '<div class="display-text medium dark"><p>She hadn&rsquo;t heard him talk so much before. His voice came out scratchy but steady.</p><p>Seeing him, Mai&rsquo;s own body felt its full exhaustion.</p></div>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(800), this.comic.createAnchor("chapter5"), c = new xa(4), Ea = new g("chapterMotif"), this.comic.add(c, {
                        center: !0,
                        triggers: [{
                            atScreenPosition: .9,
                            call: "transitionIn"
                        }, {
                            atScreenPosition: .9,
                            target: Ea,
                            call: "play"
                        }, {
                            atScreenPosition: .9,
                            target: d,
                            call: "sendCustomEvent",
                            params: ["chapter/5"]
                        }]
                    }), this.comic.wrap(800), b = new l("9col", "1tier", '<div class="display-text medium dark"><p>The tenth day dawned. A young teenage girl with chicken legs wandered over to the gunwale. In a motion like a bow that didn&rsquo;t stop, she toppled gracefully over the side.</p></div>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(400), a = new j("4col", "1tier", "images/060-064/08.png"), this.comic.add(a), this.comic.wrap(120), e = new i("4col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/060-064/09.png"), this.comic.add(a), this.comic.wrap(120), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/060-064/10.png"), this.comic.add(a), this.comic.wrap(500), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/060-064/11.png"), this.comic.add(a), this.comic.wrap(500), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/060-064/12.png"), this.comic.add(a), this.comic.wrap(500), Ea = new g("bodySplash02"), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/060-064/13.png"), this.comic.add(a, {
                        triggers: [{
                            atScreenPosition: .5,
                            target: Ea,
                            call: "play"
                        }]
                    }), this.comic.wrap(900), Fa = new f("hook"), c = new K, this.comic.add(c, {
                        center: !0,
                        maps: [{
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 2,
                            endScreenPosition: 1,
                            startValue: 0,
                            endValue: 1
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: .5,
                            endScreenPosition: -1.5,
                            startValue: 1,
                            endValue: 0
                        }]
                    }), this.comic.wrap(750), b = new m("0col", "1tier", '<div class="bk-x-large-bl-01 emphasis"><div class="dialog"><p>Water!<br/>He needs<br/>water!</p></div></div>', {
                        offsetX: 790,
                        offsetY: 0
                    }), this.comic.add(b, {
                        triggers: [{
                            atScreenPosition: .9,
                            call: "transitionIn"
                        }]
                    }), this.comic.wrap(400), e = new i("2col"), this.comic.add(e), a = new j("8col", "1tier", "images/069-075/01.png"), this.comic.add(a), this.comic.wrap(700), a = new j("4col", "1tier", "images/069-075/02.png"), this.comic.add(a), a = new j("4col", "1tier", "images/069-075/03.png"), this.comic.add(a), a = new j("4col", "1tier", "images/069-075/04.png"), this.comic.add(a), this.comic.wrap(800), Ea = new g("punch"), c = new L, this.comic.add(c, {
                        center: !0,
                        triggers: [{
                            atScreenPosition: .75,
                            call: "transitionIn"
                        }, {
                            atScreenPosition: .75,
                            target: Ea,
                            call: "play"
                        }]
                    }), this.comic.wrap(750), Fa = new f("moodDesperate"), b = new m("0col", "1tier", '<div class="bk-medium-br-01 emphasis"><div class="dialog"><p>She<br/>stole<br/>water!</p></div></div>', {
                        offsetX: 170,
                        offsetY: -70
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-small-br-01"><div class="dialog"><p>I&rsquo;ll pay it back!</p></div></div>', {
                        offsetX: 850,
                        offsetY: -50
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("8col", "1tier", "images/069-075/05.png"), this.comic.add(a), a = new j("4col", "1tier", "images/069-075/06.png"), this.comic.add(a), this.comic.wrap(550), a = new j("4col", "1tier", "images/069-075/07.png"), this.comic.add(a), b = new l("8col", "1tier", ['<div class="frame-internal-text small dark">', "<p>People glanced over, disturbed by the waste.</p>", "</div>"]), this.comic.add(b, {
                        maps: [{
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 4,
                            endScreenPosition: 1,
                            startValue: 0,
                            endValue: 1
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: -3,
                            endScreenPosition: -7,
                            startValue: 1,
                            endValue: 0
                        }]
                    }), this.comic.wrap(600), b = new l("8col", "1tier", ['<div class="frame-internal-text medium dark">', "<p>Her temple still aching, she wrenched her eyes away from the water bottle and looked out instead at the sky.</p>", "</div>"]), this.comic.add(b), this.comic.wrap(400), b = new l("8col", "1tier", ['<div class="frame-internal-text medium dark">', "<p>Not a cloud in sight. But the sky was full of deceit &mdash; it looked the same everywhere.</p>", "</div>"]), this.comic.add(b), this.comic.wrap(400), b = new l("8col", "1tier", ['<div class="frame-internal-text medium dark">', "<p>She looked at the horizon, long and pale and eye-level all around them.</p>", "</div>"]), this.comic.add(b), this.comic.wrap(400), b = new l("8col", "1tier", ['<div class="frame-internal-text medium dark">', "<p>Whatever direction she looked, it fell away into more water.</p>", "</div>"]), this.comic.add(b), this.comic.wrap(500), c = new M, this.comic.add(c, {
                        center: !0,
                        activeBetweenScreenPosition: {
                            min: -3,
                            max: 7
                        },
                        maps: [{
                            property: "whiteMatteOpacity",
                            startScreenPosition: -1,
                            endScreenPosition: -2,
                            startValue: 0,
                            endValue: 1
                        }]
                    }), this.comic.wrap(1500), b = new l("9col", "1tier", ['<div class="display-text medium light">', "<p>Engines dead, the boat drifted on with men taking turns, as best they could, to steer the boat to the south.</p>", "</div>"]), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(300), b = new l("9col", "1tier", ['<div class="display-text medium light">', "<p>Each hour stretched out its hot minutes.</p>", "</div>"]), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(200), c = new N, this.comic.add(c, {
                        center: !0
                    }), this.comic.wrap(1200), b = new l("9col", "1tier", ['<div class="display-text medium dark">', "<p>Mai lay on her back under the derrick-crane, her head against someone&rsquo;s shin, limbs interwoven with her neighbours&rsquo;. Truong wedged beside her.</p>", "<p>The crane cast a shadow that inched up their bodies.</p>", "</div>"]), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(800), b = new l("6col", "1tier", '<p class="frame-external-text small dark">At one point a wind blew in and the boat began to sway, lightly, in the water. She was riding her father&rsquo;s shoulders. Her mother watching them happily.</p>'), this.comic.add(b), b = new l("6col", "1tier", '<p class="frame-external-text small dark">Truong started singing. Softly &mdash; to himself &mdash; so softly she wouldn&rsquo;t have heard him if her ear hadn&rsquo;t been inches from his mouth. She listened, hardly daring to breathe.</p>'), this.comic.add(b), this.comic.wrap(120), a = new j("6col", "1tier", "images/069-075/09.png"), this.comic.add(a), a = new j("6col", "1tier", "images/069-075/10.png"), this.comic.add(a), this.comic.wrap(900), Fa = new f("belowDeck"), c = new O, this.comic.add(c, {
                        center: !0,
                        activeBetweenScreenPosition: {
                            min: -5.5,
                            max: 2
                        },
                        maps: [{
                            property: "blackMatteInOpacity",
                            startScreenPosition: .5,
                            endScreenPosition: 0,
                            startValue: 0,
                            endValue: 1
                        }, {
                            property: "blackMatteOutOpacity",
                            startScreenPosition: -4,
                            endScreenPosition: -5.5,
                            startValue: 1,
                            endValue: 0
                        }, {
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 2,
                            endScreenPosition: 0,
                            startValue: 0,
                            endValue: 1
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: -6,
                            endScreenPosition: -8.5,
                            startValue: 1,
                            endValue: 0
                        }]
                    }), this.comic.wrap(0), b = new l("9col", "1tier", '<p class="display-text medium dark">When he finished, the silence that surged in afterwards was unbearable.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(600), b = new l("9col", "1tier", '<p class="display-text small light">The next morning, back below deck, she woke to find a puddle of vomit next to his curled-up, sleeping body. It gleamed grey in the early light of dawn.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(400), a = new j("12col", "2tier", "images/076-085/01.png", {
                        offsetZ: -150
                    }), this.comic.add(a), this.comic.wrap(400), b = new l("4col", "1tier", '<p class="frame-external-text small light">Mai poured her ration into Truong&rsquo;s cup.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small light">Quyen flinched and turned away.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small light">But for the first time she used the word for younger sister.</p>'), this.comic.add(b), this.comic.wrap(75), b = new m("0col", "1tier", '<div class="bk-medium-tl-01"><div class="dialog"><p>Thank you&hellip;<br/>Em gái.</p></div></div>', {
                        offsetX: 1250,
                        offsetY: 280
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("4col", "1tier", "images/076-085/02.png"), this.comic.add(a), a = new j("4col", "1tier", "images/076-085/03.png"), this.comic.add(a), a = new j("4col", "1tier", "images/076-085/04.png"), this.comic.add(a), this.comic.wrap(550), b = new l("6col", "1tier", '<p class="frame-external-text small light">Truong took some water in, then coughed some of it out. In the dusk light his face was pallid and shiny.</p>'), this.comic.add(b), this.comic.wrap(75), b = new m("0col", "1tier", '<div class="bk-small-br-01 emphasis"><div class="dialog"><p>Ma...<br/>Ma!</p></div></div>', {
                        offsetX: 650,
                        offsetY: 100
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-small-tl-01"><div class="dialog"><p>I&rsquo;m<br/>here.</p></div></div>', {
                        offsetX: 1200,
                        offsetY: 300
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("6col", "1tier", "images/076-085/05.png"), this.comic.add(a), a = new j("6col", "1tier", "images/076-085/06.png"), this.comic.add(a), this.comic.wrap(550), b = new l("8col", "1tier", '<p class="frame-external-text small light">Finally his eyes focused and he seemed to look straight at Mai.</p>'), this.comic.add(b), this.comic.wrap(75), b = new m("0col", "1tier", '<div class="bk-large-br-01"><div class="dialog"><p>He likes you so much. I thought of asking you &mdash;</p></div></div>', {
                        offsetX: 720,
                        offsetY: -40
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("8col", "1tier", "images/076-085/07.png"), this.comic.add(a), a = new j("4col", "1tier", "images/076-085-reedit/09.png"), this.comic.add(a), this.comic.wrap(550), b = new m("0col", "1tier", '<div class="bk-large-br-01"><div class="dialog bk-font-small"><p>I was going to ask you to take him &mdash; to pretend he was your son.</p></div></div>', {
                        offsetX: -170,
                        offsetY: 60
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-large-tl-01"><div class="dialog"><p>Just until I could tell my husband the truth.</p></div></div>', {
                        offsetX: 250,
                        offsetY: 250
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-bl-01"><div class="dialog"><p>Thoi. Enough.</p></div></div>', {
                        offsetX: 770,
                        offsetY: 120
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("4col", "1tier", "images/076-085-reedit/08.png"), this.comic.add(a), a = new j("4col", "1tier", "images/076-085-reedit/10.png"), this.comic.add(a), a = new j("4col", "1tier", "images/076-085-reedit/11.png"), this.comic.add(a), this.comic.wrap(550), b = new m("0col", "1tier", '<div class="bk-medium-br-01"><div class="dialog"><p>It&rsquo;s my fault.</p></div></div>', {
                        offsetX: -100,
                        offsetY: 120
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-small-t-01"><div class="dialog"><p>Chi&hellip;</p></div></div>', {
                        offsetX: 650,
                        offsetY: 350
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-large-bl-01"><div class="dialog"><p>You don&rsquo;t have to answer. Whatever happens, I deserve it.</p></div></div>', {
                        offsetX: 1100,
                        offsetY: -140
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("4col", "1tier", "images/076-085-reedit/12.png"), this.comic.add(a), a = new j("4col", "1tier", "images/076-085-reedit/13.png"), this.comic.add(a), a = new j("4col", "1tier", "images/076-085-reedit/14.png"), this.comic.add(a), this.comic.wrap(400), Ha = new qa, this.comic.add(Ha, {
                        triggers: [{
                            atScreenPosition: 1.1,
                            call: "transitionIn"
                        }]
                    }), Ha.addEventListener("click", function() {
                        this.comic.switchStoryLine("backstory"), d.sendCustomEvent("sidestory/backstory")
                    }.bind(this)), this.comic.wrap(400), this.comic.startAuthoringStoryLine("backstory"), this.comic.wrap(10), c = new da, this.comic.add(c, {
                        center: !0,
                        activeBetweenScreenPosition: {
                            min: -9,
                            max: 6
                        }
                    }), this.comic.wrap(0), b = new l("9col", "1tier", '<p class="display-text medium light">He was Quyen&rsquo;s shame and yet she loved him. What did that make her?</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(300), b = new l("9col", "1tier", '<p class="display-text medium light">She had conceived him when she was young, and passed him off to her aunt in Da Lat to raise, and then she had gotten married.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(600), c = new ea, this.comic.add(c, {
                        center: !0
                    }), this.comic.wrap(500), b = new l("4col", "1tier", '<p class="frame-external-text small light">With the war and all its disturbances, she had never gone back to visit him. Worse, she had never told her husband.</p>'), this.comic.add(b), this.comic.wrap(105), b = new m("0col", "1tier", '<div class="bk-medium-tl-01"><div class="dialog"><p>He would leave me. He will.</p></div></div>', {
                        offsetX: 260,
                        offsetY: 280
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("4col", "1tier", "images/b-line-backstory/01.png"), this.comic.add(a), this.comic.wrap(1e3), b = new l("9col", "1tier", '<p class="display-text medium light">But she couldn&rsquo;t abandon her only son &mdash; not to the Communists &mdash; not if she could find a way out of the country. Even if he didn&rsquo;t want to leave, and even if he didn&rsquo;t know her.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(600), c = new ga, this.comic.add(c, {
                        center: !0
                    }), this.comic.wrap(500), b = new l("9col", "1tier", '<p class="display-text medium light">Her aunt had balked and Quyen had been forced to abduct him.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(600), c = new fa, this.comic.add(c, {
                        center: !0
                    }), this.comic.wrap(500), e = new i("8col"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small light">She&rsquo;d been wrong to have him &mdash; she knew that &mdash; but she&rsquo;d been more wrong to give him away. Surely, she thought, she was right to take him with her.</p>'), this.comic.add(b), this.comic.wrap(155), e = new i("8col"), this.comic.add(e), a = new j("4col", "1tier", "images/b-line-backstory/02.png"), this.comic.add(a), this.comic.wrap(700), b = new l("4col", "1tier", '<p class="frame-external-text small light">But when she saw him weakening &mdash; then falling sick &mdash; she realised that perhaps he was being punished for her shame.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small light">Whether he lived or died &mdash; perhaps it wasn&rsquo;t for her to decide.</p>'), this.comic.add(b), this.comic.wrap(125), b = new m("0col", "1tier", '<div class="bk-large-br-01"><div class="dialog"><p>He doesn&rsquo;t<br/>love his own mother.</p></div></div>', {
                        offsetX: 220,
                        offsetY: -10
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-small-t-01"><div class="dialog"><p>That&rsquo;s not true.</p></div></div>', {
                        offsetX: 770,
                        offsetY: 200
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-small-b-01"><div class="dialog"><p>It&rsquo;s fair.</p></div></div>', {
                        offsetX: 1e3,
                        offsetY: -80
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-large-tl-02"><div class="dialog"><p>Who watches that happening to her own son and does nothing?</p></div></div>', {
                        offsetX: 1100,
                        offsetY: 290
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("4col", "1tier", "images/b-line-backstory/03.png"), this.comic.add(a), a = new j("4col", "1tier", "images/b-line-backstory/04.png"), this.comic.add(a), a = new j("4col", "1tier", "images/b-line-backstory/05.png"), this.comic.add(a), this.comic.wrap(550), Ha = new ra(!1, "right"), this.comic.add(Ha, {
                        center: !0,
                        triggers: [{
                            atScreenPosition: .8,
                            call: "transitionIn"
                        }]
                    }), Ha.addEventListener("click", this.onBackButtonClick), this.comic.endAuthoringStoryLine(), b = new l("10col", "1tier", ['<div class="display-text medium light">', "<p>Mai wanted desperately to say something &mdash; something useful, or comforting &mdash; but no words came.</p>", "</div>"]), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(340), a = new j("8col", "2tier", "images/076-085/09.png"), this.comic.add(a, {
                        center: !0
                    }), this.comic.wrap(1200), Fa = new f("eerieRecollection"), c = new P, this.comic.add(c, {
                        center: !0,
                        activeBetweenScreenPosition: {
                            min: -3,
                            max: 3
                        },
                        maps: [{
                            property: "bgInOpacity",
                            startScreenPosition: 1.45,
                            endScreenPosition: 1,
                            startValue: 0,
                            endValue: 1
                        }, {
                            property: "bgOutOpacity",
                            startScreenPosition: -1.25,
                            endScreenPosition: -1.75,
                            startValue: 1,
                            endValue: 0
                        }, {
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 3,
                            endScreenPosition: 1,
                            startValue: 0,
                            endValue: 1
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: 0,
                            endScreenPosition: -2,
                            startValue: 1,
                            endValue: 0
                        }]
                    }), b = new l("9col", "1tier", '<div class="display-text medium light"><p>In the middle of the night, Mai woke to find Truong half draped over her stomach.</p><p>His weight so light as to be almost imperceptible, as though his body were already nothing more than bones and air.</p><p>She whispered into the darkness, her thoughts still interlaced with dream, scattered remotely across space and grey sea.</p></div>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(700), b = new m("0col", "1tier", '<div class="bk-medium-br-01"><div class="dialog"><p>Everything will be fine. </p></div></div>', {
                        offsetX: 400,
                        offsetY: 0
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(1300), b = new l("9col", "1tier", '<div class="display-text medium light"><p>His sickness followed the usual course. Muscle soreness and nausea in the early stages. That evening his blisters began to rise, some of them bleeding pus.</p></div>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(700), b = new l("9col", "1tier", '<div class="display-text small dark"><p>He became too weak to swallow water. The skin on his face was hot and moist.</p></div>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(250), b = new m("0col", "1tier", '<div class="bk-medium-br-01"><div class="dialog"><p>Is Child all right?</p></div></div>', {
                        offsetX: 170,
                        offsetY: -120
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-tr-02 emphasis"><div class="dialog"><p>I want to go up.</p></div></div>', {
                        offsetX: 230,
                        offsetY: 200
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-small-l-01"><div class="dialog"><p>Take<br/>him.</p></div></div>', {
                        offsetX: 950,
                        offsetY: -20
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), c = new Q, this.comic.add(c, {
                        center: !0
                    }), this.comic.wrap(1e3), b = new l("9col", "1tier", '<div class="display-text small dark"><p>Mai found a spot for them on the deck, surrounded by sleeping families.</p></div>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(750), Fa = new f("boatAtmosExt"), c = new R, this.comic.add(c, {
                        center: !0,
                        maps: [{
                            property: "bgInOpacity",
                            startScreenPosition: 1.5,
                            endScreenPosition: 1,
                            startValue: 0,
                            endValue: 1
                        }, {
                            property: "bgOutOpacity",
                            startScreenPosition: .5,
                            endScreenPosition: 0,
                            startValue: 1,
                            endValue: 0
                        }, {
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 2,
                            endScreenPosition: 0,
                            startValue: 0,
                            endValue: .7
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: -12,
                            endScreenPosition: -14,
                            startValue: .7,
                            endValue: 0
                        }]
                    }), this.comic.wrap(700), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Worry built within her. She poked his cheek. It was still warm.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">She checked his forehead: hotter than it had been last night.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">He was boiling up. His breath shallow and short.</p>'), this.comic.add(b), this.comic.wrap(95), a = new j("4col", "1tier", "images/082-092/01.png"), this.comic.add(a), a = new j("4col", "1tier", "images/082-092/02.png"), this.comic.add(a), a = new j("4col", "1tier", "images/082-092/03.png"), this.comic.add(a), this.comic.wrap(1300), b = new l("3col", "1tier", '<p class="frame-internal-text small dark">His face &mdash; the burnt, blistered skin, its spots and scabs.</p>', {
                        offsetX: 0,
                        offsetY: 300
                    }), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-internal-text small dark">The deeper she looked, the more his features disassociated from one another until what she looked into, as she tended him, was not a face, but a brown blasted landscape.</p>', {
                        offsetX: 0,
                        offsetY: 600
                    }), this.comic.add(b, {
                        center: !0
                    }), b = new l("3col", "1tier", '<p class="frame-internal-text small dark">Like a slow fire it drew air from her lungs.</p>', {
                        offsetX: 420,
                        offsetY: 850
                    }), this.comic.add(b), this.comic.wrap(-800), c = new S, this.comic.add(c, {
                        center: !0,
                        maps: [{
                            property: "bgInOpacity",
                            startScreenPosition: 1,
                            endScreenPosition: .5,
                            startValue: 0,
                            endValue: 1
                        }, {
                            property: "bgMidOpacity",
                            startScreenPosition: .25,
                            endScreenPosition: 0,
                            startValue: 1,
                            endValue: .2
                        }, {
                            property: "bgOutOpacity",
                            startScreenPosition: -1.3,
                            endScreenPosition: -1.5,
                            startValue: 1,
                            endValue: 0
                        }],
                        triggers: [{
                            atScreenPosition: .5,
                            call: "transitionIn"
                        }]
                    }), this.comic.wrap(2600), Fa = new f("quyenTensionMusic"), c = new T, this.comic.add(c, {
                        center: !0,
                        activeBetweenScreenPosition: {
                            min: -9,
                            max: 7
                        },
                        maps: [{
                            property: "bgInOpacity",
                            startScreenPosition: .5,
                            endScreenPosition: -1.5,
                            startValue: 0,
                            endValue: 1
                        }, {
                            property: "bgOutOpacity",
                            startScreenPosition: -2,
                            endScreenPosition: -8,
                            startValue: 1,
                            endValue: 0
                        }, {
                            property: "boatPosition",
                            startScreenPosition: .75,
                            endScreenPosition: -2.3,
                            startValue: 0,
                            endValue: 1
                        }, {
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 3,
                            endScreenPosition: -1,
                            startValue: 0,
                            endValue: 1
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: -9,
                            endScreenPosition: -12,
                            startValue: 1,
                            endValue: 0
                        }]
                    });
                var Oa = c;
                this.comic.createAnchor("chapter6"), c = new xa(5), Ea = new g("chapterMotif"), this.comic.add(c, {
                    center: !0,
                    triggers: [{
                        atScreenPosition: .9,
                        call: "transitionIn"
                    }, {
                        atScreenPosition: .9,
                        target: Ea,
                        call: "play"
                    }, {
                        atScreenPosition: .9,
                        target: d,
                        call: "sendCustomEvent",
                        params: ["chapter/6"]
                    }]
                }), this.comic.wrap(1200), b = new l("9col", "1tier", '<p class="display-text medium dark">Someone shouting. Another death?</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(1400), b = new m("0col", "1tier", '<div class="bk-small-nt-01"><div class="dialog"><p>Whales?</p></div></div>', {
                    offsetX: 170,
                    offsetY: -100
                }), this.comic.add(b, {
                    triggers: [{
                        atScreenPosition: 1,
                        call: "transitionIn"
                    }]
                }), b = new m("0col", "1tier", '<div class="bk-small-nt-01"><div class="dialog"><p>Land birds?</p></div></div>', {
                    offsetX: 870,
                    offsetY: -220
                }), this.comic.add(b, {
                    triggers: [{
                        atScreenPosition: 1,
                        call: "transitionIn"
                    }]
                }), b = new m("0col", "1tier", '<div class="bk-small-nt-01"><div class="dialog"><p>Land?!?</p></div></div>', {
                    offsetX: 1100,
                    offsetY: -140
                }), this.comic.add(b, {
                    triggers: [{
                        atScreenPosition: 1,
                        call: "transitionIn"
                    }]
                }), b = new m("0col", "1tier", '<div class="bk-medium-br-02 emphasis"><div class="dialog"><p>They saw land?</p></div></div>', {
                    offsetX: 380,
                    offsetY: -180
                }), this.comic.add(b, {
                    triggers: [{
                        atScreenPosition: 1,
                        call: "transitionIn"
                    }]
                }), this.comic.wrap(0), a = new j("12col", "2tier", "images/082-092/04.png"), this.comic.add(a), this.comic.wrap(1150), b = new m("0col", "1tier", '<div class="bk-x-large-bl-01 emphasis"><div class="dialog"><p>Where&rsquo;s my son?</p></div></div>', {
                    offsetX: 300,
                    offsetY: -450
                }), this.comic.add(b), this.comic.wrap(0), Ea = new g("hatch", .5), a = new wa("4col", "1tier", "images/082-092/05.png"), this.comic.add(a, {
                    triggers: [{
                        atScreenPosition: .9,
                        call: "transitionIn",
                        params: ["right"]
                    }, {
                        atScreenPosition: .9,
                        target: Oa,
                        call: "openHatch"
                    }, {
                        atScreenPosition: .9,
                        target: Ea,
                        call: "play"
                    }, {
                        atScreenPosition: .9,
                        target: b,
                        call: "transitionIn"
                    }]
                }), this.comic.wrap(350), e = new i("8col"), this.comic.add(e), a = new wa("4col", "1tier", "images/082-092/06.png"), this.comic.add(a, {
                    triggers: [{
                        atScreenPosition: 1,
                        call: "transitionIn",
                        params: ["left"]
                    }]
                }), this.comic.wrap(700), a = new wa("12col", "1tier", "images/082-092/07.png"), this.comic.add(a, {
                    triggers: [{
                        atScreenPosition: 1,
                        call: "transitionIn",
                        params: ["right"]
                    }]
                }), this.comic.wrap(500), b = new m("0col", "1tier", '<div class="bk-medium-bl-02 emphasis"><div class="dialog"><p>Where&rsquo;s my son?</p></div></div>', {
                    offsetX: 840,
                    offsetY: -40
                }), this.comic.add(b), this.comic.wrap(0), a = new wa("4col", "1tier", "images/082-092/08.png"), this.comic.add(a, {
                    center: !0,
                    triggers: [{
                        atScreenPosition: 1,
                        call: "transitionIn",
                        params: ["left"]
                    }, {
                        atScreenPosition: 1,
                        target: b,
                        call: "transitionIn"
                    }]
                }), this.comic.wrap(700), b = new m("0col", "1tier", '<div class="bk-medium-bl-01 emphasis"><div class="dialog"><p>Truong!</p></div></div>', {
                    offsetX: 340,
                    offsetY: -50
                }), this.comic.add(b), this.comic.wrap(0), a = new wa("8col", "1tier", "images/082-092/09.png"), this.comic.add(a, {
                    triggers: [{
                        atScreenPosition: 1,
                        call: "transitionIn",
                        params: ["right"]
                    }, {
                        atScreenPosition: 1,
                        target: b,
                        call: "transitionIn"
                    }]
                }), this.comic.wrap(700), b = new m("0col", "1tier", '<div class="bk-x-large-br-01 emphasis"><div class="dialog"><p>I&rsquo;ve changed my mind!</p></div></div>', {
                    offsetX: 610,
                    offsetY: -450
                }), this.comic.add(b), this.comic.wrap(0), e = new i("8col"), this.comic.add(e), a = new wa("4col", "1tier", "images/082-092/10.png"), this.comic.add(a, {
                    triggers: [{
                        atScreenPosition: 1,
                        call: "transitionIn",
                        params: ["right"]
                    }, {
                        atScreenPosition: 1,
                        target: b,
                        call: "transitionIn"
                    }]
                }), this.comic.wrap(700), b = new m("0col", "1tier", '<div class="bk-small-bl-01"><div class="dialog"><p>Chi &mdash;</p></div></div>', {
                    offsetX: 800,
                    offsetY: -50
                }), this.comic.add(b), this.comic.wrap(0), e = new i("4col"), this.comic.add(e), a = new wa("4col", "1tier", "images/082-092/11.png"), this.comic.add(a, {
                    triggers: [{
                        atScreenPosition: 1,
                        call: "transitionIn",
                        params: ["left"]
                    }, {
                        atScreenPosition: 1,
                        target: b,
                        call: "transitionIn"
                    }]
                }), this.comic.wrap(700), b = new m("0col", "1tier", '<div class="bk-large-exclamation-r-01 emphasis"><div class="dialog"><p>He&rsquo;s my son. Not yours.<br/>Mine!</p></div></div>', {
                    offsetX: 510,
                    offsetY: 100
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), this.comic.wrap(0), e = new i("8col"), this.comic.add(e), a = new wa("4col", "1tier", "images/082-092/12.png"), this.comic.add(a, {
                    triggers: [{
                        atScreenPosition: 1,
                        call: "transitionIn",
                        params: ["right"]
                    }, {
                        atScreenPosition: 1,
                        target: b,
                        call: "transitionIn"
                    }]
                }), this.comic.wrap(700), b = new m("0col", "1tier", '<div class="bk-medium-b-01 emphasis"><div class="dialog"><p>She took my son.</p></div></div>', {
                    offsetX: 480,
                    offsetY: -170
                }), this.comic.add(b), this.comic.wrap(0), a = new wa("8col", "1tier", "images/082-092/13.png"), this.comic.add(a, {
                    triggers: [{
                        atScreenPosition: 1,
                        call: "transitionIn",
                        params: ["left"]
                    }, {
                        atScreenPosition: 1,
                        target: b,
                        call: "transitionIn"
                    }]
                }), this.comic.wrap(700), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Quyen&rsquo;s body shuddered in tight bursts.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Then slowly, hitchingly, it began to calm.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">It seemed for a moment as though Quyen might never look up again.</p>'), this.comic.add(b), this.comic.wrap(95), b = new m("0col", "1tier", '<div class="bk-medium-tl-02"><div class="dialog"><p>I wouldn&rsquo;t hurt Truong.</p></div></div>', {
                    offsetX: 425,
                    offsetY: -100
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), b = new m("0col", "1tier", '<div class="bk-small-tl-01"><div class="dialog"><p>I love<br/>him.</p></div></div>', {
                    offsetX: 870,
                    offsetY: -40
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), this.comic.wrap(0), a = new j("4col", "1tier", "images/082-092/14.png"), this.comic.add(a), a = new j("4col", "1tier", "images/082-092/15.png"), this.comic.add(a), a = new j("4col", "1tier", "images/082-092/16.png"), this.comic.add(a), this.comic.wrap(550), e = new i("6col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small dark">When she did, her face was utterly blanched of expression.</p>'), this.comic.add(b), this.comic.wrap(95), b = new m("0col", "1tier", '<div class="bk-small-br-01"><div class="dialog"><p>I know.</p></div></div>', {
                    offsetX: 170,
                    offsetY: -20
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), this.comic.wrap(0), e = new i("2col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/082-092/17.png"), this.comic.add(a), a = new j("4col", "1tier", "images/082-092/18.png"), this.comic.add(a), this.comic.wrap(550), e = new i("6col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small dark">But she didn&rsquo;t look at Mai. Instead she turned</p>'), this.comic.add(b), this.comic.wrap(95), e = new i("6col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/082-092/19.png"), this.comic.add(a), this.comic.wrap(550), e = new i("6col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small dark">and bent over the unconscious shape of her son.</p>'), this.comic.add(b), this.comic.wrap(95), e = new i("6col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/082-092/20.png"), this.comic.add(a), this.comic.wrap(550), e = new i("2col", "1tier"), this.comic.add(e), b = new l("8col", "1tier", '<p class="frame-external-text small dark">That was when she began to cry &mdash; silently at first, inside her body, but then, breath by breath &mdash;</p>'), this.comic.add(b), this.comic.wrap(75), e = new i("2col", "1tier"), this.comic.add(e), a = new j("8col", "1tier", "images/082-092/21.png"), this.comic.add(a), this.comic.wrap(600), b = new l("9col", "1tier", '<p class="display-text small dark">letting out a wail the whole boat could hear.</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(200), Ea = new g("wail"), c = new U, this.comic.add(c, {
                    center: !0,
                    triggers: [{
                        atScreenPosition: .55,
                        call: "scream"
                    }, {
                        atScreenPosition: .55,
                        target: Ea,
                        call: "play"
                    }]
                }), this.comic.wrap(1100), b = new l("9col", "1tier", '<p class="display-text medium dark">He entered into the worst of it that afternoon. Moving fitfully into and out of sleep. His breath short, irregular.</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(700), Fa = new f("eerieRecollection"), c = new V, this.comic.add(c, {
                    center: !0,
                    activeBetweenScreenPosition: {
                        min: -3.85,
                        max: 2
                    },
                    maps: [{
                        property: "bodyPosition",
                        startScreenPosition: -1,
                        endScreenPosition: -5.5,
                        startValue: 0,
                        endValue: 1
                    }, {
                        target: Fa,
                        property: "volumeIn",
                        startScreenPosition: 2,
                        endScreenPosition: 0,
                        startValue: 0,
                        endValue: 1
                    }, {
                        target: Fa,
                        property: "volumeOut",
                        startScreenPosition: -5,
                        endScreenPosition: -7,
                        startValue: 1,
                        endValue: 0
                    }]
                }), this.comic.wrap(4500), b = new l("9col", "1tier", '<p class="display-text small dark">Then, at the end of the afternoon &mdash; after five long hours &mdash; Truong&rsquo;s small body suddenly unclenched and his breath eased.</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(100), e = new i("3col"), this.comic.add(e), a = new j("6col", "1tier", "images/095-096/01.png"), this.comic.add(a), this.comic.wrap(500), b = new l("4col", "1tier", '<p class="frame-external-text small dark">The lines on his forehead cleared. It seemed, unbelievably, that he had prevailed.</p>'), this.comic.add(b), b = new l("8col", "1tier", '<p class="display-text small dark">His clothes were soaked with sweat.</p>'), this.comic.add(b), this.comic.wrap(120), b = new m("0col", "1tier", '<div class="bk-large-bl-02"><div class="dialog"><p>It&rsquo;s over. Chi, the fever has broken.</p></div></div>', {
                    offsetX: 290,
                    offsetY: -70
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), b = new m("0col", "1tier", '<div class="bk-medium-tl-01"><div class="dialog"><p>Sleep, my beloved.</p></div></div>', {
                    offsetX: 1100,
                    offsetY: 200
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), this.comic.wrap(0), a = new j("4col", "1tier", "images/095-096/02.png"), this.comic.add(a), e = new i("1col"), this.comic.add(e), a = new j("6col", "1tier", "images/095-096/03.png"), this.comic.add(a), this.comic.wrap(540), b = new l("4col", "1tier", '<p class="frame-external-text small dark">For a fleeting moment, as Mai saw his face unfastened from its distress, the fantasy crossed her mind that he was dead.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">She shook it off.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Quyen&rsquo;s hair fell over her son&rsquo;s face. They both appeared to her strangely now, as if at an increasing remove.</p>'), this.comic.add(b), this.comic.wrap(150), a = new j("4col", "1tier", "images/095-096/04.png"), this.comic.add(a), a = new j("4col", "1tier", "images/095-096/05.png"), this.comic.add(a), a = new j("4col", "1tier", "images/095-096/06.png"), this.comic.add(a), this.comic.wrap(540), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Outside, the evening was falling, the last of the light sallow on his skin. After a while Truong gathered his breath again.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Quyen started singing a Southern lullaby Mai hadn&rsquo;t heard for years.</p>'), this.comic.add(b), this.comic.wrap(120), b = new m("0col", "1tier", '<div class="bk-medium-tr-02"><div class="dialog"><p>Ma will sing to Child?</p></div></div>', {
                    offsetX: 20,
                    offsetY: 320
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), b = new m("0col", "1tier", '<div class="bk-medium-tr-01"><div class="dialog"><p>No &mdash; not that one.</p></div></div>', {
                    offsetX: 550,
                    offsetY: 320
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), b = new m("0col", "1tier", '<div class="bk-medium-br-02"><div class="dialog"><p>My favourite song.</p></div></div>', {
                    offsetX: 780,
                    offsetY: 50
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), b = new m("0col", "1tier", '<div class="bk-medium-t-01"><div class="dialog"><p>Your<br/>favourite<br/>song&hellip;</p></div></div>', {
                    offsetX: 1200,
                    offsetY: 220
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), this.comic.wrap(0), a = new j("4col", "1tier", "images/096-102/02.png"), this.comic.add(a), a = new j("4col", "1tier", "images/096-102/03.png"), this.comic.add(a), a = new j("4col", "1tier", "images/096-102/04.png"), this.comic.add(a), this.comic.wrap(540), b = new l("6col", "1tier", '<p class="frame-external-text small dark">He made an effort to swallow.</p>'), this.comic.add(b), b = new l("6col", "1tier", '<p class="frame-external-text small dark">Mai waited for him to completely shut his eyes. Quyen found her hand and held it. </p>'), this.comic.add(b), this.comic.wrap(95), b = new m("0col", "1tier", '<div class="bk-medium-br-01"><div class="dialog"><p>But Child must sleep, nha?</p></div></div>', {
                    offsetX: 150,
                    offsetY: -50
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), this.comic.wrap(0), a = new j("6col", "1tier", "images/096-102/05.png"), this.comic.add(a), a = new j("6col", "1tier", "images/096-102/06.png"), this.comic.add(a), this.comic.wrap(540), e = new i("3col"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Mai cleared her throat.</p>'), this.comic.add(b), this.comic.wrap(55), e = new i("3col"), this.comic.add(e), a = new j("4col", "1tier", "images/096-102/07.png"), this.comic.add(a), a = new j("2col", "1tier", "images/096-102/08.png"), this.comic.add(a), this.comic.wrap(900), Ma = new f("song2"), c = new W, this.comic.add(c, {
                    center: !0,
                    maps: [{
                        property: "bgOpacityIn",
                        startScreenPosition: 1.75,
                        endScreenPosition: 1,
                        startValue: 0,
                        endValue: 1
                    }, {
                        property: "bgOpacityOut",
                        startScreenPosition: -.6,
                        endScreenPosition: -1,
                        startValue: 1,
                        endValue: 0
                    }, {
                        target: Ma,
                        property: "volumeIn",
                        startScreenPosition: 2,
                        endScreenPosition: 0,
                        startValue: 0,
                        endValue: .55
                    }, {
                        target: Ma,
                        property: "volumeOut",
                        startScreenPosition: 0,
                        endScreenPosition: -1.75,
                        startValue: .55,
                        endValue: 0
                    }],
                    triggers: [{
                        atScreenPosition: .75,
                        call: "fall"
                    }]
                }), this.comic.wrap(900), b = new l("4col", "1tier", '<p class="frame-external-text small light">The next morning &mdash; the morning of their thirteenth day &mdash; a couple of fishermen sighted land.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small light">A swell of excitement, like a weak current, ran through the boat.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small light">With those others strong enough, Mai followed the voice above deck.</p>'), this.comic.add(b), this.comic.wrap(120), b = new m("0col", "1tier", '<div class="bk-medium-t-01 emphasis"><div class="dialog"><p>We made it! We&rsquo;re safe now.</p></div></div>', {
                    offsetX: 590,
                    offsetY: 280
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), this.comic.wrap(0), a = new j("4col", "1tier", "images/096-102/09.png"), this.comic.add(a), a = new j("4col", "1tier", "images/096-102/10.png"), this.comic.add(a), a = new j("4col", "1tier", "images/096-102/11.png"), this.comic.add(a), this.comic.wrap(1e3), b = new l("9col", "1tier", '<p class="display-text small dark">Outside, the dawn sun steeped through her body as though her body were made of paper. Dizziness overwhelmed her when she saw the half-empty deck. Had they been so depleted?</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(85), a = new j("12col", "1tier", "images/096-102/12.png"), this.comic.add(a), this.comic.wrap(540), b = new l("9col", "1tier", '<p class="display-text small dark">Then she saw the prow, teeming with people, all peering ahead, attitudes stalled in their necks and shoulders. </p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(85), a = new j("12col", "1tier", "images/096-102/13.png"), this.comic.add(a), this.comic.wrap(800), b = new l("9col", "1tier", '<div class="display-text medium dark"><p>She made her way forward, then spotted, far ahead, the tiny breakers on the reefs. And behind those, the white sand like a bared smile. Birds hanging in mid-air over the water.</p></div>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(1300), Fa = new f("landAtmosExt"), c = new X, Ea = new g("birds", .3), this.comic.add(c, {
                    center: !0,
                    triggers: [{
                        atScreenPosition: 2,
                        call: "transitionIn"
                    }, {
                        atScreenPosition: 2,
                        target: Ea,
                        call: "play"
                    }],
                    maps: [{
                        property: "blackMatteOpacity",
                        startScreenPosition: 1,
                        endScreenPosition: 0,
                        startValue: 0,
                        endValue: 1
                    }, {
                        target: Fa,
                        property: "volumeIn",
                        startScreenPosition: 4,
                        endScreenPosition: 1.5,
                        startValue: 0,
                        endValue: 1
                    }, {
                        target: Fa,
                        property: "volumeOut",
                        startScreenPosition: -1,
                        endScreenPosition: -3,
                        startValue: 1,
                        endValue: 0
                    }],
                    activeBetweenScreenPosition: {
                        min: -3,
                        max: 4
                    }
                }), this.comic.wrap(200), b = new l("9col", "1tier", '<div class="display-text medium light"><p>During the night she had come to her decision. Her thoughts starting always with Truong and ending always with her father.</p><p>She would look after Truong as if he were her own child, completely, unconditionally, and try not to think about the moment when Quyen might ask her to stop.</p></div>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(1e3), b = new l("9col", "1tier", '<div class="display-text small light"><p>Nearly weightless in her body, Mai descended the companionway. She was about to call out when she sensed something amiss.</p></div>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(1e3), c = new Y, this.comic.add(c, {
                    center: !0,
                    maps: [{
                        property: "quyenBrightness",
                        startScreenPosition: 0,
                        endScreenPosition: -.3,
                        startValue: 0,
                        endValue: 1
                    }]
                }), this.comic.wrap(1500), b = new l("4col", "1tier", '<p class="frame-external-text small light">Quyen&rsquo;s back &mdash; folded over Truong&rsquo;s sleeping form &mdash; was too stiff. The posture too awkward.</p>'), this.comic.add(b), e = new i("4col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small light">Mai&rsquo;s heart tripped faster and faster, up into her throat.</p>'), this.comic.add(b), this.comic.wrap(110), b = new m("0col", "1tier", '<div class="bk-x-small-tl-01 emphasis"><div class="dialog"><p>Chi?</p></div></div>', {
                    offsetX: 40,
                    offsetY: 50
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), b = new m("0col", "1tier", '<div class="bk-medium-bl-02"><div class="dialog"><p>What will I do now?</p></div></div>', {
                    offsetX: 690,
                    offsetY: -100
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), b = new m("0col", "1tier", '<div class="bk-medium-l-01"><div class="dialog"><p>All night. He wouldn&rsquo;t wake up.</p></div></div>', {
                    offsetX: 1150,
                    offsetY: 100
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), this.comic.wrap(0), a = new j("4col", "1tier", "images/104-114/01.png"), this.comic.add(a), a = new j("4col", "1tier", "images/104-114/02.png"), this.comic.add(a), a = new j("4col", "1tier", "images/104-114/03.png"), this.comic.add(a), this.comic.wrap(800), b = new l("9col", "1tier", '<p class="display-text small light">When Mai had left last night, Truong had been recovering. He&rsquo;d been fine. He&rsquo;d been asking her, over and over, to sing to him. What could have happened?</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(95), a = new j("6col", "1tier", "images/104-114/04.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(800), b = new l("9col", "1tier", '<div class="display-text medium light"><p>He was bundled up in a blanket. The bundle tapered at one end &mdash; where his legs must have been.</p><p>Mai could see no part of him. How could this be the end of it?</p></div>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(1e3), Fa = new f("funeralAtmos"), c = new Z, this.comic.add(c, {
                    center: !0,
                    activeBetweenScreenPosition: {
                        min: -6,
                        max: 4
                    },
                    maps: [{
                        property: "progress",
                        startScreenPosition: 1,
                        endScreenPosition: -.5,
                        startValue: 0,
                        endValue: 1
                    }, {
                        target: Fa,
                        property: "volumeIn",
                        startScreenPosition: 5,
                        endScreenPosition: 3,
                        startValue: 0,
                        endValue: 1
                    }, {
                        target: Fa,
                        property: "volumeOut",
                        startScreenPosition: -8,
                        endScreenPosition: -10,
                        startValue: 1,
                        endValue: 0
                    }]
                }), this.comic.wrap(2100), b = new l("9col", "1tier", '<div class="display-text medium light"><p>She wrung the heels of her hands into her eyes, as if the fault lay with them.</p><p>Then she felt Quyen&rsquo;s face, cool with shock, next to her own, rough and wet and cool against her knuckles, speaking into her ear.</p><p>At first she recoiled from Quyen&rsquo;s touch. What was she saying? She was asking Mai for help. She was asking Mai to help carry him.</p><p>It was time, she said. Time, which had distended every moment on the boat &mdash; until there had seemed to be no shape to it &mdash; seemed now to snap violently shut, crushing all things into this one task.</p><p>They were standing &mdash; when had they gotten up?</p><p>Then they were kneeling, facing each other over the length of him. Quyen circumspect in her movements, as though loath to take up any more space than her son now needed.</p></div>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(1800), a = new j("12col", "1tier", "images/104-114/05.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(500), b = new l("3col", "1tier", '<p class="frame-external-text small light">Together the two of them brought the bundle aft.</p>'), this.comic.add(b), b = new l("6col", "1tier", '<p class="frame-external-text small light">Through the shifting, silent crowd, past the derrick-crane,</p>'), this.comic.add(b), b = new l("3col", "1tier", '<p class="frame-external-text small light">where a group of the strongest men waited.</p>'), this.comic.add(b), this.comic.wrap(110), a = new j("3col", "1tier", "images/104-114/06.png"), this.comic.add(a), a = new j("6col", "1tier", "images/104-114/07.png"), this.comic.add(a), a = new j("3col", "1tier", "images/104-114/08.png"), this.comic.add(a), this.comic.wrap(650), b = new l("9col", "1tier", '<p class="display-text medium dark">There, the wind turned a corner of the blanket over and revealed the small head, the ash beauty of his face, the new dark slickness of his skin.</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(400), c = new $, this.comic.add(c, {
                    center: !0,
                    maps: [{
                        property: "whiteMatteOpacity",
                        startScreenPosition: 1.9,
                        endScreenPosition: .5,
                        startValue: 0,
                        endValue: 1
                    }]
                }), this.comic.wrap(0), b = new l("4col", "1tier", '<p class="frame-external-text small dark">With a shudder Quyen fell to it and pressed and rubbed her lips against his cheek.</p>'), this.comic.add(b), this.comic.wrap(120), a = new j("4col", "1tier", "images/104-114/09.png"), this.comic.add(a), this.comic.wrap(650), b = new l("9col", "1tier", '<p class="display-text small dark">Mai took Quyen&rsquo;s arm and led her the full span of the boat to the prow.</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(75), a = new j("6col", "1tier", "images/104-114/10.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(500), b = new l("9col", "1tier", '<p class="display-text small dark">Again the crowd parted for them. The stood together in silence, the spray moistening their faces as they looked forward. </p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(95), a = new j("12col", "1tier", "images/104-114/11.png"), this.comic.add(a), this.comic.wrap(500), b = new l("9col", "1tier", '<p class="display-text small dark">Focusing all their sight and thought on that blurry peninsula ahead, that impossible place. So that they would not be forced to behold the men at the back of the boat peeling the blanket off, swinging the small body.</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(125), a = new j("12col", "1tier", "images/104-114/12.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(500), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Once, twice, three times before letting go.</p>'), this.comic.add(b), this.comic.wrap(75), a = new j("4col", "1tier", "images/104-114/13.png"), this.comic.add(a), this.comic.wrap(120), e = new i("4col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Tossing him as far behind the boat as possible.</p>'), this.comic.add(b), this.comic.wrap(75), e = new i("4col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/104-114/14.png"), this.comic.add(a), this.comic.wrap(120), e = new i("8col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small dark">So he would be out of sight.</p>'), this.comic.add(b), this.comic.wrap(75), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/104-114/15.png"), this.comic.add(a), this.comic.wrap(500), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/104-114/16.png"), this.comic.add(a), this.comic.wrap(500), Ea = new g("bodySplash01"), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/104-114/17.png"), this.comic.add(a, {
                    triggers: [{
                        atScreenPosition: .5,
                        target: Ea,
                        call: "play"
                    }]
                }), this.comic.wrap(500), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/104-114/18.png"), this.comic.add(a), this.comic.wrap(900), c = new _, this.comic.add(c, {
                    center: !0,
                    activeBetweenScreenPosition: {
                        min: -4.5,
                        max: 6
                    },
                    triggers: [{
                        atScreenPosition: .5,
                        call: "play"
                    }, {
                        atScreenPosition: .5,
                        target: d,
                        call: "sendCustomEvent",
                        params: ["end"]
                    }],
                    maps: [{
                        property: "blackMatteOpacity",
                        startScreenPosition: 1.2,
                        endScreenPosition: .5,
                        startValue: 0,
                        endValue: 1
                    }, {
                        property: "videoOpacity",
                        startScreenPosition: .5,
                        endScreenPosition: -1.5,
                        startValue: 0,
                        endValue: .6
                    }]
                }), this.comic.wrap(1e3), b = new l("9col", "1tier", Da), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(4e3), this.comic.addEventListener("preload", this.onPreload), this.comic.addEventListener("anchorChange", this.onAnchorChange), this.comic.addEventListener("switchStoryLine", this.onSwitchStoryLine), this.comic.addEventListener("switchDefaultStoryLine", this.onSwitchDefaultStoryLine), this.comic.start()
            },
            onSwitchStoryLine: function() {
                Ea.trigger("switchStoryLine")
            },
            onSwitchDefaultStoryLine: function() {
                Ea.trigger("switchDefaultStoryLine")
            },
            render: function() {
                this.el.style.display = "block", this.el.style.width = "100%", this.el.style.height = "100%", Ea.on("autoScroll", this.onAutoScroll), Ea.on("chapterClick", this.onChapterClick), this.el.appendChild(this.comic.domElement)
            },
            onPreload: function() {
                this.comic.removeEventListener("preload", this.onPreload), this.landingSplash.transitionIn(), this.trigger("preload")
            },
            pause: function() {
                this.comic.pause()
            },
            resume: function() {
                this.comic.resume()
            },
            onAutoScroll: function(a) {
                this.comic.autoScroll = a
            },
            onChapterClick: function(a) {
                this.comic.gotoAnchor(a.chapterName)
            },
            onAnchorChange: function(a) {
                Ea.trigger("anchorChange", {
                    name: a.name
                })
            },
            onResize: function() {
                this.comic.setSize(window.innerWidth, window.innerHeight)
            }
        });
        return Fa
    }), define("text!html/footer.html", [], function() {
        return '<div class="settings">\n    <input type="checkbox" id="sound" class="checkbox"/><label id="sound-label" for="sound">Sound</label>\n    <input type="checkbox" id="auto-scroll" class="checkbox"/><label for="auto-scroll">Auto Scroll</label>\n    <input type="checkbox" id="full-screen" class="checkbox"/><label id="full-screen-label" for="full-screen">Full Screen</label>\n</div>\n<div class="logo">\n    <a href="http://www.sbs.com.au" target="_blank"><img src="images/logo-sbs.svg" width="76" height="61" /></a>\n</div>\n'
    }), define("views/FooterView", ["jquery", "underscore", "backbone", "audio/Thump", "events/appEvents", "config", "text!html/footer.html"], function(a, b, c, d, e, f, g) {
        var h = c.View.extend({
            initialize: function() {
                b.bindAll(this, "onAutoScrollCheckboxChange", "onSoundCheckboxChange", "onFullScreenCheckboxChange")
            },
            render: function() {
                f.isKioskMode || (this.el.innerHTML = g, this.autoScrollCheckbox = document.getElementById("auto-scroll"), this.autoScrollCheckbox.addEventListener("change", this.onAutoScrollCheckboxChange), this.soundCheckbox = document.getElementById("sound"), this.soundLabel = document.getElementById("sound-label"), d.autoPlaySupported ? this.soundCheckbox.checked = !d.mute : (this.soundCheckbox.style.display = "none", this.soundLabel.style.display = "none"), this.soundCheckbox.addEventListener("change", this.onSoundCheckboxChange), this.fullScreenCheckbox = document.getElementById("full-screen"), this.fullScreenLabel = document.getElementById("full-screen-label"), Modernizr.fullscreen ? (this.fullScreenCheckbox.addEventListener("click", this.onFullScreenCheckboxChange), a(document.documentElement).bind("webkitfullscreenchange mozfullscreenchange msfullscreenchange fullscreenchange", function() {
                    var a = document.fullScreen || document.mozFullScreen || document.webkitIsFullScreen || null != document.fullscreenElemen;
                    this.fullScreenCheckbox.checked = a
                }.bind(this))) : (this.fullScreenCheckbox.style.display = "none", this.fullScreenLabel.style.display = "none"))
            },
            onAutoScrollCheckboxChange: function() {
                var a = this.autoScrollCheckbox.checked;
                e.trigger("autoScroll", a)
            },
            onSoundCheckboxChange: function() {
                d.mute = !d.mute, this.soundCheckbox.checked = !d.mute
            },
            onFullScreenCheckboxChange: function() {
                var a = document.documentElement,
                    b = a.requestFullscreen || a.msRequestFullscreen || a.mozRequestFullScreen || a.webkitRequestFullscreen,
                    c = document.exitFullscreen || document.msExitFullscreen || document.mozCancelFullScreen || document.webkitExitFullscreen;
                this.fullScreenCheckbox.checked && b ? b.apply(a) : !this.fullScreenCheckbox.checked && c && c.apply(document)
            }
        });
        return h
    }), define("text!html/social.html", [], function() {
        return '<!-- Twitter -->\n<div class="twitter">\n    <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://www.sbs.com.au/theboat" data-text="‘The Boat’, an interactive graphic novel about escape after the Vietnam War. Based on the story by Nam Le.">Tweet</a>\n</div>\n<!-- Facebook  -->\n<div class="facebook">\n    <iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.sbs.com.au%2Ftheboat&amp;width=130&amp;layout=button_count&amp;action=like&amp;show_faces=false&amp;share=true&amp;height=21&amp;appId=210615882442413" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:130px; height:21px;" allowTransparency="true"></iframe>\n</div>\n'
    }), define("views/SocialView", ["backbone", "config", "text!html/social.html"], function(a, b, c) {
        var d = a.View.extend({
            initialize: function() {},
            render: function() {
                b.isKioskMode || (this.el.innerHTML = c, this.show())
            },
            show: function() {
                this.el.style.display = "block", ! function(a, b, c) {
                    var d, e = a.getElementsByTagName(b)[0],
                        f = /^http:/.test(a.location) ? "http" : "https";
                    a.getElementById(c) || (d = a.createElement(b), d.id = c, d.src = f + "://platform.twitter.com/widgets.js", e.parentNode.insertBefore(d, e))
                }(document, "script", "twitter-wjs")
            }
        });
        return d
    }), define("text!html/chapter-nav.html", [], function() {
        return '<div id="chapter-nav">\n    <ul>\n        <li><a class="chapter" data-chapter-name="chapter1" href="chapter-1">1</a></li>\n        <li><a class="chapter" data-chapter-name="chapter2" href="chapter-2">2</a></li>\n        <li><a class="chapter" data-chapter-name="chapter3" href="chapter-3">3</a></li>\n        <li><a class="chapter" data-chapter-name="chapter4" href="chapter-4">4</a></li>\n        <li><a class="chapter" data-chapter-name="chapter5" href="chapter-5">5</a></li>\n        <li><a class="chapter" data-chapter-name="chapter6" href="chapter-6">6</a></li>\n    </ul>\n</div>\n'
    }), define("views/ChapterNavView", ["jquery", "underscore", "backbone", "events/appEvents", "text!html/chapter-nav.html"], function(a, b, c, d, e) {
        var f = c.View.extend({
            initialize: function() {
                b.bindAll(this, "onClick", "onAnchorChange", "onStoryLine", "onDefaultStoryLine")
            },
            render: function() {
                this.el.innerHTML = e;
                var a = this.$el.find(".chapter");
                a.on("click", this.onClick), d.on("anchorChange", this.onAnchorChange), d.on("switchDefaultStoryLine", this.onDefaultStoryLine), d.on("switchStoryLine", this.onStoryLine)
            },
            onClick: function(b) {
                b.preventDefault();
                var c = a(b.target).data("chapter-name");
                this.select(c), d.trigger("chapterClick", {
                    chapterName: c
                })
            },
            select: function(a) {
                var b = this.$el.find('*[data-chapter-name="' + a + '"]');
                b.length > 0 && (this.$el.find(".chapter").removeClass("selected"), b.addClass("selected"))
            },
            onStoryLine: function() {
                a("#chapter-nav").addClass("nav-hidden")
            },
            onDefaultStoryLine: function() {
                a("#chapter-nav").removeClass("nav-hidden")
            },
            onAnchorChange: function(a) {
                this.select(a.name)
            },
            hide: function() {}
        });
        return f
    }), define("kiosk/KioskResetTimer", ["underscore"], function(a) {
        var b = function() {
                a.bindAll(this, "onTimeout", "onInteraction")
            },
            c = b.prototype;
        return c.start = function() {
            document.documentElement.addEventListener("click", this.onInteraction), document.documentElement.addEventListener("scroll", this.onInteraction, !0), this.startTimer()
        }, c.startTimer = function() {
            this.timerId && clearTimeout(this.timerId), this.timerId = setTimeout(this.onTimeout, 18e4)
        }, c.onInteraction = function() {
            this.startTimer()
        }, c.onTimeout = function() {
            document.location.reload()
        }, b
    }), define("views/AppView", ["jquery", "underscore", "backbone", "audio/Thump", "views/ComicView", "views/FooterView", "views/SocialView", "views/ChapterNavView", "kiosk/KioskResetTimer", "config", "events/appEvents"], function(a, b, c, d, e, f, g, h, i, j, k) {
        var l = c.View.extend({
            initialize: function() {
                b.bindAll(this, "onComicViewPreload", "onThumpInitComplete", "onThumpPreload", "onFocus", "onBlur"), d.addEventListener("initComplete", this.onThumpInitComplete), d.addEventListener("preloadComplete", this.onThumpPreload), d.init(), this.el.style.display = "none", d.volume = 0
            },
            onThumpInitComplete: function() {
                this.createViews(), this.comicView.render(), this.el.style.display = "block"
            },
            createViews: function() {
                this.comicView = new e({
                    el: this.el
                }), this.comicView.on("preload", this.onComicViewPreload), this.comicView.createComic(), this.chapterNav = new h({
                    el: "#chapter-nav-container"
                }), this.footer = new f({
                    el: "#footer-container"
                }), this.social = new g({
                    el: "#social-container"
                })
            },
            onComicViewPreload: function() {
                this.appReady()
            },
            onThumpPreload: function() {
                TweenMax.to(d, 5, {
                    volume: 1
                })
            },
            onFocus: function() {},
            onBlur: function() {},
            render: function() {
                this.chapterNav.render(), this.footer.render(),
                    this.social.render()
            },
            appReady: function() {
                j.isKioskMode && (this.kioskResetTimer = new i, this.kioskResetTimer.start()), window.addEventListener("focus", this.onFocus), window.addEventListener("blur", this.onBlur), k.trigger("ready")
            },
            onResize: function() {
                this.comic.setSize(window.innerWidth, window.innerHeight)
            }
        });
        return l
    }), define("text!html/preloader.html", [], function() {
        return '<div class="preloader">\n    <div class="loading">\n\n    </div>\n    <div class="headphones">\n        <img src="images/ui/site-preloader/icon-headphones@2x.png" width="79" height="80" alt=""/>\n        <img class="label" src="images/ui/site-preloader/text-headphones@2x.png" width="257" height="45" alt="This site uses audio. Headphones are recommended."/>\n    </div>\n</div>\n'
    }), define("views/PreloaderView", ["jquery", "underscore", "backbone", "text!html/preloader.html"], function(a, b, c, d) {
        var e = c.View.extend({
            initialize: function() {},
            render: function() {
                this.preloader = document.createElement("div"), this.preloader.innerHTML = d, this.el.appendChild(this.preloader)
            },
            hide: function() {
                this.el.style.display = "none", this.el.removeChild(this.preloader)
            }
        });
        return e
    }), define("AppRouter", ["jquery", "underscore", "backbone"], function(a, b, c) {
        var d = c.Router.extend({
            routes: {
                "(/)": "goto"
            },
            "goto": function() {},
            initialize: function(a) {
                return this.app = a.app, this
            }
        });
        return d
    }), window.flightCheck && window.flightCheck.featuresSupported && (require.config({
        baseUrl: "scripts",
        paths: {
            jquery: "../../bower_components/jquery/dist/jquery",
            underscore: "../../bower_components/underscore/underscore",
            backbone: "../../bower_components/backbone/backbone",
            easeljs: "../../bower_components/easeljs/lib/easeljs-NEXT.min",
            preloadjs: "../../bower_components/createjs-preloadjs/lib/preloadjs-NEXT.min",
            snapsvg: "../../bower_components/snap.svg/dist/snap.svg",
            text: "../../bower_components/requirejs-text/text",
            tweenMax: "vendor/greensock/src/uncompressed/TweenMax",
            timelineMax: "vendor/greensock/src/uncompressed/TimelineMax",
            easing: "vendor/greensock/src/uncompressed/easing/EasePack",
            splitText: "vendor/greensock/src/uncompressed/utils/SplitText",
            statsjs: "vendor/statsjs/stats.min",
            modernizr: "vendor/modernizr/modernizr",
            detectizr: "vendor/detectizr/detectizr",
            rasterize: "vendor/rasterize/rasterizeHTML.allinone",
            soundjs: "vendor/soundjs/soundjs-0.6.0.combined",
            threejs: "vendor/threejs/three",
            threejsCSS: "vendor/threejs/extras/renderers/CSS3DRenderer",
            threejsCopyShader: "vendor/threejs/extras/shaders/CopyShader",
            threejsMaskPass: "vendor/threejs/extras/postprocessing/MaskPass",
            threejsShaderPass: "vendor/threejs/extras/postprocessing/ShaderPass",
            threejsRenderPass: "vendor/threejs/extras/postprocessing/RenderPass",
            threejsFX: "vendor/threejs/extras/postprocessing/EffectComposer",
            threejsNoiseShader: "postprocessing/NoiseShader",
            threejsNoisePass: "postprocessing/NoisePass",
            createjsEventDispatcher: "vendor/createjsevents/EventDispatcher",
            createjsEvent: "vendor/createjsevents/Event",
            createjsErrorEvent: "vendor/createjsevents/ErrorEvent",
            html: "../html"
        },
        shim: {
            jquery: {
                exports: "$"
            },
            underscore: {
                exports: "_"
            },
            backbone: {
                deps: ["underscore", "jquery"],
                exports: "Backbone"
            },
            easeljs: {
                exports: "createjs"
            },
            preloadjs: {
                exports: "createjs"
            },
            soundjs: {
                exports: "createjs"
            },
            modernizr: {
                exports: "Modernizr"
            },
            snapsvg: {
                exports: "Snap"
            },
            tweenMax: {
                exports: "TweenMax"
            },
            timelineMax: {
                exports: "TimelineMax",
                deps: ["tweenMax"]
            },
            easing: {
                exports: "easing"
            },
            threejs: {
                exports: "THREE"
            },
            threejsCSS: {
                exports: "THREE",
                deps: ["threejs"]
            },
            threejsCopyShader: {
                exports: "THREE",
                deps: ["threejs"]
            },
            threejsNoisePass: {
                exports: "THREE",
                deps: ["threejs", "threejsNoiseShader"]
            },
            threejsNoiseShader: {
                exports: "THREE",
                deps: ["threejs"]
            },
            threejsRenderPass: {
                exports: "THREE",
                deps: ["threejs"]
            },
            threejsShaderPass: {
                exports: "THREE",
                deps: ["threejs"]
            },
            threejsMaskPass: {
                exports: "THREE",
                deps: ["threejs"]
            },
            threejsFX: {
                exports: "THREE",
                deps: ["threejs", "threejsCopyShader", "threejsNoisePass", "threejsNoiseShader", "threejsRenderPass", "threejsMaskPass", "threejsShaderPass"]
            },
            createjsEventDispatcher: {
                exports: "createjs",
                deps: ["createjsEvent"]
            }
        }
    }), require(["jquery", "underscore", "backbone", "threejs", "views/AppView", "views/PreloaderView", "AppRouter", "tracking/Tracking", "events/appEvents"], function(a, b, c, d, e, f, g, h, i) {
        var j, k, l;
        Object.keys(d.ShaderLib).forEach(function(a) {
            d.ShaderLib[a].fragmentShader = d.ShaderLib[a].fragmentShader.replace("#extension GL_EXT_frag_depth : enable", "")
        }), k = new f({
            el: "#preloader-container"
        }), k.render(), i.once("ready", function() {
            k.hide(), l = new g({
                app: j
            }), c.history.start(), j.render()
        }), j = new e({
            el: "#app-container"
        });
        try {
            var m = window.screen.lockOrientation || window.screen.msLockOrientation || window.screen.mozLockOrientation;
            m ? m.apply(window.screen, ["landscape"]) : window.screen.orientation.lock && "desktop" != Detectizr.device.type && "chrome" == Detectizr.browser.name && window.screen.orientation.lock("landscape")
        } catch (n) {
            console.log("no lock available")
        }
        h.init("theBoat")
    })), define("main", function() {});
var requirejs, require, define;
! function(global) {
    function isFunction(a) {
        return "[object Function]" === ostring.call(a)
    }

    function isArray(a) {
        return "[object Array]" === ostring.call(a)
    }

    function each(a, b) {
        if (a) {
            var c;
            for (c = 0; c < a.length && (!a[c] || !b(a[c], c, a)); c += 1);
        }
    }

    function eachReverse(a, b) {
        if (a) {
            var c;
            for (c = a.length - 1; c > -1 && (!a[c] || !b(a[c], c, a)); c -= 1);
        }
    }

    function hasProp(a, b) {
        return hasOwn.call(a, b)
    }

    function getOwn(a, b) {
        return hasProp(a, b) && a[b]
    }

    function eachProp(a, b) {
        var c;
        for (c in a)
            if (hasProp(a, c) && b(a[c], c)) break
    }

    function mixin(a, b, c, d) {
        return b && eachProp(b, function(b, e) {
            (c || !hasProp(a, e)) && (!d || "object" != typeof b || !b || isArray(b) || isFunction(b) || b instanceof RegExp ? a[e] = b : (a[e] || (a[e] = {}), mixin(a[e], b, c, d)))
        }), a
    }

    function bind(a, b) {
        return function() {
            return b.apply(a, arguments)
        }
    }

    function scripts() {
        return document.getElementsByTagName("script")
    }

    function defaultOnError(a) {
        throw a
    }

    function getGlobal(a) {
        if (!a) return a;
        var b = global;
        return each(a.split("."), function(a) {
            b = b[a]
        }), b
    }

    function makeError(a, b, c, d) {
        var e = new Error(b + "\nhttp://requirejs.org/docs/errors.html#" + a);
        return e.requireType = a, e.requireModules = d, c && (e.originalError = c), e
    }

    function newContext(a) {
        function b(a) {
            var b, c;
            for (b = 0; b < a.length; b++)
                if (c = a[b], "." === c) a.splice(b, 1), b -= 1;
                else if (".." === c) {
                if (0 === b || 1 == b && ".." === a[2] || ".." === a[b - 1]) continue;
                b > 0 && (a.splice(b - 1, 2), b -= 2)
            }
        }

        function c(a, c, d) {
            var e, f, g, h, i, j, k, l, m, n, o, p, q = c && c.split("/"),
                r = x.map,
                s = r && r["*"];
            if (a && (a = a.split("/"), k = a.length - 1, x.nodeIdCompat && jsSuffixRegExp.test(a[k]) && (a[k] = a[k].replace(jsSuffixRegExp, "")), "." === a[0].charAt(0) && q && (p = q.slice(0, q.length - 1), a = p.concat(a)), b(a), a = a.join("/")), d && r && (q || s)) {
                g = a.split("/");
                a: for (h = g.length; h > 0; h -= 1) {
                    if (j = g.slice(0, h).join("/"), q)
                        for (i = q.length; i > 0; i -= 1)
                            if (f = getOwn(r, q.slice(0, i).join("/")), f && (f = getOwn(f, j))) {
                                l = f, m = h;
                                break a
                            }!n && s && getOwn(s, j) && (n = getOwn(s, j), o = h)
                }!l && n && (l = n, m = o), l && (g.splice(0, m, l), a = g.join("/"))
            }
            return e = getOwn(x.pkgs, a), e ? e : a
        }

        function d(a) {
            isBrowser && each(scripts(), function(b) {
                return b.getAttribute("data-requiremodule") === a && b.getAttribute("data-requirecontext") === u.contextName ? (b.parentNode.removeChild(b), !0) : void 0
            })
        }

        function e(a) {
            var b = getOwn(x.paths, a);
            return b && isArray(b) && b.length > 1 ? (b.shift(), u.require.undef(a), u.makeRequire(null, {
                skipMap: !0
            })([a]), !0) : void 0
        }

        function f(a) {
            var b, c = a ? a.indexOf("!") : -1;
            return c > -1 && (b = a.substring(0, c), a = a.substring(c + 1, a.length)), [b, a]
        }

        function g(a, b, d, e) {
            var g, h, i, j, k = null,
                l = b ? b.name : null,
                m = a,
                n = !0,
                o = "";
            return a || (n = !1, a = "_@r" + (F += 1)), j = f(a), k = j[0], a = j[1], k && (k = c(k, l, e), h = getOwn(C, k)), a && (k ? o = h && h.normalize ? h.normalize(a, function(a) {
                return c(a, l, e)
            }) : -1 === a.indexOf("!") ? c(a, l, e) : a : (o = c(a, l, e), j = f(o), k = j[0], o = j[1], d = !0, g = u.nameToUrl(o))), i = !k || h || d ? "" : "_unnormalized" + (G += 1), {
                prefix: k,
                name: o,
                parentMap: b,
                unnormalized: !!i,
                url: g,
                originalName: m,
                isDefine: n,
                id: (k ? k + "!" + o : o) + i
            }
        }

        function h(a) {
            var b = a.id,
                c = getOwn(y, b);
            return c || (c = y[b] = new u.Module(a)), c
        }

        function i(a, b, c) {
            var d = a.id,
                e = getOwn(y, d);
            !hasProp(C, d) || e && !e.defineEmitComplete ? (e = h(a), e.error && "error" === b ? c(e.error) : e.on(b, c)) : "defined" === b && c(C[d])
        }

        function j(a, b) {
            var c = a.requireModules,
                d = !1;
            b ? b(a) : (each(c, function(b) {
                var c = getOwn(y, b);
                c && (c.error = a, c.events.error && (d = !0, c.emit("error", a)))
            }), d || req.onError(a))
        }

        function k() {
            globalDefQueue.length && (apsp.apply(B, [B.length, 0].concat(globalDefQueue)), globalDefQueue = [])
        }

        function l(a) {
            delete y[a], delete z[a]
        }

        function m(a, b, c) {
            var d = a.map.id;
            a.error ? a.emit("error", a.error) : (b[d] = !0, each(a.depMaps, function(d, e) {
                var f = d.id,
                    g = getOwn(y, f);
                !g || a.depMatched[e] || c[f] || (getOwn(b, f) ? (a.defineDep(e, C[f]), a.check()) : m(g, b, c))
            }), c[d] = !0)
        }

        function n() {
            var a, b, c = 1e3 * x.waitSeconds,
                f = c && u.startTime + c < (new Date).getTime(),
                g = [],
                h = [],
                i = !1,
                k = !0;
            if (!s) {
                if (s = !0, eachProp(z, function(a) {
                        var c = a.map,
                            j = c.id;
                        if (a.enabled && (c.isDefine || h.push(a), !a.error))
                            if (!a.inited && f) e(j) ? (b = !0, i = !0) : (g.push(j), d(j));
                            else if (!a.inited && a.fetched && c.isDefine && (i = !0, !c.prefix)) return k = !1
                    }), f && g.length) return a = makeError("timeout", "Load timeout for modules: " + g, null, g), a.contextName = u.contextName, j(a);
                k && each(h, function(a) {
                    m(a, {}, {})
                }), f && !b || !i || !isBrowser && !isWebWorker || w || (w = setTimeout(function() {
                    w = 0, n()
                }, 50)), s = !1
            }
        }

        function o(a) {
            hasProp(C, a[0]) || h(g(a[0], null, !0)).init(a[1], a[2])
        }

        function p(a, b, c, d) {
            a.detachEvent && !isOpera ? d && a.detachEvent(d, b) : a.removeEventListener(c, b, !1)
        }

        function q(a) {
            var b = a.currentTarget || a.srcElement;
            return p(b, u.onScriptLoad, "load", "onreadystatechange"), p(b, u.onScriptError, "error"), {
                node: b,
                id: b && b.getAttribute("data-requiremodule")
            }
        }

        function r() {
            var a;
            for (k(); B.length;) {
                if (a = B.shift(), null === a[0]) return j(makeError("mismatch", "Mismatched anonymous define() module: " + a[a.length - 1]));
                o(a)
            }
        }
        var s, t, u, v, w, x = {
                waitSeconds: 7,
                baseUrl: "./",
                paths: {},
                bundles: {},
                pkgs: {},
                shim: {},
                config: {}
            },
            y = {},
            z = {},
            A = {},
            B = [],
            C = {},
            D = {},
            E = {},
            F = 1,
            G = 1;
        return v = {
            require: function(a) {
                return a.require ? a.require : a.require = u.makeRequire(a.map)
            },
            exports: function(a) {
                return a.usingExports = !0, a.map.isDefine ? a.exports ? C[a.map.id] = a.exports : a.exports = C[a.map.id] = {} : void 0
            },
            module: function(a) {
                return a.module ? a.module : a.module = {
                    id: a.map.id,
                    uri: a.map.url,
                    config: function() {
                        return getOwn(x.config, a.map.id) || {}
                    },
                    exports: a.exports || (a.exports = {})
                }
            }
        }, t = function(a) {
            this.events = getOwn(A, a.id) || {}, this.map = a, this.shim = getOwn(x.shim, a.id), this.depExports = [], this.depMaps = [], this.depMatched = [], this.pluginMaps = {}, this.depCount = 0
        }, t.prototype = {
            init: function(a, b, c, d) {
                d = d || {}, this.inited || (this.factory = b, c ? this.on("error", c) : this.events.error && (c = bind(this, function(a) {
                    this.emit("error", a)
                })), this.depMaps = a && a.slice(0), this.errback = c, this.inited = !0, this.ignore = d.ignore, d.enabled || this.enabled ? this.enable() : this.check())
            },
            defineDep: function(a, b) {
                this.depMatched[a] || (this.depMatched[a] = !0, this.depCount -= 1, this.depExports[a] = b)
            },
            fetch: function() {
                if (!this.fetched) {
                    this.fetched = !0, u.startTime = (new Date).getTime();
                    var a = this.map;
                    return this.shim ? void u.makeRequire(this.map, {
                        enableBuildCallback: !0
                    })(this.shim.deps || [], bind(this, function() {
                        return a.prefix ? this.callPlugin() : this.load()
                    })) : a.prefix ? this.callPlugin() : this.load()
                }
            },
            load: function() {
                var a = this.map.url;
                D[a] || (D[a] = !0, u.load(this.map.id, a))
            },
            check: function() {
                if (this.enabled && !this.enabling) {
                    var a, b, c = this.map.id,
                        d = this.depExports,
                        e = this.exports,
                        f = this.factory;
                    if (this.inited) {
                        if (this.error) this.emit("error", this.error);
                        else if (!this.defining) {
                            if (this.defining = !0, this.depCount < 1 && !this.defined) {
                                if (isFunction(f)) {
                                    if (this.events.error && this.map.isDefine || req.onError !== defaultOnError) try {
                                        e = u.execCb(c, f, d, e)
                                    } catch (g) {
                                        a = g
                                    } else e = u.execCb(c, f, d, e);
                                    if (this.map.isDefine && void 0 === e && (b = this.module, b ? e = b.exports : this.usingExports && (e = this.exports)), a) return a.requireMap = this.map, a.requireModules = this.map.isDefine ? [this.map.id] : null, a.requireType = this.map.isDefine ? "define" : "require", j(this.error = a)
                                } else e = f;
                                this.exports = e, this.map.isDefine && !this.ignore && (C[c] = e, req.onResourceLoad && req.onResourceLoad(u, this.map, this.depMaps)), l(c), this.defined = !0
                            }
                            this.defining = !1, this.defined && !this.defineEmitted && (this.defineEmitted = !0, this.emit("defined", this.exports), this.defineEmitComplete = !0)
                        }
                    } else this.fetch()
                }
            },
            callPlugin: function() {
                var a = this.map,
                    b = a.id,
                    d = g(a.prefix);
                this.depMaps.push(d), i(d, "defined", bind(this, function(d) {
                    var e, f, k, m = getOwn(E, this.map.id),
                        n = this.map.name,
                        o = this.map.parentMap ? this.map.parentMap.name : null,
                        p = u.makeRequire(a.parentMap, {
                            enableBuildCallback: !0
                        });
                    return this.map.unnormalized ? (d.normalize && (n = d.normalize(n, function(a) {
                        return c(a, o, !0)
                    }) || ""), f = g(a.prefix + "!" + n, this.map.parentMap), i(f, "defined", bind(this, function(a) {
                        this.init([], function() {
                            return a
                        }, null, {
                            enabled: !0,
                            ignore: !0
                        })
                    })), k = getOwn(y, f.id), void(k && (this.depMaps.push(f), this.events.error && k.on("error", bind(this, function(a) {
                        this.emit("error", a)
                    })), k.enable()))) : m ? (this.map.url = u.nameToUrl(m), void this.load()) : (e = bind(this, function(a) {
                        this.init([], function() {
                            return a
                        }, null, {
                            enabled: !0
                        })
                    }), e.error = bind(this, function(a) {
                        this.inited = !0, this.error = a, a.requireModules = [b], eachProp(y, function(a) {
                            0 === a.map.id.indexOf(b + "_unnormalized") && l(a.map.id)
                        }), j(a)
                    }), e.fromText = bind(this, function(c, d) {
                        var f = a.name,
                            i = g(f),
                            k = useInteractive;
                        d && (c = d), k && (useInteractive = !1), h(i), hasProp(x.config, b) && (x.config[f] = x.config[b]);
                        try {
                            req.exec(c)
                        } catch (l) {
                            return j(makeError("fromtexteval", "fromText eval for " + b + " failed: " + l, l, [b]))
                        }
                        k && (useInteractive = !0), this.depMaps.push(i), u.completeLoad(f), p([f], e)
                    }), void d.load(a.name, p, e, x))
                })), u.enable(d, this), this.pluginMaps[d.id] = d
            },
            enable: function() {
                z[this.map.id] = this, this.enabled = !0, this.enabling = !0, each(this.depMaps, bind(this, function(a, b) {
                    var c, d, e;
                    if ("string" == typeof a) {
                        if (a = g(a, this.map.isDefine ? this.map : this.map.parentMap, !1, !this.skipMap), this.depMaps[b] = a, e = getOwn(v, a.id)) return void(this.depExports[b] = e(this));
                        this.depCount += 1, i(a, "defined", bind(this, function(a) {
                            this.defineDep(b, a), this.check()
                        })), this.errback && i(a, "error", bind(this, this.errback))
                    }
                    c = a.id, d = y[c], hasProp(v, c) || !d || d.enabled || u.enable(a, this)
                })), eachProp(this.pluginMaps, bind(this, function(a) {
                    var b = getOwn(y, a.id);
                    b && !b.enabled && u.enable(a, this)
                })), this.enabling = !1, this.check()
            },
            on: function(a, b) {
                var c = this.events[a];
                c || (c = this.events[a] = []), c.push(b)
            },
            emit: function(a, b) {
                each(this.events[a], function(a) {
                    a(b)
                }), "error" === a && delete this.events[a]
            }
        }, u = {
            config: x,
            contextName: a,
            registry: y,
            defined: C,
            urlFetched: D,
            defQueue: B,
            Module: t,
            makeModuleMap: g,
            nextTick: req.nextTick,
            onError: j,
            configure: function(a) {
                a.baseUrl && "/" !== a.baseUrl.charAt(a.baseUrl.length - 1) && (a.baseUrl += "/");
                var b = x.shim,
                    c = {
                        paths: !0,
                        bundles: !0,
                        config: !0,
                        map: !0
                    };
                eachProp(a, function(a, b) {
                    c[b] ? (x[b] || (x[b] = {}), mixin(x[b], a, !0, !0)) : x[b] = a
                }), a.bundles && eachProp(a.bundles, function(a, b) {
                    each(a, function(a) {
                        a !== b && (E[a] = b)
                    })
                }), a.shim && (eachProp(a.shim, function(a, c) {
                    isArray(a) && (a = {
                        deps: a
                    }), !a.exports && !a.init || a.exportsFn || (a.exportsFn = u.makeShimExports(a)), b[c] = a
                }), x.shim = b), a.packages && each(a.packages, function(a) {
                    var b, c;
                    a = "string" == typeof a ? {
                        name: a
                    } : a, c = a.name, b = a.location, b && (x.paths[c] = a.location), x.pkgs[c] = a.name + "/" + (a.main || "main").replace(currDirRegExp, "").replace(jsSuffixRegExp, "")
                }), eachProp(y, function(a, b) {
                    a.inited || a.map.unnormalized || (a.map = g(b))
                }), (a.deps || a.callback) && u.require(a.deps || [], a.callback)
            },
            makeShimExports: function(a) {
                function b() {
                    var b;
                    return a.init && (b = a.init.apply(global, arguments)), b || a.exports && getGlobal(a.exports)
                }
                return b
            },
            makeRequire: function(b, e) {
                function f(c, d, i) {
                    var k, l, m;
                    return e.enableBuildCallback && d && isFunction(d) && (d.__requireJsBuild = !0), "string" == typeof c ? isFunction(d) ? j(makeError("requireargs", "Invalid require call"), i) : b && hasProp(v, c) ? v[c](y[b.id]) : req.get ? req.get(u, c, b, f) : (l = g(c, b, !1, !0), k = l.id, hasProp(C, k) ? C[k] : j(makeError("notloaded", 'Module name "' + k + '" has not been loaded yet for context: ' + a + (b ? "" : ". Use require([])")))) : (r(), u.nextTick(function() {
                        r(), m = h(g(null, b)), m.skipMap = e.skipMap, m.init(c, d, i, {
                            enabled: !0
                        }), n()
                    }), f)
                }
                return e = e || {}, mixin(f, {
                    isBrowser: isBrowser,
                    toUrl: function(a) {
                        var d, e = a.lastIndexOf("."),
                            f = a.split("/")[0],
                            g = "." === f || ".." === f;
                        return -1 !== e && (!g || e > 1) && (d = a.substring(e, a.length), a = a.substring(0, e)), u.nameToUrl(c(a, b && b.id, !0), d, !0)
                    },
                    defined: function(a) {
                        return hasProp(C, g(a, b, !1, !0).id)
                    },
                    specified: function(a) {
                        return a = g(a, b, !1, !0).id, hasProp(C, a) || hasProp(y, a)
                    }
                }), b || (f.undef = function(a) {
                    k();
                    var c = g(a, b, !0),
                        e = getOwn(y, a);
                    d(a), delete C[a], delete D[c.url], delete A[a], eachReverse(B, function(b, c) {
                        b[0] === a && B.splice(c, 1)
                    }), e && (e.events.defined && (A[a] = e.events), l(a))
                }), f
            },
            enable: function(a) {
                var b = getOwn(y, a.id);
                b && h(a).enable()
            },
            completeLoad: function(a) {
                var b, c, d, f = getOwn(x.shim, a) || {},
                    g = f.exports;
                for (k(); B.length;) {
                    if (c = B.shift(), null === c[0]) {
                        if (c[0] = a, b) break;
                        b = !0
                    } else c[0] === a && (b = !0);
                    o(c)
                }
                if (d = getOwn(y, a), !b && !hasProp(C, a) && d && !d.inited) {
                    if (!(!x.enforceDefine || g && getGlobal(g))) return e(a) ? void 0 : j(makeError("nodefine", "No define call for " + a, null, [a]));
                    o([a, f.deps || [], f.exportsFn])
                }
                n()
            },
            nameToUrl: function(a, b, c) {
                var d, e, f, g, h, i, j, k = getOwn(x.pkgs, a);
                if (k && (a = k), j = getOwn(E, a)) return u.nameToUrl(j, b, c);
                if (req.jsExtRegExp.test(a)) h = a + (b || "");
                else {
                    for (d = x.paths, e = a.split("/"), f = e.length; f > 0; f -= 1)
                        if (g = e.slice(0, f).join("/"), i = getOwn(d, g)) {
                            isArray(i) && (i = i[0]), e.splice(0, f, i);
                            break
                        }
                    h = e.join("/"), h += b || (/^data\:|\?/.test(h) || c ? "" : ".js"), h = ("/" === h.charAt(0) || h.match(/^[\w\+\.\-]+:/) ? "" : x.baseUrl) + h
                }
                return x.urlArgs ? h + ((-1 === h.indexOf("?") ? "?" : "&") + x.urlArgs) : h
            },
            load: function(a, b) {
                req.load(u, a, b)
            },
            execCb: function(a, b, c, d) {
                return b.apply(d, c)
            },
            onScriptLoad: function(a) {
                if ("load" === a.type || readyRegExp.test((a.currentTarget || a.srcElement).readyState)) {
                    interactiveScript = null;
                    var b = q(a);
                    u.completeLoad(b.id)
                }
            },
            onScriptError: function(a) {
                var b = q(a);
                return e(b.id) ? void 0 : j(makeError("scripterror", "Script error for: " + b.id, a, [b.id]))
            }
        }, u.require = u.makeRequire(), u
    }

    function getInteractiveScript() {
        return interactiveScript && "interactive" === interactiveScript.readyState ? interactiveScript : (eachReverse(scripts(), function(a) {
            return "interactive" === a.readyState ? interactiveScript = a : void 0
        }), interactiveScript)
    }
    var req, s, head, baseElement, dataMain, src, interactiveScript, currentlyAddingScript, mainScript, subPath, version = "2.1.15",
        commentRegExp = /(\/\*([\s\S]*?)\*\/|([^:]|^)\/\/(.*)$)/gm,
        cjsRequireRegExp = /[^.]\s*require\s*\(\s*["']([^'"\s]+)["']\s*\)/g,
        jsSuffixRegExp = /\.js$/,
        currDirRegExp = /^\.\//,
        op = Object.prototype,
        ostring = op.toString,
        hasOwn = op.hasOwnProperty,
        ap = Array.prototype,
        apsp = ap.splice,
        isBrowser = !("undefined" == typeof window || "undefined" == typeof navigator || !window.document),
        isWebWorker = !isBrowser && "undefined" != typeof importScripts,
        readyRegExp = isBrowser && "PLAYSTATION 3" === navigator.platform ? /^complete$/ : /^(complete|loaded)$/,
        defContextName = "_",
        isOpera = "undefined" != typeof opera && "[object Opera]" === opera.toString(),
        contexts = {},
        cfg = {},
        globalDefQueue = [],
        useInteractive = !1;
    if ("undefined" == typeof define) {
        if ("undefined" != typeof requirejs) {
            if (isFunction(requirejs)) return;
            cfg = requirejs, requirejs = void 0
        }
        "undefined" == typeof require || isFunction(require) || (cfg = require, require = void 0), req = requirejs = function(a, b, c, d) {
            var e, f, g = defContextName;
            return isArray(a) || "string" == typeof a || (f = a, isArray(b) ? (a = b, b = c, c = d) : a = []), f && f.context && (g = f.context), e = getOwn(contexts, g), e || (e = contexts[g] = req.s.newContext(g)), f && e.configure(f), e.require(a, b, c)
        }, req.config = function(a) {
            return req(a)
        }, req.nextTick = "undefined" != typeof setTimeout ? function(a) {
            setTimeout(a, 4)
        } : function(a) {
            a()
        }, require || (require = req), req.version = version, req.jsExtRegExp = /^\/|:|\?|\.js$/, req.isBrowser = isBrowser, s = req.s = {
            contexts: contexts,
            newContext: newContext
        }, req({}), each(["toUrl", "undef", "defined", "specified"], function(a) {
            req[a] = function() {
                var b = contexts[defContextName];
                return b.require[a].apply(b, arguments)
            }
        }), isBrowser && (head = s.head = document.getElementsByTagName("head")[0], baseElement = document.getElementsByTagName("base")[0], baseElement && (head = s.head = baseElement.parentNode)), req.onError = defaultOnError, req.createNode = function(a) {
            var b = a.xhtml ? document.createElementNS("http://www.w3.org/1999/xhtml", "html:script") : document.createElement("script");
            return b.type = a.scriptType || "text/javascript", b.charset = "utf-8", b.async = !0, b
        }, req.load = function(a, b, c) {
            var d, e = a && a.config || {};
            if (isBrowser) return d = req.createNode(e, b, c), d.setAttribute("data-requirecontext", a.contextName), d.setAttribute("data-requiremodule", b), !d.attachEvent || d.attachEvent.toString && d.attachEvent.toString().indexOf("[native code") < 0 || isOpera ? (d.addEventListener("load", a.onScriptLoad, !1), d.addEventListener("error", a.onScriptError, !1)) : (useInteractive = !0, d.attachEvent("onreadystatechange", a.onScriptLoad)), d.src = c, currentlyAddingScript = d, baseElement ? head.insertBefore(d, baseElement) : head.appendChild(d), currentlyAddingScript = null, d;
            if (isWebWorker) try {
                importScripts(c), a.completeLoad(b)
            } catch (f) {
                a.onError(makeError("importscripts", "importScripts failed for " + b + " at " + c, f, [b]))
            }
        }, isBrowser && !cfg.skipDataMain && eachReverse(scripts(), function(a) {
            return head || (head = a.parentNode), dataMain = a.getAttribute("data-main"), dataMain ? (mainScript = dataMain, cfg.baseUrl || (src = mainScript.split("/"), mainScript = src.pop(), subPath = src.length ? src.join("/") + "/" : "./", cfg.baseUrl = subPath), mainScript = mainScript.replace(jsSuffixRegExp, ""), req.jsExtRegExp.test(mainScript) && (mainScript = dataMain), cfg.deps = cfg.deps ? cfg.deps.concat(mainScript) : [mainScript], !0) : void 0
        }), define = function(a, b, c) {
            var d, e;
            "string" != typeof a && (c = b, b = a, a = null), isArray(b) || (c = b, b = null), !b && isFunction(c) && (b = [], c.length && (c.toString().replace(commentRegExp, "").replace(cjsRequireRegExp, function(a, c) {
                b.push(c)
            }), b = (1 === c.length ? ["require"] : ["require", "exports", "module"]).concat(b))), useInteractive && (d = currentlyAddingScript || getInteractiveScript(), d && (a || (a = d.getAttribute("data-requiremodule")), e = contexts[d.getAttribute("data-requirecontext")])), (e ? e.defQueue : globalDefQueue).push([a, b, c])
        }, define.amd = {
            jQuery: !0
        }, req.exec = function(text) {
            return eval(text)
        }, req(cfg)
    }
}(this), define("../../bower_components/requirejs/require.js", function() {}),
    function(a, b) {
        "object" == typeof module && "object" == typeof module.exports ? module.exports = a.document ? b(a, !0) : function(a) {
            if (!a.document) throw new Error("jQuery requires a window with a document");
            return b(a)
        } : b(a)
    }("undefined" != typeof window ? window : this, function(a, b) {
        function c(a) {
            var b = a.length,
                c = _.type(a);
            return "function" === c || _.isWindow(a) ? !1 : 1 === a.nodeType && b ? !0 : "array" === c || 0 === b || "number" == typeof b && b > 0 && b - 1 in a
        }

        function d(a, b, c) {
            if (_.isFunction(b)) return _.grep(a, function(a, d) {
                return !!b.call(a, d, a) !== c
            });
            if (b.nodeType) return _.grep(a, function(a) {
                return a === b !== c
            });
            if ("string" == typeof b) {
                if (ha.test(b)) return _.filter(b, a, c);
                b = _.filter(b, a)
            }
            return _.grep(a, function(a) {
                return U.call(b, a) >= 0 !== c
            })
        }

        function e(a, b) {
            for (;
                (a = a[b]) && 1 !== a.nodeType;);
            return a
        }

        function f(a) {
            var b = oa[a] = {};
            return _.each(a.match(na) || [], function(a, c) {
                b[c] = !0
            }), b
        }

        function g() {
            Z.removeEventListener("DOMContentLoaded", g, !1), a.removeEventListener("load", g, !1), _.ready()
        }

        function h() {
            Object.defineProperty(this.cache = {}, 0, {
                get: function() {
                    return {}
                }
            }), this.expando = _.expando + Math.random()
        }

        function i(a, b, c) {
            var d;
            if (void 0 === c && 1 === a.nodeType)
                if (d = "data-" + b.replace(ua, "-$1").toLowerCase(), c = a.getAttribute(d), "string" == typeof c) {
                    try {
                        c = "true" === c ? !0 : "false" === c ? !1 : "null" === c ? null : +c + "" === c ? +c : ta.test(c) ? _.parseJSON(c) : c
                    } catch (e) {}
                    sa.set(a, b, c)
                } else c = void 0;
            return c
        }

        function j() {
            return !0
        }

        function k() {
            return !1
        }

        function l() {
            try {
                return Z.activeElement
            } catch (a) {}
        }

        function m(a, b) {
            return _.nodeName(a, "table") && _.nodeName(11 !== b.nodeType ? b : b.firstChild, "tr") ? a.getElementsByTagName("tbody")[0] || a.appendChild(a.ownerDocument.createElement("tbody")) : a
        }

        function n(a) {
            return a.type = (null !== a.getAttribute("type")) + "/" + a.type, a
        }

        function o(a) {
            var b = Ka.exec(a.type);
            return b ? a.type = b[1] : a.removeAttribute("type"), a
        }

        function p(a, b) {
            for (var c = 0, d = a.length; d > c; c++) ra.set(a[c], "globalEval", !b || ra.get(b[c], "globalEval"))
        }

        function q(a, b) {
            var c, d, e, f, g, h, i, j;
            if (1 === b.nodeType) {
                if (ra.hasData(a) && (f = ra.access(a), g = ra.set(b, f), j = f.events)) {
                    delete g.handle, g.events = {};
                    for (e in j)
                        for (c = 0, d = j[e].length; d > c; c++) _.event.add(b, e, j[e][c])
                }
                sa.hasData(a) && (h = sa.access(a), i = _.extend({}, h), sa.set(b, i))
            }
        }

        function r(a, b) {
            var c = a.getElementsByTagName ? a.getElementsByTagName(b || "*") : a.querySelectorAll ? a.querySelectorAll(b || "*") : [];
            return void 0 === b || b && _.nodeName(a, b) ? _.merge([a], c) : c
        }

        function s(a, b) {
            var c = b.nodeName.toLowerCase();
            "input" === c && ya.test(a.type) ? b.checked = a.checked : ("input" === c || "textarea" === c) && (b.defaultValue = a.defaultValue)
        }

        function t(b, c) {
            var d, e = _(c.createElement(b)).appendTo(c.body),
                f = a.getDefaultComputedStyle && (d = a.getDefaultComputedStyle(e[0])) ? d.display : _.css(e[0], "display");
            return e.detach(), f
        }

        function u(a) {
            var b = Z,
                c = Oa[a];
            return c || (c = t(a, b), "none" !== c && c || (Na = (Na || _("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement), b = Na[0].contentDocument, b.write(), b.close(), c = t(a, b), Na.detach()), Oa[a] = c), c
        }

        function v(a, b, c) {
            var d, e, f, g, h = a.style;
            return c = c || Ra(a), c && (g = c.getPropertyValue(b) || c[b]), c && ("" !== g || _.contains(a.ownerDocument, a) || (g = _.style(a, b)), Qa.test(g) && Pa.test(b) && (d = h.width, e = h.minWidth, f = h.maxWidth, h.minWidth = h.maxWidth = h.width = g, g = c.width, h.width = d, h.minWidth = e, h.maxWidth = f)), void 0 !== g ? g + "" : g
        }

        function w(a, b) {
            return {
                get: function() {
                    return a() ? void delete this.get : (this.get = b).apply(this, arguments)
                }
            }
        }

        function x(a, b) {
            if (b in a) return b;
            for (var c = b[0].toUpperCase() + b.slice(1), d = b, e = Xa.length; e--;)
                if (b = Xa[e] + c, b in a) return b;
            return d
        }

        function y(a, b, c) {
            var d = Ta.exec(b);
            return d ? Math.max(0, d[1] - (c || 0)) + (d[2] || "px") : b
        }

        function z(a, b, c, d, e) {
            for (var f = c === (d ? "border" : "content") ? 4 : "width" === b ? 1 : 0, g = 0; 4 > f; f += 2) "margin" === c && (g += _.css(a, c + wa[f], !0, e)), d ? ("content" === c && (g -= _.css(a, "padding" + wa[f], !0, e)), "margin" !== c && (g -= _.css(a, "border" + wa[f] + "Width", !0, e))) : (g += _.css(a, "padding" + wa[f], !0, e), "padding" !== c && (g += _.css(a, "border" + wa[f] + "Width", !0, e)));
            return g
        }

        function A(a, b, c) {
            var d = !0,
                e = "width" === b ? a.offsetWidth : a.offsetHeight,
                f = Ra(a),
                g = "border-box" === _.css(a, "boxSizing", !1, f);
            if (0 >= e || null == e) {
                if (e = v(a, b, f), (0 > e || null == e) && (e = a.style[b]), Qa.test(e)) return e;
                d = g && (Y.boxSizingReliable() || e === a.style[b]), e = parseFloat(e) || 0
            }
            return e + z(a, b, c || (g ? "border" : "content"), d, f) + "px"
        }

        function B(a, b) {
            for (var c, d, e, f = [], g = 0, h = a.length; h > g; g++) d = a[g], d.style && (f[g] = ra.get(d, "olddisplay"), c = d.style.display, b ? (f[g] || "none" !== c || (d.style.display = ""), "" === d.style.display && xa(d) && (f[g] = ra.access(d, "olddisplay", u(d.nodeName)))) : (e = xa(d), "none" === c && e || ra.set(d, "olddisplay", e ? c : _.css(d, "display"))));
            for (g = 0; h > g; g++) d = a[g], d.style && (b && "none" !== d.style.display && "" !== d.style.display || (d.style.display = b ? f[g] || "" : "none"));
            return a
        }

        function C(a, b, c, d, e) {
            return new C.prototype.init(a, b, c, d, e)
        }

        function D() {
            return setTimeout(function() {
                Ya = void 0
            }), Ya = _.now()
        }

        function E(a, b) {
            var c, d = 0,
                e = {
                    height: a
                };
            for (b = b ? 1 : 0; 4 > d; d += 2 - b) c = wa[d], e["margin" + c] = e["padding" + c] = a;
            return b && (e.opacity = e.width = a), e
        }

        function F(a, b, c) {
            for (var d, e = (cb[b] || []).concat(cb["*"]), f = 0, g = e.length; g > f; f++)
                if (d = e[f].call(c, b, a)) return d
        }

        function G(a, b, c) {
            var d, e, f, g, h, i, j, k, l = this,
                m = {},
                n = a.style,
                o = a.nodeType && xa(a),
                p = ra.get(a, "fxshow");
            c.queue || (h = _._queueHooks(a, "fx"), null == h.unqueued && (h.unqueued = 0, i = h.empty.fire, h.empty.fire = function() {
                h.unqueued || i()
            }), h.unqueued++, l.always(function() {
                l.always(function() {
                    h.unqueued--, _.queue(a, "fx").length || h.empty.fire()
                })
            })), 1 === a.nodeType && ("height" in b || "width" in b) && (c.overflow = [n.overflow, n.overflowX, n.overflowY], j = _.css(a, "display"), k = "none" === j ? ra.get(a, "olddisplay") || u(a.nodeName) : j, "inline" === k && "none" === _.css(a, "float") && (n.display = "inline-block")), c.overflow && (n.overflow = "hidden", l.always(function() {
                n.overflow = c.overflow[0], n.overflowX = c.overflow[1], n.overflowY = c.overflow[2]
            }));
            for (d in b)
                if (e = b[d], $a.exec(e)) {
                    if (delete b[d], f = f || "toggle" === e, e === (o ? "hide" : "show")) {
                        if ("show" !== e || !p || void 0 === p[d]) continue;
                        o = !0
                    }
                    m[d] = p && p[d] || _.style(a, d)
                } else j = void 0;
            if (_.isEmptyObject(m)) "inline" === ("none" === j ? u(a.nodeName) : j) && (n.display = j);
            else {
                p ? "hidden" in p && (o = p.hidden) : p = ra.access(a, "fxshow", {}), f && (p.hidden = !o), o ? _(a).show() : l.done(function() {
                    _(a).hide()
                }), l.done(function() {
                    var b;
                    ra.remove(a, "fxshow");
                    for (b in m) _.style(a, b, m[b])
                });
                for (d in m) g = F(o ? p[d] : 0, d, l), d in p || (p[d] = g.start, o && (g.end = g.start, g.start = "width" === d || "height" === d ? 1 : 0))
            }
        }

        function H(a, b) {
            var c, d, e, f, g;
            for (c in a)
                if (d = _.camelCase(c), e = b[d], f = a[c], _.isArray(f) && (e = f[1], f = a[c] = f[0]), c !== d && (a[d] = f, delete a[c]), g = _.cssHooks[d], g && "expand" in g) {
                    f = g.expand(f), delete a[d];
                    for (c in f) c in a || (a[c] = f[c], b[c] = e)
                } else b[d] = e
        }

        function I(a, b, c) {
            var d, e, f = 0,
                g = bb.length,
                h = _.Deferred().always(function() {
                    delete i.elem
                }),
                i = function() {
                    if (e) return !1;
                    for (var b = Ya || D(), c = Math.max(0, j.startTime + j.duration - b), d = c / j.duration || 0, f = 1 - d, g = 0, i = j.tweens.length; i > g; g++) j.tweens[g].run(f);
                    return h.notifyWith(a, [j, f, c]), 1 > f && i ? c : (h.resolveWith(a, [j]), !1)
                },
                j = h.promise({
                    elem: a,
                    props: _.extend({}, b),
                    opts: _.extend(!0, {
                        specialEasing: {}
                    }, c),
                    originalProperties: b,
                    originalOptions: c,
                    startTime: Ya || D(),
                    duration: c.duration,
                    tweens: [],
                    createTween: function(b, c) {
                        var d = _.Tween(a, j.opts, b, c, j.opts.specialEasing[b] || j.opts.easing);
                        return j.tweens.push(d), d
                    },
                    stop: function(b) {
                        var c = 0,
                            d = b ? j.tweens.length : 0;
                        if (e) return this;
                        for (e = !0; d > c; c++) j.tweens[c].run(1);
                        return b ? h.resolveWith(a, [j, b]) : h.rejectWith(a, [j, b]), this
                    }
                }),
                k = j.props;
            for (H(k, j.opts.specialEasing); g > f; f++)
                if (d = bb[f].call(j, a, k, j.opts)) return d;
            return _.map(k, F, j), _.isFunction(j.opts.start) && j.opts.start.call(a, j), _.fx.timer(_.extend(i, {
                elem: a,
                anim: j,
                queue: j.opts.queue
            })), j.progress(j.opts.progress).done(j.opts.done, j.opts.complete).fail(j.opts.fail).always(j.opts.always)
        }

        function J(a) {
            return function(b, c) {
                "string" != typeof b && (c = b, b = "*");
                var d, e = 0,
                    f = b.toLowerCase().match(na) || [];
                if (_.isFunction(c))
                    for (; d = f[e++];) "+" === d[0] ? (d = d.slice(1) || "*", (a[d] = a[d] || []).unshift(c)) : (a[d] = a[d] || []).push(c)
            }
        }

        function K(a, b, c, d) {
            function e(h) {
                var i;
                return f[h] = !0, _.each(a[h] || [], function(a, h) {
                    var j = h(b, c, d);
                    return "string" != typeof j || g || f[j] ? g ? !(i = j) : void 0 : (b.dataTypes.unshift(j), e(j), !1)
                }), i
            }
            var f = {},
                g = a === vb;
            return e(b.dataTypes[0]) || !f["*"] && e("*")
        }

        function L(a, b) {
            var c, d, e = _.ajaxSettings.flatOptions || {};
            for (c in b) void 0 !== b[c] && ((e[c] ? a : d || (d = {}))[c] = b[c]);
            return d && _.extend(!0, a, d), a
        }

        function M(a, b, c) {
            for (var d, e, f, g, h = a.contents, i = a.dataTypes;
                "*" === i[0];) i.shift(), void 0 === d && (d = a.mimeType || b.getResponseHeader("Content-Type"));
            if (d)
                for (e in h)
                    if (h[e] && h[e].test(d)) {
                        i.unshift(e);
                        break
                    }
            if (i[0] in c) f = i[0];
            else {
                for (e in c) {
                    if (!i[0] || a.converters[e + " " + i[0]]) {
                        f = e;
                        break
                    }
                    g || (g = e)
                }
                f = f || g
            }
            return f ? (f !== i[0] && i.unshift(f), c[f]) : void 0
        }

        function N(a, b, c, d) {
            var e, f, g, h, i, j = {},
                k = a.dataTypes.slice();
            if (k[1])
                for (g in a.converters) j[g.toLowerCase()] = a.converters[g];
            for (f = k.shift(); f;)
                if (a.responseFields[f] && (c[a.responseFields[f]] = b), !i && d && a.dataFilter && (b = a.dataFilter(b, a.dataType)), i = f, f = k.shift())
                    if ("*" === f) f = i;
                    else if ("*" !== i && i !== f) {
                if (g = j[i + " " + f] || j["* " + f], !g)
                    for (e in j)
                        if (h = e.split(" "), h[1] === f && (g = j[i + " " + h[0]] || j["* " + h[0]])) {
                            g === !0 ? g = j[e] : j[e] !== !0 && (f = h[0], k.unshift(h[1]));
                            break
                        }
                if (g !== !0)
                    if (g && a["throws"]) b = g(b);
                    else try {
                        b = g(b)
                    } catch (l) {
                        return {
                            state: "parsererror",
                            error: g ? l : "No conversion from " + i + " to " + f
                        }
                    }
            }
            return {
                state: "success",
                data: b
            }
        }

        function O(a, b, c, d) {
            var e;
            if (_.isArray(b)) _.each(b, function(b, e) {
                c || zb.test(a) ? d(a, e) : O(a + "[" + ("object" == typeof e ? b : "") + "]", e, c, d)
            });
            else if (c || "object" !== _.type(b)) d(a, b);
            else
                for (e in b) O(a + "[" + e + "]", b[e], c, d)
        }

        function P(a) {
            return _.isWindow(a) ? a : 9 === a.nodeType && a.defaultView
        }
        var Q = [],
            R = Q.slice,
            S = Q.concat,
            T = Q.push,
            U = Q.indexOf,
            V = {},
            W = V.toString,
            X = V.hasOwnProperty,
            Y = {},
            Z = a.document,
            $ = "2.1.1",
            _ = function(a, b) {
                return new _.fn.init(a, b)
            },
            aa = /^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,
            ba = /^-ms-/,
            ca = /-([\da-z])/gi,
            da = function(a, b) {
                return b.toUpperCase()
            };
        _.fn = _.prototype = {
            jquery: $,
            constructor: _,
            selector: "",
            length: 0,
            toArray: function() {
                return R.call(this)
            },
            get: function(a) {
                return null != a ? 0 > a ? this[a + this.length] : this[a] : R.call(this)
            },
            pushStack: function(a) {
                var b = _.merge(this.constructor(), a);
                return b.prevObject = this, b.context = this.context, b
            },
            each: function(a, b) {
                return _.each(this, a, b)
            },
            map: function(a) {
                return this.pushStack(_.map(this, function(b, c) {
                    return a.call(b, c, b)
                }))
            },
            slice: function() {
                return this.pushStack(R.apply(this, arguments))
            },
            first: function() {
                return this.eq(0)
            },
            last: function() {
                return this.eq(-1)
            },
            eq: function(a) {
                var b = this.length,
                    c = +a + (0 > a ? b : 0);
                return this.pushStack(c >= 0 && b > c ? [this[c]] : [])
            },
            end: function() {
                return this.prevObject || this.constructor(null)
            },
            push: T,
            sort: Q.sort,
            splice: Q.splice
        }, _.extend = _.fn.extend = function() {
            var a, b, c, d, e, f, g = arguments[0] || {},
                h = 1,
                i = arguments.length,
                j = !1;
            for ("boolean" == typeof g && (j = g, g = arguments[h] || {}, h++), "object" == typeof g || _.isFunction(g) || (g = {}), h === i && (g = this, h--); i > h; h++)
                if (null != (a = arguments[h]))
                    for (b in a) c = g[b], d = a[b], g !== d && (j && d && (_.isPlainObject(d) || (e = _.isArray(d))) ? (e ? (e = !1, f = c && _.isArray(c) ? c : []) : f = c && _.isPlainObject(c) ? c : {}, g[b] = _.extend(j, f, d)) : void 0 !== d && (g[b] = d));
            return g
        }, _.extend({
            expando: "jQuery" + ($ + Math.random()).replace(/\D/g, ""),
            isReady: !0,
            error: function(a) {
                throw new Error(a)
            },
            noop: function() {},
            isFunction: function(a) {
                return "function" === _.type(a)
            },
            isArray: Array.isArray,
            isWindow: function(a) {
                return null != a && a === a.window
            },
            isNumeric: function(a) {
                return !_.isArray(a) && a - parseFloat(a) >= 0
            },
            isPlainObject: function(a) {
                return "object" !== _.type(a) || a.nodeType || _.isWindow(a) ? !1 : a.constructor && !X.call(a.constructor.prototype, "isPrototypeOf") ? !1 : !0
            },
            isEmptyObject: function(a) {
                var b;
                for (b in a) return !1;
                return !0
            },
            type: function(a) {
                return null == a ? a + "" : "object" == typeof a || "function" == typeof a ? V[W.call(a)] || "object" : typeof a
            },
            globalEval: function(a) {
                var b, c = eval;
                a = _.trim(a), a && (1 === a.indexOf("use strict") ? (b = Z.createElement("script"), b.text = a, Z.head.appendChild(b).parentNode.removeChild(b)) : c(a))
            },
            camelCase: function(a) {
                return a.replace(ba, "ms-").replace(ca, da)
            },
            nodeName: function(a, b) {
                return a.nodeName && a.nodeName.toLowerCase() === b.toLowerCase()
            },
            each: function(a, b, d) {
                var e, f = 0,
                    g = a.length,
                    h = c(a);
                if (d) {
                    if (h)
                        for (; g > f && (e = b.apply(a[f], d), e !== !1); f++);
                    else
                        for (f in a)
                            if (e = b.apply(a[f], d), e === !1) break
                } else if (h)
                    for (; g > f && (e = b.call(a[f], f, a[f]), e !== !1); f++);
                else
                    for (f in a)
                        if (e = b.call(a[f], f, a[f]), e === !1) break; return a
            },
            trim: function(a) {
                return null == a ? "" : (a + "").replace(aa, "")
            },
            makeArray: function(a, b) {
                var d = b || [];
                return null != a && (c(Object(a)) ? _.merge(d, "string" == typeof a ? [a] : a) : T.call(d, a)), d
            },
            inArray: function(a, b, c) {
                return null == b ? -1 : U.call(b, a, c)
            },
            merge: function(a, b) {
                for (var c = +b.length, d = 0, e = a.length; c > d; d++) a[e++] = b[d];
                return a.length = e, a
            },
            grep: function(a, b, c) {
                for (var d, e = [], f = 0, g = a.length, h = !c; g > f; f++) d = !b(a[f], f), d !== h && e.push(a[f]);
                return e
            },
            map: function(a, b, d) {
                var e, f = 0,
                    g = a.length,
                    h = c(a),
                    i = [];
                if (h)
                    for (; g > f; f++) e = b(a[f], f, d), null != e && i.push(e);
                else
                    for (f in a) e = b(a[f], f, d), null != e && i.push(e);
                return S.apply([], i)
            },
            guid: 1,
            proxy: function(a, b) {
                var c, d, e;
                return "string" == typeof b && (c = a[b], b = a, a = c), _.isFunction(a) ? (d = R.call(arguments, 2), e = function() {
                    return a.apply(b || this, d.concat(R.call(arguments)))
                }, e.guid = a.guid = a.guid || _.guid++, e) : void 0
            },
            now: Date.now,
            support: Y
        }), _.each("Boolean Number String Function Array Date RegExp Object Error".split(" "), function(a, b) {
            V["[object " + b + "]"] = b.toLowerCase()
        });
        var ea = function(a) {
            function b(a, b, c, d) {
                var e, f, g, h, i, j, l, n, o, p;
                if ((b ? b.ownerDocument || b : O) !== G && F(b), b = b || G, c = c || [], !a || "string" != typeof a) return c;
                if (1 !== (h = b.nodeType) && 9 !== h) return [];
                if (I && !d) {
                    if (e = sa.exec(a))
                        if (g = e[1]) {
                            if (9 === h) {
                                if (f = b.getElementById(g), !f || !f.parentNode) return c;
                                if (f.id === g) return c.push(f), c
                            } else if (b.ownerDocument && (f = b.ownerDocument.getElementById(g)) && M(b, f) && f.id === g) return c.push(f), c
                        } else {
                            if (e[2]) return _.apply(c, b.getElementsByTagName(a)), c;
                            if ((g = e[3]) && v.getElementsByClassName && b.getElementsByClassName) return _.apply(c, b.getElementsByClassName(g)), c
                        }
                    if (v.qsa && (!J || !J.test(a))) {
                        if (n = l = N, o = b, p = 9 === h && a, 1 === h && "object" !== b.nodeName.toLowerCase()) {
                            for (j = z(a), (l = b.getAttribute("id")) ? n = l.replace(ua, "\\$&") : b.setAttribute("id", n), n = "[id='" + n + "'] ", i = j.length; i--;) j[i] = n + m(j[i]);
                            o = ta.test(a) && k(b.parentNode) || b, p = j.join(",")
                        }
                        if (p) try {
                            return _.apply(c, o.querySelectorAll(p)), c
                        } catch (q) {} finally {
                            l || b.removeAttribute("id")
                        }
                    }
                }
                return B(a.replace(ia, "$1"), b, c, d)
            }

            function c() {
                function a(c, d) {
                    return b.push(c + " ") > w.cacheLength && delete a[b.shift()], a[c + " "] = d
                }
                var b = [];
                return a
            }

            function d(a) {
                return a[N] = !0, a
            }

            function e(a) {
                var b = G.createElement("div");
                try {
                    return !!a(b)
                } catch (c) {
                    return !1
                } finally {
                    b.parentNode && b.parentNode.removeChild(b), b = null
                }
            }

            function f(a, b) {
                for (var c = a.split("|"), d = a.length; d--;) w.attrHandle[c[d]] = b
            }

            function g(a, b) {
                var c = b && a,
                    d = c && 1 === a.nodeType && 1 === b.nodeType && (~b.sourceIndex || W) - (~a.sourceIndex || W);
                if (d) return d;
                if (c)
                    for (; c = c.nextSibling;)
                        if (c === b) return -1;
                return a ? 1 : -1
            }

            function h(a) {
                return function(b) {
                    var c = b.nodeName.toLowerCase();
                    return "input" === c && b.type === a
                }
            }

            function i(a) {
                return function(b) {
                    var c = b.nodeName.toLowerCase();
                    return ("input" === c || "button" === c) && b.type === a
                }
            }

            function j(a) {
                return d(function(b) {
                    return b = +b, d(function(c, d) {
                        for (var e, f = a([], c.length, b), g = f.length; g--;) c[e = f[g]] && (c[e] = !(d[e] = c[e]))
                    })
                })
            }

            function k(a) {
                return a && typeof a.getElementsByTagName !== V && a;

            }

            function l() {}

            function m(a) {
                for (var b = 0, c = a.length, d = ""; c > b; b++) d += a[b].value;
                return d
            }

            function n(a, b, c) {
                var d = b.dir,
                    e = c && "parentNode" === d,
                    f = Q++;
                return b.first ? function(b, c, f) {
                    for (; b = b[d];)
                        if (1 === b.nodeType || e) return a(b, c, f)
                } : function(b, c, g) {
                    var h, i, j = [P, f];
                    if (g) {
                        for (; b = b[d];)
                            if ((1 === b.nodeType || e) && a(b, c, g)) return !0
                    } else
                        for (; b = b[d];)
                            if (1 === b.nodeType || e) {
                                if (i = b[N] || (b[N] = {}), (h = i[d]) && h[0] === P && h[1] === f) return j[2] = h[2];
                                if (i[d] = j, j[2] = a(b, c, g)) return !0
                            }
                }
            }

            function o(a) {
                return a.length > 1 ? function(b, c, d) {
                    for (var e = a.length; e--;)
                        if (!a[e](b, c, d)) return !1;
                    return !0
                } : a[0]
            }

            function p(a, c, d) {
                for (var e = 0, f = c.length; f > e; e++) b(a, c[e], d);
                return d
            }

            function q(a, b, c, d, e) {
                for (var f, g = [], h = 0, i = a.length, j = null != b; i > h; h++)(f = a[h]) && (!c || c(f, d, e)) && (g.push(f), j && b.push(h));
                return g
            }

            function r(a, b, c, e, f, g) {
                return e && !e[N] && (e = r(e)), f && !f[N] && (f = r(f, g)), d(function(d, g, h, i) {
                    var j, k, l, m = [],
                        n = [],
                        o = g.length,
                        r = d || p(b || "*", h.nodeType ? [h] : h, []),
                        s = !a || !d && b ? r : q(r, m, a, h, i),
                        t = c ? f || (d ? a : o || e) ? [] : g : s;
                    if (c && c(s, t, h, i), e)
                        for (j = q(t, n), e(j, [], h, i), k = j.length; k--;)(l = j[k]) && (t[n[k]] = !(s[n[k]] = l));
                    if (d) {
                        if (f || a) {
                            if (f) {
                                for (j = [], k = t.length; k--;)(l = t[k]) && j.push(s[k] = l);
                                f(null, t = [], j, i)
                            }
                            for (k = t.length; k--;)(l = t[k]) && (j = f ? ba.call(d, l) : m[k]) > -1 && (d[j] = !(g[j] = l))
                        }
                    } else t = q(t === g ? t.splice(o, t.length) : t), f ? f(null, g, t, i) : _.apply(g, t)
                })
            }

            function s(a) {
                for (var b, c, d, e = a.length, f = w.relative[a[0].type], g = f || w.relative[" "], h = f ? 1 : 0, i = n(function(a) {
                        return a === b
                    }, g, !0), j = n(function(a) {
                        return ba.call(b, a) > -1
                    }, g, !0), k = [function(a, c, d) {
                        return !f && (d || c !== C) || ((b = c).nodeType ? i(a, c, d) : j(a, c, d))
                    }]; e > h; h++)
                    if (c = w.relative[a[h].type]) k = [n(o(k), c)];
                    else {
                        if (c = w.filter[a[h].type].apply(null, a[h].matches), c[N]) {
                            for (d = ++h; e > d && !w.relative[a[d].type]; d++);
                            return r(h > 1 && o(k), h > 1 && m(a.slice(0, h - 1).concat({
                                value: " " === a[h - 2].type ? "*" : ""
                            })).replace(ia, "$1"), c, d > h && s(a.slice(h, d)), e > d && s(a = a.slice(d)), e > d && m(a))
                        }
                        k.push(c)
                    }
                return o(k)
            }

            function t(a, c) {
                var e = c.length > 0,
                    f = a.length > 0,
                    g = function(d, g, h, i, j) {
                        var k, l, m, n = 0,
                            o = "0",
                            p = d && [],
                            r = [],
                            s = C,
                            t = d || f && w.find.TAG("*", j),
                            u = P += null == s ? 1 : Math.random() || .1,
                            v = t.length;
                        for (j && (C = g !== G && g); o !== v && null != (k = t[o]); o++) {
                            if (f && k) {
                                for (l = 0; m = a[l++];)
                                    if (m(k, g, h)) {
                                        i.push(k);
                                        break
                                    }
                                j && (P = u)
                            }
                            e && ((k = !m && k) && n--, d && p.push(k))
                        }
                        if (n += o, e && o !== n) {
                            for (l = 0; m = c[l++];) m(p, r, g, h);
                            if (d) {
                                if (n > 0)
                                    for (; o--;) p[o] || r[o] || (r[o] = Z.call(i));
                                r = q(r)
                            }
                            _.apply(i, r), j && !d && r.length > 0 && n + c.length > 1 && b.uniqueSort(i)
                        }
                        return j && (P = u, C = s), p
                    };
                return e ? d(g) : g
            }
            var u, v, w, x, y, z, A, B, C, D, E, F, G, H, I, J, K, L, M, N = "sizzle" + -new Date,
                O = a.document,
                P = 0,
                Q = 0,
                R = c(),
                S = c(),
                T = c(),
                U = function(a, b) {
                    return a === b && (E = !0), 0
                },
                V = "undefined",
                W = 1 << 31,
                X = {}.hasOwnProperty,
                Y = [],
                Z = Y.pop,
                $ = Y.push,
                _ = Y.push,
                aa = Y.slice,
                ba = Y.indexOf || function(a) {
                    for (var b = 0, c = this.length; c > b; b++)
                        if (this[b] === a) return b;
                    return -1
                },
                ca = "checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",
                da = "[\\x20\\t\\r\\n\\f]",
                ea = "(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",
                fa = ea.replace("w", "w#"),
                ga = "\\[" + da + "*(" + ea + ")(?:" + da + "*([*^$|!~]?=)" + da + "*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|(" + fa + "))|)" + da + "*\\]",
                ha = ":(" + ea + ")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|" + ga + ")*)|.*)\\)|)",
                ia = new RegExp("^" + da + "+|((?:^|[^\\\\])(?:\\\\.)*)" + da + "+$", "g"),
                ja = new RegExp("^" + da + "*," + da + "*"),
                ka = new RegExp("^" + da + "*([>+~]|" + da + ")" + da + "*"),
                la = new RegExp("=" + da + "*([^\\]'\"]*?)" + da + "*\\]", "g"),
                ma = new RegExp(ha),
                na = new RegExp("^" + fa + "$"),
                oa = {
                    ID: new RegExp("^#(" + ea + ")"),
                    CLASS: new RegExp("^\\.(" + ea + ")"),
                    TAG: new RegExp("^(" + ea.replace("w", "w*") + ")"),
                    ATTR: new RegExp("^" + ga),
                    PSEUDO: new RegExp("^" + ha),
                    CHILD: new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\(" + da + "*(even|odd|(([+-]|)(\\d*)n|)" + da + "*(?:([+-]|)" + da + "*(\\d+)|))" + da + "*\\)|)", "i"),
                    bool: new RegExp("^(?:" + ca + ")$", "i"),
                    needsContext: new RegExp("^" + da + "*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\(" + da + "*((?:-\\d)?\\d*)" + da + "*\\)|)(?=[^-]|$)", "i")
                },
                pa = /^(?:input|select|textarea|button)$/i,
                qa = /^h\d$/i,
                ra = /^[^{]+\{\s*\[native \w/,
                sa = /^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,
                ta = /[+~]/,
                ua = /'|\\/g,
                va = new RegExp("\\\\([\\da-f]{1,6}" + da + "?|(" + da + ")|.)", "ig"),
                wa = function(a, b, c) {
                    var d = "0x" + b - 65536;
                    return d !== d || c ? b : 0 > d ? String.fromCharCode(d + 65536) : String.fromCharCode(d >> 10 | 55296, 1023 & d | 56320)
                };
            try {
                _.apply(Y = aa.call(O.childNodes), O.childNodes), Y[O.childNodes.length].nodeType
            } catch (xa) {
                _ = {
                    apply: Y.length ? function(a, b) {
                        $.apply(a, aa.call(b))
                    } : function(a, b) {
                        for (var c = a.length, d = 0; a[c++] = b[d++];);
                        a.length = c - 1
                    }
                }
            }
            v = b.support = {}, y = b.isXML = function(a) {
                var b = a && (a.ownerDocument || a).documentElement;
                return b ? "HTML" !== b.nodeName : !1
            }, F = b.setDocument = function(a) {
                var b, c = a ? a.ownerDocument || a : O,
                    d = c.defaultView;
                return c !== G && 9 === c.nodeType && c.documentElement ? (G = c, H = c.documentElement, I = !y(c), d && d !== d.top && (d.addEventListener ? d.addEventListener("unload", function() {
                    F()
                }, !1) : d.attachEvent && d.attachEvent("onunload", function() {
                    F()
                })), v.attributes = e(function(a) {
                    return a.className = "i", !a.getAttribute("className")
                }), v.getElementsByTagName = e(function(a) {
                    return a.appendChild(c.createComment("")), !a.getElementsByTagName("*").length
                }), v.getElementsByClassName = ra.test(c.getElementsByClassName) && e(function(a) {
                    return a.innerHTML = "<div class='a'></div><div class='a i'></div>", a.firstChild.className = "i", 2 === a.getElementsByClassName("i").length
                }), v.getById = e(function(a) {
                    return H.appendChild(a).id = N, !c.getElementsByName || !c.getElementsByName(N).length
                }), v.getById ? (w.find.ID = function(a, b) {
                    if (typeof b.getElementById !== V && I) {
                        var c = b.getElementById(a);
                        return c && c.parentNode ? [c] : []
                    }
                }, w.filter.ID = function(a) {
                    var b = a.replace(va, wa);
                    return function(a) {
                        return a.getAttribute("id") === b
                    }
                }) : (delete w.find.ID, w.filter.ID = function(a) {
                    var b = a.replace(va, wa);
                    return function(a) {
                        var c = typeof a.getAttributeNode !== V && a.getAttributeNode("id");
                        return c && c.value === b
                    }
                }), w.find.TAG = v.getElementsByTagName ? function(a, b) {
                    return typeof b.getElementsByTagName !== V ? b.getElementsByTagName(a) : void 0
                } : function(a, b) {
                    var c, d = [],
                        e = 0,
                        f = b.getElementsByTagName(a);
                    if ("*" === a) {
                        for (; c = f[e++];) 1 === c.nodeType && d.push(c);
                        return d
                    }
                    return f
                }, w.find.CLASS = v.getElementsByClassName && function(a, b) {
                    return typeof b.getElementsByClassName !== V && I ? b.getElementsByClassName(a) : void 0
                }, K = [], J = [], (v.qsa = ra.test(c.querySelectorAll)) && (e(function(a) {
                    a.innerHTML = "<select msallowclip=''><option selected=''></option></select>", a.querySelectorAll("[msallowclip^='']").length && J.push("[*^$]=" + da + "*(?:''|\"\")"), a.querySelectorAll("[selected]").length || J.push("\\[" + da + "*(?:value|" + ca + ")"), a.querySelectorAll(":checked").length || J.push(":checked")
                }), e(function(a) {
                    var b = c.createElement("input");
                    b.setAttribute("type", "hidden"), a.appendChild(b).setAttribute("name", "D"), a.querySelectorAll("[name=d]").length && J.push("name" + da + "*[*^$|!~]?="), a.querySelectorAll(":enabled").length || J.push(":enabled", ":disabled"), a.querySelectorAll("*,:x"), J.push(",.*:")
                })), (v.matchesSelector = ra.test(L = H.matches || H.webkitMatchesSelector || H.mozMatchesSelector || H.oMatchesSelector || H.msMatchesSelector)) && e(function(a) {
                    v.disconnectedMatch = L.call(a, "div"), L.call(a, "[s!='']:x"), K.push("!=", ha)
                }), J = J.length && new RegExp(J.join("|")), K = K.length && new RegExp(K.join("|")), b = ra.test(H.compareDocumentPosition), M = b || ra.test(H.contains) ? function(a, b) {
                    var c = 9 === a.nodeType ? a.documentElement : a,
                        d = b && b.parentNode;
                    return a === d || !(!d || 1 !== d.nodeType || !(c.contains ? c.contains(d) : a.compareDocumentPosition && 16 & a.compareDocumentPosition(d)))
                } : function(a, b) {
                    if (b)
                        for (; b = b.parentNode;)
                            if (b === a) return !0;
                    return !1
                }, U = b ? function(a, b) {
                    if (a === b) return E = !0, 0;
                    var d = !a.compareDocumentPosition - !b.compareDocumentPosition;
                    return d ? d : (d = (a.ownerDocument || a) === (b.ownerDocument || b) ? a.compareDocumentPosition(b) : 1, 1 & d || !v.sortDetached && b.compareDocumentPosition(a) === d ? a === c || a.ownerDocument === O && M(O, a) ? -1 : b === c || b.ownerDocument === O && M(O, b) ? 1 : D ? ba.call(D, a) - ba.call(D, b) : 0 : 4 & d ? -1 : 1)
                } : function(a, b) {
                    if (a === b) return E = !0, 0;
                    var d, e = 0,
                        f = a.parentNode,
                        h = b.parentNode,
                        i = [a],
                        j = [b];
                    if (!f || !h) return a === c ? -1 : b === c ? 1 : f ? -1 : h ? 1 : D ? ba.call(D, a) - ba.call(D, b) : 0;
                    if (f === h) return g(a, b);
                    for (d = a; d = d.parentNode;) i.unshift(d);
                    for (d = b; d = d.parentNode;) j.unshift(d);
                    for (; i[e] === j[e];) e++;
                    return e ? g(i[e], j[e]) : i[e] === O ? -1 : j[e] === O ? 1 : 0
                }, c) : G
            }, b.matches = function(a, c) {
                return b(a, null, null, c)
            }, b.matchesSelector = function(a, c) {
                if ((a.ownerDocument || a) !== G && F(a), c = c.replace(la, "='$1']"), !(!v.matchesSelector || !I || K && K.test(c) || J && J.test(c))) try {
                    var d = L.call(a, c);
                    if (d || v.disconnectedMatch || a.document && 11 !== a.document.nodeType) return d
                } catch (e) {}
                return b(c, G, null, [a]).length > 0
            }, b.contains = function(a, b) {
                return (a.ownerDocument || a) !== G && F(a), M(a, b)
            }, b.attr = function(a, b) {
                (a.ownerDocument || a) !== G && F(a);
                var c = w.attrHandle[b.toLowerCase()],
                    d = c && X.call(w.attrHandle, b.toLowerCase()) ? c(a, b, !I) : void 0;
                return void 0 !== d ? d : v.attributes || !I ? a.getAttribute(b) : (d = a.getAttributeNode(b)) && d.specified ? d.value : null
            }, b.error = function(a) {
                throw new Error("Syntax error, unrecognized expression: " + a)
            }, b.uniqueSort = function(a) {
                var b, c = [],
                    d = 0,
                    e = 0;
                if (E = !v.detectDuplicates, D = !v.sortStable && a.slice(0), a.sort(U), E) {
                    for (; b = a[e++];) b === a[e] && (d = c.push(e));
                    for (; d--;) a.splice(c[d], 1)
                }
                return D = null, a
            }, x = b.getText = function(a) {
                var b, c = "",
                    d = 0,
                    e = a.nodeType;
                if (e) {
                    if (1 === e || 9 === e || 11 === e) {
                        if ("string" == typeof a.textContent) return a.textContent;
                        for (a = a.firstChild; a; a = a.nextSibling) c += x(a)
                    } else if (3 === e || 4 === e) return a.nodeValue
                } else
                    for (; b = a[d++];) c += x(b);
                return c
            }, w = b.selectors = {
                cacheLength: 50,
                createPseudo: d,
                match: oa,
                attrHandle: {},
                find: {},
                relative: {
                    ">": {
                        dir: "parentNode",
                        first: !0
                    },
                    " ": {
                        dir: "parentNode"
                    },
                    "+": {
                        dir: "previousSibling",
                        first: !0
                    },
                    "~": {
                        dir: "previousSibling"
                    }
                },
                preFilter: {
                    ATTR: function(a) {
                        return a[1] = a[1].replace(va, wa), a[3] = (a[3] || a[4] || a[5] || "").replace(va, wa), "~=" === a[2] && (a[3] = " " + a[3] + " "), a.slice(0, 4)
                    },
                    CHILD: function(a) {
                        return a[1] = a[1].toLowerCase(), "nth" === a[1].slice(0, 3) ? (a[3] || b.error(a[0]), a[4] = +(a[4] ? a[5] + (a[6] || 1) : 2 * ("even" === a[3] || "odd" === a[3])), a[5] = +(a[7] + a[8] || "odd" === a[3])) : a[3] && b.error(a[0]), a
                    },
                    PSEUDO: function(a) {
                        var b, c = !a[6] && a[2];
                        return oa.CHILD.test(a[0]) ? null : (a[3] ? a[2] = a[4] || a[5] || "" : c && ma.test(c) && (b = z(c, !0)) && (b = c.indexOf(")", c.length - b) - c.length) && (a[0] = a[0].slice(0, b), a[2] = c.slice(0, b)), a.slice(0, 3))
                    }
                },
                filter: {
                    TAG: function(a) {
                        var b = a.replace(va, wa).toLowerCase();
                        return "*" === a ? function() {
                            return !0
                        } : function(a) {
                            return a.nodeName && a.nodeName.toLowerCase() === b
                        }
                    },
                    CLASS: function(a) {
                        var b = R[a + " "];
                        return b || (b = new RegExp("(^|" + da + ")" + a + "(" + da + "|$)")) && R(a, function(a) {
                            return b.test("string" == typeof a.className && a.className || typeof a.getAttribute !== V && a.getAttribute("class") || "")
                        })
                    },
                    ATTR: function(a, c, d) {
                        return function(e) {
                            var f = b.attr(e, a);
                            return null == f ? "!=" === c : c ? (f += "", "=" === c ? f === d : "!=" === c ? f !== d : "^=" === c ? d && 0 === f.indexOf(d) : "*=" === c ? d && f.indexOf(d) > -1 : "$=" === c ? d && f.slice(-d.length) === d : "~=" === c ? (" " + f + " ").indexOf(d) > -1 : "|=" === c ? f === d || f.slice(0, d.length + 1) === d + "-" : !1) : !0
                        }
                    },
                    CHILD: function(a, b, c, d, e) {
                        var f = "nth" !== a.slice(0, 3),
                            g = "last" !== a.slice(-4),
                            h = "of-type" === b;
                        return 1 === d && 0 === e ? function(a) {
                            return !!a.parentNode
                        } : function(b, c, i) {
                            var j, k, l, m, n, o, p = f !== g ? "nextSibling" : "previousSibling",
                                q = b.parentNode,
                                r = h && b.nodeName.toLowerCase(),
                                s = !i && !h;
                            if (q) {
                                if (f) {
                                    for (; p;) {
                                        for (l = b; l = l[p];)
                                            if (h ? l.nodeName.toLowerCase() === r : 1 === l.nodeType) return !1;
                                        o = p = "only" === a && !o && "nextSibling"
                                    }
                                    return !0
                                }
                                if (o = [g ? q.firstChild : q.lastChild], g && s) {
                                    for (k = q[N] || (q[N] = {}), j = k[a] || [], n = j[0] === P && j[1], m = j[0] === P && j[2], l = n && q.childNodes[n]; l = ++n && l && l[p] || (m = n = 0) || o.pop();)
                                        if (1 === l.nodeType && ++m && l === b) {
                                            k[a] = [P, n, m];
                                            break
                                        }
                                } else if (s && (j = (b[N] || (b[N] = {}))[a]) && j[0] === P) m = j[1];
                                else
                                    for (;
                                        (l = ++n && l && l[p] || (m = n = 0) || o.pop()) && ((h ? l.nodeName.toLowerCase() !== r : 1 !== l.nodeType) || !++m || (s && ((l[N] || (l[N] = {}))[a] = [P, m]), l !== b)););
                                return m -= e, m === d || m % d === 0 && m / d >= 0
                            }
                        }
                    },
                    PSEUDO: function(a, c) {
                        var e, f = w.pseudos[a] || w.setFilters[a.toLowerCase()] || b.error("unsupported pseudo: " + a);
                        return f[N] ? f(c) : f.length > 1 ? (e = [a, a, "", c], w.setFilters.hasOwnProperty(a.toLowerCase()) ? d(function(a, b) {
                            for (var d, e = f(a, c), g = e.length; g--;) d = ba.call(a, e[g]), a[d] = !(b[d] = e[g])
                        }) : function(a) {
                            return f(a, 0, e)
                        }) : f
                    }
                },
                pseudos: {
                    not: d(function(a) {
                        var b = [],
                            c = [],
                            e = A(a.replace(ia, "$1"));
                        return e[N] ? d(function(a, b, c, d) {
                            for (var f, g = e(a, null, d, []), h = a.length; h--;)(f = g[h]) && (a[h] = !(b[h] = f))
                        }) : function(a, d, f) {
                            return b[0] = a, e(b, null, f, c), !c.pop()
                        }
                    }),
                    has: d(function(a) {
                        return function(c) {
                            return b(a, c).length > 0
                        }
                    }),
                    contains: d(function(a) {
                        return function(b) {
                            return (b.textContent || b.innerText || x(b)).indexOf(a) > -1
                        }
                    }),
                    lang: d(function(a) {
                        return na.test(a || "") || b.error("unsupported lang: " + a), a = a.replace(va, wa).toLowerCase(),
                            function(b) {
                                var c;
                                do
                                    if (c = I ? b.lang : b.getAttribute("xml:lang") || b.getAttribute("lang")) return c = c.toLowerCase(), c === a || 0 === c.indexOf(a + "-");
                                while ((b = b.parentNode) && 1 === b.nodeType);
                                return !1
                            }
                    }),
                    target: function(b) {
                        var c = a.location && a.location.hash;
                        return c && c.slice(1) === b.id
                    },
                    root: function(a) {
                        return a === H
                    },
                    focus: function(a) {
                        return a === G.activeElement && (!G.hasFocus || G.hasFocus()) && !!(a.type || a.href || ~a.tabIndex)
                    },
                    enabled: function(a) {
                        return a.disabled === !1
                    },
                    disabled: function(a) {
                        return a.disabled === !0
                    },
                    checked: function(a) {
                        var b = a.nodeName.toLowerCase();
                        return "input" === b && !!a.checked || "option" === b && !!a.selected
                    },
                    selected: function(a) {
                        return a.parentNode && a.parentNode.selectedIndex, a.selected === !0
                    },
                    empty: function(a) {
                        for (a = a.firstChild; a; a = a.nextSibling)
                            if (a.nodeType < 6) return !1;
                        return !0
                    },
                    parent: function(a) {
                        return !w.pseudos.empty(a)
                    },
                    header: function(a) {
                        return qa.test(a.nodeName)
                    },
                    input: function(a) {
                        return pa.test(a.nodeName)
                    },
                    button: function(a) {
                        var b = a.nodeName.toLowerCase();
                        return "input" === b && "button" === a.type || "button" === b
                    },
                    text: function(a) {
                        var b;
                        return "input" === a.nodeName.toLowerCase() && "text" === a.type && (null == (b = a.getAttribute("type")) || "text" === b.toLowerCase())
                    },
                    first: j(function() {
                        return [0]
                    }),
                    last: j(function(a, b) {
                        return [b - 1]
                    }),
                    eq: j(function(a, b, c) {
                        return [0 > c ? c + b : c]
                    }),
                    even: j(function(a, b) {
                        for (var c = 0; b > c; c += 2) a.push(c);
                        return a
                    }),
                    odd: j(function(a, b) {
                        for (var c = 1; b > c; c += 2) a.push(c);
                        return a
                    }),
                    lt: j(function(a, b, c) {
                        for (var d = 0 > c ? c + b : c; --d >= 0;) a.push(d);
                        return a
                    }),
                    gt: j(function(a, b, c) {
                        for (var d = 0 > c ? c + b : c; ++d < b;) a.push(d);
                        return a
                    })
                }
            }, w.pseudos.nth = w.pseudos.eq;
            for (u in {
                    radio: !0,
                    checkbox: !0,
                    file: !0,
                    password: !0,
                    image: !0
                }) w.pseudos[u] = h(u);
            for (u in {
                    submit: !0,
                    reset: !0
                }) w.pseudos[u] = i(u);
            return l.prototype = w.filters = w.pseudos, w.setFilters = new l, z = b.tokenize = function(a, c) {
                var d, e, f, g, h, i, j, k = S[a + " "];
                if (k) return c ? 0 : k.slice(0);
                for (h = a, i = [], j = w.preFilter; h;) {
                    (!d || (e = ja.exec(h))) && (e && (h = h.slice(e[0].length) || h), i.push(f = [])), d = !1, (e = ka.exec(h)) && (d = e.shift(), f.push({
                        value: d,
                        type: e[0].replace(ia, " ")
                    }), h = h.slice(d.length));
                    for (g in w.filter) !(e = oa[g].exec(h)) || j[g] && !(e = j[g](e)) || (d = e.shift(), f.push({
                        value: d,
                        type: g,
                        matches: e
                    }), h = h.slice(d.length));
                    if (!d) break
                }
                return c ? h.length : h ? b.error(a) : S(a, i).slice(0)
            }, A = b.compile = function(a, b) {
                var c, d = [],
                    e = [],
                    f = T[a + " "];
                if (!f) {
                    for (b || (b = z(a)), c = b.length; c--;) f = s(b[c]), f[N] ? d.push(f) : e.push(f);
                    f = T(a, t(e, d)), f.selector = a
                }
                return f
            }, B = b.select = function(a, b, c, d) {
                var e, f, g, h, i, j = "function" == typeof a && a,
                    l = !d && z(a = j.selector || a);
                if (c = c || [], 1 === l.length) {
                    if (f = l[0] = l[0].slice(0), f.length > 2 && "ID" === (g = f[0]).type && v.getById && 9 === b.nodeType && I && w.relative[f[1].type]) {
                        if (b = (w.find.ID(g.matches[0].replace(va, wa), b) || [])[0], !b) return c;
                        j && (b = b.parentNode), a = a.slice(f.shift().value.length)
                    }
                    for (e = oa.needsContext.test(a) ? 0 : f.length; e-- && (g = f[e], !w.relative[h = g.type]);)
                        if ((i = w.find[h]) && (d = i(g.matches[0].replace(va, wa), ta.test(f[0].type) && k(b.parentNode) || b))) {
                            if (f.splice(e, 1), a = d.length && m(f), !a) return _.apply(c, d), c;
                            break
                        }
                }
                return (j || A(a, l))(d, b, !I, c, ta.test(a) && k(b.parentNode) || b), c
            }, v.sortStable = N.split("").sort(U).join("") === N, v.detectDuplicates = !!E, F(), v.sortDetached = e(function(a) {
                return 1 & a.compareDocumentPosition(G.createElement("div"))
            }), e(function(a) {
                return a.innerHTML = "<a href='#'></a>", "#" === a.firstChild.getAttribute("href")
            }) || f("type|href|height|width", function(a, b, c) {
                return c ? void 0 : a.getAttribute(b, "type" === b.toLowerCase() ? 1 : 2)
            }), v.attributes && e(function(a) {
                return a.innerHTML = "<input/>", a.firstChild.setAttribute("value", ""), "" === a.firstChild.getAttribute("value")
            }) || f("value", function(a, b, c) {
                return c || "input" !== a.nodeName.toLowerCase() ? void 0 : a.defaultValue
            }), e(function(a) {
                return null == a.getAttribute("disabled")
            }) || f(ca, function(a, b, c) {
                var d;
                return c ? void 0 : a[b] === !0 ? b.toLowerCase() : (d = a.getAttributeNode(b)) && d.specified ? d.value : null
            }), b
        }(a);
        _.find = ea, _.expr = ea.selectors, _.expr[":"] = _.expr.pseudos, _.unique = ea.uniqueSort, _.text = ea.getText, _.isXMLDoc = ea.isXML, _.contains = ea.contains;
        var fa = _.expr.match.needsContext,
            ga = /^<(\w+)\s*\/?>(?:<\/\1>|)$/,
            ha = /^.[^:#\[\.,]*$/;
        _.filter = function(a, b, c) {
            var d = b[0];
            return c && (a = ":not(" + a + ")"), 1 === b.length && 1 === d.nodeType ? _.find.matchesSelector(d, a) ? [d] : [] : _.find.matches(a, _.grep(b, function(a) {
                return 1 === a.nodeType
            }))
        }, _.fn.extend({
            find: function(a) {
                var b, c = this.length,
                    d = [],
                    e = this;
                if ("string" != typeof a) return this.pushStack(_(a).filter(function() {
                    for (b = 0; c > b; b++)
                        if (_.contains(e[b], this)) return !0
                }));
                for (b = 0; c > b; b++) _.find(a, e[b], d);
                return d = this.pushStack(c > 1 ? _.unique(d) : d), d.selector = this.selector ? this.selector + " " + a : a, d
            },
            filter: function(a) {
                return this.pushStack(d(this, a || [], !1))
            },
            not: function(a) {
                return this.pushStack(d(this, a || [], !0))
            },
            is: function(a) {
                return !!d(this, "string" == typeof a && fa.test(a) ? _(a) : a || [], !1).length
            }
        });
        var ia, ja = /^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,
            ka = _.fn.init = function(a, b) {
                var c, d;
                if (!a) return this;
                if ("string" == typeof a) {
                    if (c = "<" === a[0] && ">" === a[a.length - 1] && a.length >= 3 ? [null, a, null] : ja.exec(a), !c || !c[1] && b) return !b || b.jquery ? (b || ia).find(a) : this.constructor(b).find(a);
                    if (c[1]) {
                        if (b = b instanceof _ ? b[0] : b, _.merge(this, _.parseHTML(c[1], b && b.nodeType ? b.ownerDocument || b : Z, !0)), ga.test(c[1]) && _.isPlainObject(b))
                            for (c in b) _.isFunction(this[c]) ? this[c](b[c]) : this.attr(c, b[c]);
                        return this
                    }
                    return d = Z.getElementById(c[2]), d && d.parentNode && (this.length = 1, this[0] = d), this.context = Z, this.selector = a, this
                }
                return a.nodeType ? (this.context = this[0] = a, this.length = 1, this) : _.isFunction(a) ? "undefined" != typeof ia.ready ? ia.ready(a) : a(_) : (void 0 !== a.selector && (this.selector = a.selector, this.context = a.context), _.makeArray(a, this))
            };
        ka.prototype = _.fn, ia = _(Z);
        var la = /^(?:parents|prev(?:Until|All))/,
            ma = {
                children: !0,
                contents: !0,
                next: !0,
                prev: !0
            };
        _.extend({
            dir: function(a, b, c) {
                for (var d = [], e = void 0 !== c;
                    (a = a[b]) && 9 !== a.nodeType;)
                    if (1 === a.nodeType) {
                        if (e && _(a).is(c)) break;
                        d.push(a)
                    }
                return d
            },
            sibling: function(a, b) {
                for (var c = []; a; a = a.nextSibling) 1 === a.nodeType && a !== b && c.push(a);
                return c
            }
        }), _.fn.extend({
            has: function(a) {
                var b = _(a, this),
                    c = b.length;
                return this.filter(function() {
                    for (var a = 0; c > a; a++)
                        if (_.contains(this, b[a])) return !0
                })
            },
            closest: function(a, b) {
                for (var c, d = 0, e = this.length, f = [], g = fa.test(a) || "string" != typeof a ? _(a, b || this.context) : 0; e > d; d++)
                    for (c = this[d]; c && c !== b; c = c.parentNode)
                        if (c.nodeType < 11 && (g ? g.index(c) > -1 : 1 === c.nodeType && _.find.matchesSelector(c, a))) {
                            f.push(c);
                            break
                        }
                return this.pushStack(f.length > 1 ? _.unique(f) : f)
            },
            index: function(a) {
                return a ? "string" == typeof a ? U.call(_(a), this[0]) : U.call(this, a.jquery ? a[0] : a) : this[0] && this[0].parentNode ? this.first().prevAll().length : -1
            },
            add: function(a, b) {
                return this.pushStack(_.unique(_.merge(this.get(), _(a, b))))
            },
            addBack: function(a) {
                return this.add(null == a ? this.prevObject : this.prevObject.filter(a))
            }
        }), _.each({
            parent: function(a) {
                var b = a.parentNode;
                return b && 11 !== b.nodeType ? b : null
            },
            parents: function(a) {
                return _.dir(a, "parentNode")
            },
            parentsUntil: function(a, b, c) {
                return _.dir(a, "parentNode", c)
            },
            next: function(a) {
                return e(a, "nextSibling")
            },
            prev: function(a) {
                return e(a, "previousSibling")
            },
            nextAll: function(a) {
                return _.dir(a, "nextSibling")
            },
            prevAll: function(a) {
                return _.dir(a, "previousSibling")
            },
            nextUntil: function(a, b, c) {
                return _.dir(a, "nextSibling", c)
            },
            prevUntil: function(a, b, c) {
                return _.dir(a, "previousSibling", c)
            },
            siblings: function(a) {
                return _.sibling((a.parentNode || {}).firstChild, a)
            },
            children: function(a) {
                return _.sibling(a.firstChild)
            },
            contents: function(a) {
                return a.contentDocument || _.merge([], a.childNodes)
            }
        }, function(a, b) {
            _.fn[a] = function(c, d) {
                var e = _.map(this, b, c);
                return "Until" !== a.slice(-5) && (d = c), d && "string" == typeof d && (e = _.filter(d, e)), this.length > 1 && (ma[a] || _.unique(e), la.test(a) && e.reverse()), this.pushStack(e)
            }
        });
        var na = /\S+/g,
            oa = {};
        _.Callbacks = function(a) {
            a = "string" == typeof a ? oa[a] || f(a) : _.extend({}, a);
            var b, c, d, e, g, h, i = [],
                j = !a.once && [],
                k = function(f) {
                    for (b = a.memory && f, c = !0, h = e || 0, e = 0, g = i.length, d = !0; i && g > h; h++)
                        if (i[h].apply(f[0], f[1]) === !1 && a.stopOnFalse) {
                            b = !1;
                            break
                        }
                    d = !1, i && (j ? j.length && k(j.shift()) : b ? i = [] : l.disable())
                },
                l = {
                    add: function() {
                        if (i) {
                            var c = i.length;
                            ! function f(b) {
                                _.each(b, function(b, c) {
                                    var d = _.type(c);
                                    "function" === d ? a.unique && l.has(c) || i.push(c) : c && c.length && "string" !== d && f(c)
                                })
                            }(arguments), d ? g = i.length : b && (e = c, k(b))
                        }
                        return this
                    },
                    remove: function() {
                        return i && _.each(arguments, function(a, b) {
                            for (var c;
                                (c = _.inArray(b, i, c)) > -1;) i.splice(c, 1), d && (g >= c && g--, h >= c && h--)
                        }), this
                    },
                    has: function(a) {
                        return a ? _.inArray(a, i) > -1 : !(!i || !i.length)
                    },
                    empty: function() {
                        return i = [], g = 0, this
                    },
                    disable: function() {
                        return i = j = b = void 0, this
                    },
                    disabled: function() {
                        return !i
                    },
                    lock: function() {
                        return j = void 0, b || l.disable(), this
                    },
                    locked: function() {
                        return !j
                    },
                    fireWith: function(a, b) {
                        return !i || c && !j || (b = b || [], b = [a, b.slice ? b.slice() : b], d ? j.push(b) : k(b)), this
                    },
                    fire: function() {
                        return l.fireWith(this, arguments), this
                    },
                    fired: function() {
                        return !!c
                    }
                };
            return l
        }, _.extend({
            Deferred: function(a) {
                var b = [
                        ["resolve", "done", _.Callbacks("once memory"), "resolved"],
                        ["reject", "fail", _.Callbacks("once memory"), "rejected"],
                        ["notify", "progress", _.Callbacks("memory")]
                    ],
                    c = "pending",
                    d = {
                        state: function() {
                            return c
                        },
                        always: function() {
                            return e.done(arguments).fail(arguments), this
                        },
                        then: function() {
                            var a = arguments;
                            return _.Deferred(function(c) {
                                _.each(b, function(b, f) {
                                    var g = _.isFunction(a[b]) && a[b];
                                    e[f[1]](function() {
                                        var a = g && g.apply(this, arguments);
                                        a && _.isFunction(a.promise) ? a.promise().done(c.resolve).fail(c.reject).progress(c.notify) : c[f[0] + "With"](this === d ? c.promise() : this, g ? [a] : arguments)
                                    })
                                }), a = null
                            }).promise()
                        },
                        promise: function(a) {
                            return null != a ? _.extend(a, d) : d
                        }
                    },
                    e = {};
                return d.pipe = d.then, _.each(b, function(a, f) {
                    var g = f[2],
                        h = f[3];
                    d[f[1]] = g.add, h && g.add(function() {
                        c = h
                    }, b[1 ^ a][2].disable, b[2][2].lock), e[f[0]] = function() {
                        return e[f[0] + "With"](this === e ? d : this, arguments), this
                    }, e[f[0] + "With"] = g.fireWith
                }), d.promise(e), a && a.call(e, e), e
            },
            when: function(a) {
                var b, c, d, e = 0,
                    f = R.call(arguments),
                    g = f.length,
                    h = 1 !== g || a && _.isFunction(a.promise) ? g : 0,
                    i = 1 === h ? a : _.Deferred(),
                    j = function(a, c, d) {
                        return function(e) {
                            c[a] = this, d[a] = arguments.length > 1 ? R.call(arguments) : e, d === b ? i.notifyWith(c, d) : --h || i.resolveWith(c, d)
                        }
                    };
                if (g > 1)
                    for (b = new Array(g), c = new Array(g), d = new Array(g); g > e; e++) f[e] && _.isFunction(f[e].promise) ? f[e].promise().done(j(e, d, f)).fail(i.reject).progress(j(e, c, b)) : --h;
                return h || i.resolveWith(d, f), i.promise()
            }
        });
        var pa;
        _.fn.ready = function(a) {
            return _.ready.promise().done(a), this
        }, _.extend({
            isReady: !1,
            readyWait: 1,
            holdReady: function(a) {
                a ? _.readyWait++ : _.ready(!0)
            },
            ready: function(a) {
                (a === !0 ? --_.readyWait : _.isReady) || (_.isReady = !0, a !== !0 && --_.readyWait > 0 || (pa.resolveWith(Z, [_]), _.fn.triggerHandler && (_(Z).triggerHandler("ready"), _(Z).off("ready"))))
            }
        }), _.ready.promise = function(b) {
            return pa || (pa = _.Deferred(), "complete" === Z.readyState ? setTimeout(_.ready) : (Z.addEventListener("DOMContentLoaded", g, !1), a.addEventListener("load", g, !1))), pa.promise(b)
        }, _.ready.promise();
        var qa = _.access = function(a, b, c, d, e, f, g) {
            var h = 0,
                i = a.length,
                j = null == c;
            if ("object" === _.type(c)) {
                e = !0;
                for (h in c) _.access(a, b, h, c[h], !0, f, g)
            } else if (void 0 !== d && (e = !0, _.isFunction(d) || (g = !0), j && (g ? (b.call(a, d), b = null) : (j = b, b = function(a, b, c) {
                    return j.call(_(a), c)
                })), b))
                for (; i > h; h++) b(a[h], c, g ? d : d.call(a[h], h, b(a[h], c)));
            return e ? a : j ? b.call(a) : i ? b(a[0], c) : f
        };
        _.acceptData = function(a) {
            return 1 === a.nodeType || 9 === a.nodeType || !+a.nodeType
        }, h.uid = 1, h.accepts = _.acceptData, h.prototype = {
            key: function(a) {
                if (!h.accepts(a)) return 0;
                var b = {},
                    c = a[this.expando];
                if (!c) {
                    c = h.uid++;
                    try {
                        b[this.expando] = {
                            value: c
                        }, Object.defineProperties(a, b)
                    } catch (d) {
                        b[this.expando] = c, _.extend(a, b)
                    }
                }
                return this.cache[c] || (this.cache[c] = {}), c
            },
            set: function(a, b, c) {
                var d, e = this.key(a),
                    f = this.cache[e];
                if ("string" == typeof b) f[b] = c;
                else if (_.isEmptyObject(f)) _.extend(this.cache[e], b);
                else
                    for (d in b) f[d] = b[d];
                return f
            },
            get: function(a, b) {
                var c = this.cache[this.key(a)];
                return void 0 === b ? c : c[b]
            },
            access: function(a, b, c) {
                var d;
                return void 0 === b || b && "string" == typeof b && void 0 === c ? (d = this.get(a, b), void 0 !== d ? d : this.get(a, _.camelCase(b))) : (this.set(a, b, c), void 0 !== c ? c : b)
            },
            remove: function(a, b) {
                var c, d, e, f = this.key(a),
                    g = this.cache[f];
                if (void 0 === b) this.cache[f] = {};
                else {
                    _.isArray(b) ? d = b.concat(b.map(_.camelCase)) : (e = _.camelCase(b), b in g ? d = [b, e] : (d = e, d = d in g ? [d] : d.match(na) || [])), c = d.length;
                    for (; c--;) delete g[d[c]]
                }
            },
            hasData: function(a) {
                return !_.isEmptyObject(this.cache[a[this.expando]] || {})
            },
            discard: function(a) {
                a[this.expando] && delete this.cache[a[this.expando]]
            }
        };
        var ra = new h,
            sa = new h,
            ta = /^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,
            ua = /([A-Z])/g;
        _.extend({
            hasData: function(a) {
                return sa.hasData(a) || ra.hasData(a)
            },
            data: function(a, b, c) {
                return sa.access(a, b, c)
            },
            removeData: function(a, b) {
                sa.remove(a, b)
            },
            _data: function(a, b, c) {
                return ra.access(a, b, c)
            },
            _removeData: function(a, b) {
                ra.remove(a, b)
            }
        }), _.fn.extend({
            data: function(a, b) {
                var c, d, e, f = this[0],
                    g = f && f.attributes;
                if (void 0 === a) {
                    if (this.length && (e = sa.get(f), 1 === f.nodeType && !ra.get(f, "hasDataAttrs"))) {
                        for (c = g.length; c--;) g[c] && (d = g[c].name, 0 === d.indexOf("data-") && (d = _.camelCase(d.slice(5)), i(f, d, e[d])));
                        ra.set(f, "hasDataAttrs", !0)
                    }
                    return e
                }
                return "object" == typeof a ? this.each(function() {
                    sa.set(this, a)
                }) : qa(this, function(b) {
                    var c, d = _.camelCase(a);
                    if (f && void 0 === b) {
                        if (c = sa.get(f, a), void 0 !== c) return c;
                        if (c = sa.get(f, d), void 0 !== c) return c;
                        if (c = i(f, d, void 0), void 0 !== c) return c
                    } else this.each(function() {
                        var c = sa.get(this, d);
                        sa.set(this, d, b), -1 !== a.indexOf("-") && void 0 !== c && sa.set(this, a, b)
                    })
                }, null, b, arguments.length > 1, null, !0)
            },
            removeData: function(a) {
                return this.each(function() {
                    sa.remove(this, a)
                })
            }
        }), _.extend({
            queue: function(a, b, c) {
                var d;
                return a ? (b = (b || "fx") + "queue", d = ra.get(a, b), c && (!d || _.isArray(c) ? d = ra.access(a, b, _.makeArray(c)) : d.push(c)), d || []) : void 0
            },
            dequeue: function(a, b) {
                b = b || "fx";
                var c = _.queue(a, b),
                    d = c.length,
                    e = c.shift(),
                    f = _._queueHooks(a, b),
                    g = function() {
                        _.dequeue(a, b)
                    };
                "inprogress" === e && (e = c.shift(), d--), e && ("fx" === b && c.unshift("inprogress"), delete f.stop, e.call(a, g, f)), !d && f && f.empty.fire()
            },
            _queueHooks: function(a, b) {
                var c = b + "queueHooks";
                return ra.get(a, c) || ra.access(a, c, {
                    empty: _.Callbacks("once memory").add(function() {
                        ra.remove(a, [b + "queue", c])
                    })
                })
            }
        }), _.fn.extend({
            queue: function(a, b) {
                var c = 2;
                return "string" != typeof a && (b = a, a = "fx", c--), arguments.length < c ? _.queue(this[0], a) : void 0 === b ? this : this.each(function() {
                    var c = _.queue(this, a, b);
                    _._queueHooks(this, a), "fx" === a && "inprogress" !== c[0] && _.dequeue(this, a)
                })
            },
            dequeue: function(a) {
                return this.each(function() {
                    _.dequeue(this, a)
                })
            },
            clearQueue: function(a) {
                return this.queue(a || "fx", [])
            },
            promise: function(a, b) {
                var c, d = 1,
                    e = _.Deferred(),
                    f = this,
                    g = this.length,
                    h = function() {
                        --d || e.resolveWith(f, [f])
                    };
                for ("string" != typeof a && (b = a, a = void 0), a = a || "fx"; g--;) c = ra.get(f[g], a + "queueHooks"), c && c.empty && (d++, c.empty.add(h));
                return h(), e.promise(b)
            }
        });
        var va = /[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,
            wa = ["Top", "Right", "Bottom", "Left"],
            xa = function(a, b) {
                return a = b || a, "none" === _.css(a, "display") || !_.contains(a.ownerDocument, a)
            },
            ya = /^(?:checkbox|radio)$/i;
        ! function() {
            var a = Z.createDocumentFragment(),
                b = a.appendChild(Z.createElement("div")),
                c = Z.createElement("input");
            c.setAttribute("type", "radio"), c.setAttribute("checked", "checked"), c.setAttribute("name", "t"), b.appendChild(c), Y.checkClone = b.cloneNode(!0).cloneNode(!0).lastChild.checked, b.innerHTML = "<textarea>x</textarea>", Y.noCloneChecked = !!b.cloneNode(!0).lastChild.defaultValue
        }();
        var za = "undefined";
        Y.focusinBubbles = "onfocusin" in a;
        var Aa = /^key/,
            Ba = /^(?:mouse|pointer|contextmenu)|click/,
            Ca = /^(?:focusinfocus|focusoutblur)$/,
            Da = /^([^.]*)(?:\.(.+)|)$/;
        _.event = {
            global: {},
            add: function(a, b, c, d, e) {
                var f, g, h, i, j, k, l, m, n, o, p, q = ra.get(a);
                if (q)
                    for (c.handler && (f = c, c = f.handler, e = f.selector), c.guid || (c.guid = _.guid++), (i = q.events) || (i = q.events = {}), (g = q.handle) || (g = q.handle = function(b) {
                            return typeof _ !== za && _.event.triggered !== b.type ? _.event.dispatch.apply(a, arguments) : void 0
                        }), b = (b || "").match(na) || [""], j = b.length; j--;) h = Da.exec(b[j]) || [], n = p = h[1], o = (h[2] || "").split(".").sort(), n && (l = _.event.special[n] || {}, n = (e ? l.delegateType : l.bindType) || n, l = _.event.special[n] || {}, k = _.extend({
                        type: n,
                        origType: p,
                        data: d,
                        handler: c,
                        guid: c.guid,
                        selector: e,
                        needsContext: e && _.expr.match.needsContext.test(e),
                        namespace: o.join(".")
                    }, f), (m = i[n]) || (m = i[n] = [], m.delegateCount = 0, l.setup && l.setup.call(a, d, o, g) !== !1 || a.addEventListener && a.addEventListener(n, g, !1)), l.add && (l.add.call(a, k), k.handler.guid || (k.handler.guid = c.guid)), e ? m.splice(m.delegateCount++, 0, k) : m.push(k), _.event.global[n] = !0)
            },
            remove: function(a, b, c, d, e) {
                var f, g, h, i, j, k, l, m, n, o, p, q = ra.hasData(a) && ra.get(a);
                if (q && (i = q.events)) {
                    for (b = (b || "").match(na) || [""], j = b.length; j--;)
                        if (h = Da.exec(b[j]) || [], n = p = h[1], o = (h[2] || "").split(".").sort(), n) {
                            for (l = _.event.special[n] || {}, n = (d ? l.delegateType : l.bindType) || n, m = i[n] || [], h = h[2] && new RegExp("(^|\\.)" + o.join("\\.(?:.*\\.|)") + "(\\.|$)"), g = f = m.length; f--;) k = m[f], !e && p !== k.origType || c && c.guid !== k.guid || h && !h.test(k.namespace) || d && d !== k.selector && ("**" !== d || !k.selector) || (m.splice(f, 1), k.selector && m.delegateCount--, l.remove && l.remove.call(a, k));
                            g && !m.length && (l.teardown && l.teardown.call(a, o, q.handle) !== !1 || _.removeEvent(a, n, q.handle), delete i[n])
                        } else
                            for (n in i) _.event.remove(a, n + b[j], c, d, !0);
                    _.isEmptyObject(i) && (delete q.handle, ra.remove(a, "events"))
                }
            },
            trigger: function(b, c, d, e) {
                var f, g, h, i, j, k, l, m = [d || Z],
                    n = X.call(b, "type") ? b.type : b,
                    o = X.call(b, "namespace") ? b.namespace.split(".") : [];
                if (g = h = d = d || Z, 3 !== d.nodeType && 8 !== d.nodeType && !Ca.test(n + _.event.triggered) && (n.indexOf(".") >= 0 && (o = n.split("."), n = o.shift(), o.sort()), j = n.indexOf(":") < 0 && "on" + n, b = b[_.expando] ? b : new _.Event(n, "object" == typeof b && b), b.isTrigger = e ? 2 : 3, b.namespace = o.join("."), b.namespace_re = b.namespace ? new RegExp("(^|\\.)" + o.join("\\.(?:.*\\.|)") + "(\\.|$)") : null, b.result = void 0, b.target || (b.target = d), c = null == c ? [b] : _.makeArray(c, [b]), l = _.event.special[n] || {}, e || !l.trigger || l.trigger.apply(d, c) !== !1)) {
                    if (!e && !l.noBubble && !_.isWindow(d)) {
                        for (i = l.delegateType || n, Ca.test(i + n) || (g = g.parentNode); g; g = g.parentNode) m.push(g), h = g;
                        h === (d.ownerDocument || Z) && m.push(h.defaultView || h.parentWindow || a)
                    }
                    for (f = 0;
                        (g = m[f++]) && !b.isPropagationStopped();) b.type = f > 1 ? i : l.bindType || n, k = (ra.get(g, "events") || {})[b.type] && ra.get(g, "handle"), k && k.apply(g, c), k = j && g[j], k && k.apply && _.acceptData(g) && (b.result = k.apply(g, c), b.result === !1 && b.preventDefault());
                    return b.type = n, e || b.isDefaultPrevented() || l._default && l._default.apply(m.pop(), c) !== !1 || !_.acceptData(d) || j && _.isFunction(d[n]) && !_.isWindow(d) && (h = d[j], h && (d[j] = null), _.event.triggered = n, d[n](), _.event.triggered = void 0, h && (d[j] = h)), b.result
                }
            },
            dispatch: function(a) {
                a = _.event.fix(a);
                var b, c, d, e, f, g = [],
                    h = R.call(arguments),
                    i = (ra.get(this, "events") || {})[a.type] || [],
                    j = _.event.special[a.type] || {};
                if (h[0] = a, a.delegateTarget = this, !j.preDispatch || j.preDispatch.call(this, a) !== !1) {
                    for (g = _.event.handlers.call(this, a, i), b = 0;
                        (e = g[b++]) && !a.isPropagationStopped();)
                        for (a.currentTarget = e.elem, c = 0;
                            (f = e.handlers[c++]) && !a.isImmediatePropagationStopped();)(!a.namespace_re || a.namespace_re.test(f.namespace)) && (a.handleObj = f, a.data = f.data, d = ((_.event.special[f.origType] || {}).handle || f.handler).apply(e.elem, h), void 0 !== d && (a.result = d) === !1 && (a.preventDefault(), a.stopPropagation()));
                    return j.postDispatch && j.postDispatch.call(this, a), a.result
                }
            },
            handlers: function(a, b) {
                var c, d, e, f, g = [],
                    h = b.delegateCount,
                    i = a.target;
                if (h && i.nodeType && (!a.button || "click" !== a.type))
                    for (; i !== this; i = i.parentNode || this)
                        if (i.disabled !== !0 || "click" !== a.type) {
                            for (d = [], c = 0; h > c; c++) f = b[c], e = f.selector + " ", void 0 === d[e] && (d[e] = f.needsContext ? _(e, this).index(i) >= 0 : _.find(e, this, null, [i]).length), d[e] && d.push(f);
                            d.length && g.push({
                                elem: i,
                                handlers: d
                            })
                        }
                return h < b.length && g.push({
                    elem: this,
                    handlers: b.slice(h)
                }), g
            },
            props: "altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),
            fixHooks: {},
            keyHooks: {
                props: "char charCode key keyCode".split(" "),
                filter: function(a, b) {
                    return null == a.which && (a.which = null != b.charCode ? b.charCode : b.keyCode), a
                }
            },
            mouseHooks: {
                props: "button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),
                filter: function(a, b) {
                    var c, d, e, f = b.button;
                    return null == a.pageX && null != b.clientX && (c = a.target.ownerDocument || Z, d = c.documentElement, e = c.body, a.pageX = b.clientX + (d && d.scrollLeft || e && e.scrollLeft || 0) - (d && d.clientLeft || e && e.clientLeft || 0), a.pageY = b.clientY + (d && d.scrollTop || e && e.scrollTop || 0) - (d && d.clientTop || e && e.clientTop || 0)), a.which || void 0 === f || (a.which = 1 & f ? 1 : 2 & f ? 3 : 4 & f ? 2 : 0), a
                }
            },
            fix: function(a) {
                if (a[_.expando]) return a;
                var b, c, d, e = a.type,
                    f = a,
                    g = this.fixHooks[e];
                for (g || (this.fixHooks[e] = g = Ba.test(e) ? this.mouseHooks : Aa.test(e) ? this.keyHooks : {}), d = g.props ? this.props.concat(g.props) : this.props, a = new _.Event(f), b = d.length; b--;) c = d[b], a[c] = f[c];
                return a.target || (a.target = Z), 3 === a.target.nodeType && (a.target = a.target.parentNode), g.filter ? g.filter(a, f) : a
            },
            special: {
                load: {
                    noBubble: !0
                },
                focus: {
                    trigger: function() {
                        return this !== l() && this.focus ? (this.focus(), !1) : void 0
                    },
                    delegateType: "focusin"
                },
                blur: {
                    trigger: function() {
                        return this === l() && this.blur ? (this.blur(), !1) : void 0
                    },
                    delegateType: "focusout"
                },
                click: {
                    trigger: function() {
                        return "checkbox" === this.type && this.click && _.nodeName(this, "input") ? (this.click(), !1) : void 0
                    },
                    _default: function(a) {
                        return _.nodeName(a.target, "a")
                    }
                },
                beforeunload: {
                    postDispatch: function(a) {
                        void 0 !== a.result && a.originalEvent && (a.originalEvent.returnValue = a.result)
                    }
                }
            },
            simulate: function(a, b, c, d) {
                var e = _.extend(new _.Event, c, {
                    type: a,
                    isSimulated: !0,
                    originalEvent: {}
                });
                d ? _.event.trigger(e, null, b) : _.event.dispatch.call(b, e), e.isDefaultPrevented() && c.preventDefault()
            }
        }, _.removeEvent = function(a, b, c) {
            a.removeEventListener && a.removeEventListener(b, c, !1)
        }, _.Event = function(a, b) {
            return this instanceof _.Event ? (a && a.type ? (this.originalEvent = a, this.type = a.type, this.isDefaultPrevented = a.defaultPrevented || void 0 === a.defaultPrevented && a.returnValue === !1 ? j : k) : this.type = a, b && _.extend(this, b), this.timeStamp = a && a.timeStamp || _.now(), void(this[_.expando] = !0)) : new _.Event(a, b)
        }, _.Event.prototype = {
            isDefaultPrevented: k,
            isPropagationStopped: k,
            isImmediatePropagationStopped: k,
            preventDefault: function() {
                var a = this.originalEvent;
                this.isDefaultPrevented = j, a && a.preventDefault && a.preventDefault()
            },
            stopPropagation: function() {
                var a = this.originalEvent;
                this.isPropagationStopped = j, a && a.stopPropagation && a.stopPropagation()
            },
            stopImmediatePropagation: function() {
                var a = this.originalEvent;
                this.isImmediatePropagationStopped = j, a && a.stopImmediatePropagation && a.stopImmediatePropagation(), this.stopPropagation()
            }
        }, _.each({
            mouseenter: "mouseover",
            mouseleave: "mouseout",
            pointerenter: "pointerover",
            pointerleave: "pointerout"
        }, function(a, b) {
            _.event.special[a] = {
                delegateType: b,
                bindType: b,
                handle: function(a) {
                    var c, d = this,
                        e = a.relatedTarget,
                        f = a.handleObj;
                    return (!e || e !== d && !_.contains(d, e)) && (a.type = f.origType, c = f.handler.apply(this, arguments), a.type = b), c
                }
            }
        }), Y.focusinBubbles || _.each({
            focus: "focusin",
            blur: "focusout"
        }, function(a, b) {
            var c = function(a) {
                _.event.simulate(b, a.target, _.event.fix(a), !0)
            };
            _.event.special[b] = {
                setup: function() {
                    var d = this.ownerDocument || this,
                        e = ra.access(d, b);
                    e || d.addEventListener(a, c, !0), ra.access(d, b, (e || 0) + 1)
                },
                teardown: function() {
                    var d = this.ownerDocument || this,
                        e = ra.access(d, b) - 1;
                    e ? ra.access(d, b, e) : (d.removeEventListener(a, c, !0), ra.remove(d, b))
                }
            }
        }), _.fn.extend({
            on: function(a, b, c, d, e) {
                var f, g;
                if ("object" == typeof a) {
                    "string" != typeof b && (c = c || b, b = void 0);
                    for (g in a) this.on(g, b, c, a[g], e);
                    return this
                }
                if (null == c && null == d ? (d = b, c = b = void 0) : null == d && ("string" == typeof b ? (d = c, c = void 0) : (d = c, c = b, b = void 0)), d === !1) d = k;
                else if (!d) return this;
                return 1 === e && (f = d, d = function(a) {
                    return _().off(a), f.apply(this, arguments)
                }, d.guid = f.guid || (f.guid = _.guid++)), this.each(function() {
                    _.event.add(this, a, d, c, b)
                })
            },
            one: function(a, b, c, d) {
                return this.on(a, b, c, d, 1)
            },
            off: function(a, b, c) {
                var d, e;
                if (a && a.preventDefault && a.handleObj) return d = a.handleObj, _(a.delegateTarget).off(d.namespace ? d.origType + "." + d.namespace : d.origType, d.selector, d.handler), this;
                if ("object" == typeof a) {
                    for (e in a) this.off(e, b, a[e]);
                    return this
                }
                return (b === !1 || "function" == typeof b) && (c = b, b = void 0), c === !1 && (c = k), this.each(function() {
                    _.event.remove(this, a, c, b)
                })
            },
            trigger: function(a, b) {
                return this.each(function() {
                    _.event.trigger(a, b, this)
                })
            },
            triggerHandler: function(a, b) {
                var c = this[0];
                return c ? _.event.trigger(a, b, c, !0) : void 0
            }
        });
        var Ea = /<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,
            Fa = /<([\w:]+)/,
            Ga = /<|&#?\w+;/,
            Ha = /<(?:script|style|link)/i,
            Ia = /checked\s*(?:[^=]|=\s*.checked.)/i,
            Ja = /^$|\/(?:java|ecma)script/i,
            Ka = /^true\/(.*)/,
            La = /^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,
            Ma = {
                option: [1, "<select multiple='multiple'>", "</select>"],
                thead: [1, "<table>", "</table>"],
                col: [2, "<table><colgroup>", "</colgroup></table>"],
                tr: [2, "<table><tbody>", "</tbody></table>"],
                td: [3, "<table><tbody><tr>", "</tr></tbody></table>"],
                _default: [0, "", ""]
            };
        Ma.optgroup = Ma.option, Ma.tbody = Ma.tfoot = Ma.colgroup = Ma.caption = Ma.thead, Ma.th = Ma.td, _.extend({
            clone: function(a, b, c) {
                var d, e, f, g, h = a.cloneNode(!0),
                    i = _.contains(a.ownerDocument, a);
                if (!(Y.noCloneChecked || 1 !== a.nodeType && 11 !== a.nodeType || _.isXMLDoc(a)))
                    for (g = r(h), f = r(a), d = 0, e = f.length; e > d; d++) s(f[d], g[d]);
                if (b)
                    if (c)
                        for (f = f || r(a), g = g || r(h), d = 0, e = f.length; e > d; d++) q(f[d], g[d]);
                    else q(a, h);
                return g = r(h, "script"), g.length > 0 && p(g, !i && r(a, "script")), h
            },
            buildFragment: function(a, b, c, d) {
                for (var e, f, g, h, i, j, k = b.createDocumentFragment(), l = [], m = 0, n = a.length; n > m; m++)
                    if (e = a[m], e || 0 === e)
                        if ("object" === _.type(e)) _.merge(l, e.nodeType ? [e] : e);
                        else if (Ga.test(e)) {
                    for (f = f || k.appendChild(b.createElement("div")), g = (Fa.exec(e) || ["", ""])[1].toLowerCase(), h = Ma[g] || Ma._default, f.innerHTML = h[1] + e.replace(Ea, "<$1></$2>") + h[2], j = h[0]; j--;) f = f.lastChild;
                    _.merge(l, f.childNodes), f = k.firstChild, f.textContent = ""
                } else l.push(b.createTextNode(e));
                for (k.textContent = "", m = 0; e = l[m++];)
                    if ((!d || -1 === _.inArray(e, d)) && (i = _.contains(e.ownerDocument, e), f = r(k.appendChild(e), "script"), i && p(f), c))
                        for (j = 0; e = f[j++];) Ja.test(e.type || "") && c.push(e);
                return k
            },
            cleanData: function(a) {
                for (var b, c, d, e, f = _.event.special, g = 0; void 0 !== (c = a[g]); g++) {
                    if (_.acceptData(c) && (e = c[ra.expando], e && (b = ra.cache[e]))) {
                        if (b.events)
                            for (d in b.events) f[d] ? _.event.remove(c, d) : _.removeEvent(c, d, b.handle);
                        ra.cache[e] && delete ra.cache[e]
                    }
                    delete sa.cache[c[sa.expando]]
                }
            }
        }), _.fn.extend({
            text: function(a) {
                return qa(this, function(a) {
                    return void 0 === a ? _.text(this) : this.empty().each(function() {
                        (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) && (this.textContent = a)
                    })
                }, null, a, arguments.length)
            },
            append: function() {
                return this.domManip(arguments, function(a) {
                    if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                        var b = m(this, a);
                        b.appendChild(a)
                    }
                })
            },
            prepend: function() {
                return this.domManip(arguments, function(a) {
                    if (1 === this.nodeType || 11 === this.nodeType || 9 === this.nodeType) {
                        var b = m(this, a);
                        b.insertBefore(a, b.firstChild)
                    }
                })
            },
            before: function() {
                return this.domManip(arguments, function(a) {
                    this.parentNode && this.parentNode.insertBefore(a, this)
                })
            },
            after: function() {
                return this.domManip(arguments, function(a) {
                    this.parentNode && this.parentNode.insertBefore(a, this.nextSibling)
                })
            },
            remove: function(a, b) {
                for (var c, d = a ? _.filter(a, this) : this, e = 0; null != (c = d[e]); e++) b || 1 !== c.nodeType || _.cleanData(r(c)), c.parentNode && (b && _.contains(c.ownerDocument, c) && p(r(c, "script")), c.parentNode.removeChild(c));
                return this
            },
            empty: function() {
                for (var a, b = 0; null != (a = this[b]); b++) 1 === a.nodeType && (_.cleanData(r(a, !1)), a.textContent = "");
                return this
            },
            clone: function(a, b) {
                return a = null == a ? !1 : a, b = null == b ? a : b, this.map(function() {
                    return _.clone(this, a, b)
                })
            },
            html: function(a) {
                return qa(this, function(a) {
                    var b = this[0] || {},
                        c = 0,
                        d = this.length;
                    if (void 0 === a && 1 === b.nodeType) return b.innerHTML;
                    if ("string" == typeof a && !Ha.test(a) && !Ma[(Fa.exec(a) || ["", ""])[1].toLowerCase()]) {
                        a = a.replace(Ea, "<$1></$2>");
                        try {
                            for (; d > c; c++) b = this[c] || {}, 1 === b.nodeType && (_.cleanData(r(b, !1)), b.innerHTML = a);
                            b = 0
                        } catch (e) {}
                    }
                    b && this.empty().append(a)
                }, null, a, arguments.length)
            },
            replaceWith: function() {
                var a = arguments[0];
                return this.domManip(arguments, function(b) {
                    a = this.parentNode, _.cleanData(r(this)), a && a.replaceChild(b, this)
                }), a && (a.length || a.nodeType) ? this : this.remove()
            },
            detach: function(a) {
                return this.remove(a, !0)
            },
            domManip: function(a, b) {
                a = S.apply([], a);
                var c, d, e, f, g, h, i = 0,
                    j = this.length,
                    k = this,
                    l = j - 1,
                    m = a[0],
                    p = _.isFunction(m);
                if (p || j > 1 && "string" == typeof m && !Y.checkClone && Ia.test(m)) return this.each(function(c) {
                    var d = k.eq(c);
                    p && (a[0] = m.call(this, c, d.html())), d.domManip(a, b)
                });
                if (j && (c = _.buildFragment(a, this[0].ownerDocument, !1, this), d = c.firstChild, 1 === c.childNodes.length && (c = d), d)) {
                    for (e = _.map(r(c, "script"), n), f = e.length; j > i; i++) g = c, i !== l && (g = _.clone(g, !0, !0), f && _.merge(e, r(g, "script"))), b.call(this[i], g, i);
                    if (f)
                        for (h = e[e.length - 1].ownerDocument, _.map(e, o), i = 0; f > i; i++) g = e[i], Ja.test(g.type || "") && !ra.access(g, "globalEval") && _.contains(h, g) && (g.src ? _._evalUrl && _._evalUrl(g.src) : _.globalEval(g.textContent.replace(La, "")))
                }
                return this
            }
        }), _.each({
            appendTo: "append",
            prependTo: "prepend",
            insertBefore: "before",
            insertAfter: "after",
            replaceAll: "replaceWith"
        }, function(a, b) {
            _.fn[a] = function(a) {
                for (var c, d = [], e = _(a), f = e.length - 1, g = 0; f >= g; g++) c = g === f ? this : this.clone(!0), _(e[g])[b](c), T.apply(d, c.get());
                return this.pushStack(d)
            }
        });
        var Na, Oa = {},
            Pa = /^margin/,
            Qa = new RegExp("^(" + va + ")(?!px)[a-z%]+$", "i"),
            Ra = function(a) {
                return a.ownerDocument.defaultView.getComputedStyle(a, null)
            };
        ! function() {
            function b() {
                g.style.cssText = "-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute", g.innerHTML = "", e.appendChild(f);
                var b = a.getComputedStyle(g, null);
                c = "1%" !== b.top, d = "4px" === b.width, e.removeChild(f)
            }
            var c, d, e = Z.documentElement,
                f = Z.createElement("div"),
                g = Z.createElement("div");
            g.style && (g.style.backgroundClip = "content-box", g.cloneNode(!0).style.backgroundClip = "", Y.clearCloneStyle = "content-box" === g.style.backgroundClip, f.style.cssText = "border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute", f.appendChild(g), a.getComputedStyle && _.extend(Y, {
                pixelPosition: function() {
                    return b(), c
                },
                boxSizingReliable: function() {
                    return null == d && b(), d
                },
                reliableMarginRight: function() {
                    var b, c = g.appendChild(Z.createElement("div"));
                    return c.style.cssText = g.style.cssText = "-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0", c.style.marginRight = c.style.width = "0", g.style.width = "1px", e.appendChild(f), b = !parseFloat(a.getComputedStyle(c, null).marginRight), e.removeChild(f), b
                }
            }))
        }(), _.swap = function(a, b, c, d) {
            var e, f, g = {};
            for (f in b) g[f] = a.style[f], a.style[f] = b[f];
            e = c.apply(a, d || []);
            for (f in b) a.style[f] = g[f];
            return e
        };
        var Sa = /^(none|table(?!-c[ea]).+)/,
            Ta = new RegExp("^(" + va + ")(.*)$", "i"),
            Ua = new RegExp("^([+-])=(" + va + ")", "i"),
            Va = {
                position: "absolute",
                visibility: "hidden",
                display: "block"
            },
            Wa = {
                letterSpacing: "0",
                fontWeight: "400"
            },
            Xa = ["Webkit", "O", "Moz", "ms"];
        _.extend({
            cssHooks: {
                opacity: {
                    get: function(a, b) {
                        if (b) {
                            var c = v(a, "opacity");
                            return "" === c ? "1" : c
                        }
                    }
                }
            },
            cssNumber: {
                columnCount: !0,
                fillOpacity: !0,
                flexGrow: !0,
                flexShrink: !0,
                fontWeight: !0,
                lineHeight: !0,
                opacity: !0,
                order: !0,
                orphans: !0,
                widows: !0,
                zIndex: !0,
                zoom: !0
            },
            cssProps: {
                "float": "cssFloat"
            },
            style: function(a, b, c, d) {
                if (a && 3 !== a.nodeType && 8 !== a.nodeType && a.style) {
                    var e, f, g, h = _.camelCase(b),
                        i = a.style;
                    return b = _.cssProps[h] || (_.cssProps[h] = x(i, h)), g = _.cssHooks[b] || _.cssHooks[h], void 0 === c ? g && "get" in g && void 0 !== (e = g.get(a, !1, d)) ? e : i[b] : (f = typeof c, "string" === f && (e = Ua.exec(c)) && (c = (e[1] + 1) * e[2] + parseFloat(_.css(a, b)), f = "number"), null != c && c === c && ("number" !== f || _.cssNumber[h] || (c += "px"), Y.clearCloneStyle || "" !== c || 0 !== b.indexOf("background") || (i[b] = "inherit"), g && "set" in g && void 0 === (c = g.set(a, c, d)) || (i[b] = c)), void 0)
                }
            },
            css: function(a, b, c, d) {
                var e, f, g, h = _.camelCase(b);
                return b = _.cssProps[h] || (_.cssProps[h] = x(a.style, h)), g = _.cssHooks[b] || _.cssHooks[h], g && "get" in g && (e = g.get(a, !0, c)), void 0 === e && (e = v(a, b, d)), "normal" === e && b in Wa && (e = Wa[b]), "" === c || c ? (f = parseFloat(e), c === !0 || _.isNumeric(f) ? f || 0 : e) : e
            }
        }), _.each(["height", "width"], function(a, b) {
            _.cssHooks[b] = {
                get: function(a, c, d) {
                    return c ? Sa.test(_.css(a, "display")) && 0 === a.offsetWidth ? _.swap(a, Va, function() {
                        return A(a, b, d)
                    }) : A(a, b, d) : void 0
                },
                set: function(a, c, d) {
                    var e = d && Ra(a);
                    return y(a, c, d ? z(a, b, d, "border-box" === _.css(a, "boxSizing", !1, e), e) : 0)
                }
            }
        }), _.cssHooks.marginRight = w(Y.reliableMarginRight, function(a, b) {
            return b ? _.swap(a, {
                display: "inline-block"
            }, v, [a, "marginRight"]) : void 0
        }), _.each({
            margin: "",
            padding: "",
            border: "Width"
        }, function(a, b) {
            _.cssHooks[a + b] = {
                expand: function(c) {
                    for (var d = 0, e = {}, f = "string" == typeof c ? c.split(" ") : [c]; 4 > d; d++) e[a + wa[d] + b] = f[d] || f[d - 2] || f[0];
                    return e
                }
            }, Pa.test(a) || (_.cssHooks[a + b].set = y)
        }), _.fn.extend({
            css: function(a, b) {
                return qa(this, function(a, b, c) {
                    var d, e, f = {},
                        g = 0;
                    if (_.isArray(b)) {
                        for (d = Ra(a), e = b.length; e > g; g++) f[b[g]] = _.css(a, b[g], !1, d);
                        return f
                    }
                    return void 0 !== c ? _.style(a, b, c) : _.css(a, b)
                }, a, b, arguments.length > 1)
            },
            show: function() {
                return B(this, !0)
            },
            hide: function() {
                return B(this)
            },
            toggle: function(a) {
                return "boolean" == typeof a ? a ? this.show() : this.hide() : this.each(function() {
                    xa(this) ? _(this).show() : _(this).hide()
                })
            }
        }), _.Tween = C, C.prototype = {
            constructor: C,
            init: function(a, b, c, d, e, f) {
                this.elem = a, this.prop = c, this.easing = e || "swing", this.options = b, this.start = this.now = this.cur(), this.end = d, this.unit = f || (_.cssNumber[c] ? "" : "px")
            },
            cur: function() {
                var a = C.propHooks[this.prop];
                return a && a.get ? a.get(this) : C.propHooks._default.get(this)
            },
            run: function(a) {
                var b, c = C.propHooks[this.prop];
                return this.pos = b = this.options.duration ? _.easing[this.easing](a, this.options.duration * a, 0, 1, this.options.duration) : a, this.now = (this.end - this.start) * b + this.start, this.options.step && this.options.step.call(this.elem, this.now, this), c && c.set ? c.set(this) : C.propHooks._default.set(this), this
            }
        }, C.prototype.init.prototype = C.prototype, C.propHooks = {
            _default: {
                get: function(a) {
                    var b;
                    return null == a.elem[a.prop] || a.elem.style && null != a.elem.style[a.prop] ? (b = _.css(a.elem, a.prop, ""), b && "auto" !== b ? b : 0) : a.elem[a.prop]
                },
                set: function(a) {
                    _.fx.step[a.prop] ? _.fx.step[a.prop](a) : a.elem.style && (null != a.elem.style[_.cssProps[a.prop]] || _.cssHooks[a.prop]) ? _.style(a.elem, a.prop, a.now + a.unit) : a.elem[a.prop] = a.now
                }
            }
        }, C.propHooks.scrollTop = C.propHooks.scrollLeft = {
            set: function(a) {
                a.elem.nodeType && a.elem.parentNode && (a.elem[a.prop] = a.now)
            }
        }, _.easing = {
            linear: function(a) {
                return a
            },
            swing: function(a) {
                return .5 - Math.cos(a * Math.PI) / 2
            }
        }, _.fx = C.prototype.init, _.fx.step = {};
        var Ya, Za, $a = /^(?:toggle|show|hide)$/,
            _a = new RegExp("^(?:([+-])=|)(" + va + ")([a-z%]*)$", "i"),
            ab = /queueHooks$/,
            bb = [G],
            cb = {
                "*": [function(a, b) {
                    var c = this.createTween(a, b),
                        d = c.cur(),
                        e = _a.exec(b),
                        f = e && e[3] || (_.cssNumber[a] ? "" : "px"),
                        g = (_.cssNumber[a] || "px" !== f && +d) && _a.exec(_.css(c.elem, a)),
                        h = 1,
                        i = 20;
                    if (g && g[3] !== f) {
                        f = f || g[3], e = e || [], g = +d || 1;
                        do h = h || ".5", g /= h, _.style(c.elem, a, g + f); while (h !== (h = c.cur() / d) && 1 !== h && --i)
                    }
                    return e && (g = c.start = +g || +d || 0, c.unit = f, c.end = e[1] ? g + (e[1] + 1) * e[2] : +e[2]), c
                }]
            };
        _.Animation = _.extend(I, {
                tweener: function(a, b) {
                    _.isFunction(a) ? (b = a, a = ["*"]) : a = a.split(" ");
                    for (var c, d = 0, e = a.length; e > d; d++) c = a[d], cb[c] = cb[c] || [], cb[c].unshift(b)
                },
                prefilter: function(a, b) {
                    b ? bb.unshift(a) : bb.push(a)
                }
            }), _.speed = function(a, b, c) {
                var d = a && "object" == typeof a ? _.extend({}, a) : {
                    complete: c || !c && b || _.isFunction(a) && a,
                    duration: a,
                    easing: c && b || b && !_.isFunction(b) && b
                };
                return d.duration = _.fx.off ? 0 : "number" == typeof d.duration ? d.duration : d.duration in _.fx.speeds ? _.fx.speeds[d.duration] : _.fx.speeds._default, (null == d.queue || d.queue === !0) && (d.queue = "fx"), d.old = d.complete, d.complete = function() {
                    _.isFunction(d.old) && d.old.call(this), d.queue && _.dequeue(this, d.queue)
                }, d
            }, _.fn.extend({
                fadeTo: function(a, b, c, d) {
                    return this.filter(xa).css("opacity", 0).show().end().animate({
                        opacity: b
                    }, a, c, d)
                },
                animate: function(a, b, c, d) {
                    var e = _.isEmptyObject(a),
                        f = _.speed(b, c, d),
                        g = function() {
                            var b = I(this, _.extend({}, a), f);
                            (e || ra.get(this, "finish")) && b.stop(!0)
                        };
                    return g.finish = g, e || f.queue === !1 ? this.each(g) : this.queue(f.queue, g)
                },
                stop: function(a, b, c) {
                    var d = function(a) {
                        var b = a.stop;
                        delete a.stop, b(c)
                    };
                    return "string" != typeof a && (c = b, b = a, a = void 0), b && a !== !1 && this.queue(a || "fx", []), this.each(function() {
                        var b = !0,
                            e = null != a && a + "queueHooks",
                            f = _.timers,
                            g = ra.get(this);
                        if (e) g[e] && g[e].stop && d(g[e]);
                        else
                            for (e in g) g[e] && g[e].stop && ab.test(e) && d(g[e]);
                        for (e = f.length; e--;) f[e].elem !== this || null != a && f[e].queue !== a || (f[e].anim.stop(c), b = !1, f.splice(e, 1));
                        (b || !c) && _.dequeue(this, a)
                    })
                },
                finish: function(a) {
                    return a !== !1 && (a = a || "fx"), this.each(function() {
                        var b, c = ra.get(this),
                            d = c[a + "queue"],
                            e = c[a + "queueHooks"],
                            f = _.timers,
                            g = d ? d.length : 0;
                        for (c.finish = !0, _.queue(this, a, []), e && e.stop && e.stop.call(this, !0), b = f.length; b--;) f[b].elem === this && f[b].queue === a && (f[b].anim.stop(!0), f.splice(b, 1));
                        for (b = 0; g > b; b++) d[b] && d[b].finish && d[b].finish.call(this);
                        delete c.finish
                    })
                }
            }), _.each(["toggle", "show", "hide"], function(a, b) {
                var c = _.fn[b];
                _.fn[b] = function(a, d, e) {
                    return null == a || "boolean" == typeof a ? c.apply(this, arguments) : this.animate(E(b, !0), a, d, e)
                }
            }), _.each({
                slideDown: E("show"),
                slideUp: E("hide"),
                slideToggle: E("toggle"),
                fadeIn: {
                    opacity: "show"
                },
                fadeOut: {
                    opacity: "hide"
                },
                fadeToggle: {
                    opacity: "toggle"
                }
            }, function(a, b) {
                _.fn[a] = function(a, c, d) {
                    return this.animate(b, a, c, d)
                }
            }), _.timers = [], _.fx.tick = function() {
                var a, b = 0,
                    c = _.timers;
                for (Ya = _.now(); b < c.length; b++) a = c[b], a() || c[b] !== a || c.splice(b--, 1);
                c.length || _.fx.stop(), Ya = void 0
            }, _.fx.timer = function(a) {
                _.timers.push(a), a() ? _.fx.start() : _.timers.pop()
            }, _.fx.interval = 13, _.fx.start = function() {
                Za || (Za = setInterval(_.fx.tick, _.fx.interval))
            }, _.fx.stop = function() {
                clearInterval(Za), Za = null
            }, _.fx.speeds = {
                slow: 600,
                fast: 200,
                _default: 400
            }, _.fn.delay = function(a, b) {
                return a = _.fx ? _.fx.speeds[a] || a : a, b = b || "fx", this.queue(b, function(b, c) {
                    var d = setTimeout(b, a);
                    c.stop = function() {
                        clearTimeout(d)
                    }
                })
            },
            function() {
                var a = Z.createElement("input"),
                    b = Z.createElement("select"),
                    c = b.appendChild(Z.createElement("option"));
                a.type = "checkbox", Y.checkOn = "" !== a.value, Y.optSelected = c.selected, b.disabled = !0, Y.optDisabled = !c.disabled, a = Z.createElement("input"), a.value = "t", a.type = "radio", Y.radioValue = "t" === a.value
            }();
        var db, eb, fb = _.expr.attrHandle;
        _.fn.extend({
            attr: function(a, b) {
                return qa(this, _.attr, a, b, arguments.length > 1)
            },
            removeAttr: function(a) {
                return this.each(function() {
                    _.removeAttr(this, a)
                })
            }
        }), _.extend({
            attr: function(a, b, c) {
                var d, e, f = a.nodeType;
                if (a && 3 !== f && 8 !== f && 2 !== f) return typeof a.getAttribute === za ? _.prop(a, b, c) : (1 === f && _.isXMLDoc(a) || (b = b.toLowerCase(), d = _.attrHooks[b] || (_.expr.match.bool.test(b) ? eb : db)), void 0 === c ? d && "get" in d && null !== (e = d.get(a, b)) ? e : (e = _.find.attr(a, b), null == e ? void 0 : e) : null !== c ? d && "set" in d && void 0 !== (e = d.set(a, c, b)) ? e : (a.setAttribute(b, c + ""), c) : void _.removeAttr(a, b))
            },
            removeAttr: function(a, b) {
                var c, d, e = 0,
                    f = b && b.match(na);
                if (f && 1 === a.nodeType)
                    for (; c = f[e++];) d = _.propFix[c] || c, _.expr.match.bool.test(c) && (a[d] = !1), a.removeAttribute(c)
            },
            attrHooks: {
                type: {
                    set: function(a, b) {
                        if (!Y.radioValue && "radio" === b && _.nodeName(a, "input")) {
                            var c = a.value;
                            return a.setAttribute("type", b), c && (a.value = c), b
                        }
                    }
                }
            }
        }), eb = {
            set: function(a, b, c) {
                return b === !1 ? _.removeAttr(a, c) : a.setAttribute(c, c), c
            }
        }, _.each(_.expr.match.bool.source.match(/\w+/g), function(a, b) {
            var c = fb[b] || _.find.attr;
            fb[b] = function(a, b, d) {
                var e, f;
                return d || (f = fb[b], fb[b] = e, e = null != c(a, b, d) ? b.toLowerCase() : null, fb[b] = f), e
            }
        });
        var gb = /^(?:input|select|textarea|button)$/i;
        _.fn.extend({
            prop: function(a, b) {
                return qa(this, _.prop, a, b, arguments.length > 1)
            },
            removeProp: function(a) {
                return this.each(function() {
                    delete this[_.propFix[a] || a]
                })
            }
        }), _.extend({
            propFix: {
                "for": "htmlFor",
                "class": "className"
            },
            prop: function(a, b, c) {
                var d, e, f, g = a.nodeType;
                if (a && 3 !== g && 8 !== g && 2 !== g) return f = 1 !== g || !_.isXMLDoc(a), f && (b = _.propFix[b] || b, e = _.propHooks[b]), void 0 !== c ? e && "set" in e && void 0 !== (d = e.set(a, c, b)) ? d : a[b] = c : e && "get" in e && null !== (d = e.get(a, b)) ? d : a[b]
            },
            propHooks: {
                tabIndex: {
                    get: function(a) {
                        return a.hasAttribute("tabindex") || gb.test(a.nodeName) || a.href ? a.tabIndex : -1
                    }
                }
            }
        }), Y.optSelected || (_.propHooks.selected = {
            get: function(a) {
                var b = a.parentNode;
                return b && b.parentNode && b.parentNode.selectedIndex, null
            }
        }), _.each(["tabIndex", "readOnly", "maxLength", "cellSpacing", "cellPadding", "rowSpan", "colSpan", "useMap", "frameBorder", "contentEditable"], function() {
            _.propFix[this.toLowerCase()] = this
        });
        var hb = /[\t\r\n\f]/g;
        _.fn.extend({
            addClass: function(a) {
                var b, c, d, e, f, g, h = "string" == typeof a && a,
                    i = 0,
                    j = this.length;
                if (_.isFunction(a)) return this.each(function(b) {
                    _(this).addClass(a.call(this, b, this.className))
                });
                if (h)
                    for (b = (a || "").match(na) || []; j > i; i++)
                        if (c = this[i], d = 1 === c.nodeType && (c.className ? (" " + c.className + " ").replace(hb, " ") : " ")) {
                            for (f = 0; e = b[f++];) d.indexOf(" " + e + " ") < 0 && (d += e + " ");
                            g = _.trim(d), c.className !== g && (c.className = g)
                        }
                return this
            },
            removeClass: function(a) {
                var b, c, d, e, f, g, h = 0 === arguments.length || "string" == typeof a && a,
                    i = 0,
                    j = this.length;
                if (_.isFunction(a)) return this.each(function(b) {
                    _(this).removeClass(a.call(this, b, this.className))
                });
                if (h)
                    for (b = (a || "").match(na) || []; j > i; i++)
                        if (c = this[i], d = 1 === c.nodeType && (c.className ? (" " + c.className + " ").replace(hb, " ") : "")) {
                            for (f = 0; e = b[f++];)
                                for (; d.indexOf(" " + e + " ") >= 0;) d = d.replace(" " + e + " ", " ");
                            g = a ? _.trim(d) : "", c.className !== g && (c.className = g)
                        }
                return this
            },
            toggleClass: function(a, b) {
                var c = typeof a;
                return "boolean" == typeof b && "string" === c ? b ? this.addClass(a) : this.removeClass(a) : this.each(_.isFunction(a) ? function(c) {
                    _(this).toggleClass(a.call(this, c, this.className, b), b)
                } : function() {
                    if ("string" === c)
                        for (var b, d = 0, e = _(this), f = a.match(na) || []; b = f[d++];) e.hasClass(b) ? e.removeClass(b) : e.addClass(b);
                    else(c === za || "boolean" === c) && (this.className && ra.set(this, "__className__", this.className), this.className = this.className || a === !1 ? "" : ra.get(this, "__className__") || "")
                })
            },
            hasClass: function(a) {
                for (var b = " " + a + " ", c = 0, d = this.length; d > c; c++)
                    if (1 === this[c].nodeType && (" " + this[c].className + " ").replace(hb, " ").indexOf(b) >= 0) return !0;
                return !1
            }
        });
        var ib = /\r/g;
        _.fn.extend({
            val: function(a) {
                var b, c, d, e = this[0]; {
                    if (arguments.length) return d = _.isFunction(a), this.each(function(c) {
                        var e;
                        1 === this.nodeType && (e = d ? a.call(this, c, _(this).val()) : a, null == e ? e = "" : "number" == typeof e ? e += "" : _.isArray(e) && (e = _.map(e, function(a) {
                            return null == a ? "" : a + ""
                        })), b = _.valHooks[this.type] || _.valHooks[this.nodeName.toLowerCase()], b && "set" in b && void 0 !== b.set(this, e, "value") || (this.value = e))
                    });
                    if (e) return b = _.valHooks[e.type] || _.valHooks[e.nodeName.toLowerCase()], b && "get" in b && void 0 !== (c = b.get(e, "value")) ? c : (c = e.value, "string" == typeof c ? c.replace(ib, "") : null == c ? "" : c)
                }
            }
        }), _.extend({
            valHooks: {
                option: {
                    get: function(a) {
                        var b = _.find.attr(a, "value");
                        return null != b ? b : _.trim(_.text(a))
                    }
                },
                select: {
                    get: function(a) {
                        for (var b, c, d = a.options, e = a.selectedIndex, f = "select-one" === a.type || 0 > e, g = f ? null : [], h = f ? e + 1 : d.length, i = 0 > e ? h : f ? e : 0; h > i; i++)
                            if (c = d[i], !(!c.selected && i !== e || (Y.optDisabled ? c.disabled : null !== c.getAttribute("disabled")) || c.parentNode.disabled && _.nodeName(c.parentNode, "optgroup"))) {
                                if (b = _(c).val(), f) return b;
                                g.push(b)
                            }
                        return g
                    },
                    set: function(a, b) {
                        for (var c, d, e = a.options, f = _.makeArray(b), g = e.length; g--;) d = e[g], (d.selected = _.inArray(d.value, f) >= 0) && (c = !0);
                        return c || (a.selectedIndex = -1), f
                    }
                }
            }
        }), _.each(["radio", "checkbox"], function() {
            _.valHooks[this] = {
                set: function(a, b) {
                    return _.isArray(b) ? a.checked = _.inArray(_(a).val(), b) >= 0 : void 0
                }
            }, Y.checkOn || (_.valHooks[this].get = function(a) {
                return null === a.getAttribute("value") ? "on" : a.value
            })
        }), _.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "), function(a, b) {
            _.fn[b] = function(a, c) {
                return arguments.length > 0 ? this.on(b, null, a, c) : this.trigger(b)
            }
        }), _.fn.extend({
            hover: function(a, b) {
                return this.mouseenter(a).mouseleave(b || a)
            },
            bind: function(a, b, c) {
                return this.on(a, null, b, c)
            },
            unbind: function(a, b) {
                return this.off(a, null, b)
            },
            delegate: function(a, b, c, d) {
                return this.on(b, a, c, d)
            },
            undelegate: function(a, b, c) {
                return 1 === arguments.length ? this.off(a, "**") : this.off(b, a || "**", c)
            }
        });
        var jb = _.now(),
            kb = /\?/;
        _.parseJSON = function(a) {
            return JSON.parse(a + "")
        }, _.parseXML = function(a) {
            var b, c;
            if (!a || "string" != typeof a) return null;
            try {
                c = new DOMParser, b = c.parseFromString(a, "text/xml")
            } catch (d) {
                b = void 0
            }
            return (!b || b.getElementsByTagName("parsererror").length) && _.error("Invalid XML: " + a), b
        };
        var lb, mb, nb = /#.*$/,
            ob = /([?&])_=[^&]*/,
            pb = /^(.*?):[ \t]*([^\r\n]*)$/gm,
            qb = /^(?:about|app|app-storage|.+-extension|file|res|widget):$/,
            rb = /^(?:GET|HEAD)$/,
            sb = /^\/\//,
            tb = /^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,
            ub = {},
            vb = {},
            wb = "*/".concat("*");
        try {
            mb = location.href
        } catch (xb) {
            mb = Z.createElement("a"), mb.href = "", mb = mb.href
        }
        lb = tb.exec(mb.toLowerCase()) || [], _.extend({
            active: 0,
            lastModified: {},
            etag: {},
            ajaxSettings: {
                url: mb,
                type: "GET",
                isLocal: qb.test(lb[1]),
                global: !0,
                processData: !0,
                async: !0,
                contentType: "application/x-www-form-urlencoded; charset=UTF-8",
                accepts: {
                    "*": wb,
                    text: "text/plain",
                    html: "text/html",
                    xml: "application/xml, text/xml",
                    json: "application/json, text/javascript"
                },
                contents: {
                    xml: /xml/,
                    html: /html/,
                    json: /json/
                },
                responseFields: {
                    xml: "responseXML",
                    text: "responseText",
                    json: "responseJSON"
                },
                converters: {
                    "* text": String,
                    "text html": !0,
                    "text json": _.parseJSON,
                    "text xml": _.parseXML
                },
                flatOptions: {
                    url: !0,
                    context: !0
                }
            },
            ajaxSetup: function(a, b) {
                return b ? L(L(a, _.ajaxSettings), b) : L(_.ajaxSettings, a)
            },
            ajaxPrefilter: J(ub),
            ajaxTransport: J(vb),
            ajax: function(a, b) {
                function c(a, b, c, g) {
                    var i, k, r, s, u, w = b;
                    2 !== t && (t = 2, h && clearTimeout(h), d = void 0, f = g || "", v.readyState = a > 0 ? 4 : 0, i = a >= 200 && 300 > a || 304 === a, c && (s = M(l, v, c)), s = N(l, s, v, i), i ? (l.ifModified && (u = v.getResponseHeader("Last-Modified"), u && (_.lastModified[e] = u), u = v.getResponseHeader("etag"), u && (_.etag[e] = u)), 204 === a || "HEAD" === l.type ? w = "nocontent" : 304 === a ? w = "notmodified" : (w = s.state, k = s.data, r = s.error, i = !r)) : (r = w, (a || !w) && (w = "error", 0 > a && (a = 0))), v.status = a, v.statusText = (b || w) + "", i ? o.resolveWith(m, [k, w, v]) : o.rejectWith(m, [v, w, r]), v.statusCode(q), q = void 0, j && n.trigger(i ? "ajaxSuccess" : "ajaxError", [v, l, i ? k : r]), p.fireWith(m, [v, w]), j && (n.trigger("ajaxComplete", [v, l]), --_.active || _.event.trigger("ajaxStop")))
                }
                "object" == typeof a && (b = a, a = void 0), b = b || {};
                var d, e, f, g, h, i, j, k, l = _.ajaxSetup({}, b),
                    m = l.context || l,
                    n = l.context && (m.nodeType || m.jquery) ? _(m) : _.event,
                    o = _.Deferred(),
                    p = _.Callbacks("once memory"),
                    q = l.statusCode || {},
                    r = {},
                    s = {},
                    t = 0,
                    u = "canceled",
                    v = {
                        readyState: 0,
                        getResponseHeader: function(a) {
                            var b;
                            if (2 === t) {
                                if (!g)
                                    for (g = {}; b = pb.exec(f);) g[b[1].toLowerCase()] = b[2];
                                b = g[a.toLowerCase()]
                            }
                            return null == b ? null : b
                        },
                        getAllResponseHeaders: function() {
                            return 2 === t ? f : null
                        },
                        setRequestHeader: function(a, b) {
                            var c = a.toLowerCase();
                            return t || (a = s[c] = s[c] || a, r[a] = b), this
                        },
                        overrideMimeType: function(a) {
                            return t || (l.mimeType = a), this
                        },
                        statusCode: function(a) {
                            var b;
                            if (a)
                                if (2 > t)
                                    for (b in a) q[b] = [q[b], a[b]];
                                else v.always(a[v.status]);
                            return this
                        },
                        abort: function(a) {
                            var b = a || u;
                            return d && d.abort(b), c(0, b), this
                        }
                    };
                if (o.promise(v).complete = p.add, v.success = v.done, v.error = v.fail, l.url = ((a || l.url || mb) + "").replace(nb, "").replace(sb, lb[1] + "//"), l.type = b.method || b.type || l.method || l.type, l.dataTypes = _.trim(l.dataType || "*").toLowerCase().match(na) || [""], null == l.crossDomain && (i = tb.exec(l.url.toLowerCase()), l.crossDomain = !(!i || i[1] === lb[1] && i[2] === lb[2] && (i[3] || ("http:" === i[1] ? "80" : "443")) === (lb[3] || ("http:" === lb[1] ? "80" : "443")))), l.data && l.processData && "string" != typeof l.data && (l.data = _.param(l.data, l.traditional)), K(ub, l, b, v), 2 === t) return v;
                j = l.global, j && 0 === _.active++ && _.event.trigger("ajaxStart"), l.type = l.type.toUpperCase(), l.hasContent = !rb.test(l.type), e = l.url, l.hasContent || (l.data && (e = l.url += (kb.test(e) ? "&" : "?") + l.data, delete l.data), l.cache === !1 && (l.url = ob.test(e) ? e.replace(ob, "$1_=" + jb++) : e + (kb.test(e) ? "&" : "?") + "_=" + jb++)), l.ifModified && (_.lastModified[e] && v.setRequestHeader("If-Modified-Since", _.lastModified[e]), _.etag[e] && v.setRequestHeader("If-None-Match", _.etag[e])), (l.data && l.hasContent && l.contentType !== !1 || b.contentType) && v.setRequestHeader("Content-Type", l.contentType), v.setRequestHeader("Accept", l.dataTypes[0] && l.accepts[l.dataTypes[0]] ? l.accepts[l.dataTypes[0]] + ("*" !== l.dataTypes[0] ? ", " + wb + "; q=0.01" : "") : l.accepts["*"]);
                for (k in l.headers) v.setRequestHeader(k, l.headers[k]);
                if (l.beforeSend && (l.beforeSend.call(m, v, l) === !1 || 2 === t)) return v.abort();
                u = "abort";
                for (k in {
                        success: 1,
                        error: 1,
                        complete: 1
                    }) v[k](l[k]);
                if (d = K(vb, l, b, v)) {
                    v.readyState = 1, j && n.trigger("ajaxSend", [v, l]), l.async && l.timeout > 0 && (h = setTimeout(function() {
                        v.abort("timeout")
                    }, l.timeout));
                    try {
                        t = 1, d.send(r, c)
                    } catch (w) {
                        if (!(2 > t)) throw w;
                        c(-1, w)
                    }
                } else c(-1, "No Transport");
                return v
            },
            getJSON: function(a, b, c) {
                return _.get(a, b, c, "json")
            },
            getScript: function(a, b) {
                return _.get(a, void 0, b, "script")
            }
        }), _.each(["get", "post"], function(a, b) {
            _[b] = function(a, c, d, e) {
                return _.isFunction(c) && (e = e || d, d = c, c = void 0), _.ajax({
                    url: a,
                    type: b,
                    dataType: e,
                    data: c,
                    success: d
                })
            }
        }), _.each(["ajaxStart", "ajaxStop", "ajaxComplete", "ajaxError", "ajaxSuccess", "ajaxSend"], function(a, b) {
            _.fn[b] = function(a) {
                return this.on(b, a)
            }
        }), _._evalUrl = function(a) {
            return _.ajax({
                url: a,
                type: "GET",
                dataType: "script",
                async: !1,
                global: !1,
                "throws": !0
            })
        }, _.fn.extend({
            wrapAll: function(a) {
                var b;
                return _.isFunction(a) ? this.each(function(b) {
                    _(this).wrapAll(a.call(this, b))
                }) : (this[0] && (b = _(a, this[0].ownerDocument).eq(0).clone(!0), this[0].parentNode && b.insertBefore(this[0]), b.map(function() {
                    for (var a = this; a.firstElementChild;) a = a.firstElementChild;
                    return a
                }).append(this)), this)
            },
            wrapInner: function(a) {
                return this.each(_.isFunction(a) ? function(b) {
                    _(this).wrapInner(a.call(this, b))
                } : function() {
                    var b = _(this),
                        c = b.contents();
                    c.length ? c.wrapAll(a) : b.append(a)
                })
            },
            wrap: function(a) {
                var b = _.isFunction(a);
                return this.each(function(c) {
                    _(this).wrapAll(b ? a.call(this, c) : a)
                })
            },
            unwrap: function() {
                return this.parent().each(function() {
                    _.nodeName(this, "body") || _(this).replaceWith(this.childNodes)
                }).end()
            }
        }), _.expr.filters.hidden = function(a) {
            return a.offsetWidth <= 0 && a.offsetHeight <= 0
        }, _.expr.filters.visible = function(a) {
            return !_.expr.filters.hidden(a)
        };
        var yb = /%20/g,
            zb = /\[\]$/,
            Ab = /\r?\n/g,
            Bb = /^(?:submit|button|image|reset|file)$/i,
            Cb = /^(?:input|select|textarea|keygen)/i;
        _.param = function(a, b) {
            var c, d = [],
                e = function(a, b) {
                    b = _.isFunction(b) ? b() : null == b ? "" : b, d[d.length] = encodeURIComponent(a) + "=" + encodeURIComponent(b)
                };
            if (void 0 === b && (b = _.ajaxSettings && _.ajaxSettings.traditional), _.isArray(a) || a.jquery && !_.isPlainObject(a)) _.each(a, function() {
                e(this.name, this.value)
            });
            else
                for (c in a) O(c, a[c], b, e);
            return d.join("&").replace(yb, "+")
        }, _.fn.extend({
            serialize: function() {
                return _.param(this.serializeArray())
            },
            serializeArray: function() {
                return this.map(function() {
                    var a = _.prop(this, "elements");
                    return a ? _.makeArray(a) : this
                }).filter(function() {
                    var a = this.type;
                    return this.name && !_(this).is(":disabled") && Cb.test(this.nodeName) && !Bb.test(a) && (this.checked || !ya.test(a))
                }).map(function(a, b) {
                    var c = _(this).val();
                    return null == c ? null : _.isArray(c) ? _.map(c, function(a) {
                        return {
                            name: b.name,
                            value: a.replace(Ab, "\r\n")
                        }
                    }) : {
                        name: b.name,
                        value: c.replace(Ab, "\r\n")
                    }
                }).get()
            }
        }), _.ajaxSettings.xhr = function() {
            try {
                return new XMLHttpRequest
            } catch (a) {}
        };
        var Db = 0,
            Eb = {},
            Fb = {
                0: 200,
                1223: 204
            },
            Gb = _.ajaxSettings.xhr();
        a.ActiveXObject && _(a).on("unload", function() {
            for (var a in Eb) Eb[a]()
        }), Y.cors = !!Gb && "withCredentials" in Gb, Y.ajax = Gb = !!Gb, _.ajaxTransport(function(a) {
            var b;
            return Y.cors || Gb && !a.crossDomain ? {
                send: function(c, d) {
                    var e, f = a.xhr(),
                        g = ++Db;
                    if (f.open(a.type, a.url, a.async, a.username, a.password), a.xhrFields)
                        for (e in a.xhrFields) f[e] = a.xhrFields[e];
                    a.mimeType && f.overrideMimeType && f.overrideMimeType(a.mimeType), a.crossDomain || c["X-Requested-With"] || (c["X-Requested-With"] = "XMLHttpRequest");
                    for (e in c) f.setRequestHeader(e, c[e]);
                    b = function(a) {
                        return function() {
                            b && (delete Eb[g], b = f.onload = f.onerror = null, "abort" === a ? f.abort() : "error" === a ? d(f.status, f.statusText) : d(Fb[f.status] || f.status, f.statusText, "string" == typeof f.responseText ? {
                                text: f.responseText
                            } : void 0, f.getAllResponseHeaders()))
                        }
                    }, f.onload = b(), f.onerror = b("error"), b = Eb[g] = b("abort");
                    try {
                        f.send(a.hasContent && a.data || null)
                    } catch (h) {
                        if (b) throw h
                    }
                },
                abort: function() {
                    b && b()
                }
            } : void 0
        }), _.ajaxSetup({
            accepts: {
                script: "text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"
            },
            contents: {
                script: /(?:java|ecma)script/
            },
            converters: {
                "text script": function(a) {
                    return _.globalEval(a), a
                }
            }
        }), _.ajaxPrefilter("script", function(a) {
            void 0 === a.cache && (a.cache = !1), a.crossDomain && (a.type = "GET")
        }), _.ajaxTransport("script", function(a) {
            if (a.crossDomain) {
                var b, c;
                return {
                    send: function(d, e) {
                        b = _("<script>").prop({
                            async: !0,
                            charset: a.scriptCharset,
                            src: a.url
                        }).on("load error", c = function(a) {
                            b.remove(), c = null, a && e("error" === a.type ? 404 : 200, a.type)
                        }), Z.head.appendChild(b[0])
                    },
                    abort: function() {
                        c && c()
                    }
                }
            }
        });
        var Hb = [],
            Ib = /(=)\?(?=&|$)|\?\?/;
        _.ajaxSetup({
            jsonp: "callback",
            jsonpCallback: function() {
                var a = Hb.pop() || _.expando + "_" + jb++;
                return this[a] = !0, a
            }
        }), _.ajaxPrefilter("json jsonp", function(b, c, d) {
            var e, f, g, h = b.jsonp !== !1 && (Ib.test(b.url) ? "url" : "string" == typeof b.data && !(b.contentType || "").indexOf("application/x-www-form-urlencoded") && Ib.test(b.data) && "data");
            return h || "jsonp" === b.dataTypes[0] ? (e = b.jsonpCallback = _.isFunction(b.jsonpCallback) ? b.jsonpCallback() : b.jsonpCallback, h ? b[h] = b[h].replace(Ib, "$1" + e) : b.jsonp !== !1 && (b.url += (kb.test(b.url) ? "&" : "?") + b.jsonp + "=" + e), b.converters["script json"] = function() {
                return g || _.error(e + " was not called"), g[0]
            }, b.dataTypes[0] = "json", f = a[e], a[e] = function() {
                g = arguments
            }, d.always(function() {
                a[e] = f, b[e] && (b.jsonpCallback = c.jsonpCallback, Hb.push(e)), g && _.isFunction(f) && f(g[0]), g = f = void 0
            }), "script") : void 0
        }), _.parseHTML = function(a, b, c) {
            if (!a || "string" != typeof a) return null;
            "boolean" == typeof b && (c = b, b = !1), b = b || Z;
            var d = ga.exec(a),
                e = !c && [];
            return d ? [b.createElement(d[1])] : (d = _.buildFragment([a], b, e), e && e.length && _(e).remove(), _.merge([], d.childNodes))
        };
        var Jb = _.fn.load;
        _.fn.load = function(a, b, c) {
            if ("string" != typeof a && Jb) return Jb.apply(this, arguments);
            var d, e, f, g = this,
                h = a.indexOf(" ");
            return h >= 0 && (d = _.trim(a.slice(h)), a = a.slice(0, h)), _.isFunction(b) ? (c = b, b = void 0) : b && "object" == typeof b && (e = "POST"), g.length > 0 && _.ajax({
                url: a,
                type: e,
                dataType: "html",
                data: b
            }).done(function(a) {
                f = arguments, g.html(d ? _("<div>").append(_.parseHTML(a)).find(d) : a)
            }).complete(c && function(a, b) {
                g.each(c, f || [a.responseText, b, a])
            }), this
        }, _.expr.filters.animated = function(a) {
            return _.grep(_.timers, function(b) {
                return a === b.elem
            }).length
        };
        var Kb = a.document.documentElement;
        _.offset = {
            setOffset: function(a, b, c) {
                var d, e, f, g, h, i, j, k = _.css(a, "position"),
                    l = _(a),
                    m = {};
                "static" === k && (a.style.position = "relative"), h = l.offset(), f = _.css(a, "top"), i = _.css(a, "left"), j = ("absolute" === k || "fixed" === k) && (f + i).indexOf("auto") > -1, j ? (d = l.position(), g = d.top, e = d.left) : (g = parseFloat(f) || 0, e = parseFloat(i) || 0), _.isFunction(b) && (b = b.call(a, c, h)), null != b.top && (m.top = b.top - h.top + g), null != b.left && (m.left = b.left - h.left + e), "using" in b ? b.using.call(a, m) : l.css(m)
            }
        }, _.fn.extend({
            offset: function(a) {
                if (arguments.length) return void 0 === a ? this : this.each(function(b) {
                    _.offset.setOffset(this, a, b)
                });
                var b, c, d = this[0],
                    e = {
                        top: 0,
                        left: 0
                    },
                    f = d && d.ownerDocument;
                if (f) return b = f.documentElement, _.contains(b, d) ? (typeof d.getBoundingClientRect !== za && (e = d.getBoundingClientRect()), c = P(f), {
                    top: e.top + c.pageYOffset - b.clientTop,
                    left: e.left + c.pageXOffset - b.clientLeft
                }) : e
            },
            position: function() {
                if (this[0]) {
                    var a, b, c = this[0],
                        d = {
                            top: 0,
                            left: 0
                        };
                    return "fixed" === _.css(c, "position") ? b = c.getBoundingClientRect() : (a = this.offsetParent(), b = this.offset(), _.nodeName(a[0], "html") || (d = a.offset()), d.top += _.css(a[0], "borderTopWidth", !0), d.left += _.css(a[0], "borderLeftWidth", !0)), {
                        top: b.top - d.top - _.css(c, "marginTop", !0),
                        left: b.left - d.left - _.css(c, "marginLeft", !0)
                    }
                }
            },
            offsetParent: function() {
                return this.map(function() {
                    for (var a = this.offsetParent || Kb; a && !_.nodeName(a, "html") && "static" === _.css(a, "position");) a = a.offsetParent;
                    return a || Kb
                })
            }
        }), _.each({
            scrollLeft: "pageXOffset",
            scrollTop: "pageYOffset"
        }, function(b, c) {
            var d = "pageYOffset" === c;
            _.fn[b] = function(e) {
                return qa(this, function(b, e, f) {
                    var g = P(b);
                    return void 0 === f ? g ? g[c] : b[e] : void(g ? g.scrollTo(d ? a.pageXOffset : f, d ? f : a.pageYOffset) : b[e] = f)
                }, b, e, arguments.length, null)
            }
        }), _.each(["top", "left"], function(a, b) {
            _.cssHooks[b] = w(Y.pixelPosition, function(a, c) {
                return c ? (c = v(a, b), Qa.test(c) ? _(a).position()[b] + "px" : c) : void 0
            })
        }), _.each({
            Height: "height",
            Width: "width"
        }, function(a, b) {
            _.each({
                padding: "inner" + a,
                content: b,
                "": "outer" + a
            }, function(c, d) {
                _.fn[d] = function(d, e) {
                    var f = arguments.length && (c || "boolean" != typeof d),
                        g = c || (d === !0 || e === !0 ? "margin" : "border");
                    return qa(this, function(b, c, d) {
                        var e;
                        return _.isWindow(b) ? b.document.documentElement["client" + a] : 9 === b.nodeType ? (e = b.documentElement, Math.max(b.body["scroll" + a], e["scroll" + a], b.body["offset" + a], e["offset" + a], e["client" + a])) : void 0 === d ? _.css(b, c, g) : _.style(b, c, d, g)
                    }, b, f ? d : void 0, f, null)
                }
            })
        }), _.fn.size = function() {
            return this.length
        }, _.fn.andSelf = _.fn.addBack, "function" == typeof define && define.amd && define("jquery", [], function() {
            return _
        });
        var Lb = a.jQuery,
            Mb = a.$;
        return _.noConflict = function(b) {
            return a.$ === _ && (a.$ = Mb), b && a.jQuery === _ && (a.jQuery = Lb), _
        }, typeof b === za && (a.jQuery = a.$ = _), _
    }),
    function() {
        var a = this,
            b = a._,
            c = {},
            d = Array.prototype,
            e = Object.prototype,
            f = Function.prototype,
            g = d.push,
            h = d.slice,
            i = d.concat,
            j = e.toString,
            k = e.hasOwnProperty,
            l = d.forEach,
            m = d.map,
            n = d.reduce,
            o = d.reduceRight,
            p = d.filter,
            q = d.every,
            r = d.some,
            s = d.indexOf,
            t = d.lastIndexOf,
            u = Array.isArray,
            v = Object.keys,
            w = f.bind,
            x = function(a) {
                return a instanceof x ? a : this instanceof x ? void(this._wrapped = a) : new x(a)
            };
        "undefined" != typeof exports ? ("undefined" != typeof module && module.exports && (exports = module.exports = x), exports._ = x) : a._ = x, x.VERSION = "1.6.0";
        var y = x.each = x.forEach = function(a, b, d) {
            if (null == a) return a;
            if (l && a.forEach === l) a.forEach(b, d);
            else if (a.length === +a.length) {
                for (var e = 0, f = a.length; f > e; e++)
                    if (b.call(d, a[e], e, a) === c) return
            } else
                for (var g = x.keys(a), e = 0, f = g.length; f > e; e++)
                    if (b.call(d, a[g[e]], g[e], a) === c) return; return a
        };
        x.map = x.collect = function(a, b, c) {
            var d = [];
            return null == a ? d : m && a.map === m ? a.map(b, c) : (y(a, function(a, e, f) {
                d.push(b.call(c, a, e, f))
            }), d)
        };
        var z = "Reduce of empty array with no initial value";
        x.reduce = x.foldl = x.inject = function(a, b, c, d) {
            var e = arguments.length > 2;
            if (null == a && (a = []), n && a.reduce === n) return d && (b = x.bind(b, d)), e ? a.reduce(b, c) : a.reduce(b);
            if (y(a, function(a, f, g) {
                    e ? c = b.call(d, c, a, f, g) : (c = a, e = !0)
                }), !e) throw new TypeError(z);
            return c
        }, x.reduceRight = x.foldr = function(a, b, c, d) {
            var e = arguments.length > 2;
            if (null == a && (a = []), o && a.reduceRight === o) return d && (b = x.bind(b, d)), e ? a.reduceRight(b, c) : a.reduceRight(b);
            var f = a.length;
            if (f !== +f) {
                var g = x.keys(a);
                f = g.length
            }
            if (y(a, function(h, i, j) {
                    i = g ? g[--f] : --f, e ? c = b.call(d, c, a[i], i, j) : (c = a[i], e = !0)
                }), !e) throw new TypeError(z);
            return c
        }, x.find = x.detect = function(a, b, c) {
            var d;
            return A(a, function(a, e, f) {
                return b.call(c, a, e, f) ? (d = a, !0) : void 0
            }), d
        }, x.filter = x.select = function(a, b, c) {
            var d = [];
            return null == a ? d : p && a.filter === p ? a.filter(b, c) : (y(a, function(a, e, f) {
                b.call(c, a, e, f) && d.push(a)
            }), d)
        }, x.reject = function(a, b, c) {
            return x.filter(a, function(a, d, e) {
                return !b.call(c, a, d, e)
            }, c)
        }, x.every = x.all = function(a, b, d) {
            b || (b = x.identity);
            var e = !0;
            return null == a ? e : q && a.every === q ? a.every(b, d) : (y(a, function(a, f, g) {
                return (e = e && b.call(d, a, f, g)) ? void 0 : c
            }), !!e)
        };
        var A = x.some = x.any = function(a, b, d) {
            b || (b = x.identity);
            var e = !1;
            return null == a ? e : r && a.some === r ? a.some(b, d) : (y(a, function(a, f, g) {
                return e || (e = b.call(d, a, f, g)) ? c : void 0
            }), !!e)
        };
        x.contains = x.include = function(a, b) {
            return null == a ? !1 : s && a.indexOf === s ? -1 != a.indexOf(b) : A(a, function(a) {
                return a === b
            })
        }, x.invoke = function(a, b) {
            var c = h.call(arguments, 2),
                d = x.isFunction(b);
            return x.map(a, function(a) {
                return (d ? b : a[b]).apply(a, c)
            })
        }, x.pluck = function(a, b) {
            return x.map(a, x.property(b))
        }, x.where = function(a, b) {
            return x.filter(a, x.matches(b))
        }, x.findWhere = function(a, b) {
            return x.find(a, x.matches(b))
        }, x.max = function(a, b, c) {
            if (!b && x.isArray(a) && a[0] === +a[0] && a.length < 65535) return Math.max.apply(Math, a);
            var d = -(1 / 0),
                e = -(1 / 0);
            return y(a, function(a, f, g) {
                var h = b ? b.call(c, a, f, g) : a;
                h > e && (d = a, e = h)
            }), d
        }, x.min = function(a, b, c) {
            if (!b && x.isArray(a) && a[0] === +a[0] && a.length < 65535) return Math.min.apply(Math, a);
            var d = 1 / 0,
                e = 1 / 0;
            return y(a, function(a, f, g) {
                var h = b ? b.call(c, a, f, g) : a;
                e > h && (d = a, e = h)
            }), d
        }, x.shuffle = function(a) {
            var b, c = 0,
                d = [];
            return y(a, function(a) {
                b = x.random(c++), d[c - 1] = d[b], d[b] = a
            }), d
        }, x.sample = function(a, b, c) {
            return null == b || c ? (a.length !== +a.length && (a = x.values(a)), a[x.random(a.length - 1)]) : x.shuffle(a).slice(0, Math.max(0, b))
        };
        var B = function(a) {
            return null == a ? x.identity : x.isFunction(a) ? a : x.property(a)
        };
        x.sortBy = function(a, b, c) {
            return b = B(b), x.pluck(x.map(a, function(a, d, e) {
                return {
                    value: a,
                    index: d,
                    criteria: b.call(c, a, d, e)
                }
            }).sort(function(a, b) {
                var c = a.criteria,
                    d = b.criteria;
                if (c !== d) {
                    if (c > d || void 0 === c) return 1;
                    if (d > c || void 0 === d) return -1
                }
                return a.index - b.index
            }), "value")
        };
        var C = function(a) {
            return function(b, c, d) {
                var e = {};
                return c = B(c), y(b, function(f, g) {
                    var h = c.call(d, f, g, b);
                    a(e, h, f)
                }), e
            }
        };
        x.groupBy = C(function(a, b, c) {
            x.has(a, b) ? a[b].push(c) : a[b] = [c]
        }), x.indexBy = C(function(a, b, c) {
            a[b] = c
        }), x.countBy = C(function(a, b) {
            x.has(a, b) ? a[b]++ : a[b] = 1
        }), x.sortedIndex = function(a, b, c, d) {
            c = B(c);
            for (var e = c.call(d, b), f = 0, g = a.length; g > f;) {
                var h = f + g >>> 1;
                c.call(d, a[h]) < e ? f = h + 1 : g = h
            }
            return f
        }, x.toArray = function(a) {
            return a ? x.isArray(a) ? h.call(a) : a.length === +a.length ? x.map(a, x.identity) : x.values(a) : []
        }, x.size = function(a) {
            return null == a ? 0 : a.length === +a.length ? a.length : x.keys(a).length
        }, x.first = x.head = x.take = function(a, b, c) {
            return null == a ? void 0 : null == b || c ? a[0] : 0 > b ? [] : h.call(a, 0, b)
        }, x.initial = function(a, b, c) {
            return h.call(a, 0, a.length - (null == b || c ? 1 : b))
        }, x.last = function(a, b, c) {
            return null == a ? void 0 : null == b || c ? a[a.length - 1] : h.call(a, Math.max(a.length - b, 0))
        }, x.rest = x.tail = x.drop = function(a, b, c) {
            return h.call(a, null == b || c ? 1 : b)
        }, x.compact = function(a) {
            return x.filter(a, x.identity)
        };
        var D = function(a, b, c) {
            return b && x.every(a, x.isArray) ? i.apply(c, a) : (y(a, function(a) {
                x.isArray(a) || x.isArguments(a) ? b ? g.apply(c, a) : D(a, b, c) : c.push(a)
            }), c)
        };
        x.flatten = function(a, b) {
            return D(a, b, [])
        }, x.without = function(a) {
            return x.difference(a, h.call(arguments, 1))
        }, x.partition = function(a, b) {
            var c = [],
                d = [];
            return y(a, function(a) {
                (b(a) ? c : d).push(a)
            }), [c, d]
        }, x.uniq = x.unique = function(a, b, c, d) {
            x.isFunction(b) && (d = c, c = b, b = !1);
            var e = c ? x.map(a, c, d) : a,
                f = [],
                g = [];
            return y(e, function(c, d) {
                (b ? d && g[g.length - 1] === c : x.contains(g, c)) || (g.push(c), f.push(a[d]))
            }), f
        }, x.union = function() {
            return x.uniq(x.flatten(arguments, !0))
        }, x.intersection = function(a) {
            var b = h.call(arguments, 1);
            return x.filter(x.uniq(a), function(a) {
                return x.every(b, function(b) {
                    return x.contains(b, a)
                })
            })
        }, x.difference = function(a) {
            var b = i.apply(d, h.call(arguments, 1));
            return x.filter(a, function(a) {
                return !x.contains(b, a)
            })
        }, x.zip = function() {
            for (var a = x.max(x.pluck(arguments, "length").concat(0)), b = new Array(a), c = 0; a > c; c++) b[c] = x.pluck(arguments, "" + c);
            return b
        }, x.object = function(a, b) {
            if (null == a) return {};
            for (var c = {}, d = 0, e = a.length; e > d; d++) b ? c[a[d]] = b[d] : c[a[d][0]] = a[d][1];
            return c
        }, x.indexOf = function(a, b, c) {
            if (null == a) return -1;
            var d = 0,
                e = a.length;
            if (c) {
                if ("number" != typeof c) return d = x.sortedIndex(a, b), a[d] === b ? d : -1;
                d = 0 > c ? Math.max(0, e + c) : c
            }
            if (s && a.indexOf === s) return a.indexOf(b, c);
            for (; e > d; d++)
                if (a[d] === b) return d;
            return -1
        }, x.lastIndexOf = function(a, b, c) {
            if (null == a) return -1;
            var d = null != c;
            if (t && a.lastIndexOf === t) return d ? a.lastIndexOf(b, c) : a.lastIndexOf(b);
            for (var e = d ? c : a.length; e--;)
                if (a[e] === b) return e;
            return -1
        }, x.range = function(a, b, c) {
            arguments.length <= 1 && (b = a || 0, a = 0), c = arguments[2] || 1;
            for (var d = Math.max(Math.ceil((b - a) / c), 0), e = 0, f = new Array(d); d > e;) f[e++] = a, a += c;
            return f
        };
        var E = function() {};
        x.bind = function(a, b) {
            var c, d;
            if (w && a.bind === w) return w.apply(a, h.call(arguments, 1));
            if (!x.isFunction(a)) throw new TypeError;
            return c = h.call(arguments, 2), d = function() {
                if (!(this instanceof d)) return a.apply(b, c.concat(h.call(arguments)));
                E.prototype = a.prototype;
                var e = new E;
                E.prototype = null;
                var f = a.apply(e, c.concat(h.call(arguments)));
                return Object(f) === f ? f : e
            }
        }, x.partial = function(a) {
            var b = h.call(arguments, 1);
            return function() {
                for (var c = 0, d = b.slice(), e = 0, f = d.length; f > e; e++) d[e] === x && (d[e] = arguments[c++]);
                for (; c < arguments.length;) d.push(arguments[c++]);
                return a.apply(this, d)
            }
        }, x.bindAll = function(a) {
            var b = h.call(arguments, 1);
            if (0 === b.length) throw new Error("bindAll must be passed function names");
            return y(b, function(b) {
                a[b] = x.bind(a[b], a)
            }), a
        }, x.memoize = function(a, b) {
            var c = {};
            return b || (b = x.identity),
                function() {
                    var d = b.apply(this, arguments);
                    return x.has(c, d) ? c[d] : c[d] = a.apply(this, arguments)
                }
        }, x.delay = function(a, b) {
            var c = h.call(arguments, 2);
            return setTimeout(function() {
                return a.apply(null, c)
            }, b)
        }, x.defer = function(a) {
            return x.delay.apply(x, [a, 1].concat(h.call(arguments, 1)))
        }, x.throttle = function(a, b, c) {
            var d, e, f, g = null,
                h = 0;
            c || (c = {});
            var i = function() {
                h = c.leading === !1 ? 0 : x.now(), g = null, f = a.apply(d, e), d = e = null
            };
            return function() {
                var j = x.now();
                h || c.leading !== !1 || (h = j);
                var k = b - (j - h);
                return d = this, e = arguments, 0 >= k ? (clearTimeout(g), g = null, h = j, f = a.apply(d, e), d = e = null) : g || c.trailing === !1 || (g = setTimeout(i, k)), f
            }
        }, x.debounce = function(a, b, c) {
            var d, e, f, g, h, i = function() {
                var j = x.now() - g;
                b > j ? d = setTimeout(i, b - j) : (d = null, c || (h = a.apply(f, e), f = e = null))
            };
            return function() {
                f = this, e = arguments, g = x.now();
                var j = c && !d;
                return d || (d = setTimeout(i, b)), j && (h = a.apply(f, e), f = e = null), h
            }
        }, x.once = function(a) {
            var b, c = !1;
            return function() {
                return c ? b : (c = !0, b = a.apply(this, arguments), a = null, b)
            }
        }, x.wrap = function(a, b) {
            return x.partial(b, a)
        }, x.compose = function() {
            var a = arguments;
            return function() {
                for (var b = arguments, c = a.length - 1; c >= 0; c--) b = [a[c].apply(this, b)];
                return b[0]
            }
        }, x.after = function(a, b) {
            return function() {
                return --a < 1 ? b.apply(this, arguments) : void 0
            }
        }, x.keys = function(a) {
            if (!x.isObject(a)) return [];
            if (v) return v(a);
            var b = [];
            for (var c in a) x.has(a, c) && b.push(c);
            return b
        }, x.values = function(a) {
            for (var b = x.keys(a), c = b.length, d = new Array(c), e = 0; c > e; e++) d[e] = a[b[e]];
            return d
        }, x.pairs = function(a) {
            for (var b = x.keys(a), c = b.length, d = new Array(c), e = 0; c > e; e++) d[e] = [b[e], a[b[e]]];
            return d
        }, x.invert = function(a) {
            for (var b = {}, c = x.keys(a), d = 0, e = c.length; e > d; d++) b[a[c[d]]] = c[d];
            return b
        }, x.functions = x.methods = function(a) {
            var b = [];
            for (var c in a) x.isFunction(a[c]) && b.push(c);
            return b.sort()
        }, x.extend = function(a) {
            return y(h.call(arguments, 1), function(b) {
                if (b)
                    for (var c in b) a[c] = b[c]
            }), a
        }, x.pick = function(a) {
            var b = {},
                c = i.apply(d, h.call(arguments, 1));
            return y(c, function(c) {
                c in a && (b[c] = a[c])
            }), b
        }, x.omit = function(a) {
            var b = {},
                c = i.apply(d, h.call(arguments, 1));
            for (var e in a) x.contains(c, e) || (b[e] = a[e]);
            return b
        }, x.defaults = function(a) {
            return y(h.call(arguments, 1), function(b) {
                if (b)
                    for (var c in b) void 0 === a[c] && (a[c] = b[c])
            }), a
        }, x.clone = function(a) {
            return x.isObject(a) ? x.isArray(a) ? a.slice() : x.extend({}, a) : a
        }, x.tap = function(a, b) {
            return b(a), a
        };
        var F = function(a, b, c, d) {
            if (a === b) return 0 !== a || 1 / a == 1 / b;
            if (null == a || null == b) return a === b;
            a instanceof x && (a = a._wrapped), b instanceof x && (b = b._wrapped);
            var e = j.call(a);
            if (e != j.call(b)) return !1;
            switch (e) {
                case "[object String]":
                    return a == String(b);
                case "[object Number]":
                    return a != +a ? b != +b : 0 == a ? 1 / a == 1 / b : a == +b;
                case "[object Date]":
                case "[object Boolean]":
                    return +a == +b;
                case "[object RegExp]":
                    return a.source == b.source && a.global == b.global && a.multiline == b.multiline && a.ignoreCase == b.ignoreCase
            }
            if ("object" != typeof a || "object" != typeof b) return !1;
            for (var f = c.length; f--;)
                if (c[f] == a) return d[f] == b;
            var g = a.constructor,
                h = b.constructor;
            if (g !== h && !(x.isFunction(g) && g instanceof g && x.isFunction(h) && h instanceof h) && "constructor" in a && "constructor" in b) return !1;
            c.push(a), d.push(b);
            var i = 0,
                k = !0;
            if ("[object Array]" == e) {
                if (i = a.length, k = i == b.length)
                    for (; i-- && (k = F(a[i], b[i], c, d)););
            } else {
                for (var l in a)
                    if (x.has(a, l) && (i++, !(k = x.has(b, l) && F(a[l], b[l], c, d)))) break;
                if (k) {
                    for (l in b)
                        if (x.has(b, l) && !i--) break;
                    k = !i
                }
            }
            return c.pop(), d.pop(), k
        };
        x.isEqual = function(a, b) {
            return F(a, b, [], [])
        }, x.isEmpty = function(a) {
            if (null == a) return !0;
            if (x.isArray(a) || x.isString(a)) return 0 === a.length;
            for (var b in a)
                if (x.has(a, b)) return !1;
            return !0
        }, x.isElement = function(a) {
            return !(!a || 1 !== a.nodeType)
        }, x.isArray = u || function(a) {
            return "[object Array]" == j.call(a)
        }, x.isObject = function(a) {
            return a === Object(a)
        }, y(["Arguments", "Function", "String", "Number", "Date", "RegExp"], function(a) {
            x["is" + a] = function(b) {
                return j.call(b) == "[object " + a + "]"
            }
        }), x.isArguments(arguments) || (x.isArguments = function(a) {
            return !(!a || !x.has(a, "callee"))
        }), "function" != typeof /./ && (x.isFunction = function(a) {
            return "function" == typeof a
        }), x.isFinite = function(a) {
            return isFinite(a) && !isNaN(parseFloat(a))
        }, x.isNaN = function(a) {
            return x.isNumber(a) && a != +a
        }, x.isBoolean = function(a) {
            return a === !0 || a === !1 || "[object Boolean]" == j.call(a)
        }, x.isNull = function(a) {
            return null === a
        }, x.isUndefined = function(a) {
            return void 0 === a
        }, x.has = function(a, b) {
            return k.call(a, b)
        }, x.noConflict = function() {
            return a._ = b, this
        }, x.identity = function(a) {
            return a
        }, x.constant = function(a) {
            return function() {
                return a
            }
        }, x.property = function(a) {
            return function(b) {
                return b[a]
            }
        }, x.matches = function(a) {
            return function(b) {
                if (b === a) return !0;
                for (var c in a)
                    if (a[c] !== b[c]) return !1;
                return !0
            }
        }, x.times = function(a, b, c) {
            for (var d = Array(Math.max(0, a)), e = 0; a > e; e++) d[e] = b.call(c, e);
            return d
        }, x.random = function(a, b) {
            return null == b && (b = a, a = 0), a + Math.floor(Math.random() * (b - a + 1))
        }, x.now = Date.now || function() {
            return (new Date).getTime()
        };
        var G = {
            escape: {
                "&": "&amp;",
                "<": "&lt;",
                ">": "&gt;",
                '"': "&quot;",
                "'": "&#x27;"
            }
        };
        G.unescape = x.invert(G.escape);
        var H = {
            escape: new RegExp("[" + x.keys(G.escape).join("") + "]", "g"),
            unescape: new RegExp("(" + x.keys(G.unescape).join("|") + ")", "g")
        };
        x.each(["escape", "unescape"], function(a) {
            x[a] = function(b) {
                return null == b ? "" : ("" + b).replace(H[a], function(b) {
                    return G[a][b]
                })
            }
        }), x.result = function(a, b) {
            if (null == a) return void 0;
            var c = a[b];
            return x.isFunction(c) ? c.call(a) : c
        }, x.mixin = function(a) {
            y(x.functions(a), function(b) {
                var c = x[b] = a[b];
                x.prototype[b] = function() {
                    var a = [this._wrapped];
                    return g.apply(a, arguments), M.call(this, c.apply(x, a))
                }
            })
        };
        var I = 0;
        x.uniqueId = function(a) {
            var b = ++I + "";
            return a ? a + b : b
        }, x.templateSettings = {
            evaluate: /<%([\s\S]+?)%>/g,
            interpolate: /<%=([\s\S]+?)%>/g,
            escape: /<%-([\s\S]+?)%>/g
        };
        var J = /(.)^/,
            K = {
                "'": "'",
                "\\": "\\",
                "\r": "r",
                "\n": "n",
                "	": "t",
                "\u2028": "u2028",
                "\u2029": "u2029"
            },
            L = /\\|'|\r|\n|\t|\u2028|\u2029/g;
        x.template = function(a, b, c) {
            var d;
            c = x.defaults({}, c, x.templateSettings);
            var e = new RegExp([(c.escape || J).source, (c.interpolate || J).source, (c.evaluate || J).source].join("|") + "|$", "g"),
                f = 0,
                g = "__p+='";
            a.replace(e, function(b, c, d, e, h) {
                return g += a.slice(f, h).replace(L, function(a) {
                    return "\\" + K[a]
                }), c && (g += "'+\n((__t=(" + c + "))==null?'':_.escape(__t))+\n'"), d && (g += "'+\n((__t=(" + d + "))==null?'':__t)+\n'"), e && (g += "';\n" + e + "\n__p+='"), f = h + b.length, b
            }), g += "';\n", c.variable || (g = "with(obj||{}){\n" + g + "}\n"), g = "var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n" + g + "return __p;\n";
            try {
                d = new Function(c.variable || "obj", "_", g)
            } catch (h) {
                throw h.source = g, h
            }
            if (b) return d(b, x);
            var i = function(a) {
                return d.call(this, a, x)
            };
            return i.source = "function(" + (c.variable || "obj") + "){\n" + g + "}", i
        }, x.chain = function(a) {
            return x(a).chain()
        };
        var M = function(a) {
            return this._chain ? x(a).chain() : a
        };
        x.mixin(x), y(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], function(a) {
            var b = d[a];
            x.prototype[a] = function() {
                var c = this._wrapped;
                return b.apply(c, arguments), "shift" != a && "splice" != a || 0 !== c.length || delete c[0], M.call(this, c)
            }
        }), y(["concat", "join", "slice"], function(a) {
            var b = d[a];
            x.prototype[a] = function() {
                return M.call(this, b.apply(this._wrapped, arguments))
            }
        }), x.extend(x.prototype, {
            chain: function() {
                return this._chain = !0, this
            },
            value: function() {
                return this._wrapped
            }
        }), "function" == typeof define && define.amd && define("underscore", [], function() {
            return x
        })
    }.call(this),
    function(a, b) {
        if ("function" == typeof define && define.amd) define("backbone", ["underscore", "jquery", "exports"], function(c, d, e) {
            a.Backbone = b(a, e, c, d)
        });
        else if ("undefined" != typeof exports) {
            var c = require("underscore");
            b(a, exports, c)
        } else a.Backbone = b(a, {}, a._, a.jQuery || a.Zepto || a.ender || a.$)
    }(this, function(a, b, c, d) {
        {
            var e = a.Backbone,
                f = [],
                g = (f.push, f.slice);
            f.splice
        }
        b.VERSION = "1.1.2", b.$ = d, b.noConflict = function() {
            return a.Backbone = e, this
        }, b.emulateHTTP = !1, b.emulateJSON = !1;
        var h = b.Events = {
                on: function(a, b, c) {
                    if (!j(this, "on", a, [b, c]) || !b) return this;
                    this._events || (this._events = {});
                    var d = this._events[a] || (this._events[a] = []);
                    return d.push({
                        callback: b,
                        context: c,
                        ctx: c || this
                    }), this
                },
                once: function(a, b, d) {
                    if (!j(this, "once", a, [b, d]) || !b) return this;
                    var e = this,
                        f = c.once(function() {
                            e.off(a, f), b.apply(this, arguments)
                        });
                    return f._callback = b, this.on(a, f, d)
                },
                off: function(a, b, d) {
                    var e, f, g, h, i, k, l, m;
                    if (!this._events || !j(this, "off", a, [b, d])) return this;
                    if (!a && !b && !d) return this._events = void 0, this;
                    for (h = a ? [a] : c.keys(this._events), i = 0, k = h.length; k > i; i++)
                        if (a = h[i], g = this._events[a]) {
                            if (this._events[a] = e = [], b || d)
                                for (l = 0, m = g.length; m > l; l++) f = g[l], (b && b !== f.callback && b !== f.callback._callback || d && d !== f.context) && e.push(f);
                            e.length || delete this._events[a]
                        }
                    return this
                },
                trigger: function(a) {
                    if (!this._events) return this;
                    var b = g.call(arguments, 1);
                    if (!j(this, "trigger", a, b)) return this;
                    var c = this._events[a],
                        d = this._events.all;
                    return c && k(c, b), d && k(d, arguments), this
                },
                stopListening: function(a, b, d) {
                    var e = this._listeningTo;
                    if (!e) return this;
                    var f = !b && !d;
                    d || "object" != typeof b || (d = this), a && ((e = {})[a._listenId] = a);
                    for (var g in e) a = e[g], a.off(b, d, this), (f || c.isEmpty(a._events)) && delete this._listeningTo[g];
                    return this
                }
            },
            i = /\s+/,
            j = function(a, b, c, d) {
                if (!c) return !0;
                if ("object" == typeof c) {
                    for (var e in c) a[b].apply(a, [e, c[e]].concat(d));
                    return !1
                }
                if (i.test(c)) {
                    for (var f = c.split(i), g = 0, h = f.length; h > g; g++) a[b].apply(a, [f[g]].concat(d));
                    return !1
                }
                return !0
            },
            k = function(a, b) {
                var c, d = -1,
                    e = a.length,
                    f = b[0],
                    g = b[1],
                    h = b[2];
                switch (b.length) {
                    case 0:
                        for (; ++d < e;)(c = a[d]).callback.call(c.ctx);
                        return;
                    case 1:
                        for (; ++d < e;)(c = a[d]).callback.call(c.ctx, f);
                        return;
                    case 2:
                        for (; ++d < e;)(c = a[d]).callback.call(c.ctx, f, g);
                        return;
                    case 3:
                        for (; ++d < e;)(c = a[d]).callback.call(c.ctx, f, g, h);
                        return;
                    default:
                        for (; ++d < e;)(c = a[d]).callback.apply(c.ctx, b);
                        return
                }
            },
            l = {
                listenTo: "on",
                listenToOnce: "once"
            };
        c.each(l, function(a, b) {
            h[b] = function(b, d, e) {
                var f = this._listeningTo || (this._listeningTo = {}),
                    g = b._listenId || (b._listenId = c.uniqueId("l"));
                return f[g] = b, e || "object" != typeof d || (e = this), b[a](d, e, this), this
            }
        }), h.bind = h.on, h.unbind = h.off, c.extend(b, h);
        var m = b.Model = function(a, b) {
            var d = a || {};
            b || (b = {}), this.cid = c.uniqueId("c"), this.attributes = {}, b.collection && (this.collection = b.collection), b.parse && (d = this.parse(d, b) || {}), d = c.defaults({}, d, c.result(this, "defaults")), this.set(d, b), this.changed = {}, this.initialize.apply(this, arguments)
        };
        c.extend(m.prototype, h, {
            changed: null,
            validationError: null,
            idAttribute: "id",
            initialize: function() {},
            toJSON: function() {
                return c.clone(this.attributes)
            },
            sync: function() {
                return b.sync.apply(this, arguments)
            },
            get: function(a) {
                return this.attributes[a]
            },
            escape: function(a) {
                return c.escape(this.get(a))
            },
            has: function(a) {
                return null != this.get(a)
            },
            set: function(a, b, d) {
                var e, f, g, h, i, j, k, l;
                if (null == a) return this;
                if ("object" == typeof a ? (f = a, d = b) : (f = {})[a] = b, d || (d = {}), !this._validate(f, d)) return !1;
                g = d.unset, i = d.silent, h = [], j = this._changing, this._changing = !0, j || (this._previousAttributes = c.clone(this.attributes), this.changed = {}), l = this.attributes, k = this._previousAttributes, this.idAttribute in f && (this.id = f[this.idAttribute]);
                for (e in f) b = f[e], c.isEqual(l[e], b) || h.push(e), c.isEqual(k[e], b) ? delete this.changed[e] : this.changed[e] = b, g ? delete l[e] : l[e] = b;
                if (!i) {
                    h.length && (this._pending = d);
                    for (var m = 0, n = h.length; n > m; m++) this.trigger("change:" + h[m], this, l[h[m]], d)
                }
                if (j) return this;
                if (!i)
                    for (; this._pending;) d = this._pending, this._pending = !1, this.trigger("change", this, d);
                return this._pending = !1, this._changing = !1, this
            },
            unset: function(a, b) {
                return this.set(a, void 0, c.extend({}, b, {
                    unset: !0
                }))
            },
            clear: function(a) {
                var b = {};
                for (var d in this.attributes) b[d] = void 0;
                return this.set(b, c.extend({}, a, {
                    unset: !0
                }))
            },
            hasChanged: function(a) {
                return null == a ? !c.isEmpty(this.changed) : c.has(this.changed, a)
            },
            changedAttributes: function(a) {
                if (!a) return this.hasChanged() ? c.clone(this.changed) : !1;
                var b, d = !1,
                    e = this._changing ? this._previousAttributes : this.attributes;
                for (var f in a) c.isEqual(e[f], b = a[f]) || ((d || (d = {}))[f] = b);
                return d
            },
            previous: function(a) {
                return null != a && this._previousAttributes ? this._previousAttributes[a] : null
            },
            previousAttributes: function() {
                return c.clone(this._previousAttributes)
            },
            fetch: function(a) {
                a = a ? c.clone(a) : {}, void 0 === a.parse && (a.parse = !0);
                var b = this,
                    d = a.success;
                return a.success = function(c) {
                    return b.set(b.parse(c, a), a) ? (d && d(b, c, a), void b.trigger("sync", b, c, a)) : !1
                }, L(this, a), this.sync("read", this, a)
            },
            save: function(a, b, d) {
                var e, f, g, h = this.attributes;
                if (null == a || "object" == typeof a ? (e = a, d = b) : (e = {})[a] = b, d = c.extend({
                        validate: !0
                    }, d), e && !d.wait) {
                    if (!this.set(e, d)) return !1
                } else if (!this._validate(e, d)) return !1;
                e && d.wait && (this.attributes = c.extend({}, h, e)), void 0 === d.parse && (d.parse = !0);
                var i = this,
                    j = d.success;
                return d.success = function(a) {
                    i.attributes = h;
                    var b = i.parse(a, d);
                    return d.wait && (b = c.extend(e || {}, b)), c.isObject(b) && !i.set(b, d) ? !1 : (j && j(i, a, d), void i.trigger("sync", i, a, d))
                }, L(this, d), f = this.isNew() ? "create" : d.patch ? "patch" : "update", "patch" === f && (d.attrs = e), g = this.sync(f, this, d), e && d.wait && (this.attributes = h), g
            },
            destroy: function(a) {
                a = a ? c.clone(a) : {};
                var b = this,
                    d = a.success,
                    e = function() {
                        b.trigger("destroy", b, b.collection, a)
                    };
                if (a.success = function(c) {
                        (a.wait || b.isNew()) && e(), d && d(b, c, a), b.isNew() || b.trigger("sync", b, c, a)
                    }, this.isNew()) return a.success(), !1;
                L(this, a);
                var f = this.sync("delete", this, a);
                return a.wait || e(), f
            },
            url: function() {
                var a = c.result(this, "urlRoot") || c.result(this.collection, "url") || K();
                return this.isNew() ? a : a.replace(/([^\/])$/, "$1/") + encodeURIComponent(this.id)
            },
            parse: function(a) {
                return a
            },
            clone: function() {
                return new this.constructor(this.attributes)
            },
            isNew: function() {
                return !this.has(this.idAttribute)
            },
            isValid: function(a) {
                return this._validate({}, c.extend(a || {}, {
                    validate: !0
                }))
            },
            _validate: function(a, b) {
                if (!b.validate || !this.validate) return !0;
                a = c.extend({}, this.attributes, a);
                var d = this.validationError = this.validate(a, b) || null;
                return d ? (this.trigger("invalid", this, d, c.extend(b, {
                    validationError: d
                })), !1) : !0
            }
        });
        var n = ["keys", "values", "pairs", "invert", "pick", "omit"];
        c.each(n, function(a) {
            m.prototype[a] = function() {
                var b = g.call(arguments);
                return b.unshift(this.attributes), c[a].apply(c, b)
            }
        });
        var o = b.Collection = function(a, b) {
                b || (b = {}), b.model && (this.model = b.model), void 0 !== b.comparator && (this.comparator = b.comparator), this._reset(), this.initialize.apply(this, arguments), a && this.reset(a, c.extend({
                    silent: !0
                }, b))
            },
            p = {
                add: !0,
                remove: !0,
                merge: !0
            },
            q = {
                add: !0,
                remove: !1
            };
        c.extend(o.prototype, h, {
            model: m,
            initialize: function() {},
            toJSON: function(a) {
                return this.map(function(b) {
                    return b.toJSON(a)
                })
            },
            sync: function() {
                return b.sync.apply(this, arguments)
            },
            add: function(a, b) {
                return this.set(a, c.extend({
                    merge: !1
                }, b, q))
            },
            remove: function(a, b) {
                var d = !c.isArray(a);
                a = d ? [a] : c.clone(a), b || (b = {});
                var e, f, g, h;
                for (e = 0, f = a.length; f > e; e++) h = a[e] = this.get(a[e]), h && (delete this._byId[h.id], delete this._byId[h.cid], g = this.indexOf(h), this.models.splice(g, 1), this.length--, b.silent || (b.index = g, h.trigger("remove", h, this, b)), this._removeReference(h, b));
                return d ? a[0] : a
            },
            set: function(a, b) {
                b = c.defaults({}, b, p), b.parse && (a = this.parse(a, b));
                var d = !c.isArray(a);
                a = d ? a ? [a] : [] : c.clone(a);
                var e, f, g, h, i, j, k, l = b.at,
                    n = this.model,
                    o = this.comparator && null == l && b.sort !== !1,
                    q = c.isString(this.comparator) ? this.comparator : null,
                    r = [],
                    s = [],
                    t = {},
                    u = b.add,
                    v = b.merge,
                    w = b.remove,
                    x = !o && u && w ? [] : !1;
                for (e = 0, f = a.length; f > e; e++) {
                    if (i = a[e] || {}, g = i instanceof m ? h = i : i[n.prototype.idAttribute || "id"], j = this.get(g)) w && (t[j.cid] = !0), v && (i = i === h ? h.attributes : i, b.parse && (i = j.parse(i, b)), j.set(i, b), o && !k && j.hasChanged(q) && (k = !0)), a[e] = j;
                    else if (u) {
                        if (h = a[e] = this._prepareModel(i, b), !h) continue;
                        r.push(h), this._addReference(h, b)
                    }
                    h = j || h, !x || !h.isNew() && t[h.id] || x.push(h), t[h.id] = !0
                }
                if (w) {
                    for (e = 0, f = this.length; f > e; ++e) t[(h = this.models[e]).cid] || s.push(h);
                    s.length && this.remove(s, b)
                }
                if (r.length || x && x.length)
                    if (o && (k = !0), this.length += r.length, null != l)
                        for (e = 0, f = r.length; f > e; e++) this.models.splice(l + e, 0, r[e]);
                    else {
                        x && (this.models.length = 0);
                        var y = x || r;
                        for (e = 0, f = y.length; f > e; e++) this.models.push(y[e])
                    }
                if (k && this.sort({
                        silent: !0
                    }), !b.silent) {
                    for (e = 0, f = r.length; f > e; e++)(h = r[e]).trigger("add", h, this, b);
                    (k || x && x.length) && this.trigger("sort", this, b)
                }
                return d ? a[0] : a
            },
            reset: function(a, b) {
                b || (b = {});
                for (var d = 0, e = this.models.length; e > d; d++) this._removeReference(this.models[d], b);
                return b.previousModels = this.models, this._reset(), a = this.add(a, c.extend({
                    silent: !0
                }, b)), b.silent || this.trigger("reset", this, b), a
            },
            push: function(a, b) {
                return this.add(a, c.extend({
                    at: this.length
                }, b))
            },
            pop: function(a) {
                var b = this.at(this.length - 1);
                return this.remove(b, a), b
            },
            unshift: function(a, b) {
                return this.add(a, c.extend({
                    at: 0
                }, b))
            },
            shift: function(a) {
                var b = this.at(0);
                return this.remove(b, a), b
            },
            slice: function() {
                return g.apply(this.models, arguments)
            },
            get: function(a) {
                return null == a ? void 0 : this._byId[a] || this._byId[a.id] || this._byId[a.cid]
            },
            at: function(a) {
                return this.models[a]
            },
            where: function(a, b) {
                return c.isEmpty(a) ? b ? void 0 : [] : this[b ? "find" : "filter"](function(b) {
                    for (var c in a)
                        if (a[c] !== b.get(c)) return !1;
                    return !0
                })
            },
            findWhere: function(a) {
                return this.where(a, !0)
            },
            sort: function(a) {
                if (!this.comparator) throw new Error("Cannot sort a set without a comparator");
                return a || (a = {}), c.isString(this.comparator) || 1 === this.comparator.length ? this.models = this.sortBy(this.comparator, this) : this.models.sort(c.bind(this.comparator, this)), a.silent || this.trigger("sort", this, a), this
            },
            pluck: function(a) {
                return c.invoke(this.models, "get", a)
            },
            fetch: function(a) {
                a = a ? c.clone(a) : {}, void 0 === a.parse && (a.parse = !0);
                var b = a.success,
                    d = this;
                return a.success = function(c) {
                    var e = a.reset ? "reset" : "set";
                    d[e](c, a), b && b(d, c, a), d.trigger("sync", d, c, a)
                }, L(this, a), this.sync("read", this, a)
            },
            create: function(a, b) {
                if (b = b ? c.clone(b) : {}, !(a = this._prepareModel(a, b))) return !1;
                b.wait || this.add(a, b);
                var d = this,
                    e = b.success;
                return b.success = function(a, c) {
                    b.wait && d.add(a, b), e && e(a, c, b)
                }, a.save(null, b), a
            },
            parse: function(a) {
                return a
            },
            clone: function() {
                return new this.constructor(this.models)
            },
            _reset: function() {
                this.length = 0, this.models = [], this._byId = {}
            },
            _prepareModel: function(a, b) {
                if (a instanceof m) return a;
                b = b ? c.clone(b) : {}, b.collection = this;
                var d = new this.model(a, b);
                return d.validationError ? (this.trigger("invalid", this, d.validationError, b), !1) : d
            },
            _addReference: function(a) {
                this._byId[a.cid] = a, null != a.id && (this._byId[a.id] = a), a.collection || (a.collection = this), a.on("all", this._onModelEvent, this)
            },
            _removeReference: function(a) {
                this === a.collection && delete a.collection, a.off("all", this._onModelEvent, this)
            },
            _onModelEvent: function(a, b, c, d) {
                ("add" !== a && "remove" !== a || c === this) && ("destroy" === a && this.remove(b, d), b && a === "change:" + b.idAttribute && (delete this._byId[b.previous(b.idAttribute)], null != b.id && (this._byId[b.id] = b)), this.trigger.apply(this, arguments))
            }
        });
        var r = ["forEach", "each", "map", "collect", "reduce", "foldl", "inject", "reduceRight", "foldr", "find", "detect", "filter", "select", "reject", "every", "all", "some", "any", "include", "contains", "invoke", "max", "min", "toArray", "size", "first", "head", "take", "initial", "rest", "tail", "drop", "last", "without", "difference", "indexOf", "shuffle", "lastIndexOf", "isEmpty", "chain", "sample"];
        c.each(r, function(a) {
            o.prototype[a] = function() {
                var b = g.call(arguments);
                return b.unshift(this.models), c[a].apply(c, b)
            }
        });
        var s = ["groupBy", "countBy", "sortBy", "indexBy"];
        c.each(s, function(a) {
            o.prototype[a] = function(b, d) {
                var e = c.isFunction(b) ? b : function(a) {
                    return a.get(b)
                };
                return c[a](this.models, e, d)
            }
        });
        var t = b.View = function(a) {
                this.cid = c.uniqueId("view"), a || (a = {}), c.extend(this, c.pick(a, v)), this._ensureElement(), this.initialize.apply(this, arguments), this.delegateEvents()
            },
            u = /^(\S+)\s*(.*)$/,
            v = ["model", "collection", "el", "id", "attributes", "className", "tagName", "events"];
        c.extend(t.prototype, h, {
            tagName: "div",
            $: function(a) {
                return this.$el.find(a)
            },
            initialize: function() {},
            render: function() {
                return this
            },
            remove: function() {
                return this.$el.remove(), this.stopListening(), this
            },
            setElement: function(a, c) {
                return this.$el && this.undelegateEvents(), this.$el = a instanceof b.$ ? a : b.$(a), this.el = this.$el[0], c !== !1 && this.delegateEvents(), this
            },
            delegateEvents: function(a) {
                if (!a && !(a = c.result(this, "events"))) return this;
                this.undelegateEvents();
                for (var b in a) {
                    var d = a[b];
                    if (c.isFunction(d) || (d = this[a[b]]), d) {
                        var e = b.match(u),
                            f = e[1],
                            g = e[2];
                        d = c.bind(d, this), f += ".delegateEvents" + this.cid, "" === g ? this.$el.on(f, d) : this.$el.on(f, g, d)
                    }
                }
                return this
            },
            undelegateEvents: function() {
                return this.$el.off(".delegateEvents" + this.cid), this
            },
            _ensureElement: function() {
                if (this.el) this.setElement(c.result(this, "el"), !1);
                else {
                    var a = c.extend({}, c.result(this, "attributes"));
                    this.id && (a.id = c.result(this, "id")), this.className && (a["class"] = c.result(this, "className"));
                    var d = b.$("<" + c.result(this, "tagName") + ">").attr(a);
                    this.setElement(d, !1)
                }
            }
        }), b.sync = function(a, d, e) {
            var f = x[a];
            c.defaults(e || (e = {}), {
                emulateHTTP: b.emulateHTTP,
                emulateJSON: b.emulateJSON
            });
            var g = {
                type: f,
                dataType: "json"
            };
            if (e.url || (g.url = c.result(d, "url") || K()), null != e.data || !d || "create" !== a && "update" !== a && "patch" !== a || (g.contentType = "application/json", g.data = JSON.stringify(e.attrs || d.toJSON(e))), e.emulateJSON && (g.contentType = "application/x-www-form-urlencoded", g.data = g.data ? {
                    model: g.data
                } : {}), e.emulateHTTP && ("PUT" === f || "DELETE" === f || "PATCH" === f)) {
                g.type = "POST", e.emulateJSON && (g.data._method = f);
                var h = e.beforeSend;
                e.beforeSend = function(a) {
                    return a.setRequestHeader("X-HTTP-Method-Override", f), h ? h.apply(this, arguments) : void 0
                }
            }
            "GET" === g.type || e.emulateJSON || (g.processData = !1), "PATCH" === g.type && w && (g.xhr = function() {
                return new ActiveXObject("Microsoft.XMLHTTP")
            });
            var i = e.xhr = b.ajax(c.extend(g, e));
            return d.trigger("request", d, i, e), i
        };
        var w = !("undefined" == typeof window || !window.ActiveXObject || window.XMLHttpRequest && (new XMLHttpRequest).dispatchEvent),
            x = {
                create: "POST",
                update: "PUT",
                patch: "PATCH",
                "delete": "DELETE",
                read: "GET"
            };
        b.ajax = function() {
            return b.$.ajax.apply(b.$, arguments)
        };
        var y = b.Router = function(a) {
                a || (a = {}), a.routes && (this.routes = a.routes), this._bindRoutes(), this.initialize.apply(this, arguments)
            },
            z = /\((.*?)\)/g,
            A = /(\(\?)?:\w+/g,
            B = /\*\w+/g,
            C = /[\-{}\[\]+?.,\\\^$|#\s]/g;
        c.extend(y.prototype, h, {
            initialize: function() {},
            route: function(a, d, e) {
                c.isRegExp(a) || (a = this._routeToRegExp(a)), c.isFunction(d) && (e = d, d = ""), e || (e = this[d]);
                var f = this;
                return b.history.route(a, function(c) {
                    var g = f._extractParameters(a, c);
                    f.execute(e, g), f.trigger.apply(f, ["route:" + d].concat(g)), f.trigger("route", d, g), b.history.trigger("route", f, d, g)
                }), this
            },
            execute: function(a, b) {
                a && a.apply(this, b)
            },
            navigate: function(a, c) {
                return b.history.navigate(a, c), this
            },
            _bindRoutes: function() {
                if (this.routes) {
                    this.routes = c.result(this, "routes");
                    for (var a, b = c.keys(this.routes); null != (a = b.pop());) this.route(a, this.routes[a])
                }
            },
            _routeToRegExp: function(a) {
                return a = a.replace(C, "\\$&").replace(z, "(?:$1)?").replace(A, function(a, b) {
                    return b ? a : "([^/?]+)"
                }).replace(B, "([^?]*?)"), new RegExp("^" + a + "(?:\\?([\\s\\S]*))?$")
            },
            _extractParameters: function(a, b) {
                var d = a.exec(b).slice(1);
                return c.map(d, function(a, b) {
                    return b === d.length - 1 ? a || null : a ? decodeURIComponent(a) : null
                })
            }
        });
        var D = b.History = function() {
                this.handlers = [], c.bindAll(this, "checkUrl"), "undefined" != typeof window && (this.location = window.location, this.history = window.history)
            },
            E = /^[#\/]|\s+$/g,
            F = /^\/+|\/+$/g,
            G = /msie [\w.]+/,
            H = /\/$/,
            I = /#.*$/;
        D.started = !1, c.extend(D.prototype, h, {
            interval: 50,
            atRoot: function() {
                return this.location.pathname.replace(/[^\/]$/, "$&/") === this.root
            },
            getHash: function(a) {
                var b = (a || this).location.href.match(/#(.*)$/);
                return b ? b[1] : ""
            },
            getFragment: function(a, b) {
                if (null == a)
                    if (this._hasPushState || !this._wantsHashChange || b) {
                        a = decodeURI(this.location.pathname + this.location.search);
                        var c = this.root.replace(H, "");
                        a.indexOf(c) || (a = a.slice(c.length))
                    } else a = this.getHash();
                return a.replace(E, "")
            },
            start: function(a) {
                if (D.started) throw new Error("Backbone.history has already been started");
                D.started = !0, this.options = c.extend({
                    root: "/"
                }, this.options, a), this.root = this.options.root, this._wantsHashChange = this.options.hashChange !== !1, this._wantsPushState = !!this.options.pushState, this._hasPushState = !!(this.options.pushState && this.history && this.history.pushState);
                var d = this.getFragment(),
                    e = document.documentMode,
                    f = G.exec(navigator.userAgent.toLowerCase()) && (!e || 7 >= e);
                if (this.root = ("/" + this.root + "/").replace(F, "/"), f && this._wantsHashChange) {
                    var g = b.$('<iframe src="javascript:0" tabindex="-1">');
                    this.iframe = g.hide().appendTo("body")[0].contentWindow, this.navigate(d)
                }
                this._hasPushState ? b.$(window).on("popstate", this.checkUrl) : this._wantsHashChange && "onhashchange" in window && !f ? b.$(window).on("hashchange", this.checkUrl) : this._wantsHashChange && (this._checkUrlInterval = setInterval(this.checkUrl, this.interval)), this.fragment = d;
                var h = this.location;
                if (this._wantsHashChange && this._wantsPushState) {
                    if (!this._hasPushState && !this.atRoot()) return this.fragment = this.getFragment(null, !0), this.location.replace(this.root + "#" + this.fragment), !0;
                    this._hasPushState && this.atRoot() && h.hash && (this.fragment = this.getHash().replace(E, ""), this.history.replaceState({}, document.title, this.root + this.fragment))
                }
                return this.options.silent ? void 0 : this.loadUrl()
            },
            stop: function() {
                b.$(window).off("popstate", this.checkUrl).off("hashchange", this.checkUrl), this._checkUrlInterval && clearInterval(this._checkUrlInterval), D.started = !1
            },
            route: function(a, b) {
                this.handlers.unshift({
                    route: a,
                    callback: b
                })
            },
            checkUrl: function() {
                var a = this.getFragment();
                return a === this.fragment && this.iframe && (a = this.getFragment(this.getHash(this.iframe))), a === this.fragment ? !1 : (this.iframe && this.navigate(a), void this.loadUrl())
            },
            loadUrl: function(a) {
                return a = this.fragment = this.getFragment(a), c.any(this.handlers, function(b) {
                    return b.route.test(a) ? (b.callback(a), !0) : void 0
                })
            },
            navigate: function(a, b) {
                if (!D.started) return !1;
                b && b !== !0 || (b = {
                    trigger: !!b
                });
                var c = this.root + (a = this.getFragment(a || ""));
                if (a = a.replace(I, ""), this.fragment !== a) {
                    if (this.fragment = a, "" === a && "/" !== c && (c = c.slice(0, -1)), this._hasPushState) this.history[b.replace ? "replaceState" : "pushState"]({}, document.title, c);
                    else {
                        if (!this._wantsHashChange) return this.location.assign(c);
                        this._updateHash(this.location, a, b.replace), this.iframe && a !== this.getFragment(this.getHash(this.iframe)) && (b.replace || this.iframe.document.open().close(), this._updateHash(this.iframe.location, a, b.replace))
                    }
                    return b.trigger ? this.loadUrl(a) : void 0
                }
            },
            _updateHash: function(a, b, c) {
                if (c) {
                    var d = a.href.replace(/(javascript:|#).*$/, "");
                    a.replace(d + "#" + b)
                } else a.hash = "#" + b
            }
        }), b.history = new D;
        var J = function(a, b) {
            var d, e = this;
            d = a && c.has(a, "constructor") ? a.constructor : function() {
                return e.apply(this, arguments)
            }, c.extend(d, e, b);
            var f = function() {
                this.constructor = d
            };
            return f.prototype = e.prototype, d.prototype = new f, a && c.extend(d.prototype, a), d.__super__ = e.prototype, d
        };
        m.extend = o.extend = y.extend = t.extend = D.extend = J;
        var K = function() {
                throw new Error('A "url" property or function must be specified')
            },
            L = function(a, b) {
                var c = b.error;
                b.error = function(d) {
                    c && c(a, d, b), a.trigger("error", a, d, b)
                }
            };
        return b
    });
var THREE = {
    REVISION: "70"
};
"object" == typeof module && (module.exports = THREE), void 0 === Math.sign && (Math.sign = function(a) {
        return 0 > a ? -1 : a > 0 ? 1 : 0
    }), THREE.MOUSE = {
        LEFT: 0,
        MIDDLE: 1,
        RIGHT: 2
    }, THREE.CullFaceNone = 0, THREE.CullFaceBack = 1, THREE.CullFaceFront = 2, THREE.CullFaceFrontBack = 3, THREE.FrontFaceDirectionCW = 0, THREE.FrontFaceDirectionCCW = 1, THREE.BasicShadowMap = 0, THREE.PCFShadowMap = 1, THREE.PCFSoftShadowMap = 2, THREE.FrontSide = 0, THREE.BackSide = 1, THREE.DoubleSide = 2, THREE.NoShading = 0, THREE.FlatShading = 1, THREE.SmoothShading = 2, THREE.NoColors = 0, THREE.FaceColors = 1, THREE.VertexColors = 2, THREE.NoBlending = 0, THREE.NormalBlending = 1, THREE.AdditiveBlending = 2, THREE.SubtractiveBlending = 3, THREE.MultiplyBlending = 4, THREE.CustomBlending = 5, THREE.AddEquation = 100, THREE.SubtractEquation = 101, THREE.ReverseSubtractEquation = 102, THREE.MinEquation = 103, THREE.MaxEquation = 104, THREE.ZeroFactor = 200, THREE.OneFactor = 201, THREE.SrcColorFactor = 202, THREE.OneMinusSrcColorFactor = 203, THREE.SrcAlphaFactor = 204, THREE.OneMinusSrcAlphaFactor = 205, THREE.DstAlphaFactor = 206, THREE.OneMinusDstAlphaFactor = 207, THREE.DstColorFactor = 208, THREE.OneMinusDstColorFactor = 209, THREE.SrcAlphaSaturateFactor = 210, THREE.MultiplyOperation = 0, THREE.MixOperation = 1, THREE.AddOperation = 2, THREE.UVMapping = 300, THREE.CubeReflectionMapping = 301, THREE.CubeRefractionMapping = 302, THREE.EquirectangularReflectionMapping = 303, THREE.EquirectangularRefractionMapping = 304, THREE.SphericalReflectionMapping = 305, THREE.RepeatWrapping = 1e3, THREE.ClampToEdgeWrapping = 1001, THREE.MirroredRepeatWrapping = 1002, THREE.NearestFilter = 1003, THREE.NearestMipMapNearestFilter = 1004, THREE.NearestMipMapLinearFilter = 1005, THREE.LinearFilter = 1006, THREE.LinearMipMapNearestFilter = 1007, THREE.LinearMipMapLinearFilter = 1008, THREE.UnsignedByteType = 1009, THREE.ByteType = 1010, THREE.ShortType = 1011, THREE.UnsignedShortType = 1012, THREE.IntType = 1013, THREE.UnsignedIntType = 1014, THREE.FloatType = 1015, THREE.UnsignedShort4444Type = 1016, THREE.UnsignedShort5551Type = 1017, THREE.UnsignedShort565Type = 1018, THREE.AlphaFormat = 1019, THREE.RGBFormat = 1020, THREE.RGBAFormat = 1021, THREE.LuminanceFormat = 1022, THREE.LuminanceAlphaFormat = 1023, THREE.RGBEFormat = THREE.RGBAFormat, THREE.RGB_S3TC_DXT1_Format = 2001, THREE.RGBA_S3TC_DXT1_Format = 2002, THREE.RGBA_S3TC_DXT3_Format = 2003, THREE.RGBA_S3TC_DXT5_Format = 2004, THREE.RGB_PVRTC_4BPPV1_Format = 2100, THREE.RGB_PVRTC_2BPPV1_Format = 2101, THREE.RGBA_PVRTC_4BPPV1_Format = 2102, THREE.RGBA_PVRTC_2BPPV1_Format = 2103, THREE.Projector = function() {
        console.error("THREE.Projector has been moved to /examples/js/renderers/Projector.js."), this.projectVector = function(a, b) {
            console.warn("THREE.Projector: .projectVector() is now vector.project()."), a.project(b)
        }, this.unprojectVector = function(a, b) {
            console.warn("THREE.Projector: .unprojectVector() is now vector.unproject()."), a.unproject(b)
        }, this.pickingRay = function() {
            console.error("THREE.Projector: .pickingRay() is now raycaster.setFromCamera().")
        }
    }, THREE.CanvasRenderer = function() {
        console.error("THREE.CanvasRenderer has been moved to /examples/js/renderers/CanvasRenderer.js"), this.domElement = document.createElement("canvas"), this.clear = function() {}, this.render = function() {}, this.setClearColor = function() {}, this.setSize = function() {}
    }, THREE.Color = function(a) {
        return 3 === arguments.length ? this.setRGB(arguments[0], arguments[1], arguments[2]) : this.set(a)
    }, THREE.Color.prototype = {
        constructor: THREE.Color,
        r: 1,
        g: 1,
        b: 1,
        set: function(a) {
            return a instanceof THREE.Color ? this.copy(a) : "number" == typeof a ? this.setHex(a) : "string" == typeof a && this.setStyle(a), this
        },
        setHex: function(a) {
            return a = Math.floor(a), this.r = (a >> 16 & 255) / 255, this.g = (a >> 8 & 255) / 255, this.b = (255 & a) / 255, this
        },
        setRGB: function(a, b, c) {
            return this.r = a, this.g = b, this.b = c, this
        },
        setHSL: function(a, b, c) {
            if (0 === b) this.r = this.g = this.b = c;
            else {
                var d = function(a, b, c) {
                        return 0 > c && (c += 1), c > 1 && (c -= 1), 1 / 6 > c ? a + 6 * (b - a) * c : .5 > c ? b : 2 / 3 > c ? a + 6 * (b - a) * (2 / 3 - c) : a
                    },
                    e = .5 >= c ? c * (1 + b) : c + b - c * b,
                    f = 2 * c - e;
                this.r = d(f, e, a + 1 / 3), this.g = d(f, e, a), this.b = d(f, e, a - 1 / 3)
            }
            return this
        },
        setStyle: function(a) {
            if (/^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.test(a)) {
                var b = /^rgb\((\d+), ?(\d+), ?(\d+)\)$/i.exec(a);
                return this.r = Math.min(255, parseInt(b[1], 10)) / 255, this.g = Math.min(255, parseInt(b[2], 10)) / 255, this.b = Math.min(255, parseInt(b[3], 10)) / 255, this
            }
            if (/^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.test(a)) {
                var b = /^rgb\((\d+)\%, ?(\d+)\%, ?(\d+)\%\)$/i.exec(a);
                return this.r = Math.min(100, parseInt(b[1], 10)) / 100, this.g = Math.min(100, parseInt(b[2], 10)) / 100, this.b = Math.min(100, parseInt(b[3], 10)) / 100, this
            }
            if (/^\#([0-9a-f]{6})$/i.test(a)) {
                var b = /^\#([0-9a-f]{6})$/i.exec(a);
                return this.setHex(parseInt(b[1], 16)), this
            }
            if (/^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.test(a)) {
                var b = /^\#([0-9a-f])([0-9a-f])([0-9a-f])$/i.exec(a);
                return this.setHex(parseInt(b[1] + b[1] + b[2] + b[2] + b[3] + b[3], 16)), this
            }
            return /^(\w+)$/i.test(a) ? (this.setHex(THREE.ColorKeywords[a]), this) : void 0
        },
        copy: function(a) {
            return this.r = a.r, this.g = a.g, this.b = a.b, this
        },
        copyGammaToLinear: function(a) {
            return this.r = a.r * a.r, this.g = a.g * a.g, this.b = a.b * a.b, this
        },
        copyLinearToGamma: function(a) {
            return this.r = Math.sqrt(a.r), this.g = Math.sqrt(a.g), this.b = Math.sqrt(a.b), this
        },
        convertGammaToLinear: function() {
            var a = this.r,
                b = this.g,
                c = this.b;
            return this.r = a * a, this.g = b * b, this.b = c * c, this
        },
        convertLinearToGamma: function() {
            return this.r = Math.sqrt(this.r), this.g = Math.sqrt(this.g), this.b = Math.sqrt(this.b), this
        },
        getHex: function() {
            return 255 * this.r << 16 ^ 255 * this.g << 8 ^ 255 * this.b << 0
        },
        getHexString: function() {
            return ("000000" + this.getHex().toString(16)).slice(-6)
        },
        getHSL: function(a) {
            var b, c, d = a || {
                    h: 0,
                    s: 0,
                    l: 0
                },
                e = this.r,
                f = this.g,
                g = this.b,
                h = Math.max(e, f, g),
                i = Math.min(e, f, g),
                j = (i + h) / 2;
            if (i === h) b = 0, c = 0;
            else {
                var k = h - i;
                switch (c = .5 >= j ? k / (h + i) : k / (2 - h - i), h) {
                    case e:
                        b = (f - g) / k + (g > f ? 6 : 0);
                        break;
                    case f:
                        b = (g - e) / k + 2;
                        break;
                    case g:
                        b = (e - f) / k + 4
                }
                b /= 6
            }
            return d.h = b, d.s = c, d.l = j, d
        },
        getStyle: function() {
            return "rgb(" + (255 * this.r | 0) + "," + (255 * this.g | 0) + "," + (255 * this.b | 0) + ")"
        },
        offsetHSL: function(a, b, c) {
            var d = this.getHSL();
            return d.h += a, d.s += b, d.l += c, this.setHSL(d.h, d.s, d.l), this
        },
        add: function(a) {
            return this.r += a.r, this.g += a.g, this.b += a.b, this
        },
        addColors: function(a, b) {
            return this.r = a.r + b.r, this.g = a.g + b.g, this.b = a.b + b.b, this
        },
        addScalar: function(a) {
            return this.r += a, this.g += a, this.b += a, this
        },
        multiply: function(a) {
            return this.r *= a.r, this.g *= a.g, this.b *= a.b, this
        },
        multiplyScalar: function(a) {
            return this.r *= a, this.g *= a, this.b *= a, this
        },
        lerp: function(a, b) {
            return this.r += (a.r - this.r) * b, this.g += (a.g - this.g) * b, this.b += (a.b - this.b) * b, this
        },
        equals: function(a) {
            return a.r === this.r && a.g === this.g && a.b === this.b
        },
        fromArray: function(a) {
            return this.r = a[0], this.g = a[1], this.b = a[2], this
        },
        toArray: function() {
            return [this.r, this.g, this.b]
        },
        clone: function() {
            return (new THREE.Color).setRGB(this.r, this.g, this.b)
        }
    }, THREE.ColorKeywords = {
        aliceblue: 15792383,
        antiquewhite: 16444375,
        aqua: 65535,
        aquamarine: 8388564,
        azure: 15794175,
        beige: 16119260,
        bisque: 16770244,
        black: 0,
        blanchedalmond: 16772045,
        blue: 255,
        blueviolet: 9055202,
        brown: 10824234,
        burlywood: 14596231,
        cadetblue: 6266528,
        chartreuse: 8388352,
        chocolate: 13789470,
        coral: 16744272,
        cornflowerblue: 6591981,
        cornsilk: 16775388,
        crimson: 14423100,
        cyan: 65535,
        darkblue: 139,
        darkcyan: 35723,
        darkgoldenrod: 12092939,
        darkgray: 11119017,
        darkgreen: 25600,
        darkgrey: 11119017,
        darkkhaki: 12433259,
        darkmagenta: 9109643,
        darkolivegreen: 5597999,
        darkorange: 16747520,
        darkorchid: 10040012,
        darkred: 9109504,
        darksalmon: 15308410,
        darkseagreen: 9419919,
        darkslateblue: 4734347,
        darkslategray: 3100495,
        darkslategrey: 3100495,
        darkturquoise: 52945,
        darkviolet: 9699539,
        deeppink: 16716947,
        deepskyblue: 49151,
        dimgray: 6908265,
        dimgrey: 6908265,
        dodgerblue: 2003199,
        firebrick: 11674146,
        floralwhite: 16775920,
        forestgreen: 2263842,
        fuchsia: 16711935,
        gainsboro: 14474460,
        ghostwhite: 16316671,
        gold: 16766720,
        goldenrod: 14329120,
        gray: 8421504,
        green: 32768,
        greenyellow: 11403055,
        grey: 8421504,
        honeydew: 15794160,
        hotpink: 16738740,
        indianred: 13458524,
        indigo: 4915330,
        ivory: 16777200,
        khaki: 15787660,
        lavender: 15132410,
        lavenderblush: 16773365,
        lawngreen: 8190976,
        lemonchiffon: 16775885,
        lightblue: 11393254,
        lightcoral: 15761536,
        lightcyan: 14745599,
        lightgoldenrodyellow: 16448210,
        lightgray: 13882323,
        lightgreen: 9498256,
        lightgrey: 13882323,
        lightpink: 16758465,
        lightsalmon: 16752762,
        lightseagreen: 2142890,
        lightskyblue: 8900346,
        lightslategray: 7833753,
        lightslategrey: 7833753,
        lightsteelblue: 11584734,
        lightyellow: 16777184,
        lime: 65280,
        limegreen: 3329330,
        linen: 16445670,
        magenta: 16711935,
        maroon: 8388608,
        mediumaquamarine: 6737322,
        mediumblue: 205,
        mediumorchid: 12211667,
        mediumpurple: 9662683,
        mediumseagreen: 3978097,
        mediumslateblue: 8087790,
        mediumspringgreen: 64154,
        mediumturquoise: 4772300,
        mediumvioletred: 13047173,
        midnightblue: 1644912,
        mintcream: 16121850,
        mistyrose: 16770273,
        moccasin: 16770229,
        navajowhite: 16768685,
        navy: 128,
        oldlace: 16643558,
        olive: 8421376,
        olivedrab: 7048739,
        orange: 16753920,
        orangered: 16729344,
        orchid: 14315734,
        palegoldenrod: 15657130,
        palegreen: 10025880,
        paleturquoise: 11529966,
        palevioletred: 14381203,
        papayawhip: 16773077,
        peachpuff: 16767673,
        peru: 13468991,
        pink: 16761035,
        plum: 14524637,
        powderblue: 11591910,
        purple: 8388736,
        red: 16711680,
        rosybrown: 12357519,
        royalblue: 4286945,
        saddlebrown: 9127187,
        salmon: 16416882,
        sandybrown: 16032864,
        seagreen: 3050327,
        seashell: 16774638,
        sienna: 10506797,
        silver: 12632256,
        skyblue: 8900331,
        slateblue: 6970061,
        slategray: 7372944,
        slategrey: 7372944,
        snow: 16775930,
        springgreen: 65407,
        steelblue: 4620980,
        tan: 13808780,
        teal: 32896,
        thistle: 14204888,
        tomato: 16737095,
        turquoise: 4251856,
        violet: 15631086,
        wheat: 16113331,
        white: 16777215,
        whitesmoke: 16119285,
        yellow: 16776960,
        yellowgreen: 10145074
    }, THREE.Quaternion = function(a, b, c, d) {
        this._x = a || 0, this._y = b || 0, this._z = c || 0, this._w = void 0 !== d ? d : 1
    }, THREE.Quaternion.prototype = {
        constructor: THREE.Quaternion,
        _x: 0,
        _y: 0,
        _z: 0,
        _w: 0,
        get x() {
            return this._x
        },
        set x(a) {
            this._x = a, this.onChangeCallback()
        },
        get y() {
            return this._y
        },
        set y(a) {
            this._y = a, this.onChangeCallback()
        },
        get z() {
            return this._z
        },
        set z(a) {
            this._z = a, this.onChangeCallback()
        },
        get w() {
            return this._w
        },
        set w(a) {
            this._w = a, this.onChangeCallback()
        },
        set: function(a, b, c, d) {
            return this._x = a, this._y = b, this._z = c, this._w = d, this.onChangeCallback(), this
        },
        copy: function(a) {
            return this._x = a.x, this._y = a.y, this._z = a.z, this._w = a.w, this.onChangeCallback(), this
        },
        setFromEuler: function(a, b) {
            if (a instanceof THREE.Euler == !1) throw new Error("THREE.Quaternion: .setFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
            var c = Math.cos(a._x / 2),
                d = Math.cos(a._y / 2),
                e = Math.cos(a._z / 2),
                f = Math.sin(a._x / 2),
                g = Math.sin(a._y / 2),
                h = Math.sin(a._z / 2);
            return "XYZ" === a.order ? (this._x = f * d * e + c * g * h, this._y = c * g * e - f * d * h, this._z = c * d * h + f * g * e, this._w = c * d * e - f * g * h) : "YXZ" === a.order ? (this._x = f * d * e + c * g * h, this._y = c * g * e - f * d * h, this._z = c * d * h - f * g * e, this._w = c * d * e + f * g * h) : "ZXY" === a.order ? (this._x = f * d * e - c * g * h, this._y = c * g * e + f * d * h, this._z = c * d * h + f * g * e, this._w = c * d * e - f * g * h) : "ZYX" === a.order ? (this._x = f * d * e - c * g * h, this._y = c * g * e + f * d * h, this._z = c * d * h - f * g * e, this._w = c * d * e + f * g * h) : "YZX" === a.order ? (this._x = f * d * e + c * g * h, this._y = c * g * e + f * d * h, this._z = c * d * h - f * g * e, this._w = c * d * e - f * g * h) : "XZY" === a.order && (this._x = f * d * e - c * g * h, this._y = c * g * e - f * d * h, this._z = c * d * h + f * g * e, this._w = c * d * e + f * g * h), b !== !1 && this.onChangeCallback(), this
        },
        setFromAxisAngle: function(a, b) {
            var c = b / 2,
                d = Math.sin(c);
            return this._x = a.x * d, this._y = a.y * d, this._z = a.z * d, this._w = Math.cos(c), this.onChangeCallback(), this
        },
        setFromRotationMatrix: function(a) {
            var b, c = a.elements,
                d = c[0],
                e = c[4],
                f = c[8],
                g = c[1],
                h = c[5],
                i = c[9],
                j = c[2],
                k = c[6],
                l = c[10],
                m = d + h + l;
            return m > 0 ? (b = .5 / Math.sqrt(m + 1), this._w = .25 / b, this._x = (k - i) * b, this._y = (f - j) * b, this._z = (g - e) * b) : d > h && d > l ? (b = 2 * Math.sqrt(1 + d - h - l), this._w = (k - i) / b, this._x = .25 * b, this._y = (e + g) / b, this._z = (f + j) / b) : h > l ? (b = 2 * Math.sqrt(1 + h - d - l), this._w = (f - j) / b, this._x = (e + g) / b, this._y = .25 * b, this._z = (i + k) / b) : (b = 2 * Math.sqrt(1 + l - d - h), this._w = (g - e) / b, this._x = (f + j) / b, this._y = (i + k) / b, this._z = .25 * b), this.onChangeCallback(), this
        },
        setFromUnitVectors: function() {
            var a, b, c = 1e-6;
            return function(d, e) {
                return void 0 === a && (a = new THREE.Vector3), b = d.dot(e) + 1, c > b ? (b = 0, Math.abs(d.x) > Math.abs(d.z) ? a.set(-d.y, d.x, 0) : a.set(0, -d.z, d.y)) : a.crossVectors(d, e), this._x = a.x, this._y = a.y, this._z = a.z, this._w = b, this.normalize(), this
            }
        }(),
        inverse: function() {
            return this.conjugate().normalize(), this
        },
        conjugate: function() {
            return this._x *= -1, this._y *= -1, this._z *= -1, this.onChangeCallback(), this
        },
        dot: function(a) {
            return this._x * a._x + this._y * a._y + this._z * a._z + this._w * a._w
        },
        lengthSq: function() {
            return this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w
        },
        length: function() {
            return Math.sqrt(this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w)
        },
        normalize: function() {
            var a = this.length();
            return 0 === a ? (this._x = 0, this._y = 0, this._z = 0, this._w = 1) : (a = 1 / a, this._x = this._x * a, this._y = this._y * a, this._z = this._z * a, this._w = this._w * a), this.onChangeCallback(), this
        },
        multiply: function(a, b) {
            return void 0 !== b ? (console.warn("THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead."), this.multiplyQuaternions(a, b)) : this.multiplyQuaternions(this, a)
        },
        multiplyQuaternions: function(a, b) {
            var c = a._x,
                d = a._y,
                e = a._z,
                f = a._w,
                g = b._x,
                h = b._y,
                i = b._z,
                j = b._w;
            return this._x = c * j + f * g + d * i - e * h, this._y = d * j + f * h + e * g - c * i, this._z = e * j + f * i + c * h - d * g, this._w = f * j - c * g - d * h - e * i, this.onChangeCallback(), this
        },
        multiplyVector3: function(a) {
            return console.warn("THREE.Quaternion: .multiplyVector3() has been removed. Use is now vector.applyQuaternion( quaternion ) instead."), a.applyQuaternion(this)
        },
        slerp: function(a, b) {
            if (0 === b) return this;
            if (1 === b) return this.copy(a);
            var c = this._x,
                d = this._y,
                e = this._z,
                f = this._w,
                g = f * a._w + c * a._x + d * a._y + e * a._z;
            if (0 > g ? (this._w = -a._w, this._x = -a._x, this._y = -a._y, this._z = -a._z, g = -g) : this.copy(a), g >= 1) return this._w = f, this._x = c, this._y = d, this._z = e, this;
            var h = Math.acos(g),
                i = Math.sqrt(1 - g * g);
            if (Math.abs(i) < .001) return this._w = .5 * (f + this._w), this._x = .5 * (c + this._x), this._y = .5 * (d + this._y), this._z = .5 * (e + this._z), this;
            var j = Math.sin((1 - b) * h) / i,
                k = Math.sin(b * h) / i;
            return this._w = f * j + this._w * k, this._x = c * j + this._x * k, this._y = d * j + this._y * k, this._z = e * j + this._z * k, this.onChangeCallback(), this
        },
        equals: function(a) {
            return a._x === this._x && a._y === this._y && a._z === this._z && a._w === this._w
        },
        fromArray: function(a, b) {
            return void 0 === b && (b = 0), this._x = a[b], this._y = a[b + 1], this._z = a[b + 2], this._w = a[b + 3], this.onChangeCallback(), this
        },
        toArray: function(a, b) {
            return void 0 === a && (a = []), void 0 === b && (b = 0), a[b] = this._x, a[b + 1] = this._y, a[b + 2] = this._z, a[b + 3] = this._w, a
        },
        onChange: function(a) {
            return this.onChangeCallback = a, this
        },
        onChangeCallback: function() {},
        clone: function() {
            return new THREE.Quaternion(this._x, this._y, this._z, this._w)
        }
    }, THREE.Quaternion.slerp = function(a, b, c, d) {
        return c.copy(a).slerp(b, d)
    }, THREE.Vector2 = function(a, b) {
        this.x = a || 0, this.y = b || 0
    }, THREE.Vector2.prototype = {
        constructor: THREE.Vector2,
        set: function(a, b) {
            return this.x = a, this.y = b, this
        },
        setX: function(a) {
            return this.x = a, this
        },
        setY: function(a) {
            return this.y = a, this
        },
        setComponent: function(a, b) {
            switch (a) {
                case 0:
                    this.x = b;
                    break;
                case 1:
                    this.y = b;
                    break;
                default:
                    throw new Error("index is out of range: " + a)
            }
        },
        getComponent: function(a) {
            switch (a) {
                case 0:
                    return this.x;
                case 1:
                    return this.y;
                default:
                    throw new Error("index is out of range: " + a)
            }
        },
        copy: function(a) {
            return this.x = a.x, this.y = a.y, this
        },
        add: function(a, b) {
            return void 0 !== b ? (console.warn("THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(a, b)) : (this.x += a.x, this.y += a.y, this)
        },
        addVectors: function(a, b) {
            return this.x = a.x + b.x, this.y = a.y + b.y, this
        },
        addScalar: function(a) {
            return this.x += a, this.y += a, this
        },
        sub: function(a, b) {
            return void 0 !== b ? (console.warn("THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(a, b)) : (this.x -= a.x, this.y -= a.y, this)
        },
        subVectors: function(a, b) {
            return this.x = a.x - b.x, this.y = a.y - b.y, this
        },
        multiply: function(a) {
            return this.x *= a.x, this.y *= a.y, this
        },
        multiplyScalar: function(a) {
            return this.x *= a, this.y *= a, this
        },
        divide: function(a) {
            return this.x /= a.x, this.y /= a.y, this
        },
        divideScalar: function(a) {
            if (0 !== a) {
                var b = 1 / a;
                this.x *= b, this.y *= b
            } else this.x = 0, this.y = 0;
            return this
        },
        min: function(a) {
            return this.x > a.x && (this.x = a.x), this.y > a.y && (this.y = a.y), this
        },
        max: function(a) {
            return this.x < a.x && (this.x = a.x), this.y < a.y && (this.y = a.y), this
        },
        clamp: function(a, b) {
            return this.x < a.x ? this.x = a.x : this.x > b.x && (this.x = b.x), this.y < a.y ? this.y = a.y : this.y > b.y && (this.y = b.y), this
        },
        clampScalar: function() {
            var a, b;
            return function(c, d) {
                return void 0 === a && (a = new THREE.Vector2, b = new THREE.Vector2), a.set(c, c), b.set(d, d), this.clamp(a, b)
            }
        }(),
        floor: function() {
            return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this
        },
        ceil: function() {
            return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this
        },
        round: function() {
            return this.x = Math.round(this.x), this.y = Math.round(this.y), this
        },
        roundToZero: function() {
            return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this
        },
        negate: function() {
            return this.x = -this.x, this.y = -this.y, this
        },
        dot: function(a) {
            return this.x * a.x + this.y * a.y
        },
        lengthSq: function() {
            return this.x * this.x + this.y * this.y
        },
        length: function() {
            return Math.sqrt(this.x * this.x + this.y * this.y)
        },
        normalize: function() {
            return this.divideScalar(this.length())
        },
        distanceTo: function(a) {
            return Math.sqrt(this.distanceToSquared(a))
        },
        distanceToSquared: function(a) {
            var b = this.x - a.x,
                c = this.y - a.y;
            return b * b + c * c
        },
        setLength: function(a) {
            var b = this.length();
            return 0 !== b && a !== b && this.multiplyScalar(a / b), this
        },
        lerp: function(a, b) {
            return this.x += (a.x - this.x) * b, this.y += (a.y - this.y) * b, this
        },
        equals: function(a) {
            return a.x === this.x && a.y === this.y
        },
        fromArray: function(a, b) {
            return void 0 === b && (b = 0), this.x = a[b], this.y = a[b + 1], this
        },
        toArray: function(a, b) {
            return void 0 === a && (a = []), void 0 === b && (b = 0), a[b] = this.x, a[b + 1] = this.y, a
        },
        fromAttribute: function(a, b, c) {
            return void 0 === c && (c = 0), b = b * a.itemSize + c, this.x = a.array[b], this.y = a.array[b + 1], this
        },
        clone: function() {
            return new THREE.Vector2(this.x, this.y)
        }
    }, THREE.Vector3 = function(a, b, c) {
        this.x = a || 0, this.y = b || 0, this.z = c || 0
    }, THREE.Vector3.prototype = {
        constructor: THREE.Vector3,
        set: function(a, b, c) {
            return this.x = a, this.y = b, this.z = c, this
        },
        setX: function(a) {
            return this.x = a, this
        },
        setY: function(a) {
            return this.y = a, this
        },
        setZ: function(a) {
            return this.z = a, this
        },
        setComponent: function(a, b) {
            switch (a) {
                case 0:
                    this.x = b;
                    break;
                case 1:
                    this.y = b;
                    break;
                case 2:
                    this.z = b;
                    break;
                default:
                    throw new Error("index is out of range: " + a)
            }
        },
        getComponent: function(a) {
            switch (a) {
                case 0:
                    return this.x;
                case 1:
                    return this.y;
                case 2:
                    return this.z;
                default:
                    throw new Error("index is out of range: " + a)
            }
        },
        copy: function(a) {
            return this.x = a.x, this.y = a.y, this.z = a.z, this
        },
        add: function(a, b) {
            return void 0 !== b ? (console.warn("THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(a, b)) : (this.x += a.x, this.y += a.y, this.z += a.z, this)
        },
        addScalar: function(a) {
            return this.x += a, this.y += a, this.z += a, this
        },
        addVectors: function(a, b) {
            return this.x = a.x + b.x, this.y = a.y + b.y, this.z = a.z + b.z, this
        },
        sub: function(a, b) {
            return void 0 !== b ? (console.warn("THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(a, b)) : (this.x -= a.x, this.y -= a.y, this.z -= a.z, this)
        },
        subVectors: function(a, b) {
            return this.x = a.x - b.x, this.y = a.y - b.y, this.z = a.z - b.z, this
        },
        multiply: function(a, b) {
            return void 0 !== b ? (console.warn("THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead."), this.multiplyVectors(a, b)) : (this.x *= a.x, this.y *= a.y, this.z *= a.z, this)
        },
        multiplyScalar: function(a) {
            return this.x *= a, this.y *= a, this.z *= a, this
        },
        multiplyVectors: function(a, b) {
            return this.x = a.x * b.x, this.y = a.y * b.y, this.z = a.z * b.z, this
        },
        applyEuler: function() {
            var a;
            return function(b) {
                return b instanceof THREE.Euler == !1 && console.error("THREE.Vector3: .applyEuler() now expects a Euler rotation rather than a Vector3 and order."), void 0 === a && (a = new THREE.Quaternion), this.applyQuaternion(a.setFromEuler(b)), this
            }
        }(),
        applyAxisAngle: function() {
            var a;
            return function(b, c) {
                return void 0 === a && (a = new THREE.Quaternion), this.applyQuaternion(a.setFromAxisAngle(b, c)), this
            }
        }(),
        applyMatrix3: function(a) {
            var b = this.x,
                c = this.y,
                d = this.z,
                e = a.elements;
            return this.x = e[0] * b + e[3] * c + e[6] * d, this.y = e[1] * b + e[4] * c + e[7] * d, this.z = e[2] * b + e[5] * c + e[8] * d, this
        },
        applyMatrix4: function(a) {
            var b = this.x,
                c = this.y,
                d = this.z,
                e = a.elements;
            return this.x = e[0] * b + e[4] * c + e[8] * d + e[12], this.y = e[1] * b + e[5] * c + e[9] * d + e[13], this.z = e[2] * b + e[6] * c + e[10] * d + e[14], this
        },
        applyProjection: function(a) {
            var b = this.x,
                c = this.y,
                d = this.z,
                e = a.elements,
                f = 1 / (e[3] * b + e[7] * c + e[11] * d + e[15]);
            return this.x = (e[0] * b + e[4] * c + e[8] * d + e[12]) * f, this.y = (e[1] * b + e[5] * c + e[9] * d + e[13]) * f, this.z = (e[2] * b + e[6] * c + e[10] * d + e[14]) * f, this
        },
        applyQuaternion: function(a) {
            var b = this.x,
                c = this.y,
                d = this.z,
                e = a.x,
                f = a.y,
                g = a.z,
                h = a.w,
                i = h * b + f * d - g * c,
                j = h * c + g * b - e * d,
                k = h * d + e * c - f * b,
                l = -e * b - f * c - g * d;
            return this.x = i * h + l * -e + j * -g - k * -f, this.y = j * h + l * -f + k * -e - i * -g, this.z = k * h + l * -g + i * -f - j * -e, this
        },
        project: function() {
            var a;
            return function(b) {
                return void 0 === a && (a = new THREE.Matrix4), a.multiplyMatrices(b.projectionMatrix, a.getInverse(b.matrixWorld)), this.applyProjection(a)
            }
        }(),
        unproject: function() {
            var a;
            return function(b) {
                return void 0 === a && (a = new THREE.Matrix4), a.multiplyMatrices(b.matrixWorld, a.getInverse(b.projectionMatrix)), this.applyProjection(a)
            }
        }(),
        transformDirection: function(a) {
            var b = this.x,
                c = this.y,
                d = this.z,
                e = a.elements;
            return this.x = e[0] * b + e[4] * c + e[8] * d, this.y = e[1] * b + e[5] * c + e[9] * d, this.z = e[2] * b + e[6] * c + e[10] * d, this.normalize(), this
        },
        divide: function(a) {
            return this.x /= a.x, this.y /= a.y, this.z /= a.z, this
        },
        divideScalar: function(a) {
            if (0 !== a) {
                var b = 1 / a;
                this.x *= b, this.y *= b, this.z *= b
            } else this.x = 0, this.y = 0, this.z = 0;
            return this
        },
        min: function(a) {
            return this.x > a.x && (this.x = a.x), this.y > a.y && (this.y = a.y), this.z > a.z && (this.z = a.z), this
        },
        max: function(a) {
            return this.x < a.x && (this.x = a.x), this.y < a.y && (this.y = a.y), this.z < a.z && (this.z = a.z), this
        },
        clamp: function(a, b) {
            return this.x < a.x ? this.x = a.x : this.x > b.x && (this.x = b.x), this.y < a.y ? this.y = a.y : this.y > b.y && (this.y = b.y), this.z < a.z ? this.z = a.z : this.z > b.z && (this.z = b.z), this
        },
        clampScalar: function() {
            var a, b;
            return function(c, d) {
                return void 0 === a && (a = new THREE.Vector3, b = new THREE.Vector3), a.set(c, c, c), b.set(d, d, d), this.clamp(a, b)
            }
        }(),
        floor: function() {
            return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this
        },
        ceil: function() {
            return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this
        },
        round: function() {
            return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this
        },
        roundToZero: function() {
            return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this
        },
        negate: function() {
            return this.x = -this.x, this.y = -this.y, this.z = -this.z, this
        },
        dot: function(a) {
            return this.x * a.x + this.y * a.y + this.z * a.z
        },
        lengthSq: function() {
            return this.x * this.x + this.y * this.y + this.z * this.z
        },
        length: function() {
            return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z)
        },
        lengthManhattan: function() {
            return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z)
        },
        normalize: function() {
            return this.divideScalar(this.length())
        },
        setLength: function(a) {
            var b = this.length();
            return 0 !== b && a !== b && this.multiplyScalar(a / b), this
        },
        lerp: function(a, b) {
            return this.x += (a.x - this.x) * b, this.y += (a.y - this.y) * b, this.z += (a.z - this.z) * b, this
        },
        cross: function(a, b) {
            if (void 0 !== b) return console.warn("THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead."), this.crossVectors(a, b);
            var c = this.x,
                d = this.y,
                e = this.z;
            return this.x = d * a.z - e * a.y, this.y = e * a.x - c * a.z, this.z = c * a.y - d * a.x, this
        },
        crossVectors: function(a, b) {
            var c = a.x,
                d = a.y,
                e = a.z,
                f = b.x,
                g = b.y,
                h = b.z;
            return this.x = d * h - e * g, this.y = e * f - c * h, this.z = c * g - d * f, this
        },
        projectOnVector: function() {
            var a, b;
            return function(c) {
                return void 0 === a && (a = new THREE.Vector3), a.copy(c).normalize(), b = this.dot(a), this.copy(a).multiplyScalar(b)
            }
        }(),
        projectOnPlane: function() {
            var a;
            return function(b) {
                return void 0 === a && (a = new THREE.Vector3), a.copy(this).projectOnVector(b), this.sub(a)
            }
        }(),
        reflect: function() {
            var a;
            return function(b) {
                return void 0 === a && (a = new THREE.Vector3), this.sub(a.copy(b).multiplyScalar(2 * this.dot(b)))
            }
        }(),
        angleTo: function(a) {
            var b = this.dot(a) / (this.length() * a.length());
            return Math.acos(THREE.Math.clamp(b, -1, 1))
        },
        distanceTo: function(a) {
            return Math.sqrt(this.distanceToSquared(a))
        },
        distanceToSquared: function(a) {
            var b = this.x - a.x,
                c = this.y - a.y,
                d = this.z - a.z;
            return b * b + c * c + d * d
        },
        setEulerFromRotationMatrix: function() {
            console.error("THREE.Vector3: .setEulerFromRotationMatrix() has been removed. Use Euler.setFromRotationMatrix() instead.")
        },
        setEulerFromQuaternion: function() {
            console.error("THREE.Vector3: .setEulerFromQuaternion() has been removed. Use Euler.setFromQuaternion() instead.")
        },
        getPositionFromMatrix: function(a) {
            return console.warn("THREE.Vector3: .getPositionFromMatrix() has been renamed to .setFromMatrixPosition()."), this.setFromMatrixPosition(a)
        },
        getScaleFromMatrix: function(a) {
            return console.warn("THREE.Vector3: .getScaleFromMatrix() has been renamed to .setFromMatrixScale()."), this.setFromMatrixScale(a)
        },
        getColumnFromMatrix: function(a, b) {
            return console.warn("THREE.Vector3: .getColumnFromMatrix() has been renamed to .setFromMatrixColumn()."), this.setFromMatrixColumn(a, b)
        },
        setFromMatrixPosition: function(a) {
            return this.x = a.elements[12], this.y = a.elements[13], this.z = a.elements[14], this
        },
        setFromMatrixScale: function(a) {
            var b = this.set(a.elements[0], a.elements[1], a.elements[2]).length(),
                c = this.set(a.elements[4], a.elements[5], a.elements[6]).length(),
                d = this.set(a.elements[8], a.elements[9], a.elements[10]).length();
            return this.x = b, this.y = c, this.z = d, this
        },
        setFromMatrixColumn: function(a, b) {
            var c = 4 * a,
                d = b.elements;
            return this.x = d[c], this.y = d[c + 1], this.z = d[c + 2], this
        },
        equals: function(a) {
            return a.x === this.x && a.y === this.y && a.z === this.z
        },
        fromArray: function(a, b) {
            return void 0 === b && (b = 0),
                this.x = a[b], this.y = a[b + 1], this.z = a[b + 2], this
        },
        toArray: function(a, b) {
            return void 0 === a && (a = []), void 0 === b && (b = 0), a[b] = this.x, a[b + 1] = this.y, a[b + 2] = this.z, a
        },
        fromAttribute: function(a, b, c) {
            return void 0 === c && (c = 0), b = b * a.itemSize + c, this.x = a.array[b], this.y = a.array[b + 1], this.z = a.array[b + 2], this
        },
        clone: function() {
            return new THREE.Vector3(this.x, this.y, this.z)
        }
    }, THREE.Vector4 = function(a, b, c, d) {
        this.x = a || 0, this.y = b || 0, this.z = c || 0, this.w = void 0 !== d ? d : 1
    }, THREE.Vector4.prototype = {
        constructor: THREE.Vector4,
        set: function(a, b, c, d) {
            return this.x = a, this.y = b, this.z = c, this.w = d, this
        },
        setX: function(a) {
            return this.x = a, this
        },
        setY: function(a) {
            return this.y = a, this
        },
        setZ: function(a) {
            return this.z = a, this
        },
        setW: function(a) {
            return this.w = a, this
        },
        setComponent: function(a, b) {
            switch (a) {
                case 0:
                    this.x = b;
                    break;
                case 1:
                    this.y = b;
                    break;
                case 2:
                    this.z = b;
                    break;
                case 3:
                    this.w = b;
                    break;
                default:
                    throw new Error("index is out of range: " + a)
            }
        },
        getComponent: function(a) {
            switch (a) {
                case 0:
                    return this.x;
                case 1:
                    return this.y;
                case 2:
                    return this.z;
                case 3:
                    return this.w;
                default:
                    throw new Error("index is out of range: " + a)
            }
        },
        copy: function(a) {
            return this.x = a.x, this.y = a.y, this.z = a.z, this.w = void 0 !== a.w ? a.w : 1, this
        },
        add: function(a, b) {
            return void 0 !== b ? (console.warn("THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead."), this.addVectors(a, b)) : (this.x += a.x, this.y += a.y, this.z += a.z, this.w += a.w, this)
        },
        addScalar: function(a) {
            return this.x += a, this.y += a, this.z += a, this.w += a, this
        },
        addVectors: function(a, b) {
            return this.x = a.x + b.x, this.y = a.y + b.y, this.z = a.z + b.z, this.w = a.w + b.w, this
        },
        sub: function(a, b) {
            return void 0 !== b ? (console.warn("THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead."), this.subVectors(a, b)) : (this.x -= a.x, this.y -= a.y, this.z -= a.z, this.w -= a.w, this)
        },
        subVectors: function(a, b) {
            return this.x = a.x - b.x, this.y = a.y - b.y, this.z = a.z - b.z, this.w = a.w - b.w, this
        },
        multiplyScalar: function(a) {
            return this.x *= a, this.y *= a, this.z *= a, this.w *= a, this
        },
        applyMatrix4: function(a) {
            var b = this.x,
                c = this.y,
                d = this.z,
                e = this.w,
                f = a.elements;
            return this.x = f[0] * b + f[4] * c + f[8] * d + f[12] * e, this.y = f[1] * b + f[5] * c + f[9] * d + f[13] * e, this.z = f[2] * b + f[6] * c + f[10] * d + f[14] * e, this.w = f[3] * b + f[7] * c + f[11] * d + f[15] * e, this
        },
        divideScalar: function(a) {
            if (0 !== a) {
                var b = 1 / a;
                this.x *= b, this.y *= b, this.z *= b, this.w *= b
            } else this.x = 0, this.y = 0, this.z = 0, this.w = 1;
            return this
        },
        setAxisAngleFromQuaternion: function(a) {
            this.w = 2 * Math.acos(a.w);
            var b = Math.sqrt(1 - a.w * a.w);
            return 1e-4 > b ? (this.x = 1, this.y = 0, this.z = 0) : (this.x = a.x / b, this.y = a.y / b, this.z = a.z / b), this
        },
        setAxisAngleFromRotationMatrix: function(a) {
            var b, c, d, e, f = .01,
                g = .1,
                h = a.elements,
                i = h[0],
                j = h[4],
                k = h[8],
                l = h[1],
                m = h[5],
                n = h[9],
                o = h[2],
                p = h[6],
                q = h[10];
            if (Math.abs(j - l) < f && Math.abs(k - o) < f && Math.abs(n - p) < f) {
                if (Math.abs(j + l) < g && Math.abs(k + o) < g && Math.abs(n + p) < g && Math.abs(i + m + q - 3) < g) return this.set(1, 0, 0, 0), this;
                b = Math.PI;
                var r = (i + 1) / 2,
                    s = (m + 1) / 2,
                    t = (q + 1) / 2,
                    u = (j + l) / 4,
                    v = (k + o) / 4,
                    w = (n + p) / 4;
                return r > s && r > t ? f > r ? (c = 0, d = .707106781, e = .707106781) : (c = Math.sqrt(r), d = u / c, e = v / c) : s > t ? f > s ? (c = .707106781, d = 0, e = .707106781) : (d = Math.sqrt(s), c = u / d, e = w / d) : f > t ? (c = .707106781, d = .707106781, e = 0) : (e = Math.sqrt(t), c = v / e, d = w / e), this.set(c, d, e, b), this
            }
            var x = Math.sqrt((p - n) * (p - n) + (k - o) * (k - o) + (l - j) * (l - j));
            return Math.abs(x) < .001 && (x = 1), this.x = (p - n) / x, this.y = (k - o) / x, this.z = (l - j) / x, this.w = Math.acos((i + m + q - 1) / 2), this
        },
        min: function(a) {
            return this.x > a.x && (this.x = a.x), this.y > a.y && (this.y = a.y), this.z > a.z && (this.z = a.z), this.w > a.w && (this.w = a.w), this
        },
        max: function(a) {
            return this.x < a.x && (this.x = a.x), this.y < a.y && (this.y = a.y), this.z < a.z && (this.z = a.z), this.w < a.w && (this.w = a.w), this
        },
        clamp: function(a, b) {
            return this.x < a.x ? this.x = a.x : this.x > b.x && (this.x = b.x), this.y < a.y ? this.y = a.y : this.y > b.y && (this.y = b.y), this.z < a.z ? this.z = a.z : this.z > b.z && (this.z = b.z), this.w < a.w ? this.w = a.w : this.w > b.w && (this.w = b.w), this
        },
        clampScalar: function() {
            var a, b;
            return function(c, d) {
                return void 0 === a && (a = new THREE.Vector4, b = new THREE.Vector4), a.set(c, c, c, c), b.set(d, d, d, d), this.clamp(a, b)
            }
        }(),
        floor: function() {
            return this.x = Math.floor(this.x), this.y = Math.floor(this.y), this.z = Math.floor(this.z), this.w = Math.floor(this.w), this
        },
        ceil: function() {
            return this.x = Math.ceil(this.x), this.y = Math.ceil(this.y), this.z = Math.ceil(this.z), this.w = Math.ceil(this.w), this
        },
        round: function() {
            return this.x = Math.round(this.x), this.y = Math.round(this.y), this.z = Math.round(this.z), this.w = Math.round(this.w), this
        },
        roundToZero: function() {
            return this.x = this.x < 0 ? Math.ceil(this.x) : Math.floor(this.x), this.y = this.y < 0 ? Math.ceil(this.y) : Math.floor(this.y), this.z = this.z < 0 ? Math.ceil(this.z) : Math.floor(this.z), this.w = this.w < 0 ? Math.ceil(this.w) : Math.floor(this.w), this
        },
        negate: function() {
            return this.x = -this.x, this.y = -this.y, this.z = -this.z, this.w = -this.w, this
        },
        dot: function(a) {
            return this.x * a.x + this.y * a.y + this.z * a.z + this.w * a.w
        },
        lengthSq: function() {
            return this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w
        },
        length: function() {
            return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w)
        },
        lengthManhattan: function() {
            return Math.abs(this.x) + Math.abs(this.y) + Math.abs(this.z) + Math.abs(this.w)
        },
        normalize: function() {
            return this.divideScalar(this.length())
        },
        setLength: function(a) {
            var b = this.length();
            return 0 !== b && a !== b && this.multiplyScalar(a / b), this
        },
        lerp: function(a, b) {
            return this.x += (a.x - this.x) * b, this.y += (a.y - this.y) * b, this.z += (a.z - this.z) * b, this.w += (a.w - this.w) * b, this
        },
        equals: function(a) {
            return a.x === this.x && a.y === this.y && a.z === this.z && a.w === this.w
        },
        fromArray: function(a, b) {
            return void 0 === b && (b = 0), this.x = a[b], this.y = a[b + 1], this.z = a[b + 2], this.w = a[b + 3], this
        },
        toArray: function(a, b) {
            return void 0 === a && (a = []), void 0 === b && (b = 0), a[b] = this.x, a[b + 1] = this.y, a[b + 2] = this.z, a[b + 3] = this.w, a
        },
        fromAttribute: function(a, b, c) {
            return void 0 === c && (c = 0), b = b * a.itemSize + c, this.x = a.array[b], this.y = a.array[b + 1], this.z = a.array[b + 2], this.w = a.array[b + 3], this
        },
        clone: function() {
            return new THREE.Vector4(this.x, this.y, this.z, this.w)
        }
    }, THREE.Euler = function(a, b, c, d) {
        this._x = a || 0, this._y = b || 0, this._z = c || 0, this._order = d || THREE.Euler.DefaultOrder
    }, THREE.Euler.RotationOrders = ["XYZ", "YZX", "ZXY", "XZY", "YXZ", "ZYX"], THREE.Euler.DefaultOrder = "XYZ", THREE.Euler.prototype = {
        constructor: THREE.Euler,
        _x: 0,
        _y: 0,
        _z: 0,
        _order: THREE.Euler.DefaultOrder,
        get x() {
            return this._x
        },
        set x(a) {
            this._x = a, this.onChangeCallback()
        },
        get y() {
            return this._y
        },
        set y(a) {
            this._y = a, this.onChangeCallback()
        },
        get z() {
            return this._z
        },
        set z(a) {
            this._z = a, this.onChangeCallback()
        },
        get order() {
            return this._order
        },
        set order(a) {
            this._order = a, this.onChangeCallback()
        },
        set: function(a, b, c, d) {
            return this._x = a, this._y = b, this._z = c, this._order = d || this._order, this.onChangeCallback(), this
        },
        copy: function(a) {
            return this._x = a._x, this._y = a._y, this._z = a._z, this._order = a._order, this.onChangeCallback(), this
        },
        setFromRotationMatrix: function(a, b, c) {
            var d = THREE.Math.clamp,
                e = a.elements,
                f = e[0],
                g = e[4],
                h = e[8],
                i = e[1],
                j = e[5],
                k = e[9],
                l = e[2],
                m = e[6],
                n = e[10];
            return b = b || this._order, "XYZ" === b ? (this._y = Math.asin(d(h, -1, 1)), Math.abs(h) < .99999 ? (this._x = Math.atan2(-k, n), this._z = Math.atan2(-g, f)) : (this._x = Math.atan2(m, j), this._z = 0)) : "YXZ" === b ? (this._x = Math.asin(-d(k, -1, 1)), Math.abs(k) < .99999 ? (this._y = Math.atan2(h, n), this._z = Math.atan2(i, j)) : (this._y = Math.atan2(-l, f), this._z = 0)) : "ZXY" === b ? (this._x = Math.asin(d(m, -1, 1)), Math.abs(m) < .99999 ? (this._y = Math.atan2(-l, n), this._z = Math.atan2(-g, j)) : (this._y = 0, this._z = Math.atan2(i, f))) : "ZYX" === b ? (this._y = Math.asin(-d(l, -1, 1)), Math.abs(l) < .99999 ? (this._x = Math.atan2(m, n), this._z = Math.atan2(i, f)) : (this._x = 0, this._z = Math.atan2(-g, j))) : "YZX" === b ? (this._z = Math.asin(d(i, -1, 1)), Math.abs(i) < .99999 ? (this._x = Math.atan2(-k, j), this._y = Math.atan2(-l, f)) : (this._x = 0, this._y = Math.atan2(h, n))) : "XZY" === b ? (this._z = Math.asin(-d(g, -1, 1)), Math.abs(g) < .99999 ? (this._x = Math.atan2(m, j), this._y = Math.atan2(h, f)) : (this._x = Math.atan2(-k, n), this._y = 0)) : console.warn("THREE.Euler: .setFromRotationMatrix() given unsupported order: " + b), this._order = b, c !== !1 && this.onChangeCallback(), this
        },
        setFromQuaternion: function() {
            var a;
            return function(b, c, d) {
                return void 0 === a && (a = new THREE.Matrix4), a.makeRotationFromQuaternion(b), this.setFromRotationMatrix(a, c, d), this
            }
        }(),
        setFromVector3: function(a, b) {
            return this.set(a.x, a.y, a.z, b || this._order)
        },
        reorder: function() {
            var a = new THREE.Quaternion;
            return function(b) {
                a.setFromEuler(this), this.setFromQuaternion(a, b)
            }
        }(),
        equals: function(a) {
            return a._x === this._x && a._y === this._y && a._z === this._z && a._order === this._order
        },
        fromArray: function(a) {
            return this._x = a[0], this._y = a[1], this._z = a[2], void 0 !== a[3] && (this._order = a[3]), this.onChangeCallback(), this
        },
        toArray: function() {
            return [this._x, this._y, this._z, this._order]
        },
        toVector3: function(a) {
            return a ? a.set(this._x, this._y, this._z) : new THREE.Vector3(this._x, this._y, this._z)
        },
        onChange: function(a) {
            return this.onChangeCallback = a, this
        },
        onChangeCallback: function() {},
        clone: function() {
            return new THREE.Euler(this._x, this._y, this._z, this._order)
        }
    }, THREE.Line3 = function(a, b) {
        this.start = void 0 !== a ? a : new THREE.Vector3, this.end = void 0 !== b ? b : new THREE.Vector3
    }, THREE.Line3.prototype = {
        constructor: THREE.Line3,
        set: function(a, b) {
            return this.start.copy(a), this.end.copy(b), this
        },
        copy: function(a) {
            return this.start.copy(a.start), this.end.copy(a.end), this
        },
        center: function(a) {
            var b = a || new THREE.Vector3;
            return b.addVectors(this.start, this.end).multiplyScalar(.5)
        },
        delta: function(a) {
            var b = a || new THREE.Vector3;
            return b.subVectors(this.end, this.start)
        },
        distanceSq: function() {
            return this.start.distanceToSquared(this.end)
        },
        distance: function() {
            return this.start.distanceTo(this.end)
        },
        at: function(a, b) {
            var c = b || new THREE.Vector3;
            return this.delta(c).multiplyScalar(a).add(this.start)
        },
        closestPointToPointParameter: function() {
            var a = new THREE.Vector3,
                b = new THREE.Vector3;
            return function(c, d) {
                a.subVectors(c, this.start), b.subVectors(this.end, this.start);
                var e = b.dot(b),
                    f = b.dot(a),
                    g = f / e;
                return d && (g = THREE.Math.clamp(g, 0, 1)), g
            }
        }(),
        closestPointToPoint: function(a, b, c) {
            var d = this.closestPointToPointParameter(a, b),
                e = c || new THREE.Vector3;
            return this.delta(e).multiplyScalar(d).add(this.start)
        },
        applyMatrix4: function(a) {
            return this.start.applyMatrix4(a), this.end.applyMatrix4(a), this
        },
        equals: function(a) {
            return a.start.equals(this.start) && a.end.equals(this.end)
        },
        clone: function() {
            return (new THREE.Line3).copy(this)
        }
    }, THREE.Box2 = function(a, b) {
        this.min = void 0 !== a ? a : new THREE.Vector2(1 / 0, 1 / 0), this.max = void 0 !== b ? b : new THREE.Vector2(-(1 / 0), -(1 / 0))
    }, THREE.Box2.prototype = {
        constructor: THREE.Box2,
        set: function(a, b) {
            return this.min.copy(a), this.max.copy(b), this
        },
        setFromPoints: function(a) {
            this.makeEmpty();
            for (var b = 0, c = a.length; c > b; b++) this.expandByPoint(a[b]);
            return this
        },
        setFromCenterAndSize: function() {
            var a = new THREE.Vector2;
            return function(b, c) {
                var d = a.copy(c).multiplyScalar(.5);
                return this.min.copy(b).sub(d), this.max.copy(b).add(d), this
            }
        }(),
        copy: function(a) {
            return this.min.copy(a.min), this.max.copy(a.max), this
        },
        makeEmpty: function() {
            return this.min.x = this.min.y = 1 / 0, this.max.x = this.max.y = -(1 / 0), this
        },
        empty: function() {
            return this.max.x < this.min.x || this.max.y < this.min.y
        },
        center: function(a) {
            var b = a || new THREE.Vector2;
            return b.addVectors(this.min, this.max).multiplyScalar(.5)
        },
        size: function(a) {
            var b = a || new THREE.Vector2;
            return b.subVectors(this.max, this.min)
        },
        expandByPoint: function(a) {
            return this.min.min(a), this.max.max(a), this
        },
        expandByVector: function(a) {
            return this.min.sub(a), this.max.add(a), this
        },
        expandByScalar: function(a) {
            return this.min.addScalar(-a), this.max.addScalar(a), this
        },
        containsPoint: function(a) {
            return a.x < this.min.x || a.x > this.max.x || a.y < this.min.y || a.y > this.max.y ? !1 : !0
        },
        containsBox: function(a) {
            return this.min.x <= a.min.x && a.max.x <= this.max.x && this.min.y <= a.min.y && a.max.y <= this.max.y ? !0 : !1
        },
        getParameter: function(a, b) {
            var c = b || new THREE.Vector2;
            return c.set((a.x - this.min.x) / (this.max.x - this.min.x), (a.y - this.min.y) / (this.max.y - this.min.y))
        },
        isIntersectionBox: function(a) {
            return a.max.x < this.min.x || a.min.x > this.max.x || a.max.y < this.min.y || a.min.y > this.max.y ? !1 : !0
        },
        clampPoint: function(a, b) {
            var c = b || new THREE.Vector2;
            return c.copy(a).clamp(this.min, this.max)
        },
        distanceToPoint: function() {
            var a = new THREE.Vector2;
            return function(b) {
                var c = a.copy(b).clamp(this.min, this.max);
                return c.sub(b).length()
            }
        }(),
        intersect: function(a) {
            return this.min.max(a.min), this.max.min(a.max), this
        },
        union: function(a) {
            return this.min.min(a.min), this.max.max(a.max), this
        },
        translate: function(a) {
            return this.min.add(a), this.max.add(a), this
        },
        equals: function(a) {
            return a.min.equals(this.min) && a.max.equals(this.max)
        },
        clone: function() {
            return (new THREE.Box2).copy(this)
        }
    }, THREE.Box3 = function(a, b) {
        this.min = void 0 !== a ? a : new THREE.Vector3(1 / 0, 1 / 0, 1 / 0), this.max = void 0 !== b ? b : new THREE.Vector3(-(1 / 0), -(1 / 0), -(1 / 0))
    }, THREE.Box3.prototype = {
        constructor: THREE.Box3,
        set: function(a, b) {
            return this.min.copy(a), this.max.copy(b), this
        },
        setFromPoints: function(a) {
            this.makeEmpty();
            for (var b = 0, c = a.length; c > b; b++) this.expandByPoint(a[b]);
            return this
        },
        setFromCenterAndSize: function() {
            var a = new THREE.Vector3;
            return function(b, c) {
                var d = a.copy(c).multiplyScalar(.5);
                return this.min.copy(b).sub(d), this.max.copy(b).add(d), this
            }
        }(),
        setFromObject: function() {
            var a = new THREE.Vector3;
            return function(b) {
                var c = this;
                return b.updateMatrixWorld(!0), this.makeEmpty(), b.traverse(function(b) {
                    var d = b.geometry;
                    if (void 0 !== d)
                        if (d instanceof THREE.Geometry)
                            for (var e = d.vertices, f = 0, g = e.length; g > f; f++) a.copy(e[f]), a.applyMatrix4(b.matrixWorld), c.expandByPoint(a);
                        else if (d instanceof THREE.BufferGeometry && void 0 !== d.attributes.position)
                        for (var h = d.attributes.position.array, f = 0, g = h.length; g > f; f += 3) a.set(h[f], h[f + 1], h[f + 2]), a.applyMatrix4(b.matrixWorld), c.expandByPoint(a)
                }), this
            }
        }(),
        copy: function(a) {
            return this.min.copy(a.min), this.max.copy(a.max), this
        },
        makeEmpty: function() {
            return this.min.x = this.min.y = this.min.z = 1 / 0, this.max.x = this.max.y = this.max.z = -(1 / 0), this
        },
        empty: function() {
            return this.max.x < this.min.x || this.max.y < this.min.y || this.max.z < this.min.z
        },
        center: function(a) {
            var b = a || new THREE.Vector3;
            return b.addVectors(this.min, this.max).multiplyScalar(.5)
        },
        size: function(a) {
            var b = a || new THREE.Vector3;
            return b.subVectors(this.max, this.min)
        },
        expandByPoint: function(a) {
            return this.min.min(a), this.max.max(a), this
        },
        expandByVector: function(a) {
            return this.min.sub(a), this.max.add(a), this
        },
        expandByScalar: function(a) {
            return this.min.addScalar(-a), this.max.addScalar(a), this
        },
        containsPoint: function(a) {
            return a.x < this.min.x || a.x > this.max.x || a.y < this.min.y || a.y > this.max.y || a.z < this.min.z || a.z > this.max.z ? !1 : !0
        },
        containsBox: function(a) {
            return this.min.x <= a.min.x && a.max.x <= this.max.x && this.min.y <= a.min.y && a.max.y <= this.max.y && this.min.z <= a.min.z && a.max.z <= this.max.z ? !0 : !1
        },
        getParameter: function(a, b) {
            var c = b || new THREE.Vector3;
            return c.set((a.x - this.min.x) / (this.max.x - this.min.x), (a.y - this.min.y) / (this.max.y - this.min.y), (a.z - this.min.z) / (this.max.z - this.min.z))
        },
        isIntersectionBox: function(a) {
            return a.max.x < this.min.x || a.min.x > this.max.x || a.max.y < this.min.y || a.min.y > this.max.y || a.max.z < this.min.z || a.min.z > this.max.z ? !1 : !0
        },
        clampPoint: function(a, b) {
            var c = b || new THREE.Vector3;
            return c.copy(a).clamp(this.min, this.max)
        },
        distanceToPoint: function() {
            var a = new THREE.Vector3;
            return function(b) {
                var c = a.copy(b).clamp(this.min, this.max);
                return c.sub(b).length()
            }
        }(),
        getBoundingSphere: function() {
            var a = new THREE.Vector3;
            return function(b) {
                var c = b || new THREE.Sphere;
                return c.center = this.center(), c.radius = .5 * this.size(a).length(), c
            }
        }(),
        intersect: function(a) {
            return this.min.max(a.min), this.max.min(a.max), this
        },
        union: function(a) {
            return this.min.min(a.min), this.max.max(a.max), this
        },
        applyMatrix4: function() {
            var a = [new THREE.Vector3, new THREE.Vector3, new THREE.Vector3, new THREE.Vector3, new THREE.Vector3, new THREE.Vector3, new THREE.Vector3, new THREE.Vector3];
            return function(b) {
                return a[0].set(this.min.x, this.min.y, this.min.z).applyMatrix4(b), a[1].set(this.min.x, this.min.y, this.max.z).applyMatrix4(b), a[2].set(this.min.x, this.max.y, this.min.z).applyMatrix4(b), a[3].set(this.min.x, this.max.y, this.max.z).applyMatrix4(b), a[4].set(this.max.x, this.min.y, this.min.z).applyMatrix4(b), a[5].set(this.max.x, this.min.y, this.max.z).applyMatrix4(b), a[6].set(this.max.x, this.max.y, this.min.z).applyMatrix4(b), a[7].set(this.max.x, this.max.y, this.max.z).applyMatrix4(b), this.makeEmpty(), this.setFromPoints(a), this
            }
        }(),
        translate: function(a) {
            return this.min.add(a), this.max.add(a), this
        },
        equals: function(a) {
            return a.min.equals(this.min) && a.max.equals(this.max)
        },
        clone: function() {
            return (new THREE.Box3).copy(this)
        }
    }, THREE.Matrix3 = function() {
        this.elements = new Float32Array([1, 0, 0, 0, 1, 0, 0, 0, 1]), arguments.length > 0 && console.error("THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.")
    }, THREE.Matrix3.prototype = {
        constructor: THREE.Matrix3,
        set: function(a, b, c, d, e, f, g, h, i) {
            var j = this.elements;
            return j[0] = a, j[3] = b, j[6] = c, j[1] = d, j[4] = e, j[7] = f, j[2] = g, j[5] = h, j[8] = i, this
        },
        identity: function() {
            return this.set(1, 0, 0, 0, 1, 0, 0, 0, 1), this
        },
        copy: function(a) {
            var b = a.elements;
            return this.set(b[0], b[3], b[6], b[1], b[4], b[7], b[2], b[5], b[8]), this
        },
        multiplyVector3: function(a) {
            return console.warn("THREE.Matrix3: .multiplyVector3() has been removed. Use vector.applyMatrix3( matrix ) instead."), a.applyMatrix3(this)
        },
        multiplyVector3Array: function(a) {
            return console.warn("THREE.Matrix3: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."), this.applyToVector3Array(a)
        },
        applyToVector3Array: function() {
            var a = new THREE.Vector3;
            return function(b, c, d) {
                void 0 === c && (c = 0), void 0 === d && (d = b.length);
                for (var e = 0, f = c; d > e; e += 3, f += 3) a.x = b[f], a.y = b[f + 1], a.z = b[f + 2], a.applyMatrix3(this), b[f] = a.x, b[f + 1] = a.y, b[f + 2] = a.z;
                return b
            }
        }(),
        multiplyScalar: function(a) {
            var b = this.elements;
            return b[0] *= a, b[3] *= a, b[6] *= a, b[1] *= a, b[4] *= a, b[7] *= a, b[2] *= a, b[5] *= a, b[8] *= a, this
        },
        determinant: function() {
            var a = this.elements,
                b = a[0],
                c = a[1],
                d = a[2],
                e = a[3],
                f = a[4],
                g = a[5],
                h = a[6],
                i = a[7],
                j = a[8];
            return b * f * j - b * g * i - c * e * j + c * g * h + d * e * i - d * f * h
        },
        getInverse: function(a, b) {
            var c = a.elements,
                d = this.elements;
            d[0] = c[10] * c[5] - c[6] * c[9], d[1] = -c[10] * c[1] + c[2] * c[9], d[2] = c[6] * c[1] - c[2] * c[5], d[3] = -c[10] * c[4] + c[6] * c[8], d[4] = c[10] * c[0] - c[2] * c[8], d[5] = -c[6] * c[0] + c[2] * c[4], d[6] = c[9] * c[4] - c[5] * c[8], d[7] = -c[9] * c[0] + c[1] * c[8], d[8] = c[5] * c[0] - c[1] * c[4];
            var e = c[0] * d[0] + c[1] * d[3] + c[2] * d[6];
            if (0 === e) {
                var f = "Matrix3.getInverse(): can't invert matrix, determinant is 0";
                if (b) throw new Error(f);
                return console.warn(f), this.identity(), this
            }
            return this.multiplyScalar(1 / e), this
        },
        transpose: function() {
            var a, b = this.elements;
            return a = b[1], b[1] = b[3], b[3] = a, a = b[2], b[2] = b[6], b[6] = a, a = b[5], b[5] = b[7], b[7] = a, this
        },
        flattenToArrayOffset: function(a, b) {
            var c = this.elements;
            return a[b] = c[0], a[b + 1] = c[1], a[b + 2] = c[2], a[b + 3] = c[3], a[b + 4] = c[4], a[b + 5] = c[5], a[b + 6] = c[6], a[b + 7] = c[7], a[b + 8] = c[8], a
        },
        getNormalMatrix: function(a) {
            return this.getInverse(a).transpose(), this
        },
        transposeIntoArray: function(a) {
            var b = this.elements;
            return a[0] = b[0], a[1] = b[3], a[2] = b[6], a[3] = b[1], a[4] = b[4], a[5] = b[7], a[6] = b[2], a[7] = b[5], a[8] = b[8], this
        },
        fromArray: function(a) {
            return this.elements.set(a), this
        },
        toArray: function() {
            var a = this.elements;
            return [a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]]
        },
        clone: function() {
            return (new THREE.Matrix3).fromArray(this.elements)
        }
    }, THREE.Matrix4 = function() {
        this.elements = new Float32Array([1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1]), arguments.length > 0 && console.error("THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.")
    }, THREE.Matrix4.prototype = {
        constructor: THREE.Matrix4,
        set: function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {
            var q = this.elements;
            return q[0] = a, q[4] = b, q[8] = c, q[12] = d, q[1] = e, q[5] = f, q[9] = g, q[13] = h, q[2] = i, q[6] = j, q[10] = k, q[14] = l, q[3] = m, q[7] = n, q[11] = o, q[15] = p, this
        },
        identity: function() {
            return this.set(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
        },
        copy: function(a) {
            return this.elements.set(a.elements), this
        },
        extractPosition: function(a) {
            return console.warn("THREE.Matrix4: .extractPosition() has been renamed to .copyPosition()."), this.copyPosition(a)
        },
        copyPosition: function(a) {
            var b = this.elements,
                c = a.elements;
            return b[12] = c[12], b[13] = c[13], b[14] = c[14], this
        },
        extractBasis: function(a, b, c) {
            var d = this.elements;
            return a.set(d[0], d[1], d[2]), b.set(d[4], d[5], d[6]), c.set(d[8], d[9], d[10]), this
        },
        makeBasis: function(a, b, c) {
            return this.set(a.x, b.x, c.x, 0, a.y, b.y, c.y, 0, a.z, b.z, c.z, 0, 0, 0, 0, 1), this
        },
        extractRotation: function() {
            var a = new THREE.Vector3;
            return function(b) {
                var c = this.elements,
                    d = b.elements,
                    e = 1 / a.set(d[0], d[1], d[2]).length(),
                    f = 1 / a.set(d[4], d[5], d[6]).length(),
                    g = 1 / a.set(d[8], d[9], d[10]).length();
                return c[0] = d[0] * e, c[1] = d[1] * e, c[2] = d[2] * e, c[4] = d[4] * f, c[5] = d[5] * f, c[6] = d[6] * f, c[8] = d[8] * g, c[9] = d[9] * g, c[10] = d[10] * g, this
            }
        }(),
        makeRotationFromEuler: function(a) {
            a instanceof THREE.Euler == !1 && console.error("THREE.Matrix: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.");
            var b = this.elements,
                c = a.x,
                d = a.y,
                e = a.z,
                f = Math.cos(c),
                g = Math.sin(c),
                h = Math.cos(d),
                i = Math.sin(d),
                j = Math.cos(e),
                k = Math.sin(e);
            if ("XYZ" === a.order) {
                var l = f * j,
                    m = f * k,
                    n = g * j,
                    o = g * k;
                b[0] = h * j, b[4] = -h * k, b[8] = i, b[1] = m + n * i, b[5] = l - o * i, b[9] = -g * h, b[2] = o - l * i, b[6] = n + m * i, b[10] = f * h
            } else if ("YXZ" === a.order) {
                var p = h * j,
                    q = h * k,
                    r = i * j,
                    s = i * k;
                b[0] = p + s * g, b[4] = r * g - q, b[8] = f * i, b[1] = f * k, b[5] = f * j, b[9] = -g, b[2] = q * g - r, b[6] = s + p * g, b[10] = f * h
            } else if ("ZXY" === a.order) {
                var p = h * j,
                    q = h * k,
                    r = i * j,
                    s = i * k;
                b[0] = p - s * g, b[4] = -f * k, b[8] = r + q * g, b[1] = q + r * g, b[5] = f * j, b[9] = s - p * g, b[2] = -f * i, b[6] = g, b[10] = f * h
            } else if ("ZYX" === a.order) {
                var l = f * j,
                    m = f * k,
                    n = g * j,
                    o = g * k;
                b[0] = h * j, b[4] = n * i - m, b[8] = l * i + o, b[1] = h * k, b[5] = o * i + l, b[9] = m * i - n, b[2] = -i, b[6] = g * h, b[10] = f * h
            } else if ("YZX" === a.order) {
                var t = f * h,
                    u = f * i,
                    v = g * h,
                    w = g * i;
                b[0] = h * j, b[4] = w - t * k, b[8] = v * k + u, b[1] = k, b[5] = f * j, b[9] = -g * j, b[2] = -i * j, b[6] = u * k + v, b[10] = t - w * k
            } else if ("XZY" === a.order) {
                var t = f * h,
                    u = f * i,
                    v = g * h,
                    w = g * i;
                b[0] = h * j, b[4] = -k, b[8] = i * j, b[1] = t * k + w, b[5] = f * j, b[9] = u * k - v, b[2] = v * k - u, b[6] = g * j, b[10] = w * k + t
            }
            return b[3] = 0, b[7] = 0, b[11] = 0, b[12] = 0, b[13] = 0, b[14] = 0, b[15] = 1, this
        },
        setRotationFromQuaternion: function(a) {
            return console.warn("THREE.Matrix4: .setRotationFromQuaternion() has been renamed to .makeRotationFromQuaternion()."), this.makeRotationFromQuaternion(a)
        },
        makeRotationFromQuaternion: function(a) {
            var b = this.elements,
                c = a.x,
                d = a.y,
                e = a.z,
                f = a.w,
                g = c + c,
                h = d + d,
                i = e + e,
                j = c * g,
                k = c * h,
                l = c * i,
                m = d * h,
                n = d * i,
                o = e * i,
                p = f * g,
                q = f * h,
                r = f * i;
            return b[0] = 1 - (m + o), b[4] = k - r, b[8] = l + q, b[1] = k + r, b[5] = 1 - (j + o), b[9] = n - p, b[2] = l - q, b[6] = n + p, b[10] = 1 - (j + m), b[3] = 0, b[7] = 0, b[11] = 0, b[12] = 0, b[13] = 0, b[14] = 0, b[15] = 1, this
        },
        lookAt: function() {
            var a = new THREE.Vector3,
                b = new THREE.Vector3,
                c = new THREE.Vector3;
            return function(d, e, f) {
                var g = this.elements;
                return c.subVectors(d, e).normalize(), 0 === c.length() && (c.z = 1), a.crossVectors(f, c).normalize(), 0 === a.length() && (c.x += 1e-4, a.crossVectors(f, c).normalize()), b.crossVectors(c, a), g[0] = a.x, g[4] = b.x, g[8] = c.x, g[1] = a.y, g[5] = b.y, g[9] = c.y, g[2] = a.z, g[6] = b.z, g[10] = c.z, this
            }
        }(),
        multiply: function(a, b) {
            return void 0 !== b ? (console.warn("THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead."), this.multiplyMatrices(a, b)) : this.multiplyMatrices(this, a)
        },
        multiplyMatrices: function(a, b) {
            var c = a.elements,
                d = b.elements,
                e = this.elements,
                f = c[0],
                g = c[4],
                h = c[8],
                i = c[12],
                j = c[1],
                k = c[5],
                l = c[9],
                m = c[13],
                n = c[2],
                o = c[6],
                p = c[10],
                q = c[14],
                r = c[3],
                s = c[7],
                t = c[11],
                u = c[15],
                v = d[0],
                w = d[4],
                x = d[8],
                y = d[12],
                z = d[1],
                A = d[5],
                B = d[9],
                C = d[13],
                D = d[2],
                E = d[6],
                F = d[10],
                G = d[14],
                H = d[3],
                I = d[7],
                J = d[11],
                K = d[15];
            return e[0] = f * v + g * z + h * D + i * H, e[4] = f * w + g * A + h * E + i * I, e[8] = f * x + g * B + h * F + i * J, e[12] = f * y + g * C + h * G + i * K, e[1] = j * v + k * z + l * D + m * H, e[5] = j * w + k * A + l * E + m * I, e[9] = j * x + k * B + l * F + m * J, e[13] = j * y + k * C + l * G + m * K, e[2] = n * v + o * z + p * D + q * H, e[6] = n * w + o * A + p * E + q * I, e[10] = n * x + o * B + p * F + q * J, e[14] = n * y + o * C + p * G + q * K, e[3] = r * v + s * z + t * D + u * H, e[7] = r * w + s * A + t * E + u * I, e[11] = r * x + s * B + t * F + u * J, e[15] = r * y + s * C + t * G + u * K, this
        },
        multiplyToArray: function(a, b, c) {
            var d = this.elements;
            return this.multiplyMatrices(a, b), c[0] = d[0], c[1] = d[1], c[2] = d[2], c[3] = d[3], c[4] = d[4], c[5] = d[5], c[6] = d[6], c[7] = d[7], c[8] = d[8], c[9] = d[9], c[10] = d[10], c[11] = d[11], c[12] = d[12], c[13] = d[13], c[14] = d[14], c[15] = d[15], this
        },
        multiplyScalar: function(a) {
            var b = this.elements;
            return b[0] *= a, b[4] *= a, b[8] *= a, b[12] *= a, b[1] *= a, b[5] *= a, b[9] *= a, b[13] *= a, b[2] *= a, b[6] *= a, b[10] *= a, b[14] *= a, b[3] *= a, b[7] *= a, b[11] *= a, b[15] *= a, this
        },
        multiplyVector3: function(a) {
            return console.warn("THREE.Matrix4: .multiplyVector3() has been removed. Use vector.applyMatrix4( matrix ) or vector.applyProjection( matrix ) instead."), a.applyProjection(this)
        },
        multiplyVector4: function(a) {
            return console.warn("THREE.Matrix4: .multiplyVector4() has been removed. Use vector.applyMatrix4( matrix ) instead."), a.applyMatrix4(this)
        },
        multiplyVector3Array: function(a) {
            return console.warn("THREE.Matrix4: .multiplyVector3Array() has been renamed. Use matrix.applyToVector3Array( array ) instead."), this.applyToVector3Array(a)
        },
        applyToVector3Array: function() {
            var a = new THREE.Vector3;
            return function(b, c, d) {
                void 0 === c && (c = 0), void 0 === d && (d = b.length);
                for (var e = 0, f = c; d > e; e += 3, f += 3) a.x = b[f], a.y = b[f + 1], a.z = b[f + 2], a.applyMatrix4(this), b[f] = a.x, b[f + 1] = a.y, b[f + 2] = a.z;
                return b
            }
        }(),
        rotateAxis: function(a) {
            console.warn("THREE.Matrix4: .rotateAxis() has been removed. Use Vector3.transformDirection( matrix ) instead."), a.transformDirection(this)
        },
        crossVector: function(a) {
            return console.warn("THREE.Matrix4: .crossVector() has been removed. Use vector.applyMatrix4( matrix ) instead."), a.applyMatrix4(this)
        },
        determinant: function() {
            var a = this.elements,
                b = a[0],
                c = a[4],
                d = a[8],
                e = a[12],
                f = a[1],
                g = a[5],
                h = a[9],
                i = a[13],
                j = a[2],
                k = a[6],
                l = a[10],
                m = a[14],
                n = a[3],
                o = a[7],
                p = a[11],
                q = a[15];
            return n * (+e * h * k - d * i * k - e * g * l + c * i * l + d * g * m - c * h * m) + o * (+b * h * m - b * i * l + e * f * l - d * f * m + d * i * j - e * h * j) + p * (+b * i * k - b * g * m - e * f * k + c * f * m + e * g * j - c * i * j) + q * (-d * g * j - b * h * k + b * g * l + d * f * k - c * f * l + c * h * j)
        },
        transpose: function() {
            var a, b = this.elements;
            return a = b[1], b[1] = b[4], b[4] = a, a = b[2], b[2] = b[8], b[8] = a, a = b[6], b[6] = b[9], b[9] = a, a = b[3], b[3] = b[12], b[12] = a, a = b[7], b[7] = b[13], b[13] = a, a = b[11], b[11] = b[14], b[14] = a, this
        },
        flattenToArrayOffset: function(a, b) {
            var c = this.elements;
            return a[b] = c[0], a[b + 1] = c[1], a[b + 2] = c[2], a[b + 3] = c[3], a[b + 4] = c[4], a[b + 5] = c[5], a[b + 6] = c[6], a[b + 7] = c[7], a[b + 8] = c[8], a[b + 9] = c[9], a[b + 10] = c[10], a[b + 11] = c[11], a[b + 12] = c[12], a[b + 13] = c[13], a[b + 14] = c[14], a[b + 15] = c[15], a
        },
        getPosition: function() {
            var a = new THREE.Vector3;
            return function() {
                console.warn("THREE.Matrix4: .getPosition() has been removed. Use Vector3.setFromMatrixPosition( matrix ) instead.");
                var b = this.elements;
                return a.set(b[12], b[13], b[14])
            }
        }(),
        setPosition: function(a) {
            var b = this.elements;
            return b[12] = a.x, b[13] = a.y, b[14] = a.z, this
        },
        getInverse: function(a, b) {
            var c = this.elements,
                d = a.elements,
                e = d[0],
                f = d[4],
                g = d[8],
                h = d[12],
                i = d[1],
                j = d[5],
                k = d[9],
                l = d[13],
                m = d[2],
                n = d[6],
                o = d[10],
                p = d[14],
                q = d[3],
                r = d[7],
                s = d[11],
                t = d[15];
            c[0] = k * p * r - l * o * r + l * n * s - j * p * s - k * n * t + j * o * t, c[4] = h * o * r - g * p * r - h * n * s + f * p * s + g * n * t - f * o * t, c[8] = g * l * r - h * k * r + h * j * s - f * l * s - g * j * t + f * k * t, c[12] = h * k * n - g * l * n - h * j * o + f * l * o + g * j * p - f * k * p, c[1] = l * o * q - k * p * q - l * m * s + i * p * s + k * m * t - i * o * t, c[5] = g * p * q - h * o * q + h * m * s - e * p * s - g * m * t + e * o * t, c[9] = h * k * q - g * l * q - h * i * s + e * l * s + g * i * t - e * k * t, c[13] = g * l * m - h * k * m + h * i * o - e * l * o - g * i * p + e * k * p, c[2] = j * p * q - l * n * q + l * m * r - i * p * r - j * m * t + i * n * t, c[6] = h * n * q - f * p * q - h * m * r + e * p * r + f * m * t - e * n * t, c[10] = f * l * q - h * j * q + h * i * r - e * l * r - f * i * t + e * j * t, c[14] = h * j * m - f * l * m - h * i * n + e * l * n + f * i * p - e * j * p, c[3] = k * n * q - j * o * q - k * m * r + i * o * r + j * m * s - i * n * s, c[7] = f * o * q - g * n * q + g * m * r - e * o * r - f * m * s + e * n * s, c[11] = g * j * q - f * k * q - g * i * r + e * k * r + f * i * s - e * j * s, c[15] = f * k * m - g * j * m + g * i * n - e * k * n - f * i * o + e * j * o;
            var u = e * c[0] + i * c[4] + m * c[8] + q * c[12];
            if (0 == u) {
                var v = "Matrix4.getInverse(): can't invert matrix, determinant is 0";
                if (b) throw new Error(v);
                return console.warn(v), this.identity(), this
            }
            return this.multiplyScalar(1 / u), this
        },
        translate: function() {
            console.warn("THREE.Matrix4: .translate() has been removed.")
        },
        rotateX: function() {
            console.warn("THREE.Matrix4: .rotateX() has been removed.")
        },
        rotateY: function() {
            console.warn("THREE.Matrix4: .rotateY() has been removed.")
        },
        rotateZ: function() {
            console.warn("THREE.Matrix4: .rotateZ() has been removed.")
        },
        rotateByAxis: function() {
            console.warn("THREE.Matrix4: .rotateByAxis() has been removed.")
        },
        scale: function(a) {
            var b = this.elements,
                c = a.x,
                d = a.y,
                e = a.z;
            return b[0] *= c, b[4] *= d, b[8] *= e, b[1] *= c, b[5] *= d, b[9] *= e, b[2] *= c, b[6] *= d, b[10] *= e, b[3] *= c, b[7] *= d, b[11] *= e, this
        },
        getMaxScaleOnAxis: function() {
            var a = this.elements,
                b = a[0] * a[0] + a[1] * a[1] + a[2] * a[2],
                c = a[4] * a[4] + a[5] * a[5] + a[6] * a[6],
                d = a[8] * a[8] + a[9] * a[9] + a[10] * a[10];
            return Math.sqrt(Math.max(b, Math.max(c, d)))
        },
        makeTranslation: function(a, b, c) {
            return this.set(1, 0, 0, a, 0, 1, 0, b, 0, 0, 1, c, 0, 0, 0, 1), this
        },
        makeRotationX: function(a) {
            var b = Math.cos(a),
                c = Math.sin(a);
            return this.set(1, 0, 0, 0, 0, b, -c, 0, 0, c, b, 0, 0, 0, 0, 1), this
        },
        makeRotationY: function(a) {
            var b = Math.cos(a),
                c = Math.sin(a);
            return this.set(b, 0, c, 0, 0, 1, 0, 0, -c, 0, b, 0, 0, 0, 0, 1), this
        },
        makeRotationZ: function(a) {
            var b = Math.cos(a),
                c = Math.sin(a);
            return this.set(b, -c, 0, 0, c, b, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1), this
        },
        makeRotationAxis: function(a, b) {
            var c = Math.cos(b),
                d = Math.sin(b),
                e = 1 - c,
                f = a.x,
                g = a.y,
                h = a.z,
                i = e * f,
                j = e * g;
            return this.set(i * f + c, i * g - d * h, i * h + d * g, 0, i * g + d * h, j * g + c, j * h - d * f, 0, i * h - d * g, j * h + d * f, e * h * h + c, 0, 0, 0, 0, 1), this
        },
        makeScale: function(a, b, c) {
            return this.set(a, 0, 0, 0, 0, b, 0, 0, 0, 0, c, 0, 0, 0, 0, 1), this
        },
        compose: function(a, b, c) {
            return this.makeRotationFromQuaternion(b), this.scale(c), this.setPosition(a), this
        },
        decompose: function() {
            var a = new THREE.Vector3,
                b = new THREE.Matrix4;
            return function(c, d, e) {
                var f = this.elements,
                    g = a.set(f[0], f[1], f[2]).length(),
                    h = a.set(f[4], f[5], f[6]).length(),
                    i = a.set(f[8], f[9], f[10]).length(),
                    j = this.determinant();
                0 > j && (g = -g), c.x = f[12], c.y = f[13], c.z = f[14], b.elements.set(this.elements);
                var k = 1 / g,
                    l = 1 / h,
                    m = 1 / i;
                return b.elements[0] *= k, b.elements[1] *= k, b.elements[2] *= k, b.elements[4] *= l, b.elements[5] *= l, b.elements[6] *= l, b.elements[8] *= m, b.elements[9] *= m, b.elements[10] *= m, d.setFromRotationMatrix(b), e.x = g, e.y = h, e.z = i, this
            }
        }(),
        makeFrustum: function(a, b, c, d, e, f) {
            var g = this.elements,
                h = 2 * e / (b - a),
                i = 2 * e / (d - c),
                j = (b + a) / (b - a),
                k = (d + c) / (d - c),
                l = -(f + e) / (f - e),
                m = -2 * f * e / (f - e);
            return g[0] = h, g[4] = 0, g[8] = j, g[12] = 0, g[1] = 0, g[5] = i, g[9] = k, g[13] = 0, g[2] = 0, g[6] = 0, g[10] = l, g[14] = m, g[3] = 0, g[7] = 0, g[11] = -1, g[15] = 0, this
        },
        makePerspective: function(a, b, c, d) {
            var e = c * Math.tan(THREE.Math.degToRad(.5 * a)),
                f = -e,
                g = f * b,
                h = e * b;
            return this.makeFrustum(g, h, f, e, c, d)
        },
        makeOrthographic: function(a, b, c, d, e, f) {
            var g = this.elements,
                h = b - a,
                i = c - d,
                j = f - e,
                k = (b + a) / h,
                l = (c + d) / i,
                m = (f + e) / j;
            return g[0] = 2 / h, g[4] = 0, g[8] = 0, g[12] = -k, g[1] = 0, g[5] = 2 / i, g[9] = 0, g[13] = -l, g[2] = 0, g[6] = 0, g[10] = -2 / j, g[14] = -m, g[3] = 0, g[7] = 0, g[11] = 0, g[15] = 1, this
        },
        fromArray: function(a) {
            return this.elements.set(a), this
        },
        toArray: function() {
            var a = this.elements;
            return [a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]]
        },
        clone: function() {
            return (new THREE.Matrix4).fromArray(this.elements)
        }
    }, THREE.Ray = function(a, b) {
        this.origin = void 0 !== a ? a : new THREE.Vector3, this.direction = void 0 !== b ? b : new THREE.Vector3
    }, THREE.Ray.prototype = {
        constructor: THREE.Ray,
        set: function(a, b) {
            return this.origin.copy(a), this.direction.copy(b), this
        },
        copy: function(a) {
            return this.origin.copy(a.origin), this.direction.copy(a.direction), this
        },
        at: function(a, b) {
            var c = b || new THREE.Vector3;
            return c.copy(this.direction).multiplyScalar(a).add(this.origin)
        },
        recast: function() {
            var a = new THREE.Vector3;
            return function(b) {
                return this.origin.copy(this.at(b, a)), this
            }
        }(),
        closestPointToPoint: function(a, b) {
            var c = b || new THREE.Vector3;
            c.subVectors(a, this.origin);
            var d = c.dot(this.direction);
            return 0 > d ? c.copy(this.origin) : c.copy(this.direction).multiplyScalar(d).add(this.origin)
        },
        distanceToPoint: function() {
            var a = new THREE.Vector3;
            return function(b) {
                var c = a.subVectors(b, this.origin).dot(this.direction);
                return 0 > c ? this.origin.distanceTo(b) : (a.copy(this.direction).multiplyScalar(c).add(this.origin), a.distanceTo(b))
            }
        }(),
        distanceSqToSegment: function() {
            var a = new THREE.Vector3,
                b = new THREE.Vector3,
                c = new THREE.Vector3;
            return function(d, e, f, g) {
                a.copy(d).add(e).multiplyScalar(.5), b.copy(e).sub(d).normalize(), c.copy(this.origin).sub(a);
                var h, i, j, k, l = .5 * d.distanceTo(e),
                    m = -this.direction.dot(b),
                    n = c.dot(this.direction),
                    o = -c.dot(b),
                    p = c.lengthSq(),
                    q = Math.abs(1 - m * m);
                if (q > 0)
                    if (h = m * o - n, i = m * n - o, k = l * q, h >= 0)
                        if (i >= -k)
                            if (k >= i) {
                                var r = 1 / q;
                                h *= r, i *= r, j = h * (h + m * i + 2 * n) + i * (m * h + i + 2 * o) + p
                            } else i = l, h = Math.max(0, -(m * i + n)), j = -h * h + i * (i + 2 * o) + p;
                else i = -l, h = Math.max(0, -(m * i + n)), j = -h * h + i * (i + 2 * o) + p;
                else -k >= i ? (h = Math.max(0, -(-m * l + n)), i = h > 0 ? -l : Math.min(Math.max(-l, -o), l), j = -h * h + i * (i + 2 * o) + p) : k >= i ? (h = 0, i = Math.min(Math.max(-l, -o), l), j = i * (i + 2 * o) + p) : (h = Math.max(0, -(m * l + n)), i = h > 0 ? l : Math.min(Math.max(-l, -o), l), j = -h * h + i * (i + 2 * o) + p);
                else i = m > 0 ? -l : l, h = Math.max(0, -(m * i + n)), j = -h * h + i * (i + 2 * o) + p;
                return f && f.copy(this.direction).multiplyScalar(h).add(this.origin),
                    g && g.copy(b).multiplyScalar(i).add(a), j
            }
        }(),
        isIntersectionSphere: function(a) {
            return this.distanceToPoint(a.center) <= a.radius
        },
        intersectSphere: function() {
            var a = new THREE.Vector3;
            return function(b, c) {
                a.subVectors(b.center, this.origin);
                var d = a.dot(this.direction),
                    e = a.dot(a) - d * d,
                    f = b.radius * b.radius;
                if (e > f) return null;
                var g = Math.sqrt(f - e),
                    h = d - g,
                    i = d + g;
                return 0 > h && 0 > i ? null : 0 > h ? this.at(i, c) : this.at(h, c)
            }
        }(),
        isIntersectionPlane: function(a) {
            var b = a.distanceToPoint(this.origin);
            if (0 === b) return !0;
            var c = a.normal.dot(this.direction);
            return 0 > c * b ? !0 : !1
        },
        distanceToPlane: function(a) {
            var b = a.normal.dot(this.direction);
            if (0 == b) return 0 == a.distanceToPoint(this.origin) ? 0 : null;
            var c = -(this.origin.dot(a.normal) + a.constant) / b;
            return c >= 0 ? c : null
        },
        intersectPlane: function(a, b) {
            var c = this.distanceToPlane(a);
            return null === c ? null : this.at(c, b)
        },
        isIntersectionBox: function() {
            var a = new THREE.Vector3;
            return function(b) {
                return null !== this.intersectBox(b, a)
            }
        }(),
        intersectBox: function(a, b) {
            var c, d, e, f, g, h, i = 1 / this.direction.x,
                j = 1 / this.direction.y,
                k = 1 / this.direction.z,
                l = this.origin;
            return i >= 0 ? (c = (a.min.x - l.x) * i, d = (a.max.x - l.x) * i) : (c = (a.max.x - l.x) * i, d = (a.min.x - l.x) * i), j >= 0 ? (e = (a.min.y - l.y) * j, f = (a.max.y - l.y) * j) : (e = (a.max.y - l.y) * j, f = (a.min.y - l.y) * j), c > f || e > d ? null : ((e > c || c !== c) && (c = e), (d > f || d !== d) && (d = f), k >= 0 ? (g = (a.min.z - l.z) * k, h = (a.max.z - l.z) * k) : (g = (a.max.z - l.z) * k, h = (a.min.z - l.z) * k), c > h || g > d ? null : ((g > c || c !== c) && (c = g), (d > h || d !== d) && (d = h), 0 > d ? null : this.at(c >= 0 ? c : d, b)))
        },
        intersectTriangle: function() {
            var a = new THREE.Vector3,
                b = new THREE.Vector3,
                c = new THREE.Vector3,
                d = new THREE.Vector3;
            return function(e, f, g, h, i) {
                b.subVectors(f, e), c.subVectors(g, e), d.crossVectors(b, c);
                var j, k = this.direction.dot(d);
                if (k > 0) {
                    if (h) return null;
                    j = 1
                } else {
                    if (!(0 > k)) return null;
                    j = -1, k = -k
                }
                a.subVectors(this.origin, e);
                var l = j * this.direction.dot(c.crossVectors(a, c));
                if (0 > l) return null;
                var m = j * this.direction.dot(b.cross(a));
                if (0 > m) return null;
                if (l + m > k) return null;
                var n = -j * a.dot(d);
                return 0 > n ? null : this.at(n / k, i)
            }
        }(),
        applyMatrix4: function(a) {
            return this.direction.add(this.origin).applyMatrix4(a), this.origin.applyMatrix4(a), this.direction.sub(this.origin), this.direction.normalize(), this
        },
        equals: function(a) {
            return a.origin.equals(this.origin) && a.direction.equals(this.direction)
        },
        clone: function() {
            return (new THREE.Ray).copy(this)
        }
    }, THREE.Sphere = function(a, b) {
        this.center = void 0 !== a ? a : new THREE.Vector3, this.radius = void 0 !== b ? b : 0
    }, THREE.Sphere.prototype = {
        constructor: THREE.Sphere,
        set: function(a, b) {
            return this.center.copy(a), this.radius = b, this
        },
        setFromPoints: function() {
            var a = new THREE.Box3;
            return function(b, c) {
                var d = this.center;
                void 0 !== c ? d.copy(c) : a.setFromPoints(b).center(d);
                for (var e = 0, f = 0, g = b.length; g > f; f++) e = Math.max(e, d.distanceToSquared(b[f]));
                return this.radius = Math.sqrt(e), this
            }
        }(),
        copy: function(a) {
            return this.center.copy(a.center), this.radius = a.radius, this
        },
        empty: function() {
            return this.radius <= 0
        },
        containsPoint: function(a) {
            return a.distanceToSquared(this.center) <= this.radius * this.radius
        },
        distanceToPoint: function(a) {
            return a.distanceTo(this.center) - this.radius
        },
        intersectsSphere: function(a) {
            var b = this.radius + a.radius;
            return a.center.distanceToSquared(this.center) <= b * b
        },
        clampPoint: function(a, b) {
            var c = this.center.distanceToSquared(a),
                d = b || new THREE.Vector3;
            return d.copy(a), c > this.radius * this.radius && (d.sub(this.center).normalize(), d.multiplyScalar(this.radius).add(this.center)), d
        },
        getBoundingBox: function(a) {
            var b = a || new THREE.Box3;
            return b.set(this.center, this.center), b.expandByScalar(this.radius), b
        },
        applyMatrix4: function(a) {
            return this.center.applyMatrix4(a), this.radius = this.radius * a.getMaxScaleOnAxis(), this
        },
        translate: function(a) {
            return this.center.add(a), this
        },
        equals: function(a) {
            return a.center.equals(this.center) && a.radius === this.radius
        },
        clone: function() {
            return (new THREE.Sphere).copy(this)
        }
    }, THREE.Frustum = function(a, b, c, d, e, f) {
        this.planes = [void 0 !== a ? a : new THREE.Plane, void 0 !== b ? b : new THREE.Plane, void 0 !== c ? c : new THREE.Plane, void 0 !== d ? d : new THREE.Plane, void 0 !== e ? e : new THREE.Plane, void 0 !== f ? f : new THREE.Plane]
    }, THREE.Frustum.prototype = {
        constructor: THREE.Frustum,
        set: function(a, b, c, d, e, f) {
            var g = this.planes;
            return g[0].copy(a), g[1].copy(b), g[2].copy(c), g[3].copy(d), g[4].copy(e), g[5].copy(f), this
        },
        copy: function(a) {
            for (var b = this.planes, c = 0; 6 > c; c++) b[c].copy(a.planes[c]);
            return this
        },
        setFromMatrix: function(a) {
            var b = this.planes,
                c = a.elements,
                d = c[0],
                e = c[1],
                f = c[2],
                g = c[3],
                h = c[4],
                i = c[5],
                j = c[6],
                k = c[7],
                l = c[8],
                m = c[9],
                n = c[10],
                o = c[11],
                p = c[12],
                q = c[13],
                r = c[14],
                s = c[15];
            return b[0].setComponents(g - d, k - h, o - l, s - p).normalize(), b[1].setComponents(g + d, k + h, o + l, s + p).normalize(), b[2].setComponents(g + e, k + i, o + m, s + q).normalize(), b[3].setComponents(g - e, k - i, o - m, s - q).normalize(), b[4].setComponents(g - f, k - j, o - n, s - r).normalize(), b[5].setComponents(g + f, k + j, o + n, s + r).normalize(), this
        },
        intersectsObject: function() {
            var a = new THREE.Sphere;
            return function(b) {
                var c = b.geometry;
                return null === c.boundingSphere && c.computeBoundingSphere(), a.copy(c.boundingSphere), a.applyMatrix4(b.matrixWorld), this.intersectsSphere(a)
            }
        }(),
        intersectsSphere: function(a) {
            for (var b = this.planes, c = a.center, d = -a.radius, e = 0; 6 > e; e++) {
                var f = b[e].distanceToPoint(c);
                if (d > f) return !1
            }
            return !0
        },
        intersectsBox: function() {
            var a = new THREE.Vector3,
                b = new THREE.Vector3;
            return function(c) {
                for (var d = this.planes, e = 0; 6 > e; e++) {
                    var f = d[e];
                    a.x = f.normal.x > 0 ? c.min.x : c.max.x, b.x = f.normal.x > 0 ? c.max.x : c.min.x, a.y = f.normal.y > 0 ? c.min.y : c.max.y, b.y = f.normal.y > 0 ? c.max.y : c.min.y, a.z = f.normal.z > 0 ? c.min.z : c.max.z, b.z = f.normal.z > 0 ? c.max.z : c.min.z;
                    var g = f.distanceToPoint(a),
                        h = f.distanceToPoint(b);
                    if (0 > g && 0 > h) return !1
                }
                return !0
            }
        }(),
        containsPoint: function(a) {
            for (var b = this.planes, c = 0; 6 > c; c++)
                if (b[c].distanceToPoint(a) < 0) return !1;
            return !0
        },
        clone: function() {
            return (new THREE.Frustum).copy(this)
        }
    }, THREE.Plane = function(a, b) {
        this.normal = void 0 !== a ? a : new THREE.Vector3(1, 0, 0), this.constant = void 0 !== b ? b : 0
    }, THREE.Plane.prototype = {
        constructor: THREE.Plane,
        set: function(a, b) {
            return this.normal.copy(a), this.constant = b, this
        },
        setComponents: function(a, b, c, d) {
            return this.normal.set(a, b, c), this.constant = d, this
        },
        setFromNormalAndCoplanarPoint: function(a, b) {
            return this.normal.copy(a), this.constant = -b.dot(this.normal), this
        },
        setFromCoplanarPoints: function() {
            var a = new THREE.Vector3,
                b = new THREE.Vector3;
            return function(c, d, e) {
                var f = a.subVectors(e, d).cross(b.subVectors(c, d)).normalize();
                return this.setFromNormalAndCoplanarPoint(f, c), this
            }
        }(),
        copy: function(a) {
            return this.normal.copy(a.normal), this.constant = a.constant, this
        },
        normalize: function() {
            var a = 1 / this.normal.length();
            return this.normal.multiplyScalar(a), this.constant *= a, this
        },
        negate: function() {
            return this.constant *= -1, this.normal.negate(), this
        },
        distanceToPoint: function(a) {
            return this.normal.dot(a) + this.constant
        },
        distanceToSphere: function(a) {
            return this.distanceToPoint(a.center) - a.radius
        },
        projectPoint: function(a, b) {
            return this.orthoPoint(a, b).sub(a).negate()
        },
        orthoPoint: function(a, b) {
            var c = this.distanceToPoint(a),
                d = b || new THREE.Vector3;
            return d.copy(this.normal).multiplyScalar(c)
        },
        isIntersectionLine: function(a) {
            var b = this.distanceToPoint(a.start),
                c = this.distanceToPoint(a.end);
            return 0 > b && c > 0 || 0 > c && b > 0
        },
        intersectLine: function() {
            var a = new THREE.Vector3;
            return function(b, c) {
                var d = c || new THREE.Vector3,
                    e = b.delta(a),
                    f = this.normal.dot(e);
                if (0 == f) return 0 == this.distanceToPoint(b.start) ? d.copy(b.start) : void 0;
                var g = -(b.start.dot(this.normal) + this.constant) / f;
                return 0 > g || g > 1 ? void 0 : d.copy(e).multiplyScalar(g).add(b.start)
            }
        }(),
        coplanarPoint: function(a) {
            var b = a || new THREE.Vector3;
            return b.copy(this.normal).multiplyScalar(-this.constant)
        },
        applyMatrix4: function() {
            var a = new THREE.Vector3,
                b = new THREE.Vector3,
                c = new THREE.Matrix3;
            return function(d, e) {
                var f = e || c.getNormalMatrix(d),
                    g = a.copy(this.normal).applyMatrix3(f),
                    h = this.coplanarPoint(b);
                return h.applyMatrix4(d), this.setFromNormalAndCoplanarPoint(g, h), this
            }
        }(),
        translate: function(a) {
            return this.constant = this.constant - a.dot(this.normal), this
        },
        equals: function(a) {
            return a.normal.equals(this.normal) && a.constant == this.constant
        },
        clone: function() {
            return (new THREE.Plane).copy(this)
        }
    }, THREE.Math = {
        generateUUID: function() {
            var a, b = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz".split(""),
                c = new Array(36),
                d = 0;
            return function() {
                for (var e = 0; 36 > e; e++) 8 == e || 13 == e || 18 == e || 23 == e ? c[e] = "-" : 14 == e ? c[e] = "4" : (2 >= d && (d = 33554432 + 16777216 * Math.random() | 0), a = 15 & d, d >>= 4, c[e] = b[19 == e ? 3 & a | 8 : a]);
                return c.join("")
            }
        }(),
        clamp: function(a, b, c) {
            return b > a ? b : a > c ? c : a
        },
        clampBottom: function(a, b) {
            return b > a ? b : a
        },
        mapLinear: function(a, b, c, d, e) {
            return d + (a - b) * (e - d) / (c - b)
        },
        smoothstep: function(a, b, c) {
            return b >= a ? 0 : a >= c ? 1 : (a = (a - b) / (c - b), a * a * (3 - 2 * a))
        },
        smootherstep: function(a, b, c) {
            return b >= a ? 0 : a >= c ? 1 : (a = (a - b) / (c - b), a * a * a * (a * (6 * a - 15) + 10))
        },
        random16: function() {
            return (65280 * Math.random() + 255 * Math.random()) / 65535
        },
        randInt: function(a, b) {
            return Math.floor(this.randFloat(a, b))
        },
        randFloat: function(a, b) {
            return a + Math.random() * (b - a)
        },
        randFloatSpread: function(a) {
            return a * (.5 - Math.random())
        },
        degToRad: function() {
            var a = Math.PI / 180;
            return function(b) {
                return b * a
            }
        }(),
        radToDeg: function() {
            var a = 180 / Math.PI;
            return function(b) {
                return b * a
            }
        }(),
        isPowerOfTwo: function(a) {
            return 0 === (a & a - 1) && 0 !== a
        }
    }, THREE.Spline = function(a) {
        function b(a, b, c, d, e, f, g) {
            var h = .5 * (c - a),
                i = .5 * (d - b);
            return (2 * (b - c) + h + i) * g + (-3 * (b - c) - 2 * h - i) * f + h * e + b
        }
        this.points = a;
        var c, d, e, f, g, h, i, j, k, l = [],
            m = {
                x: 0,
                y: 0,
                z: 0
            };
        this.initFromArray = function(a) {
            this.points = [];
            for (var b = 0; b < a.length; b++) this.points[b] = {
                x: a[b][0],
                y: a[b][1],
                z: a[b][2]
            }
        }, this.getPoint = function(a) {
            return c = (this.points.length - 1) * a, d = Math.floor(c), e = c - d, l[0] = 0 === d ? d : d - 1, l[1] = d, l[2] = d > this.points.length - 2 ? this.points.length - 1 : d + 1, l[3] = d > this.points.length - 3 ? this.points.length - 1 : d + 2, h = this.points[l[0]], i = this.points[l[1]], j = this.points[l[2]], k = this.points[l[3]], f = e * e, g = e * f, m.x = b(h.x, i.x, j.x, k.x, e, f, g), m.y = b(h.y, i.y, j.y, k.y, e, f, g), m.z = b(h.z, i.z, j.z, k.z, e, f, g), m
        }, this.getControlPointsArray = function() {
            var a, b, c = this.points.length,
                d = [];
            for (a = 0; c > a; a++) b = this.points[a], d[a] = [b.x, b.y, b.z];
            return d
        }, this.getLength = function(a) {
            var b, c, d, e, f = 0,
                g = 0,
                h = 0,
                i = new THREE.Vector3,
                j = new THREE.Vector3,
                k = [],
                l = 0;
            for (k[0] = 0, a || (a = 100), d = this.points.length * a, i.copy(this.points[0]), b = 1; d > b; b++) c = b / d, e = this.getPoint(c), j.copy(e), l += j.distanceTo(i), i.copy(e), f = (this.points.length - 1) * c, g = Math.floor(f), g != h && (k[g] = l, h = g);
            return k[k.length] = l, {
                chunks: k,
                total: l
            }
        }, this.reparametrizeByArcLength = function(a) {
            var b, c, d, e, f, g, h, i, j = [],
                k = new THREE.Vector3,
                l = this.getLength();
            for (j.push(k.copy(this.points[0]).clone()), b = 1; b < this.points.length; b++) {
                for (g = l.chunks[b] - l.chunks[b - 1], h = Math.ceil(a * g / l.total), e = (b - 1) / (this.points.length - 1), f = b / (this.points.length - 1), c = 1; h - 1 > c; c++) d = e + c * (1 / h) * (f - e), i = this.getPoint(d), j.push(k.copy(i).clone());
                j.push(k.copy(this.points[b]).clone())
            }
            this.points = j
        }
    }, THREE.Triangle = function(a, b, c) {
        this.a = void 0 !== a ? a : new THREE.Vector3, this.b = void 0 !== b ? b : new THREE.Vector3, this.c = void 0 !== c ? c : new THREE.Vector3
    }, THREE.Triangle.normal = function() {
        var a = new THREE.Vector3;
        return function(b, c, d, e) {
            var f = e || new THREE.Vector3;
            f.subVectors(d, c), a.subVectors(b, c), f.cross(a);
            var g = f.lengthSq();
            return g > 0 ? f.multiplyScalar(1 / Math.sqrt(g)) : f.set(0, 0, 0)
        }
    }(), THREE.Triangle.barycoordFromPoint = function() {
        var a = new THREE.Vector3,
            b = new THREE.Vector3,
            c = new THREE.Vector3;
        return function(d, e, f, g, h) {
            a.subVectors(g, e), b.subVectors(f, e), c.subVectors(d, e);
            var i = a.dot(a),
                j = a.dot(b),
                k = a.dot(c),
                l = b.dot(b),
                m = b.dot(c),
                n = i * l - j * j,
                o = h || new THREE.Vector3;
            if (0 == n) return o.set(-2, -1, -1);
            var p = 1 / n,
                q = (l * k - j * m) * p,
                r = (i * m - j * k) * p;
            return o.set(1 - q - r, r, q)
        }
    }(), THREE.Triangle.containsPoint = function() {
        var a = new THREE.Vector3;
        return function(b, c, d, e) {
            var f = THREE.Triangle.barycoordFromPoint(b, c, d, e, a);
            return f.x >= 0 && f.y >= 0 && f.x + f.y <= 1
        }
    }(), THREE.Triangle.prototype = {
        constructor: THREE.Triangle,
        set: function(a, b, c) {
            return this.a.copy(a), this.b.copy(b), this.c.copy(c), this
        },
        setFromPointsAndIndices: function(a, b, c, d) {
            return this.a.copy(a[b]), this.b.copy(a[c]), this.c.copy(a[d]), this
        },
        copy: function(a) {
            return this.a.copy(a.a), this.b.copy(a.b), this.c.copy(a.c), this
        },
        area: function() {
            var a = new THREE.Vector3,
                b = new THREE.Vector3;
            return function() {
                return a.subVectors(this.c, this.b), b.subVectors(this.a, this.b), .5 * a.cross(b).length()
            }
        }(),
        midpoint: function(a) {
            var b = a || new THREE.Vector3;
            return b.addVectors(this.a, this.b).add(this.c).multiplyScalar(1 / 3)
        },
        normal: function(a) {
            return THREE.Triangle.normal(this.a, this.b, this.c, a)
        },
        plane: function(a) {
            var b = a || new THREE.Plane;
            return b.setFromCoplanarPoints(this.a, this.b, this.c)
        },
        barycoordFromPoint: function(a, b) {
            return THREE.Triangle.barycoordFromPoint(a, this.a, this.b, this.c, b)
        },
        containsPoint: function(a) {
            return THREE.Triangle.containsPoint(a, this.a, this.b, this.c)
        },
        equals: function(a) {
            return a.a.equals(this.a) && a.b.equals(this.b) && a.c.equals(this.c)
        },
        clone: function() {
            return (new THREE.Triangle).copy(this)
        }
    }, THREE.Clock = function(a) {
        this.autoStart = void 0 !== a ? a : !0, this.startTime = 0, this.oldTime = 0, this.elapsedTime = 0, this.running = !1
    }, THREE.Clock.prototype = {
        constructor: THREE.Clock,
        start: function() {
            this.startTime = void 0 !== self.performance && void 0 !== self.performance.now ? self.performance.now() : Date.now(), this.oldTime = this.startTime, this.running = !0
        },
        stop: function() {
            this.getElapsedTime(), this.running = !1
        },
        getElapsedTime: function() {
            return this.getDelta(), this.elapsedTime
        },
        getDelta: function() {
            var a = 0;
            if (this.autoStart && !this.running && this.start(), this.running) {
                var b = void 0 !== self.performance && void 0 !== self.performance.now ? self.performance.now() : Date.now();
                a = .001 * (b - this.oldTime), this.oldTime = b, this.elapsedTime += a
            }
            return a
        }
    }, THREE.EventDispatcher = function() {}, THREE.EventDispatcher.prototype = {
        constructor: THREE.EventDispatcher,
        apply: function(a) {
            a.addEventListener = THREE.EventDispatcher.prototype.addEventListener, a.hasEventListener = THREE.EventDispatcher.prototype.hasEventListener, a.removeEventListener = THREE.EventDispatcher.prototype.removeEventListener, a.dispatchEvent = THREE.EventDispatcher.prototype.dispatchEvent
        },
        addEventListener: function(a, b) {
            void 0 === this._listeners && (this._listeners = {});
            var c = this._listeners;
            void 0 === c[a] && (c[a] = []), -1 === c[a].indexOf(b) && c[a].push(b)
        },
        hasEventListener: function(a, b) {
            if (void 0 === this._listeners) return !1;
            var c = this._listeners;
            return void 0 !== c[a] && -1 !== c[a].indexOf(b) ? !0 : !1
        },
        removeEventListener: function(a, b) {
            if (void 0 !== this._listeners) {
                var c = this._listeners,
                    d = c[a];
                if (void 0 !== d) {
                    var e = d.indexOf(b); - 1 !== e && d.splice(e, 1)
                }
            }
        },
        dispatchEvent: function(a) {
            if (void 0 !== this._listeners) {
                var b = this._listeners,
                    c = b[a.type];
                if (void 0 !== c) {
                    a.target = this;
                    for (var d = [], e = c.length, f = 0; e > f; f++) d[f] = c[f];
                    for (var f = 0; e > f; f++) d[f].call(this, a)
                }
            }
        }
    },
    function(a) {
        a.Raycaster = function(b, c, d, e) {
            this.ray = new a.Ray(b, c), this.near = d || 0, this.far = e || 1 / 0, this.params = {
                Sprite: {},
                Mesh: {},
                PointCloud: {
                    threshold: 1
                },
                LOD: {},
                Line: {}
            }
        };
        var b = function(a, b) {
                return a.distance - b.distance
            },
            c = function(a, b, d, e) {
                if (a.raycast(b, d), e === !0)
                    for (var f = a.children, g = 0, h = f.length; h > g; g++) c(f[g], b, d, !0)
            };
        a.Raycaster.prototype = {
            constructor: a.Raycaster,
            precision: 1e-4,
            linePrecision: 1,
            set: function(a, b) {
                this.ray.set(a, b)
            },
            setFromCamera: function(b, c) {
                c instanceof a.PerspectiveCamera ? (this.ray.origin.copy(c.position), this.ray.direction.set(b.x, b.y, .5).unproject(c).sub(c.position).normalize()) : c instanceof a.OrthographicCamera ? (this.ray.origin.set(b.x, b.y, -1).unproject(c), this.ray.direction.set(0, 0, -1).transformDirection(c.matrixWorld)) : console.error("THREE.Raycaster: Unsupported camera type.")
            },
            intersectObject: function(a, d) {
                var e = [];
                return c(a, this, e, d), e.sort(b), e
            },
            intersectObjects: function(a, d) {
                var e = [];
                if (a instanceof Array == !1) return console.log("THREE.Raycaster.intersectObjects: objects is not an Array."), e;
                for (var f = 0, g = a.length; g > f; f++) c(a[f], this, e, d);
                return e.sort(b), e
            }
        }
    }(THREE), THREE.Object3D = function() {
        Object.defineProperty(this, "id", {
            value: THREE.Object3DIdCount++
        }), this.uuid = THREE.Math.generateUUID(), this.name = "", this.type = "Object3D", this.parent = void 0, this.children = [], this.up = THREE.Object3D.DefaultUp.clone();
        var a = new THREE.Vector3,
            b = new THREE.Euler,
            c = new THREE.Quaternion,
            d = new THREE.Vector3(1, 1, 1),
            e = function() {
                c.setFromEuler(b, !1)
            },
            f = function() {
                b.setFromQuaternion(c, void 0, !1)
            };
        b.onChange(e), c.onChange(f), Object.defineProperties(this, {
            position: {
                enumerable: !0,
                value: a
            },
            rotation: {
                enumerable: !0,
                value: b
            },
            quaternion: {
                enumerable: !0,
                value: c
            },
            scale: {
                enumerable: !0,
                value: d
            }
        }), this.rotationAutoUpdate = !0, this.matrix = new THREE.Matrix4, this.matrixWorld = new THREE.Matrix4, this.matrixAutoUpdate = !0, this.matrixWorldNeedsUpdate = !1, this.visible = !0, this.castShadow = !1, this.receiveShadow = !1, this.frustumCulled = !0, this.userData = {}
    }, THREE.Object3D.DefaultUp = new THREE.Vector3(0, 1, 0), THREE.Object3D.prototype = {
        constructor: THREE.Object3D,
        get eulerOrder() {
            return console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."), this.rotation.order
        },
        set eulerOrder(a) {
            console.warn("THREE.Object3D: .eulerOrder has been moved to .rotation.order."), this.rotation.order = a
        },
        get useQuaternion() {
            console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")
        },
        set useQuaternion(a) {
            console.warn("THREE.Object3D: .useQuaternion has been removed. The library now uses quaternions by default.")
        },
        applyMatrix: function(a) {
            this.matrix.multiplyMatrices(a, this.matrix), this.matrix.decompose(this.position, this.quaternion, this.scale)
        },
        setRotationFromAxisAngle: function(a, b) {
            this.quaternion.setFromAxisAngle(a, b)
        },
        setRotationFromEuler: function(a) {
            this.quaternion.setFromEuler(a, !0)
        },
        setRotationFromMatrix: function(a) {
            this.quaternion.setFromRotationMatrix(a)
        },
        setRotationFromQuaternion: function(a) {
            this.quaternion.copy(a)
        },
        rotateOnAxis: function() {
            var a = new THREE.Quaternion;
            return function(b, c) {
                return a.setFromAxisAngle(b, c), this.quaternion.multiply(a), this
            }
        }(),
        rotateX: function() {
            var a = new THREE.Vector3(1, 0, 0);
            return function(b) {
                return this.rotateOnAxis(a, b)
            }
        }(),
        rotateY: function() {
            var a = new THREE.Vector3(0, 1, 0);
            return function(b) {
                return this.rotateOnAxis(a, b)
            }
        }(),
        rotateZ: function() {
            var a = new THREE.Vector3(0, 0, 1);
            return function(b) {
                return this.rotateOnAxis(a, b)
            }
        }(),
        translateOnAxis: function() {
            var a = new THREE.Vector3;
            return function(b, c) {
                return a.copy(b).applyQuaternion(this.quaternion), this.position.add(a.multiplyScalar(c)), this
            }
        }(),
        translate: function(a, b) {
            return console.warn("THREE.Object3D: .translate() has been removed. Use .translateOnAxis( axis, distance ) instead."), this.translateOnAxis(b, a)
        },
        translateX: function() {
            var a = new THREE.Vector3(1, 0, 0);
            return function(b) {
                return this.translateOnAxis(a, b)
            }
        }(),
        translateY: function() {
            var a = new THREE.Vector3(0, 1, 0);
            return function(b) {
                return this.translateOnAxis(a, b)
            }
        }(),
        translateZ: function() {
            var a = new THREE.Vector3(0, 0, 1);
            return function(b) {
                return this.translateOnAxis(a, b)
            }
        }(),
        localToWorld: function(a) {
            return a.applyMatrix4(this.matrixWorld)
        },
        worldToLocal: function() {
            var a = new THREE.Matrix4;
            return function(b) {
                return b.applyMatrix4(a.getInverse(this.matrixWorld))
            }
        }(),
        lookAt: function() {
            var a = new THREE.Matrix4;
            return function(b) {
                a.lookAt(b, this.position, this.up), this.quaternion.setFromRotationMatrix(a)
            }
        }(),
        add: function(a) {
            if (arguments.length > 1) {
                for (var b = 0; b < arguments.length; b++) this.add(arguments[b]);
                return this
            }
            return a === this ? (console.error("THREE.Object3D.add:", a, "can't be added as a child of itself."), this) : (a instanceof THREE.Object3D ? (void 0 !== a.parent && a.parent.remove(a), a.parent = this, a.dispatchEvent({
                type: "added"
            }), this.children.push(a)) : console.error("THREE.Object3D.add:", a, "is not an instance of THREE.Object3D."), this)
        },
        remove: function(a) {
            if (arguments.length > 1)
                for (var b = 0; b < arguments.length; b++) this.remove(arguments[b]);
            var c = this.children.indexOf(a); - 1 !== c && (a.parent = void 0, a.dispatchEvent({
                type: "removed"
            }), this.children.splice(c, 1))
        },
        getChildByName: function(a, b) {
            return console.warn("THREE.Object3D: .getChildByName() has been renamed to .getObjectByName()."), this.getObjectByName(a, b)
        },
        getObjectById: function(a, b) {
            return this.getObjectByProperty("id", a, b)
        },
        getObjectByName: function(a, b) {
            return this.getObjectByProperty("name", a, b)
        },
        getObjectByProperty: function(a, b, c) {
            if (this[a] === b) return this;
            for (var d = 0, e = this.children.length; e > d; d++) {
                var f = this.children[d],
                    g = f.getObjectByProperty(a, b, c);
                if (void 0 !== g) return g
            }
            return void 0
        },
        getWorldPosition: function(a) {
            var b = a || new THREE.Vector3;
            return this.updateMatrixWorld(!0), b.setFromMatrixPosition(this.matrixWorld)
        },
        getWorldQuaternion: function() {
            var a = new THREE.Vector3,
                b = new THREE.Vector3;
            return function(c) {
                var d = c || new THREE.Quaternion;
                return this.updateMatrixWorld(!0), this.matrixWorld.decompose(a, d, b), d
            }
        }(),
        getWorldRotation: function() {
            var a = new THREE.Quaternion;
            return function(b) {
                var c = b || new THREE.Euler;
                return this.getWorldQuaternion(a), c.setFromQuaternion(a, this.rotation.order, !1)
            }
        }(),
        getWorldScale: function() {
            var a = new THREE.Vector3,
                b = new THREE.Quaternion;
            return function(c) {
                var d = c || new THREE.Vector3;
                return this.updateMatrixWorld(!0), this.matrixWorld.decompose(a, b, d), d
            }
        }(),
        getWorldDirection: function() {
            var a = new THREE.Quaternion;
            return function(b) {
                var c = b || new THREE.Vector3;
                return this.getWorldQuaternion(a), c.set(0, 0, 1).applyQuaternion(a)
            }
        }(),
        raycast: function() {},
        traverse: function(a) {
            a(this);
            for (var b = 0, c = this.children.length; c > b; b++) this.children[b].traverse(a)
        },
        traverseVisible: function(a) {
            if (this.visible !== !1) {
                a(this);
                for (var b = 0, c = this.children.length; c > b; b++) this.children[b].traverseVisible(a)
            }
        },
        traverseAncestors: function(a) {
            this.parent && (a(this.parent), this.parent.traverseAncestors(a))
        },
        updateMatrix: function() {
            this.matrix.compose(this.position, this.quaternion, this.scale), this.matrixWorldNeedsUpdate = !0
        },
        updateMatrixWorld: function(a) {
            this.matrixAutoUpdate === !0 && this.updateMatrix(), (this.matrixWorldNeedsUpdate === !0 || a === !0) && (void 0 === this.parent ? this.matrixWorld.copy(this.matrix) : this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), this.matrixWorldNeedsUpdate = !1, a = !0);
            for (var b = 0, c = this.children.length; c > b; b++) this.children[b].updateMatrixWorld(a)
        },
        toJSON: function() {
            var a = {
                    metadata: {
                        version: 4.3,
                        type: "Object",
                        generator: "ObjectExporter"
                    }
                },
                b = {},
                c = function(c) {
                    if (void 0 === a.geometries && (a.geometries = []), void 0 === b[c.uuid]) {
                        var d = c.toJSON();
                        delete d.metadata, b[c.uuid] = d, a.geometries.push(d)
                    }
                    return c.uuid
                },
                d = {},
                e = function(b) {
                    if (void 0 === a.materials && (a.materials = []), void 0 === d[b.uuid]) {
                        var c = b.toJSON();
                        delete c.metadata, d[b.uuid] = c, a.materials.push(c)
                    }
                    return b.uuid
                },
                f = function(a) {
                    var b = {};
                    if (b.uuid = a.uuid, b.type = a.type, "" !== a.name && (b.name = a.name), "{}" !== JSON.stringify(a.userData) && (b.userData = a.userData), a.visible !== !0 && (b.visible = a.visible), a instanceof THREE.PerspectiveCamera ? (b.fov = a.fov, b.aspect = a.aspect, b.near = a.near, b.far = a.far) : a instanceof THREE.OrthographicCamera ? (b.left = a.left, b.right = a.right, b.top = a.top, b.bottom = a.bottom, b.near = a.near, b.far = a.far) : a instanceof THREE.AmbientLight ? b.color = a.color.getHex() : a instanceof THREE.DirectionalLight ? (b.color = a.color.getHex(), b.intensity = a.intensity) : a instanceof THREE.PointLight ? (b.color = a.color.getHex(), b.intensity = a.intensity, b.distance = a.distance) : a instanceof THREE.SpotLight ? (b.color = a.color.getHex(), b.intensity = a.intensity, b.distance = a.distance, b.angle = a.angle, b.exponent = a.exponent) : a instanceof THREE.HemisphereLight ? (b.color = a.color.getHex(), b.groundColor = a.groundColor.getHex()) : a instanceof THREE.Mesh ? (b.geometry = c(a.geometry), b.material = e(a.material)) : a instanceof THREE.Line ? (b.geometry = c(a.geometry), b.material = e(a.material)) : a instanceof THREE.Sprite && (b.material = e(a.material)), b.matrix = a.matrix.toArray(), a.children.length > 0) {
                        b.children = [];
                        for (var d = 0; d < a.children.length; d++) b.children.push(f(a.children[d]))
                    }
                    return b
                };
            return a.object = f(this), a
        },
        clone: function(a, b) {
            if (void 0 === a && (a = new THREE.Object3D), void 0 === b && (b = !0), a.name = this.name, a.up.copy(this.up), a.position.copy(this.position), a.quaternion.copy(this.quaternion), a.scale.copy(this.scale), a.rotationAutoUpdate = this.rotationAutoUpdate, a.matrix.copy(this.matrix), a.matrixWorld.copy(this.matrixWorld), a.matrixAutoUpdate = this.matrixAutoUpdate, a.matrixWorldNeedsUpdate = this.matrixWorldNeedsUpdate, a.visible = this.visible, a.castShadow = this.castShadow, a.receiveShadow = this.receiveShadow, a.frustumCulled = this.frustumCulled, a.userData = JSON.parse(JSON.stringify(this.userData)), b === !0)
                for (var c = 0; c < this.children.length; c++) {
                    var d = this.children[c];
                    a.add(d.clone())
                }
            return a
        }
    }, THREE.EventDispatcher.prototype.apply(THREE.Object3D.prototype), THREE.Object3DIdCount = 0, THREE.Face3 = function(a, b, c, d, e, f) {
        this.a = a, this.b = b, this.c = c, this.normal = d instanceof THREE.Vector3 ? d : new THREE.Vector3, this.vertexNormals = d instanceof Array ? d : [], this.color = e instanceof THREE.Color ? e : new THREE.Color, this.vertexColors = e instanceof Array ? e : [], this.vertexTangents = [], this.materialIndex = void 0 !== f ? f : 0
    }, THREE.Face3.prototype = {
        constructor: THREE.Face3,
        clone: function() {
            var a = new THREE.Face3(this.a, this.b, this.c);
            a.normal.copy(this.normal), a.color.copy(this.color), a.materialIndex = this.materialIndex;
            for (var b = 0, c = this.vertexNormals.length; c > b; b++) a.vertexNormals[b] = this.vertexNormals[b].clone();
            for (var b = 0, c = this.vertexColors.length; c > b; b++) a.vertexColors[b] = this.vertexColors[b].clone();
            for (var b = 0, c = this.vertexTangents.length; c > b; b++) a.vertexTangents[b] = this.vertexTangents[b].clone();
            return a
        }
    }, THREE.Face4 = function(a, b, c, d, e, f, g) {
        return console.warn("THREE.Face4 has been removed. A THREE.Face3 will be created instead."), new THREE.Face3(a, b, c, e, f, g)
    }, THREE.BufferAttribute = function(a, b) {
        this.array = a, this.itemSize = b, this.needsUpdate = !1
    }, THREE.BufferAttribute.prototype = {
        constructor: THREE.BufferAttribute,
        get length() {
            return this.array.length
        },
        copyAt: function(a, b, c) {
            a *= this.itemSize, c *= b.itemSize;
            for (var d = 0, e = this.itemSize; e > d; d++) this.array[a + d] = b.array[c + d]
        },
        set: function(a) {
            return this.array.set(a), this
        },
        setX: function(a, b) {
            return this.array[a * this.itemSize] = b, this
        },
        setY: function(a, b) {
            return this.array[a * this.itemSize + 1] = b, this
        },
        setZ: function(a, b) {
            return this.array[a * this.itemSize + 2] = b, this
        },
        setXY: function(a, b, c) {
            return a *= this.itemSize, this.array[a] = b, this.array[a + 1] = c, this
        },
        setXYZ: function(a, b, c, d) {
            return a *= this.itemSize, this.array[a] = b, this.array[a + 1] = c, this.array[a + 2] = d, this
        },
        setXYZW: function(a, b, c, d, e) {
            return a *= this.itemSize, this.array[a] = b, this.array[a + 1] = c, this.array[a + 2] = d, this.array[a + 3] = e, this
        },
        clone: function() {
            return new THREE.BufferAttribute(new this.array.constructor(this.array), this.itemSize)
        }
    }, THREE.Int8Attribute = function(a, b) {
        return console.warn("THREE.Int8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new THREE.BufferAttribute(a, b)
    }, THREE.Uint8Attribute = function(a, b) {
        return console.warn("THREE.Uint8Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new THREE.BufferAttribute(a, b)
    }, THREE.Uint8ClampedAttribute = function(a, b) {
        return console.warn("THREE.Uint8ClampedAttribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new THREE.BufferAttribute(a, b)
    }, THREE.Int16Attribute = function(a, b) {
        return console.warn("THREE.Int16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new THREE.BufferAttribute(a, b)
    }, THREE.Uint16Attribute = function(a, b) {
        return console.warn("THREE.Uint16Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new THREE.BufferAttribute(a, b)
    }, THREE.Int32Attribute = function(a, b) {
        return console.warn("THREE.Int32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new THREE.BufferAttribute(a, b)
    }, THREE.Uint32Attribute = function(a, b) {
        return console.warn("THREE.Uint32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new THREE.BufferAttribute(a, b)
    }, THREE.Float32Attribute = function(a, b) {
        return console.warn("THREE.Float32Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new THREE.BufferAttribute(a, b)
    }, THREE.Float64Attribute = function(a, b) {
        return console.warn("THREE.Float64Attribute has been removed. Use THREE.BufferAttribute( array, itemSize ) instead."), new THREE.BufferAttribute(a, b)
    }, THREE.BufferGeometry = function() {
        Object.defineProperty(this, "id", {
            value: THREE.GeometryIdCount++
        }), this.uuid = THREE.Math.generateUUID(), this.name = "", this.type = "BufferGeometry", this.attributes = {}, this.attributesKeys = [], this.drawcalls = [], this.offsets = this.drawcalls, this.boundingBox = null, this.boundingSphere = null
    }, THREE.BufferGeometry.prototype = {
        constructor: THREE.BufferGeometry,
        addAttribute: function(a, b) {
            return b instanceof THREE.BufferAttribute == !1 ? (console.warn("THREE.BufferGeometry: .addAttribute() now expects ( name, attribute )."), void(this.attributes[a] = {
                array: arguments[1],
                itemSize: arguments[2]
            })) : (this.attributes[a] = b, void(this.attributesKeys = Object.keys(this.attributes)))
        },
        getAttribute: function(a) {
            return this.attributes[a]
        },
        addDrawCall: function(a, b, c) {
            this.drawcalls.push({
                start: a,
                count: b,
                index: void 0 !== c ? c : 0
            })
        },
        applyMatrix: function(a) {
            var b = this.attributes.position;
            void 0 !== b && (a.applyToVector3Array(b.array), b.needsUpdate = !0);
            var c = this.attributes.normal;
            if (void 0 !== c) {
                var d = (new THREE.Matrix3).getNormalMatrix(a);
                d.applyToVector3Array(c.array), c.needsUpdate = !0
            }
        },
        center: function() {},
        fromGeometry: function(a, b) {
            b = b || {
                vertexColors: THREE.NoColors
            };
            var c = a.vertices,
                d = a.faces,
                e = a.faceVertexUvs,
                f = b.vertexColors,
                g = e[0].length > 0,
                h = 3 == d[0].vertexNormals.length,
                i = new Float32Array(3 * d.length * 3);
            this.addAttribute("position", new THREE.BufferAttribute(i, 3));
            var j = new Float32Array(3 * d.length * 3);
            if (this.addAttribute("normal", new THREE.BufferAttribute(j, 3)), f !== THREE.NoColors) {
                var k = new Float32Array(3 * d.length * 3);
                this.addAttribute("color", new THREE.BufferAttribute(k, 3))
            }
            if (g === !0) {
                var l = new Float32Array(3 * d.length * 2);
                this.addAttribute("uv", new THREE.BufferAttribute(l, 2))
            }
            for (var m = 0, n = 0, o = 0; m < d.length; m++, n += 6, o += 9) {
                var p = d[m],
                    q = c[p.a],
                    r = c[p.b],
                    s = c[p.c];
                if (i[o] = q.x, i[o + 1] = q.y, i[o + 2] = q.z, i[o + 3] = r.x, i[o + 4] = r.y, i[o + 5] = r.z, i[o + 6] = s.x, i[o + 7] = s.y, i[o + 8] = s.z, h === !0) {
                    var t = p.vertexNormals[0],
                        u = p.vertexNormals[1],
                        v = p.vertexNormals[2];
                    j[o] = t.x, j[o + 1] = t.y, j[o + 2] = t.z, j[o + 3] = u.x, j[o + 4] = u.y, j[o + 5] = u.z, j[o + 6] = v.x, j[o + 7] = v.y, j[o + 8] = v.z
                } else {
                    var w = p.normal;
                    j[o] = w.x, j[o + 1] = w.y, j[o + 2] = w.z, j[o + 3] = w.x, j[o + 4] = w.y, j[o + 5] = w.z, j[o + 6] = w.x, j[o + 7] = w.y, j[o + 8] = w.z
                }
                if (f === THREE.FaceColors) {
                    var x = p.color;
                    k[o] = x.r, k[o + 1] = x.g, k[o + 2] = x.b, k[o + 3] = x.r, k[o + 4] = x.g, k[o + 5] = x.b, k[o + 6] = x.r, k[o + 7] = x.g, k[o + 8] = x.b
                } else if (f === THREE.VertexColors) {
                    var y = p.vertexColors[0],
                        z = p.vertexColors[1],
                        A = p.vertexColors[2];
                    k[o] = y.r, k[o + 1] = y.g, k[o + 2] = y.b, k[o + 3] = z.r, k[o + 4] = z.g, k[o + 5] = z.b, k[o + 6] = A.r, k[o + 7] = A.g, k[o + 8] = A.b
                }
                if (g === !0) {
                    var B = e[0][m][0],
                        C = e[0][m][1],
                        D = e[0][m][2];
                    l[n] = B.x, l[n + 1] = B.y, l[n + 2] = C.x, l[n + 3] = C.y, l[n + 4] = D.x, l[n + 5] = D.y
                }
            }
            return this.computeBoundingSphere(), this
        },
        computeBoundingBox: function() {
            var a = new THREE.Vector3;
            return function() {
                null === this.boundingBox && (this.boundingBox = new THREE.Box3);
                var b = this.attributes.position.array;
                if (b) {
                    var c = this.boundingBox;
                    c.makeEmpty();
                    for (var d = 0, e = b.length; e > d; d += 3) a.set(b[d], b[d + 1], b[d + 2]), c.expandByPoint(a)
                }(void 0 === b || 0 === b.length) && (this.boundingBox.min.set(0, 0, 0), this.boundingBox.max.set(0, 0, 0)), (isNaN(this.boundingBox.min.x) || isNaN(this.boundingBox.min.y) || isNaN(this.boundingBox.min.z)) && console.error('THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The "position" attribute is likely to have NaN values.')
            }
        }(),
        computeBoundingSphere: function() {
            var a = new THREE.Box3,
                b = new THREE.Vector3;
            return function() {
                null === this.boundingSphere && (this.boundingSphere = new THREE.Sphere);
                var c = this.attributes.position.array;
                if (c) {
                    a.makeEmpty();
                    for (var d = this.boundingSphere.center, e = 0, f = c.length; f > e; e += 3) b.set(c[e], c[e + 1], c[e + 2]), a.expandByPoint(b);
                    a.center(d);
                    for (var g = 0, e = 0, f = c.length; f > e; e += 3) b.set(c[e], c[e + 1], c[e + 2]), g = Math.max(g, d.distanceToSquared(b));
                    this.boundingSphere.radius = Math.sqrt(g), isNaN(this.boundingSphere.radius) && console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.')
                }
            }
        }(),
        computeFaceNormals: function() {},
        computeVertexNormals: function() {
            var a = this.attributes;
            if (a.position) {
                var b = a.position.array;
                if (void 0 === a.normal) this.addAttribute("normal", new THREE.BufferAttribute(new Float32Array(b.length), 3));
                else
                    for (var c = a.normal.array, d = 0, e = c.length; e > d; d++) c[d] = 0;
                var f, g, h, c = a.normal.array,
                    i = new THREE.Vector3,
                    j = new THREE.Vector3,
                    k = new THREE.Vector3,
                    l = new THREE.Vector3,
                    m = new THREE.Vector3;
                if (a.index)
                    for (var n = a.index.array, o = this.offsets.length > 0 ? this.offsets : [{
                            start: 0,
                            count: n.length,
                            index: 0
                        }], p = 0, q = o.length; q > p; ++p)
                        for (var r = o[p].start, s = o[p].count, t = o[p].index, d = r, e = r + s; e > d; d += 3) f = 3 * (t + n[d]), g = 3 * (t + n[d + 1]), h = 3 * (t + n[d + 2]), i.fromArray(b, f), j.fromArray(b, g), k.fromArray(b, h), l.subVectors(k, j), m.subVectors(i, j), l.cross(m), c[f] += l.x, c[f + 1] += l.y, c[f + 2] += l.z, c[g] += l.x, c[g + 1] += l.y, c[g + 2] += l.z, c[h] += l.x, c[h + 1] += l.y, c[h + 2] += l.z;
                else
                    for (var d = 0, e = b.length; e > d; d += 9) i.fromArray(b, d), j.fromArray(b, d + 3), k.fromArray(b, d + 6), l.subVectors(k, j), m.subVectors(i, j), l.cross(m), c[d] = l.x, c[d + 1] = l.y, c[d + 2] = l.z, c[d + 3] = l.x, c[d + 4] = l.y, c[d + 5] = l.z, c[d + 6] = l.x, c[d + 7] = l.y, c[d + 8] = l.z;
                this.normalizeNormals(), a.normal.needsUpdate = !0
            }
        },
        computeTangents: function() {
            function a(a, b, c) {
                D.fromArray(d, 3 * a), E.fromArray(d, 3 * b), F.fromArray(d, 3 * c), G.fromArray(f, 2 * a), H.fromArray(f, 2 * b), I.fromArray(f, 2 * c), l = E.x - D.x, m = F.x - D.x, n = E.y - D.y, o = F.y - D.y, p = E.z - D.z, q = F.z - D.z, r = H.x - G.x, s = I.x - G.x, t = H.y - G.y, u = I.y - G.y, v = 1 / (r * u - s * t), J.set((u * l - t * m) * v, (u * n - t * o) * v, (u * p - t * q) * v), K.set((r * m - s * l) * v, (r * o - s * n) * v, (r * q - s * p) * v), i[a].add(J), i[b].add(J), i[c].add(J), j[a].add(K), j[b].add(K), j[c].add(K)
            }

            function b(a) {
                U.fromArray(e, 3 * a), V.copy(U), Q = i[a], S.copy(Q), S.sub(U.multiplyScalar(U.dot(Q))).normalize(), T.crossVectors(V, Q), R = T.dot(j[a]), P = 0 > R ? -1 : 1, h[4 * a] = S.x, h[4 * a + 1] = S.y, h[4 * a + 2] = S.z, h[4 * a + 3] = P
            }
            if (void 0 === this.attributes.index || void 0 === this.attributes.position || void 0 === this.attributes.normal || void 0 === this.attributes.uv) return void console.warn("Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");
            var c = this.attributes.index.array,
                d = this.attributes.position.array,
                e = this.attributes.normal.array,
                f = this.attributes.uv.array,
                g = d.length / 3;
            void 0 === this.attributes.tangent && this.addAttribute("tangent", new THREE.BufferAttribute(new Float32Array(4 * g), 4));
            for (var h = this.attributes.tangent.array, i = [], j = [], k = 0; g > k; k++) i[k] = new THREE.Vector3, j[k] = new THREE.Vector3;
            var l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, A, B, C, D = new THREE.Vector3,
                E = new THREE.Vector3,
                F = new THREE.Vector3,
                G = new THREE.Vector2,
                H = new THREE.Vector2,
                I = new THREE.Vector2,
                J = new THREE.Vector3,
                K = new THREE.Vector3;
            0 === this.drawcalls.length && this.addDrawCall(0, c.length, 0);
            var L = this.drawcalls;
            for (y = 0, z = L.length; z > y; ++y) {
                var M = L[y].start,
                    N = L[y].count,
                    O = L[y].index;
                for (w = M, x = M + N; x > w; w += 3) A = O + c[w], B = O + c[w + 1], C = O + c[w + 2], a(A, B, C)
            }
            var P, Q, R, S = new THREE.Vector3,
                T = new THREE.Vector3,
                U = new THREE.Vector3,
                V = new THREE.Vector3;
            for (y = 0, z = L.length; z > y; ++y) {
                var M = L[y].start,
                    N = L[y].count,
                    O = L[y].index;
                for (w = M, x = M + N; x > w; w += 3) A = O + c[w], B = O + c[w + 1], C = O + c[w + 2], b(A), b(B), b(C)
            }
        },
        computeOffsets: function(a) {
            var b = a;
            void 0 === a && (b = 65535);
            for (var c = (Date.now(), this.attributes.index.array), d = this.attributes.position.array, e = (d.length / 3, c.length / 3), f = new Uint16Array(c.length), g = 0, h = 0, i = [{
                    start: 0,
                    count: 0,
                    index: 0
                }], j = i[0], k = 0, l = 0, m = new Int32Array(6), n = new Int32Array(d.length), o = new Int32Array(d.length), p = 0; p < d.length; p++) n[p] = -1, o[p] = -1;
            for (var q = 0; e > q; q++) {
                l = 0;
                for (var r = 0; 3 > r; r++) {
                    var s = c[3 * q + r]; - 1 == n[s] ? (m[2 * r] = s, m[2 * r + 1] = -1, l++) : n[s] < j.index ? (m[2 * r] = s, m[2 * r + 1] = -1, k++) : (m[2 * r] = s, m[2 * r + 1] = n[s])
                }
                var t = h + l;
                if (t > j.index + b) {
                    var u = {
                        start: g,
                        count: 0,
                        index: h
                    };
                    i.push(u), j = u;
                    for (var v = 0; 6 > v; v += 2) {
                        var w = m[v + 1];
                        w > -1 && w < j.index && (m[v + 1] = -1)
                    }
                }
                for (var v = 0; 6 > v; v += 2) {
                    var s = m[v],
                        w = m[v + 1]; - 1 === w && (w = h++), n[s] = w, o[w] = s, f[g++] = w - j.index, j.count++
                }
            }
            return this.reorderBuffers(f, o, h), this.offsets = i, i
        },
        merge: function(a, b) {
            if (a instanceof THREE.BufferGeometry == !1) return void console.error("THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.", a);
            void 0 === b && (b = 0);
            var c = this.attributes;
            for (var d in c)
                if (void 0 !== a.attributes[d])
                    for (var e = c[d], f = e.array, g = a.attributes[d], h = g.array, i = g.itemSize, j = 0, k = i * b; j < h.length; j++, k++) f[k] = h[j];
            return this
        },
        normalizeNormals: function() {
            for (var a, b, c, d, e = this.attributes.normal.array, f = 0, g = e.length; g > f; f += 3) a = e[f], b = e[f + 1], c = e[f + 2], d = 1 / Math.sqrt(a * a + b * b + c * c), e[f] *= d, e[f + 1] *= d, e[f + 2] *= d
        },
        reorderBuffers: function(a, b, c) {
            var d = {};
            for (var e in this.attributes)
                if ("index" != e) {
                    var f = this.attributes[e].array;
                    d[e] = new f.constructor(this.attributes[e].itemSize * c)
                }
            for (var g = 0; c > g; g++) {
                var h = b[g];
                for (var e in this.attributes)
                    if ("index" != e)
                        for (var i = this.attributes[e].array, j = this.attributes[e].itemSize, k = d[e], l = 0; j > l; l++) k[g * j + l] = i[h * j + l]
            }
            this.attributes.index.array = a;
            for (var e in this.attributes) "index" != e && (this.attributes[e].array = d[e], this.attributes[e].numItems = this.attributes[e].itemSize * c)
        },
        toJSON: function() {
            var a = {
                    metadata: {
                        version: 4,
                        type: "BufferGeometry",
                        generator: "BufferGeometryExporter"
                    },
                    uuid: this.uuid,
                    type: this.type,
                    data: {
                        attributes: {}
                    }
                },
                b = this.attributes,
                c = this.offsets,
                d = this.boundingSphere;
            for (var e in b) {
                for (var f = b[e], g = [], h = f.array, i = 0, j = h.length; j > i; i++) g[i] = h[i];
                a.data.attributes[e] = {
                    itemSize: f.itemSize,
                    type: f.array.constructor.name,
                    array: g
                }
            }
            return c.length > 0 && (a.data.offsets = JSON.parse(JSON.stringify(c))), null !== d && (a.data.boundingSphere = {
                center: d.center.toArray(),
                radius: d.radius
            }), a
        },
        clone: function() {
            var a = new THREE.BufferGeometry;
            for (var b in this.attributes) {
                var c = this.attributes[b];
                a.addAttribute(b, c.clone())
            }
            for (var d = 0, e = this.offsets.length; e > d; d++) {
                var f = this.offsets[d];
                a.offsets.push({
                    start: f.start,
                    index: f.index,
                    count: f.count
                })
            }
            return a
        },
        dispose: function() {
            this.dispatchEvent({
                type: "dispose"
            })
        }
    }, THREE.EventDispatcher.prototype.apply(THREE.BufferGeometry.prototype), THREE.Geometry = function() {
        Object.defineProperty(this, "id", {
            value: THREE.GeometryIdCount++
        }), this.uuid = THREE.Math.generateUUID(), this.name = "", this.type = "Geometry", this.vertices = [], this.colors = [], this.faces = [], this.faceVertexUvs = [
            []
        ], this.morphTargets = [], this.morphColors = [], this.morphNormals = [], this.skinWeights = [], this.skinIndices = [], this.lineDistances = [], this.boundingBox = null, this.boundingSphere = null, this.hasTangents = !1, this.dynamic = !0, this.verticesNeedUpdate = !1, this.elementsNeedUpdate = !1, this.uvsNeedUpdate = !1, this.normalsNeedUpdate = !1, this.tangentsNeedUpdate = !1, this.colorsNeedUpdate = !1, this.lineDistancesNeedUpdate = !1, this.groupsNeedUpdate = !1
    }, THREE.Geometry.prototype = {
        constructor: THREE.Geometry,
        applyMatrix: function(a) {
            for (var b = (new THREE.Matrix3).getNormalMatrix(a), c = 0, d = this.vertices.length; d > c; c++) {
                var e = this.vertices[c];
                e.applyMatrix4(a)
            }
            for (var c = 0, d = this.faces.length; d > c; c++) {
                var f = this.faces[c];
                f.normal.applyMatrix3(b).normalize();
                for (var g = 0, h = f.vertexNormals.length; h > g; g++) f.vertexNormals[g].applyMatrix3(b).normalize()
            }
            this.boundingBox instanceof THREE.Box3 && this.computeBoundingBox(), this.boundingSphere instanceof THREE.Sphere && this.computeBoundingSphere()
        },
        fromBufferGeometry: function(a) {
            for (var b = this, c = a.attributes, d = c.position.array, e = void 0 !== c.index ? c.index.array : void 0, f = void 0 !== c.normal ? c.normal.array : void 0, g = void 0 !== c.color ? c.color.array : void 0, h = void 0 !== c.uv ? c.uv.array : void 0, i = [], j = [], k = 0, l = 0; k < d.length; k += 3, l += 2) b.vertices.push(new THREE.Vector3(d[k], d[k + 1], d[k + 2])), void 0 !== f && i.push(new THREE.Vector3(f[k], f[k + 1], f[k + 2])), void 0 !== g && b.colors.push(new THREE.Color(g[k], g[k + 1], g[k + 2])), void 0 !== h && j.push(new THREE.Vector2(h[l], h[l + 1]));
            var m = function(a, c, d) {
                var e = void 0 !== f ? [i[a].clone(), i[c].clone(), i[d].clone()] : [],
                    k = void 0 !== g ? [b.colors[a].clone(), b.colors[c].clone(), b.colors[d].clone()] : [];
                b.faces.push(new THREE.Face3(a, c, d, e, k)), void 0 !== h && b.faceVertexUvs[0].push([j[a].clone(), j[c].clone(), j[d].clone()])
            };
            if (void 0 !== e)
                for (var k = 0; k < e.length; k += 3) m(e[k], e[k + 1], e[k + 2]);
            else
                for (var k = 0; k < d.length / 3; k += 3) m(k, k + 1, k + 2);
            return this.computeFaceNormals(), null !== a.boundingBox && (this.boundingBox = a.boundingBox.clone()), null !== a.boundingSphere && (this.boundingSphere = a.boundingSphere.clone()), this
        },
        center: function() {
            this.computeBoundingBox();
            var a = new THREE.Vector3;
            return a.addVectors(this.boundingBox.min, this.boundingBox.max), a.multiplyScalar(-.5), this.applyMatrix((new THREE.Matrix4).makeTranslation(a.x, a.y, a.z)), this.computeBoundingBox(), a
        },
        computeFaceNormals: function() {
            for (var a = new THREE.Vector3, b = new THREE.Vector3, c = 0, d = this.faces.length; d > c; c++) {
                var e = this.faces[c],
                    f = this.vertices[e.a],
                    g = this.vertices[e.b],
                    h = this.vertices[e.c];
                a.subVectors(h, g), b.subVectors(f, g), a.cross(b), a.normalize(), e.normal.copy(a)
            }
        },
        computeVertexNormals: function(a) {
            var b, c, d, e, f, g;
            for (g = new Array(this.vertices.length), b = 0, c = this.vertices.length; c > b; b++) g[b] = new THREE.Vector3;
            if (a) {
                {
                    var h, i, j, k = new THREE.Vector3,
                        l = new THREE.Vector3;
                    new THREE.Vector3, new THREE.Vector3, new THREE.Vector3
                }
                for (d = 0, e = this.faces.length; e > d; d++) f = this.faces[d], h = this.vertices[f.a], i = this.vertices[f.b], j = this.vertices[f.c], k.subVectors(j, i), l.subVectors(h, i), k.cross(l), g[f.a].add(k), g[f.b].add(k), g[f.c].add(k)
            } else
                for (d = 0, e = this.faces.length; e > d; d++) f = this.faces[d], g[f.a].add(f.normal), g[f.b].add(f.normal), g[f.c].add(f.normal);
            for (b = 0, c = this.vertices.length; c > b; b++) g[b].normalize();
            for (d = 0, e = this.faces.length; e > d; d++) f = this.faces[d], f.vertexNormals[0] = g[f.a].clone(), f.vertexNormals[1] = g[f.b].clone(), f.vertexNormals[2] = g[f.c].clone()
        },
        computeMorphNormals: function() {
            var a, b, c, d, e;
            for (c = 0, d = this.faces.length; d > c; c++)
                for (e = this.faces[c], e.__originalFaceNormal ? e.__originalFaceNormal.copy(e.normal) : e.__originalFaceNormal = e.normal.clone(), e.__originalVertexNormals || (e.__originalVertexNormals = []), a = 0, b = e.vertexNormals.length; b > a; a++) e.__originalVertexNormals[a] ? e.__originalVertexNormals[a].copy(e.vertexNormals[a]) : e.__originalVertexNormals[a] = e.vertexNormals[a].clone();
            var f = new THREE.Geometry;
            for (f.faces = this.faces, a = 0, b = this.morphTargets.length; b > a; a++) {
                if (!this.morphNormals[a]) {
                    this.morphNormals[a] = {}, this.morphNormals[a].faceNormals = [], this.morphNormals[a].vertexNormals = [];
                    var g, h, i = this.morphNormals[a].faceNormals,
                        j = this.morphNormals[a].vertexNormals;
                    for (c = 0, d = this.faces.length; d > c; c++) g = new THREE.Vector3, h = {
                        a: new THREE.Vector3,
                        b: new THREE.Vector3,
                        c: new THREE.Vector3
                    }, i.push(g), j.push(h)
                }
                var k = this.morphNormals[a];
                f.vertices = this.morphTargets[a].vertices, f.computeFaceNormals(), f.computeVertexNormals();
                var g, h;
                for (c = 0, d = this.faces.length; d > c; c++) e = this.faces[c], g = k.faceNormals[c], h = k.vertexNormals[c], g.copy(e.normal), h.a.copy(e.vertexNormals[0]), h.b.copy(e.vertexNormals[1]), h.c.copy(e.vertexNormals[2])
            }
            for (c = 0, d = this.faces.length; d > c; c++) e = this.faces[c], e.normal = e.__originalFaceNormal, e.vertexNormals = e.__originalVertexNormals
        },
        computeTangents: function() {
            function a(a, b, c, d, e, f, g) {
                j = a.vertices[b], k = a.vertices[c], l = a.vertices[d], m = i[e], n = i[f], o = i[g], p = k.x - j.x, q = l.x - j.x, r = k.y - j.y, s = l.y - j.y, t = k.z - j.z, u = l.z - j.z, v = n.x - m.x, w = o.x - m.x, x = n.y - m.y, y = o.y - m.y, z = 1 / (v * y - w * x), F.set((y * p - x * q) * z, (y * r - x * s) * z, (y * t - x * u) * z), G.set((v * q - w * p) * z, (v * s - w * r) * z, (v * u - w * t) * z), D[b].add(F), D[c].add(F), D[d].add(F), E[b].add(G), E[c].add(G), E[d].add(G)
            }
            var b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, A, B, C, D = [],
                E = [],
                F = new THREE.Vector3,
                G = new THREE.Vector3,
                H = new THREE.Vector3,
                I = new THREE.Vector3,
                J = new THREE.Vector3;
            for (d = 0, e = this.vertices.length; e > d; d++) D[d] = new THREE.Vector3, E[d] = new THREE.Vector3;
            for (b = 0, c = this.faces.length; c > b; b++) h = this.faces[b], i = this.faceVertexUvs[0][b], a(this, h.a, h.b, h.c, 0, 1, 2);
            var K = ["a", "b", "c", "d"];
            for (b = 0, c = this.faces.length; c > b; b++)
                for (h = this.faces[b], f = 0; f < Math.min(h.vertexNormals.length, 3); f++) J.copy(h.vertexNormals[f]), g = h[K[f]], A = D[g], H.copy(A), H.sub(J.multiplyScalar(J.dot(A))).normalize(), I.crossVectors(h.vertexNormals[f], A), B = I.dot(E[g]), C = 0 > B ? -1 : 1, h.vertexTangents[f] = new THREE.Vector4(H.x, H.y, H.z, C);
            this.hasTangents = !0
        },
        computeLineDistances: function() {
            for (var a = 0, b = this.vertices, c = 0, d = b.length; d > c; c++) c > 0 && (a += b[c].distanceTo(b[c - 1])), this.lineDistances[c] = a
        },
        computeBoundingBox: function() {
            null === this.boundingBox && (this.boundingBox = new THREE.Box3), this.boundingBox.setFromPoints(this.vertices)
        },
        computeBoundingSphere: function() {
            null === this.boundingSphere && (this.boundingSphere = new THREE.Sphere), this.boundingSphere.setFromPoints(this.vertices)
        },
        merge: function(a, b, c) {
            if (a instanceof THREE.Geometry == !1) return void console.error("THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.", a);
            var d, e = this.vertices.length,
                f = this.vertices,
                g = a.vertices,
                h = this.faces,
                i = a.faces,
                j = this.faceVertexUvs[0],
                k = a.faceVertexUvs[0];
            void 0 === c && (c = 0), void 0 !== b && (d = (new THREE.Matrix3).getNormalMatrix(b));
            for (var l = 0, m = g.length; m > l; l++) {
                var n = g[l],
                    o = n.clone();
                void 0 !== b && o.applyMatrix4(b), f.push(o)
            }
            for (l = 0, m = i.length; m > l; l++) {
                var p, q, r, s = i[l],
                    t = s.vertexNormals,
                    u = s.vertexColors;
                p = new THREE.Face3(s.a + e, s.b + e, s.c + e), p.normal.copy(s.normal), void 0 !== d && p.normal.applyMatrix3(d).normalize();
                for (var v = 0, w = t.length; w > v; v++) q = t[v].clone(), void 0 !== d && q.applyMatrix3(d).normalize(), p.vertexNormals.push(q);
                p.color.copy(s.color);
                for (var v = 0, w = u.length; w > v; v++) r = u[v], p.vertexColors.push(r.clone());
                p.materialIndex = s.materialIndex + c, h.push(p)
            }
            for (l = 0, m = k.length; m > l; l++) {
                var x = k[l],
                    y = [];
                if (void 0 !== x) {
                    for (var v = 0, w = x.length; w > v; v++) y.push(x[v].clone());
                    j.push(y)
                }
            }
        },
        mergeMesh: function(a) {
            return a instanceof THREE.Mesh == !1 ? void console.error("THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.", a) : (a.matrixAutoUpdate && a.updateMatrix(), void this.merge(a.geometry, a.matrix))
        },
        mergeVertices: function() {
            var a, b, c, d, e, f, g, h, i = {},
                j = [],
                k = [],
                l = 4,
                m = Math.pow(10, l);
            for (c = 0, d = this.vertices.length; d > c; c++) a = this.vertices[c], b = Math.round(a.x * m) + "_" + Math.round(a.y * m) + "_" + Math.round(a.z * m), void 0 === i[b] ? (i[b] = c, j.push(this.vertices[c]), k[c] = j.length - 1) : k[c] = k[i[b]];
            var n = [];
            for (c = 0, d = this.faces.length; d > c; c++) {
                e = this.faces[c], e.a = k[e.a], e.b = k[e.b], e.c = k[e.c], f = [e.a, e.b, e.c];
                for (var o = -1, p = 0; 3 > p; p++)
                    if (f[p] == f[(p + 1) % 3]) {
                        o = p, n.push(c);
                        break
                    }
            }
            for (c = n.length - 1; c >= 0; c--) {
                var q = n[c];
                for (this.faces.splice(q, 1), g = 0, h = this.faceVertexUvs.length; h > g; g++) this.faceVertexUvs[g].splice(q, 1)
            }
            var r = this.vertices.length - j.length;
            return this.vertices = j, r
        },
        toJSON: function() {
            function a(a, b, c) {
                return c ? a | 1 << b : a & ~(1 << b)
            }

            function b(a) {
                var b = a.x.toString() + a.y.toString() + a.z.toString();
                return void 0 !== m[b] ? m[b] : (m[b] = l.length / 3, l.push(a.x, a.y, a.z), m[b])
            }

            function c(a) {
                var b = a.r.toString() + a.g.toString() + a.b.toString();
                return void 0 !== o[b] ? o[b] : (o[b] = n.length, n.push(a.getHex()), o[b])
            }

            function d(a) {
                var b = a.x.toString() + a.y.toString();
                return void 0 !== q[b] ? q[b] : (q[b] = p.length / 2, p.push(a.x, a.y), q[b])
            }
            var e = {
                metadata: {
                    version: 4,
                    type: "BufferGeometry",
                    generator: "BufferGeometryExporter"
                },
                uuid: this.uuid,
                type: this.type
            };
            if ("" !== this.name && (e.name = this.name), void 0 !== this.parameters) {
                var f = this.parameters;
                for (var g in f) void 0 !== f[g] && (e[g] = f[g]);
                return e
            }
            for (var h = [], i = 0; i < this.vertices.length; i++) {
                var j = this.vertices[i];
                h.push(j.x, j.y, j.z)
            }
            for (var k = [], l = [], m = {}, n = [], o = {}, p = [], q = {}, i = 0; i < this.faces.length; i++) {
                var r = this.faces[i],
                    s = !1,
                    t = !1,
                    u = void 0 !== this.faceVertexUvs[0][i],
                    v = r.normal.length() > 0,
                    w = r.vertexNormals.length > 0,
                    x = 1 !== r.color.r || 1 !== r.color.g || 1 !== r.color.b,
                    y = r.vertexColors.length > 0,
                    z = 0;
                if (z = a(z, 0, 0), z = a(z, 1, s), z = a(z, 2, t), z = a(z, 3, u), z = a(z, 4, v), z = a(z, 5, w), z = a(z, 6, x), z = a(z, 7, y), k.push(z), k.push(r.a, r.b, r.c), u) {
                    var A = this.faceVertexUvs[0][i];
                    k.push(d(A[0]), d(A[1]), d(A[2]))
                }
                if (v && k.push(b(r.normal)), w) {
                    var B = r.vertexNormals;
                    k.push(b(B[0]), b(B[1]), b(B[2]))
                }
                if (x && k.push(c(r.color)), y) {
                    var C = r.vertexColors;
                    k.push(c(C[0]), c(C[1]), c(C[2]))
                }
            }
            return e.data = {}, e.data.vertices = h, e.data.normals = l, n.length > 0 && (e.data.colors = n), p.length > 0 && (e.data.uvs = [p]), e.data.faces = k, e
        },
        clone: function() {
            for (var a = new THREE.Geometry, b = this.vertices, c = 0, d = b.length; d > c; c++) a.vertices.push(b[c].clone());
            for (var e = this.faces, c = 0, d = e.length; d > c; c++) a.faces.push(e[c].clone());
            for (var c = 0, d = this.faceVertexUvs.length; d > c; c++) {
                var f = this.faceVertexUvs[c];
                void 0 === a.faceVertexUvs[c] && (a.faceVertexUvs[c] = []);
                for (var g = 0, h = f.length; h > g; g++) {
                    for (var i = f[g], j = [], k = 0, l = i.length; l > k; k++) {
                        var m = i[k];
                        j.push(m.clone())
                    }
                    a.faceVertexUvs[c].push(j)
                }
            }
            return a
        },
        dispose: function() {
            this.dispatchEvent({
                type: "dispose"
            })
        }
    }, THREE.EventDispatcher.prototype.apply(THREE.Geometry.prototype), THREE.GeometryIdCount = 0, THREE.Camera = function() {
        THREE.Object3D.call(this), this.type = "Camera", this.matrixWorldInverse = new THREE.Matrix4, this.projectionMatrix = new THREE.Matrix4
    }, THREE.Camera.prototype = Object.create(THREE.Object3D.prototype), THREE.Camera.prototype.constructor = THREE.Camera, THREE.Camera.prototype.getWorldDirection = function() {
        var a = new THREE.Quaternion;
        return function(b) {
            var c = b || new THREE.Vector3;
            return this.getWorldQuaternion(a), c.set(0, 0, -1).applyQuaternion(a)
        }
    }(), THREE.Camera.prototype.lookAt = function() {
        var a = new THREE.Matrix4;
        return function(b) {
            a.lookAt(this.position, b, this.up), this.quaternion.setFromRotationMatrix(a)
        }
    }(), THREE.Camera.prototype.clone = function(a) {
        return void 0 === a && (a = new THREE.Camera), THREE.Object3D.prototype.clone.call(this, a), a.matrixWorldInverse.copy(this.matrixWorldInverse), a.projectionMatrix.copy(this.projectionMatrix), a
    }, THREE.CubeCamera = function(a, b, c) {
        THREE.Object3D.call(this), this.type = "CubeCamera";
        var d = 90,
            e = 1,
            f = new THREE.PerspectiveCamera(d, e, a, b);
        f.up.set(0, -1, 0), f.lookAt(new THREE.Vector3(1, 0, 0)), this.add(f);
        var g = new THREE.PerspectiveCamera(d, e, a, b);
        g.up.set(0, -1, 0), g.lookAt(new THREE.Vector3(-1, 0, 0)), this.add(g);
        var h = new THREE.PerspectiveCamera(d, e, a, b);
        h.up.set(0, 0, 1), h.lookAt(new THREE.Vector3(0, 1, 0)), this.add(h);
        var i = new THREE.PerspectiveCamera(d, e, a, b);
        i.up.set(0, 0, -1), i.lookAt(new THREE.Vector3(0, -1, 0)), this.add(i);
        var j = new THREE.PerspectiveCamera(d, e, a, b);
        j.up.set(0, -1, 0), j.lookAt(new THREE.Vector3(0, 0, 1)), this.add(j);
        var k = new THREE.PerspectiveCamera(d, e, a, b);
        k.up.set(0, -1, 0), k.lookAt(new THREE.Vector3(0, 0, -1)), this.add(k), this.renderTarget = new THREE.WebGLRenderTargetCube(c, c, {
            format: THREE.RGBFormat,
            magFilter: THREE.LinearFilter,
            minFilter: THREE.LinearFilter
        }), this.updateCubeMap = function(a, b) {
            var c = this.renderTarget,
                d = c.generateMipmaps;
            c.generateMipmaps = !1, c.activeCubeFace = 0, a.render(b, f, c), c.activeCubeFace = 1, a.render(b, g, c), c.activeCubeFace = 2, a.render(b, h, c), c.activeCubeFace = 3, a.render(b, i, c), c.activeCubeFace = 4, a.render(b, j, c), c.generateMipmaps = d, c.activeCubeFace = 5, a.render(b, k, c)
        }
    }, THREE.CubeCamera.prototype = Object.create(THREE.Object3D.prototype), THREE.CubeCamera.prototype.constructor = THREE.CubeCamera, THREE.OrthographicCamera = function(a, b, c, d, e, f) {
        THREE.Camera.call(this), this.type = "OrthographicCamera", this.zoom = 1, this.left = a, this.right = b, this.top = c, this.bottom = d, this.near = void 0 !== e ? e : .1, this.far = void 0 !== f ? f : 2e3, this.updateProjectionMatrix()
    }, THREE.OrthographicCamera.prototype = Object.create(THREE.Camera.prototype), THREE.OrthographicCamera.prototype.constructor = THREE.OrthographicCamera, THREE.OrthographicCamera.prototype.updateProjectionMatrix = function() {
        var a = (this.right - this.left) / (2 * this.zoom),
            b = (this.top - this.bottom) / (2 * this.zoom),
            c = (this.right + this.left) / 2,
            d = (this.top + this.bottom) / 2;
        this.projectionMatrix.makeOrthographic(c - a, c + a, d + b, d - b, this.near, this.far)
    }, THREE.OrthographicCamera.prototype.clone = function() {
        var a = new THREE.OrthographicCamera;
        return THREE.Camera.prototype.clone.call(this, a), a.zoom = this.zoom, a.left = this.left, a.right = this.right, a.top = this.top, a.bottom = this.bottom, a.near = this.near, a.far = this.far, a.projectionMatrix.copy(this.projectionMatrix), a
    }, THREE.PerspectiveCamera = function(a, b, c, d) {
        THREE.Camera.call(this), this.type = "PerspectiveCamera", this.zoom = 1, this.fov = void 0 !== a ? a : 50, this.aspect = void 0 !== b ? b : 1, this.near = void 0 !== c ? c : .1, this.far = void 0 !== d ? d : 2e3, this.updateProjectionMatrix()
    }, THREE.PerspectiveCamera.prototype = Object.create(THREE.Camera.prototype), THREE.PerspectiveCamera.prototype.constructor = THREE.PerspectiveCamera, THREE.PerspectiveCamera.prototype.setLens = function(a, b) {
        void 0 === b && (b = 24), this.fov = 2 * THREE.Math.radToDeg(Math.atan(b / (2 * a))), this.updateProjectionMatrix()
    }, THREE.PerspectiveCamera.prototype.setViewOffset = function(a, b, c, d, e, f) {
        this.fullWidth = a, this.fullHeight = b, this.x = c, this.y = d, this.width = e, this.height = f, this.updateProjectionMatrix()
    }, THREE.PerspectiveCamera.prototype.updateProjectionMatrix = function() {
        var a = THREE.Math.radToDeg(2 * Math.atan(Math.tan(.5 * THREE.Math.degToRad(this.fov)) / this.zoom));
        if (this.fullWidth) {
            var b = this.fullWidth / this.fullHeight,
                c = Math.tan(THREE.Math.degToRad(.5 * a)) * this.near,
                d = -c,
                e = b * d,
                f = b * c,
                g = Math.abs(f - e),
                h = Math.abs(c - d);
            this.projectionMatrix.makeFrustum(e + this.x * g / this.fullWidth, e + (this.x + this.width) * g / this.fullWidth, c - (this.y + this.height) * h / this.fullHeight, c - this.y * h / this.fullHeight, this.near, this.far)
        } else this.projectionMatrix.makePerspective(a, this.aspect, this.near, this.far)
    }, THREE.PerspectiveCamera.prototype.clone = function() {
        var a = new THREE.PerspectiveCamera;
        return THREE.Camera.prototype.clone.call(this, a), a.zoom = this.zoom, a.fov = this.fov, a.aspect = this.aspect, a.near = this.near, a.far = this.far, a.projectionMatrix.copy(this.projectionMatrix), a
    }, THREE.Light = function(a) {
        THREE.Object3D.call(this), this.type = "Light", this.color = new THREE.Color(a)
    }, THREE.Light.prototype = Object.create(THREE.Object3D.prototype), THREE.Light.prototype.constructor = THREE.Light, THREE.Light.prototype.clone = function(a) {
        return void 0 === a && (a = new THREE.Light), THREE.Object3D.prototype.clone.call(this, a), a.color.copy(this.color), a
    }, THREE.AmbientLight = function(a) {
        THREE.Light.call(this, a), this.type = "AmbientLight"
    }, THREE.AmbientLight.prototype = Object.create(THREE.Light.prototype), THREE.AmbientLight.prototype.constructor = THREE.AmbientLight, THREE.AmbientLight.prototype.clone = function() {
        var a = new THREE.AmbientLight;
        return THREE.Light.prototype.clone.call(this, a), a
    }, THREE.AreaLight = function(a, b) {
        THREE.Light.call(this, a), this.type = "AreaLight", this.normal = new THREE.Vector3(0, -1, 0), this.right = new THREE.Vector3(1, 0, 0), this.intensity = void 0 !== b ? b : 1, this.width = 1, this.height = 1, this.constantAttenuation = 1.5, this.linearAttenuation = .5, this.quadraticAttenuation = .1
    }, THREE.AreaLight.prototype = Object.create(THREE.Light.prototype), THREE.AreaLight.prototype.constructor = THREE.AreaLight, THREE.DirectionalLight = function(a, b) {
        THREE.Light.call(this, a), this.type = "DirectionalLight", this.position.set(0, 1, 0), this.target = new THREE.Object3D, this.intensity = void 0 !== b ? b : 1, this.castShadow = !1, this.onlyShadow = !1, this.shadowCameraNear = 50, this.shadowCameraFar = 5e3, this.shadowCameraLeft = -500, this.shadowCameraRight = 500, this.shadowCameraTop = 500, this.shadowCameraBottom = -500, this.shadowCameraVisible = !1, this.shadowBias = 0, this.shadowDarkness = .5, this.shadowMapWidth = 512, this.shadowMapHeight = 512, this.shadowCascade = !1, this.shadowCascadeOffset = new THREE.Vector3(0, 0, -1e3), this.shadowCascadeCount = 2, this.shadowCascadeBias = [0, 0, 0], this.shadowCascadeWidth = [512, 512, 512], this.shadowCascadeHeight = [512, 512, 512], this.shadowCascadeNearZ = [-1, .99, .998], this.shadowCascadeFarZ = [.99, .998, 1], this.shadowCascadeArray = [], this.shadowMap = null, this.shadowMapSize = null, this.shadowCamera = null, this.shadowMatrix = null
    }, THREE.DirectionalLight.prototype = Object.create(THREE.Light.prototype), THREE.DirectionalLight.prototype.constructor = THREE.DirectionalLight, THREE.DirectionalLight.prototype.clone = function() {
        var a = new THREE.DirectionalLight;
        return THREE.Light.prototype.clone.call(this, a), a.target = this.target.clone(), a.intensity = this.intensity, a.castShadow = this.castShadow, a.onlyShadow = this.onlyShadow, a.shadowCameraNear = this.shadowCameraNear, a.shadowCameraFar = this.shadowCameraFar, a.shadowCameraLeft = this.shadowCameraLeft, a.shadowCameraRight = this.shadowCameraRight, a.shadowCameraTop = this.shadowCameraTop, a.shadowCameraBottom = this.shadowCameraBottom, a.shadowCameraVisible = this.shadowCameraVisible, a.shadowBias = this.shadowBias, a.shadowDarkness = this.shadowDarkness, a.shadowMapWidth = this.shadowMapWidth, a.shadowMapHeight = this.shadowMapHeight, a.shadowCascade = this.shadowCascade, a.shadowCascadeOffset.copy(this.shadowCascadeOffset), a.shadowCascadeCount = this.shadowCascadeCount, a.shadowCascadeBias = this.shadowCascadeBias.slice(0), a.shadowCascadeWidth = this.shadowCascadeWidth.slice(0), a.shadowCascadeHeight = this.shadowCascadeHeight.slice(0), a.shadowCascadeNearZ = this.shadowCascadeNearZ.slice(0), a.shadowCascadeFarZ = this.shadowCascadeFarZ.slice(0), a
    }, THREE.HemisphereLight = function(a, b, c) {
        THREE.Light.call(this, a), this.type = "HemisphereLight", this.position.set(0, 100, 0), this.groundColor = new THREE.Color(b), this.intensity = void 0 !== c ? c : 1
    }, THREE.HemisphereLight.prototype = Object.create(THREE.Light.prototype), THREE.HemisphereLight.prototype.constructor = THREE.HemisphereLight, THREE.HemisphereLight.prototype.clone = function() {
        var a = new THREE.HemisphereLight;
        return THREE.Light.prototype.clone.call(this, a), a.groundColor.copy(this.groundColor), a.intensity = this.intensity, a
    }, THREE.PointLight = function(a, b, c) {
        THREE.Light.call(this, a), this.type = "PointLight", this.intensity = void 0 !== b ? b : 1, this.distance = void 0 !== c ? c : 0
    }, THREE.PointLight.prototype = Object.create(THREE.Light.prototype), THREE.PointLight.prototype.constructor = THREE.PointLight, THREE.PointLight.prototype.clone = function() {
        var a = new THREE.PointLight;
        return THREE.Light.prototype.clone.call(this, a), a.intensity = this.intensity, a.distance = this.distance, a
    }, THREE.SpotLight = function(a, b, c, d, e) {
        THREE.Light.call(this, a), this.type = "SpotLight", this.position.set(0, 1, 0), this.target = new THREE.Object3D, this.intensity = void 0 !== b ? b : 1, this.distance = void 0 !== c ? c : 0, this.angle = void 0 !== d ? d : Math.PI / 3, this.exponent = void 0 !== e ? e : 10, this.castShadow = !1, this.onlyShadow = !1, this.shadowCameraNear = 50, this.shadowCameraFar = 5e3, this.shadowCameraFov = 50, this.shadowCameraVisible = !1, this.shadowBias = 0, this.shadowDarkness = .5, this.shadowMapWidth = 512, this.shadowMapHeight = 512, this.shadowMap = null, this.shadowMapSize = null, this.shadowCamera = null, this.shadowMatrix = null
    }, THREE.SpotLight.prototype = Object.create(THREE.Light.prototype), THREE.SpotLight.prototype.constructor = THREE.SpotLight, THREE.SpotLight.prototype.clone = function() {
        var a = new THREE.SpotLight;
        return THREE.Light.prototype.clone.call(this, a), a.target = this.target.clone(), a.intensity = this.intensity, a.distance = this.distance, a.angle = this.angle, a.exponent = this.exponent, a.castShadow = this.castShadow, a.onlyShadow = this.onlyShadow, a.shadowCameraNear = this.shadowCameraNear, a.shadowCameraFar = this.shadowCameraFar, a.shadowCameraFov = this.shadowCameraFov, a.shadowCameraVisible = this.shadowCameraVisible, a.shadowBias = this.shadowBias, a.shadowDarkness = this.shadowDarkness, a.shadowMapWidth = this.shadowMapWidth, a.shadowMapHeight = this.shadowMapHeight, a
    }, THREE.Cache = function() {
        this.files = {}
    }, THREE.Cache.prototype = {
        constructor: THREE.Cache,
        add: function(a, b) {
            this.files[a] = b
        },
        get: function(a) {
            return this.files[a]
        },
        remove: function(a) {
            delete this.files[a]
        },
        clear: function() {
            this.files = {}
        }
    }, THREE.Loader = function(a) {
        this.showStatus = a, this.statusDomElement = a ? THREE.Loader.prototype.addStatusElement() : null, this.imageLoader = new THREE.ImageLoader, this.onLoadStart = function() {}, this.onLoadProgress = function() {}, this.onLoadComplete = function() {}
    }, THREE.Loader.prototype = {
        constructor: THREE.Loader,
        crossOrigin: void 0,
        addStatusElement: function() {
            var a = document.createElement("div");
            return a.style.position = "absolute", a.style.right = "0px", a.style.top = "0px", a.style.fontSize = "0.8em", a.style.textAlign = "left", a.style.background = "rgba(0,0,0,0.25)", a.style.color = "#fff", a.style.width = "120px", a.style.padding = "0.5em 0.5em 0.5em 0.5em", a.style.zIndex = 1e3, a.innerHTML = "Loading ...", a
        },
        updateProgress: function(a) {
            var b = "Loaded ";
            b += a.total ? (100 * a.loaded / a.total).toFixed(0) + "%" : (a.loaded / 1024).toFixed(2) + " KB", this.statusDomElement.innerHTML = b
        },
        extractUrlBase: function(a) {
            var b = a.split("/");
            return 1 === b.length ? "./" : (b.pop(), b.join("/") + "/")
        },
        initMaterials: function(a, b) {
            for (var c = [], d = 0; d < a.length; ++d) c[d] = this.createMaterial(a[d], b);
            return c
        },
        needsTangents: function(a) {
            for (var b = 0, c = a.length; c > b; b++) {
                var d = a[b];
                if (d instanceof THREE.ShaderMaterial) return !0
            }
            return !1
        },
        createMaterial: function(a, b) {
            function c(a) {
                var b = Math.log(a) / Math.LN2;
                return Math.pow(2, Math.round(b))
            }

            function d(a, d, e, g, h, i, j) {
                var k, l = b + e,
                    m = THREE.Loader.Handlers.get(l);
                if (null !== m ? k = m.load(l) : (k = new THREE.Texture, m = f.imageLoader, m.crossOrigin = f.crossOrigin, m.load(l, function(a) {
                        if (THREE.Math.isPowerOfTwo(a.width) === !1 || THREE.Math.isPowerOfTwo(a.height) === !1) {
                            var b = c(a.width),
                                d = c(a.height),
                                e = document.createElement("canvas");
                            e.width = b, e.height = d;
                            var f = e.getContext("2d");
                            f.drawImage(a, 0, 0, b, d), k.image = e
                        } else k.image = a;
                        k.needsUpdate = !0
                    })), k.sourceFile = e, g && (k.repeat.set(g[0], g[1]), 1 !== g[0] && (k.wrapS = THREE.RepeatWrapping), 1 !== g[1] && (k.wrapT = THREE.RepeatWrapping)), h && k.offset.set(h[0], h[1]), i) {
                    var n = {
                        repeat: THREE.RepeatWrapping,
                        mirror: THREE.MirroredRepeatWrapping
                    };
                    void 0 !== n[i[0]] && (k.wrapS = n[i[0]]), void 0 !== n[i[1]] && (k.wrapT = n[i[1]])
                }
                j && (k.anisotropy = j), a[d] = k
            }

            function e(a) {
                return (255 * a[0] << 16) + (255 * a[1] << 8) + 255 * a[2]
            }
            var f = this,
                g = "MeshLambertMaterial",
                h = {
                    color: 15658734,
                    opacity: 1,
                    map: null,
                    lightMap: null,
                    normalMap: null,
                    bumpMap: null,
                    wireframe: !1
                };
            if (a.shading) {
                var i = a.shading.toLowerCase();
                "phong" === i ? g = "MeshPhongMaterial" : "basic" === i && (g = "MeshBasicMaterial")
            }
            void 0 !== a.blending && void 0 !== THREE[a.blending] && (h.blending = THREE[a.blending]), (void 0 !== a.transparent || a.opacity < 1) && (h.transparent = a.transparent), void 0 !== a.depthTest && (h.depthTest = a.depthTest), void 0 !== a.depthWrite && (h.depthWrite = a.depthWrite), void 0 !== a.visible && (h.visible = a.visible), void 0 !== a.flipSided && (h.side = THREE.BackSide), void 0 !== a.doubleSided && (h.side = THREE.DoubleSide), void 0 !== a.wireframe && (h.wireframe = a.wireframe), void 0 !== a.vertexColors && ("face" === a.vertexColors ? h.vertexColors = THREE.FaceColors : a.vertexColors && (h.vertexColors = THREE.VertexColors)), a.colorDiffuse ? h.color = e(a.colorDiffuse) : a.DbgColor && (h.color = a.DbgColor), a.colorSpecular && (h.specular = e(a.colorSpecular)), a.colorAmbient && (h.ambient = e(a.colorAmbient)), a.colorEmissive && (h.emissive = e(a.colorEmissive)), a.transparency && (h.opacity = a.transparency), a.specularCoef && (h.shininess = a.specularCoef), a.mapDiffuse && b && d(h, "map", a.mapDiffuse, a.mapDiffuseRepeat, a.mapDiffuseOffset, a.mapDiffuseWrap, a.mapDiffuseAnisotropy), a.mapLight && b && d(h, "lightMap", a.mapLight, a.mapLightRepeat, a.mapLightOffset, a.mapLightWrap, a.mapLightAnisotropy), a.mapBump && b && d(h, "bumpMap", a.mapBump, a.mapBumpRepeat, a.mapBumpOffset, a.mapBumpWrap, a.mapBumpAnisotropy), a.mapNormal && b && d(h, "normalMap", a.mapNormal, a.mapNormalRepeat, a.mapNormalOffset, a.mapNormalWrap, a.mapNormalAnisotropy), a.mapSpecular && b && d(h, "specularMap", a.mapSpecular, a.mapSpecularRepeat, a.mapSpecularOffset, a.mapSpecularWrap, a.mapSpecularAnisotropy), a.mapAlpha && b && d(h, "alphaMap", a.mapAlpha, a.mapAlphaRepeat, a.mapAlphaOffset, a.mapAlphaWrap, a.mapAlphaAnisotropy), a.mapBumpScale && (h.bumpScale = a.mapBumpScale), a.mapNormalFactor && (h.normalScale = new THREE.Vector2(a.mapNormalFactor, a.mapNormalFactor));
            var j = new THREE[g](h);
            return void 0 !== a.DbgName && (j.name = a.DbgName), j
        }
    }, THREE.Loader.Handlers = {
        handlers: [],
        add: function(a, b) {
            this.handlers.push(a, b)
        },
        get: function(a) {
            for (var b = 0, c = this.handlers.length; c > b; b += 2) {
                var d = this.handlers[b],
                    e = this.handlers[b + 1];
                if (d.test(a)) return e
            }
            return null
        }
    }, THREE.XHRLoader = function(a) {
        this.cache = new THREE.Cache, this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager
    }, THREE.XHRLoader.prototype = {
        constructor: THREE.XHRLoader,
        load: function(a, b, c, d) {
            var e = this,
                f = e.cache.get(a);
            if (void 0 !== f) return void(b && b(f));
            var g = new XMLHttpRequest;
            g.open("GET", a, !0), g.addEventListener("load", function() {
                e.cache.add(a, this.response), b && b(this.response), e.manager.itemEnd(a)
            }, !1), void 0 !== c && g.addEventListener("progress", function(a) {
                c(a)
            }, !1), void 0 !== d && g.addEventListener("error", function(a) {
                d(a)
            }, !1), void 0 !== this.crossOrigin && (g.crossOrigin = this.crossOrigin), void 0 !== this.responseType && (g.responseType = this.responseType), g.send(null), e.manager.itemStart(a)
        },
        setResponseType: function(a) {
            this.responseType = a
        },
        setCrossOrigin: function(a) {
            this.crossOrigin = a
        }
    }, THREE.ImageLoader = function(a) {
        this.cache = new THREE.Cache, this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager
    }, THREE.ImageLoader.prototype = {
        constructor: THREE.ImageLoader,
        load: function(a, b, c, d) {
            var e = this,
                f = e.cache.get(a);
            if (void 0 !== f) return void b(f);
            var g = document.createElement("img");
            return void 0 !== b && g.addEventListener("load", function() {
                e.cache.add(a, this), b(this), e.manager.itemEnd(a)
            }, !1), void 0 !== c && g.addEventListener("progress", function(a) {
                c(a)
            }, !1), void 0 !== d && g.addEventListener("error", function(a) {
                d(a)
            }, !1), void 0 !== this.crossOrigin && (g.crossOrigin = this.crossOrigin), g.src = a, e.manager.itemStart(a), g
        },
        setCrossOrigin: function(a) {
            this.crossOrigin = a
        }
    }, THREE.JSONLoader = function(a) {
        THREE.Loader.call(this, a), this.withCredentials = !1
    }, THREE.JSONLoader.prototype = Object.create(THREE.Loader.prototype), THREE.JSONLoader.prototype.constructor = THREE.JSONLoader, THREE.JSONLoader.prototype.load = function(a, b, c) {
        c = c && "string" == typeof c ? c : this.extractUrlBase(a), this.onLoadStart(), this.loadAjaxJSON(this, a, b, c)
    }, THREE.JSONLoader.prototype.loadAjaxJSON = function(a, b, c, d, e) {
        var f = new XMLHttpRequest,
            g = 0;
        f.onreadystatechange = function() {
            if (f.readyState === f.DONE)
                if (200 === f.status || 0 === f.status) {
                    if (f.responseText) {
                        var h = JSON.parse(f.responseText);
                        if (void 0 !== h.metadata && "scene" === h.metadata.type) return void console.error('THREE.JSONLoader: "' + b + '" seems to be a Scene. Use THREE.SceneLoader instead.');
                        var i = a.parse(h, d);
                        c(i.geometry, i.materials)
                    } else console.error('THREE.JSONLoader: "' + b + '" seems to be unreachable or the file is empty.');
                    a.onLoadComplete()
                } else console.error("THREE.JSONLoader: Couldn't load \"" + b + '" (' + f.status + ")");
            else f.readyState === f.LOADING ? e && (0 === g && (g = f.getResponseHeader("Content-Length")), e({
                total: g,
                loaded: f.responseText.length
            })) : f.readyState === f.HEADERS_RECEIVED && void 0 !== e && (g = f.getResponseHeader("Content-Length"))
        }, f.open("GET", b, !0), f.withCredentials = this.withCredentials, f.send(null)
    }, THREE.JSONLoader.prototype.parse = function(a, b) {
        function c(b) {
            function c(a, b) {
                return a & 1 << b
            }
            var d, e, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, A, B, C, D, E, F = a.faces,
                G = a.vertices,
                H = a.normals,
                I = a.colors,
                J = 0;
            if (void 0 !== a.uvs) {
                for (d = 0; d < a.uvs.length; d++) a.uvs[d].length && J++;
                for (d = 0; J > d; d++) f.faceVertexUvs[d] = []
            }
            for (h = 0, i = G.length; i > h;) v = new THREE.Vector3, v.x = G[h++] * b, v.y = G[h++] * b, v.z = G[h++] * b, f.vertices.push(v);
            for (h = 0, i = F.length; i > h;)
                if (n = F[h++], o = c(n, 0), p = c(n, 1), q = c(n, 3), r = c(n, 4), s = c(n, 5), t = c(n, 6), u = c(n, 7), o) {
                    if (x = new THREE.Face3, x.a = F[h], x.b = F[h + 1], x.c = F[h + 3], y = new THREE.Face3, y.a = F[h + 1], y.b = F[h + 2], y.c = F[h + 3], h += 4, p && (m = F[h++], x.materialIndex = m, y.materialIndex = m), g = f.faces.length, q)
                        for (d = 0; J > d; d++)
                            for (B = a.uvs[d], f.faceVertexUvs[d][g] = [], f.faceVertexUvs[d][g + 1] = [], e = 0; 4 > e; e++) l = F[h++], D = B[2 * l], E = B[2 * l + 1], C = new THREE.Vector2(D, E), 2 !== e && f.faceVertexUvs[d][g].push(C), 0 !== e && f.faceVertexUvs[d][g + 1].push(C);
                    if (r && (k = 3 * F[h++], x.normal.set(H[k++], H[k++], H[k]), y.normal.copy(x.normal)), s)
                        for (d = 0; 4 > d; d++) k = 3 * F[h++], A = new THREE.Vector3(H[k++], H[k++], H[k]), 2 !== d && x.vertexNormals.push(A), 0 !== d && y.vertexNormals.push(A);
                    if (t && (j = F[h++], z = I[j], x.color.setHex(z), y.color.setHex(z)), u)
                        for (d = 0; 4 > d; d++) j = F[h++], z = I[j], 2 !== d && x.vertexColors.push(new THREE.Color(z)), 0 !== d && y.vertexColors.push(new THREE.Color(z));
                    f.faces.push(x), f.faces.push(y)
                } else {
                    if (w = new THREE.Face3, w.a = F[h++], w.b = F[h++], w.c = F[h++], p && (m = F[h++], w.materialIndex = m), g = f.faces.length, q)
                        for (d = 0; J > d; d++)
                            for (B = a.uvs[d], f.faceVertexUvs[d][g] = [], e = 0; 3 > e; e++) l = F[h++], D = B[2 * l], E = B[2 * l + 1], C = new THREE.Vector2(D, E), f.faceVertexUvs[d][g].push(C);
                    if (r && (k = 3 * F[h++], w.normal.set(H[k++], H[k++], H[k])), s)
                        for (d = 0; 3 > d; d++) k = 3 * F[h++], A = new THREE.Vector3(H[k++], H[k++], H[k]), w.vertexNormals.push(A);
                    if (t && (j = F[h++], w.color.setHex(I[j])), u)
                        for (d = 0; 3 > d; d++) j = F[h++], w.vertexColors.push(new THREE.Color(I[j]));
                    f.faces.push(w)
                }
        }

        function d() {
            var b = void 0 !== a.influencesPerVertex ? a.influencesPerVertex : 2;
            if (a.skinWeights)
                for (var c = 0, d = a.skinWeights.length; d > c; c += b) {
                    var e = a.skinWeights[c],
                        g = b > 1 ? a.skinWeights[c + 1] : 0,
                        h = b > 2 ? a.skinWeights[c + 2] : 0,
                        i = b > 3 ? a.skinWeights[c + 3] : 0;
                    f.skinWeights.push(new THREE.Vector4(e, g, h, i))
                }
            if (a.skinIndices)
                for (var c = 0, d = a.skinIndices.length; d > c; c += b) {
                    var j = a.skinIndices[c],
                        k = b > 1 ? a.skinIndices[c + 1] : 0,
                        l = b > 2 ? a.skinIndices[c + 2] : 0,
                        m = b > 3 ? a.skinIndices[c + 3] : 0;
                    f.skinIndices.push(new THREE.Vector4(j, k, l, m))
                }
            f.bones = a.bones, f.bones && f.bones.length > 0 && (f.skinWeights.length !== f.skinIndices.length || f.skinIndices.length !== f.vertices.length) && console.warn("When skinning, number of vertices (" + f.vertices.length + "), skinIndices (" + f.skinIndices.length + "), and skinWeights (" + f.skinWeights.length + ") should match."), f.animation = a.animation, f.animations = a.animations
        }

        function e(b) {
            if (void 0 !== a.morphTargets) {
                var c, d, e, g, h, i;
                for (c = 0, d = a.morphTargets.length; d > c; c++)
                    for (f.morphTargets[c] = {}, f.morphTargets[c].name = a.morphTargets[c].name, f.morphTargets[c].vertices = [], h = f.morphTargets[c].vertices, i = a.morphTargets[c].vertices, e = 0, g = i.length; g > e; e += 3) {
                        var j = new THREE.Vector3;
                        j.x = i[e] * b, j.y = i[e + 1] * b, j.z = i[e + 2] * b, h.push(j)
                    }
            }
            if (void 0 !== a.morphColors) {
                var c, d, k, l, m, n, o;
                for (c = 0, d = a.morphColors.length; d > c; c++)
                    for (f.morphColors[c] = {}, f.morphColors[c].name = a.morphColors[c].name, f.morphColors[c].colors = [], m = f.morphColors[c].colors, n = a.morphColors[c].colors, k = 0, l = n.length; l > k; k += 3) o = new THREE.Color(16755200), o.setRGB(n[k], n[k + 1], n[k + 2]), m.push(o)
            }
        }
        var f = new THREE.Geometry,
            g = void 0 !== a.scale ? 1 / a.scale : 1;
        if (c(g), d(), e(g), f.computeFaceNormals(), f.computeBoundingSphere(), void 0 === a.materials || 0 === a.materials.length) return {
            geometry: f
        };
        var h = this.initMaterials(a.materials, b);
        return this.needsTangents(h) && f.computeTangents(), {
            geometry: f,
            materials: h
        }
    }, THREE.LoadingManager = function(a, b, c) {
        var d = this,
            e = 0,
            f = 0;
        this.onLoad = a, this.onProgress = b, this.onError = c, this.itemStart = function() {
            f++
        }, this.itemEnd = function(a) {
            e++, void 0 !== d.onProgress && d.onProgress(a, e, f), e === f && void 0 !== d.onLoad && d.onLoad()
        }
    }, THREE.DefaultLoadingManager = new THREE.LoadingManager, THREE.BufferGeometryLoader = function(a) {
        this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager
    }, THREE.BufferGeometryLoader.prototype = {
        constructor: THREE.BufferGeometryLoader,
        load: function(a, b, c, d) {
            var e = this,
                f = new THREE.XHRLoader(e.manager);
            f.setCrossOrigin(this.crossOrigin), f.load(a, function(a) {
                b(e.parse(JSON.parse(a)))
            }, c, d)
        },
        setCrossOrigin: function(a) {
            this.crossOrigin = a
        },
        parse: function(a) {
            var b = new THREE.BufferGeometry,
                c = a.attributes;
            for (var d in c) {
                var e = c[d],
                    f = new self[e.type](e.array);
                b.addAttribute(d, new THREE.BufferAttribute(f, e.itemSize))
            }
            var g = a.offsets;
            void 0 !== g && (b.offsets = JSON.parse(JSON.stringify(g)));
            var h = a.boundingSphere;
            if (void 0 !== h) {
                var i = new THREE.Vector3;
                void 0 !== h.center && i.fromArray(h.center), b.boundingSphere = new THREE.Sphere(i, h.radius)
            }
            return b
        }
    }, THREE.MaterialLoader = function(a) {
        this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager
    }, THREE.MaterialLoader.prototype = {
        constructor: THREE.MaterialLoader,
        load: function(a, b, c, d) {
            var e = this,
                f = new THREE.XHRLoader(e.manager);
            f.setCrossOrigin(this.crossOrigin), f.load(a, function(a) {
                b(e.parse(JSON.parse(a)))
            }, c, d)
        },
        setCrossOrigin: function(a) {
            this.crossOrigin = a
        },
        parse: function(a) {
            var b = new THREE[a.type];
            if (void 0 !== a.color && b.color.setHex(a.color), void 0 !== a.ambient && b.ambient.setHex(a.ambient), void 0 !== a.emissive && b.emissive.setHex(a.emissive), void 0 !== a.specular && b.specular.setHex(a.specular), void 0 !== a.shininess && (b.shininess = a.shininess), void 0 !== a.uniforms && (b.uniforms = a.uniforms), void 0 !== a.vertexShader && (b.vertexShader = a.vertexShader), void 0 !== a.fragmentShader && (b.fragmentShader = a.fragmentShader), void 0 !== a.vertexColors && (b.vertexColors = a.vertexColors), void 0 !== a.shading && (b.shading = a.shading), void 0 !== a.blending && (b.blending = a.blending), void 0 !== a.side && (b.side = a.side), void 0 !== a.opacity && (b.opacity = a.opacity), void 0 !== a.transparent && (b.transparent = a.transparent), void 0 !== a.wireframe && (b.wireframe = a.wireframe), void 0 !== a.materials)
                for (var c = 0, d = a.materials.length; d > c; c++) b.materials.push(this.parse(a.materials[c]));
            return b
        }
    }, THREE.ObjectLoader = function(a) {
        this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager
    }, THREE.ObjectLoader.prototype = {
        constructor: THREE.ObjectLoader,
        load: function(a, b, c, d) {
            var e = this,
                f = new THREE.XHRLoader(e.manager);
            f.setCrossOrigin(this.crossOrigin), f.load(a, function(a) {
                b(e.parse(JSON.parse(a)))
            }, c, d)
        },
        setCrossOrigin: function(a) {
            this.crossOrigin = a
        },
        parse: function(a) {
            var b = this.parseGeometries(a.geometries),
                c = this.parseMaterials(a.materials),
                d = this.parseObject(a.object, b, c);
            return d
        },
        parseGeometries: function(a) {
            var b = {};
            if (void 0 !== a)
                for (var c = new THREE.JSONLoader, d = new THREE.BufferGeometryLoader, e = 0, f = a.length; f > e; e++) {
                    var g, h = a[e];
                    switch (h.type) {
                        case "PlaneGeometry":
                            g = new THREE.PlaneGeometry(h.width, h.height, h.widthSegments, h.heightSegments);
                            break;
                        case "BoxGeometry":
                        case "CubeGeometry":
                            g = new THREE.BoxGeometry(h.width, h.height, h.depth, h.widthSegments, h.heightSegments, h.depthSegments);
                            break;
                        case "CircleGeometry":
                            g = new THREE.CircleGeometry(h.radius, h.segments);
                            break;
                        case "CylinderGeometry":
                            g = new THREE.CylinderGeometry(h.radiusTop, h.radiusBottom, h.height, h.radialSegments, h.heightSegments, h.openEnded);
                            break;
                        case "SphereGeometry":
                            g = new THREE.SphereGeometry(h.radius, h.widthSegments, h.heightSegments, h.phiStart, h.phiLength, h.thetaStart, h.thetaLength);
                            break;
                        case "IcosahedronGeometry":
                            g = new THREE.IcosahedronGeometry(h.radius, h.detail);
                            break;
                        case "TorusGeometry":
                            g = new THREE.TorusGeometry(h.radius, h.tube, h.radialSegments, h.tubularSegments, h.arc);
                            break;
                        case "TorusKnotGeometry":
                            g = new THREE.TorusKnotGeometry(h.radius, h.tube, h.radialSegments, h.tubularSegments, h.p, h.q, h.heightScale);
                            break;
                        case "BufferGeometry":
                            g = d.parse(h.data);
                            break;
                        case "Geometry":
                            g = c.parse(h.data).geometry
                    }
                    g.uuid = h.uuid, void 0 !== h.name && (g.name = h.name), b[h.uuid] = g
                }
            return b
        },
        parseMaterials: function(a) {
            var b = {};
            if (void 0 !== a)
                for (var c = new THREE.MaterialLoader, d = 0, e = a.length; e > d; d++) {
                    var f = a[d],
                        g = c.parse(f);
                    g.uuid = f.uuid, void 0 !== f.name && (g.name = f.name), b[f.uuid] = g
                }
            return b
        },
        parseObject: function() {
            var a = new THREE.Matrix4;
            return function(b, c, d) {
                var e;
                switch (b.type) {
                    case "Scene":
                        e = new THREE.Scene;
                        break;
                    case "PerspectiveCamera":
                        e = new THREE.PerspectiveCamera(b.fov, b.aspect, b.near, b.far);
                        break;
                    case "OrthographicCamera":
                        e = new THREE.OrthographicCamera(b.left, b.right, b.top, b.bottom, b.near, b.far);
                        break;
                    case "AmbientLight":
                        e = new THREE.AmbientLight(b.color);
                        break;
                    case "DirectionalLight":
                        e = new THREE.DirectionalLight(b.color, b.intensity);
                        break;
                    case "PointLight":
                        e = new THREE.PointLight(b.color, b.intensity, b.distance);
                        break;
                    case "SpotLight":
                        e = new THREE.SpotLight(b.color, b.intensity, b.distance, b.angle, b.exponent);
                        break;
                    case "HemisphereLight":
                        e = new THREE.HemisphereLight(b.color, b.groundColor, b.intensity);
                        break;
                    case "Mesh":
                        var f = c[b.geometry],
                            g = d[b.material];
                        void 0 === f && console.warn("THREE.ObjectLoader: Undefined geometry", b.geometry), void 0 === g && console.warn("THREE.ObjectLoader: Undefined material", b.material), e = new THREE.Mesh(f, g);
                        break;
                    case "Line":
                        var f = c[b.geometry],
                            g = d[b.material];
                        void 0 === f && console.warn("THREE.ObjectLoader: Undefined geometry", b.geometry), void 0 === g && console.warn("THREE.ObjectLoader: Undefined material", b.material), e = new THREE.Line(f, g);
                        break;
                    case "Sprite":
                        var g = d[b.material];
                        void 0 === g && console.warn("THREE.ObjectLoader: Undefined material", b.material), e = new THREE.Sprite(g);
                        break;
                    case "Group":
                        e = new THREE.Group;
                        break;
                    default:
                        e = new THREE.Object3D
                }
                if (e.uuid = b.uuid, void 0 !== b.name && (e.name = b.name), void 0 !== b.matrix ? (a.fromArray(b.matrix), a.decompose(e.position, e.quaternion, e.scale)) : (void 0 !== b.position && e.position.fromArray(b.position), void 0 !== b.rotation && e.rotation.fromArray(b.rotation), void 0 !== b.scale && e.scale.fromArray(b.scale)), void 0 !== b.visible && (e.visible = b.visible), void 0 !== b.userData && (e.userData = b.userData), void 0 !== b.children)
                    for (var h in b.children) e.add(this.parseObject(b.children[h], c, d));
                return e
            }
        }()
    }, THREE.TextureLoader = function(a) {
        this.manager = void 0 !== a ? a : THREE.DefaultLoadingManager
    }, THREE.TextureLoader.prototype = {
        constructor: THREE.TextureLoader,
        load: function(a, b, c, d) {
            var e = this,
                f = new THREE.ImageLoader(e.manager);
            f.setCrossOrigin(this.crossOrigin), f.load(a, function(a) {
                var c = new THREE.Texture(a);
                c.needsUpdate = !0, void 0 !== b && b(c)
            }, c, d)
        },
        setCrossOrigin: function(a) {
            this.crossOrigin = a
        }
    }, THREE.DataTextureLoader = THREE.BinaryTextureLoader = function() {
        this._parser = null
    }, THREE.BinaryTextureLoader.prototype = {
        constructor: THREE.BinaryTextureLoader,
        load: function(a, b, c, d) {
            var e = this,
                f = new THREE.DataTexture,
                g = new THREE.XHRLoader;
            return g.setResponseType("arraybuffer"), g.load(a, function(a) {
                var c = e._parser(a);
                c && (void 0 !== c.image ? f.image = c.image : void 0 !== c.data && (f.image.width = c.width, f.image.height = c.height, f.image.data = c.data), f.wrapS = void 0 !== c.wrapS ? c.wrapS : THREE.ClampToEdgeWrapping, f.wrapT = void 0 !== c.wrapT ? c.wrapT : THREE.ClampToEdgeWrapping, f.magFilter = void 0 !== c.magFilter ? c.magFilter : THREE.LinearFilter, f.minFilter = void 0 !== c.minFilter ? c.minFilter : THREE.LinearMipMapLinearFilter, f.anisotropy = void 0 !== c.anisotropy ? c.anisotropy : 1, void 0 !== c.format && (f.format = c.format), void 0 !== c.type && (f.type = c.type), void 0 !== c.mipmaps && (f.mipmaps = c.mipmaps), 1 === c.mipmapCount && (f.minFilter = THREE.LinearFilter), f.needsUpdate = !0, b && b(f, c))
            }, c, d), f
        }
    }, THREE.CompressedTextureLoader = function() {
        this._parser = null
    }, THREE.CompressedTextureLoader.prototype = {
        constructor: THREE.CompressedTextureLoader,
        load: function(a, b) {
            var c = this,
                d = [],
                e = new THREE.CompressedTexture;
            e.image = d;
            var f = new THREE.XHRLoader;
            if (f.setResponseType("arraybuffer"), a instanceof Array)
                for (var g = 0, h = function(h) {
                        f.load(a[h], function(a) {
                            var f = c._parser(a, !0);
                            d[h] = {
                                width: f.width,
                                height: f.height,
                                format: f.format,
                                mipmaps: f.mipmaps
                            }, g += 1, 6 === g && (1 == f.mipmapCount && (e.minFilter = THREE.LinearFilter), e.format = f.format, e.needsUpdate = !0, b && b(e))
                        })
                    }, i = 0, j = a.length; j > i; ++i) h(i);
            else f.load(a, function(a) {
                var f = c._parser(a, !0);
                if (f.isCubemap)
                    for (var g = f.mipmaps.length / f.mipmapCount, h = 0; g > h; h++) {
                        d[h] = {
                            mipmaps: []
                        };
                        for (var i = 0; i < f.mipmapCount; i++) d[h].mipmaps.push(f.mipmaps[h * f.mipmapCount + i]), d[h].format = f.format, d[h].width = f.width, d[h].height = f.height
                    } else e.image.width = f.width, e.image.height = f.height, e.mipmaps = f.mipmaps;
                1 === f.mipmapCount && (e.minFilter = THREE.LinearFilter), e.format = f.format, e.needsUpdate = !0, b && b(e)
            });
            return e
        }
    }, THREE.Material = function() {
        Object.defineProperty(this, "id", {
            value: THREE.MaterialIdCount++
        }), this.uuid = THREE.Math.generateUUID(), this.name = "", this.type = "Material", this.side = THREE.FrontSide, this.opacity = 1, this.transparent = !1, this.blending = THREE.NormalBlending, this.blendSrc = THREE.SrcAlphaFactor, this.blendDst = THREE.OneMinusSrcAlphaFactor, this.blendEquation = THREE.AddEquation, this.depthTest = !0, this.depthWrite = !0, this.polygonOffset = !1, this.polygonOffsetFactor = 0, this.polygonOffsetUnits = 0, this.alphaTest = 0, this.overdraw = 0, this.visible = !0, this.needsUpdate = !0
    }, THREE.Material.prototype = {
        constructor: THREE.Material,
        setValues: function(a) {
            if (void 0 !== a)
                for (var b in a) {
                    var c = a[b];
                    if (void 0 !== c) {
                        if (b in this) {
                            var d = this[b];
                            d instanceof THREE.Color ? d.set(c) : d instanceof THREE.Vector3 && c instanceof THREE.Vector3 ? d.copy(c) : this[b] = "overdraw" == b ? Number(c) : c
                        }
                    } else console.warn("THREE.Material: '" + b + "' parameter is undefined.")
                }
        },
        toJSON: function() {
            var a = {
                metadata: {
                    version: 4.2,
                    type: "material",
                    generator: "MaterialExporter"
                },
                uuid: this.uuid,
                type: this.type
            };
            return "" !== this.name && (a.name = this.name), this instanceof THREE.MeshBasicMaterial ? (a.color = this.color.getHex(), this.vertexColors !== THREE.NoColors && (a.vertexColors = this.vertexColors), this.blending !== THREE.NormalBlending && (a.blending = this.blending), this.side !== THREE.FrontSide && (a.side = this.side)) : this instanceof THREE.MeshLambertMaterial ? (a.color = this.color.getHex(), a.ambient = this.ambient.getHex(), a.emissive = this.emissive.getHex(), this.vertexColors !== THREE.NoColors && (a.vertexColors = this.vertexColors), this.blending !== THREE.NormalBlending && (a.blending = this.blending), this.side !== THREE.FrontSide && (a.side = this.side)) : this instanceof THREE.MeshPhongMaterial ? (a.color = this.color.getHex(), a.ambient = this.ambient.getHex(), a.emissive = this.emissive.getHex(), a.specular = this.specular.getHex(), a.shininess = this.shininess, this.vertexColors !== THREE.NoColors && (a.vertexColors = this.vertexColors), this.blending !== THREE.NormalBlending && (a.blending = this.blending), this.side !== THREE.FrontSide && (a.side = this.side)) : this instanceof THREE.MeshNormalMaterial ? (this.shading !== THREE.FlatShading && (a.shading = this.shading), this.blending !== THREE.NormalBlending && (a.blending = this.blending), this.side !== THREE.FrontSide && (a.side = this.side)) : this instanceof THREE.MeshDepthMaterial ? (this.blending !== THREE.NormalBlending && (a.blending = this.blending), this.side !== THREE.FrontSide && (a.side = this.side)) : this instanceof THREE.ShaderMaterial ? (a.uniforms = this.uniforms, a.vertexShader = this.vertexShader, a.fragmentShader = this.fragmentShader) : this instanceof THREE.SpriteMaterial && (a.color = this.color.getHex()), this.opacity < 1 && (a.opacity = this.opacity), this.transparent !== !1 && (a.transparent = this.transparent), this.wireframe !== !1 && (a.wireframe = this.wireframe), a
        },
        clone: function(a) {
            return void 0 === a && (a = new THREE.Material), a.name = this.name, a.side = this.side, a.opacity = this.opacity, a.transparent = this.transparent, a.blending = this.blending, a.blendSrc = this.blendSrc, a.blendDst = this.blendDst, a.blendEquation = this.blendEquation, a.depthTest = this.depthTest, a.depthWrite = this.depthWrite, a.polygonOffset = this.polygonOffset, a.polygonOffsetFactor = this.polygonOffsetFactor, a.polygonOffsetUnits = this.polygonOffsetUnits, a.alphaTest = this.alphaTest, a.overdraw = this.overdraw, a.visible = this.visible, a
        },
        dispose: function() {
            this.dispatchEvent({
                type: "dispose"
            })
        }
    }, THREE.EventDispatcher.prototype.apply(THREE.Material.prototype), THREE.MaterialIdCount = 0, THREE.LineBasicMaterial = function(a) {
        THREE.Material.call(this), this.type = "LineBasicMaterial", this.color = new THREE.Color(16777215), this.linewidth = 1, this.linecap = "round", this.linejoin = "round", this.vertexColors = THREE.NoColors, this.fog = !0, this.setValues(a)
    }, THREE.LineBasicMaterial.prototype = Object.create(THREE.Material.prototype), THREE.LineBasicMaterial.prototype.constructor = THREE.LineBasicMaterial, THREE.LineBasicMaterial.prototype.clone = function() {
        var a = new THREE.LineBasicMaterial;
        return THREE.Material.prototype.clone.call(this, a), a.color.copy(this.color), a.linewidth = this.linewidth, a.linecap = this.linecap, a.linejoin = this.linejoin, a.vertexColors = this.vertexColors, a.fog = this.fog, a
    }, THREE.LineDashedMaterial = function(a) {
        THREE.Material.call(this), this.type = "LineDashedMaterial", this.color = new THREE.Color(16777215), this.linewidth = 1, this.scale = 1, this.dashSize = 3, this.gapSize = 1, this.vertexColors = !1, this.fog = !0, this.setValues(a)
    }, THREE.LineDashedMaterial.prototype = Object.create(THREE.Material.prototype), THREE.LineDashedMaterial.prototype.constructor = THREE.LineDashedMaterial, THREE.LineDashedMaterial.prototype.clone = function() {
        var a = new THREE.LineDashedMaterial;
        return THREE.Material.prototype.clone.call(this, a), a.color.copy(this.color), a.linewidth = this.linewidth, a.scale = this.scale, a.dashSize = this.dashSize, a.gapSize = this.gapSize, a.vertexColors = this.vertexColors, a.fog = this.fog, a
    }, THREE.MeshBasicMaterial = function(a) {
        THREE.Material.call(this), this.type = "MeshBasicMaterial", this.color = new THREE.Color(16777215), this.map = null, this.lightMap = null, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = THREE.MultiplyOperation, this.reflectivity = 1, this.refractionRatio = .98, this.fog = !0, this.shading = THREE.SmoothShading, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.vertexColors = THREE.NoColors, this.skinning = !1, this.morphTargets = !1, this.setValues(a)
    }, THREE.MeshBasicMaterial.prototype = Object.create(THREE.Material.prototype), THREE.MeshBasicMaterial.prototype.constructor = THREE.MeshBasicMaterial, THREE.MeshBasicMaterial.prototype.clone = function() {
        var a = new THREE.MeshBasicMaterial;
        return THREE.Material.prototype.clone.call(this, a), a.color.copy(this.color), a.map = this.map, a.lightMap = this.lightMap, a.specularMap = this.specularMap, a.alphaMap = this.alphaMap, a.envMap = this.envMap, a.combine = this.combine, a.reflectivity = this.reflectivity, a.refractionRatio = this.refractionRatio, a.fog = this.fog, a.shading = this.shading, a.wireframe = this.wireframe, a.wireframeLinewidth = this.wireframeLinewidth, a.wireframeLinecap = this.wireframeLinecap, a.wireframeLinejoin = this.wireframeLinejoin, a.vertexColors = this.vertexColors, a.skinning = this.skinning, a.morphTargets = this.morphTargets, a
    }, THREE.MeshLambertMaterial = function(a) {
        THREE.Material.call(this), this.type = "MeshLambertMaterial", this.color = new THREE.Color(16777215), this.ambient = new THREE.Color(16777215), this.emissive = new THREE.Color(0), this.wrapAround = !1, this.wrapRGB = new THREE.Vector3(1, 1, 1), this.map = null, this.lightMap = null, this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = THREE.MultiplyOperation, this.reflectivity = 1, this.refractionRatio = .98, this.fog = !0, this.shading = THREE.SmoothShading, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.vertexColors = THREE.NoColors, this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.setValues(a)
    }, THREE.MeshLambertMaterial.prototype = Object.create(THREE.Material.prototype), THREE.MeshLambertMaterial.prototype.constructor = THREE.MeshLambertMaterial, THREE.MeshLambertMaterial.prototype.clone = function() {
        var a = new THREE.MeshLambertMaterial;
        return THREE.Material.prototype.clone.call(this, a), a.color.copy(this.color), a.ambient.copy(this.ambient), a.emissive.copy(this.emissive), a.wrapAround = this.wrapAround, a.wrapRGB.copy(this.wrapRGB), a.map = this.map, a.lightMap = this.lightMap, a.specularMap = this.specularMap, a.alphaMap = this.alphaMap, a.envMap = this.envMap, a.combine = this.combine, a.reflectivity = this.reflectivity, a.refractionRatio = this.refractionRatio, a.fog = this.fog, a.shading = this.shading, a.wireframe = this.wireframe, a.wireframeLinewidth = this.wireframeLinewidth, a.wireframeLinecap = this.wireframeLinecap, a.wireframeLinejoin = this.wireframeLinejoin, a.vertexColors = this.vertexColors, a.skinning = this.skinning, a.morphTargets = this.morphTargets, a.morphNormals = this.morphNormals, a
    }, THREE.MeshPhongMaterial = function(a) {
        THREE.Material.call(this), this.type = "MeshPhongMaterial", this.color = new THREE.Color(16777215), this.ambient = new THREE.Color(16777215), this.emissive = new THREE.Color(0), this.specular = new THREE.Color(1118481), this.shininess = 30, this.metal = !1, this.wrapAround = !1, this.wrapRGB = new THREE.Vector3(1, 1, 1), this.map = null, this.lightMap = null, this.bumpMap = null, this.bumpScale = 1, this.normalMap = null, this.normalScale = new THREE.Vector2(1, 1), this.specularMap = null, this.alphaMap = null, this.envMap = null, this.combine = THREE.MultiplyOperation, this.reflectivity = 1, this.refractionRatio = .98, this.fog = !0, this.shading = THREE.SmoothShading, this.wireframe = !1, this.wireframeLinewidth = 1, this.wireframeLinecap = "round", this.wireframeLinejoin = "round", this.vertexColors = THREE.NoColors, this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.setValues(a)
    }, THREE.MeshPhongMaterial.prototype = Object.create(THREE.Material.prototype), THREE.MeshPhongMaterial.prototype.constructor = THREE.MeshPhongMaterial, THREE.MeshPhongMaterial.prototype.clone = function() {
        var a = new THREE.MeshPhongMaterial;
        return THREE.Material.prototype.clone.call(this, a), a.color.copy(this.color), a.ambient.copy(this.ambient), a.emissive.copy(this.emissive), a.specular.copy(this.specular), a.shininess = this.shininess, a.metal = this.metal, a.wrapAround = this.wrapAround, a.wrapRGB.copy(this.wrapRGB), a.map = this.map, a.lightMap = this.lightMap, a.bumpMap = this.bumpMap, a.bumpScale = this.bumpScale, a.normalMap = this.normalMap, a.normalScale.copy(this.normalScale), a.specularMap = this.specularMap, a.alphaMap = this.alphaMap, a.envMap = this.envMap, a.combine = this.combine, a.reflectivity = this.reflectivity, a.refractionRatio = this.refractionRatio, a.fog = this.fog, a.shading = this.shading, a.wireframe = this.wireframe, a.wireframeLinewidth = this.wireframeLinewidth, a.wireframeLinecap = this.wireframeLinecap, a.wireframeLinejoin = this.wireframeLinejoin, a.vertexColors = this.vertexColors, a.skinning = this.skinning, a.morphTargets = this.morphTargets, a.morphNormals = this.morphNormals, a
    }, THREE.MeshDepthMaterial = function(a) {
        THREE.Material.call(this), this.type = "MeshDepthMaterial", this.morphTargets = !1, this.wireframe = !1, this.wireframeLinewidth = 1, this.setValues(a)
    }, THREE.MeshDepthMaterial.prototype = Object.create(THREE.Material.prototype), THREE.MeshDepthMaterial.prototype.constructor = THREE.MeshDepthMaterial, THREE.MeshDepthMaterial.prototype.clone = function() {
        var a = new THREE.MeshDepthMaterial;
        return THREE.Material.prototype.clone.call(this, a), a.wireframe = this.wireframe, a.wireframeLinewidth = this.wireframeLinewidth, a
    }, THREE.MeshNormalMaterial = function(a) {
        THREE.Material.call(this, a), this.type = "MeshNormalMaterial", this.shading = THREE.FlatShading, this.wireframe = !1, this.wireframeLinewidth = 1, this.morphTargets = !1, this.setValues(a)
    }, THREE.MeshNormalMaterial.prototype = Object.create(THREE.Material.prototype), THREE.MeshNormalMaterial.prototype.constructor = THREE.MeshNormalMaterial, THREE.MeshNormalMaterial.prototype.clone = function() {
        var a = new THREE.MeshNormalMaterial;
        return THREE.Material.prototype.clone.call(this, a), a.shading = this.shading, a.wireframe = this.wireframe, a.wireframeLinewidth = this.wireframeLinewidth, a
    }, THREE.MeshFaceMaterial = function(a) {
        this.uuid = THREE.Math.generateUUID(), this.type = "MeshFaceMaterial", this.materials = a instanceof Array ? a : []
    }, THREE.MeshFaceMaterial.prototype = {
        constructor: THREE.MeshFaceMaterial,
        toJSON: function() {
            for (var a = {
                    metadata: {
                        version: 4.2,
                        type: "material",
                        generator: "MaterialExporter"
                    },
                    uuid: this.uuid,
                    type: this.type,
                    materials: []
                }, b = 0, c = this.materials.length; c > b; b++) a.materials.push(this.materials[b].toJSON());
            return a
        },
        clone: function() {
            for (var a = new THREE.MeshFaceMaterial, b = 0; b < this.materials.length; b++) a.materials.push(this.materials[b].clone());
            return a
        }
    }, THREE.PointCloudMaterial = function(a) {
        THREE.Material.call(this), this.type = "PointCloudMaterial", this.color = new THREE.Color(16777215), this.map = null, this.size = 1, this.sizeAttenuation = !0, this.vertexColors = THREE.NoColors, this.fog = !0, this.setValues(a)
    }, THREE.PointCloudMaterial.prototype = Object.create(THREE.Material.prototype), THREE.PointCloudMaterial.prototype.constructor = THREE.PointCloudMaterial, THREE.PointCloudMaterial.prototype.clone = function() {
        var a = new THREE.PointCloudMaterial;
        return THREE.Material.prototype.clone.call(this, a), a.color.copy(this.color), a.map = this.map, a.size = this.size, a.sizeAttenuation = this.sizeAttenuation, a.vertexColors = this.vertexColors, a.fog = this.fog, a
    }, THREE.ParticleBasicMaterial = function(a) {
        return console.warn("THREE.ParticleBasicMaterial has been renamed to THREE.PointCloudMaterial."), new THREE.PointCloudMaterial(a)
    }, THREE.ParticleSystemMaterial = function(a) {
        return console.warn("THREE.ParticleSystemMaterial has been renamed to THREE.PointCloudMaterial."), new THREE.PointCloudMaterial(a)
    }, THREE.ShaderMaterial = function(a) {
        THREE.Material.call(this), this.type = "ShaderMaterial", this.defines = {}, this.uniforms = {}, this.attributes = null, this.vertexShader = "void main() {\n	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}", this.fragmentShader = "void main() {\n	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}", this.shading = THREE.SmoothShading, this.linewidth = 1, this.wireframe = !1, this.wireframeLinewidth = 1, this.fog = !1, this.lights = !1, this.vertexColors = THREE.NoColors, this.skinning = !1, this.morphTargets = !1, this.morphNormals = !1, this.defaultAttributeValues = {
            color: [1, 1, 1],
            uv: [0, 0],
            uv2: [0, 0]
        }, this.index0AttributeName = void 0, this.setValues(a)
    }, THREE.ShaderMaterial.prototype = Object.create(THREE.Material.prototype), THREE.ShaderMaterial.prototype.constructor = THREE.ShaderMaterial, THREE.ShaderMaterial.prototype.clone = function() {
        var a = new THREE.ShaderMaterial;
        return THREE.Material.prototype.clone.call(this, a), a.fragmentShader = this.fragmentShader, a.vertexShader = this.vertexShader, a.uniforms = THREE.UniformsUtils.clone(this.uniforms), a.attributes = this.attributes, a.defines = this.defines, a.shading = this.shading, a.wireframe = this.wireframe, a.wireframeLinewidth = this.wireframeLinewidth, a.fog = this.fog, a.lights = this.lights, a.vertexColors = this.vertexColors, a.skinning = this.skinning, a.morphTargets = this.morphTargets, a.morphNormals = this.morphNormals, a
    }, THREE.RawShaderMaterial = function(a) {
        THREE.ShaderMaterial.call(this, a), this.type = "RawShaderMaterial"
    }, THREE.RawShaderMaterial.prototype = Object.create(THREE.ShaderMaterial.prototype), THREE.RawShaderMaterial.prototype.constructor = THREE.RawShaderMaterial, THREE.RawShaderMaterial.prototype.clone = function() {
        var a = new THREE.RawShaderMaterial;
        return THREE.ShaderMaterial.prototype.clone.call(this, a), a
    }, THREE.SpriteMaterial = function(a) {
        THREE.Material.call(this), this.type = "SpriteMaterial", this.color = new THREE.Color(16777215), this.map = null, this.rotation = 0, this.fog = !1, this.setValues(a)
    }, THREE.SpriteMaterial.prototype = Object.create(THREE.Material.prototype), THREE.SpriteMaterial.prototype.constructor = THREE.SpriteMaterial, THREE.SpriteMaterial.prototype.clone = function() {
        var a = new THREE.SpriteMaterial;
        return THREE.Material.prototype.clone.call(this, a), a.color.copy(this.color), a.map = this.map, a.rotation = this.rotation, a.fog = this.fog, a
    }, THREE.Texture = function(a, b, c, d, e, f, g, h, i) {
        Object.defineProperty(this, "id", {
            value: THREE.TextureIdCount++
        }), this.uuid = THREE.Math.generateUUID(), this.name = "", this.image = void 0 !== a ? a : THREE.Texture.DEFAULT_IMAGE, this.mipmaps = [], this.mapping = void 0 !== b ? b : THREE.Texture.DEFAULT_MAPPING, this.wrapS = void 0 !== c ? c : THREE.ClampToEdgeWrapping, this.wrapT = void 0 !== d ? d : THREE.ClampToEdgeWrapping, this.magFilter = void 0 !== e ? e : THREE.LinearFilter, this.minFilter = void 0 !== f ? f : THREE.LinearMipMapLinearFilter, this.anisotropy = void 0 !== i ? i : 1, this.format = void 0 !== g ? g : THREE.RGBAFormat, this.type = void 0 !== h ? h : THREE.UnsignedByteType, this.offset = new THREE.Vector2(0, 0), this.repeat = new THREE.Vector2(1, 1), this.generateMipmaps = !0, this.premultiplyAlpha = !1, this.flipY = !0, this.unpackAlignment = 4, this._needsUpdate = !1, this.onUpdate = null
    }, THREE.Texture.DEFAULT_IMAGE = void 0, THREE.Texture.DEFAULT_MAPPING = THREE.UVMapping, THREE.Texture.prototype = {
        constructor: THREE.Texture,
        get needsUpdate() {
            return this._needsUpdate
        },
        set needsUpdate(a) {
            a === !0 && this.update(), this._needsUpdate = a
        },
        clone: function(a) {
            return void 0 === a && (a = new THREE.Texture), a.image = this.image, a.mipmaps = this.mipmaps.slice(0), a.mapping = this.mapping, a.wrapS = this.wrapS, a.wrapT = this.wrapT, a.magFilter = this.magFilter, a.minFilter = this.minFilter, a.anisotropy = this.anisotropy, a.format = this.format, a.type = this.type, a.offset.copy(this.offset), a.repeat.copy(this.repeat), a.generateMipmaps = this.generateMipmaps, a.premultiplyAlpha = this.premultiplyAlpha, a.flipY = this.flipY, a.unpackAlignment = this.unpackAlignment, a
        },
        update: function() {
            this.dispatchEvent({
                type: "update"
            })
        },
        dispose: function() {
            this.dispatchEvent({
                type: "dispose"
            })
        }
    }, THREE.EventDispatcher.prototype.apply(THREE.Texture.prototype), THREE.TextureIdCount = 0, THREE.CubeTexture = function(a, b, c, d, e, f, g, h, i) {
        b = void 0 !== b ? b : THREE.CubeReflectionMapping, THREE.Texture.call(this, a, b, c, d, e, f, g, h, i), this.images = a
    }, THREE.CubeTexture.prototype = Object.create(THREE.Texture.prototype), THREE.CubeTexture.prototype.constructor = THREE.CubeTexture, THREE.CubeTexture.clone = function(a) {
        return void 0 === a && (a = new THREE.CubeTexture), THREE.Texture.prototype.clone.call(this, a), a.images = this.images, a
    }, THREE.CompressedTexture = function(a, b, c, d, e, f, g, h, i, j, k) {
        THREE.Texture.call(this, null, f, g, h, i, j, d, e, k), this.image = {
            width: b,
            height: c
        }, this.mipmaps = a, this.flipY = !1, this.generateMipmaps = !1
    }, THREE.CompressedTexture.prototype = Object.create(THREE.Texture.prototype), THREE.CompressedTexture.prototype.constructor = THREE.CompressedTexture, THREE.CompressedTexture.prototype.clone = function() {
        var a = new THREE.CompressedTexture;
        return THREE.Texture.prototype.clone.call(this, a), a
    }, THREE.DataTexture = function(a, b, c, d, e, f, g, h, i, j, k) {
        THREE.Texture.call(this, null, f, g, h, i, j, d, e, k), this.image = {
            data: a,
            width: b,
            height: c
        }
    }, THREE.DataTexture.prototype = Object.create(THREE.Texture.prototype), THREE.DataTexture.prototype.constructor = THREE.DataTexture, THREE.DataTexture.prototype.clone = function() {
        var a = new THREE.DataTexture;
        return THREE.Texture.prototype.clone.call(this, a), a
    }, THREE.VideoTexture = function(a, b, c, d, e, f, g, h, i) {
        THREE.Texture.call(this, a, b, c, d, e, f, g, h, i), this.generateMipmaps = !1;
        var j = this,
            k = function() {
                requestAnimationFrame(k), a.readyState === a.HAVE_ENOUGH_DATA && (j.needsUpdate = !0)
            };
        k()
    }, THREE.VideoTexture.prototype = Object.create(THREE.Texture.prototype), THREE.VideoTexture.prototype.constructor = THREE.VideoTexture, THREE.Group = function() {
        THREE.Object3D.call(this), this.type = "Group"
    }, THREE.Group.prototype = Object.create(THREE.Object3D.prototype),
    THREE.Group.prototype.constructor = THREE.Group, THREE.PointCloud = function(a, b) {
        THREE.Object3D.call(this), this.type = "PointCloud", this.geometry = void 0 !== a ? a : new THREE.Geometry, this.material = void 0 !== b ? b : new THREE.PointCloudMaterial({
            color: 16777215 * Math.random()
        })
    }, THREE.PointCloud.prototype = Object.create(THREE.Object3D.prototype), THREE.PointCloud.prototype.constructor = THREE.PointCloud, THREE.PointCloud.prototype.raycast = function() {
        var a = new THREE.Matrix4,
            b = new THREE.Ray;
        return function(c, d) {
            var e = this,
                f = e.geometry,
                g = c.params.PointCloud.threshold;
            if (a.getInverse(this.matrixWorld), b.copy(c.ray).applyMatrix4(a), null === f.boundingBox || b.isIntersectionBox(f.boundingBox) !== !1) {
                var h = g / ((this.scale.x + this.scale.y + this.scale.z) / 3),
                    i = new THREE.Vector3,
                    j = function(a, f) {
                        var g = b.distanceToPoint(a);
                        if (h > g) {
                            var i = b.closestPointToPoint(a);
                            i.applyMatrix4(e.matrixWorld);
                            var j = c.ray.origin.distanceTo(i);
                            d.push({
                                distance: j,
                                distanceToRay: g,
                                point: i.clone(),
                                index: f,
                                face: null,
                                object: e
                            })
                        }
                    };
                if (f instanceof THREE.BufferGeometry) {
                    var k = f.attributes,
                        l = k.position.array;
                    if (void 0 !== k.index) {
                        var m = k.index.array,
                            n = f.offsets;
                        if (0 === n.length) {
                            var o = {
                                start: 0,
                                count: m.length,
                                index: 0
                            };
                            n = [o]
                        }
                        for (var p = 0, q = n.length; q > p; ++p)
                            for (var r = n[p].start, s = n[p].count, t = n[p].index, u = r, v = r + s; v > u; u++) {
                                var w = t + m[u];
                                i.fromArray(l, 3 * w), j(i, w)
                            }
                    } else
                        for (var x = l.length / 3, u = 0; x > u; u++) i.set(l[3 * u], l[3 * u + 1], l[3 * u + 2]), j(i, u)
                } else
                    for (var y = this.geometry.vertices, u = 0; u < y.length; u++) j(y[u], u)
            }
        }
    }(), THREE.PointCloud.prototype.clone = function(a) {
        return void 0 === a && (a = new THREE.PointCloud(this.geometry, this.material)), THREE.Object3D.prototype.clone.call(this, a), a
    }, THREE.ParticleSystem = function(a, b) {
        return console.warn("THREE.ParticleSystem has been renamed to THREE.PointCloud."), new THREE.PointCloud(a, b)
    }, THREE.Line = function(a, b, c) {
        THREE.Object3D.call(this), this.type = "Line", this.geometry = void 0 !== a ? a : new THREE.Geometry, this.material = void 0 !== b ? b : new THREE.LineBasicMaterial({
            color: 16777215 * Math.random()
        }), this.mode = void 0 !== c ? c : THREE.LineStrip
    }, THREE.LineStrip = 0, THREE.LinePieces = 1, THREE.Line.prototype = Object.create(THREE.Object3D.prototype), THREE.Line.prototype.constructor = THREE.Line, THREE.Line.prototype.raycast = function() {
        var a = new THREE.Matrix4,
            b = new THREE.Ray,
            c = new THREE.Sphere;
        return function(d, e) {
            var f = d.linePrecision,
                g = f * f,
                h = this.geometry;
            if (null === h.boundingSphere && h.computeBoundingSphere(), c.copy(h.boundingSphere), c.applyMatrix4(this.matrixWorld), d.ray.isIntersectionSphere(c) !== !1) {
                a.getInverse(this.matrixWorld), b.copy(d.ray).applyMatrix4(a);
                var i = new THREE.Vector3,
                    j = new THREE.Vector3,
                    k = new THREE.Vector3,
                    l = new THREE.Vector3,
                    m = this.mode === THREE.LineStrip ? 1 : 2;
                if (h instanceof THREE.BufferGeometry) {
                    var n = h.attributes;
                    if (void 0 !== n.index) {
                        var o = n.index.array,
                            p = n.position.array,
                            q = h.offsets;
                        0 === q.length && (q = [{
                            start: 0,
                            count: o.length,
                            index: 0
                        }]);
                        for (var r = 0; r < q.length; r++)
                            for (var s = q[r].start, t = q[r].count, u = q[r].index, v = s; s + t - 1 > v; v += m) {
                                var w = u + o[v],
                                    x = u + o[v + 1];
                                i.fromArray(p, 3 * w), j.fromArray(p, 3 * x);
                                var y = b.distanceSqToSegment(i, j, l, k);
                                if (!(y > g)) {
                                    var z = b.origin.distanceTo(l);
                                    z < d.near || z > d.far || e.push({
                                        distance: z,
                                        point: k.clone().applyMatrix4(this.matrixWorld),
                                        face: null,
                                        faceIndex: null,
                                        object: this
                                    })
                                }
                            }
                    } else
                        for (var p = n.position.array, v = 0; v < p.length / 3 - 1; v += m) {
                            i.fromArray(p, 3 * v), j.fromArray(p, 3 * v + 3);
                            var y = b.distanceSqToSegment(i, j, l, k);
                            if (!(y > g)) {
                                var z = b.origin.distanceTo(l);
                                z < d.near || z > d.far || e.push({
                                    distance: z,
                                    point: k.clone().applyMatrix4(this.matrixWorld),
                                    face: null,
                                    faceIndex: null,
                                    object: this
                                })
                            }
                        }
                } else if (h instanceof THREE.Geometry)
                    for (var A = h.vertices, B = A.length, v = 0; B - 1 > v; v += m) {
                        var y = b.distanceSqToSegment(A[v], A[v + 1], l, k);
                        if (!(y > g)) {
                            var z = b.origin.distanceTo(l);
                            z < d.near || z > d.far || e.push({
                                distance: z,
                                point: k.clone().applyMatrix4(this.matrixWorld),
                                face: null,
                                faceIndex: null,
                                object: this
                            })
                        }
                    }
            }
        }
    }(), THREE.Line.prototype.clone = function(a) {
        return void 0 === a && (a = new THREE.Line(this.geometry, this.material, this.mode)), THREE.Object3D.prototype.clone.call(this, a), a
    }, THREE.Mesh = function(a, b) {
        THREE.Object3D.call(this), this.type = "Mesh", this.geometry = void 0 !== a ? a : new THREE.Geometry, this.material = void 0 !== b ? b : new THREE.MeshBasicMaterial({
            color: 16777215 * Math.random()
        }), this.updateMorphTargets()
    }, THREE.Mesh.prototype = Object.create(THREE.Object3D.prototype), THREE.Mesh.prototype.constructor = THREE.Mesh, THREE.Mesh.prototype.updateMorphTargets = function() {
        if (void 0 !== this.geometry.morphTargets && this.geometry.morphTargets.length > 0) {
            this.morphTargetBase = -1, this.morphTargetForcedOrder = [], this.morphTargetInfluences = [], this.morphTargetDictionary = {};
            for (var a = 0, b = this.geometry.morphTargets.length; b > a; a++) this.morphTargetInfluences.push(0), this.morphTargetDictionary[this.geometry.morphTargets[a].name] = a
        }
    }, THREE.Mesh.prototype.getMorphTargetIndexByName = function(a) {
        return void 0 !== this.morphTargetDictionary[a] ? this.morphTargetDictionary[a] : (console.log("THREE.Mesh.getMorphTargetIndexByName: morph target " + a + " does not exist. Returning 0."), 0)
    }, THREE.Mesh.prototype.raycast = function() {
        var a = new THREE.Matrix4,
            b = new THREE.Ray,
            c = new THREE.Sphere,
            d = new THREE.Vector3,
            e = new THREE.Vector3,
            f = new THREE.Vector3;
        return function(g, h) {
            var i = this.geometry;
            if (null === i.boundingSphere && i.computeBoundingSphere(), c.copy(i.boundingSphere), c.applyMatrix4(this.matrixWorld), g.ray.isIntersectionSphere(c) !== !1 && (a.getInverse(this.matrixWorld), b.copy(g.ray).applyMatrix4(a), null === i.boundingBox || b.isIntersectionBox(i.boundingBox) !== !1))
                if (i instanceof THREE.BufferGeometry) {
                    var j = this.material;
                    if (void 0 === j) return;
                    var k, l, m, n = i.attributes,
                        o = g.precision;
                    if (void 0 !== n.index) {
                        var p = n.index.array,
                            q = n.position.array,
                            r = i.offsets;
                        0 === r.length && (r = [{
                            start: 0,
                            count: p.length,
                            index: 0
                        }]);
                        for (var s = 0, t = r.length; t > s; ++s)
                            for (var u = r[s].start, v = r[s].count, w = r[s].index, x = u, y = u + v; y > x; x += 3) {
                                if (k = w + p[x], l = w + p[x + 1], m = w + p[x + 2], d.fromArray(q, 3 * k), e.fromArray(q, 3 * l), f.fromArray(q, 3 * m), j.side === THREE.BackSide) var z = b.intersectTriangle(f, e, d, !0);
                                else var z = b.intersectTriangle(d, e, f, j.side !== THREE.DoubleSide);
                                if (null !== z) {
                                    z.applyMatrix4(this.matrixWorld);
                                    var A = g.ray.origin.distanceTo(z);
                                    o > A || A < g.near || A > g.far || h.push({
                                        distance: A,
                                        point: z,
                                        face: new THREE.Face3(k, l, m, THREE.Triangle.normal(d, e, f)),
                                        faceIndex: null,
                                        object: this
                                    })
                                }
                            }
                    } else
                        for (var q = n.position.array, x = 0, B = 0, y = q.length; y > x; x += 3, B += 9) {
                            if (k = x, l = x + 1, m = x + 2, d.fromArray(q, B), e.fromArray(q, B + 3), f.fromArray(q, B + 6), j.side === THREE.BackSide) var z = b.intersectTriangle(f, e, d, !0);
                            else var z = b.intersectTriangle(d, e, f, j.side !== THREE.DoubleSide);
                            if (null !== z) {
                                z.applyMatrix4(this.matrixWorld);
                                var A = g.ray.origin.distanceTo(z);
                                o > A || A < g.near || A > g.far || h.push({
                                    distance: A,
                                    point: z,
                                    face: new THREE.Face3(k, l, m, THREE.Triangle.normal(d, e, f)),
                                    faceIndex: null,
                                    object: this
                                })
                            }
                        }
                } else if (i instanceof THREE.Geometry)
                for (var k, l, m, C = this.material instanceof THREE.MeshFaceMaterial, D = C === !0 ? this.material.materials : null, o = g.precision, E = i.vertices, F = 0, G = i.faces.length; G > F; F++) {
                    var H = i.faces[F],
                        j = C === !0 ? D[H.materialIndex] : this.material;
                    if (void 0 !== j) {
                        if (k = E[H.a], l = E[H.b], m = E[H.c], j.morphTargets === !0) {
                            var I = i.morphTargets,
                                J = this.morphTargetInfluences;
                            d.set(0, 0, 0), e.set(0, 0, 0), f.set(0, 0, 0);
                            for (var K = 0, L = I.length; L > K; K++) {
                                var M = J[K];
                                if (0 !== M) {
                                    var N = I[K].vertices;
                                    d.x += (N[H.a].x - k.x) * M, d.y += (N[H.a].y - k.y) * M, d.z += (N[H.a].z - k.z) * M, e.x += (N[H.b].x - l.x) * M, e.y += (N[H.b].y - l.y) * M, e.z += (N[H.b].z - l.z) * M, f.x += (N[H.c].x - m.x) * M, f.y += (N[H.c].y - m.y) * M, f.z += (N[H.c].z - m.z) * M
                                }
                            }
                            d.add(k), e.add(l), f.add(m), k = d, l = e, m = f
                        }
                        if (j.side === THREE.BackSide) var z = b.intersectTriangle(m, l, k, !0);
                        else var z = b.intersectTriangle(k, l, m, j.side !== THREE.DoubleSide);
                        if (null !== z) {
                            z.applyMatrix4(this.matrixWorld);
                            var A = g.ray.origin.distanceTo(z);
                            o > A || A < g.near || A > g.far || h.push({
                                distance: A,
                                point: z,
                                face: H,
                                faceIndex: F,
                                object: this
                            })
                        }
                    }
                }
        }
    }(), THREE.Mesh.prototype.clone = function(a, b) {
        return void 0 === a && (a = new THREE.Mesh(this.geometry, this.material)), THREE.Object3D.prototype.clone.call(this, a, b), a
    }, THREE.Bone = function(a) {
        THREE.Object3D.call(this), this.skin = a
    }, THREE.Bone.prototype = Object.create(THREE.Object3D.prototype), THREE.Bone.prototype.constructor = THREE.Bone, THREE.Skeleton = function(a, b, c) {
        if (this.useVertexTexture = void 0 !== c ? c : !0, this.identityMatrix = new THREE.Matrix4, a = a || [], this.bones = a.slice(0), this.useVertexTexture) {
            var d;
            d = this.bones.length > 256 ? 64 : this.bones.length > 64 ? 32 : this.bones.length > 16 ? 16 : 8, this.boneTextureWidth = d, this.boneTextureHeight = d, this.boneMatrices = new Float32Array(this.boneTextureWidth * this.boneTextureHeight * 4), this.boneTexture = new THREE.DataTexture(this.boneMatrices, this.boneTextureWidth, this.boneTextureHeight, THREE.RGBAFormat, THREE.FloatType), this.boneTexture.minFilter = THREE.NearestFilter, this.boneTexture.magFilter = THREE.NearestFilter, this.boneTexture.generateMipmaps = !1, this.boneTexture.flipY = !1
        } else this.boneMatrices = new Float32Array(16 * this.bones.length);
        if (void 0 === b) this.calculateInverses();
        else if (this.bones.length === b.length) this.boneInverses = b.slice(0);
        else {
            console.warn("THREE.Skeleton bonInverses is the wrong length."), this.boneInverses = [];
            for (var e = 0, f = this.bones.length; f > e; e++) this.boneInverses.push(new THREE.Matrix4)
        }
    }, THREE.Skeleton.prototype.calculateInverses = function() {
        this.boneInverses = [];
        for (var a = 0, b = this.bones.length; b > a; a++) {
            var c = new THREE.Matrix4;
            this.bones[a] && c.getInverse(this.bones[a].matrixWorld), this.boneInverses.push(c)
        }
    }, THREE.Skeleton.prototype.pose = function() {
        for (var a, b = 0, c = this.bones.length; c > b; b++) a = this.bones[b], a && a.matrixWorld.getInverse(this.boneInverses[b]);
        for (var b = 0, c = this.bones.length; c > b; b++) a = this.bones[b], a && (a.parent ? (a.matrix.getInverse(a.parent.matrixWorld), a.matrix.multiply(a.matrixWorld)) : a.matrix.copy(a.matrixWorld), a.matrix.decompose(a.position, a.quaternion, a.scale))
    }, THREE.Skeleton.prototype.update = function() {
        var a = new THREE.Matrix4;
        return function() {
            for (var b = 0, c = this.bones.length; c > b; b++) {
                var d = this.bones[b] ? this.bones[b].matrixWorld : this.identityMatrix;
                a.multiplyMatrices(d, this.boneInverses[b]), a.flattenToArrayOffset(this.boneMatrices, 16 * b)
            }
            this.useVertexTexture && (this.boneTexture.needsUpdate = !0)
        }
    }(), THREE.SkinnedMesh = function(a, b, c) {
        THREE.Mesh.call(this, a, b), this.type = "SkinnedMesh", this.bindMode = "attached", this.bindMatrix = new THREE.Matrix4, this.bindMatrixInverse = new THREE.Matrix4;
        var d = [];
        if (this.geometry && void 0 !== this.geometry.bones) {
            for (var e, f, g, h, i, j = 0, k = this.geometry.bones.length; k > j; ++j) f = this.geometry.bones[j], g = f.pos, h = f.rotq, i = f.scl, e = new THREE.Bone(this), d.push(e), e.name = f.name, e.position.set(g[0], g[1], g[2]), e.quaternion.set(h[0], h[1], h[2], h[3]), void 0 !== i ? e.scale.set(i[0], i[1], i[2]) : e.scale.set(1, 1, 1);
            for (var j = 0, k = this.geometry.bones.length; k > j; ++j) f = this.geometry.bones[j], -1 !== f.parent ? d[f.parent].add(d[j]) : this.add(d[j])
        }
        this.normalizeSkinWeights(), this.updateMatrixWorld(!0), this.bind(new THREE.Skeleton(d, void 0, c))
    }, THREE.SkinnedMesh.prototype = Object.create(THREE.Mesh.prototype), THREE.SkinnedMesh.prototype.constructor = THREE.SkinnedMesh, THREE.SkinnedMesh.prototype.bind = function(a, b) {
        this.skeleton = a, void 0 === b && (this.updateMatrixWorld(!0), b = this.matrixWorld), this.bindMatrix.copy(b), this.bindMatrixInverse.getInverse(b)
    }, THREE.SkinnedMesh.prototype.pose = function() {
        this.skeleton.pose()
    }, THREE.SkinnedMesh.prototype.normalizeSkinWeights = function() {
        if (this.geometry instanceof THREE.Geometry)
            for (var a = 0; a < this.geometry.skinIndices.length; a++) {
                var b = this.geometry.skinWeights[a],
                    c = 1 / b.lengthManhattan();
                c !== 1 / 0 ? b.multiplyScalar(c) : b.set(1)
            }
    }, THREE.SkinnedMesh.prototype.updateMatrixWorld = function() {
        THREE.Mesh.prototype.updateMatrixWorld.call(this, !0), "attached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.matrixWorld) : "detached" === this.bindMode ? this.bindMatrixInverse.getInverse(this.bindMatrix) : console.warn("THREE.SkinnedMesh unreckognized bindMode: " + this.bindMode)
    }, THREE.SkinnedMesh.prototype.clone = function(a) {
        return void 0 === a && (a = new THREE.SkinnedMesh(this.geometry, this.material, this.useVertexTexture)), THREE.Mesh.prototype.clone.call(this, a), a
    }, THREE.MorphAnimMesh = function(a, b) {
        THREE.Mesh.call(this, a, b), this.type = "MorphAnimMesh", this.duration = 1e3, this.mirroredLoop = !1, this.time = 0, this.lastKeyframe = 0, this.currentKeyframe = 0, this.direction = 1, this.directionBackwards = !1, this.setFrameRange(0, this.geometry.morphTargets.length - 1)
    }, THREE.MorphAnimMesh.prototype = Object.create(THREE.Mesh.prototype), THREE.MorphAnimMesh.prototype.constructor = THREE.MorphAnimMesh, THREE.MorphAnimMesh.prototype.setFrameRange = function(a, b) {
        this.startKeyframe = a, this.endKeyframe = b, this.length = this.endKeyframe - this.startKeyframe + 1
    }, THREE.MorphAnimMesh.prototype.setDirectionForward = function() {
        this.direction = 1, this.directionBackwards = !1
    }, THREE.MorphAnimMesh.prototype.setDirectionBackward = function() {
        this.direction = -1, this.directionBackwards = !0
    }, THREE.MorphAnimMesh.prototype.parseAnimations = function() {
        var a = this.geometry;
        a.animations || (a.animations = {});
        for (var b, c = a.animations, d = /([a-z]+)_?(\d+)/, e = 0, f = a.morphTargets.length; f > e; e++) {
            var g = a.morphTargets[e],
                h = g.name.match(d);
            if (h && h.length > 1) {
                {
                    var i = h[1];
                    h[2]
                }
                c[i] || (c[i] = {
                    start: 1 / 0,
                    end: -(1 / 0)
                });
                var j = c[i];
                e < j.start && (j.start = e), e > j.end && (j.end = e), b || (b = i)
            }
        }
        a.firstAnimation = b
    }, THREE.MorphAnimMesh.prototype.setAnimationLabel = function(a, b, c) {
        this.geometry.animations || (this.geometry.animations = {}), this.geometry.animations[a] = {
            start: b,
            end: c
        }
    }, THREE.MorphAnimMesh.prototype.playAnimation = function(a, b) {
        var c = this.geometry.animations[a];
        c ? (this.setFrameRange(c.start, c.end), this.duration = 1e3 * ((c.end - c.start) / b), this.time = 0) : console.warn("animation[" + a + "] undefined")
    }, THREE.MorphAnimMesh.prototype.updateAnimation = function(a) {
        var b = this.duration / this.length;
        this.time += this.direction * a, this.mirroredLoop ? (this.time > this.duration || this.time < 0) && (this.direction *= -1, this.time > this.duration && (this.time = this.duration, this.directionBackwards = !0), this.time < 0 && (this.time = 0, this.directionBackwards = !1)) : (this.time = this.time % this.duration, this.time < 0 && (this.time += this.duration));
        var c = this.startKeyframe + THREE.Math.clamp(Math.floor(this.time / b), 0, this.length - 1);
        c !== this.currentKeyframe && (this.morphTargetInfluences[this.lastKeyframe] = 0, this.morphTargetInfluences[this.currentKeyframe] = 1, this.morphTargetInfluences[c] = 0, this.lastKeyframe = this.currentKeyframe, this.currentKeyframe = c);
        var d = this.time % b / b;
        this.directionBackwards && (d = 1 - d), this.morphTargetInfluences[this.currentKeyframe] = d, this.morphTargetInfluences[this.lastKeyframe] = 1 - d
    }, THREE.MorphAnimMesh.prototype.interpolateTargets = function(a, b, c) {
        for (var d = this.morphTargetInfluences, e = 0, f = d.length; f > e; e++) d[e] = 0;
        a > -1 && (d[a] = 1 - c), b > -1 && (d[b] = c)
    }, THREE.MorphAnimMesh.prototype.clone = function(a) {
        return void 0 === a && (a = new THREE.MorphAnimMesh(this.geometry, this.material)), a.duration = this.duration, a.mirroredLoop = this.mirroredLoop, a.time = this.time, a.lastKeyframe = this.lastKeyframe, a.currentKeyframe = this.currentKeyframe, a.direction = this.direction, a.directionBackwards = this.directionBackwards, THREE.Mesh.prototype.clone.call(this, a), a
    }, THREE.LOD = function() {
        THREE.Object3D.call(this), this.objects = []
    }, THREE.LOD.prototype = Object.create(THREE.Object3D.prototype), THREE.LOD.prototype.constructor = THREE.LOD, THREE.LOD.prototype.addLevel = function(a, b) {
        void 0 === b && (b = 0), b = Math.abs(b);
        for (var c = 0; c < this.objects.length && !(b < this.objects[c].distance); c++);
        this.objects.splice(c, 0, {
            distance: b,
            object: a
        }), this.add(a)
    }, THREE.LOD.prototype.getObjectForDistance = function(a) {
        for (var b = 1, c = this.objects.length; c > b && !(a < this.objects[b].distance); b++);
        return this.objects[b - 1].object
    }, THREE.LOD.prototype.raycast = function() {
        var a = new THREE.Vector3;
        return function(b, c) {
            a.setFromMatrixPosition(this.matrixWorld);
            var d = b.ray.origin.distanceTo(a);
            this.getObjectForDistance(d).raycast(b, c)
        }
    }(), THREE.LOD.prototype.update = function() {
        var a = new THREE.Vector3,
            b = new THREE.Vector3;
        return function(c) {
            if (this.objects.length > 1) {
                a.setFromMatrixPosition(c.matrixWorld), b.setFromMatrixPosition(this.matrixWorld);
                var d = a.distanceTo(b);
                this.objects[0].object.visible = !0;
                for (var e = 1, f = this.objects.length; f > e && d >= this.objects[e].distance; e++) this.objects[e - 1].object.visible = !1, this.objects[e].object.visible = !0;
                for (; f > e; e++) this.objects[e].object.visible = !1
            }
        }
    }(), THREE.LOD.prototype.clone = function(a) {
        void 0 === a && (a = new THREE.LOD), THREE.Object3D.prototype.clone.call(this, a);
        for (var b = 0, c = this.objects.length; c > b; b++) {
            var d = this.objects[b].object.clone();
            d.visible = 0 === b, a.addLevel(d, this.objects[b].distance)
        }
        return a
    }, THREE.Sprite = function() {
        var a = new Uint16Array([0, 1, 2, 0, 2, 3]),
            b = new Float32Array([-.5, -.5, 0, .5, -.5, 0, .5, .5, 0, -.5, .5, 0]),
            c = new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]),
            d = new THREE.BufferGeometry;
        return d.addAttribute("index", new THREE.BufferAttribute(a, 1)), d.addAttribute("position", new THREE.BufferAttribute(b, 3)), d.addAttribute("uv", new THREE.BufferAttribute(c, 2)),
            function(a) {
                THREE.Object3D.call(this), this.type = "Sprite", this.geometry = d, this.material = void 0 !== a ? a : new THREE.SpriteMaterial
            }
    }(), THREE.Sprite.prototype = Object.create(THREE.Object3D.prototype), THREE.Sprite.prototype.constructor = THREE.Sprite, THREE.Sprite.prototype.raycast = function() {
        var a = new THREE.Vector3;
        return function(b, c) {
            a.setFromMatrixPosition(this.matrixWorld);
            var d = b.ray.distanceToPoint(a);
            d > this.scale.x || c.push({
                distance: d,
                point: this.position,
                face: null,
                object: this
            })
        }
    }(), THREE.Sprite.prototype.clone = function(a) {
        return void 0 === a && (a = new THREE.Sprite(this.material)), THREE.Object3D.prototype.clone.call(this, a), a
    }, THREE.Particle = THREE.Sprite, THREE.LensFlare = function(a, b, c, d, e) {
        THREE.Object3D.call(this), this.lensFlares = [], this.positionScreen = new THREE.Vector3, this.customUpdateCallback = void 0, void 0 !== a && this.add(a, b, c, d, e)
    }, THREE.LensFlare.prototype = Object.create(THREE.Object3D.prototype), THREE.LensFlare.prototype.constructor = THREE.LensFlare, THREE.LensFlare.prototype.add = function(a, b, c, d, e, f) {
        void 0 === b && (b = -1), void 0 === c && (c = 0), void 0 === f && (f = 1), void 0 === e && (e = new THREE.Color(16777215)), void 0 === d && (d = THREE.NormalBlending), c = Math.min(c, Math.max(0, c)), this.lensFlares.push({
            texture: a,
            size: b,
            distance: c,
            x: 0,
            y: 0,
            z: 0,
            scale: 1,
            rotation: 1,
            opacity: f,
            color: e,
            blending: d
        })
    }, THREE.LensFlare.prototype.updateLensFlares = function() {
        var a, b, c = this.lensFlares.length,
            d = 2 * -this.positionScreen.x,
            e = 2 * -this.positionScreen.y;
        for (a = 0; c > a; a++) b = this.lensFlares[a], b.x = this.positionScreen.x + d * b.distance, b.y = this.positionScreen.y + e * b.distance, b.wantedRotation = b.x * Math.PI * .25, b.rotation += .25 * (b.wantedRotation - b.rotation)
    }, THREE.Scene = function() {
        THREE.Object3D.call(this), this.type = "Scene", this.fog = null, this.overrideMaterial = null, this.autoUpdate = !0
    }, THREE.Scene.prototype = Object.create(THREE.Object3D.prototype), THREE.Scene.prototype.constructor = THREE.Scene, THREE.Scene.prototype.clone = function(a) {
        return void 0 === a && (a = new THREE.Scene), THREE.Object3D.prototype.clone.call(this, a), null !== this.fog && (a.fog = this.fog.clone()), null !== this.overrideMaterial && (a.overrideMaterial = this.overrideMaterial.clone()), a.autoUpdate = this.autoUpdate, a.matrixAutoUpdate = this.matrixAutoUpdate, a
    }, THREE.Fog = function(a, b, c) {
        this.name = "", this.color = new THREE.Color(a), this.near = void 0 !== b ? b : 1, this.far = void 0 !== c ? c : 1e3
    }, THREE.Fog.prototype.clone = function() {
        return new THREE.Fog(this.color.getHex(), this.near, this.far)
    }, THREE.FogExp2 = function(a, b) {
        this.name = "", this.color = new THREE.Color(a), this.density = void 0 !== b ? b : 25e-5
    }, THREE.FogExp2.prototype.clone = function() {
        return new THREE.FogExp2(this.color.getHex(), this.density)
    }, THREE.ShaderChunk = {}, THREE.ShaderChunk.alphatest_fragment = "#ifdef ALPHATEST\n\n	if ( gl_FragColor.a < ALPHATEST ) discard;\n\n#endif\n", THREE.ShaderChunk.lights_lambert_vertex = "vLightFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack = vec3( 0.0 );\n\n#endif\n\ntransformedNormal = normalize( transformedNormal );\n\n#if MAX_DIR_LIGHTS > 0\n\nfor( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n	vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n	vec3 dirVector = normalize( lDirection.xyz );\n\n	float dotProduct = dot( transformedNormal, dirVector );\n	vec3 directionalLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n	#ifdef DOUBLE_SIDED\n\n		vec3 directionalLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n		#ifdef WRAP_AROUND\n\n			vec3 directionalLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n		#endif\n\n	#endif\n\n	#ifdef WRAP_AROUND\n\n		vec3 directionalLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n		directionalLightWeighting = mix( directionalLightWeighting, directionalLightWeightingHalf, wrapRGB );\n\n		#ifdef DOUBLE_SIDED\n\n			directionalLightWeightingBack = mix( directionalLightWeightingBack, directionalLightWeightingHalfBack, wrapRGB );\n\n		#endif\n\n	#endif\n\n	vLightFront += directionalLightColor[ i ] * directionalLightWeighting;\n\n	#ifdef DOUBLE_SIDED\n\n		vLightBack += directionalLightColor[ i ] * directionalLightWeightingBack;\n\n	#endif\n\n}\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( pointLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n		float dotProduct = dot( transformedNormal, lVector );\n\n		vec3 pointLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n		#ifdef DOUBLE_SIDED\n\n			vec3 pointLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n			#ifdef WRAP_AROUND\n\n				vec3 pointLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n			#endif\n\n		#endif\n\n		#ifdef WRAP_AROUND\n\n			vec3 pointLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n			pointLightWeighting = mix( pointLightWeighting, pointLightWeightingHalf, wrapRGB );\n\n			#ifdef DOUBLE_SIDED\n\n				pointLightWeightingBack = mix( pointLightWeightingBack, pointLightWeightingHalfBack, wrapRGB );\n\n			#endif\n\n		#endif\n\n		vLightFront += pointLightColor[ i ] * pointLightWeighting * lDistance;\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += pointLightColor[ i ] * pointLightWeightingBack * lDistance;\n\n		#endif\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	for( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz - mvPosition.xyz;\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - worldPosition.xyz ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n			float lDistance = 1.0;\n			if ( spotLightDistance[ i ] > 0.0 )\n				lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n			lVector = normalize( lVector );\n\n			float dotProduct = dot( transformedNormal, lVector );\n			vec3 spotLightWeighting = vec3( max( dotProduct, 0.0 ) );\n\n			#ifdef DOUBLE_SIDED\n\n				vec3 spotLightWeightingBack = vec3( max( -dotProduct, 0.0 ) );\n\n				#ifdef WRAP_AROUND\n\n					vec3 spotLightWeightingHalfBack = vec3( max( -0.5 * dotProduct + 0.5, 0.0 ) );\n\n				#endif\n\n			#endif\n\n			#ifdef WRAP_AROUND\n\n				vec3 spotLightWeightingHalf = vec3( max( 0.5 * dotProduct + 0.5, 0.0 ) );\n				spotLightWeighting = mix( spotLightWeighting, spotLightWeightingHalf, wrapRGB );\n\n				#ifdef DOUBLE_SIDED\n\n					spotLightWeightingBack = mix( spotLightWeightingBack, spotLightWeightingHalfBack, wrapRGB );\n\n				#endif\n\n			#endif\n\n			vLightFront += spotLightColor[ i ] * spotLightWeighting * lDistance * spotEffect;\n\n			#ifdef DOUBLE_SIDED\n\n				vLightBack += spotLightColor[ i ] * spotLightWeightingBack * lDistance * spotEffect;\n\n			#endif\n\n		}\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n		vec3 lVector = normalize( lDirection.xyz );\n\n		float dotProduct = dot( transformedNormal, lVector );\n\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n		float hemiDiffuseWeightBack = -0.5 * dotProduct + 0.5;\n\n		vLightFront += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		#ifdef DOUBLE_SIDED\n\n			vLightBack += mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeightBack );\n\n		#endif\n\n	}\n\n#endif\n\nvLightFront = vLightFront * diffuse + ambient * ambientLightColor + emissive;\n\n#ifdef DOUBLE_SIDED\n\n	vLightBack = vLightBack * diffuse + ambient * ambientLightColor + emissive;\n\n#endif", THREE.ShaderChunk.map_particle_pars_fragment = "#ifdef USE_MAP\n\n	uniform sampler2D map;\n\n#endif", THREE.ShaderChunk.default_vertex = "#ifdef USE_SKINNING\n\n	vec4 mvPosition = modelViewMatrix * skinned;\n\n#elif defined( USE_MORPHTARGETS )\n\n	vec4 mvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n\n#else\n\n	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\n#endif\n\ngl_Position = projectionMatrix * mvPosition;\n", THREE.ShaderChunk.map_pars_fragment = "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n\n#endif\n\n#ifdef USE_MAP\n\n	uniform sampler2D map;\n\n#endif", THREE.ShaderChunk.skinnormal_vertex = "#ifdef USE_SKINNING\n\n	mat4 skinMatrix = mat4( 0.0 );\n	skinMatrix += skinWeight.x * boneMatX;\n	skinMatrix += skinWeight.y * boneMatY;\n	skinMatrix += skinWeight.z * boneMatZ;\n	skinMatrix += skinWeight.w * boneMatW;\n	skinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n	#ifdef USE_MORPHNORMALS\n\n	vec4 skinnedNormal = skinMatrix * vec4( morphedNormal, 0.0 );\n\n	#else\n\n	vec4 skinnedNormal = skinMatrix * vec4( normal, 0.0 );\n\n	#endif\n\n#endif\n", THREE.ShaderChunk.logdepthbuf_pars_vertex = "#ifdef USE_LOGDEPTHBUF\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		varying float vFragDepth;\n\n	#endif\n\n	uniform float logDepthBufFC;\n\n#endif", THREE.ShaderChunk.lightmap_pars_vertex = "#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n\n#endif", THREE.ShaderChunk.lights_phong_fragment = "vec3 normal = normalize( vNormal );\nvec3 viewPosition = normalize( vViewPosition );\n\n#ifdef DOUBLE_SIDED\n\n	normal = normal * ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n\n#endif\n\n#ifdef USE_NORMALMAP\n\n	normal = perturbNormal2Arb( -vViewPosition, normal );\n\n#elif defined( USE_BUMPMAP )\n\n	normal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	vec3 pointDiffuse = vec3( 0.0 );\n	vec3 pointSpecular = vec3( 0.0 );\n\n	for ( int i = 0; i < MAX_POINT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( pointLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( pointLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / pointLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n\n				// diffuse\n\n		float dotProduct = dot( normal, lVector );\n\n		#ifdef WRAP_AROUND\n\n			float pointDiffuseWeightFull = max( dotProduct, 0.0 );\n			float pointDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 pointDiffuseWeight = mix( vec3( pointDiffuseWeightFull ), vec3( pointDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float pointDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		pointDiffuse += diffuse * pointLightColor[ i ] * pointDiffuseWeight * lDistance;\n\n				// specular\n\n		vec3 pointHalfVector = normalize( lVector + viewPosition );\n		float pointDotNormalHalf = max( dot( normal, pointHalfVector ), 0.0 );\n		float pointSpecularWeight = specularStrength * max( pow( pointDotNormalHalf, shininess ), 0.0 );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, pointHalfVector ), 0.0 ), 5.0 );\n		pointSpecular += schlick * pointLightColor[ i ] * pointSpecularWeight * pointDiffuseWeight * lDistance * specularNormalization;\n\n	}\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	vec3 spotDiffuse = vec3( 0.0 );\n	vec3 spotSpecular = vec3( 0.0 );\n\n	for ( int i = 0; i < MAX_SPOT_LIGHTS; i ++ ) {\n\n		vec4 lPosition = viewMatrix * vec4( spotLightPosition[ i ], 1.0 );\n		vec3 lVector = lPosition.xyz + vViewPosition.xyz;\n\n		float lDistance = 1.0;\n		if ( spotLightDistance[ i ] > 0.0 )\n			lDistance = 1.0 - min( ( length( lVector ) / spotLightDistance[ i ] ), 1.0 );\n\n		lVector = normalize( lVector );\n\n		float spotEffect = dot( spotLightDirection[ i ], normalize( spotLightPosition[ i ] - vWorldPosition ) );\n\n		if ( spotEffect > spotLightAngleCos[ i ] ) {\n\n			spotEffect = max( pow( max( spotEffect, 0.0 ), spotLightExponent[ i ] ), 0.0 );\n\n					// diffuse\n\n			float dotProduct = dot( normal, lVector );\n\n			#ifdef WRAP_AROUND\n\n				float spotDiffuseWeightFull = max( dotProduct, 0.0 );\n				float spotDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n				vec3 spotDiffuseWeight = mix( vec3( spotDiffuseWeightFull ), vec3( spotDiffuseWeightHalf ), wrapRGB );\n\n			#else\n\n				float spotDiffuseWeight = max( dotProduct, 0.0 );\n\n			#endif\n\n			spotDiffuse += diffuse * spotLightColor[ i ] * spotDiffuseWeight * lDistance * spotEffect;\n\n					// specular\n\n			vec3 spotHalfVector = normalize( lVector + viewPosition );\n			float spotDotNormalHalf = max( dot( normal, spotHalfVector ), 0.0 );\n			float spotSpecularWeight = specularStrength * max( pow( spotDotNormalHalf, shininess ), 0.0 );\n\n			float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n			vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, spotHalfVector ), 0.0 ), 5.0 );\n			spotSpecular += schlick * spotLightColor[ i ] * spotSpecularWeight * spotDiffuseWeight * lDistance * specularNormalization * spotEffect;\n\n		}\n\n	}\n\n#endif\n\n#if MAX_DIR_LIGHTS > 0\n\n	vec3 dirDiffuse = vec3( 0.0 );\n	vec3 dirSpecular = vec3( 0.0 );\n\n	for( int i = 0; i < MAX_DIR_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( directionalLightDirection[ i ], 0.0 );\n		vec3 dirVector = normalize( lDirection.xyz );\n\n				// diffuse\n\n		float dotProduct = dot( normal, dirVector );\n\n		#ifdef WRAP_AROUND\n\n			float dirDiffuseWeightFull = max( dotProduct, 0.0 );\n			float dirDiffuseWeightHalf = max( 0.5 * dotProduct + 0.5, 0.0 );\n\n			vec3 dirDiffuseWeight = mix( vec3( dirDiffuseWeightFull ), vec3( dirDiffuseWeightHalf ), wrapRGB );\n\n		#else\n\n			float dirDiffuseWeight = max( dotProduct, 0.0 );\n\n		#endif\n\n		dirDiffuse += diffuse * directionalLightColor[ i ] * dirDiffuseWeight;\n\n		// specular\n\n		vec3 dirHalfVector = normalize( dirVector + viewPosition );\n		float dirDotNormalHalf = max( dot( normal, dirHalfVector ), 0.0 );\n		float dirSpecularWeight = specularStrength * max( pow( dirDotNormalHalf, shininess ), 0.0 );\n\n		/*\n		// fresnel term from skin shader\n		const float F0 = 0.128;\n\n		float base = 1.0 - dot( viewPosition, dirHalfVector );\n		float exponential = pow( base, 5.0 );\n\n		float fresnel = exponential + F0 * ( 1.0 - exponential );\n		*/\n\n		/*\n		// fresnel term from fresnel shader\n		const float mFresnelBias = 0.08;\n		const float mFresnelScale = 0.3;\n		const float mFresnelPower = 5.0;\n\n		float fresnel = mFresnelBias + mFresnelScale * pow( 1.0 + dot( normalize( -viewPosition ), normal ), mFresnelPower );\n		*/\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		// 		dirSpecular += specular * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization * fresnel;\n\n		vec3 schlick = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( dirVector, dirHalfVector ), 0.0 ), 5.0 );\n		dirSpecular += schlick * directionalLightColor[ i ] * dirSpecularWeight * dirDiffuseWeight * specularNormalization;\n\n\n	}\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	vec3 hemiDiffuse = vec3( 0.0 );\n	vec3 hemiSpecular = vec3( 0.0 );\n\n	for( int i = 0; i < MAX_HEMI_LIGHTS; i ++ ) {\n\n		vec4 lDirection = viewMatrix * vec4( hemisphereLightDirection[ i ], 0.0 );\n		vec3 lVector = normalize( lDirection.xyz );\n\n		// diffuse\n\n		float dotProduct = dot( normal, lVector );\n		float hemiDiffuseWeight = 0.5 * dotProduct + 0.5;\n\n		vec3 hemiColor = mix( hemisphereLightGroundColor[ i ], hemisphereLightSkyColor[ i ], hemiDiffuseWeight );\n\n		hemiDiffuse += diffuse * hemiColor;\n\n		// specular (sky light)\n\n		vec3 hemiHalfVectorSky = normalize( lVector + viewPosition );\n		float hemiDotNormalHalfSky = 0.5 * dot( normal, hemiHalfVectorSky ) + 0.5;\n		float hemiSpecularWeightSky = specularStrength * max( pow( max( hemiDotNormalHalfSky, 0.0 ), shininess ), 0.0 );\n\n		// specular (ground light)\n\n		vec3 lVectorGround = -lVector;\n\n		vec3 hemiHalfVectorGround = normalize( lVectorGround + viewPosition );\n		float hemiDotNormalHalfGround = 0.5 * dot( normal, hemiHalfVectorGround ) + 0.5;\n		float hemiSpecularWeightGround = specularStrength * max( pow( max( hemiDotNormalHalfGround, 0.0 ), shininess ), 0.0 );\n\n		float dotProductGround = dot( normal, lVectorGround );\n\n		float specularNormalization = ( shininess + 2.0 ) / 8.0;\n\n		vec3 schlickSky = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVector, hemiHalfVectorSky ), 0.0 ), 5.0 );\n		vec3 schlickGround = specular + vec3( 1.0 - specular ) * pow( max( 1.0 - dot( lVectorGround, hemiHalfVectorGround ), 0.0 ), 5.0 );\n		hemiSpecular += hemiColor * specularNormalization * ( schlickSky * hemiSpecularWeightSky * max( dotProduct, 0.0 ) + schlickGround * hemiSpecularWeightGround * max( dotProductGround, 0.0 ) );\n\n	}\n\n#endif\n\nvec3 totalDiffuse = vec3( 0.0 );\nvec3 totalSpecular = vec3( 0.0 );\n\n#if MAX_DIR_LIGHTS > 0\n\n	totalDiffuse += dirDiffuse;\n	totalSpecular += dirSpecular;\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	totalDiffuse += hemiDiffuse;\n	totalSpecular += hemiSpecular;\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	totalDiffuse += pointDiffuse;\n	totalSpecular += pointSpecular;\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	totalDiffuse += spotDiffuse;\n	totalSpecular += spotSpecular;\n\n#endif\n\n#ifdef METAL\n\n	gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient + totalSpecular );\n\n#else\n\n	gl_FragColor.xyz = gl_FragColor.xyz * ( emissive + totalDiffuse + ambientLightColor * ambient ) + totalSpecular;\n\n#endif",
    THREE.ShaderChunk.fog_pars_fragment = "#ifdef USE_FOG\n\n	uniform vec3 fogColor;\n\n	#ifdef FOG_EXP2\n\n		uniform float fogDensity;\n\n	#else\n\n		uniform float fogNear;\n		uniform float fogFar;\n	#endif\n\n#endif", THREE.ShaderChunk.morphnormal_vertex = "#ifdef USE_MORPHNORMALS\n\n	vec3 morphedNormal = vec3( 0.0 );\n\n	morphedNormal += ( morphNormal0 - normal ) * morphTargetInfluences[ 0 ];\n	morphedNormal += ( morphNormal1 - normal ) * morphTargetInfluences[ 1 ];\n	morphedNormal += ( morphNormal2 - normal ) * morphTargetInfluences[ 2 ];\n	morphedNormal += ( morphNormal3 - normal ) * morphTargetInfluences[ 3 ];\n\n	morphedNormal += normal;\n\n#endif", THREE.ShaderChunk.envmap_pars_fragment = "#ifdef USE_ENVMAP\n\n	uniform float reflectivity;\n	#ifdef ENVMAP_TYPE_CUBE\n		uniform samplerCube envMap;\n	#else\n		uniform sampler2D envMap;\n	#endif\n	uniform float flipEnvMap;\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		uniform float refractionRatio;\n\n	#else\n\n		varying vec3 vReflect;\n\n	#endif\n\n#endif\n", THREE.ShaderChunk.logdepthbuf_fragment = "#if defined(USE_LOGDEPTHBUF) && defined(USE_LOGDEPTHBUF_EXT)\n\n	gl_FragDepthEXT = log2(vFragDepth) * logDepthBufFC * 0.5;\n\n#endif", THREE.ShaderChunk.normalmap_pars_fragment = "#ifdef USE_NORMALMAP\n\n	uniform sampler2D normalMap;\n	uniform vec2 normalScale;\n\n			// Per-Pixel Tangent Space Normal Mapping\n			// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n	vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm ) {\n\n		vec3 q0 = dFdx( eye_pos.xyz );\n		vec3 q1 = dFdy( eye_pos.xyz );\n		vec2 st0 = dFdx( vUv.st );\n		vec2 st1 = dFdy( vUv.st );\n\n		vec3 S = normalize( q0 * st1.t - q1 * st0.t );\n		vec3 T = normalize( -q0 * st1.s + q1 * st0.s );\n		vec3 N = normalize( surf_norm );\n\n		vec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n		mapN.xy = normalScale * mapN.xy;\n		mat3 tsn = mat3( S, T, N );\n		return normalize( tsn * mapN );\n\n	}\n\n#endif\n", THREE.ShaderChunk.lights_phong_pars_vertex = "#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n", THREE.ShaderChunk.lightmap_pars_fragment = "#ifdef USE_LIGHTMAP\n\n	varying vec2 vUv2;\n	uniform sampler2D lightMap;\n\n#endif", THREE.ShaderChunk.shadowmap_vertex = "#ifdef USE_SHADOWMAP\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vShadowCoord[ i ] = shadowMatrix[ i ] * worldPosition;\n\n	}\n\n#endif", THREE.ShaderChunk.lights_phong_vertex = "#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	vWorldPosition = worldPosition.xyz;\n\n#endif", THREE.ShaderChunk.map_fragment = "#ifdef USE_MAP\n\n	vec4 texelColor = texture2D( map, vUv );\n\n	#ifdef GAMMA_INPUT\n\n		texelColor.xyz *= texelColor.xyz;\n\n	#endif\n\n	gl_FragColor = gl_FragColor * texelColor;\n\n#endif", THREE.ShaderChunk.lightmap_vertex = "#ifdef USE_LIGHTMAP\n\n	vUv2 = uv2;\n\n#endif", THREE.ShaderChunk.map_particle_fragment = "#ifdef USE_MAP\n\n	gl_FragColor = gl_FragColor * texture2D( map, vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y ) );\n\n#endif", THREE.ShaderChunk.color_pars_fragment = "#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif\n", THREE.ShaderChunk.color_vertex = "#ifdef USE_COLOR\n\n	#ifdef GAMMA_INPUT\n\n		vColor = color * color;\n\n	#else\n\n		vColor = color;\n\n	#endif\n\n#endif", THREE.ShaderChunk.skinning_vertex = "#ifdef USE_SKINNING\n\n	#ifdef USE_MORPHTARGETS\n\n	vec4 skinVertex = bindMatrix * vec4( morphed, 1.0 );\n\n	#else\n\n	vec4 skinVertex = bindMatrix * vec4( position, 1.0 );\n\n	#endif\n\n	vec4 skinned = vec4( 0.0 );\n	skinned += boneMatX * skinVertex * skinWeight.x;\n	skinned += boneMatY * skinVertex * skinWeight.y;\n	skinned += boneMatZ * skinVertex * skinWeight.z;\n	skinned += boneMatW * skinVertex * skinWeight.w;\n	skinned  = bindMatrixInverse * skinned;\n\n#endif\n", THREE.ShaderChunk.envmap_pars_vertex = "#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	varying vec3 vReflect;\n\n	uniform float refractionRatio;\n\n#endif\n", THREE.ShaderChunk.linear_to_gamma_fragment = "#ifdef GAMMA_OUTPUT\n\n	gl_FragColor.xyz = sqrt( gl_FragColor.xyz );\n\n#endif", THREE.ShaderChunk.color_pars_vertex = "#ifdef USE_COLOR\n\n	varying vec3 vColor;\n\n#endif", THREE.ShaderChunk.lights_lambert_pars_vertex = "uniform vec3 ambient;\nuniform vec3 diffuse;\nuniform vec3 emissive;\n\nuniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n", THREE.ShaderChunk.map_pars_vertex = "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	varying vec2 vUv;\n	uniform vec4 offsetRepeat;\n\n#endif\n", THREE.ShaderChunk.envmap_fragment = "#ifdef USE_ENVMAP\n\n	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n		vec3 cameraToVertex = normalize( vWorldPosition - cameraPosition );\n\n		// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\n		// Transforming Normal Vectors with the Inverse Transformation\n\n		vec3 worldNormal = normalize( vec3( vec4( normal, 0.0 ) * viewMatrix ) );\n\n		#ifdef ENVMAP_MODE_REFLECTION\n\n			vec3 reflectVec = reflect( cameraToVertex, worldNormal );\n\n		#else\n\n			vec3 reflectVec = refract( cameraToVertex, worldNormal, refractionRatio );\n\n		#endif\n\n	#else\n\n		vec3 reflectVec = vReflect;\n\n	#endif\n\n	#ifdef DOUBLE_SIDED\n		float flipNormal = ( -1.0 + 2.0 * float( gl_FrontFacing ) );\n	#else\n		float flipNormal = 1.0;\n	#endif\n\n	#ifdef ENVMAP_TYPE_CUBE\n		vec4 envColor = textureCube( envMap, flipNormal * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n	#elif defined( ENVMAP_TYPE_EQUIREC )\n		vec2 sampleUV;\n		sampleUV.y = clamp( flipNormal * reflectVec.y * 0.5 + 0.5, 0.0, 1.0);\n		sampleUV.x = atan( flipNormal * reflectVec.z, flipNormal * reflectVec.x ) * 0.15915494309189533576888376337251 + 0.5; // reciprocal( 2 PI ) + 0.5\n		vec4 envColor = texture2D( envMap, sampleUV );\n		\n	#elif defined( ENVMAP_TYPE_SPHERE )\n		vec3 reflectView = flipNormal * normalize((viewMatrix * vec4( reflectVec, 0.0 )).xyz + vec3(0.0,0.0,1.0));\n		vec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n	#endif\n\n	#ifdef GAMMA_INPUT\n\n		envColor.xyz *= envColor.xyz;\n\n	#endif\n\n	#ifdef ENVMAP_BLENDING_MULTIPLY\n\n		gl_FragColor.xyz = mix( gl_FragColor.xyz, gl_FragColor.xyz * envColor.xyz, specularStrength * reflectivity );\n\n	#elif defined( ENVMAP_BLENDING_MIX )\n\n		gl_FragColor.xyz = mix( gl_FragColor.xyz, envColor.xyz, specularStrength * reflectivity );\n\n	#elif defined( ENVMAP_BLENDING_ADD )\n\n		gl_FragColor.xyz += envColor.xyz * specularStrength * reflectivity;\n\n	#endif\n\n#endif\n", THREE.ShaderChunk.specularmap_pars_fragment = "#ifdef USE_SPECULARMAP\n\n	uniform sampler2D specularMap;\n\n#endif", THREE.ShaderChunk.logdepthbuf_vertex = "#ifdef USE_LOGDEPTHBUF\n\n	gl_Position.z = log2(max(1e-6, gl_Position.w + 1.0)) * logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		vFragDepth = 1.0 + gl_Position.w;\n\n#else\n\n		gl_Position.z = (gl_Position.z - 1.0) * gl_Position.w;\n\n	#endif\n\n#endif", THREE.ShaderChunk.morphtarget_pars_vertex = "#ifdef USE_MORPHTARGETS\n\n	#ifndef USE_MORPHNORMALS\n\n	uniform float morphTargetInfluences[ 8 ];\n\n	#else\n\n	uniform float morphTargetInfluences[ 4 ];\n\n	#endif\n\n#endif", THREE.ShaderChunk.specularmap_fragment = "float specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n	vec4 texelSpecular = texture2D( specularMap, vUv );\n	specularStrength = texelSpecular.r;\n\n#else\n\n	specularStrength = 1.0;\n\n#endif", THREE.ShaderChunk.fog_fragment = "#ifdef USE_FOG\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		float depth = gl_FragDepthEXT / gl_FragCoord.w;\n\n	#else\n\n		float depth = gl_FragCoord.z / gl_FragCoord.w;\n\n	#endif\n\n	#ifdef FOG_EXP2\n\n		const float LOG2 = 1.442695;\n		float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );\n		fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );\n\n	#else\n\n		float fogFactor = smoothstep( fogNear, fogFar, depth );\n\n	#endif\n	\n	gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );\n\n#endif", THREE.ShaderChunk.bumpmap_pars_fragment = "#ifdef USE_BUMPMAP\n\n	uniform sampler2D bumpMap;\n	uniform float bumpScale;\n\n			// Derivative maps - bump mapping unparametrized surfaces by Morten Mikkelsen\n			//	http://mmikkelsen3d.blogspot.sk/2011/07/derivative-maps.html\n\n			// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n	vec2 dHdxy_fwd() {\n\n		vec2 dSTdx = dFdx( vUv );\n		vec2 dSTdy = dFdy( vUv );\n\n		float Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n		float dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n		float dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n		return vec2( dBx, dBy );\n\n	}\n\n	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n		vec3 vSigmaX = dFdx( surf_pos );\n		vec3 vSigmaY = dFdy( surf_pos );\n		vec3 vN = surf_norm;		// normalized\n\n		vec3 R1 = cross( vSigmaY, vN );\n		vec3 R2 = cross( vN, vSigmaX );\n\n		float fDet = dot( vSigmaX, R1 );\n\n		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n		return normalize( abs( fDet ) * surf_norm - vGrad );\n\n	}\n\n#endif", THREE.ShaderChunk.defaultnormal_vertex = "#ifdef USE_SKINNING\n\n	vec3 objectNormal = skinnedNormal.xyz;\n\n#elif defined( USE_MORPHNORMALS )\n\n	vec3 objectNormal = morphedNormal;\n\n#else\n\n	vec3 objectNormal = normal;\n\n#endif\n\n#ifdef FLIP_SIDED\n\n	objectNormal = -objectNormal;\n\n#endif\n\nvec3 transformedNormal = normalMatrix * objectNormal;\n", THREE.ShaderChunk.lights_phong_pars_fragment = "uniform vec3 ambientLightColor;\n\n#if MAX_DIR_LIGHTS > 0\n\n	uniform vec3 directionalLightColor[ MAX_DIR_LIGHTS ];\n	uniform vec3 directionalLightDirection[ MAX_DIR_LIGHTS ];\n\n#endif\n\n#if MAX_HEMI_LIGHTS > 0\n\n	uniform vec3 hemisphereLightSkyColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightGroundColor[ MAX_HEMI_LIGHTS ];\n	uniform vec3 hemisphereLightDirection[ MAX_HEMI_LIGHTS ];\n\n#endif\n\n#if MAX_POINT_LIGHTS > 0\n\n	uniform vec3 pointLightColor[ MAX_POINT_LIGHTS ];\n\n	uniform vec3 pointLightPosition[ MAX_POINT_LIGHTS ];\n	uniform float pointLightDistance[ MAX_POINT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0\n\n	uniform vec3 spotLightColor[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightPosition[ MAX_SPOT_LIGHTS ];\n	uniform vec3 spotLightDirection[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightAngleCos[ MAX_SPOT_LIGHTS ];\n	uniform float spotLightExponent[ MAX_SPOT_LIGHTS ];\n\n	uniform float spotLightDistance[ MAX_SPOT_LIGHTS ];\n\n#endif\n\n#if MAX_SPOT_LIGHTS > 0 || defined( USE_BUMPMAP ) || defined( USE_ENVMAP )\n\n	varying vec3 vWorldPosition;\n\n#endif\n\n#ifdef WRAP_AROUND\n\n	uniform vec3 wrapRGB;\n\n#endif\n\nvarying vec3 vViewPosition;\nvarying vec3 vNormal;", THREE.ShaderChunk.skinbase_vertex = "#ifdef USE_SKINNING\n\n	mat4 boneMatX = getBoneMatrix( skinIndex.x );\n	mat4 boneMatY = getBoneMatrix( skinIndex.y );\n	mat4 boneMatZ = getBoneMatrix( skinIndex.z );\n	mat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif", THREE.ShaderChunk.map_vertex = "#if defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP )\n\n	vUv = uv * offsetRepeat.zw + offsetRepeat.xy;\n\n#endif", THREE.ShaderChunk.lightmap_fragment = "#ifdef USE_LIGHTMAP\n\n	gl_FragColor = gl_FragColor * texture2D( lightMap, vUv2 );\n\n#endif", THREE.ShaderChunk.shadowmap_pars_vertex = "#ifdef USE_SHADOWMAP\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n	uniform mat4 shadowMatrix[ MAX_SHADOWS ];\n\n#endif", THREE.ShaderChunk.color_fragment = "#ifdef USE_COLOR\n\n	gl_FragColor = gl_FragColor * vec4( vColor, 1.0 );\n\n#endif", THREE.ShaderChunk.morphtarget_vertex = "#ifdef USE_MORPHTARGETS\n\n	vec3 morphed = vec3( 0.0 );\n	morphed += ( morphTarget0 - position ) * morphTargetInfluences[ 0 ];\n	morphed += ( morphTarget1 - position ) * morphTargetInfluences[ 1 ];\n	morphed += ( morphTarget2 - position ) * morphTargetInfluences[ 2 ];\n	morphed += ( morphTarget3 - position ) * morphTargetInfluences[ 3 ];\n\n	#ifndef USE_MORPHNORMALS\n\n	morphed += ( morphTarget4 - position ) * morphTargetInfluences[ 4 ];\n	morphed += ( morphTarget5 - position ) * morphTargetInfluences[ 5 ];\n	morphed += ( morphTarget6 - position ) * morphTargetInfluences[ 6 ];\n	morphed += ( morphTarget7 - position ) * morphTargetInfluences[ 7 ];\n\n	#endif\n\n	morphed += position;\n\n#endif", THREE.ShaderChunk.envmap_vertex = "#if defined( USE_ENVMAP ) && ! defined( USE_BUMPMAP ) && ! defined( USE_NORMALMAP ) && ! defined( PHONG )\n\n	vec3 worldNormal = mat3( modelMatrix[ 0 ].xyz, modelMatrix[ 1 ].xyz, modelMatrix[ 2 ].xyz ) * objectNormal;\n	worldNormal = normalize( worldNormal );\n\n	vec3 cameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n	#ifdef ENVMAP_MODE_REFLECTION\n\n		vReflect = reflect( cameraToVertex, worldNormal );\n\n	#else\n\n		vReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n	#endif\n\n#endif\n", THREE.ShaderChunk.shadowmap_fragment = "#ifdef USE_SHADOWMAP\n\n	#ifdef SHADOWMAP_DEBUG\n\n		vec3 frustumColors[3];\n		frustumColors[0] = vec3( 1.0, 0.5, 0.0 );\n		frustumColors[1] = vec3( 0.0, 1.0, 0.8 );\n		frustumColors[2] = vec3( 0.0, 0.5, 1.0 );\n\n	#endif\n\n	#ifdef SHADOWMAP_CASCADE\n\n		int inFrustumCount = 0;\n\n	#endif\n\n	float fDepth;\n	vec3 shadowColor = vec3( 1.0 );\n\n	for( int i = 0; i < MAX_SHADOWS; i ++ ) {\n\n		vec3 shadowCoord = vShadowCoord[ i ].xyz / vShadowCoord[ i ].w;\n\n				// if ( something && something ) breaks ATI OpenGL shader compiler\n				// if ( all( something, something ) ) using this instead\n\n		bvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n		bool inFrustum = all( inFrustumVec );\n\n				// don't shadow pixels outside of light frustum\n				// use just first frustum (for cascades)\n				// don't shadow pixels behind far plane of light frustum\n\n		#ifdef SHADOWMAP_CASCADE\n\n			inFrustumCount += int( inFrustum );\n			bvec3 frustumTestVec = bvec3( inFrustum, inFrustumCount == 1, shadowCoord.z <= 1.0 );\n\n		#else\n\n			bvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n		#endif\n\n		bool frustumTest = all( frustumTestVec );\n\n		if ( frustumTest ) {\n\n			shadowCoord.z += shadowBias[ i ];\n\n			#if defined( SHADOWMAP_TYPE_PCF )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n		/*\n						// nested loops breaks shader compiler / validator on some ATI cards when using OpenGL\n						// must enroll loop manually\n\n				for ( float y = -1.25; y <= 1.25; y += 1.25 )\n					for ( float x = -1.25; x <= 1.25; x += 1.25 ) {\n\n						vec4 rgbaDepth = texture2D( shadowMap[ i ], vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy );\n\n								// doesn't seem to produce any noticeable visual difference compared to simple texture2D lookup\n								//vec4 rgbaDepth = texture2DProj( shadowMap[ i ], vec4( vShadowCoord[ i ].w * ( vec2( x * xPixelOffset, y * yPixelOffset ) + shadowCoord.xy ), 0.05, vShadowCoord[ i ].w ) );\n\n						float fDepth = unpackDepth( rgbaDepth );\n\n						if ( fDepth < shadowCoord.z )\n							shadow += 1.0;\n\n				}\n\n				shadow /= 9.0;\n\n		*/\n\n				const float shadowDelta = 1.0 / 9.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.25 * xPixelOffset;\n				float dy0 = -1.25 * yPixelOffset;\n				float dx1 = 1.25 * xPixelOffset;\n				float dy1 = 1.25 * yPixelOffset;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				fDepth = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n				if ( fDepth < shadowCoord.z ) shadow += shadowDelta;\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n						// Percentage-close filtering\n						// (9 pixel kernel)\n						// http://fabiensanglard.net/shadowmappingPCF/\n\n				float shadow = 0.0;\n\n				float xPixelOffset = 1.0 / shadowMapSize[ i ].x;\n				float yPixelOffset = 1.0 / shadowMapSize[ i ].y;\n\n				float dx0 = -1.0 * xPixelOffset;\n				float dy0 = -1.0 * yPixelOffset;\n				float dx1 = 1.0 * xPixelOffset;\n				float dy1 = 1.0 * yPixelOffset;\n\n				mat3 shadowKernel;\n				mat3 depthKernel;\n\n				depthKernel[0][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy0 ) ) );\n				depthKernel[0][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, 0.0 ) ) );\n				depthKernel[0][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx0, dy1 ) ) );\n				depthKernel[1][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy0 ) ) );\n				depthKernel[1][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy ) );\n				depthKernel[1][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( 0.0, dy1 ) ) );\n				depthKernel[2][0] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy0 ) ) );\n				depthKernel[2][1] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, 0.0 ) ) );\n				depthKernel[2][2] = unpackDepth( texture2D( shadowMap[ i ], shadowCoord.xy + vec2( dx1, dy1 ) ) );\n\n				vec3 shadowZ = vec3( shadowCoord.z );\n				shadowKernel[0] = vec3(lessThan(depthKernel[0], shadowZ ));\n				shadowKernel[0] *= vec3(0.25);\n\n				shadowKernel[1] = vec3(lessThan(depthKernel[1], shadowZ ));\n				shadowKernel[1] *= vec3(0.25);\n\n				shadowKernel[2] = vec3(lessThan(depthKernel[2], shadowZ ));\n				shadowKernel[2] *= vec3(0.25);\n\n				vec2 fractionalCoord = 1.0 - fract( shadowCoord.xy * shadowMapSize[i].xy );\n\n				shadowKernel[0] = mix( shadowKernel[1], shadowKernel[0], fractionalCoord.x );\n				shadowKernel[1] = mix( shadowKernel[2], shadowKernel[1], fractionalCoord.x );\n\n				vec4 shadowValues;\n				shadowValues.x = mix( shadowKernel[0][1], shadowKernel[0][0], fractionalCoord.y );\n				shadowValues.y = mix( shadowKernel[0][2], shadowKernel[0][1], fractionalCoord.y );\n				shadowValues.z = mix( shadowKernel[1][1], shadowKernel[1][0], fractionalCoord.y );\n				shadowValues.w = mix( shadowKernel[1][2], shadowKernel[1][1], fractionalCoord.y );\n\n				shadow = dot( shadowValues, vec4( 1.0 ) );\n\n				shadowColor = shadowColor * vec3( ( 1.0 - shadowDarkness[ i ] * shadow ) );\n\n			#else\n\n				vec4 rgbaDepth = texture2D( shadowMap[ i ], shadowCoord.xy );\n				float fDepth = unpackDepth( rgbaDepth );\n\n				if ( fDepth < shadowCoord.z )\n\n		// spot with multiple shadows is darker\n\n					shadowColor = shadowColor * vec3( 1.0 - shadowDarkness[ i ] );\n\n		// spot with multiple shadows has the same color as single shadow spot\n\n		// 					shadowColor = min( shadowColor, vec3( shadowDarkness[ i ] ) );\n\n			#endif\n\n		}\n\n\n		#ifdef SHADOWMAP_DEBUG\n\n			#ifdef SHADOWMAP_CASCADE\n\n				if ( inFrustum && inFrustumCount == 1 ) gl_FragColor.xyz *= frustumColors[ i ];\n\n			#else\n\n				if ( inFrustum ) gl_FragColor.xyz *= frustumColors[ i ];\n\n			#endif\n\n		#endif\n\n	}\n\n	#ifdef GAMMA_OUTPUT\n\n		shadowColor *= shadowColor;\n\n	#endif\n\n	gl_FragColor.xyz = gl_FragColor.xyz * shadowColor;\n\n#endif\n", THREE.ShaderChunk.worldpos_vertex = "#if defined( USE_ENVMAP ) || defined( PHONG ) || defined( LAMBERT ) || defined ( USE_SHADOWMAP )\n\n	#ifdef USE_SKINNING\n\n		vec4 worldPosition = modelMatrix * skinned;\n\n	#elif defined( USE_MORPHTARGETS )\n\n		vec4 worldPosition = modelMatrix * vec4( morphed, 1.0 );\n\n	#else\n\n		vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n\n	#endif\n\n#endif\n", THREE.ShaderChunk.shadowmap_pars_fragment = "#ifdef USE_SHADOWMAP\n\n	uniform sampler2D shadowMap[ MAX_SHADOWS ];\n	uniform vec2 shadowMapSize[ MAX_SHADOWS ];\n\n	uniform float shadowDarkness[ MAX_SHADOWS ];\n	uniform float shadowBias[ MAX_SHADOWS ];\n\n	varying vec4 vShadowCoord[ MAX_SHADOWS ];\n\n	float unpackDepth( const in vec4 rgba_depth ) {\n\n		const vec4 bit_shift = vec4( 1.0 / ( 256.0 * 256.0 * 256.0 ), 1.0 / ( 256.0 * 256.0 ), 1.0 / 256.0, 1.0 );\n		float depth = dot( rgba_depth, bit_shift );\n		return depth;\n\n	}\n\n#endif", THREE.ShaderChunk.skinning_pars_vertex = "#ifdef USE_SKINNING\n\n	uniform mat4 bindMatrix;\n	uniform mat4 bindMatrixInverse;\n\n	#ifdef BONE_TEXTURE\n\n		uniform sampler2D boneTexture;\n		uniform int boneTextureWidth;\n		uniform int boneTextureHeight;\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			float j = i * 4.0;\n			float x = mod( j, float( boneTextureWidth ) );\n			float y = floor( j / float( boneTextureWidth ) );\n\n			float dx = 1.0 / float( boneTextureWidth );\n			float dy = 1.0 / float( boneTextureHeight );\n\n			y = dy * ( y + 0.5 );\n\n			vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n			vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n			vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n			vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n			mat4 bone = mat4( v1, v2, v3, v4 );\n\n			return bone;\n\n		}\n\n	#else\n\n		uniform mat4 boneGlobalMatrices[ MAX_BONES ];\n\n		mat4 getBoneMatrix( const in float i ) {\n\n			mat4 bone = boneGlobalMatrices[ int(i) ];\n			return bone;\n\n		}\n\n	#endif\n\n#endif\n", THREE.ShaderChunk.logdepthbuf_pars_fragment = "#ifdef USE_LOGDEPTHBUF\n\n	uniform float logDepthBufFC;\n\n	#ifdef USE_LOGDEPTHBUF_EXT\n\n		#extension GL_EXT_frag_depth : enable\n		varying float vFragDepth;\n\n	#endif\n\n#endif", THREE.ShaderChunk.alphamap_fragment = "#ifdef USE_ALPHAMAP\n\n	gl_FragColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n", THREE.ShaderChunk.alphamap_pars_fragment = "#ifdef USE_ALPHAMAP\n\n	uniform sampler2D alphaMap;\n\n#endif\n", THREE.UniformsUtils = {
        merge: function(a) {
            for (var b = {}, c = 0; c < a.length; c++) {
                var d = this.clone(a[c]);
                for (var e in d) b[e] = d[e]
            }
            return b
        },
        clone: function(a) {
            var b = {};
            for (var c in a) {
                b[c] = {};
                for (var d in a[c]) {
                    var e = a[c][d];
                    b[c][d] = e instanceof THREE.Color || e instanceof THREE.Vector2 || e instanceof THREE.Vector3 || e instanceof THREE.Vector4 || e instanceof THREE.Matrix4 || e instanceof THREE.Texture ? e.clone() : e instanceof Array ? e.slice() : e
                }
            }
            return b
        }
    }, THREE.UniformsLib = {
        common: {
            diffuse: {
                type: "c",
                value: new THREE.Color(15658734)
            },
            opacity: {
                type: "f",
                value: 1
            },
            map: {
                type: "t",
                value: null
            },
            offsetRepeat: {
                type: "v4",
                value: new THREE.Vector4(0, 0, 1, 1)
            },
            lightMap: {
                type: "t",
                value: null
            },
            specularMap: {
                type: "t",
                value: null
            },
            alphaMap: {
                type: "t",
                value: null
            },
            envMap: {
                type: "t",
                value: null
            },
            flipEnvMap: {
                type: "f",
                value: -1
            },
            reflectivity: {
                type: "f",
                value: 1
            },
            refractionRatio: {
                type: "f",
                value: .98
            },
            morphTargetInfluences: {
                type: "f",
                value: 0
            }
        },
        bump: {
            bumpMap: {
                type: "t",
                value: null
            },
            bumpScale: {
                type: "f",
                value: 1
            }
        },
        normalmap: {
            normalMap: {
                type: "t",
                value: null
            },
            normalScale: {
                type: "v2",
                value: new THREE.Vector2(1, 1)
            }
        },
        fog: {
            fogDensity: {
                type: "f",
                value: 25e-5
            },
            fogNear: {
                type: "f",
                value: 1
            },
            fogFar: {
                type: "f",
                value: 2e3
            },
            fogColor: {
                type: "c",
                value: new THREE.Color(16777215)
            }
        },
        lights: {
            ambientLightColor: {
                type: "fv",
                value: []
            },
            directionalLightDirection: {
                type: "fv",
                value: []
            },
            directionalLightColor: {
                type: "fv",
                value: []
            },
            hemisphereLightDirection: {
                type: "fv",
                value: []
            },
            hemisphereLightSkyColor: {
                type: "fv",
                value: []
            },
            hemisphereLightGroundColor: {
                type: "fv",
                value: []
            },
            pointLightColor: {
                type: "fv",
                value: []
            },
            pointLightPosition: {
                type: "fv",
                value: []
            },
            pointLightDistance: {
                type: "fv1",
                value: []
            },
            spotLightColor: {
                type: "fv",
                value: []
            },
            spotLightPosition: {
                type: "fv",
                value: []
            },
            spotLightDirection: {
                type: "fv",
                value: []
            },
            spotLightDistance: {
                type: "fv1",
                value: []
            },
            spotLightAngleCos: {
                type: "fv1",
                value: []
            },
            spotLightExponent: {
                type: "fv1",
                value: []
            }
        },
        particle: {
            psColor: {
                type: "c",
                value: new THREE.Color(15658734)
            },
            opacity: {
                type: "f",
                value: 1
            },
            size: {
                type: "f",
                value: 1
            },
            scale: {
                type: "f",
                value: 1
            },
            map: {
                type: "t",
                value: null
            },
            fogDensity: {
                type: "f",
                value: 25e-5
            },
            fogNear: {
                type: "f",
                value: 1
            },
            fogFar: {
                type: "f",
                value: 2e3
            },
            fogColor: {
                type: "c",
                value: new THREE.Color(16777215)
            }
        },
        shadowmap: {
            shadowMap: {
                type: "tv",
                value: []
            },
            shadowMapSize: {
                type: "v2v",
                value: []
            },
            shadowBias: {
                type: "fv1",
                value: []
            },
            shadowDarkness: {
                type: "fv1",
                value: []
            },
            shadowMatrix: {
                type: "m4v",
                value: []
            }
        }
    }, THREE.ShaderLib = {
        basic: {
            uniforms: THREE.UniformsUtils.merge([THREE.UniformsLib.common, THREE.UniformsLib.fog, THREE.UniformsLib.shadowmap]),
            vertexShader: [THREE.ShaderChunk.map_pars_vertex, THREE.ShaderChunk.lightmap_pars_vertex, THREE.ShaderChunk.envmap_pars_vertex, THREE.ShaderChunk.color_pars_vertex, THREE.ShaderChunk.morphtarget_pars_vertex, THREE.ShaderChunk.skinning_pars_vertex, THREE.ShaderChunk.shadowmap_pars_vertex, THREE.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", THREE.ShaderChunk.map_vertex, THREE.ShaderChunk.lightmap_vertex, THREE.ShaderChunk.color_vertex, THREE.ShaderChunk.skinbase_vertex, "	#ifdef USE_ENVMAP", THREE.ShaderChunk.morphnormal_vertex, THREE.ShaderChunk.skinnormal_vertex, THREE.ShaderChunk.defaultnormal_vertex, "	#endif", THREE.ShaderChunk.morphtarget_vertex, THREE.ShaderChunk.skinning_vertex, THREE.ShaderChunk.default_vertex, THREE.ShaderChunk.logdepthbuf_vertex, THREE.ShaderChunk.worldpos_vertex, THREE.ShaderChunk.envmap_vertex, THREE.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
            fragmentShader: ["uniform vec3 diffuse;", "uniform float opacity;", THREE.ShaderChunk.color_pars_fragment, THREE.ShaderChunk.map_pars_fragment, THREE.ShaderChunk.alphamap_pars_fragment, THREE.ShaderChunk.lightmap_pars_fragment, THREE.ShaderChunk.envmap_pars_fragment, THREE.ShaderChunk.fog_pars_fragment, THREE.ShaderChunk.shadowmap_pars_fragment, THREE.ShaderChunk.specularmap_pars_fragment, THREE.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "	gl_FragColor = vec4( diffuse, opacity );", THREE.ShaderChunk.logdepthbuf_fragment, THREE.ShaderChunk.map_fragment, THREE.ShaderChunk.alphamap_fragment, THREE.ShaderChunk.alphatest_fragment, THREE.ShaderChunk.specularmap_fragment, THREE.ShaderChunk.lightmap_fragment, THREE.ShaderChunk.color_fragment, THREE.ShaderChunk.envmap_fragment, THREE.ShaderChunk.shadowmap_fragment, THREE.ShaderChunk.linear_to_gamma_fragment, THREE.ShaderChunk.fog_fragment, "}"].join("\n")
        },
        lambert: {
            uniforms: THREE.UniformsUtils.merge([THREE.UniformsLib.common, THREE.UniformsLib.fog, THREE.UniformsLib.lights, THREE.UniformsLib.shadowmap, {
                ambient: {
                    type: "c",
                    value: new THREE.Color(16777215)
                },
                emissive: {
                    type: "c",
                    value: new THREE.Color(0)
                },
                wrapRGB: {
                    type: "v3",
                    value: new THREE.Vector3(1, 1, 1)
                }
            }]),
            vertexShader: ["#define LAMBERT", "varying vec3 vLightFront;", "#ifdef DOUBLE_SIDED", "	varying vec3 vLightBack;", "#endif", THREE.ShaderChunk.map_pars_vertex, THREE.ShaderChunk.lightmap_pars_vertex, THREE.ShaderChunk.envmap_pars_vertex, THREE.ShaderChunk.lights_lambert_pars_vertex, THREE.ShaderChunk.color_pars_vertex, THREE.ShaderChunk.morphtarget_pars_vertex, THREE.ShaderChunk.skinning_pars_vertex, THREE.ShaderChunk.shadowmap_pars_vertex, THREE.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", THREE.ShaderChunk.map_vertex, THREE.ShaderChunk.lightmap_vertex, THREE.ShaderChunk.color_vertex, THREE.ShaderChunk.morphnormal_vertex, THREE.ShaderChunk.skinbase_vertex, THREE.ShaderChunk.skinnormal_vertex, THREE.ShaderChunk.defaultnormal_vertex, THREE.ShaderChunk.morphtarget_vertex, THREE.ShaderChunk.skinning_vertex, THREE.ShaderChunk.default_vertex, THREE.ShaderChunk.logdepthbuf_vertex, THREE.ShaderChunk.worldpos_vertex, THREE.ShaderChunk.envmap_vertex, THREE.ShaderChunk.lights_lambert_vertex, THREE.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
            fragmentShader: ["uniform float opacity;", "varying vec3 vLightFront;", "#ifdef DOUBLE_SIDED", "	varying vec3 vLightBack;", "#endif", THREE.ShaderChunk.color_pars_fragment, THREE.ShaderChunk.map_pars_fragment, THREE.ShaderChunk.alphamap_pars_fragment, THREE.ShaderChunk.lightmap_pars_fragment, THREE.ShaderChunk.envmap_pars_fragment, THREE.ShaderChunk.fog_pars_fragment, THREE.ShaderChunk.shadowmap_pars_fragment, THREE.ShaderChunk.specularmap_pars_fragment, THREE.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "	gl_FragColor = vec4( vec3( 1.0 ), opacity );", THREE.ShaderChunk.logdepthbuf_fragment, THREE.ShaderChunk.map_fragment, THREE.ShaderChunk.alphamap_fragment, THREE.ShaderChunk.alphatest_fragment, THREE.ShaderChunk.specularmap_fragment, "	#ifdef DOUBLE_SIDED", "		if ( gl_FrontFacing )", "			gl_FragColor.xyz *= vLightFront;", "		else", "			gl_FragColor.xyz *= vLightBack;", "	#else", "		gl_FragColor.xyz *= vLightFront;", "	#endif", THREE.ShaderChunk.lightmap_fragment, THREE.ShaderChunk.color_fragment, THREE.ShaderChunk.envmap_fragment, THREE.ShaderChunk.shadowmap_fragment, THREE.ShaderChunk.linear_to_gamma_fragment, THREE.ShaderChunk.fog_fragment, "}"].join("\n")
        },
        phong: {
            uniforms: THREE.UniformsUtils.merge([THREE.UniformsLib.common, THREE.UniformsLib.bump, THREE.UniformsLib.normalmap, THREE.UniformsLib.fog, THREE.UniformsLib.lights, THREE.UniformsLib.shadowmap, {
                ambient: {
                    type: "c",
                    value: new THREE.Color(16777215)
                },
                emissive: {
                    type: "c",
                    value: new THREE.Color(0)
                },
                specular: {
                    type: "c",
                    value: new THREE.Color(1118481)
                },
                shininess: {
                    type: "f",
                    value: 30
                },
                wrapRGB: {
                    type: "v3",
                    value: new THREE.Vector3(1, 1, 1)
                }
            }]),
            vertexShader: ["#define PHONG", "varying vec3 vViewPosition;", "varying vec3 vNormal;", THREE.ShaderChunk.map_pars_vertex, THREE.ShaderChunk.lightmap_pars_vertex, THREE.ShaderChunk.envmap_pars_vertex, THREE.ShaderChunk.lights_phong_pars_vertex, THREE.ShaderChunk.color_pars_vertex, THREE.ShaderChunk.morphtarget_pars_vertex, THREE.ShaderChunk.skinning_pars_vertex, THREE.ShaderChunk.shadowmap_pars_vertex, THREE.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", THREE.ShaderChunk.map_vertex, THREE.ShaderChunk.lightmap_vertex, THREE.ShaderChunk.color_vertex, THREE.ShaderChunk.morphnormal_vertex, THREE.ShaderChunk.skinbase_vertex, THREE.ShaderChunk.skinnormal_vertex, THREE.ShaderChunk.defaultnormal_vertex, "	vNormal = normalize( transformedNormal );", THREE.ShaderChunk.morphtarget_vertex, THREE.ShaderChunk.skinning_vertex, THREE.ShaderChunk.default_vertex, THREE.ShaderChunk.logdepthbuf_vertex, "	vViewPosition = -mvPosition.xyz;", THREE.ShaderChunk.worldpos_vertex, THREE.ShaderChunk.envmap_vertex, THREE.ShaderChunk.lights_phong_vertex, THREE.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
            fragmentShader: ["#define PHONG", "uniform vec3 diffuse;", "uniform float opacity;", "uniform vec3 ambient;", "uniform vec3 emissive;", "uniform vec3 specular;", "uniform float shininess;", THREE.ShaderChunk.color_pars_fragment, THREE.ShaderChunk.map_pars_fragment, THREE.ShaderChunk.alphamap_pars_fragment, THREE.ShaderChunk.lightmap_pars_fragment, THREE.ShaderChunk.envmap_pars_fragment, THREE.ShaderChunk.fog_pars_fragment, THREE.ShaderChunk.lights_phong_pars_fragment, THREE.ShaderChunk.shadowmap_pars_fragment, THREE.ShaderChunk.bumpmap_pars_fragment, THREE.ShaderChunk.normalmap_pars_fragment, THREE.ShaderChunk.specularmap_pars_fragment, THREE.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "	gl_FragColor = vec4( vec3( 1.0 ), opacity );", THREE.ShaderChunk.logdepthbuf_fragment, THREE.ShaderChunk.map_fragment, THREE.ShaderChunk.alphamap_fragment, THREE.ShaderChunk.alphatest_fragment, THREE.ShaderChunk.specularmap_fragment, THREE.ShaderChunk.lights_phong_fragment, THREE.ShaderChunk.lightmap_fragment, THREE.ShaderChunk.color_fragment, THREE.ShaderChunk.envmap_fragment, THREE.ShaderChunk.shadowmap_fragment, THREE.ShaderChunk.linear_to_gamma_fragment, THREE.ShaderChunk.fog_fragment, "}"].join("\n")
        },
        particle_basic: {
            uniforms: THREE.UniformsUtils.merge([THREE.UniformsLib.particle, THREE.UniformsLib.shadowmap]),
            vertexShader: ["uniform float size;", "uniform float scale;", THREE.ShaderChunk.color_pars_vertex, THREE.ShaderChunk.shadowmap_pars_vertex, THREE.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", THREE.ShaderChunk.color_vertex, "	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );", "	#ifdef USE_SIZEATTENUATION", "		gl_PointSize = size * ( scale / length( mvPosition.xyz ) );", "	#else", "		gl_PointSize = size;", "	#endif", "	gl_Position = projectionMatrix * mvPosition;", THREE.ShaderChunk.logdepthbuf_vertex, THREE.ShaderChunk.worldpos_vertex, THREE.ShaderChunk.shadowmap_vertex, "}"].join("\n"),
            fragmentShader: ["uniform vec3 psColor;", "uniform float opacity;", THREE.ShaderChunk.color_pars_fragment, THREE.ShaderChunk.map_particle_pars_fragment, THREE.ShaderChunk.fog_pars_fragment, THREE.ShaderChunk.shadowmap_pars_fragment, THREE.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "	gl_FragColor = vec4( psColor, opacity );", THREE.ShaderChunk.logdepthbuf_fragment, THREE.ShaderChunk.map_particle_fragment, THREE.ShaderChunk.alphatest_fragment, THREE.ShaderChunk.color_fragment, THREE.ShaderChunk.shadowmap_fragment, THREE.ShaderChunk.fog_fragment, "}"].join("\n")
        },
        dashed: {
            uniforms: THREE.UniformsUtils.merge([THREE.UniformsLib.common, THREE.UniformsLib.fog, {
                scale: {
                    type: "f",
                    value: 1
                },
                dashSize: {
                    type: "f",
                    value: 1
                },
                totalSize: {
                    type: "f",
                    value: 2
                }
            }]),
            vertexShader: ["uniform float scale;", "attribute float lineDistance;", "varying float vLineDistance;", THREE.ShaderChunk.color_pars_vertex, THREE.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", THREE.ShaderChunk.color_vertex, "	vLineDistance = scale * lineDistance;", "	vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );", "	gl_Position = projectionMatrix * mvPosition;", THREE.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
            fragmentShader: ["uniform vec3 diffuse;", "uniform float opacity;", "uniform float dashSize;", "uniform float totalSize;", "varying float vLineDistance;", THREE.ShaderChunk.color_pars_fragment, THREE.ShaderChunk.fog_pars_fragment, THREE.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "	if ( mod( vLineDistance, totalSize ) > dashSize ) {", "		discard;", "	}", "	gl_FragColor = vec4( diffuse, opacity );", THREE.ShaderChunk.logdepthbuf_fragment, THREE.ShaderChunk.color_fragment, THREE.ShaderChunk.fog_fragment, "}"].join("\n")
        },
        depth: {
            uniforms: {
                mNear: {
                    type: "f",
                    value: 1
                },
                mFar: {
                    type: "f",
                    value: 2e3
                },
                opacity: {
                    type: "f",
                    value: 1
                }
            },
            vertexShader: [THREE.ShaderChunk.morphtarget_pars_vertex, THREE.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", THREE.ShaderChunk.morphtarget_vertex, THREE.ShaderChunk.default_vertex, THREE.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
            fragmentShader: ["uniform float mNear;", "uniform float mFar;", "uniform float opacity;", THREE.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", THREE.ShaderChunk.logdepthbuf_fragment, "	#ifdef USE_LOGDEPTHBUF_EXT", "		float depth = gl_FragDepthEXT / gl_FragCoord.w;", "	#else", "		float depth = gl_FragCoord.z / gl_FragCoord.w;", "	#endif", "	float color = 1.0 - smoothstep( mNear, mFar, depth );", "	gl_FragColor = vec4( vec3( color ), opacity );", "}"].join("\n")
        },
        normal: {
            uniforms: {
                opacity: {
                    type: "f",
                    value: 1
                }
            },
            vertexShader: ["varying vec3 vNormal;", THREE.ShaderChunk.morphtarget_pars_vertex, THREE.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", "	vNormal = normalize( normalMatrix * normal );", THREE.ShaderChunk.morphtarget_vertex, THREE.ShaderChunk.default_vertex, THREE.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
            fragmentShader: ["uniform float opacity;", "varying vec3 vNormal;", THREE.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "	gl_FragColor = vec4( 0.5 * normalize( vNormal ) + 0.5, opacity );", THREE.ShaderChunk.logdepthbuf_fragment, "}"].join("\n")
        },
        cube: {
            uniforms: {
                tCube: {
                    type: "t",
                    value: null
                },
                tFlip: {
                    type: "f",
                    value: -1
                }
            },
            vertexShader: ["varying vec3 vWorldPosition;", THREE.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", "	vec4 worldPosition = modelMatrix * vec4( position, 1.0 );", "	vWorldPosition = worldPosition.xyz;", "	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", THREE.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
            fragmentShader: ["uniform samplerCube tCube;", "uniform float tFlip;", "varying vec3 vWorldPosition;", THREE.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "	gl_FragColor = textureCube( tCube, vec3( tFlip * vWorldPosition.x, vWorldPosition.yz ) );", THREE.ShaderChunk.logdepthbuf_fragment, "}"].join("\n")
        },
        equirect: {
            uniforms: {
                tEquirect: {
                    type: "t",
                    value: null
                },
                tFlip: {
                    type: "f",
                    value: -1
                }
            },
            vertexShader: ["varying vec3 vWorldPosition;", THREE.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", "	vec4 worldPosition = modelMatrix * vec4( position, 1.0 );", "	vWorldPosition = worldPosition.xyz;", "	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", THREE.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
            fragmentShader: ["uniform sampler2D tEquirect;", "uniform float tFlip;", "varying vec3 vWorldPosition;", THREE.ShaderChunk.logdepthbuf_pars_fragment, "void main() {", "vec3 direction = normalize( vWorldPosition );", "vec2 sampleUV;", "sampleUV.y = clamp( tFlip * direction.y * -0.5 + 0.5, 0.0, 1.0);", "sampleUV.x = atan( direction.z, direction.x ) * 0.15915494309189533576888376337251 + 0.5;", "gl_FragColor = texture2D( tEquirect, sampleUV );", THREE.ShaderChunk.logdepthbuf_fragment, "}"].join("\n")
        },
        depthRGBA: {
            uniforms: {},
            vertexShader: [THREE.ShaderChunk.morphtarget_pars_vertex, THREE.ShaderChunk.skinning_pars_vertex, THREE.ShaderChunk.logdepthbuf_pars_vertex, "void main() {", THREE.ShaderChunk.skinbase_vertex, THREE.ShaderChunk.morphtarget_vertex, THREE.ShaderChunk.skinning_vertex, THREE.ShaderChunk.default_vertex, THREE.ShaderChunk.logdepthbuf_vertex, "}"].join("\n"),
            fragmentShader: [THREE.ShaderChunk.logdepthbuf_pars_fragment, "vec4 pack_depth( const in float depth ) {", "	const vec4 bit_shift = vec4( 256.0 * 256.0 * 256.0, 256.0 * 256.0, 256.0, 1.0 );", "	const vec4 bit_mask = vec4( 0.0, 1.0 / 256.0, 1.0 / 256.0, 1.0 / 256.0 );", "	vec4 res = mod( depth * bit_shift * vec4( 255 ), vec4( 256 ) ) / vec4( 255 );", "	res -= res.xxyz * bit_mask;", "	return res;", "}", "void main() {", THREE.ShaderChunk.logdepthbuf_fragment, "	#ifdef USE_LOGDEPTHBUF_EXT", "		gl_FragData[ 0 ] = pack_depth( gl_FragDepthEXT );", "	#else", "		gl_FragData[ 0 ] = pack_depth( gl_FragCoord.z );", "	#endif", "}"].join("\n")
        }
    }, THREE.WebGLRenderer = function(a) {
        function b(a) {
            a.__webglVertexBuffer = Ja.createBuffer(), a.__webglColorBuffer = Ja.createBuffer(), Ka.info.memory.geometries++
        }

        function c(a) {
            a.__webglVertexBuffer = Ja.createBuffer(), a.__webglColorBuffer = Ja.createBuffer(), a.__webglLineDistanceBuffer = Ja.createBuffer(), Ka.info.memory.geometries++
        }

        function d(a) {
            a.__webglVertexBuffer = Ja.createBuffer(), a.__webglNormalBuffer = Ja.createBuffer(), a.__webglTangentBuffer = Ja.createBuffer(), a.__webglColorBuffer = Ja.createBuffer(), a.__webglUVBuffer = Ja.createBuffer(), a.__webglUV2Buffer = Ja.createBuffer(), a.__webglSkinIndicesBuffer = Ja.createBuffer(), a.__webglSkinWeightsBuffer = Ja.createBuffer(), a.__webglFaceBuffer = Ja.createBuffer(), a.__webglLineBuffer = Ja.createBuffer();
            var b = a.numMorphTargets;
            if (b) {
                a.__webglMorphTargetsBuffers = [];
                for (var c = 0, d = b; d > c; c++) a.__webglMorphTargetsBuffers.push(Ja.createBuffer())
            }
            var e = a.numMorphNormals;
            if (e) {
                a.__webglMorphNormalsBuffers = [];
                for (var c = 0, d = e; d > c; c++) a.__webglMorphNormalsBuffers.push(Ja.createBuffer())
            }
            Ka.info.memory.geometries++
        }

        function e(a) {
            var b = a.geometry,
                c = a.material,
                d = b.vertices.length;
            if (c.attributes) {
                void 0 === b.__webglCustomAttributesList && (b.__webglCustomAttributesList = []);
                for (var e in c.attributes) {
                    var f = c.attributes[e];
                    if (!f.__webglInitialized || f.createUniqueBuffers) {
                        f.__webglInitialized = !0;
                        var g = 1;
                        "v2" === f.type ? g = 2 : "v3" === f.type ? g = 3 : "v4" === f.type ? g = 4 : "c" === f.type && (g = 3), f.size = g, f.array = new Float32Array(d * g), f.buffer = Ja.createBuffer(), f.buffer.belongsToAttribute = e, f.needsUpdate = !0
                    }
                    b.__webglCustomAttributesList.push(f)
                }
            }
        }

        function f(a, b) {
            var c = a.vertices.length;
            a.__vertexArray = new Float32Array(3 * c), a.__colorArray = new Float32Array(3 * c), a.__sortArray = [], a.__webglParticleCount = c, e(b)
        }

        function g(a, b) {
            var c = a.vertices.length;
            a.__vertexArray = new Float32Array(3 * c), a.__colorArray = new Float32Array(3 * c), a.__lineDistanceArray = new Float32Array(1 * c), a.__webglLineCount = c, e(b)
        }

        function h(a, b) {
            var c = b.geometry,
                d = a.faces3,
                e = 3 * d.length,
                f = 1 * d.length,
                g = 3 * d.length,
                h = i(b, a);
            a.__vertexArray = new Float32Array(3 * e), a.__normalArray = new Float32Array(3 * e), a.__colorArray = new Float32Array(3 * e), a.__uvArray = new Float32Array(2 * e), c.faceVertexUvs.length > 1 && (a.__uv2Array = new Float32Array(2 * e)), c.hasTangents && (a.__tangentArray = new Float32Array(4 * e)), b.geometry.skinWeights.length && b.geometry.skinIndices.length && (a.__skinIndexArray = new Float32Array(4 * e), a.__skinWeightArray = new Float32Array(4 * e));
            var j = null !== sb.get("OES_element_index_uint") && f > 21845 ? Uint32Array : Uint16Array;
            a.__typeArray = j, a.__faceArray = new j(3 * f), a.__lineArray = new j(2 * g);
            var k = a.numMorphTargets;
            if (k) {
                a.__morphTargetsArrays = [];
                for (var l = 0, m = k; m > l; l++) a.__morphTargetsArrays.push(new Float32Array(3 * e))
            }
            var n = a.numMorphNormals;
            if (n) {
                a.__morphNormalsArrays = [];
                for (var l = 0, m = n; m > l; l++) a.__morphNormalsArrays.push(new Float32Array(3 * e))
            }
            if (a.__webglFaceCount = 3 * f, a.__webglLineCount = 2 * g, h.attributes) {
                void 0 === a.__webglCustomAttributesList && (a.__webglCustomAttributesList = []);
                for (var o in h.attributes) {
                    var p = h.attributes[o],
                        q = {};
                    for (var r in p) q[r] = p[r];
                    if (!q.__webglInitialized || q.createUniqueBuffers) {
                        q.__webglInitialized = !0;
                        var s = 1;
                        "v2" === q.type ? s = 2 : "v3" === q.type ? s = 3 : "v4" === q.type ? s = 4 : "c" === q.type && (s = 3), q.size = s, q.array = new Float32Array(e * s), q.buffer = Ja.createBuffer(), q.buffer.belongsToAttribute = o, p.needsUpdate = !0, q.__original = p
                    }
                    a.__webglCustomAttributesList.push(q)
                }
            }
            a.__inittedArrays = !0
        }

        function i(a, b) {
            return a.material instanceof THREE.MeshFaceMaterial ? a.material.materials[b.materialIndex] : a.material
        }

        function j(a) {
            return a && void 0 !== a.shading && a.shading === THREE.SmoothShading
        }

        function k(a, b) {
            var c, d, e, f, g, h, i, j, k, l, m, n = a.vertices,
                o = n.length,
                p = a.colors,
                q = p.length,
                r = a.__vertexArray,
                s = a.__colorArray,
                t = (a.__sortArray, a.verticesNeedUpdate),
                u = (a.elementsNeedUpdate, a.colorsNeedUpdate),
                v = a.__webglCustomAttributesList;
            if (t) {
                for (c = 0; o > c; c++) e = n[c], f = 3 * c, r[f] = e.x, r[f + 1] = e.y, r[f + 2] = e.z;
                Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglVertexBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, r, b)
            }
            if (u) {
                for (d = 0; q > d; d++) g = p[d], f = 3 * d, s[f] = g.r, s[f + 1] = g.g, s[f + 2] = g.b;
                Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglColorBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, s, b)
            }
            if (v)
                for (h = 0, i = v.length; i > h; h++) {
                    if (m = v[h], m.needsUpdate && (void 0 === m.boundTo || "vertices" === m.boundTo))
                        if (k = m.value.length, f = 0, 1 === m.size)
                            for (j = 0; k > j; j++) m.array[j] = m.value[j];
                        else if (2 === m.size)
                        for (j = 0; k > j; j++) l = m.value[j], m.array[f] = l.x, m.array[f + 1] = l.y, f += 2;
                    else if (3 === m.size)
                        if ("c" === m.type)
                            for (j = 0; k > j; j++) l = m.value[j], m.array[f] = l.r, m.array[f + 1] = l.g, m.array[f + 2] = l.b, f += 3;
                        else
                            for (j = 0; k > j; j++) l = m.value[j], m.array[f] = l.x, m.array[f + 1] = l.y, m.array[f + 2] = l.z, f += 3;
                    else if (4 === m.size)
                        for (j = 0; k > j; j++) l = m.value[j], m.array[f] = l.x, m.array[f + 1] = l.y, m.array[f + 2] = l.z, m.array[f + 3] = l.w, f += 4;
                    Ja.bindBuffer(Ja.ARRAY_BUFFER, m.buffer), Ja.bufferData(Ja.ARRAY_BUFFER, m.array, b), m.needsUpdate = !1
                }
        }

        function l(a, b) {
            var c, d, e, f, g, h, i, j, k, l, m, n, o = a.vertices,
                p = a.colors,
                q = a.lineDistances,
                r = o.length,
                s = p.length,
                t = q.length,
                u = a.__vertexArray,
                v = a.__colorArray,
                w = a.__lineDistanceArray,
                x = a.verticesNeedUpdate,
                y = a.colorsNeedUpdate,
                z = a.lineDistancesNeedUpdate,
                A = a.__webglCustomAttributesList;
            if (x) {
                for (c = 0; r > c; c++) f = o[c], g = 3 * c, u[g] = f.x, u[g + 1] = f.y, u[g + 2] = f.z;
                Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglVertexBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, u, b)
            }
            if (y) {
                for (d = 0; s > d; d++) h = p[d], g = 3 * d, v[g] = h.r, v[g + 1] = h.g, v[g + 2] = h.b;
                Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglColorBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, v, b)
            }
            if (z) {
                for (e = 0; t > e; e++) w[e] = q[e];
                Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglLineDistanceBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, w, b)
            }
            if (A)
                for (i = 0, j = A.length; j > i; i++)
                    if (n = A[i], n.needsUpdate && (void 0 === n.boundTo || "vertices" === n.boundTo)) {
                        if (g = 0, l = n.value.length, 1 === n.size)
                            for (k = 0; l > k; k++) n.array[k] = n.value[k];
                        else if (2 === n.size)
                            for (k = 0; l > k; k++) m = n.value[k], n.array[g] = m.x, n.array[g + 1] = m.y, g += 2;
                        else if (3 === n.size)
                            if ("c" === n.type)
                                for (k = 0; l > k; k++) m = n.value[k], n.array[g] = m.r, n.array[g + 1] = m.g, n.array[g + 2] = m.b, g += 3;
                            else
                                for (k = 0; l > k; k++) m = n.value[k], n.array[g] = m.x, n.array[g + 1] = m.y, n.array[g + 2] = m.z, g += 3;
                        else if (4 === n.size)
                            for (k = 0; l > k; k++) m = n.value[k], n.array[g] = m.x, n.array[g + 1] = m.y, n.array[g + 2] = m.z, n.array[g + 3] = m.w, g += 4;
                        Ja.bindBuffer(Ja.ARRAY_BUFFER, n.buffer), Ja.bufferData(Ja.ARRAY_BUFFER, n.array, b), n.needsUpdate = !1
                    }
        }

        function m(a, b, c, d, e) {
            if (a.__inittedArrays) {
                var f, g, h, i, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S, T, U, V, W = j(e),
                    X = 0,
                    Y = 0,
                    Z = 0,
                    $ = 0,
                    _ = 0,
                    aa = 0,
                    ba = 0,
                    ca = 0,
                    da = 0,
                    ea = 0,
                    fa = 0,
                    ga = 0,
                    ha = 0,
                    ia = a.__vertexArray,
                    ja = a.__uvArray,
                    ka = a.__uv2Array,
                    la = a.__normalArray,
                    ma = a.__tangentArray,
                    na = a.__colorArray,
                    oa = a.__skinIndexArray,
                    pa = a.__skinWeightArray,
                    qa = a.__morphTargetsArrays,
                    ra = a.__morphNormalsArrays,
                    sa = a.__webglCustomAttributesList,
                    ta = a.__faceArray,
                    ua = a.__lineArray,
                    va = b.geometry,
                    wa = va.verticesNeedUpdate,
                    xa = va.elementsNeedUpdate,
                    ya = va.uvsNeedUpdate,
                    za = va.normalsNeedUpdate,
                    Aa = va.tangentsNeedUpdate,
                    Ba = va.colorsNeedUpdate,
                    Ca = va.morphTargetsNeedUpdate,
                    Da = va.vertices,
                    Ea = a.faces3,
                    Fa = va.faces,
                    Ga = va.faceVertexUvs[0],
                    Ha = va.faceVertexUvs[1],
                    Ia = (va.colors, va.skinIndices),
                    Ka = va.skinWeights,
                    La = va.morphTargets,
                    Ma = va.morphNormals;
                if (wa) {
                    for (f = 0, g = Ea.length; g > f; f++) i = Fa[Ea[f]], r = Da[i.a], s = Da[i.b], t = Da[i.c], ia[Y] = r.x, ia[Y + 1] = r.y, ia[Y + 2] = r.z, ia[Y + 3] = s.x, ia[Y + 4] = s.y, ia[Y + 5] = s.z, ia[Y + 6] = t.x, ia[Y + 7] = t.y, ia[Y + 8] = t.z, Y += 9;
                    Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglVertexBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, ia, c)
                }
                if (Ca)
                    for (O = 0, P = La.length; P > O; O++) {
                        for (fa = 0, f = 0, g = Ea.length; g > f; f++) S = Ea[f], i = Fa[S], r = La[O].vertices[i.a], s = La[O].vertices[i.b], t = La[O].vertices[i.c], Q = qa[O], Q[fa] = r.x, Q[fa + 1] = r.y, Q[fa + 2] = r.z, Q[fa + 3] = s.x, Q[fa + 4] = s.y, Q[fa + 5] = s.z, Q[fa + 6] = t.x, Q[fa + 7] = t.y, Q[fa + 8] = t.z, e.morphNormals && (W ? (T = Ma[O].vertexNormals[S], x = T.a, y = T.b, z = T.c) : (x = Ma[O].faceNormals[S], y = x, z = x), R = ra[O], R[fa] = x.x, R[fa + 1] = x.y, R[fa + 2] = x.z, R[fa + 3] = y.x, R[fa + 4] = y.y, R[fa + 5] = y.z, R[fa + 6] = z.x, R[fa + 7] = z.y, R[fa + 8] = z.z), fa += 9;
                        Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglMorphTargetsBuffers[O]), Ja.bufferData(Ja.ARRAY_BUFFER, qa[O], c), e.morphNormals && (Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglMorphNormalsBuffers[O]), Ja.bufferData(Ja.ARRAY_BUFFER, ra[O], c))
                    }
                if (Ka.length) {
                    for (f = 0, g = Ea.length; g > f; f++) i = Fa[Ea[f]], D = Ka[i.a], E = Ka[i.b], F = Ka[i.c], pa[ea] = D.x, pa[ea + 1] = D.y, pa[ea + 2] = D.z, pa[ea + 3] = D.w, pa[ea + 4] = E.x, pa[ea + 5] = E.y, pa[ea + 6] = E.z, pa[ea + 7] = E.w, pa[ea + 8] = F.x, pa[ea + 9] = F.y, pa[ea + 10] = F.z, pa[ea + 11] = F.w, G = Ia[i.a], H = Ia[i.b], I = Ia[i.c], oa[ea] = G.x, oa[ea + 1] = G.y, oa[ea + 2] = G.z, oa[ea + 3] = G.w, oa[ea + 4] = H.x, oa[ea + 5] = H.y, oa[ea + 6] = H.z, oa[ea + 7] = H.w, oa[ea + 8] = I.x, oa[ea + 9] = I.y, oa[ea + 10] = I.z, oa[ea + 11] = I.w, ea += 12;
                    ea > 0 && (Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglSkinIndicesBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, oa, c), Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglSkinWeightsBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, pa, c))
                }
                if (Ba) {
                    for (f = 0, g = Ea.length; g > f; f++) i = Fa[Ea[f]], m = i.vertexColors, n = i.color, 3 === m.length && e.vertexColors === THREE.VertexColors ? (A = m[0], B = m[1], C = m[2]) : (A = n, B = n, C = n), na[da] = A.r, na[da + 1] = A.g, na[da + 2] = A.b, na[da + 3] = B.r, na[da + 4] = B.g, na[da + 5] = B.b, na[da + 6] = C.r, na[da + 7] = C.g, na[da + 8] = C.b, da += 9;
                    da > 0 && (Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglColorBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, na, c))
                }
                if (Aa && va.hasTangents) {
                    for (f = 0, g = Ea.length; g > f; f++) i = Fa[Ea[f]], o = i.vertexTangents, u = o[0], v = o[1], w = o[2], ma[ba] = u.x, ma[ba + 1] = u.y, ma[ba + 2] = u.z, ma[ba + 3] = u.w, ma[ba + 4] = v.x, ma[ba + 5] = v.y, ma[ba + 6] = v.z, ma[ba + 7] = v.w, ma[ba + 8] = w.x, ma[ba + 9] = w.y, ma[ba + 10] = w.z, ma[ba + 11] = w.w, ba += 12;
                    Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglTangentBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, ma, c)
                }
                if (za) {
                    for (f = 0, g = Ea.length; g > f; f++)
                        if (i = Fa[Ea[f]], k = i.vertexNormals, l = i.normal, 3 === k.length && W)
                            for (J = 0; 3 > J; J++) L = k[J], la[aa] = L.x, la[aa + 1] = L.y, la[aa + 2] = L.z, aa += 3;
                        else
                            for (J = 0; 3 > J; J++) la[aa] = l.x, la[aa + 1] = l.y, la[aa + 2] = l.z, aa += 3;
                    Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglNormalBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, la, c)
                }
                if (ya && Ga) {
                    for (f = 0, g = Ea.length; g > f; f++)
                        if (h = Ea[f], p = Ga[h], void 0 !== p)
                            for (J = 0; 3 > J; J++) M = p[J], ja[Z] = M.x, ja[Z + 1] = M.y, Z += 2;
                    Z > 0 && (Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglUVBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, ja, c))
                }
                if (ya && Ha) {
                    for (f = 0, g = Ea.length; g > f; f++)
                        if (h = Ea[f], q = Ha[h], void 0 !== q)
                            for (J = 0; 3 > J; J++) N = q[J], ka[$] = N.x, ka[$ + 1] = N.y, $ += 2;
                    $ > 0 && (Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglUV2Buffer), Ja.bufferData(Ja.ARRAY_BUFFER, ka, c))
                }
                if (xa) {
                    for (f = 0, g = Ea.length; g > f; f++) ta[_] = X, ta[_ + 1] = X + 1, ta[_ + 2] = X + 2, _ += 3, ua[ca] = X, ua[ca + 1] = X + 1, ua[ca + 2] = X, ua[ca + 3] = X + 2, ua[ca + 4] = X + 1, ua[ca + 5] = X + 2, ca += 6, X += 3;
                    Ja.bindBuffer(Ja.ELEMENT_ARRAY_BUFFER, a.__webglFaceBuffer), Ja.bufferData(Ja.ELEMENT_ARRAY_BUFFER, ta, c), Ja.bindBuffer(Ja.ELEMENT_ARRAY_BUFFER, a.__webglLineBuffer), Ja.bufferData(Ja.ELEMENT_ARRAY_BUFFER, ua, c)
                }
                if (sa)
                    for (J = 0, K = sa.length; K > J; J++)
                        if (V = sa[J], V.__original.needsUpdate) {
                            if (ga = 0, ha = 0, 1 === V.size) {
                                if (void 0 === V.boundTo || "vertices" === V.boundTo)
                                    for (f = 0, g = Ea.length; g > f; f++) i = Fa[Ea[f]], V.array[ga] = V.value[i.a], V.array[ga + 1] = V.value[i.b], V.array[ga + 2] = V.value[i.c], ga += 3;
                                else if ("faces" === V.boundTo)
                                    for (f = 0, g = Ea.length; g > f; f++) U = V.value[Ea[f]], V.array[ga] = U, V.array[ga + 1] = U, V.array[ga + 2] = U, ga += 3
                            } else if (2 === V.size) {
                                if (void 0 === V.boundTo || "vertices" === V.boundTo)
                                    for (f = 0, g = Ea.length; g > f; f++) i = Fa[Ea[f]], r = V.value[i.a], s = V.value[i.b], t = V.value[i.c], V.array[ga] = r.x, V.array[ga + 1] = r.y, V.array[ga + 2] = s.x, V.array[ga + 3] = s.y, V.array[ga + 4] = t.x, V.array[ga + 5] = t.y, ga += 6;
                                else if ("faces" === V.boundTo)
                                    for (f = 0, g = Ea.length; g > f; f++) U = V.value[Ea[f]], r = U, s = U, t = U, V.array[ga] = r.x, V.array[ga + 1] = r.y, V.array[ga + 2] = s.x, V.array[ga + 3] = s.y, V.array[ga + 4] = t.x, V.array[ga + 5] = t.y, ga += 6
                            } else if (3 === V.size) {
                                var Na;
                                if (Na = "c" === V.type ? ["r", "g", "b"] : ["x", "y", "z"], void 0 === V.boundTo || "vertices" === V.boundTo)
                                    for (f = 0, g = Ea.length; g > f; f++) i = Fa[Ea[f]], r = V.value[i.a], s = V.value[i.b], t = V.value[i.c], V.array[ga] = r[Na[0]], V.array[ga + 1] = r[Na[1]], V.array[ga + 2] = r[Na[2]], V.array[ga + 3] = s[Na[0]], V.array[ga + 4] = s[Na[1]], V.array[ga + 5] = s[Na[2]], V.array[ga + 6] = t[Na[0]], V.array[ga + 7] = t[Na[1]], V.array[ga + 8] = t[Na[2]], ga += 9;
                                else if ("faces" === V.boundTo)
                                    for (f = 0, g = Ea.length; g > f; f++) U = V.value[Ea[f]], r = U, s = U, t = U, V.array[ga] = r[Na[0]], V.array[ga + 1] = r[Na[1]], V.array[ga + 2] = r[Na[2]], V.array[ga + 3] = s[Na[0]], V.array[ga + 4] = s[Na[1]], V.array[ga + 5] = s[Na[2]], V.array[ga + 6] = t[Na[0]], V.array[ga + 7] = t[Na[1]], V.array[ga + 8] = t[Na[2]], ga += 9;
                                else if ("faceVertices" === V.boundTo)
                                    for (f = 0, g = Ea.length; g > f; f++) U = V.value[Ea[f]], r = U[0], s = U[1], t = U[2], V.array[ga] = r[Na[0]], V.array[ga + 1] = r[Na[1]], V.array[ga + 2] = r[Na[2]], V.array[ga + 3] = s[Na[0]], V.array[ga + 4] = s[Na[1]], V.array[ga + 5] = s[Na[2]], V.array[ga + 6] = t[Na[0]], V.array[ga + 7] = t[Na[1]], V.array[ga + 8] = t[Na[2]], ga += 9
                            } else if (4 === V.size)
                                if (void 0 === V.boundTo || "vertices" === V.boundTo)
                                    for (f = 0, g = Ea.length; g > f; f++) i = Fa[Ea[f]], r = V.value[i.a], s = V.value[i.b], t = V.value[i.c], V.array[ga] = r.x, V.array[ga + 1] = r.y, V.array[ga + 2] = r.z, V.array[ga + 3] = r.w, V.array[ga + 4] = s.x, V.array[ga + 5] = s.y, V.array[ga + 6] = s.z, V.array[ga + 7] = s.w, V.array[ga + 8] = t.x, V.array[ga + 9] = t.y, V.array[ga + 10] = t.z, V.array[ga + 11] = t.w, ga += 12;
                                else if ("faces" === V.boundTo)
                                for (f = 0, g = Ea.length; g > f; f++) U = V.value[Ea[f]], r = U, s = U, t = U, V.array[ga] = r.x, V.array[ga + 1] = r.y, V.array[ga + 2] = r.z, V.array[ga + 3] = r.w, V.array[ga + 4] = s.x, V.array[ga + 5] = s.y, V.array[ga + 6] = s.z, V.array[ga + 7] = s.w, V.array[ga + 8] = t.x, V.array[ga + 9] = t.y, V.array[ga + 10] = t.z, V.array[ga + 11] = t.w, ga += 12;
                            else if ("faceVertices" === V.boundTo)
                                for (f = 0, g = Ea.length; g > f; f++) U = V.value[Ea[f]], r = U[0], s = U[1], t = U[2], V.array[ga] = r.x, V.array[ga + 1] = r.y, V.array[ga + 2] = r.z, V.array[ga + 3] = r.w, V.array[ga + 4] = s.x, V.array[ga + 5] = s.y, V.array[ga + 6] = s.z, V.array[ga + 7] = s.w, V.array[ga + 8] = t.x, V.array[ga + 9] = t.y, V.array[ga + 10] = t.z, V.array[ga + 11] = t.w, ga += 12;
                            Ja.bindBuffer(Ja.ARRAY_BUFFER, V.buffer), Ja.bufferData(Ja.ARRAY_BUFFER, V.array, c)
                        }
                d && (delete a.__inittedArrays, delete a.__colorArray, delete a.__normalArray, delete a.__tangentArray, delete a.__uvArray, delete a.__uv2Array, delete a.__faceArray, delete a.__vertexArray, delete a.__lineArray, delete a.__skinIndexArray, delete a.__skinWeightArray)
            }
        }

        function n(a, b, c, d) {
            for (var e = c.attributes, f = b.attributes, g = b.attributesKeys, h = 0, i = g.length; i > h; h++) {
                var j = g[h],
                    k = f[j];
                if (k >= 0) {
                    var l = e[j];
                    if (void 0 !== l) {
                        var m = l.itemSize;
                        Ja.bindBuffer(Ja.ARRAY_BUFFER, l.buffer), p(k), Ja.vertexAttribPointer(k, m, Ja.FLOAT, !1, 0, d * m * 4)
                    } else void 0 !== a.defaultAttributeValues && (2 === a.defaultAttributeValues[j].length ? Ja.vertexAttrib2fv(k, a.defaultAttributeValues[j]) : 3 === a.defaultAttributeValues[j].length && Ja.vertexAttrib3fv(k, a.defaultAttributeValues[j]))
                }
            }
            q()
        }

        function o() {
            for (var a = 0, b = ib.length; b > a; a++) ib[a] = 0
        }

        function p(a) {
            ib[a] = 1, 0 === jb[a] && (Ja.enableVertexAttribArray(a), jb[a] = 1)
        }

        function q() {
            for (var a = 0, b = jb.length; b > a; a++) jb[a] !== ib[a] && (Ja.disableVertexAttribArray(a), jb[a] = 0)
        }

        function r(a, b, c) {
            var d = a.program.attributes;
            if (-1 !== c.morphTargetBase && d.position >= 0 ? (Ja.bindBuffer(Ja.ARRAY_BUFFER, b.__webglMorphTargetsBuffers[c.morphTargetBase]), p(d.position), Ja.vertexAttribPointer(d.position, 3, Ja.FLOAT, !1, 0, 0)) : d.position >= 0 && (Ja.bindBuffer(Ja.ARRAY_BUFFER, b.__webglVertexBuffer), p(d.position), Ja.vertexAttribPointer(d.position, 3, Ja.FLOAT, !1, 0, 0)), c.morphTargetForcedOrder.length)
                for (var e, f = 0, g = c.morphTargetForcedOrder, h = c.morphTargetInfluences; f < a.numSupportedMorphTargets && f < g.length;) e = d["morphTarget" + f], e >= 0 && (Ja.bindBuffer(Ja.ARRAY_BUFFER, b.__webglMorphTargetsBuffers[g[f]]), p(e), Ja.vertexAttribPointer(e, 3, Ja.FLOAT, !1, 0, 0)), e = d["morphNormal" + f], e >= 0 && a.morphNormals && (Ja.bindBuffer(Ja.ARRAY_BUFFER, b.__webglMorphNormalsBuffers[g[f]]), p(e), Ja.vertexAttribPointer(e, 3, Ja.FLOAT, !1, 0, 0)), c.__webglMorphTargetInfluences[f] = h[g[f]], f++;
            else {
                for (var i = [], h = c.morphTargetInfluences, j = 0, k = h.length; k > j; j++) {
                    var l = h[j];
                    i.push([l, j])
                }
                i.length > a.numSupportedMorphTargets ? (i.sort(u), i.length = a.numSupportedMorphTargets) : i.length > a.numSupportedMorphNormals ? i.sort(u) : 0 === i.length && i.push([0, 0]);
                for (var e, f = 0, m = a.numSupportedMorphTargets; m > f; f++)
                    if (i[f]) {
                        var n = i[f][1];
                        e = d["morphTarget" + f], e >= 0 && (Ja.bindBuffer(Ja.ARRAY_BUFFER, b.__webglMorphTargetsBuffers[n]), p(e), Ja.vertexAttribPointer(e, 3, Ja.FLOAT, !1, 0, 0)), e = d["morphNormal" + f], e >= 0 && a.morphNormals && (Ja.bindBuffer(Ja.ARRAY_BUFFER, b.__webglMorphNormalsBuffers[n]), p(e), Ja.vertexAttribPointer(e, 3, Ja.FLOAT, !1, 0, 0)), c.__webglMorphTargetInfluences[f] = h[n]
                    } else c.__webglMorphTargetInfluences[f] = 0
            }
            null !== a.program.uniforms.morphTargetInfluences && Ja.uniform1fv(a.program.uniforms.morphTargetInfluences, c.__webglMorphTargetInfluences)
        }

        function s(a, b) {
            return a.material.id !== b.material.id ? a.material.id - b.material.id : a.z !== b.z ? a.z - b.z : a.id - b.id
        }

        function t(a, b) {
            return a.z !== b.z ? b.z - a.z : a.id - b.id
        }

        function u(a, b) {
            return b[0] - a[0]
        }

        function v(a) {
            if (a.visible !== !1) {
                if (a instanceof THREE.Scene || a instanceof THREE.Group);
                else if (A(a), a instanceof THREE.Light) Ca.push(a);
                else if (a instanceof THREE.Sprite) Ha.push(a);
                else if (a instanceof THREE.LensFlare) Ia.push(a);
                else {
                    var b = Da[a.id];
                    if (b && (a.frustumCulled === !1 || kb.intersectsObject(a) === !0))
                        for (var c = 0, d = b.length; d > c; c++) {
                            var e = b[c];
                            z(e), e.render = !0, Ka.sortObjects === !0 && (mb.setFromMatrixPosition(a.matrixWorld), mb.applyProjection(lb), e.z = mb.z)
                        }
                }
                for (var c = 0, d = a.children.length; d > c; c++) v(a.children[c])
            }
        }

        function w(a, b, c, d, e, f) {
            for (var g, h = 0, i = a.length; i > h; h++) {
                var j = a[h],
                    k = j.object,
                    l = j.buffer;
                if (Z(k, b), f) g = f;
                else {
                    if (g = j.material, !g) continue;
                    e && Ka.setBlending(g.blending, g.blendEquation, g.blendSrc, g.blendDst), Ka.setDepthTest(g.depthTest), Ka.setDepthWrite(g.depthWrite), ca(g.polygonOffset, g.polygonOffsetFactor, g.polygonOffsetUnits)
                }
                Ka.setMaterialFaces(g), l instanceof THREE.BufferGeometry ? Ka.renderBufferDirect(b, c, d, g, l, k) : Ka.renderBuffer(b, c, d, g, l, k)
            }
        }

        function x(a, b, c, d, e, f, g) {
            for (var h, i = 0, j = a.length; j > i; i++) {
                var k = a[i],
                    l = k.object;
                if (l.visible) {
                    if (g) h = g;
                    else {
                        if (h = k[b], !h) continue;
                        f && Ka.setBlending(h.blending, h.blendEquation, h.blendSrc, h.blendDst), Ka.setDepthTest(h.depthTest), Ka.setDepthWrite(h.depthWrite), ca(h.polygonOffset, h.polygonOffsetFactor, h.polygonOffsetUnits)
                    }
                    Ka.renderImmediateObject(c, d, e, h, l)
                }
            }
        }

        function y(a) {
            var b = a.object,
                c = b.material;
            c.transparent ? (a.transparent = c, a.opaque = null) : (a.opaque = c, a.transparent = null)
        }

        function z(a) {
            var b = a.object,
                c = a.buffer,
                d = b.geometry,
                e = b.material;
            if (e instanceof THREE.MeshFaceMaterial) {
                var f = d instanceof THREE.BufferGeometry ? 0 : c.materialIndex;
                e = e.materials[f], a.material = e, e.transparent ? Ga.push(a) : Fa.push(a)
            } else e && (a.material = e, e.transparent ? Ga.push(a) : Fa.push(a))
        }

        function A(a) {
            void 0 === a.__webglInit && (a.__webglInit = !0, a._modelViewMatrix = new THREE.Matrix4, a._normalMatrix = new THREE.Matrix3, a.addEventListener("removed", Lb));
            var d = a.geometry;
            if (void 0 === d || void 0 === d.__webglInit && (d.__webglInit = !0, d.addEventListener("dispose", Mb), d instanceof THREE.BufferGeometry ? Ka.info.memory.geometries++ : a instanceof THREE.Mesh ? C(a, d) : a instanceof THREE.Line ? void 0 === d.__webglVertexBuffer && (c(d), g(d, a), d.verticesNeedUpdate = !0, d.colorsNeedUpdate = !0, d.lineDistancesNeedUpdate = !0) : a instanceof THREE.PointCloud && void 0 === d.__webglVertexBuffer && (b(d), f(d, a), d.verticesNeedUpdate = !0, d.colorsNeedUpdate = !0)), void 0 === a.__webglActive)
                if (a.__webglActive = !0, a instanceof THREE.Mesh) {
                    if (d instanceof THREE.BufferGeometry) D(Da, d, a);
                    else if (d instanceof THREE.Geometry)
                        for (var e = Vb[d.id], h = 0, i = e.length; i > h; h++) D(Da, e[h], a)
                } else a instanceof THREE.Line || a instanceof THREE.PointCloud ? D(Da, d, a) : (a instanceof THREE.ImmediateRenderObject || a.immediateRenderCallback) && E(Ea, a)
        }

        function B(a, b) {
            for (var c, d, e = sb.get("OES_element_index_uint") ? 4294967296 : 65535, f = {}, g = a.morphTargets.length, h = a.morphNormals.length, i = {}, j = [], k = 0, l = a.faces.length; l > k; k++) {
                var m = a.faces[k],
                    n = b ? m.materialIndex : 0;
                n in f || (f[n] = {
                    hash: n,
                    counter: 0
                }), c = f[n].hash + "_" + f[n].counter, c in i || (d = {
                    id: Wb++,
                    faces3: [],
                    materialIndex: n,
                    vertices: 0,
                    numMorphTargets: g,
                    numMorphNormals: h
                }, i[c] = d, j.push(d)), i[c].vertices + 3 > e && (f[n].counter += 1, c = f[n].hash + "_" + f[n].counter, c in i || (d = {
                    id: Wb++,
                    faces3: [],
                    materialIndex: n,
                    vertices: 0,
                    numMorphTargets: g,
                    numMorphNormals: h
                }, i[c] = d, j.push(d))), i[c].faces3.push(k), i[c].vertices += 3
            }
            return j
        }

        function C(a, b) {
            var c = a.material,
                e = !1;
            (void 0 === Vb[b.id] || b.groupsNeedUpdate === !0) && (delete Da[a.id], Vb[b.id] = B(b, c instanceof THREE.MeshFaceMaterial), b.groupsNeedUpdate = !1);
            for (var f = Vb[b.id], g = 0, i = f.length; i > g; g++) {
                var j = f[g];
                void 0 === j.__webglVertexBuffer ? (d(j), h(j, a), b.verticesNeedUpdate = !0, b.morphTargetsNeedUpdate = !0, b.elementsNeedUpdate = !0, b.uvsNeedUpdate = !0, b.normalsNeedUpdate = !0, b.tangentsNeedUpdate = !0, b.colorsNeedUpdate = !0, e = !0) : e = !1, (e || void 0 === a.__webglActive) && D(Da, j, a)
            }
            a.__webglActive = !0
        }

        function D(a, b, c) {
            var d = c.id;
            a[d] = a[d] || [], a[d].push({
                id: d,
                buffer: b,
                object: c,
                material: null,
                z: 0
            })
        }

        function E(a, b) {
            a.push({
                id: null,
                object: b,
                opaque: null,
                transparent: null,
                z: 0
            })
        }

        function F(a) {
            var b = a.geometry;
            if (b instanceof THREE.BufferGeometry)
                for (var c = b.attributes, d = b.attributesKeys, e = 0, f = d.length; f > e; e++) {
                    var g = d[e],
                        j = c[g];
                    if (void 0 === j.buffer && (j.buffer = Ja.createBuffer(), j.needsUpdate = !0), j.needsUpdate === !0) {
                        var n = "index" === g ? Ja.ELEMENT_ARRAY_BUFFER : Ja.ARRAY_BUFFER;
                        Ja.bindBuffer(n, j.buffer), Ja.bufferData(n, j.array, Ja.STATIC_DRAW), j.needsUpdate = !1
                    }
                } else if (a instanceof THREE.Mesh) {
                    b.groupsNeedUpdate === !0 && C(a, b);
                    for (var o = Vb[b.id], e = 0, p = o.length; p > e; e++) {
                        var q = o[e],
                            r = i(a, q);
                        b.groupsNeedUpdate === !0 && h(q, a);
                        var s = r.attributes && G(r);
                        (b.verticesNeedUpdate || b.morphTargetsNeedUpdate || b.elementsNeedUpdate || b.uvsNeedUpdate || b.normalsNeedUpdate || b.colorsNeedUpdate || b.tangentsNeedUpdate || s) && m(q, a, Ja.DYNAMIC_DRAW, !b.dynamic, r)
                    }
                    b.verticesNeedUpdate = !1, b.morphTargetsNeedUpdate = !1, b.elementsNeedUpdate = !1, b.uvsNeedUpdate = !1, b.normalsNeedUpdate = !1, b.colorsNeedUpdate = !1, b.tangentsNeedUpdate = !1, r.attributes && H(r)
                } else if (a instanceof THREE.Line) {
                var r = i(a, b),
                    s = r.attributes && G(r);
                (b.verticesNeedUpdate || b.colorsNeedUpdate || b.lineDistancesNeedUpdate || s) && l(b, Ja.DYNAMIC_DRAW), b.verticesNeedUpdate = !1, b.colorsNeedUpdate = !1, b.lineDistancesNeedUpdate = !1, r.attributes && H(r)
            } else if (a instanceof THREE.PointCloud) {
                var r = i(a, b),
                    s = r.attributes && G(r);
                (b.verticesNeedUpdate || b.colorsNeedUpdate || s) && k(b, Ja.DYNAMIC_DRAW, a), b.verticesNeedUpdate = !1, b.colorsNeedUpdate = !1, r.attributes && H(r)
            }
        }

        function G(a) {
            for (var b in a.attributes)
                if (a.attributes[b].needsUpdate) return !0;
            return !1
        }

        function H(a) {
            for (var b in a.attributes) a.attributes[b].needsUpdate = !1
        }

        function I(a) {
            a instanceof THREE.Mesh || a instanceof THREE.PointCloud || a instanceof THREE.Line ? delete Da[a.id] : (a instanceof THREE.ImmediateRenderObject || a.immediateRenderCallback) && J(Ea, a), delete a.__webglInit, delete a._modelViewMatrix, delete a._normalMatrix, delete a.__webglActive
        }

        function J(a, b) {
            for (var c = a.length - 1; c >= 0; c--) a[c].object === b && a.splice(c, 1)
        }

        function K(a, b, c, d) {
            a.addEventListener("dispose", Pb);
            var e = Xb[a.type];
            if (e) {
                var f = THREE.ShaderLib[e];
                a.__webglShader = {
                    uniforms: THREE.UniformsUtils.clone(f.uniforms),
                    vertexShader: f.vertexShader,
                    fragmentShader: f.fragmentShader
                }
            } else a.__webglShader = {
                uniforms: a.uniforms,
                vertexShader: a.vertexShader,
                fragmentShader: a.fragmentShader
            };
            var g = na(b),
                h = oa(b),
                i = ma(d),
                j = {
                    precision: sa,
                    supportsVertexTextures: zb,
                    map: !!a.map,
                    envMap: !!a.envMap,
                    envMapMode: a.envMap && a.envMap.mapping,
                    lightMap: !!a.lightMap,
                    bumpMap: !!a.bumpMap,
                    normalMap: !!a.normalMap,
                    specularMap: !!a.specularMap,
                    alphaMap: !!a.alphaMap,
                    combine: a.combine,
                    vertexColors: a.vertexColors,
                    fog: c,
                    useFog: a.fog,
                    fogExp: c instanceof THREE.FogExp2,
                    sizeAttenuation: a.sizeAttenuation,
                    logarithmicDepthBuffer: za,
                    skinning: a.skinning,
                    maxBones: i,
                    useVertexTexture: Ab && d && d.skeleton && d.skeleton.useVertexTexture,
                    morphTargets: a.morphTargets,
                    morphNormals: a.morphNormals,
                    maxMorphTargets: Ka.maxMorphTargets,
                    maxMorphNormals: Ka.maxMorphNormals,
                    maxDirLights: g.directional,
                    maxPointLights: g.point,
                    maxSpotLights: g.spot,
                    maxHemiLights: g.hemi,
                    maxShadows: h,
                    shadowMapEnabled: Ka.shadowMapEnabled && d.receiveShadow && h > 0,
                    shadowMapType: Ka.shadowMapType,
                    shadowMapDebug: Ka.shadowMapDebug,
                    shadowMapCascade: Ka.shadowMapCascade,
                    alphaTest: a.alphaTest,
                    metal: a.metal,
                    wrapAround: a.wrapAround,
                    doubleSided: a.side === THREE.DoubleSide,
                    flipSided: a.side === THREE.BackSide
                },
                k = [];
            if (e ? k.push(e) : (k.push(a.fragmentShader), k.push(a.vertexShader)), void 0 !== a.defines)
                for (var l in a.defines) k.push(l), k.push(a.defines[l]);
            for (var l in j) k.push(l), k.push(j[l]);
            for (var m, n = k.join(), o = 0, p = La.length; p > o; o++) {
                var q = La[o];
                if (q.code === n) {
                    m = q, m.usedTimes++;
                    break
                }
            }
            void 0 === m && (m = new THREE.WebGLProgram(Ka, n, a, j), La.push(m), Ka.info.memory.programs = La.length), a.program = m;
            var r = m.attributes;
            if (a.morphTargets) {
                a.numSupportedMorphTargets = 0;
                for (var s, t = "morphTarget", u = 0; u < Ka.maxMorphTargets; u++) s = t + u, r[s] >= 0 && a.numSupportedMorphTargets++
            }
            if (a.morphNormals) {
                a.numSupportedMorphNormals = 0;
                var s, t = "morphNormal";
                for (u = 0; u < Ka.maxMorphNormals; u++) s = t + u, r[s] >= 0 && a.numSupportedMorphNormals++
            }
            a.uniformsList = [];
            for (var v in a.__webglShader.uniforms) {
                var w = a.program.uniforms[v];
                w && a.uniformsList.push([a.__webglShader.uniforms[v], w]);

            }
        }

        function L(a, b, c, d, e) {
            Ra = 0, d.needsUpdate && (d.program && Ub(d), K(d, b, c, e), d.needsUpdate = !1), d.morphTargets && (e.__webglMorphTargetInfluences || (e.__webglMorphTargetInfluences = new Float32Array(Ka.maxMorphTargets)));
            var f = !1,
                g = !1,
                h = !1,
                i = d.program,
                j = i.uniforms,
                k = d.__webglShader.uniforms;
            if (i.id !== Ma && (Ja.useProgram(i.program), Ma = i.id, f = !0, g = !0, h = !0), d.id !== Oa && (-1 === Oa && (h = !0), Oa = d.id, g = !0), (f || a !== Qa) && (Ja.uniformMatrix4fv(j.projectionMatrix, !1, a.projectionMatrix.elements), za && Ja.uniform1f(j.logDepthBufFC, 2 / (Math.log(a.far + 1) / Math.LN2)), a !== Qa && (Qa = a), (d instanceof THREE.ShaderMaterial || d instanceof THREE.MeshPhongMaterial || d.envMap) && null !== j.cameraPosition && (mb.setFromMatrixPosition(a.matrixWorld), Ja.uniform3f(j.cameraPosition, mb.x, mb.y, mb.z)), (d instanceof THREE.MeshPhongMaterial || d instanceof THREE.MeshLambertMaterial || d instanceof THREE.MeshBasicMaterial || d instanceof THREE.ShaderMaterial || d.skinning) && null !== j.viewMatrix && Ja.uniformMatrix4fv(j.viewMatrix, !1, a.matrixWorldInverse.elements)), d.skinning)
                if (e.bindMatrix && null !== j.bindMatrix && Ja.uniformMatrix4fv(j.bindMatrix, !1, e.bindMatrix.elements), e.bindMatrixInverse && null !== j.bindMatrixInverse && Ja.uniformMatrix4fv(j.bindMatrixInverse, !1, e.bindMatrixInverse.elements), Ab && e.skeleton && e.skeleton.useVertexTexture) {
                    if (null !== j.boneTexture) {
                        var l = X();
                        Ja.uniform1i(j.boneTexture, l), Ka.setTexture(e.skeleton.boneTexture, l)
                    }
                    null !== j.boneTextureWidth && Ja.uniform1i(j.boneTextureWidth, e.skeleton.boneTextureWidth), null !== j.boneTextureHeight && Ja.uniform1i(j.boneTextureHeight, e.skeleton.boneTextureHeight)
                } else e.skeleton && e.skeleton.boneMatrices && null !== j.boneGlobalMatrices && Ja.uniformMatrix4fv(j.boneGlobalMatrices, !1, e.skeleton.boneMatrices);
            return g && (c && d.fog && Q(k, c), (d instanceof THREE.MeshPhongMaterial || d instanceof THREE.MeshLambertMaterial || d.lights) && (ob && (h = !0, aa(b), ob = !1), h ? (T(k, pb), U(k, !0)) : U(k, !1)), (d instanceof THREE.MeshBasicMaterial || d instanceof THREE.MeshLambertMaterial || d instanceof THREE.MeshPhongMaterial) && M(k, d), d instanceof THREE.LineBasicMaterial ? N(k, d) : d instanceof THREE.LineDashedMaterial ? (N(k, d), O(k, d)) : d instanceof THREE.PointCloudMaterial ? P(k, d) : d instanceof THREE.MeshPhongMaterial ? R(k, d) : d instanceof THREE.MeshLambertMaterial ? S(k, d) : d instanceof THREE.MeshDepthMaterial ? (k.mNear.value = a.near, k.mFar.value = a.far, k.opacity.value = d.opacity) : d instanceof THREE.MeshNormalMaterial && (k.opacity.value = d.opacity), e.receiveShadow && !d._shadowPass && V(k, b), Y(d.uniformsList)), W(j, e), null !== j.modelMatrix && Ja.uniformMatrix4fv(j.modelMatrix, !1, e.matrixWorld.elements), i
        }

        function M(a, b) {
            a.opacity.value = b.opacity, Ka.gammaInput ? a.diffuse.value.copyGammaToLinear(b.color) : a.diffuse.value = b.color, a.map.value = b.map, a.lightMap.value = b.lightMap, a.specularMap.value = b.specularMap, a.alphaMap.value = b.alphaMap, b.bumpMap && (a.bumpMap.value = b.bumpMap, a.bumpScale.value = b.bumpScale), b.normalMap && (a.normalMap.value = b.normalMap, a.normalScale.value.copy(b.normalScale));
            var c;
            if (b.map ? c = b.map : b.specularMap ? c = b.specularMap : b.normalMap ? c = b.normalMap : b.bumpMap ? c = b.bumpMap : b.alphaMap && (c = b.alphaMap), void 0 !== c) {
                var d = c.offset,
                    e = c.repeat;
                a.offsetRepeat.value.set(d.x, d.y, e.x, e.y)
            }
            a.envMap.value = b.envMap, a.flipEnvMap.value = b.envMap instanceof THREE.WebGLRenderTargetCube ? 1 : -1, a.reflectivity.value = Ka.gammaInput ? b.reflectivity : b.reflectivity, a.refractionRatio.value = b.refractionRatio
        }

        function N(a, b) {
            a.diffuse.value = b.color, a.opacity.value = b.opacity
        }

        function O(a, b) {
            a.dashSize.value = b.dashSize, a.totalSize.value = b.dashSize + b.gapSize, a.scale.value = b.scale
        }

        function P(a, b) {
            a.psColor.value = b.color, a.opacity.value = b.opacity, a.size.value = b.size, a.scale.value = pa.height / 2, a.map.value = b.map
        }

        function Q(a, b) {
            a.fogColor.value = b.color, b instanceof THREE.Fog ? (a.fogNear.value = b.near, a.fogFar.value = b.far) : b instanceof THREE.FogExp2 && (a.fogDensity.value = b.density)
        }

        function R(a, b) {
            a.shininess.value = b.shininess, Ka.gammaInput ? (a.ambient.value.copyGammaToLinear(b.ambient), a.emissive.value.copyGammaToLinear(b.emissive), a.specular.value.copyGammaToLinear(b.specular)) : (a.ambient.value = b.ambient, a.emissive.value = b.emissive, a.specular.value = b.specular), b.wrapAround && a.wrapRGB.value.copy(b.wrapRGB)
        }

        function S(a, b) {
            Ka.gammaInput ? (a.ambient.value.copyGammaToLinear(b.ambient), a.emissive.value.copyGammaToLinear(b.emissive)) : (a.ambient.value = b.ambient, a.emissive.value = b.emissive), b.wrapAround && a.wrapRGB.value.copy(b.wrapRGB)
        }

        function T(a, b) {
            a.ambientLightColor.value = b.ambient, a.directionalLightColor.value = b.directional.colors, a.directionalLightDirection.value = b.directional.positions, a.pointLightColor.value = b.point.colors, a.pointLightPosition.value = b.point.positions, a.pointLightDistance.value = b.point.distances, a.spotLightColor.value = b.spot.colors, a.spotLightPosition.value = b.spot.positions, a.spotLightDistance.value = b.spot.distances, a.spotLightDirection.value = b.spot.directions, a.spotLightAngleCos.value = b.spot.anglesCos, a.spotLightExponent.value = b.spot.exponents, a.hemisphereLightSkyColor.value = b.hemi.skyColors, a.hemisphereLightGroundColor.value = b.hemi.groundColors, a.hemisphereLightDirection.value = b.hemi.positions
        }

        function U(a, b) {
            a.ambientLightColor.needsUpdate = b, a.directionalLightColor.needsUpdate = b, a.directionalLightDirection.needsUpdate = b, a.pointLightColor.needsUpdate = b, a.pointLightPosition.needsUpdate = b, a.pointLightDistance.needsUpdate = b, a.spotLightColor.needsUpdate = b, a.spotLightPosition.needsUpdate = b, a.spotLightDistance.needsUpdate = b, a.spotLightDirection.needsUpdate = b, a.spotLightAngleCos.needsUpdate = b, a.spotLightExponent.needsUpdate = b, a.hemisphereLightSkyColor.needsUpdate = b, a.hemisphereLightGroundColor.needsUpdate = b, a.hemisphereLightDirection.needsUpdate = b
        }

        function V(a, b) {
            if (a.shadowMatrix)
                for (var c = 0, d = 0, e = b.length; e > d; d++) {
                    var f = b[d];
                    f.castShadow && (f instanceof THREE.SpotLight || f instanceof THREE.DirectionalLight && !f.shadowCascade) && (a.shadowMap.value[c] = f.shadowMap, a.shadowMapSize.value[c] = f.shadowMapSize, a.shadowMatrix.value[c] = f.shadowMatrix, a.shadowDarkness.value[c] = f.shadowDarkness, a.shadowBias.value[c] = f.shadowBias, c++)
                }
        }

        function W(a, b) {
            Ja.uniformMatrix4fv(a.modelViewMatrix, !1, b._modelViewMatrix.elements), a.normalMatrix && Ja.uniformMatrix3fv(a.normalMatrix, !1, b._normalMatrix.elements)
        }

        function X() {
            var a = Ra;
            return a >= vb && console.warn("WebGLRenderer: trying to use " + a + " texture units while this GPU supports only " + vb), Ra += 1, a
        }

        function Y(a) {
            for (var b, c, d, e = 0, f = a.length; f > e; e++) {
                var g = a[e][0];
                if (g.needsUpdate !== !1) {
                    var h = g.type,
                        i = g.value,
                        j = a[e][1];
                    switch (h) {
                        case "1i":
                            Ja.uniform1i(j, i);
                            break;
                        case "1f":
                            Ja.uniform1f(j, i);
                            break;
                        case "2f":
                            Ja.uniform2f(j, i[0], i[1]);
                            break;
                        case "3f":
                            Ja.uniform3f(j, i[0], i[1], i[2]);
                            break;
                        case "4f":
                            Ja.uniform4f(j, i[0], i[1], i[2], i[3]);
                            break;
                        case "1iv":
                            Ja.uniform1iv(j, i);
                            break;
                        case "3iv":
                            Ja.uniform3iv(j, i);
                            break;
                        case "1fv":
                            Ja.uniform1fv(j, i);
                            break;
                        case "2fv":
                            Ja.uniform2fv(j, i);
                            break;
                        case "3fv":
                            Ja.uniform3fv(j, i);
                            break;
                        case "4fv":
                            Ja.uniform4fv(j, i);
                            break;
                        case "Matrix3fv":
                            Ja.uniformMatrix3fv(j, !1, i);
                            break;
                        case "Matrix4fv":
                            Ja.uniformMatrix4fv(j, !1, i);
                            break;
                        case "i":
                            Ja.uniform1i(j, i);
                            break;
                        case "f":
                            Ja.uniform1f(j, i);
                            break;
                        case "v2":
                            Ja.uniform2f(j, i.x, i.y);
                            break;
                        case "v3":
                            Ja.uniform3f(j, i.x, i.y, i.z);
                            break;
                        case "v4":
                            Ja.uniform4f(j, i.x, i.y, i.z, i.w);
                            break;
                        case "c":
                            Ja.uniform3f(j, i.r, i.g, i.b);
                            break;
                        case "iv1":
                            Ja.uniform1iv(j, i);
                            break;
                        case "iv":
                            Ja.uniform3iv(j, i);
                            break;
                        case "fv1":
                            Ja.uniform1fv(j, i);
                            break;
                        case "fv":
                            Ja.uniform3fv(j, i);
                            break;
                        case "v2v":
                            void 0 === g._array && (g._array = new Float32Array(2 * i.length));
                            for (var k = 0, l = i.length; l > k; k++) d = 2 * k, g._array[d] = i[k].x, g._array[d + 1] = i[k].y;
                            Ja.uniform2fv(j, g._array);
                            break;
                        case "v3v":
                            void 0 === g._array && (g._array = new Float32Array(3 * i.length));
                            for (var k = 0, l = i.length; l > k; k++) d = 3 * k, g._array[d] = i[k].x, g._array[d + 1] = i[k].y, g._array[d + 2] = i[k].z;
                            Ja.uniform3fv(j, g._array);
                            break;
                        case "v4v":
                            void 0 === g._array && (g._array = new Float32Array(4 * i.length));
                            for (var k = 0, l = i.length; l > k; k++) d = 4 * k, g._array[d] = i[k].x, g._array[d + 1] = i[k].y, g._array[d + 2] = i[k].z, g._array[d + 3] = i[k].w;
                            Ja.uniform4fv(j, g._array);
                            break;
                        case "m3":
                            Ja.uniformMatrix3fv(j, !1, i.elements);
                            break;
                        case "m3v":
                            void 0 === g._array && (g._array = new Float32Array(9 * i.length));
                            for (var k = 0, l = i.length; l > k; k++) i[k].flattenToArrayOffset(g._array, 9 * k);
                            Ja.uniformMatrix3fv(j, !1, g._array);
                            break;
                        case "m4":
                            Ja.uniformMatrix4fv(j, !1, i.elements);
                            break;
                        case "m4v":
                            void 0 === g._array && (g._array = new Float32Array(16 * i.length));
                            for (var k = 0, l = i.length; l > k; k++) i[k].flattenToArrayOffset(g._array, 16 * k);
                            Ja.uniformMatrix4fv(j, !1, g._array);
                            break;
                        case "t":
                            if (b = i, c = X(), Ja.uniform1i(j, c), !b) continue;
                            b instanceof THREE.CubeTexture || b.image instanceof Array && 6 === b.image.length ? fa(b, c) : b instanceof THREE.WebGLRenderTargetCube ? ga(b, c) : Ka.setTexture(b, c);
                            break;
                        case "tv":
                            void 0 === g._array && (g._array = []);
                            for (var k = 0, l = g.value.length; l > k; k++) g._array[k] = X();
                            Ja.uniform1iv(j, g._array);
                            for (var k = 0, l = g.value.length; l > k; k++) b = g.value[k], c = g._array[k], b && Ka.setTexture(b, c);
                            break;
                        default:
                            console.warn("THREE.WebGLRenderer: Unknown uniform type: " + h)
                    }
                }
            }
        }

        function Z(a, b) {
            a._modelViewMatrix.multiplyMatrices(b.matrixWorldInverse, a.matrixWorld), a._normalMatrix.getNormalMatrix(a._modelViewMatrix)
        }

        function $(a, b, c, d) {
            a[b] = c.r * c.r * d, a[b + 1] = c.g * c.g * d, a[b + 2] = c.b * c.b * d
        }

        function _(a, b, c, d) {
            a[b] = c.r * d, a[b + 1] = c.g * d, a[b + 2] = c.b * d
        }

        function aa(a) {
            var b, c, d, e, f, g, h, i, j, k = 0,
                l = 0,
                m = 0,
                n = pb,
                o = n.directional.colors,
                p = n.directional.positions,
                q = n.point.colors,
                r = n.point.positions,
                s = n.point.distances,
                t = n.spot.colors,
                u = n.spot.positions,
                v = n.spot.distances,
                w = n.spot.directions,
                x = n.spot.anglesCos,
                y = n.spot.exponents,
                z = n.hemi.skyColors,
                A = n.hemi.groundColors,
                B = n.hemi.positions,
                C = 0,
                D = 0,
                E = 0,
                F = 0,
                G = 0,
                H = 0,
                I = 0,
                J = 0,
                K = 0,
                L = 0,
                M = 0,
                N = 0;
            for (b = 0, c = a.length; c > b; b++)
                if (d = a[b], !d.onlyShadow)
                    if (e = d.color, h = d.intensity, j = d.distance, d instanceof THREE.AmbientLight) {
                        if (!d.visible) continue;
                        Ka.gammaInput ? (k += e.r * e.r, l += e.g * e.g, m += e.b * e.b) : (k += e.r, l += e.g, m += e.b)
                    } else if (d instanceof THREE.DirectionalLight) {
                if (G += 1, !d.visible) continue;
                nb.setFromMatrixPosition(d.matrixWorld), mb.setFromMatrixPosition(d.target.matrixWorld), nb.sub(mb), nb.normalize(), K = 3 * C, p[K] = nb.x, p[K + 1] = nb.y, p[K + 2] = nb.z, Ka.gammaInput ? $(o, K, e, h * h) : _(o, K, e, h), C += 1
            } else if (d instanceof THREE.PointLight) {
                if (H += 1, !d.visible) continue;
                L = 3 * D, Ka.gammaInput ? $(q, L, e, h * h) : _(q, L, e, h), mb.setFromMatrixPosition(d.matrixWorld), r[L] = mb.x, r[L + 1] = mb.y, r[L + 2] = mb.z, s[D] = j, D += 1
            } else if (d instanceof THREE.SpotLight) {
                if (I += 1, !d.visible) continue;
                M = 3 * E, Ka.gammaInput ? $(t, M, e, h * h) : _(t, M, e, h), nb.setFromMatrixPosition(d.matrixWorld), u[M] = nb.x, u[M + 1] = nb.y, u[M + 2] = nb.z, v[E] = j, mb.setFromMatrixPosition(d.target.matrixWorld), nb.sub(mb), nb.normalize(), w[M] = nb.x, w[M + 1] = nb.y, w[M + 2] = nb.z, x[E] = Math.cos(d.angle), y[E] = d.exponent, E += 1
            } else if (d instanceof THREE.HemisphereLight) {
                if (J += 1, !d.visible) continue;
                nb.setFromMatrixPosition(d.matrixWorld), nb.normalize(), N = 3 * F, B[N] = nb.x, B[N + 1] = nb.y, B[N + 2] = nb.z, f = d.color, g = d.groundColor, Ka.gammaInput ? (i = h * h, $(z, N, f, i), $(A, N, g, i)) : (_(z, N, f, h), _(A, N, g, h)), F += 1
            }
            for (b = 3 * C, c = Math.max(o.length, 3 * G); c > b; b++) o[b] = 0;
            for (b = 3 * D, c = Math.max(q.length, 3 * H); c > b; b++) q[b] = 0;
            for (b = 3 * E, c = Math.max(t.length, 3 * I); c > b; b++) t[b] = 0;
            for (b = 3 * F, c = Math.max(z.length, 3 * J); c > b; b++) z[b] = 0;
            for (b = 3 * F, c = Math.max(A.length, 3 * J); c > b; b++) A[b] = 0;
            n.directional.length = C, n.point.length = D, n.spot.length = E, n.hemi.length = F, n.ambient[0] = k, n.ambient[1] = l, n.ambient[2] = m
        }

        function ba(a) {
            a *= ra, a !== bb && (Ja.lineWidth(a), bb = a)
        }

        function ca(a, b, c) {
            $a !== a && (a ? Ja.enable(Ja.POLYGON_OFFSET_FILL) : Ja.disable(Ja.POLYGON_OFFSET_FILL), $a = a), !a || _a === b && ab === c || (Ja.polygonOffset(b, c), _a = b, ab = c)
        }

        function da(a, b, c) {
            var d;
            c ? (Ja.texParameteri(a, Ja.TEXTURE_WRAP_S, la(b.wrapS)), Ja.texParameteri(a, Ja.TEXTURE_WRAP_T, la(b.wrapT)), Ja.texParameteri(a, Ja.TEXTURE_MAG_FILTER, la(b.magFilter)), Ja.texParameteri(a, Ja.TEXTURE_MIN_FILTER, la(b.minFilter))) : (Ja.texParameteri(a, Ja.TEXTURE_WRAP_S, Ja.CLAMP_TO_EDGE), Ja.texParameteri(a, Ja.TEXTURE_WRAP_T, Ja.CLAMP_TO_EDGE), (b.wrapS !== THREE.ClampToEdgeWrapping || b.wrapT !== THREE.ClampToEdgeWrapping) && console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT is set to THREE.ClampToEdgeWrapping. ( " + b.sourceFile + " )"), Ja.texParameteri(a, Ja.TEXTURE_MAG_FILTER, ka(b.magFilter)), Ja.texParameteri(a, Ja.TEXTURE_MIN_FILTER, ka(b.minFilter)), b.minFilter !== THREE.NearestFilter && b.minFilter !== THREE.LinearFilter && console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter is set to THREE.LinearFilter or THREE.NearestFilter. ( " + b.sourceFile + " )")), d = sb.get("EXT_texture_filter_anisotropic"), d && b.type !== THREE.FloatType && (b.anisotropy > 1 || b.__oldAnisotropy) && (Ja.texParameterf(a, d.TEXTURE_MAX_ANISOTROPY_EXT, Math.min(b.anisotropy, Ka.getMaxAnisotropy())), b.__oldAnisotropy = b.anisotropy)
        }

        function ea(a, b) {
            if (a.width > b || a.height > b) {
                var c = b / Math.max(a.width, a.height),
                    d = document.createElement("canvas");
                d.width = Math.floor(a.width * c), d.height = Math.floor(a.height * c);
                var e = d.getContext("2d");
                return e.drawImage(a, 0, 0, a.width, a.height, 0, 0, d.width, d.height), console.log("THREE.WebGLRenderer:", a, "is too big (" + a.width + "x" + a.height + "). Resized to " + d.width + "x" + d.height + "."), d
            }
            return a
        }

        function fa(a, b) {
            if (6 === a.image.length)
                if (a.needsUpdate) {
                    a.image.__webglTextureCube || (a.addEventListener("dispose", Nb), a.image.__webglTextureCube = Ja.createTexture(), Ka.info.memory.textures++), Ja.activeTexture(Ja.TEXTURE0 + b), Ja.bindTexture(Ja.TEXTURE_CUBE_MAP, a.image.__webglTextureCube), Ja.pixelStorei(Ja.UNPACK_FLIP_Y_WEBGL, a.flipY);
                    for (var c = a instanceof THREE.CompressedTexture, d = a.image[0] instanceof THREE.DataTexture, e = [], f = 0; 6 > f; f++) e[f] = !Ka.autoScaleCubemaps || c || d ? d ? a.image[f].image : a.image[f] : ea(a.image[f], yb);
                    var g = e[0],
                        h = THREE.Math.isPowerOfTwo(g.width) && THREE.Math.isPowerOfTwo(g.height),
                        i = la(a.format),
                        j = la(a.type);
                    da(Ja.TEXTURE_CUBE_MAP, a, h);
                    for (var f = 0; 6 > f; f++)
                        if (c)
                            for (var k, l = e[f].mipmaps, m = 0, n = l.length; n > m; m++) k = l[m], a.format !== THREE.RGBAFormat && a.format !== THREE.RGBFormat ? Fb().indexOf(i) > -1 ? Ja.compressedTexImage2D(Ja.TEXTURE_CUBE_MAP_POSITIVE_X + f, m, i, k.width, k.height, 0, k.data) : console.warn("Attempt to load unsupported compressed texture format") : Ja.texImage2D(Ja.TEXTURE_CUBE_MAP_POSITIVE_X + f, m, i, k.width, k.height, 0, i, j, k.data);
                        else d ? Ja.texImage2D(Ja.TEXTURE_CUBE_MAP_POSITIVE_X + f, 0, i, e[f].width, e[f].height, 0, i, j, e[f].data) : Ja.texImage2D(Ja.TEXTURE_CUBE_MAP_POSITIVE_X + f, 0, i, i, j, e[f]);
                    a.generateMipmaps && h && Ja.generateMipmap(Ja.TEXTURE_CUBE_MAP), a.needsUpdate = !1, a.onUpdate && a.onUpdate()
                } else Ja.activeTexture(Ja.TEXTURE0 + b), Ja.bindTexture(Ja.TEXTURE_CUBE_MAP, a.image.__webglTextureCube)
        }

        function ga(a, b) {
            Ja.activeTexture(Ja.TEXTURE0 + b), Ja.bindTexture(Ja.TEXTURE_CUBE_MAP, a.__webglTexture)
        }

        function ha(a, b, c) {
            Ja.bindFramebuffer(Ja.FRAMEBUFFER, a), Ja.framebufferTexture2D(Ja.FRAMEBUFFER, Ja.COLOR_ATTACHMENT0, c, b.__webglTexture, 0)
        }

        function ia(a, b) {
            Ja.bindRenderbuffer(Ja.RENDERBUFFER, a), b.depthBuffer && !b.stencilBuffer ? (Ja.renderbufferStorage(Ja.RENDERBUFFER, Ja.DEPTH_COMPONENT16, b.width, b.height), Ja.framebufferRenderbuffer(Ja.FRAMEBUFFER, Ja.DEPTH_ATTACHMENT, Ja.RENDERBUFFER, a)) : b.depthBuffer && b.stencilBuffer ? (Ja.renderbufferStorage(Ja.RENDERBUFFER, Ja.DEPTH_STENCIL, b.width, b.height), Ja.framebufferRenderbuffer(Ja.FRAMEBUFFER, Ja.DEPTH_STENCIL_ATTACHMENT, Ja.RENDERBUFFER, a)) : Ja.renderbufferStorage(Ja.RENDERBUFFER, Ja.RGBA4, b.width, b.height)
        }

        function ja(a) {
            a instanceof THREE.WebGLRenderTargetCube ? (Ja.bindTexture(Ja.TEXTURE_CUBE_MAP, a.__webglTexture), Ja.generateMipmap(Ja.TEXTURE_CUBE_MAP), Ja.bindTexture(Ja.TEXTURE_CUBE_MAP, null)) : (Ja.bindTexture(Ja.TEXTURE_2D, a.__webglTexture), Ja.generateMipmap(Ja.TEXTURE_2D), Ja.bindTexture(Ja.TEXTURE_2D, null))
        }

        function ka(a) {
            return a === THREE.NearestFilter || a === THREE.NearestMipMapNearestFilter || a === THREE.NearestMipMapLinearFilter ? Ja.NEAREST : Ja.LINEAR
        }

        function la(a) {
            var b;
            if (a === THREE.RepeatWrapping) return Ja.REPEAT;
            if (a === THREE.ClampToEdgeWrapping) return Ja.CLAMP_TO_EDGE;
            if (a === THREE.MirroredRepeatWrapping) return Ja.MIRRORED_REPEAT;
            if (a === THREE.NearestFilter) return Ja.NEAREST;
            if (a === THREE.NearestMipMapNearestFilter) return Ja.NEAREST_MIPMAP_NEAREST;
            if (a === THREE.NearestMipMapLinearFilter) return Ja.NEAREST_MIPMAP_LINEAR;
            if (a === THREE.LinearFilter) return Ja.LINEAR;
            if (a === THREE.LinearMipMapNearestFilter) return Ja.LINEAR_MIPMAP_NEAREST;
            if (a === THREE.LinearMipMapLinearFilter) return Ja.LINEAR_MIPMAP_LINEAR;
            if (a === THREE.UnsignedByteType) return Ja.UNSIGNED_BYTE;
            if (a === THREE.UnsignedShort4444Type) return Ja.UNSIGNED_SHORT_4_4_4_4;
            if (a === THREE.UnsignedShort5551Type) return Ja.UNSIGNED_SHORT_5_5_5_1;
            if (a === THREE.UnsignedShort565Type) return Ja.UNSIGNED_SHORT_5_6_5;
            if (a === THREE.ByteType) return Ja.BYTE;
            if (a === THREE.ShortType) return Ja.SHORT;
            if (a === THREE.UnsignedShortType) return Ja.UNSIGNED_SHORT;
            if (a === THREE.IntType) return Ja.INT;
            if (a === THREE.UnsignedIntType) return Ja.UNSIGNED_INT;
            if (a === THREE.FloatType) return Ja.FLOAT;
            if (a === THREE.AlphaFormat) return Ja.ALPHA;
            if (a === THREE.RGBFormat) return Ja.RGB;
            if (a === THREE.RGBAFormat) return Ja.RGBA;
            if (a === THREE.LuminanceFormat) return Ja.LUMINANCE;
            if (a === THREE.LuminanceAlphaFormat) return Ja.LUMINANCE_ALPHA;
            if (a === THREE.AddEquation) return Ja.FUNC_ADD;
            if (a === THREE.SubtractEquation) return Ja.FUNC_SUBTRACT;
            if (a === THREE.ReverseSubtractEquation) return Ja.FUNC_REVERSE_SUBTRACT;
            if (a === THREE.ZeroFactor) return Ja.ZERO;
            if (a === THREE.OneFactor) return Ja.ONE;
            if (a === THREE.SrcColorFactor) return Ja.SRC_COLOR;
            if (a === THREE.OneMinusSrcColorFactor) return Ja.ONE_MINUS_SRC_COLOR;
            if (a === THREE.SrcAlphaFactor) return Ja.SRC_ALPHA;
            if (a === THREE.OneMinusSrcAlphaFactor) return Ja.ONE_MINUS_SRC_ALPHA;
            if (a === THREE.DstAlphaFactor) return Ja.DST_ALPHA;
            if (a === THREE.OneMinusDstAlphaFactor) return Ja.ONE_MINUS_DST_ALPHA;
            if (a === THREE.DstColorFactor) return Ja.DST_COLOR;
            if (a === THREE.OneMinusDstColorFactor) return Ja.ONE_MINUS_DST_COLOR;
            if (a === THREE.SrcAlphaSaturateFactor) return Ja.SRC_ALPHA_SATURATE;
            if (b = sb.get("WEBGL_compressed_texture_s3tc"), null !== b) {
                if (a === THREE.RGB_S3TC_DXT1_Format) return b.COMPRESSED_RGB_S3TC_DXT1_EXT;
                if (a === THREE.RGBA_S3TC_DXT1_Format) return b.COMPRESSED_RGBA_S3TC_DXT1_EXT;
                if (a === THREE.RGBA_S3TC_DXT3_Format) return b.COMPRESSED_RGBA_S3TC_DXT3_EXT;
                if (a === THREE.RGBA_S3TC_DXT5_Format) return b.COMPRESSED_RGBA_S3TC_DXT5_EXT
            }
            if (b = sb.get("WEBGL_compressed_texture_pvrtc"), null !== b) {
                if (a === THREE.RGB_PVRTC_4BPPV1_Format) return b.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;
                if (a === THREE.RGB_PVRTC_2BPPV1_Format) return b.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;
                if (a === THREE.RGBA_PVRTC_4BPPV1_Format) return b.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;
                if (a === THREE.RGBA_PVRTC_2BPPV1_Format) return b.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG
            }
            if (b = sb.get("EXT_blend_minmax"), null !== b) {
                if (a === THREE.MinEquation) return b.MIN_EXT;
                if (a === THREE.MaxEquation) return b.MAX_EXT
            }
            return 0
        }

        function ma(a) {
            if (Ab && a && a.skeleton && a.skeleton.useVertexTexture) return 1024;
            var b = Ja.getParameter(Ja.MAX_VERTEX_UNIFORM_VECTORS),
                c = Math.floor((b - 20) / 4),
                d = c;
            return void 0 !== a && a instanceof THREE.SkinnedMesh && (d = Math.min(a.skeleton.bones.length, d), d < a.skeleton.bones.length && console.warn("WebGLRenderer: too many bones - " + a.skeleton.bones.length + ", this GPU supports just " + d + " (try OpenGL instead of ANGLE)")), d
        }

        function na(a) {
            for (var b = 0, c = 0, d = 0, e = 0, f = 0, g = a.length; g > f; f++) {
                var h = a[f];
                h.onlyShadow || h.visible === !1 || (h instanceof THREE.DirectionalLight && b++, h instanceof THREE.PointLight && c++, h instanceof THREE.SpotLight && d++, h instanceof THREE.HemisphereLight && e++)
            }
            return {
                directional: b,
                point: c,
                spot: d,
                hemi: e
            }
        }

        function oa(a) {
            for (var b = 0, c = 0, d = a.length; d > c; c++) {
                var e = a[c];
                e.castShadow && (e instanceof THREE.SpotLight && b++, e instanceof THREE.DirectionalLight && !e.shadowCascade && b++)
            }
            return b
        }
        console.log("THREE.WebGLRenderer", THREE.REVISION), a = a || {};
        var pa = void 0 !== a.canvas ? a.canvas : document.createElement("canvas"),
            qa = void 0 !== a.context ? a.context : null,
            ra = 1,
            sa = void 0 !== a.precision ? a.precision : "highp",
            ta = void 0 !== a.alpha ? a.alpha : !1,
            ua = void 0 !== a.depth ? a.depth : !0,
            va = void 0 !== a.stencil ? a.stencil : !0,
            wa = void 0 !== a.antialias ? a.antialias : !1,
            xa = void 0 !== a.premultipliedAlpha ? a.premultipliedAlpha : !0,
            ya = void 0 !== a.preserveDrawingBuffer ? a.preserveDrawingBuffer : !1,
            za = void 0 !== a.logarithmicDepthBuffer ? a.logarithmicDepthBuffer : !1,
            Aa = new THREE.Color(0),
            Ba = 0,
            Ca = [],
            Da = {},
            Ea = [],
            Fa = [],
            Ga = [],
            Ha = [],
            Ia = [];
        this.domElement = pa, this.context = null, this.autoClear = !0, this.autoClearColor = !0, this.autoClearDepth = !0, this.autoClearStencil = !0, this.sortObjects = !0, this.gammaInput = !1, this.gammaOutput = !1, this.shadowMapEnabled = !1, this.shadowMapType = THREE.PCFShadowMap, this.shadowMapCullFace = THREE.CullFaceFront, this.shadowMapDebug = !1, this.shadowMapCascade = !1, this.maxMorphTargets = 8, this.maxMorphNormals = 4, this.autoScaleCubemaps = !0, this.info = {
            memory: {
                programs: 0,
                geometries: 0,
                textures: 0
            },
            render: {
                calls: 0,
                vertices: 0,
                faces: 0,
                points: 0
            }
        };
        var Ja, Ka = this,
            La = [],
            Ma = null,
            Na = null,
            Oa = -1,
            Pa = "",
            Qa = null,
            Ra = 0,
            Sa = -1,
            Ta = -1,
            Ua = -1,
            Va = -1,
            Wa = -1,
            Xa = -1,
            Ya = -1,
            Za = -1,
            $a = null,
            _a = null,
            ab = null,
            bb = null,
            cb = 0,
            db = 0,
            eb = pa.width,
            fb = pa.height,
            gb = 0,
            hb = 0,
            ib = new Uint8Array(16),
            jb = new Uint8Array(16),
            kb = new THREE.Frustum,
            lb = new THREE.Matrix4,
            mb = (new THREE.Matrix4, new THREE.Vector3),
            nb = new THREE.Vector3,
            ob = !0,
            pb = {
                ambient: [0, 0, 0],
                directional: {
                    length: 0,
                    colors: [],
                    positions: []
                },
                point: {
                    length: 0,
                    colors: [],
                    positions: [],
                    distances: []
                },
                spot: {
                    length: 0,
                    colors: [],
                    positions: [],
                    distances: [],
                    directions: [],
                    anglesCos: [],
                    exponents: []
                },
                hemi: {
                    length: 0,
                    skyColors: [],
                    groundColors: [],
                    positions: []
                }
            };
        try {
            var qb = {
                alpha: ta,
                depth: ua,
                stencil: va,
                antialias: wa,
                premultipliedAlpha: xa,
                preserveDrawingBuffer: ya
            };
            if (Ja = qa || pa.getContext("webgl", qb) || pa.getContext("experimental-webgl", qb), null === Ja) throw null !== pa.getContext("webgl") ? "Error creating WebGL context with your selected attributes." : "Error creating WebGL context.";
            pa.addEventListener("webglcontextlost", function(a) {
                a.preventDefault(), ub(), tb(), Da = {}
            }, !1)
        } catch (rb) {
            console.error(rb)
        }
        void 0 === Ja.getShaderPrecisionFormat && (Ja.getShaderPrecisionFormat = function() {
            return {
                rangeMin: 1,
                rangeMax: 1,
                precision: 1
            }
        });
        var sb = new THREE.WebGLExtensions(Ja);
        sb.get("OES_texture_float"), sb.get("OES_texture_float_linear"), sb.get("OES_standard_derivatives"), za && sb.get("EXT_frag_depth");
        var tb = function() {
                Ja.clearColor(0, 0, 0, 1), Ja.clearDepth(1), Ja.clearStencil(0), Ja.enable(Ja.DEPTH_TEST), Ja.depthFunc(Ja.LEQUAL), Ja.frontFace(Ja.CCW), Ja.cullFace(Ja.BACK), Ja.enable(Ja.CULL_FACE), Ja.enable(Ja.BLEND), Ja.blendEquation(Ja.FUNC_ADD), Ja.blendFunc(Ja.SRC_ALPHA, Ja.ONE_MINUS_SRC_ALPHA), Ja.viewport(cb, db, eb, fb), Ja.clearColor(Aa.r, Aa.g, Aa.b, Ba)
            },
            ub = function() {
                Ma = null, Qa = null, Ua = -1, Ya = -1, Za = -1, Sa = -1, Ta = -1, Pa = "", Oa = -1, ob = !0;
                for (var a = 0; a < jb.length; a++) jb[a] = 0
            };
        tb(), this.context = Ja;
        var vb = Ja.getParameter(Ja.MAX_TEXTURE_IMAGE_UNITS),
            wb = Ja.getParameter(Ja.MAX_VERTEX_TEXTURE_IMAGE_UNITS),
            xb = Ja.getParameter(Ja.MAX_TEXTURE_SIZE),
            yb = Ja.getParameter(Ja.MAX_CUBE_MAP_TEXTURE_SIZE),
            zb = wb > 0,
            Ab = zb && sb.get("OES_texture_float"),
            Bb = Ja.getShaderPrecisionFormat(Ja.VERTEX_SHADER, Ja.HIGH_FLOAT),
            Cb = Ja.getShaderPrecisionFormat(Ja.VERTEX_SHADER, Ja.MEDIUM_FLOAT),
            Db = (Ja.getShaderPrecisionFormat(Ja.VERTEX_SHADER, Ja.LOW_FLOAT), Ja.getShaderPrecisionFormat(Ja.FRAGMENT_SHADER, Ja.HIGH_FLOAT)),
            Eb = Ja.getShaderPrecisionFormat(Ja.FRAGMENT_SHADER, Ja.MEDIUM_FLOAT),
            Fb = (Ja.getShaderPrecisionFormat(Ja.FRAGMENT_SHADER, Ja.LOW_FLOAT), function() {
                var a;
                return function() {
                    if (void 0 !== a) return a;
                    if (a = [], sb.get("WEBGL_compressed_texture_pvrtc") || sb.get("WEBGL_compressed_texture_s3tc"))
                        for (var b = Ja.getParameter(Ja.COMPRESSED_TEXTURE_FORMATS), c = 0; c < b.length; c++) a.push(b[c]);
                    return a
                }
            }()),
            Gb = Bb.precision > 0 && Db.precision > 0,
            Hb = Cb.precision > 0 && Eb.precision > 0;
        "highp" !== sa || Gb || (Hb ? (sa = "mediump", console.warn("THREE.WebGLRenderer: highp not supported, using mediump.")) : (sa = "lowp", console.warn("THREE.WebGLRenderer: highp and mediump not supported, using lowp."))), "mediump" !== sa || Hb || (sa = "lowp", console.warn("THREE.WebGLRenderer: mediump not supported, using lowp."));
        var Ib = new THREE.ShadowMapPlugin(this, Ca, Da, Ea),
            Jb = new THREE.SpritePlugin(this, Ha),
            Kb = new THREE.LensFlarePlugin(this, Ia);
        this.getContext = function() {
            return Ja
        }, this.forceContextLoss = function() {
            sb.get("WEBGL_lose_context").loseContext()
        }, this.supportsVertexTextures = function() {
            return zb
        }, this.supportsFloatTextures = function() {
            return sb.get("OES_texture_float")
        }, this.supportsStandardDerivatives = function() {
            return sb.get("OES_standard_derivatives")
        }, this.supportsCompressedTextureS3TC = function() {
            return sb.get("WEBGL_compressed_texture_s3tc")
        }, this.supportsCompressedTexturePVRTC = function() {
            return sb.get("WEBGL_compressed_texture_pvrtc")
        }, this.supportsBlendMinMax = function() {
            return sb.get("EXT_blend_minmax")
        }, this.getMaxAnisotropy = function() {
            var a;
            return function() {
                if (void 0 !== a) return a;
                var b = sb.get("EXT_texture_filter_anisotropic");
                return a = null !== b ? Ja.getParameter(b.MAX_TEXTURE_MAX_ANISOTROPY_EXT) : 0
            }
        }(), this.getPrecision = function() {
            return sa
        }, this.getPixelRatio = function() {
            return ra
        }, this.setPixelRatio = function(a) {
            ra = a
        }, this.setSize = function(a, b, c) {
            pa.width = a * ra, pa.height = b * ra, c !== !1 && (pa.style.width = a + "px", pa.style.height = b + "px"), this.setViewport(0, 0, a, b)
        }, this.setViewport = function(a, b, c, d) {
            cb = a * ra, db = b * ra, eb = c * ra, fb = d * ra, Ja.viewport(cb, db, eb, fb)
        }, this.setScissor = function(a, b, c, d) {
            Ja.scissor(a * ra, b * ra, c * ra, d * ra)
        }, this.enableScissorTest = function(a) {
            a ? Ja.enable(Ja.SCISSOR_TEST) : Ja.disable(Ja.SCISSOR_TEST)
        }, this.getClearColor = function() {
            return Aa
        }, this.setClearColor = function(a, b) {
            Aa.set(a), Ba = void 0 !== b ? b : 1, Ja.clearColor(Aa.r, Aa.g, Aa.b, Ba)
        }, this.getClearAlpha = function() {
            return Ba
        }, this.setClearAlpha = function(a) {
            Ba = a, Ja.clearColor(Aa.r, Aa.g, Aa.b, Ba)
        }, this.clear = function(a, b, c) {
            var d = 0;
            (void 0 === a || a) && (d |= Ja.COLOR_BUFFER_BIT), (void 0 === b || b) && (d |= Ja.DEPTH_BUFFER_BIT), (void 0 === c || c) && (d |= Ja.STENCIL_BUFFER_BIT), Ja.clear(d)
        }, this.clearColor = function() {
            Ja.clear(Ja.COLOR_BUFFER_BIT)
        }, this.clearDepth = function() {
            Ja.clear(Ja.DEPTH_BUFFER_BIT)
        }, this.clearStencil = function() {
            Ja.clear(Ja.STENCIL_BUFFER_BIT)
        }, this.clearTarget = function(a, b, c, d) {
            this.setRenderTarget(a), this.clear(b, c, d)
        }, this.resetGLState = ub;
        var Lb = function(a) {
                var b = a.target;
                b.traverse(function(a) {
                    a.removeEventListener("remove", Lb), I(a)
                })
            },
            Mb = function(a) {
                var b = a.target;
                b.removeEventListener("dispose", Mb), Rb(b)
            },
            Nb = function(a) {
                var b = a.target;
                b.removeEventListener("dispose", Nb), Sb(b), Ka.info.memory.textures--
            },
            Ob = function(a) {
                var b = a.target;
                b.removeEventListener("dispose", Ob), Tb(b), Ka.info.memory.textures--
            },
            Pb = function(a) {
                var b = a.target;
                b.removeEventListener("dispose", Pb), Ub(b)
            },
            Qb = function(a) {
                for (var b = ["__webglVertexBuffer", "__webglNormalBuffer", "__webglTangentBuffer", "__webglColorBuffer", "__webglUVBuffer", "__webglUV2Buffer", "__webglSkinIndicesBuffer", "__webglSkinWeightsBuffer", "__webglFaceBuffer", "__webglLineBuffer", "__webglLineDistanceBuffer"], c = 0, d = b.length; d > c; c++) {
                    var e = b[c];
                    void 0 !== a[e] && (Ja.deleteBuffer(a[e]), delete a[e])
                }
                if (void 0 !== a.__webglCustomAttributesList) {
                    for (var e in a.__webglCustomAttributesList) Ja.deleteBuffer(a.__webglCustomAttributesList[e].buffer);
                    delete a.__webglCustomAttributesList
                }
                Ka.info.memory.geometries--
            },
            Rb = function(a) {
                if (delete a.__webglInit, a instanceof THREE.BufferGeometry) {
                    for (var b in a.attributes) {
                        var c = a.attributes[b];
                        void 0 !== c.buffer && (Ja.deleteBuffer(c.buffer), delete c.buffer)
                    }
                    Ka.info.memory.geometries--
                } else {
                    var d = Vb[a.id];
                    if (void 0 !== d) {
                        for (var e = 0, f = d.length; f > e; e++) {
                            var g = d[e];
                            if (void 0 !== g.numMorphTargets) {
                                for (var h = 0, i = g.numMorphTargets; i > h; h++) Ja.deleteBuffer(g.__webglMorphTargetsBuffers[h]);
                                delete g.__webglMorphTargetsBuffers
                            }
                            if (void 0 !== g.numMorphNormals) {
                                for (var h = 0, i = g.numMorphNormals; i > h; h++) Ja.deleteBuffer(g.__webglMorphNormalsBuffers[h]);
                                delete g.__webglMorphNormalsBuffers
                            }
                            Qb(g)
                        }
                        delete Vb[a.id]
                    } else Qb(a)
                }
                Pa = ""
            },
            Sb = function(a) {
                if (a.image && a.image.__webglTextureCube) Ja.deleteTexture(a.image.__webglTextureCube), delete a.image.__webglTextureCube;
                else {
                    if (void 0 === a.__webglInit) return;
                    Ja.deleteTexture(a.__webglTexture), delete a.__webglTexture, delete a.__webglInit
                }
            },
            Tb = function(a) {
                if (a && void 0 !== a.__webglTexture) {
                    if (Ja.deleteTexture(a.__webglTexture), delete a.__webglTexture, a instanceof THREE.WebGLRenderTargetCube)
                        for (var b = 0; 6 > b; b++) Ja.deleteFramebuffer(a.__webglFramebuffer[b]), Ja.deleteRenderbuffer(a.__webglRenderbuffer[b]);
                    else Ja.deleteFramebuffer(a.__webglFramebuffer), Ja.deleteRenderbuffer(a.__webglRenderbuffer);
                    delete a.__webglFramebuffer, delete a.__webglRenderbuffer
                }
            },
            Ub = function(a) {
                var b = a.program.program;
                if (void 0 !== b) {
                    a.program = void 0;
                    var c, d, e, f = !1;
                    for (c = 0, d = La.length; d > c; c++)
                        if (e = La[c], e.program === b) {
                            e.usedTimes--, 0 === e.usedTimes && (f = !0);
                            break
                        }
                    if (f === !0) {
                        var g = [];
                        for (c = 0, d = La.length; d > c; c++) e = La[c], e.program !== b && g.push(e);
                        La = g, Ja.deleteProgram(b), Ka.info.memory.programs--
                    }
                }
            };
        this.renderBufferImmediate = function(a, b, c) {
            if (o(), a.hasPositions && !a.__webglVertexBuffer && (a.__webglVertexBuffer = Ja.createBuffer()), a.hasNormals && !a.__webglNormalBuffer && (a.__webglNormalBuffer = Ja.createBuffer()), a.hasUvs && !a.__webglUvBuffer && (a.__webglUvBuffer = Ja.createBuffer()), a.hasColors && !a.__webglColorBuffer && (a.__webglColorBuffer = Ja.createBuffer()), a.hasPositions && (Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglVertexBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, a.positionArray, Ja.DYNAMIC_DRAW), p(b.attributes.position), Ja.vertexAttribPointer(b.attributes.position, 3, Ja.FLOAT, !1, 0, 0)), a.hasNormals) {
                if (Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglNormalBuffer), c.shading === THREE.FlatShading) {
                    var d, e, f, g, h, i, j, k, l, m, n, r, s, t, u = 3 * a.count;
                    for (t = 0; u > t; t += 9) s = a.normalArray, g = s[t], j = s[t + 1], m = s[t + 2], h = s[t + 3], k = s[t + 4], n = s[t + 5], i = s[t + 6], l = s[t + 7], r = s[t + 8], d = (g + h + i) / 3, e = (j + k + l) / 3, f = (m + n + r) / 3, s[t] = d, s[t + 1] = e, s[t + 2] = f, s[t + 3] = d, s[t + 4] = e, s[t + 5] = f, s[t + 6] = d, s[t + 7] = e, s[t + 8] = f
                }
                Ja.bufferData(Ja.ARRAY_BUFFER, a.normalArray, Ja.DYNAMIC_DRAW), p(b.attributes.normal), Ja.vertexAttribPointer(b.attributes.normal, 3, Ja.FLOAT, !1, 0, 0)
            }
            a.hasUvs && c.map && (Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglUvBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, a.uvArray, Ja.DYNAMIC_DRAW), p(b.attributes.uv), Ja.vertexAttribPointer(b.attributes.uv, 2, Ja.FLOAT, !1, 0, 0)), a.hasColors && c.vertexColors !== THREE.NoColors && (Ja.bindBuffer(Ja.ARRAY_BUFFER, a.__webglColorBuffer), Ja.bufferData(Ja.ARRAY_BUFFER, a.colorArray, Ja.DYNAMIC_DRAW), p(b.attributes.color), Ja.vertexAttribPointer(b.attributes.color, 3, Ja.FLOAT, !1, 0, 0)), q(), Ja.drawArrays(Ja.TRIANGLES, 0, a.count), a.count = 0
        }, this.renderBufferDirect = function(a, b, c, d, e, f) {
            if (d.visible !== !1) {
                F(f);
                var g = L(a, b, c, d, f),
                    h = !1,
                    i = d.wireframe ? 1 : 0,
                    j = "direct_" + e.id + "_" + g.id + "_" + i;
                if (j !== Pa && (Pa = j, h = !0), h && o(), f instanceof THREE.Mesh) {
                    var k = d.wireframe === !0 ? Ja.LINES : Ja.TRIANGLES,
                        l = e.attributes.index;
                    if (l) {
                        var m, p;
                        l.array instanceof Uint32Array && sb.get("OES_element_index_uint") ? (m = Ja.UNSIGNED_INT, p = 4) : (m = Ja.UNSIGNED_SHORT, p = 2);
                        var q = e.offsets;
                        if (0 === q.length) h && (n(d, g, e, 0), Ja.bindBuffer(Ja.ELEMENT_ARRAY_BUFFER, l.buffer)), Ja.drawElements(k, l.array.length, m, 0), Ka.info.render.calls++, Ka.info.render.vertices += l.array.length, Ka.info.render.faces += l.array.length / 3;
                        else {
                            h = !0;
                            for (var r = 0, s = q.length; s > r; r++) {
                                var t = q[r].index;
                                h && (n(d, g, e, t), Ja.bindBuffer(Ja.ELEMENT_ARRAY_BUFFER, l.buffer)), Ja.drawElements(k, q[r].count, m, q[r].start * p), Ka.info.render.calls++, Ka.info.render.vertices += q[r].count, Ka.info.render.faces += q[r].count / 3
                            }
                        }
                    } else {
                        h && n(d, g, e, 0);
                        var u = e.attributes.position;
                        Ja.drawArrays(k, 0, u.array.length / 3), Ka.info.render.calls++, Ka.info.render.vertices += u.array.length / 3, Ka.info.render.faces += u.array.length / 9
                    }
                } else if (f instanceof THREE.PointCloud) {
                    var k = Ja.POINTS,
                        l = e.attributes.index;
                    if (l) {
                        var m, p;
                        l.array instanceof Uint32Array && sb.get("OES_element_index_uint") ? (m = Ja.UNSIGNED_INT, p = 4) : (m = Ja.UNSIGNED_SHORT, p = 2);
                        var q = e.offsets;
                        if (0 === q.length) h && (n(d, g, e, 0), Ja.bindBuffer(Ja.ELEMENT_ARRAY_BUFFER, l.buffer)), Ja.drawElements(k, l.array.length, m, 0), Ka.info.render.calls++, Ka.info.render.points += l.array.length;
                        else {
                            q.length > 1 && (h = !0);
                            for (var r = 0, s = q.length; s > r; r++) {
                                var t = q[r].index;
                                h && (n(d, g, e, t), Ja.bindBuffer(Ja.ELEMENT_ARRAY_BUFFER, l.buffer)), Ja.drawElements(k, q[r].count, m, q[r].start * p), Ka.info.render.calls++, Ka.info.render.points += q[r].count
                            }
                        }
                    } else {
                        h && n(d, g, e, 0);
                        var u = e.attributes.position,
                            q = e.offsets;
                        if (0 === q.length) Ja.drawArrays(k, 0, u.array.length / 3), Ka.info.render.calls++, Ka.info.render.points += u.array.length / 3;
                        else
                            for (var r = 0, s = q.length; s > r; r++) Ja.drawArrays(k, q[r].index, q[r].count), Ka.info.render.calls++, Ka.info.render.points += q[r].count
                    }
                } else if (f instanceof THREE.Line) {
                    var k = f.mode === THREE.LineStrip ? Ja.LINE_STRIP : Ja.LINES;
                    ba(d.linewidth);
                    var l = e.attributes.index;
                    if (l) {
                        var m, p;
                        l.array instanceof Uint32Array ? (m = Ja.UNSIGNED_INT, p = 4) : (m = Ja.UNSIGNED_SHORT, p = 2);
                        var q = e.offsets;
                        if (0 === q.length) h && (n(d, g, e, 0), Ja.bindBuffer(Ja.ELEMENT_ARRAY_BUFFER, l.buffer)), Ja.drawElements(k, l.array.length, m, 0), Ka.info.render.calls++, Ka.info.render.vertices += l.array.length;
                        else {
                            q.length > 1 && (h = !0);
                            for (var r = 0, s = q.length; s > r; r++) {
                                var t = q[r].index;
                                h && (n(d, g, e, t), Ja.bindBuffer(Ja.ELEMENT_ARRAY_BUFFER, l.buffer)), Ja.drawElements(k, q[r].count, m, q[r].start * p), Ka.info.render.calls++, Ka.info.render.vertices += q[r].count
                            }
                        }
                    } else {
                        h && n(d, g, e, 0);
                        var u = e.attributes.position,
                            q = e.offsets;
                        if (0 === q.length) Ja.drawArrays(k, 0, u.array.length / 3), Ka.info.render.calls++, Ka.info.render.vertices += u.array.length / 3;
                        else
                            for (var r = 0, s = q.length; s > r; r++) Ja.drawArrays(k, q[r].index, q[r].count), Ka.info.render.calls++, Ka.info.render.vertices += q[r].count
                    }
                }
            }
        }, this.renderBuffer = function(a, b, c, d, e, f) {
            if (d.visible !== !1) {
                F(f);
                var g = L(a, b, c, d, f),
                    h = g.attributes,
                    i = !1,
                    j = d.wireframe ? 1 : 0,
                    k = e.id + "_" + g.id + "_" + j;
                if (k !== Pa && (Pa = k, i = !0), i && o(), !d.morphTargets && h.position >= 0 ? i && (Ja.bindBuffer(Ja.ARRAY_BUFFER, e.__webglVertexBuffer), p(h.position), Ja.vertexAttribPointer(h.position, 3, Ja.FLOAT, !1, 0, 0)) : f.morphTargetBase && r(d, e, f), i) {
                    if (e.__webglCustomAttributesList)
                        for (var l = 0, m = e.__webglCustomAttributesList.length; m > l; l++) {
                            var n = e.__webglCustomAttributesList[l];
                            h[n.buffer.belongsToAttribute] >= 0 && (Ja.bindBuffer(Ja.ARRAY_BUFFER, n.buffer), p(h[n.buffer.belongsToAttribute]), Ja.vertexAttribPointer(h[n.buffer.belongsToAttribute], n.size, Ja.FLOAT, !1, 0, 0))
                        }
                    h.color >= 0 && (f.geometry.colors.length > 0 || f.geometry.faces.length > 0 ? (Ja.bindBuffer(Ja.ARRAY_BUFFER, e.__webglColorBuffer), p(h.color), Ja.vertexAttribPointer(h.color, 3, Ja.FLOAT, !1, 0, 0)) : void 0 !== d.defaultAttributeValues && Ja.vertexAttrib3fv(h.color, d.defaultAttributeValues.color)), h.normal >= 0 && (Ja.bindBuffer(Ja.ARRAY_BUFFER, e.__webglNormalBuffer), p(h.normal), Ja.vertexAttribPointer(h.normal, 3, Ja.FLOAT, !1, 0, 0)), h.tangent >= 0 && (Ja.bindBuffer(Ja.ARRAY_BUFFER, e.__webglTangentBuffer), p(h.tangent), Ja.vertexAttribPointer(h.tangent, 4, Ja.FLOAT, !1, 0, 0)), h.uv >= 0 && (f.geometry.faceVertexUvs[0] ? (Ja.bindBuffer(Ja.ARRAY_BUFFER, e.__webglUVBuffer), p(h.uv), Ja.vertexAttribPointer(h.uv, 2, Ja.FLOAT, !1, 0, 0)) : void 0 !== d.defaultAttributeValues && Ja.vertexAttrib2fv(h.uv, d.defaultAttributeValues.uv)), h.uv2 >= 0 && (f.geometry.faceVertexUvs[1] ? (Ja.bindBuffer(Ja.ARRAY_BUFFER, e.__webglUV2Buffer), p(h.uv2), Ja.vertexAttribPointer(h.uv2, 2, Ja.FLOAT, !1, 0, 0)) : void 0 !== d.defaultAttributeValues && Ja.vertexAttrib2fv(h.uv2, d.defaultAttributeValues.uv2)), d.skinning && h.skinIndex >= 0 && h.skinWeight >= 0 && (Ja.bindBuffer(Ja.ARRAY_BUFFER, e.__webglSkinIndicesBuffer), p(h.skinIndex), Ja.vertexAttribPointer(h.skinIndex, 4, Ja.FLOAT, !1, 0, 0), Ja.bindBuffer(Ja.ARRAY_BUFFER, e.__webglSkinWeightsBuffer), p(h.skinWeight), Ja.vertexAttribPointer(h.skinWeight, 4, Ja.FLOAT, !1, 0, 0)), h.lineDistance >= 0 && (Ja.bindBuffer(Ja.ARRAY_BUFFER, e.__webglLineDistanceBuffer), p(h.lineDistance), Ja.vertexAttribPointer(h.lineDistance, 1, Ja.FLOAT, !1, 0, 0))
                }
                if (q(), f instanceof THREE.Mesh) {
                    var s = e.__typeArray === Uint32Array ? Ja.UNSIGNED_INT : Ja.UNSIGNED_SHORT;
                    d.wireframe ? (ba(d.wireframeLinewidth), i && Ja.bindBuffer(Ja.ELEMENT_ARRAY_BUFFER, e.__webglLineBuffer), Ja.drawElements(Ja.LINES, e.__webglLineCount, s, 0)) : (i && Ja.bindBuffer(Ja.ELEMENT_ARRAY_BUFFER, e.__webglFaceBuffer), Ja.drawElements(Ja.TRIANGLES, e.__webglFaceCount, s, 0)), Ka.info.render.calls++, Ka.info.render.vertices += e.__webglFaceCount, Ka.info.render.faces += e.__webglFaceCount / 3
                } else if (f instanceof THREE.Line) {
                    var t = f.mode === THREE.LineStrip ? Ja.LINE_STRIP : Ja.LINES;
                    ba(d.linewidth), Ja.drawArrays(t, 0, e.__webglLineCount), Ka.info.render.calls++
                } else f instanceof THREE.PointCloud && (Ja.drawArrays(Ja.POINTS, 0, e.__webglParticleCount), Ka.info.render.calls++, Ka.info.render.points += e.__webglParticleCount)
            }
        }, this.render = function(a, b, c, d) {
            if (b instanceof THREE.Camera == !1) return void console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");
            var e = a.fog;
            Pa = "", Oa = -1, Qa = null, ob = !0, a.autoUpdate === !0 && a.updateMatrixWorld(), void 0 === b.parent && b.updateMatrixWorld(), a.traverse(function(a) {
                a instanceof THREE.SkinnedMesh && a.skeleton.update()
            }), b.matrixWorldInverse.getInverse(b.matrixWorld), lb.multiplyMatrices(b.projectionMatrix, b.matrixWorldInverse), kb.setFromMatrix(lb), Ca.length = 0, Fa.length = 0, Ga.length = 0, Ha.length = 0, Ia.length = 0, v(a), Ka.sortObjects === !0 && (Fa.sort(s), Ga.sort(t)), Ib.render(a, b), Ka.info.render.calls = 0, Ka.info.render.vertices = 0, Ka.info.render.faces = 0, Ka.info.render.points = 0, this.setRenderTarget(c), (this.autoClear || d) && this.clear(this.autoClearColor, this.autoClearDepth, this.autoClearStencil);
            for (var f = 0, g = Ea.length; g > f; f++) {
                var h = Ea[f],
                    i = h.object;
                i.visible && (Z(i, b), y(h))
            }
            if (a.overrideMaterial) {
                var j = a.overrideMaterial;
                this.setBlending(j.blending, j.blendEquation, j.blendSrc, j.blendDst), this.setDepthTest(j.depthTest), this.setDepthWrite(j.depthWrite), ca(j.polygonOffset, j.polygonOffsetFactor, j.polygonOffsetUnits), w(Fa, b, Ca, e, !0, j), w(Ga, b, Ca, e, !0, j), x(Ea, "", b, Ca, e, !1, j)
            } else {
                var j = null;
                this.setBlending(THREE.NoBlending), w(Fa, b, Ca, e, !1, j), x(Ea, "opaque", b, Ca, e, !1, j), w(Ga, b, Ca, e, !0, j), x(Ea, "transparent", b, Ca, e, !0, j)
            }
            Jb.render(a, b), Kb.render(a, b, gb, hb), c && c.generateMipmaps && c.minFilter !== THREE.NearestFilter && c.minFilter !== THREE.LinearFilter && ja(c), this.setDepthTest(!0), this.setDepthWrite(!0)
        }, this.renderImmediateObject = function(a, b, c, d, e) {
            var f = L(a, b, c, d, e);
            Pa = "", Ka.setMaterialFaces(d), e.immediateRenderCallback ? e.immediateRenderCallback(f, Ja, kb) : e.render(function(a) {
                Ka.renderBufferImmediate(a, f, d)
            })
        };
        var Vb = {},
            Wb = 0,
            Xb = {
                MeshDepthMaterial: "depth",
                MeshNormalMaterial: "normal",
                MeshBasicMaterial: "basic",
                MeshLambertMaterial: "lambert",
                MeshPhongMaterial: "phong",
                LineBasicMaterial: "basic",
                LineDashedMaterial: "dashed",
                PointCloudMaterial: "particle_basic"
            };
        this.setFaceCulling = function(a, b) {
            a === THREE.CullFaceNone ? Ja.disable(Ja.CULL_FACE) : (Ja.frontFace(b === THREE.FrontFaceDirectionCW ? Ja.CW : Ja.CCW), Ja.cullFace(a === THREE.CullFaceBack ? Ja.BACK : a === THREE.CullFaceFront ? Ja.FRONT : Ja.FRONT_AND_BACK), Ja.enable(Ja.CULL_FACE))
        }, this.setMaterialFaces = function(a) {
            var b = a.side === THREE.DoubleSide,
                c = a.side === THREE.BackSide;
            Sa !== b && (b ? Ja.disable(Ja.CULL_FACE) : Ja.enable(Ja.CULL_FACE), Sa = b), Ta !== c && (Ja.frontFace(c ? Ja.CW : Ja.CCW), Ta = c)
        }, this.setDepthTest = function(a) {
            Ya !== a && (a ? Ja.enable(Ja.DEPTH_TEST) : Ja.disable(Ja.DEPTH_TEST), Ya = a)
        }, this.setDepthWrite = function(a) {
            Za !== a && (Ja.depthMask(a), Za = a)
        }, this.setBlending = function(a, b, c, d) {
            a !== Ua && (a === THREE.NoBlending ? Ja.disable(Ja.BLEND) : a === THREE.AdditiveBlending ? (Ja.enable(Ja.BLEND), Ja.blendEquation(Ja.FUNC_ADD), Ja.blendFunc(Ja.SRC_ALPHA, Ja.ONE)) : a === THREE.SubtractiveBlending ? (Ja.enable(Ja.BLEND), Ja.blendEquation(Ja.FUNC_ADD), Ja.blendFunc(Ja.ZERO, Ja.ONE_MINUS_SRC_COLOR)) : a === THREE.MultiplyBlending ? (Ja.enable(Ja.BLEND), Ja.blendEquation(Ja.FUNC_ADD), Ja.blendFunc(Ja.ZERO, Ja.SRC_COLOR)) : a === THREE.CustomBlending ? Ja.enable(Ja.BLEND) : (Ja.enable(Ja.BLEND), Ja.blendEquationSeparate(Ja.FUNC_ADD, Ja.FUNC_ADD), Ja.blendFuncSeparate(Ja.SRC_ALPHA, Ja.ONE_MINUS_SRC_ALPHA, Ja.ONE, Ja.ONE_MINUS_SRC_ALPHA)), Ua = a), a === THREE.CustomBlending ? (b !== Va && (Ja.blendEquation(la(b)), Va = b), (c !== Wa || d !== Xa) && (Ja.blendFunc(la(c), la(d)), Wa = c, Xa = d)) : (Va = null, Wa = null, Xa = null)
        }, this.uploadTexture = function(a) {
            void 0 === a.__webglInit && (a.__webglInit = !0, a.addEventListener("dispose", Nb), a.__webglTexture = Ja.createTexture(), Ka.info.memory.textures++), Ja.bindTexture(Ja.TEXTURE_2D, a.__webglTexture), Ja.pixelStorei(Ja.UNPACK_FLIP_Y_WEBGL, a.flipY), Ja.pixelStorei(Ja.UNPACK_PREMULTIPLY_ALPHA_WEBGL, a.premultiplyAlpha), Ja.pixelStorei(Ja.UNPACK_ALIGNMENT, a.unpackAlignment), a.image = ea(a.image, xb);
            var b = a.image,
                c = THREE.Math.isPowerOfTwo(b.width) && THREE.Math.isPowerOfTwo(b.height),
                d = la(a.format),
                e = la(a.type);
            da(Ja.TEXTURE_2D, a, c);
            var f, g = a.mipmaps;
            if (a instanceof THREE.DataTexture)
                if (g.length > 0 && c) {
                    for (var h = 0, i = g.length; i > h; h++) f = g[h], Ja.texImage2D(Ja.TEXTURE_2D, h, d, f.width, f.height, 0, d, e, f.data);
                    a.generateMipmaps = !1
                } else Ja.texImage2D(Ja.TEXTURE_2D, 0, d, b.width, b.height, 0, d, e, b.data);
            else if (a instanceof THREE.CompressedTexture)
                for (var h = 0, i = g.length; i > h; h++) f = g[h], a.format !== THREE.RGBAFormat && a.format !== THREE.RGBFormat ? Fb().indexOf(d) > -1 ? Ja.compressedTexImage2D(Ja.TEXTURE_2D, h, d, f.width, f.height, 0, f.data) : console.warn("Attempt to load unsupported compressed texture format") : Ja.texImage2D(Ja.TEXTURE_2D, h, d, f.width, f.height, 0, d, e, f.data);
            else if (g.length > 0 && c) {
                for (var h = 0, i = g.length; i > h; h++) f = g[h], Ja.texImage2D(Ja.TEXTURE_2D, h, d, d, e, f);
                a.generateMipmaps = !1
            } else Ja.texImage2D(Ja.TEXTURE_2D, 0, d, d, e, a.image);
            a.generateMipmaps && c && Ja.generateMipmap(Ja.TEXTURE_2D), a.needsUpdate = !1, a.onUpdate && a.onUpdate()
        }, this.setTexture = function(a, b) {
            Ja.activeTexture(Ja.TEXTURE0 + b), a.needsUpdate ? Ka.uploadTexture(a) : Ja.bindTexture(Ja.TEXTURE_2D, a.__webglTexture)
        }, this.setRenderTarget = function(a) {
            var b = a instanceof THREE.WebGLRenderTargetCube;
            if (a && void 0 === a.__webglFramebuffer) {
                void 0 === a.depthBuffer && (a.depthBuffer = !0), void 0 === a.stencilBuffer && (a.stencilBuffer = !0), a.addEventListener("dispose", Ob), a.__webglTexture = Ja.createTexture(), Ka.info.memory.textures++;
                var c = THREE.Math.isPowerOfTwo(a.width) && THREE.Math.isPowerOfTwo(a.height),
                    d = la(a.format),
                    e = la(a.type);
                if (b) {
                    a.__webglFramebuffer = [], a.__webglRenderbuffer = [], Ja.bindTexture(Ja.TEXTURE_CUBE_MAP, a.__webglTexture), da(Ja.TEXTURE_CUBE_MAP, a, c);
                    for (var f = 0; 6 > f; f++) a.__webglFramebuffer[f] = Ja.createFramebuffer(), a.__webglRenderbuffer[f] = Ja.createRenderbuffer(), Ja.texImage2D(Ja.TEXTURE_CUBE_MAP_POSITIVE_X + f, 0, d, a.width, a.height, 0, d, e, null), ha(a.__webglFramebuffer[f], a, Ja.TEXTURE_CUBE_MAP_POSITIVE_X + f), ia(a.__webglRenderbuffer[f], a);
                    c && Ja.generateMipmap(Ja.TEXTURE_CUBE_MAP)
                } else a.__webglFramebuffer = Ja.createFramebuffer(), a.__webglRenderbuffer = a.shareDepthFrom ? a.shareDepthFrom.__webglRenderbuffer : Ja.createRenderbuffer(), Ja.bindTexture(Ja.TEXTURE_2D, a.__webglTexture), da(Ja.TEXTURE_2D, a, c), Ja.texImage2D(Ja.TEXTURE_2D, 0, d, a.width, a.height, 0, d, e, null), ha(a.__webglFramebuffer, a, Ja.TEXTURE_2D), a.shareDepthFrom ? a.depthBuffer && !a.stencilBuffer ? Ja.framebufferRenderbuffer(Ja.FRAMEBUFFER, Ja.DEPTH_ATTACHMENT, Ja.RENDERBUFFER, a.__webglRenderbuffer) : a.depthBuffer && a.stencilBuffer && Ja.framebufferRenderbuffer(Ja.FRAMEBUFFER, Ja.DEPTH_STENCIL_ATTACHMENT, Ja.RENDERBUFFER, a.__webglRenderbuffer) : ia(a.__webglRenderbuffer, a), c && Ja.generateMipmap(Ja.TEXTURE_2D);
                b ? Ja.bindTexture(Ja.TEXTURE_CUBE_MAP, null) : Ja.bindTexture(Ja.TEXTURE_2D, null), Ja.bindRenderbuffer(Ja.RENDERBUFFER, null), Ja.bindFramebuffer(Ja.FRAMEBUFFER, null)
            }
            var g, h, i, j, k;
            a ? (g = b ? a.__webglFramebuffer[a.activeCubeFace] : a.__webglFramebuffer, h = a.width, i = a.height, j = 0, k = 0) : (g = null, h = eb, i = fb, j = cb, k = db), g !== Na && (Ja.bindFramebuffer(Ja.FRAMEBUFFER, g), Ja.viewport(j, k, h, i), Na = g), gb = h, hb = i
        }, this.initMaterial = function() {
            console.warn("THREE.WebGLRenderer: .initMaterial() has been removed.")
        }, this.addPrePlugin = function() {
            console.warn("THREE.WebGLRenderer: .addPrePlugin() has been removed.")
        }, this.addPostPlugin = function() {
            console.warn("THREE.WebGLRenderer: .addPostPlugin() has been removed.")
        }, this.updateShadowMap = function() {
            console.warn("THREE.WebGLRenderer: .updateShadowMap() has been removed.")
        }
    }, THREE.WebGLRenderTarget = function(a, b, c) {
        this.width = a, this.height = b, c = c || {}, this.wrapS = void 0 !== c.wrapS ? c.wrapS : THREE.ClampToEdgeWrapping, this.wrapT = void 0 !== c.wrapT ? c.wrapT : THREE.ClampToEdgeWrapping, this.magFilter = void 0 !== c.magFilter ? c.magFilter : THREE.LinearFilter, this.minFilter = void 0 !== c.minFilter ? c.minFilter : THREE.LinearMipMapLinearFilter, this.anisotropy = void 0 !== c.anisotropy ? c.anisotropy : 1, this.offset = new THREE.Vector2(0, 0), this.repeat = new THREE.Vector2(1, 1), this.format = void 0 !== c.format ? c.format : THREE.RGBAFormat, this.type = void 0 !== c.type ? c.type : THREE.UnsignedByteType, this.depthBuffer = void 0 !== c.depthBuffer ? c.depthBuffer : !0, this.stencilBuffer = void 0 !== c.stencilBuffer ? c.stencilBuffer : !0, this.generateMipmaps = !0, this.shareDepthFrom = null
    }, THREE.WebGLRenderTarget.prototype = {
        constructor: THREE.WebGLRenderTarget,
        setSize: function(a, b) {
            this.width = a, this.height = b
        },
        clone: function() {
            var a = new THREE.WebGLRenderTarget(this.width, this.height);
            return a.wrapS = this.wrapS, a.wrapT = this.wrapT, a.magFilter = this.magFilter, a.minFilter = this.minFilter, a.anisotropy = this.anisotropy, a.offset.copy(this.offset), a.repeat.copy(this.repeat), a.format = this.format, a.type = this.type, a.depthBuffer = this.depthBuffer, a.stencilBuffer = this.stencilBuffer, a.generateMipmaps = this.generateMipmaps, a.shareDepthFrom = this.shareDepthFrom, a
        },
        dispose: function() {
            this.dispatchEvent({
                type: "dispose"
            })
        }
    }, THREE.EventDispatcher.prototype.apply(THREE.WebGLRenderTarget.prototype), THREE.WebGLRenderTargetCube = function(a, b, c) {
        THREE.WebGLRenderTarget.call(this, a, b, c), this.activeCubeFace = 0
    }, THREE.WebGLRenderTargetCube.prototype = Object.create(THREE.WebGLRenderTarget.prototype), THREE.WebGLRenderTargetCube.prototype.constructor = THREE.WebGLRenderTargetCube, THREE.WebGLExtensions = function(a) {
        var b = {};
        this.get = function(c) {
            if (void 0 !== b[c]) return b[c];
            var d;
            switch (c) {
                case "EXT_texture_filter_anisotropic":
                    d = a.getExtension("EXT_texture_filter_anisotropic") || a.getExtension("MOZ_EXT_texture_filter_anisotropic") || a.getExtension("WEBKIT_EXT_texture_filter_anisotropic");
                    break;
                case "WEBGL_compressed_texture_s3tc":
                    d = a.getExtension("WEBGL_compressed_texture_s3tc") || a.getExtension("MOZ_WEBGL_compressed_texture_s3tc") || a.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");
                    break;
                case "WEBGL_compressed_texture_pvrtc":
                    d = a.getExtension("WEBGL_compressed_texture_pvrtc") || a.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");
                    break;
                default:
                    d = a.getExtension(c)
            }
            return null === d && console.log("THREE.WebGLRenderer: " + c + " extension not supported."), b[c] = d, d
        }
    }, THREE.WebGLProgram = function() {
        var a = 0,
            b = function(a) {
                var b, c, d = [];
                for (var e in a) b = a[e], b !== !1 && (c = "#define " + e + " " + b, d.push(c));
                return d.join("\n")
            },
            c = function(a, b, c) {
                for (var d = {}, e = 0, f = c.length; f > e; e++) {
                    var g = c[e];
                    d[g] = a.getUniformLocation(b, g)
                }
                return d
            },
            d = function(a, b, c) {
                for (var d = {}, e = 0, f = c.length; f > e; e++) {
                    var g = c[e];
                    d[g] = a.getAttribLocation(b, g)
                }
                return d
            };
        return function(e, f, g, h) {
            var i = e,
                j = i.context,
                k = g.defines,
                l = g.__webglShader.uniforms,
                m = g.attributes,
                n = g.__webglShader.vertexShader,
                o = g.__webglShader.fragmentShader,
                p = g.index0AttributeName;
            void 0 === p && h.morphTargets === !0 && (p = "position");
            var q = "SHADOWMAP_TYPE_BASIC";
            h.shadowMapType === THREE.PCFShadowMap ? q = "SHADOWMAP_TYPE_PCF" : h.shadowMapType === THREE.PCFSoftShadowMap && (q = "SHADOWMAP_TYPE_PCF_SOFT");
            var r = "ENVMAP_TYPE_CUBE",
                s = "ENVMAP_MODE_REFLECTION",
                t = "ENVMAP_BLENDING_MULTIPLY";
            if (h.envMap) {
                switch (g.envMap.mapping) {
                    case THREE.CubeReflectionMapping:
                    case THREE.CubeRefractionMapping:
                        r = "ENVMAP_TYPE_CUBE";
                        break;
                    case THREE.EquirectangularReflectionMapping:
                    case THREE.EquirectangularRefractionMapping:
                        r = "ENVMAP_TYPE_EQUIREC";
                        break;
                    case THREE.SphericalReflectionMapping:
                        r = "ENVMAP_TYPE_SPHERE"
                }
                switch (g.envMap.mapping) {
                    case THREE.CubeRefractionMapping:
                    case THREE.EquirectangularRefractionMapping:
                        s = "ENVMAP_MODE_REFRACTION"
                }
                switch (g.combine) {
                    case THREE.MultiplyOperation:
                        t = "ENVMAP_BLENDING_MULTIPLY";
                        break;
                    case THREE.MixOperation:
                        t = "ENVMAP_BLENDING_MIX";
                        break;
                    case THREE.AddOperation:
                        t = "ENVMAP_BLENDING_ADD"
                }
            }
            var u, v, w = b(k),
                x = j.createProgram();
            g instanceof THREE.RawShaderMaterial ? (u = "", v = "") : (u = ["precision " + h.precision + " float;", "precision " + h.precision + " int;", w, h.supportsVertexTextures ? "#define VERTEX_TEXTURES" : "", i.gammaInput ? "#define GAMMA_INPUT" : "", i.gammaOutput ? "#define GAMMA_OUTPUT" : "", "#define MAX_DIR_LIGHTS " + h.maxDirLights, "#define MAX_POINT_LIGHTS " + h.maxPointLights, "#define MAX_SPOT_LIGHTS " + h.maxSpotLights, "#define MAX_HEMI_LIGHTS " + h.maxHemiLights, "#define MAX_SHADOWS " + h.maxShadows, "#define MAX_BONES " + h.maxBones, h.map ? "#define USE_MAP" : "", h.envMap ? "#define USE_ENVMAP" : "", h.envMap ? "#define " + s : "", h.lightMap ? "#define USE_LIGHTMAP" : "", h.bumpMap ? "#define USE_BUMPMAP" : "", h.normalMap ? "#define USE_NORMALMAP" : "", h.specularMap ? "#define USE_SPECULARMAP" : "", h.alphaMap ? "#define USE_ALPHAMAP" : "", h.vertexColors ? "#define USE_COLOR" : "", h.skinning ? "#define USE_SKINNING" : "", h.useVertexTexture ? "#define BONE_TEXTURE" : "", h.morphTargets ? "#define USE_MORPHTARGETS" : "", h.morphNormals ? "#define USE_MORPHNORMALS" : "", h.wrapAround ? "#define WRAP_AROUND" : "", h.doubleSided ? "#define DOUBLE_SIDED" : "", h.flipSided ? "#define FLIP_SIDED" : "", h.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", h.shadowMapEnabled ? "#define " + q : "", h.shadowMapDebug ? "#define SHADOWMAP_DEBUG" : "", h.shadowMapCascade ? "#define SHADOWMAP_CASCADE" : "", h.sizeAttenuation ? "#define USE_SIZEATTENUATION" : "", h.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", "uniform mat4 modelMatrix;", "uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform mat4 viewMatrix;", "uniform mat3 normalMatrix;", "uniform vec3 cameraPosition;", "attribute vec3 position;", "attribute vec3 normal;", "attribute vec2 uv;", "attribute vec2 uv2;", "#ifdef USE_COLOR", "	attribute vec3 color;", "#endif", "#ifdef USE_MORPHTARGETS", "	attribute vec3 morphTarget0;", "	attribute vec3 morphTarget1;", "	attribute vec3 morphTarget2;", "	attribute vec3 morphTarget3;", "	#ifdef USE_MORPHNORMALS", "		attribute vec3 morphNormal0;", "		attribute vec3 morphNormal1;", "		attribute vec3 morphNormal2;", "		attribute vec3 morphNormal3;", "	#else", "		attribute vec3 morphTarget4;", "		attribute vec3 morphTarget5;", "		attribute vec3 morphTarget6;", "		attribute vec3 morphTarget7;", "	#endif", "#endif", "#ifdef USE_SKINNING", "	attribute vec4 skinIndex;", "	attribute vec4 skinWeight;", "#endif", ""].join("\n"), v = ["precision " + h.precision + " float;", "precision " + h.precision + " int;", h.bumpMap || h.normalMap ? "#extension GL_OES_standard_derivatives : enable" : "", w, "#define MAX_DIR_LIGHTS " + h.maxDirLights, "#define MAX_POINT_LIGHTS " + h.maxPointLights, "#define MAX_SPOT_LIGHTS " + h.maxSpotLights, "#define MAX_HEMI_LIGHTS " + h.maxHemiLights, "#define MAX_SHADOWS " + h.maxShadows, h.alphaTest ? "#define ALPHATEST " + h.alphaTest : "", i.gammaInput ? "#define GAMMA_INPUT" : "", i.gammaOutput ? "#define GAMMA_OUTPUT" : "", h.useFog && h.fog ? "#define USE_FOG" : "", h.useFog && h.fogExp ? "#define FOG_EXP2" : "", h.map ? "#define USE_MAP" : "", h.envMap ? "#define USE_ENVMAP" : "", h.envMap ? "#define " + r : "", h.envMap ? "#define " + s : "", h.envMap ? "#define " + t : "", h.lightMap ? "#define USE_LIGHTMAP" : "", h.bumpMap ? "#define USE_BUMPMAP" : "", h.normalMap ? "#define USE_NORMALMAP" : "", h.specularMap ? "#define USE_SPECULARMAP" : "", h.alphaMap ? "#define USE_ALPHAMAP" : "", h.vertexColors ? "#define USE_COLOR" : "", h.metal ? "#define METAL" : "", h.wrapAround ? "#define WRAP_AROUND" : "", h.doubleSided ? "#define DOUBLE_SIDED" : "", h.flipSided ? "#define FLIP_SIDED" : "", h.shadowMapEnabled ? "#define USE_SHADOWMAP" : "", h.shadowMapEnabled ? "#define " + q : "", h.shadowMapDebug ? "#define SHADOWMAP_DEBUG" : "", h.shadowMapCascade ? "#define SHADOWMAP_CASCADE" : "", h.logarithmicDepthBuffer ? "#define USE_LOGDEPTHBUF" : "", "uniform mat4 viewMatrix;", "uniform vec3 cameraPosition;", ""].join("\n"));
            var y = new THREE.WebGLShader(j, j.VERTEX_SHADER, u + n),
                z = new THREE.WebGLShader(j, j.FRAGMENT_SHADER, v + o);
            j.attachShader(x, y), j.attachShader(x, z), void 0 !== p && j.bindAttribLocation(x, 0, p), j.linkProgram(x), j.getProgramParameter(x, j.LINK_STATUS) === !1 && (console.error("THREE.WebGLProgram: Could not initialise shader."), console.error("gl.VALIDATE_STATUS", j.getProgramParameter(x, j.VALIDATE_STATUS)), console.error("gl.getError()", j.getError())), "" !== j.getProgramInfoLog(x) && console.warn("THREE.WebGLProgram: gl.getProgramInfoLog()", j.getProgramInfoLog(x)), j.deleteShader(y), j.deleteShader(z);
            var A = ["viewMatrix", "modelViewMatrix", "projectionMatrix", "normalMatrix", "modelMatrix", "cameraPosition", "morphTargetInfluences", "bindMatrix", "bindMatrixInverse"];
            h.useVertexTexture ? (A.push("boneTexture"), A.push("boneTextureWidth"), A.push("boneTextureHeight")) : A.push("boneGlobalMatrices"), h.logarithmicDepthBuffer && A.push("logDepthBufFC");
            for (var B in l) A.push(B);
            this.uniforms = c(j, x, A), A = ["position", "normal", "uv", "uv2", "tangent", "color", "skinIndex", "skinWeight", "lineDistance"];
            for (var C = 0; C < h.maxMorphTargets; C++) A.push("morphTarget" + C);
            for (var C = 0; C < h.maxMorphNormals; C++) A.push("morphNormal" + C);
            for (var D in m) A.push(D);
            return this.attributes = d(j, x, A), this.attributesKeys = Object.keys(this.attributes), this.id = a++, this.code = f, this.usedTimes = 1, this.program = x, this.vertexShader = y, this.fragmentShader = z, this
        }
    }(), THREE.WebGLShader = function() {
        var a = function(a) {
            for (var b = a.split("\n"), c = 0; c < b.length; c++) b[c] = c + 1 + ": " + b[c];
            return b.join("\n")
        };
        return function(b, c, d) {
            var e = b.createShader(c);
            return b.shaderSource(e, d), b.compileShader(e), b.getShaderParameter(e, b.COMPILE_STATUS) === !1 && console.error("THREE.WebGLShader: Shader couldn't compile."), "" !== b.getShaderInfoLog(e) && (console.warn("THREE.WebGLShader: gl.getShaderInfoLog()", b.getShaderInfoLog(e)), console.warn(a(d))), e
        }
    }(), THREE.LensFlarePlugin = function(a, b) {
        function c(b) {
            var c = l.createProgram(),
                d = l.createShader(l.FRAGMENT_SHADER),
                e = l.createShader(l.VERTEX_SHADER),
                f = "precision " + a.getPrecision() + " float;\n";
            return l.shaderSource(d, f + b.fragmentShader), l.shaderSource(e, f + b.vertexShader), l.compileShader(d), l.compileShader(e), l.attachShader(c, d), l.attachShader(c, e), l.linkProgram(c), c
        }
        var d, e, f, g, h, i, j, k, l = a.context,
            m = function() {
                var a = new Float32Array([-1, -1, 0, 0, 1, -1, 1, 0, 1, 1, 1, 1, -1, 1, 0, 1]),
                    b = new Uint16Array([0, 1, 2, 0, 2, 3]);
                d = l.createBuffer(), e = l.createBuffer(), l.bindBuffer(l.ARRAY_BUFFER, d), l.bufferData(l.ARRAY_BUFFER, a, l.STATIC_DRAW), l.bindBuffer(l.ELEMENT_ARRAY_BUFFER, e), l.bufferData(l.ELEMENT_ARRAY_BUFFER, b, l.STATIC_DRAW), j = l.createTexture(), k = l.createTexture(), l.bindTexture(l.TEXTURE_2D, j), l.texImage2D(l.TEXTURE_2D, 0, l.RGB, 16, 16, 0, l.RGB, l.UNSIGNED_BYTE, null), l.texParameteri(l.TEXTURE_2D, l.TEXTURE_WRAP_S, l.CLAMP_TO_EDGE), l.texParameteri(l.TEXTURE_2D, l.TEXTURE_WRAP_T, l.CLAMP_TO_EDGE), l.texParameteri(l.TEXTURE_2D, l.TEXTURE_MAG_FILTER, l.NEAREST), l.texParameteri(l.TEXTURE_2D, l.TEXTURE_MIN_FILTER, l.NEAREST), l.bindTexture(l.TEXTURE_2D, k), l.texImage2D(l.TEXTURE_2D, 0, l.RGBA, 16, 16, 0, l.RGBA, l.UNSIGNED_BYTE, null), l.texParameteri(l.TEXTURE_2D, l.TEXTURE_WRAP_S, l.CLAMP_TO_EDGE), l.texParameteri(l.TEXTURE_2D, l.TEXTURE_WRAP_T, l.CLAMP_TO_EDGE), l.texParameteri(l.TEXTURE_2D, l.TEXTURE_MAG_FILTER, l.NEAREST), l.texParameteri(l.TEXTURE_2D, l.TEXTURE_MIN_FILTER, l.NEAREST), i = l.getParameter(l.MAX_VERTEX_TEXTURE_IMAGE_UNITS) > 0;
                var m;
                m = i ? {
                    vertexShader: ["uniform lowp int renderType;", "uniform vec3 screenPosition;", "uniform vec2 scale;", "uniform float rotation;", "uniform sampler2D occlusionMap;", "attribute vec2 position;", "attribute vec2 uv;", "varying vec2 vUV;", "varying float vVisibility;", "void main() {", "vUV = uv;", "vec2 pos = position;", "if( renderType == 2 ) {", "vec4 visibility = texture2D( occlusionMap, vec2( 0.1, 0.1 ) );", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.1 ) );", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.1 ) );", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) );", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.9 ) );", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) );", "visibility += texture2D( occlusionMap, vec2( 0.1, 0.9 ) );", "visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) );", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.5 ) );", "vVisibility =        visibility.r / 9.0;", "vVisibility *= 1.0 - visibility.g / 9.0;", "vVisibility *=       visibility.b / 9.0;", "vVisibility *= 1.0 - visibility.a / 9.0;", "pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;", "pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;", "}", "gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );", "}"].join("\n"),
                    fragmentShader: ["uniform lowp int renderType;", "uniform sampler2D map;", "uniform float opacity;", "uniform vec3 color;", "varying vec2 vUV;", "varying float vVisibility;", "void main() {", "if( renderType == 0 ) {", "gl_FragColor = vec4( 1.0, 0.0, 1.0, 0.0 );", "} else if( renderType == 1 ) {", "gl_FragColor = texture2D( map, vUV );", "} else {", "vec4 texture = texture2D( map, vUV );", "texture.a *= opacity * vVisibility;", "gl_FragColor = texture;", "gl_FragColor.rgb *= color;", "}", "}"].join("\n")
                } : {
                    vertexShader: ["uniform lowp int renderType;", "uniform vec3 screenPosition;", "uniform vec2 scale;", "uniform float rotation;", "attribute vec2 position;", "attribute vec2 uv;", "varying vec2 vUV;", "void main() {", "vUV = uv;", "vec2 pos = position;", "if( renderType == 2 ) {", "pos.x = cos( rotation ) * position.x - sin( rotation ) * position.y;", "pos.y = sin( rotation ) * position.x + cos( rotation ) * position.y;", "}", "gl_Position = vec4( ( pos * scale + screenPosition.xy ).xy, screenPosition.z, 1.0 );", "}"].join("\n"),
                    fragmentShader: ["precision mediump float;", "uniform lowp int renderType;", "uniform sampler2D map;", "uniform sampler2D occlusionMap;", "uniform float opacity;", "uniform vec3 color;", "varying vec2 vUV;", "void main() {", "if( renderType == 0 ) {", "gl_FragColor = vec4( texture2D( map, vUV ).rgb, 0.0 );", "} else if( renderType == 1 ) {", "gl_FragColor = texture2D( map, vUV );", "} else {", "float visibility = texture2D( occlusionMap, vec2( 0.5, 0.1 ) ).a;", "visibility += texture2D( occlusionMap, vec2( 0.9, 0.5 ) ).a;", "visibility += texture2D( occlusionMap, vec2( 0.5, 0.9 ) ).a;", "visibility += texture2D( occlusionMap, vec2( 0.1, 0.5 ) ).a;", "visibility = ( 1.0 - visibility / 4.0 );", "vec4 texture = texture2D( map, vUV );", "texture.a *= opacity * visibility;", "gl_FragColor = texture;", "gl_FragColor.rgb *= color;", "}", "}"].join("\n")
                }, f = c(m), g = {
                    vertex: l.getAttribLocation(f, "position"),
                    uv: l.getAttribLocation(f, "uv")
                }, h = {
                    renderType: l.getUniformLocation(f, "renderType"),
                    map: l.getUniformLocation(f, "map"),
                    occlusionMap: l.getUniformLocation(f, "occlusionMap"),
                    opacity: l.getUniformLocation(f, "opacity"),
                    color: l.getUniformLocation(f, "color"),
                    scale: l.getUniformLocation(f, "scale"),
                    rotation: l.getUniformLocation(f, "rotation"),
                    screenPosition: l.getUniformLocation(f, "screenPosition")
                }
            };
        this.render = function(c, n, o, p) {
            if (0 !== b.length) {
                var q = new THREE.Vector3,
                    r = p / o,
                    s = .5 * o,
                    t = .5 * p,
                    u = 16 / p,
                    v = new THREE.Vector2(u * r, u),
                    w = new THREE.Vector3(1, 1, 0),
                    x = new THREE.Vector2(1, 1);
                void 0 === f && m(), l.useProgram(f), l.enableVertexAttribArray(g.vertex), l.enableVertexAttribArray(g.uv), l.uniform1i(h.occlusionMap, 0), l.uniform1i(h.map, 1), l.bindBuffer(l.ARRAY_BUFFER, d), l.vertexAttribPointer(g.vertex, 2, l.FLOAT, !1, 16, 0), l.vertexAttribPointer(g.uv, 2, l.FLOAT, !1, 16, 8), l.bindBuffer(l.ELEMENT_ARRAY_BUFFER, e), l.disable(l.CULL_FACE), l.depthMask(!1);
                for (var y = 0, z = b.length; z > y; y++) {
                    u = 16 / p, v.set(u * r, u);
                    var A = b[y];
                    if (q.set(A.matrixWorld.elements[12], A.matrixWorld.elements[13], A.matrixWorld.elements[14]), q.applyMatrix4(n.matrixWorldInverse), q.applyProjection(n.projectionMatrix), w.copy(q), x.x = w.x * s + s, x.y = w.y * t + t, i || x.x > 0 && x.x < o && x.y > 0 && x.y < p) {
                        l.activeTexture(l.TEXTURE1), l.bindTexture(l.TEXTURE_2D, j), l.copyTexImage2D(l.TEXTURE_2D, 0, l.RGB, x.x - 8, x.y - 8, 16, 16, 0), l.uniform1i(h.renderType, 0), l.uniform2f(h.scale, v.x, v.y), l.uniform3f(h.screenPosition, w.x, w.y, w.z), l.disable(l.BLEND), l.enable(l.DEPTH_TEST), l.drawElements(l.TRIANGLES, 6, l.UNSIGNED_SHORT, 0), l.activeTexture(l.TEXTURE0), l.bindTexture(l.TEXTURE_2D, k), l.copyTexImage2D(l.TEXTURE_2D, 0, l.RGBA, x.x - 8, x.y - 8, 16, 16, 0), l.uniform1i(h.renderType, 1), l.disable(l.DEPTH_TEST), l.activeTexture(l.TEXTURE1), l.bindTexture(l.TEXTURE_2D, j), l.drawElements(l.TRIANGLES, 6, l.UNSIGNED_SHORT, 0), A.positionScreen.copy(w), A.customUpdateCallback ? A.customUpdateCallback(A) : A.updateLensFlares(), l.uniform1i(h.renderType, 2), l.enable(l.BLEND);
                        for (var B = 0, C = A.lensFlares.length; C > B; B++) {
                            var D = A.lensFlares[B];
                            D.opacity > .001 && D.scale > .001 && (w.x = D.x, w.y = D.y, w.z = D.z, u = D.size * D.scale / p, v.x = u * r, v.y = u, l.uniform3f(h.screenPosition, w.x, w.y, w.z), l.uniform2f(h.scale, v.x, v.y), l.uniform1f(h.rotation, D.rotation), l.uniform1f(h.opacity, D.opacity), l.uniform3f(h.color, D.color.r, D.color.g, D.color.b), a.setBlending(D.blending, D.blendEquation, D.blendSrc, D.blendDst), a.setTexture(D.texture, 1), l.drawElements(l.TRIANGLES, 6, l.UNSIGNED_SHORT, 0))
                        }
                    }
                }
                l.enable(l.CULL_FACE), l.enable(l.DEPTH_TEST), l.depthMask(!0), a.resetGLState()
            }
        }
    }, THREE.ShadowMapPlugin = function(a, b, c, d) {
        function e(a, b, d) {
            if (b.visible) {
                var f = c[b.id];
                if (f && b.castShadow && (b.frustumCulled === !1 || o.intersectsObject(b) === !0))
                    for (var g = 0, h = f.length; h > g; g++) {
                        var i = f[g];
                        b._modelViewMatrix.multiplyMatrices(d.matrixWorldInverse, b.matrixWorld), t.push(i)
                    }
                for (var g = 0, h = b.children.length; h > g; g++) e(a, b.children[g], d)
            }
        }

        function f(a, b) {
            var c = new THREE.DirectionalLight;
            c.isVirtual = !0, c.onlyShadow = !0, c.castShadow = !0, c.shadowCameraNear = a.shadowCameraNear, c.shadowCameraFar = a.shadowCameraFar, c.shadowCameraLeft = a.shadowCameraLeft, c.shadowCameraRight = a.shadowCameraRight, c.shadowCameraBottom = a.shadowCameraBottom, c.shadowCameraTop = a.shadowCameraTop, c.shadowCameraVisible = a.shadowCameraVisible, c.shadowDarkness = a.shadowDarkness, c.shadowBias = a.shadowCascadeBias[b], c.shadowMapWidth = a.shadowCascadeWidth[b], c.shadowMapHeight = a.shadowCascadeHeight[b], c.pointsWorld = [], c.pointsFrustum = [];
            for (var d = c.pointsWorld, e = c.pointsFrustum, f = 0; 8 > f; f++) d[f] = new THREE.Vector3, e[f] = new THREE.Vector3;
            var g = a.shadowCascadeNearZ[b],
                h = a.shadowCascadeFarZ[b];
            return e[0].set(-1, -1, g), e[1].set(1, -1, g), e[2].set(-1, 1, g), e[3].set(1, 1, g), e[4].set(-1, -1, h), e[5].set(1, -1, h), e[6].set(-1, 1, h), e[7].set(1, 1, h), c
        }

        function g(a, b) {
            var c = a.shadowCascadeArray[b];
            c.position.copy(a.position), c.target.position.copy(a.target.position), c.lookAt(c.target), c.shadowCameraVisible = a.shadowCameraVisible, c.shadowDarkness = a.shadowDarkness, c.shadowBias = a.shadowCascadeBias[b];
            var d = a.shadowCascadeNearZ[b],
                e = a.shadowCascadeFarZ[b],
                f = c.pointsFrustum;
            f[0].z = d, f[1].z = d, f[2].z = d, f[3].z = d, f[4].z = e, f[5].z = e, f[6].z = e, f[7].z = e
        }

        function h(a, b) {
            var c = b.shadowCamera,
                d = b.pointsFrustum,
                e = b.pointsWorld;
            q.set(1 / 0, 1 / 0, 1 / 0), r.set(-(1 / 0), -(1 / 0), -(1 / 0));
            for (var f = 0; 8 > f; f++) {
                var g = e[f];
                g.copy(d[f]), g.unproject(a), g.applyMatrix4(c.matrixWorldInverse), g.x < q.x && (q.x = g.x), g.x > r.x && (r.x = g.x), g.y < q.y && (q.y = g.y), g.y > r.y && (r.y = g.y), g.z < q.z && (q.z = g.z), g.z > r.z && (r.z = g.z)
            }
            c.left = q.x, c.right = r.x, c.top = r.y, c.bottom = q.y, c.updateProjectionMatrix()
        }

        function i(a) {
            return a.material instanceof THREE.MeshFaceMaterial ? a.material.materials[0] : a.material
        }
        var j, k, l, m, n = a.context,
            o = new THREE.Frustum,
            p = new THREE.Matrix4,
            q = new THREE.Vector3,
            r = new THREE.Vector3,
            s = new THREE.Vector3,
            t = [],
            u = THREE.ShaderLib.depthRGBA,
            v = THREE.UniformsUtils.clone(u.uniforms);
        j = new THREE.ShaderMaterial({
            uniforms: v,
            vertexShader: u.vertexShader,
            fragmentShader: u.fragmentShader
        }), k = new THREE.ShaderMaterial({
            uniforms: v,
            vertexShader: u.vertexShader,
            fragmentShader: u.fragmentShader,
            morphTargets: !0
        }), l = new THREE.ShaderMaterial({
            uniforms: v,
            vertexShader: u.vertexShader,
            fragmentShader: u.fragmentShader,
            skinning: !0
        }), m = new THREE.ShaderMaterial({
            uniforms: v,
            vertexShader: u.vertexShader,
            fragmentShader: u.fragmentShader,
            morphTargets: !0,
            skinning: !0
        }), j._shadowPass = !0, k._shadowPass = !0, l._shadowPass = !0, m._shadowPass = !0, this.render = function(c, q) {
            if (a.shadowMapEnabled !== !1) {
                var r, u, v, w, x, y, z, A, B, C, D, E, F, G = [],
                    H = 0,
                    I = null;
                for (n.clearColor(1, 1, 1, 1), n.disable(n.BLEND), n.enable(n.CULL_FACE), n.frontFace(n.CCW), n.cullFace(a.shadowMapCullFace === THREE.CullFaceFront ? n.FRONT : n.BACK), a.setDepthTest(!0), r = 0, u = b.length; u > r; r++)
                    if (F = b[r], F.castShadow)
                        if (F instanceof THREE.DirectionalLight && F.shadowCascade)
                            for (x = 0; x < F.shadowCascadeCount; x++) {
                                var J;
                                if (F.shadowCascadeArray[x]) J = F.shadowCascadeArray[x];
                                else {
                                    J = f(F, x), J.originalCamera = q;
                                    var K = new THREE.Gyroscope;
                                    K.position.copy(F.shadowCascadeOffset), K.add(J), K.add(J.target), q.add(K), F.shadowCascadeArray[x] = J, console.log("Created virtualLight", J)
                                }
                                g(F, x), G[H] = J, H++
                            } else G[H] = F, H++;
                for (r = 0, u = G.length; u > r; r++) {
                    if (F = G[r], !F.shadowMap) {
                        var L = THREE.LinearFilter;
                        a.shadowMapType === THREE.PCFSoftShadowMap && (L = THREE.NearestFilter);
                        var M = {
                            minFilter: L,
                            magFilter: L,
                            format: THREE.RGBAFormat
                        };
                        F.shadowMap = new THREE.WebGLRenderTarget(F.shadowMapWidth, F.shadowMapHeight, M), F.shadowMapSize = new THREE.Vector2(F.shadowMapWidth, F.shadowMapHeight), F.shadowMatrix = new THREE.Matrix4
                    }
                    if (!F.shadowCamera) {
                        if (F instanceof THREE.SpotLight) F.shadowCamera = new THREE.PerspectiveCamera(F.shadowCameraFov, F.shadowMapWidth / F.shadowMapHeight, F.shadowCameraNear, F.shadowCameraFar);
                        else {
                            if (!(F instanceof THREE.DirectionalLight)) {
                                console.error("Unsupported light type for shadow");
                                continue
                            }
                            F.shadowCamera = new THREE.OrthographicCamera(F.shadowCameraLeft, F.shadowCameraRight, F.shadowCameraTop, F.shadowCameraBottom, F.shadowCameraNear, F.shadowCameraFar)
                        }
                        c.add(F.shadowCamera), c.autoUpdate === !0 && c.updateMatrixWorld()
                    }
                    F.shadowCameraVisible && !F.cameraHelper && (F.cameraHelper = new THREE.CameraHelper(F.shadowCamera), c.add(F.cameraHelper)), F.isVirtual && J.originalCamera == q && h(q, F), y = F.shadowMap, z = F.shadowMatrix, A = F.shadowCamera, A.position.setFromMatrixPosition(F.matrixWorld), s.setFromMatrixPosition(F.target.matrixWorld), A.lookAt(s), A.updateMatrixWorld(), A.matrixWorldInverse.getInverse(A.matrixWorld), F.cameraHelper && (F.cameraHelper.visible = F.shadowCameraVisible), F.shadowCameraVisible && F.cameraHelper.update(), z.set(.5, 0, 0, .5, 0, .5, 0, .5, 0, 0, .5, .5, 0, 0, 0, 1), z.multiply(A.projectionMatrix), z.multiply(A.matrixWorldInverse), p.multiplyMatrices(A.projectionMatrix, A.matrixWorldInverse), o.setFromMatrix(p), a.setRenderTarget(y), a.clear(), t.length = 0, e(c, c, A);
                    var N, O, P;
                    for (v = 0, w = t.length; w > v; v++) D = t[v], E = D.object, B = D.buffer, N = i(E), O = void 0 !== E.geometry.morphTargets && E.geometry.morphTargets.length > 0 && N.morphTargets, P = E instanceof THREE.SkinnedMesh && N.skinning, C = E.customDepthMaterial ? E.customDepthMaterial : P ? O ? m : l : O ? k : j, a.setMaterialFaces(N), B instanceof THREE.BufferGeometry ? a.renderBufferDirect(A, b, I, C, B, E) : a.renderBuffer(A, b, I, C, B, E);
                    for (v = 0, w = d.length; w > v; v++) D = d[v], E = D.object, E.visible && E.castShadow && (E._modelViewMatrix.multiplyMatrices(A.matrixWorldInverse, E.matrixWorld), a.renderImmediateObject(A, b, I, j, E))
                }
                var Q = a.getClearColor(),
                    R = a.getClearAlpha();
                n.clearColor(Q.r, Q.g, Q.b, R), n.enable(n.BLEND), a.shadowMapCullFace === THREE.CullFaceFront && n.cullFace(n.BACK), a.resetGLState()
            }
        }
    }, THREE.SpritePlugin = function(a, b) {
        function c() {
            var b = k.createProgram(),
                c = k.createShader(k.VERTEX_SHADER),
                d = k.createShader(k.FRAGMENT_SHADER);
            return k.shaderSource(c, ["precision " + a.getPrecision() + " float;", "uniform mat4 modelViewMatrix;", "uniform mat4 projectionMatrix;", "uniform float rotation;", "uniform vec2 scale;", "uniform vec2 uvOffset;", "uniform vec2 uvScale;", "attribute vec2 position;", "attribute vec2 uv;", "varying vec2 vUV;", "void main() {", "vUV = uvOffset + uv * uvScale;", "vec2 alignedPosition = position * scale;", "vec2 rotatedPosition;", "rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;", "rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;", "vec4 finalPosition;", "finalPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );", "finalPosition.xy += rotatedPosition;", "finalPosition = projectionMatrix * finalPosition;", "gl_Position = finalPosition;", "}"].join("\n")), k.shaderSource(d, ["precision " + a.getPrecision() + " float;", "uniform vec3 color;", "uniform sampler2D map;", "uniform float opacity;", "uniform int fogType;", "uniform vec3 fogColor;", "uniform float fogDensity;", "uniform float fogNear;", "uniform float fogFar;", "uniform float alphaTest;", "varying vec2 vUV;", "void main() {", "vec4 texture = texture2D( map, vUV );", "if ( texture.a < alphaTest ) discard;", "gl_FragColor = vec4( color * texture.xyz, texture.a * opacity );", "if ( fogType > 0 ) {", "float depth = gl_FragCoord.z / gl_FragCoord.w;", "float fogFactor = 0.0;", "if ( fogType == 1 ) {", "fogFactor = smoothstep( fogNear, fogFar, depth );", "} else {", "const float LOG2 = 1.442695;", "float fogFactor = exp2( - fogDensity * fogDensity * depth * depth * LOG2 );", "fogFactor = 1.0 - clamp( fogFactor, 0.0, 1.0 );", "}", "gl_FragColor = mix( gl_FragColor, vec4( fogColor, gl_FragColor.w ), fogFactor );", "}", "}"].join("\n")), k.compileShader(c), k.compileShader(d), k.attachShader(b, c), k.attachShader(b, d), k.linkProgram(b), b
        }

        function d(a, b) {
            return a.z !== b.z ? b.z - a.z : b.id - a.id
        }
        var e, f, g, h, i, j, k = a.context,
            l = new THREE.Vector3,
            m = new THREE.Quaternion,
            n = new THREE.Vector3,
            o = function() {
                var a = new Float32Array([-.5, -.5, 0, 0, .5, -.5, 1, 0, .5, .5, 1, 1, -.5, .5, 0, 1]),
                    b = new Uint16Array([0, 1, 2, 0, 2, 3]);
                e = k.createBuffer(), f = k.createBuffer(), k.bindBuffer(k.ARRAY_BUFFER, e), k.bufferData(k.ARRAY_BUFFER, a, k.STATIC_DRAW), k.bindBuffer(k.ELEMENT_ARRAY_BUFFER, f), k.bufferData(k.ELEMENT_ARRAY_BUFFER, b, k.STATIC_DRAW), g = c(), h = {
                    position: k.getAttribLocation(g, "position"),
                    uv: k.getAttribLocation(g, "uv")
                }, i = {
                    uvOffset: k.getUniformLocation(g, "uvOffset"),
                    uvScale: k.getUniformLocation(g, "uvScale"),
                    rotation: k.getUniformLocation(g, "rotation"),
                    scale: k.getUniformLocation(g, "scale"),
                    color: k.getUniformLocation(g, "color"),
                    map: k.getUniformLocation(g, "map"),
                    opacity: k.getUniformLocation(g, "opacity"),
                    modelViewMatrix: k.getUniformLocation(g, "modelViewMatrix"),
                    projectionMatrix: k.getUniformLocation(g, "projectionMatrix"),
                    fogType: k.getUniformLocation(g, "fogType"),
                    fogDensity: k.getUniformLocation(g, "fogDensity"),
                    fogNear: k.getUniformLocation(g, "fogNear"),
                    fogFar: k.getUniformLocation(g, "fogFar"),
                    fogColor: k.getUniformLocation(g, "fogColor"),
                    alphaTest: k.getUniformLocation(g, "alphaTest")
                };
                var d = document.createElement("canvas");
                d.width = 8, d.height = 8;
                var l = d.getContext("2d");
                l.fillStyle = "white", l.fillRect(0, 0, 8, 8), j = new THREE.Texture(d), j.needsUpdate = !0
            };
        this.render = function(c, p) {
            if (0 !== b.length) {
                void 0 === g && o(), k.useProgram(g), k.enableVertexAttribArray(h.position), k.enableVertexAttribArray(h.uv), k.disable(k.CULL_FACE), k.enable(k.BLEND), k.bindBuffer(k.ARRAY_BUFFER, e), k.vertexAttribPointer(h.position, 2, k.FLOAT, !1, 16, 0), k.vertexAttribPointer(h.uv, 2, k.FLOAT, !1, 16, 8), k.bindBuffer(k.ELEMENT_ARRAY_BUFFER, f), k.uniformMatrix4fv(i.projectionMatrix, !1, p.projectionMatrix.elements), k.activeTexture(k.TEXTURE0), k.uniform1i(i.map, 0);
                var q = 0,
                    r = 0,
                    s = c.fog;
                s ? (k.uniform3f(i.fogColor, s.color.r, s.color.g, s.color.b), s instanceof THREE.Fog ? (k.uniform1f(i.fogNear, s.near), k.uniform1f(i.fogFar, s.far), k.uniform1i(i.fogType, 1), q = 1, r = 1) : s instanceof THREE.FogExp2 && (k.uniform1f(i.fogDensity, s.density), k.uniform1i(i.fogType, 2), q = 2, r = 2)) : (k.uniform1i(i.fogType, 0), q = 0, r = 0);
                for (var t = 0, u = b.length; u > t; t++) {
                    var v = b[t];
                    v._modelViewMatrix.multiplyMatrices(p.matrixWorldInverse, v.matrixWorld), v.z = -v._modelViewMatrix.elements[14]
                }
                b.sort(d);
                for (var w = [], t = 0, u = b.length; u > t; t++) {
                    var v = b[t],
                        x = v.material;
                    k.uniform1f(i.alphaTest, x.alphaTest), k.uniformMatrix4fv(i.modelViewMatrix, !1, v._modelViewMatrix.elements), v.matrixWorld.decompose(l, m, n), w[0] = n.x, w[1] = n.y;
                    var y = 0;
                    c.fog && x.fog && (y = r), q !== y && (k.uniform1i(i.fogType, y), q = y), null !== x.map ? (k.uniform2f(i.uvOffset, x.map.offset.x, x.map.offset.y), k.uniform2f(i.uvScale, x.map.repeat.x, x.map.repeat.y)) : (k.uniform2f(i.uvOffset, 0, 0), k.uniform2f(i.uvScale, 1, 1)), k.uniform1f(i.opacity, x.opacity), k.uniform3f(i.color, x.color.r, x.color.g, x.color.b), k.uniform1f(i.rotation, x.rotation), k.uniform2fv(i.scale, w), a.setBlending(x.blending, x.blendEquation, x.blendSrc, x.blendDst), a.setDepthTest(x.depthTest), a.setDepthWrite(x.depthWrite), x.map && x.map.image && x.map.image.width ? a.setTexture(x.map, 0) : a.setTexture(j, 0), k.drawElements(k.TRIANGLES, 6, k.UNSIGNED_SHORT, 0)
                }
                k.enable(k.CULL_FACE), a.resetGLState()
            }
        }
    }, THREE.GeometryUtils = {
        merge: function(a, b, c) {
            console.warn("THREE.GeometryUtils: .merge() has been moved to Geometry. Use geometry.merge( geometry2, matrix, materialIndexOffset ) instead.");
            var d;
            b instanceof THREE.Mesh && (b.matrixAutoUpdate && b.updateMatrix(), d = b.matrix, b = b.geometry), a.merge(b, d, c)
        },
        center: function(a) {
            return console.warn("THREE.GeometryUtils: .center() has been moved to Geometry. Use geometry.center() instead."), a.center()
        }
    }, THREE.ImageUtils = {
        crossOrigin: void 0,
        loadTexture: function(a, b, c, d) {
            var e = new THREE.ImageLoader;
            e.crossOrigin = this.crossOrigin;
            var f = new THREE.Texture(void 0, b);
            return e.load(a, function(a) {
                f.image = a, f.needsUpdate = !0, c && c(f)
            }, void 0, function(a) {
                d && d(a)
            }), f.sourceFile = a, f
        },
        loadTextureCube: function(a, b, c, d) {
            var e = [],
                f = new THREE.ImageLoader;
            f.crossOrigin = this.crossOrigin;
            var g = new THREE.CubeTexture(e, b);
            g.flipY = !1;
            for (var h = 0, i = function(b) {
                    f.load(a[b], function(a) {
                        g.images[b] = a, h += 1, 6 === h && (g.needsUpdate = !0, c && c(g))
                    }, void 0, d)
                }, j = 0, k = a.length; k > j; ++j) i(j);
            return g
        },
        loadCompressedTexture: function() {
            console.error("THREE.ImageUtils.loadCompressedTexture has been removed. Use THREE.DDSLoader instead.")
        },
        loadCompressedTextureCube: function() {
            console.error("THREE.ImageUtils.loadCompressedTextureCube has been removed. Use THREE.DDSLoader instead.")
        },
        getNormalMap: function(a, b) {
            var c = function(a, b) {
                    return [a[1] * b[2] - a[2] * b[1], a[2] * b[0] - a[0] * b[2], a[0] * b[1] - a[1] * b[0]]
                },
                d = function(a, b) {
                    return [a[0] - b[0], a[1] - b[1], a[2] - b[2]]
                },
                e = function(a) {
                    var b = Math.sqrt(a[0] * a[0] + a[1] * a[1] + a[2] * a[2]);
                    return [a[0] / b, a[1] / b, a[2] / b]
                };
            b = 1 | b;
            var f = a.width,
                g = a.height,
                h = document.createElement("canvas");
            h.width = f, h.height = g;
            var i = h.getContext("2d");
            i.drawImage(a, 0, 0);
            for (var j = i.getImageData(0, 0, f, g).data, k = i.createImageData(f, g), l = k.data, m = 0; f > m; m++)
                for (var n = 0; g > n; n++) {
                    var o = 0 > n - 1 ? 0 : n - 1,
                        p = n + 1 > g - 1 ? g - 1 : n + 1,
                        q = 0 > m - 1 ? 0 : m - 1,
                        r = m + 1 > f - 1 ? f - 1 : m + 1,
                        s = [],
                        t = [0, 0, j[4 * (n * f + m)] / 255 * b];
                    s.push([-1, 0, j[4 * (n * f + q)] / 255 * b]), s.push([-1, -1, j[4 * (o * f + q)] / 255 * b]), s.push([0, -1, j[4 * (o * f + m)] / 255 * b]), s.push([1, -1, j[4 * (o * f + r)] / 255 * b]), s.push([1, 0, j[4 * (n * f + r)] / 255 * b]), s.push([1, 1, j[4 * (p * f + r)] / 255 * b]), s.push([0, 1, j[4 * (p * f + m)] / 255 * b]), s.push([-1, 1, j[4 * (p * f + q)] / 255 * b]);
                    for (var u = [], v = s.length, w = 0; v > w; w++) {
                        var x = s[w],
                            y = s[(w + 1) % v];
                        x = d(x, t), y = d(y, t), u.push(e(c(x, y)))
                    }
                    for (var z = [0, 0, 0], w = 0; w < u.length; w++) z[0] += u[w][0], z[1] += u[w][1], z[2] += u[w][2];
                    z[0] /= u.length, z[1] /= u.length, z[2] /= u.length;
                    var A = 4 * (n * f + m);
                    l[A] = (z[0] + 1) / 2 * 255 | 0, l[A + 1] = (z[1] + 1) / 2 * 255 | 0, l[A + 2] = 255 * z[2] | 0, l[A + 3] = 255
                }
            return i.putImageData(k, 0, 0), h
        },
        generateDataTexture: function(a, b, c) {
            for (var d = a * b, e = new Uint8Array(3 * d), f = Math.floor(255 * c.r), g = Math.floor(255 * c.g), h = Math.floor(255 * c.b), i = 0; d > i; i++) e[3 * i] = f, e[3 * i + 1] = g, e[3 * i + 2] = h;
            var j = new THREE.DataTexture(e, a, b, THREE.RGBFormat);
            return j.needsUpdate = !0, j
        }
    }, THREE.SceneUtils = {
        createMultiMaterialObject: function(a, b) {
            for (var c = new THREE.Object3D, d = 0, e = b.length; e > d; d++) c.add(new THREE.Mesh(a, b[d]));
            return c
        },
        detach: function(a, b, c) {
            a.applyMatrix(b.matrixWorld), b.remove(a), c.add(a)
        },
        attach: function(a, b, c) {
            var d = new THREE.Matrix4;
            d.getInverse(c.matrixWorld), a.applyMatrix(d), b.remove(a), c.add(a)
        }
    }, THREE.FontUtils = {
        faces: {},
        face: "helvetiker",
        weight: "normal",
        style: "normal",
        size: 150,
        divisions: 10,
        getFace: function() {
            try {
                return this.faces[this.face][this.weight][this.style]
            } catch (a) {
                throw "The font " + this.face + " with " + this.weight + " weight and " + this.style + " style is missing."
            }
        },
        loadFace: function(a) {
            var b = a.familyName.toLowerCase(),
                c = this;
            c.faces[b] = c.faces[b] || {}, c.faces[b][a.cssFontWeight] = c.faces[b][a.cssFontWeight] || {}, c.faces[b][a.cssFontWeight][a.cssFontStyle] = a;
            c.faces[b][a.cssFontWeight][a.cssFontStyle] = a;
            return a
        },
        drawText: function(a) {
            var b, c = this.getFace(),
                d = this.size / c.resolution,
                e = 0,
                f = String(a).split(""),
                g = f.length,
                h = [];
            for (b = 0; g > b; b++) {
                var i = new THREE.Path,
                    j = this.extractGlyphPoints(f[b], c, d, e, i);
                e += j.offset, h.push(j.path)
            }
            var k = e / 2;
            return {
                paths: h,
                offset: k
            }
        },
        extractGlyphPoints: function(a, b, c, d, e) {
            var f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y = [],
                z = b.glyphs[a] || b.glyphs["?"];
            if (z) {
                if (z.o)
                    for (i = z._cachedOutline || (z._cachedOutline = z.o.split(" ")), k = i.length, l = c, m = c, f = 0; k > f;) switch (j = i[f++]) {
                        case "m":
                            n = i[f++] * l + d, o = i[f++] * m, e.moveTo(n, o);
                            break;
                        case "l":
                            n = i[f++] * l + d, o = i[f++] * m, e.lineTo(n, o);
                            break;
                        case "q":
                            if (p = i[f++] * l + d, q = i[f++] * m, t = i[f++] * l + d, u = i[f++] * m, e.quadraticCurveTo(t, u, p, q), x = y[y.length - 1])
                                for (r = x.x, s = x.y, g = 1, h = this.divisions; h >= g; g++) {
                                    var A = g / h;
                                    THREE.Shape.Utils.b2(A, r, t, p), THREE.Shape.Utils.b2(A, s, u, q)
                                }
                            break;
                        case "b":
                            if (p = i[f++] * l + d, q = i[f++] * m, t = i[f++] * l + d, u = i[f++] * m, v = i[f++] * l + d, w = i[f++] * m, e.bezierCurveTo(t, u, v, w, p, q), x = y[y.length - 1])
                                for (r = x.x, s = x.y, g = 1, h = this.divisions; h >= g; g++) {
                                    var A = g / h;
                                    THREE.Shape.Utils.b3(A, r, t, v, p), THREE.Shape.Utils.b3(A, s, u, w, q)
                                }
                    }
                return {
                    offset: z.ha * c,
                    path: e
                }
            }
        }
    }, THREE.FontUtils.generateShapes = function(a, b) {
        b = b || {};
        var c = void 0 !== b.size ? b.size : 100,
            d = void 0 !== b.curveSegments ? b.curveSegments : 4,
            e = void 0 !== b.font ? b.font : "helvetiker",
            f = void 0 !== b.weight ? b.weight : "normal",
            g = void 0 !== b.style ? b.style : "normal";
        THREE.FontUtils.size = c, THREE.FontUtils.divisions = d, THREE.FontUtils.face = e, THREE.FontUtils.weight = f, THREE.FontUtils.style = g;
        for (var h = THREE.FontUtils.drawText(a), i = h.paths, j = [], k = 0, l = i.length; l > k; k++) Array.prototype.push.apply(j, i[k].toShapes());
        return j
    },
    function(a) {
        var b = 1e-10,
            c = function(a, b) {
                var c = a.length;
                if (3 > c) return null;
                var f, g, h, i = [],
                    j = [],
                    k = [];
                if (d(a) > 0)
                    for (g = 0; c > g; g++) j[g] = g;
                else
                    for (g = 0; c > g; g++) j[g] = c - 1 - g;
                var l = c,
                    m = 2 * l;
                for (g = l - 1; l > 2;) {
                    if (m-- <= 0) return console.log("Warning, unable to triangulate polygon!"), b ? k : i;
                    if (f = g, f >= l && (f = 0), g = f + 1, g >= l && (g = 0), h = g + 1, h >= l && (h = 0), e(a, f, g, h, l, j)) {
                        var n, o, p, q, r;
                        for (n = j[f], o = j[g], p = j[h], i.push([a[n], a[o], a[p]]), k.push([j[f], j[g], j[h]]), q = g, r = g + 1; l > r; q++, r++) j[q] = j[r];
                        l--, m = 2 * l
                    }
                }
                return b ? k : i
            },
            d = function(a) {
                for (var b = a.length, c = 0, d = b - 1, e = 0; b > e; d = e++) c += a[d].x * a[e].y - a[e].x * a[d].y;
                return .5 * c
            },
            e = function(a, c, d, e, f, g) {
                var h, i, j, k, l, m, n, o, p;
                if (i = a[g[c]].x, j = a[g[c]].y, k = a[g[d]].x, l = a[g[d]].y, m = a[g[e]].x, n = a[g[e]].y, b > (k - i) * (n - j) - (l - j) * (m - i)) return !1;
                var q, r, s, t, u, v, w, x, y, z, A, B, C, D, E;
                for (q = m - k, r = n - l, s = i - m, t = j - n, u = k - i, v = l - j, h = 0; f > h; h++)
                    if (o = a[g[h]].x, p = a[g[h]].y, !(o === i && p === j || o === k && p === l || o === m && p === n) && (w = o - i, x = p - j, y = o - k, z = p - l, A = o - m, B = p - n, E = q * z - r * y, C = u * x - v * w, D = s * B - t * A, E >= -b && D >= -b && C >= -b)) return !1;
                return !0
            };
        return a.Triangulate = c, a.Triangulate.area = d, a
    }(THREE.FontUtils), self._typeface_js = {
        faces: THREE.FontUtils.faces,
        loadFace: THREE.FontUtils.loadFace
    }, THREE.typeface_js = self._typeface_js, THREE.Audio = function(a) {
        THREE.Object3D.call(this), this.type = "Audio", this.context = a.context, this.source = this.context.createBufferSource(), this.gain = this.context.createGain(), this.gain.connect(this.context.destination), this.panner = this.context.createPanner(), this.panner.connect(this.gain)
    }, THREE.Audio.prototype = Object.create(THREE.Object3D.prototype), THREE.Audio.prototype.constructor = THREE.Audio, THREE.Audio.prototype.load = function(a) {
        var b = this,
            c = new XMLHttpRequest;
        return c.open("GET", a, !0), c.responseType = "arraybuffer", c.onload = function() {
            b.context.decodeAudioData(this.response, function(a) {
                b.source.buffer = a, b.source.connect(b.panner), b.source.start(0)
            })
        }, c.send(), this
    }, THREE.Audio.prototype.setLoop = function(a) {
        this.source.loop = a
    }, THREE.Audio.prototype.setRefDistance = function(a) {
        this.panner.refDistance = a
    }, THREE.Audio.prototype.setRolloffFactor = function(a) {
        this.panner.rolloffFactor = a
    }, THREE.Audio.prototype.updateMatrixWorld = function() {
        var a = new THREE.Vector3;
        return function(b) {
            THREE.Object3D.prototype.updateMatrixWorld.call(this, b), a.setFromMatrixPosition(this.matrixWorld), this.panner.setPosition(a.x, a.y, a.z)
        }
    }(), THREE.AudioListener = function() {
        THREE.Object3D.call(this), this.type = "AudioListener", this.context = new(window.AudioContext || window.webkitAudioContext)
    }, THREE.AudioListener.prototype = Object.create(THREE.Object3D.prototype), THREE.AudioListener.prototype.constructor = THREE.AudioListener, THREE.AudioListener.prototype.updateMatrixWorld = function() {
        var a = new THREE.Vector3,
            b = new THREE.Quaternion,
            c = new THREE.Vector3,
            d = new THREE.Vector3,
            e = new THREE.Vector3,
            f = new THREE.Vector3;
        return function(g) {
            THREE.Object3D.prototype.updateMatrixWorld.call(this, g);
            var h = this.context.listener,
                i = this.up;
            this.matrixWorld.decompose(a, b, c), d.set(0, 0, -1).applyQuaternion(b), e.subVectors(a, f), h.setPosition(a.x, a.y, a.z), h.setOrientation(d.x, d.y, d.z, i.x, i.y, i.z), h.setVelocity(e.x, e.y, e.z), f.copy(a)
        }
    }(), THREE.Curve = function() {}, THREE.Curve.prototype.getPoint = function() {
        return console.log("Warning, getPoint() not implemented!"), null
    }, THREE.Curve.prototype.getPointAt = function(a) {
        var b = this.getUtoTmapping(a);
        return this.getPoint(b)
    }, THREE.Curve.prototype.getPoints = function(a) {
        a || (a = 5);
        var b, c = [];
        for (b = 0; a >= b; b++) c.push(this.getPoint(b / a));
        return c
    }, THREE.Curve.prototype.getSpacedPoints = function(a) {
        a || (a = 5);
        var b, c = [];
        for (b = 0; a >= b; b++) c.push(this.getPointAt(b / a));
        return c
    }, THREE.Curve.prototype.getLength = function() {
        var a = this.getLengths();
        return a[a.length - 1]
    }, THREE.Curve.prototype.getLengths = function(a) {
        if (a || (a = this.__arcLengthDivisions ? this.__arcLengthDivisions : 200), this.cacheArcLengths && this.cacheArcLengths.length == a + 1 && !this.needsUpdate) return this.cacheArcLengths;
        this.needsUpdate = !1;
        var b, c, d = [],
            e = this.getPoint(0),
            f = 0;
        for (d.push(0), c = 1; a >= c; c++) b = this.getPoint(c / a), f += b.distanceTo(e), d.push(f), e = b;
        return this.cacheArcLengths = d, d
    }, THREE.Curve.prototype.updateArcLengths = function() {
        this.needsUpdate = !0, this.getLengths()
    }, THREE.Curve.prototype.getUtoTmapping = function(a, b) {
        var c, d = this.getLengths(),
            e = 0,
            f = d.length;
        c = b ? b : a * d[f - 1];
        for (var g, h = 0, i = f - 1; i >= h;)
            if (e = Math.floor(h + (i - h) / 2), g = d[e] - c, 0 > g) h = e + 1;
            else {
                if (!(g > 0)) {
                    i = e;
                    break
                }
                i = e - 1
            }
        if (e = i, d[e] == c) {
            var j = e / (f - 1);
            return j
        }
        var k = d[e],
            l = d[e + 1],
            m = l - k,
            n = (c - k) / m,
            j = (e + n) / (f - 1);
        return j
    }, THREE.Curve.prototype.getTangent = function(a) {
        var b = 1e-4,
            c = a - b,
            d = a + b;
        0 > c && (c = 0), d > 1 && (d = 1);
        var e = this.getPoint(c),
            f = this.getPoint(d),
            g = f.clone().sub(e);
        return g.normalize()
    }, THREE.Curve.prototype.getTangentAt = function(a) {
        var b = this.getUtoTmapping(a);
        return this.getTangent(b)
    }, THREE.Curve.Utils = {
        tangentQuadraticBezier: function(a, b, c, d) {
            return 2 * (1 - a) * (c - b) + 2 * a * (d - c)
        },
        tangentCubicBezier: function(a, b, c, d, e) {
            return -3 * b * (1 - a) * (1 - a) + 3 * c * (1 - a) * (1 - a) - 6 * a * c * (1 - a) + 6 * a * d * (1 - a) - 3 * a * a * d + 3 * a * a * e
        },
        tangentSpline: function(a) {
            var b = 6 * a * a - 6 * a,
                c = 3 * a * a - 4 * a + 1,
                d = -6 * a * a + 6 * a,
                e = 3 * a * a - 2 * a;
            return b + c + d + e
        },
        interpolate: function(a, b, c, d, e) {
            var f = .5 * (c - a),
                g = .5 * (d - b),
                h = e * e,
                i = e * h;
            return (2 * b - 2 * c + f + g) * i + (-3 * b + 3 * c - 2 * f - g) * h + f * e + b
        }
    }, THREE.Curve.create = function(a, b) {
        return a.prototype = Object.create(THREE.Curve.prototype), a.prototype.constructor = a, a.prototype.getPoint = b, a
    }, THREE.CurvePath = function() {
        this.curves = [], this.bends = [], this.autoClose = !1
    }, THREE.CurvePath.prototype = Object.create(THREE.Curve.prototype), THREE.CurvePath.prototype.constructor = THREE.CurvePath, THREE.CurvePath.prototype.add = function(a) {
        this.curves.push(a)
    }, THREE.CurvePath.prototype.checkConnection = function() {}, THREE.CurvePath.prototype.closePath = function() {
        var a = this.curves[0].getPoint(0),
            b = this.curves[this.curves.length - 1].getPoint(1);
        a.equals(b) || this.curves.push(new THREE.LineCurve(b, a))
    }, THREE.CurvePath.prototype.getPoint = function(a) {
        for (var b, c, d = a * this.getLength(), e = this.getCurveLengths(), f = 0; f < e.length;) {
            if (e[f] >= d) {
                b = e[f] - d, c = this.curves[f];
                var g = 1 - b / c.getLength();
                return c.getPointAt(g)
            }
            f++
        }
        return null
    }, THREE.CurvePath.prototype.getLength = function() {
        var a = this.getCurveLengths();
        return a[a.length - 1]
    }, THREE.CurvePath.prototype.getCurveLengths = function() {
        if (this.cacheLengths && this.cacheLengths.length == this.curves.length) return this.cacheLengths;
        var a, b = [],
            c = 0,
            d = this.curves.length;
        for (a = 0; d > a; a++) c += this.curves[a].getLength(), b.push(c);
        return this.cacheLengths = b, b
    }, THREE.CurvePath.prototype.getBoundingBox = function() {
        var a, b, c, d, e, f, g = this.getPoints();
        a = b = Number.NEGATIVE_INFINITY, d = e = Number.POSITIVE_INFINITY;
        var h, i, j, k, l = g[0] instanceof THREE.Vector3;
        for (k = l ? new THREE.Vector3 : new THREE.Vector2, i = 0, j = g.length; j > i; i++) h = g[i], h.x > a ? a = h.x : h.x < d && (d = h.x), h.y > b ? b = h.y : h.y < e && (e = h.y), l && (h.z > c ? c = h.z : h.z < f && (f = h.z)), k.add(h);
        var m = {
            minX: d,
            minY: e,
            maxX: a,
            maxY: b
        };
        return l && (m.maxZ = c, m.minZ = f), m
    }, THREE.CurvePath.prototype.createPointsGeometry = function(a) {
        var b = this.getPoints(a, !0);
        return this.createGeometry(b)
    }, THREE.CurvePath.prototype.createSpacedPointsGeometry = function(a) {
        var b = this.getSpacedPoints(a, !0);
        return this.createGeometry(b)
    }, THREE.CurvePath.prototype.createGeometry = function(a) {
        for (var b = new THREE.Geometry, c = 0; c < a.length; c++) b.vertices.push(new THREE.Vector3(a[c].x, a[c].y, a[c].z || 0));
        return b
    }, THREE.CurvePath.prototype.addWrapPath = function(a) {
        this.bends.push(a)
    }, THREE.CurvePath.prototype.getTransformedPoints = function(a, b) {
        var c, d, e = this.getPoints(a);
        for (b || (b = this.bends), c = 0, d = b.length; d > c; c++) e = this.getWrapPoints(e, b[c]);
        return e
    }, THREE.CurvePath.prototype.getTransformedSpacedPoints = function(a, b) {
        var c, d, e = this.getSpacedPoints(a);
        for (b || (b = this.bends), c = 0, d = b.length; d > c; c++) e = this.getWrapPoints(e, b[c]);
        return e
    }, THREE.CurvePath.prototype.getWrapPoints = function(a, b) {
        var c, d, e, f, g, h, i = this.getBoundingBox();
        for (c = 0, d = a.length; d > c; c++) {
            e = a[c], f = e.x, g = e.y, h = f / i.maxX, h = b.getUtoTmapping(h, f);
            var j = b.getPoint(h),
                k = b.getTangent(h);
            k.set(-k.y, k.x).multiplyScalar(g), e.x = j.x + k.x, e.y = j.y + k.y
        }
        return a
    }, THREE.Gyroscope = function() {
        THREE.Object3D.call(this)
    }, THREE.Gyroscope.prototype = Object.create(THREE.Object3D.prototype), THREE.Gyroscope.prototype.constructor = THREE.Gyroscope, THREE.Gyroscope.prototype.updateMatrixWorld = function() {
        var a = new THREE.Vector3,
            b = new THREE.Quaternion,
            c = new THREE.Vector3,
            d = new THREE.Vector3,
            e = new THREE.Quaternion,
            f = new THREE.Vector3;
        return function(g) {
            this.matrixAutoUpdate && this.updateMatrix(), (this.matrixWorldNeedsUpdate || g) && (this.parent ? (this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix), this.matrixWorld.decompose(d, e, f), this.matrix.decompose(a, b, c), this.matrixWorld.compose(d, b, f)) : this.matrixWorld.copy(this.matrix), this.matrixWorldNeedsUpdate = !1, g = !0);
            for (var h = 0, i = this.children.length; i > h; h++) this.children[h].updateMatrixWorld(g)
        }
    }(), THREE.Path = function(a) {
        THREE.CurvePath.call(this), this.actions = [], a && this.fromPoints(a)
    }, THREE.Path.prototype = Object.create(THREE.CurvePath.prototype), THREE.Path.prototype.constructor = THREE.Path, THREE.PathActions = {
        MOVE_TO: "moveTo",
        LINE_TO: "lineTo",
        QUADRATIC_CURVE_TO: "quadraticCurveTo",
        BEZIER_CURVE_TO: "bezierCurveTo",
        CSPLINE_THRU: "splineThru",
        ARC: "arc",
        ELLIPSE: "ellipse"
    }, THREE.Path.prototype.fromPoints = function(a) {
        this.moveTo(a[0].x, a[0].y);
        for (var b = 1, c = a.length; c > b; b++) this.lineTo(a[b].x, a[b].y)
    }, THREE.Path.prototype.moveTo = function() {
        var a = Array.prototype.slice.call(arguments);
        this.actions.push({
            action: THREE.PathActions.MOVE_TO,
            args: a
        })
    }, THREE.Path.prototype.lineTo = function(a, b) {
        var c = Array.prototype.slice.call(arguments),
            d = this.actions[this.actions.length - 1].args,
            e = d[d.length - 2],
            f = d[d.length - 1],
            g = new THREE.LineCurve(new THREE.Vector2(e, f), new THREE.Vector2(a, b));
        this.curves.push(g), this.actions.push({
            action: THREE.PathActions.LINE_TO,
            args: c
        })
    }, THREE.Path.prototype.quadraticCurveTo = function(a, b, c, d) {
        var e = Array.prototype.slice.call(arguments),
            f = this.actions[this.actions.length - 1].args,
            g = f[f.length - 2],
            h = f[f.length - 1],
            i = new THREE.QuadraticBezierCurve(new THREE.Vector2(g, h), new THREE.Vector2(a, b), new THREE.Vector2(c, d));
        this.curves.push(i), this.actions.push({
            action: THREE.PathActions.QUADRATIC_CURVE_TO,
            args: e
        })
    }, THREE.Path.prototype.bezierCurveTo = function(a, b, c, d, e, f) {
        var g = Array.prototype.slice.call(arguments),
            h = this.actions[this.actions.length - 1].args,
            i = h[h.length - 2],
            j = h[h.length - 1],
            k = new THREE.CubicBezierCurve(new THREE.Vector2(i, j), new THREE.Vector2(a, b), new THREE.Vector2(c, d), new THREE.Vector2(e, f));
        this.curves.push(k), this.actions.push({
            action: THREE.PathActions.BEZIER_CURVE_TO,
            args: g
        })
    }, THREE.Path.prototype.splineThru = function(a) {
        var b = Array.prototype.slice.call(arguments),
            c = this.actions[this.actions.length - 1].args,
            d = c[c.length - 2],
            e = c[c.length - 1],
            f = [new THREE.Vector2(d, e)];
        Array.prototype.push.apply(f, a);
        var g = new THREE.SplineCurve(f);
        this.curves.push(g), this.actions.push({
            action: THREE.PathActions.CSPLINE_THRU,
            args: b
        })
    }, THREE.Path.prototype.arc = function(a, b, c, d, e, f) {
        var g = this.actions[this.actions.length - 1].args,
            h = g[g.length - 2],
            i = g[g.length - 1];
        this.absarc(a + h, b + i, c, d, e, f)
    }, THREE.Path.prototype.absarc = function(a, b, c, d, e, f) {
        this.absellipse(a, b, c, c, d, e, f)
    }, THREE.Path.prototype.ellipse = function(a, b, c, d, e, f, g) {
        var h = this.actions[this.actions.length - 1].args,
            i = h[h.length - 2],
            j = h[h.length - 1];
        this.absellipse(a + i, b + j, c, d, e, f, g)
    }, THREE.Path.prototype.absellipse = function(a, b, c, d, e, f, g) {
        var h = Array.prototype.slice.call(arguments),
            i = new THREE.EllipseCurve(a, b, c, d, e, f, g);
        this.curves.push(i);
        var j = i.getPoint(1);
        h.push(j.x), h.push(j.y), this.actions.push({
            action: THREE.PathActions.ELLIPSE,
            args: h
        })
    }, THREE.Path.prototype.getSpacedPoints = function(a) {
        a || (a = 40);
        for (var b = [], c = 0; a > c; c++) b.push(this.getPoint(c / a));
        return b
    }, THREE.Path.prototype.getPoints = function(a, b) {
        if (this.useSpacedPoints) return console.log("tata"), this.getSpacedPoints(a, b);
        a = a || 12;
        var c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u = [];
        for (c = 0, d = this.actions.length; d > c; c++) switch (e = this.actions[c], f = e.action, g = e.args, f) {
            case THREE.PathActions.MOVE_TO:
                u.push(new THREE.Vector2(g[0], g[1]));
                break;
            case THREE.PathActions.LINE_TO:
                u.push(new THREE.Vector2(g[0], g[1]));
                break;
            case THREE.PathActions.QUADRATIC_CURVE_TO:
                for (h = g[2], i = g[3], l = g[0], m = g[1], u.length > 0 ? (p = u[u.length - 1], n = p.x, o = p.y) : (p = this.actions[c - 1].args, n = p[p.length - 2], o = p[p.length - 1]), q = 1; a >= q; q++) r = q / a, s = THREE.Shape.Utils.b2(r, n, l, h), t = THREE.Shape.Utils.b2(r, o, m, i), u.push(new THREE.Vector2(s, t));
                break;
            case THREE.PathActions.BEZIER_CURVE_TO:
                for (h = g[4], i = g[5], l = g[0], m = g[1], j = g[2], k = g[3], u.length > 0 ? (p = u[u.length - 1], n = p.x, o = p.y) : (p = this.actions[c - 1].args, n = p[p.length - 2], o = p[p.length - 1]), q = 1; a >= q; q++) r = q / a, s = THREE.Shape.Utils.b3(r, n, l, j, h), t = THREE.Shape.Utils.b3(r, o, m, k, i), u.push(new THREE.Vector2(s, t));
                break;
            case THREE.PathActions.CSPLINE_THRU:
                p = this.actions[c - 1].args;
                var v = new THREE.Vector2(p[p.length - 2], p[p.length - 1]),
                    w = [v],
                    x = a * g[0].length;
                w = w.concat(g[0]);
                var y = new THREE.SplineCurve(w);
                for (q = 1; x >= q; q++) u.push(y.getPointAt(q / x));
                break;
            case THREE.PathActions.ARC:
                var z, A = g[0],
                    B = g[1],
                    C = g[2],
                    D = g[3],
                    E = g[4],
                    F = !!g[5],
                    G = E - D,
                    H = 2 * a;
                for (q = 1; H >= q; q++) r = q / H, F || (r = 1 - r), z = D + r * G, s = A + C * Math.cos(z), t = B + C * Math.sin(z), u.push(new THREE.Vector2(s, t));
                break;
            case THREE.PathActions.ELLIPSE:
                var z, A = g[0],
                    B = g[1],
                    I = g[2],
                    J = g[3],
                    D = g[4],
                    E = g[5],
                    F = !!g[6],
                    G = E - D,
                    H = 2 * a;
                for (q = 1; H >= q; q++) r = q / H, F || (r = 1 - r), z = D + r * G, s = A + I * Math.cos(z), t = B + J * Math.sin(z), u.push(new THREE.Vector2(s, t))
        }
        var K = u[u.length - 1],
            L = 1e-10;
        return Math.abs(K.x - u[0].x) < L && Math.abs(K.y - u[0].y) < L && u.splice(u.length - 1, 1), b && u.push(u[0]), u
    }, THREE.Path.prototype.toShapes = function(a, b) {
        function c(a) {
            var b, c, d, e, f, g = [],
                h = new THREE.Path;
            for (b = 0, c = a.length; c > b; b++) d = a[b], f = d.args, e = d.action, e == THREE.PathActions.MOVE_TO && 0 != h.actions.length && (g.push(h), h = new THREE.Path), h[e].apply(h, f);
            return 0 != h.actions.length && g.push(h), g
        }

        function d(a) {
            for (var b = [], c = 0, d = a.length; d > c; c++) {
                var e = a[c],
                    f = new THREE.Shape;
                f.actions = e.actions, f.curves = e.curves, b.push(f)
            }
            return b
        }

        function e(a, b) {
            for (var c = 1e-10, d = b.length, e = !1, f = d - 1, g = 0; d > g; f = g++) {
                var h = b[f],
                    i = b[g],
                    j = i.x - h.x,
                    k = i.y - h.y;
                if (Math.abs(k) > c) {
                    if (0 > k && (h = b[g], j = -j, i = b[f], k = -k), a.y < h.y || a.y > i.y) continue;
                    if (a.y == h.y) {
                        if (a.x == h.x) return !0
                    } else {
                        var l = k * (a.x - h.x) - j * (a.y - h.y);
                        if (0 == l) return !0;
                        if (0 > l) continue;
                        e = !e
                    }
                } else {
                    if (a.y != h.y) continue;
                    if (i.x <= a.x && a.x <= h.x || h.x <= a.x && a.x <= i.x) return !0
                }
            }
            return e
        }
        var f = c(this.actions);
        if (0 == f.length) return [];
        if (b === !0) return d(f);
        var g, h, i, j = [];
        if (1 == f.length) return h = f[0], i = new THREE.Shape, i.actions = h.actions, i.curves = h.curves, j.push(i), j;
        var k = !THREE.Shape.Utils.isClockWise(f[0].getPoints());
        k = a ? !k : k;
        var l, m = [],
            n = [],
            o = [],
            p = 0;
        n[p] = void 0, o[p] = [];
        var q, r;
        for (q = 0, r = f.length; r > q; q++) h = f[q], l = h.getPoints(), g = THREE.Shape.Utils.isClockWise(l), g = a ? !g : g, g ? (!k && n[p] && p++, n[p] = {
            s: new THREE.Shape,
            p: l
        }, n[p].s.actions = h.actions, n[p].s.curves = h.curves, k && p++, o[p] = []) : o[p].push({
            h: h,
            p: l[0]
        });
        if (!n[0]) return d(f);
        if (n.length > 1) {
            for (var s = !1, t = [], u = 0, v = n.length; v > u; u++) m[u] = [];
            for (var u = 0, v = n.length; v > u; u++)
                for (var w = (n[u], o[u]), x = 0; x < w.length; x++) {
                    for (var y = w[x], z = !0, A = 0; A < n.length; A++) e(y.p, n[A].p) && (u != A && t.push({
                        froms: u,
                        tos: A,
                        hole: x
                    }), z ? (z = !1, m[A].push(y)) : s = !0);
                    z && m[u].push(y)
                }
            t.length > 0 && (s || (o = m))
        }
        var B, C, D;
        for (q = 0, r = n.length; r > q; q++)
            for (i = n[q].s, j.push(i), B = o[q], C = 0, D = B.length; D > C; C++) i.holes.push(B[C].h);
        return j
    }, THREE.Shape = function() {
        THREE.Path.apply(this, arguments), this.holes = []
    }, THREE.Shape.prototype = Object.create(THREE.Path.prototype), THREE.Shape.prototype.constructor = THREE.Shape, THREE.Shape.prototype.extrude = function(a) {
        var b = new THREE.ExtrudeGeometry(this, a);
        return b
    }, THREE.Shape.prototype.makeGeometry = function(a) {
        var b = new THREE.ShapeGeometry(this, a);
        return b
    }, THREE.Shape.prototype.getPointsHoles = function(a) {
        var b, c = this.holes.length,
            d = [];
        for (b = 0; c > b; b++) d[b] = this.holes[b].getTransformedPoints(a, this.bends);
        return d
    }, THREE.Shape.prototype.getSpacedPointsHoles = function(a) {
        var b, c = this.holes.length,
            d = [];
        for (b = 0; c > b; b++) d[b] = this.holes[b].getTransformedSpacedPoints(a, this.bends);
        return d
    }, THREE.Shape.prototype.extractAllPoints = function(a) {
        return {
            shape: this.getTransformedPoints(a),
            holes: this.getPointsHoles(a)
        }
    }, THREE.Shape.prototype.extractPoints = function(a) {
        return this.useSpacedPoints ? this.extractAllSpacedPoints(a) : this.extractAllPoints(a)
    }, THREE.Shape.prototype.extractAllSpacedPoints = function(a) {
        return {
            shape: this.getTransformedSpacedPoints(a),
            holes: this.getSpacedPointsHoles(a)
        }
    }, THREE.Shape.Utils = {
        triangulateShape: function(a, b) {
            function c(a, b, c) {
                return a.x != b.x ? a.x < b.x ? a.x <= c.x && c.x <= b.x : b.x <= c.x && c.x <= a.x : a.y < b.y ? a.y <= c.y && c.y <= b.y : b.y <= c.y && c.y <= a.y
            }

            function d(a, b, d, e, f) {
                var g = 1e-10,
                    h = b.x - a.x,
                    i = b.y - a.y,
                    j = e.x - d.x,
                    k = e.y - d.y,
                    l = a.x - d.x,
                    m = a.y - d.y,
                    n = i * j - h * k,
                    o = i * l - h * m;
                if (Math.abs(n) > g) {
                    var p;
                    if (n > 0) {
                        if (0 > o || o > n) return [];
                        if (p = k * l - j * m, 0 > p || p > n) return []
                    } else {
                        if (o > 0 || n > o) return [];
                        if (p = k * l - j * m, p > 0 || n > p) return []
                    }
                    if (0 == p) return !f || 0 != o && o != n ? [a] : [];
                    if (p == n) return !f || 0 != o && o != n ? [b] : [];
                    if (0 == o) return [d];
                    if (o == n) return [e];
                    var q = p / n;
                    return [{
                        x: a.x + q * h,
                        y: a.y + q * i
                    }]
                }
                if (0 != o || k * l != j * m) return [];
                var r = 0 == h && 0 == i,
                    s = 0 == j && 0 == k;
                if (r && s) return a.x != d.x || a.y != d.y ? [] : [a];
                if (r) return c(d, e, a) ? [a] : [];
                if (s) return c(a, b, d) ? [d] : [];
                var t, u, v, w, x, y, z, A;
                return 0 != h ? (a.x < b.x ? (t = a, v = a.x, u = b, w = b.x) : (t = b, v = b.x, u = a, w = a.x), d.x < e.x ? (x = d, z = d.x, y = e, A = e.x) : (x = e, z = e.x, y = d, A = d.x)) : (a.y < b.y ? (t = a, v = a.y, u = b, w = b.y) : (t = b, v = b.y, u = a, w = a.y), d.y < e.y ? (x = d, z = d.y, y = e, A = e.y) : (x = e, z = e.y, y = d, A = d.y)), z >= v ? z > w ? [] : w == z ? f ? [] : [x] : A >= w ? [x, u] : [x, y] : v > A ? [] : v == A ? f ? [] : [t] : A >= w ? [t, u] : [t, y]
            }

            function e(a, b, c, d) {
                var e = 1e-10,
                    f = b.x - a.x,
                    g = b.y - a.y,
                    h = c.x - a.x,
                    i = c.y - a.y,
                    j = d.x - a.x,
                    k = d.y - a.y,
                    l = f * i - g * h,
                    m = f * k - g * j;
                if (Math.abs(l) > e) {
                    var n = j * i - k * h;
                    return l > 0 ? m >= 0 && n >= 0 : m >= 0 || n >= 0
                }
                return m > 0
            }

            function f(a, b) {
                function c(a, b) {
                    var c = s.length - 1,
                        d = a - 1;
                    0 > d && (d = c);
                    var f = a + 1;
                    f > c && (f = 0);
                    var g = e(s[a], s[d], s[f], h[b]);
                    if (!g) return !1;
                    var i = h.length - 1,
                        j = b - 1;
                    0 > j && (j = i);
                    var k = b + 1;
                    return k > i && (k = 0), g = e(h[b], h[j], h[k], s[a]), g ? !0 : !1
                }

                function f(a, b) {
                    var c, e, f;
                    for (c = 0; c < s.length; c++)
                        if (e = c + 1, e %= s.length, f = d(a, b, s[c], s[e], !0), f.length > 0) return !0;
                    return !1
                }

                function g(a, c) {
                    var e, f, g, h, i;
                    for (e = 0; e < t.length; e++)
                        for (f = b[t[e]], g = 0; g < f.length; g++)
                            if (h = g + 1, h %= f.length, i = d(a, c, f[g], f[h], !0), i.length > 0) return !0;
                    return !1
                }
                for (var h, i, j, k, l, m, n, o, p, q, r, s = a.concat(), t = [], u = [], v = 0, w = b.length; w > v; v++) t.push(v);
                for (var x = 0, y = 2 * t.length; t.length > 0;) {
                    if (y--, 0 > y) {
                        console.log("Infinite Loop! Holes left:" + t.length + ", Probably Hole outside Shape!");
                        break
                    }
                    for (j = x; j < s.length; j++) {
                        k = s[j], i = -1;
                        for (var v = 0; v < t.length; v++)
                            if (m = t[v], n = k.x + ":" + k.y + ":" + m, void 0 === u[n]) {
                                h = b[m];
                                for (var z = 0; z < h.length; z++)
                                    if (l = h[z], c(j, z) && !f(k, l) && !g(k, l)) {
                                        i = z, t.splice(v, 1), o = s.slice(0, j + 1), p = s.slice(j), q = h.slice(i), r = h.slice(0, i + 1), s = o.concat(q).concat(r).concat(p), x = j;
                                        break
                                    }
                                if (i >= 0) break;
                                u[n] = !0
                            }
                        if (i >= 0) break
                    }
                }
                return s
            }
            for (var g, h, i, j, k, l, m = {}, n = a.concat(), o = 0, p = b.length; p > o; o++) Array.prototype.push.apply(n, b[o]);
            for (g = 0, h = n.length; h > g; g++) k = n[g].x + ":" + n[g].y, void 0 !== m[k] && console.log("Duplicate point", k), m[k] = g;
            var q = f(a, b),
                r = THREE.FontUtils.Triangulate(q, !1);
            for (g = 0, h = r.length; h > g; g++)
                for (j = r[g], i = 0; 3 > i; i++) k = j[i].x + ":" + j[i].y, l = m[k], void 0 !== l && (j[i] = l);
            return r.concat()
        },
        isClockWise: function(a) {
            return THREE.FontUtils.Triangulate.area(a) < 0
        },
        b2p0: function(a, b) {
            var c = 1 - a;
            return c * c * b
        },
        b2p1: function(a, b) {
            return 2 * (1 - a) * a * b
        },
        b2p2: function(a, b) {
            return a * a * b
        },
        b2: function(a, b, c, d) {
            return this.b2p0(a, b) + this.b2p1(a, c) + this.b2p2(a, d)
        },
        b3p0: function(a, b) {
            var c = 1 - a;
            return c * c * c * b
        },
        b3p1: function(a, b) {
            var c = 1 - a;
            return 3 * c * c * a * b
        },
        b3p2: function(a, b) {
            var c = 1 - a;
            return 3 * c * a * a * b
        },
        b3p3: function(a, b) {
            return a * a * a * b
        },
        b3: function(a, b, c, d, e) {
            return this.b3p0(a, b) + this.b3p1(a, c) + this.b3p2(a, d) + this.b3p3(a, e)
        }
    }, THREE.LineCurve = function(a, b) {
        this.v1 = a, this.v2 = b
    }, THREE.LineCurve.prototype = Object.create(THREE.Curve.prototype), THREE.LineCurve.prototype.constructor = THREE.LineCurve, THREE.LineCurve.prototype.getPoint = function(a) {
        var b = this.v2.clone().sub(this.v1);
        return b.multiplyScalar(a).add(this.v1), b
    }, THREE.LineCurve.prototype.getPointAt = function(a) {
        return this.getPoint(a);

    }, THREE.LineCurve.prototype.getTangent = function() {
        var a = this.v2.clone().sub(this.v1);
        return a.normalize()
    }, THREE.QuadraticBezierCurve = function(a, b, c) {
        this.v0 = a, this.v1 = b, this.v2 = c
    }, THREE.QuadraticBezierCurve.prototype = Object.create(THREE.Curve.prototype), THREE.QuadraticBezierCurve.prototype.constructor = THREE.QuadraticBezierCurve, THREE.QuadraticBezierCurve.prototype.getPoint = function(a) {
        var b = new THREE.Vector2;
        return b.x = THREE.Shape.Utils.b2(a, this.v0.x, this.v1.x, this.v2.x), b.y = THREE.Shape.Utils.b2(a, this.v0.y, this.v1.y, this.v2.y), b
    }, THREE.QuadraticBezierCurve.prototype.getTangent = function(a) {
        var b = new THREE.Vector2;
        return b.x = THREE.Curve.Utils.tangentQuadraticBezier(a, this.v0.x, this.v1.x, this.v2.x), b.y = THREE.Curve.Utils.tangentQuadraticBezier(a, this.v0.y, this.v1.y, this.v2.y), b.normalize()
    }, THREE.CubicBezierCurve = function(a, b, c, d) {
        this.v0 = a, this.v1 = b, this.v2 = c, this.v3 = d
    }, THREE.CubicBezierCurve.prototype = Object.create(THREE.Curve.prototype), THREE.CubicBezierCurve.prototype.constructor = THREE.CubicBezierCurve, THREE.CubicBezierCurve.prototype.getPoint = function(a) {
        var b, c;
        return b = THREE.Shape.Utils.b3(a, this.v0.x, this.v1.x, this.v2.x, this.v3.x), c = THREE.Shape.Utils.b3(a, this.v0.y, this.v1.y, this.v2.y, this.v3.y), new THREE.Vector2(b, c)
    }, THREE.CubicBezierCurve.prototype.getTangent = function(a) {
        var b, c;
        b = THREE.Curve.Utils.tangentCubicBezier(a, this.v0.x, this.v1.x, this.v2.x, this.v3.x), c = THREE.Curve.Utils.tangentCubicBezier(a, this.v0.y, this.v1.y, this.v2.y, this.v3.y);
        var d = new THREE.Vector2(b, c);
        return d.normalize(), d
    }, THREE.SplineCurve = function(a) {
        this.points = void 0 == a ? [] : a
    }, THREE.SplineCurve.prototype = Object.create(THREE.Curve.prototype), THREE.SplineCurve.prototype.constructor = THREE.SplineCurve, THREE.SplineCurve.prototype.getPoint = function(a) {
        var b = this.points,
            c = (b.length - 1) * a,
            d = Math.floor(c),
            e = c - d,
            f = b[0 == d ? d : d - 1],
            g = b[d],
            h = b[d > b.length - 2 ? b.length - 1 : d + 1],
            i = b[d > b.length - 3 ? b.length - 1 : d + 2],
            j = new THREE.Vector2;
        return j.x = THREE.Curve.Utils.interpolate(f.x, g.x, h.x, i.x, e), j.y = THREE.Curve.Utils.interpolate(f.y, g.y, h.y, i.y, e), j
    }, THREE.EllipseCurve = function(a, b, c, d, e, f, g) {
        this.aX = a, this.aY = b, this.xRadius = c, this.yRadius = d, this.aStartAngle = e, this.aEndAngle = f, this.aClockwise = g
    }, THREE.EllipseCurve.prototype = Object.create(THREE.Curve.prototype), THREE.EllipseCurve.prototype.constructor = THREE.EllipseCurve, THREE.EllipseCurve.prototype.getPoint = function(a) {
        var b = this.aEndAngle - this.aStartAngle;
        0 > b && (b += 2 * Math.PI), b > 2 * Math.PI && (b -= 2 * Math.PI);
        var c;
        c = this.aClockwise === !0 ? this.aEndAngle + (1 - a) * (2 * Math.PI - b) : this.aStartAngle + a * b;
        var d = new THREE.Vector2;
        return d.x = this.aX + this.xRadius * Math.cos(c), d.y = this.aY + this.yRadius * Math.sin(c), d
    }, THREE.ArcCurve = function(a, b, c, d, e, f) {
        THREE.EllipseCurve.call(this, a, b, c, c, d, e, f)
    }, THREE.ArcCurve.prototype = Object.create(THREE.EllipseCurve.prototype), THREE.ArcCurve.prototype.constructor = THREE.ArcCurve, THREE.LineCurve3 = THREE.Curve.create(function(a, b) {
        this.v1 = a, this.v2 = b
    }, function(a) {
        var b = new THREE.Vector3;
        return b.subVectors(this.v2, this.v1), b.multiplyScalar(a), b.add(this.v1), b
    }), THREE.QuadraticBezierCurve3 = THREE.Curve.create(function(a, b, c) {
        this.v0 = a, this.v1 = b, this.v2 = c
    }, function(a) {
        var b = new THREE.Vector3;
        return b.x = THREE.Shape.Utils.b2(a, this.v0.x, this.v1.x, this.v2.x), b.y = THREE.Shape.Utils.b2(a, this.v0.y, this.v1.y, this.v2.y), b.z = THREE.Shape.Utils.b2(a, this.v0.z, this.v1.z, this.v2.z), b
    }), THREE.CubicBezierCurve3 = THREE.Curve.create(function(a, b, c, d) {
        this.v0 = a, this.v1 = b, this.v2 = c, this.v3 = d
    }, function(a) {
        var b = new THREE.Vector3;
        return b.x = THREE.Shape.Utils.b3(a, this.v0.x, this.v1.x, this.v2.x, this.v3.x), b.y = THREE.Shape.Utils.b3(a, this.v0.y, this.v1.y, this.v2.y, this.v3.y), b.z = THREE.Shape.Utils.b3(a, this.v0.z, this.v1.z, this.v2.z, this.v3.z), b
    }), THREE.SplineCurve3 = THREE.Curve.create(function(a) {
        this.points = void 0 == a ? [] : a
    }, function(a) {
        var b = this.points,
            c = (b.length - 1) * a,
            d = Math.floor(c),
            e = c - d,
            f = b[0 == d ? d : d - 1],
            g = b[d],
            h = b[d > b.length - 2 ? b.length - 1 : d + 1],
            i = b[d > b.length - 3 ? b.length - 1 : d + 2],
            j = new THREE.Vector3;
        return j.x = THREE.Curve.Utils.interpolate(f.x, g.x, h.x, i.x, e), j.y = THREE.Curve.Utils.interpolate(f.y, g.y, h.y, i.y, e), j.z = THREE.Curve.Utils.interpolate(f.z, g.z, h.z, i.z, e), j
    }), THREE.ClosedSplineCurve3 = THREE.Curve.create(function(a) {
        this.points = void 0 == a ? [] : a
    }, function(a) {
        var b = this.points,
            c = (b.length - 0) * a,
            d = Math.floor(c),
            e = c - d;
        d += d > 0 ? 0 : (Math.floor(Math.abs(d) / b.length) + 1) * b.length;
        var f = b[(d - 1) % b.length],
            g = b[d % b.length],
            h = b[(d + 1) % b.length],
            i = b[(d + 2) % b.length],
            j = new THREE.Vector3;
        return j.x = THREE.Curve.Utils.interpolate(f.x, g.x, h.x, i.x, e), j.y = THREE.Curve.Utils.interpolate(f.y, g.y, h.y, i.y, e), j.z = THREE.Curve.Utils.interpolate(f.z, g.z, h.z, i.z, e), j
    }), THREE.AnimationHandler = {
        LINEAR: 0,
        CATMULLROM: 1,
        CATMULLROM_FORWARD: 2,
        add: function() {
            console.warn("THREE.AnimationHandler.add() has been deprecated.")
        },
        get: function() {
            console.warn("THREE.AnimationHandler.get() has been deprecated.")
        },
        remove: function() {
            console.warn("THREE.AnimationHandler.remove() has been deprecated.")
        },
        animations: [],
        init: function(a) {
            if (a.initialized === !0) return a;
            for (var b = 0; b < a.hierarchy.length; b++) {
                for (var c = 0; c < a.hierarchy[b].keys.length; c++)
                    if (a.hierarchy[b].keys[c].time < 0 && (a.hierarchy[b].keys[c].time = 0), void 0 !== a.hierarchy[b].keys[c].rot && !(a.hierarchy[b].keys[c].rot instanceof THREE.Quaternion)) {
                        var d = a.hierarchy[b].keys[c].rot;
                        a.hierarchy[b].keys[c].rot = (new THREE.Quaternion).fromArray(d)
                    }
                if (a.hierarchy[b].keys.length && void 0 !== a.hierarchy[b].keys[0].morphTargets) {
                    for (var e = {}, c = 0; c < a.hierarchy[b].keys.length; c++)
                        for (var f = 0; f < a.hierarchy[b].keys[c].morphTargets.length; f++) {
                            var g = a.hierarchy[b].keys[c].morphTargets[f];
                            e[g] = -1
                        }
                    a.hierarchy[b].usedMorphTargets = e;
                    for (var c = 0; c < a.hierarchy[b].keys.length; c++) {
                        var h = {};
                        for (var g in e) {
                            for (var f = 0; f < a.hierarchy[b].keys[c].morphTargets.length; f++)
                                if (a.hierarchy[b].keys[c].morphTargets[f] === g) {
                                    h[g] = a.hierarchy[b].keys[c].morphTargetsInfluences[f];
                                    break
                                }
                            f === a.hierarchy[b].keys[c].morphTargets.length && (h[g] = 0)
                        }
                        a.hierarchy[b].keys[c].morphTargetsInfluences = h
                    }
                }
                for (var c = 1; c < a.hierarchy[b].keys.length; c++) a.hierarchy[b].keys[c].time === a.hierarchy[b].keys[c - 1].time && (a.hierarchy[b].keys.splice(c, 1), c--);
                for (var c = 0; c < a.hierarchy[b].keys.length; c++) a.hierarchy[b].keys[c].index = c
            }
            return a.initialized = !0, a
        },
        parse: function(a) {
            var b = function(a, c) {
                    c.push(a);
                    for (var d = 0; d < a.children.length; d++) b(a.children[d], c)
                },
                c = [];
            if (a instanceof THREE.SkinnedMesh)
                for (var d = 0; d < a.skeleton.bones.length; d++) c.push(a.skeleton.bones[d]);
            else b(a, c);
            return c
        },
        play: function(a) {
            -1 === this.animations.indexOf(a) && this.animations.push(a)
        },
        stop: function(a) {
            var b = this.animations.indexOf(a); - 1 !== b && this.animations.splice(b, 1)
        },
        update: function(a) {
            for (var b = 0; b < this.animations.length; b++) this.animations[b].resetBlendWeights();
            for (var b = 0; b < this.animations.length; b++) this.animations[b].update(a)
        }
    }, THREE.Animation = function(a, b) {
        this.root = a, this.data = THREE.AnimationHandler.init(b), this.hierarchy = THREE.AnimationHandler.parse(a), this.currentTime = 0, this.timeScale = 1, this.isPlaying = !1, this.loop = !0, this.weight = 0, this.interpolationType = THREE.AnimationHandler.LINEAR
    }, THREE.Animation.prototype.keyTypes = ["pos", "rot", "scl"], THREE.Animation.prototype.play = function(a, b) {
        this.currentTime = void 0 !== a ? a : 0, this.weight = void 0 !== b ? b : 1, this.isPlaying = !0, this.reset(), THREE.AnimationHandler.play(this)
    }, THREE.Animation.prototype.stop = function() {
        this.isPlaying = !1, THREE.AnimationHandler.stop(this)
    }, THREE.Animation.prototype.reset = function() {
        for (var a = 0, b = this.hierarchy.length; b > a; a++) {
            var c = this.hierarchy[a];
            void 0 === c.animationCache && (c.animationCache = {
                animations: {},
                blending: {
                    positionWeight: 0,
                    quaternionWeight: 0,
                    scaleWeight: 0
                }
            }), void 0 === c.animationCache.animations[this.data.name] && (c.animationCache.animations[this.data.name] = {}, c.animationCache.animations[this.data.name].prevKey = {
                pos: 0,
                rot: 0,
                scl: 0
            }, c.animationCache.animations[this.data.name].nextKey = {
                pos: 0,
                rot: 0,
                scl: 0
            }, c.animationCache.animations[this.data.name].originalMatrix = c.matrix);
            for (var d = c.animationCache.animations[this.data.name], e = 0; 3 > e; e++) {
                for (var f = this.keyTypes[e], g = this.data.hierarchy[a].keys[0], h = this.getNextKeyWith(f, a, 1); h.time < this.currentTime && h.index > g.index;) g = h, h = this.getNextKeyWith(f, a, h.index + 1);
                d.prevKey[f] = g, d.nextKey[f] = h
            }
        }
    }, THREE.Animation.prototype.resetBlendWeights = function() {
        for (var a = 0, b = this.hierarchy.length; b > a; a++) {
            var c = this.hierarchy[a];
            void 0 !== c.animationCache && (c.animationCache.blending.positionWeight = 0, c.animationCache.blending.quaternionWeight = 0, c.animationCache.blending.scaleWeight = 0)
        }
    }, THREE.Animation.prototype.update = function() {
        var a = [],
            b = new THREE.Vector3,
            c = new THREE.Vector3,
            d = new THREE.Quaternion,
            e = function(a, b) {
                var c, d, e, g, h, i, j, k, l, m = [],
                    n = [];
                return c = (a.length - 1) * b, d = Math.floor(c), e = c - d, m[0] = 0 === d ? d : d - 1, m[1] = d, m[2] = d > a.length - 2 ? d : d + 1, m[3] = d > a.length - 3 ? d : d + 2, i = a[m[0]], j = a[m[1]], k = a[m[2]], l = a[m[3]], g = e * e, h = e * g, n[0] = f(i[0], j[0], k[0], l[0], e, g, h), n[1] = f(i[1], j[1], k[1], l[1], e, g, h), n[2] = f(i[2], j[2], k[2], l[2], e, g, h), n
            },
            f = function(a, b, c, d, e, f, g) {
                var h = .5 * (c - a),
                    i = .5 * (d - b);
                return (2 * (b - c) + h + i) * g + (-3 * (b - c) - 2 * h - i) * f + h * e + b
            };
        return function(f) {
            if (this.isPlaying !== !1 && (this.currentTime += f * this.timeScale, 0 !== this.weight)) {
                var g = this.data.length;
                (this.currentTime > g || this.currentTime < 0) && (this.loop ? (this.currentTime %= g, this.currentTime < 0 && (this.currentTime += g), this.reset()) : this.stop());
                for (var h = 0, i = this.hierarchy.length; i > h; h++)
                    for (var j = this.hierarchy[h], k = j.animationCache.animations[this.data.name], l = j.animationCache.blending, m = 0; 3 > m; m++) {
                        var n = this.keyTypes[m],
                            o = k.prevKey[n],
                            p = k.nextKey[n];
                        if (this.timeScale > 0 && p.time <= this.currentTime || this.timeScale < 0 && o.time >= this.currentTime) {
                            for (o = this.data.hierarchy[h].keys[0], p = this.getNextKeyWith(n, h, 1); p.time < this.currentTime && p.index > o.index;) o = p, p = this.getNextKeyWith(n, h, p.index + 1);
                            k.prevKey[n] = o, k.nextKey[n] = p
                        }
                        var q = (this.currentTime - o.time) / (p.time - o.time),
                            r = o[n],
                            s = p[n];
                        if (0 > q && (q = 0), q > 1 && (q = 1), "pos" === n) {
                            if (this.interpolationType === THREE.AnimationHandler.LINEAR) {
                                c.x = r[0] + (s[0] - r[0]) * q, c.y = r[1] + (s[1] - r[1]) * q, c.z = r[2] + (s[2] - r[2]) * q;
                                var t = this.weight / (this.weight + l.positionWeight);
                                j.position.lerp(c, t), l.positionWeight += this.weight
                            } else if (this.interpolationType === THREE.AnimationHandler.CATMULLROM || this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD) {
                                a[0] = this.getPrevKeyWith("pos", h, o.index - 1).pos, a[1] = r, a[2] = s, a[3] = this.getNextKeyWith("pos", h, p.index + 1).pos, q = .33 * q + .33;
                                var u = e(a, q),
                                    t = this.weight / (this.weight + l.positionWeight);
                                l.positionWeight += this.weight;
                                var v = j.position;
                                if (v.x = v.x + (u[0] - v.x) * t, v.y = v.y + (u[1] - v.y) * t, v.z = v.z + (u[2] - v.z) * t, this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD) {
                                    var w = e(a, 1.01 * q);
                                    b.set(w[0], w[1], w[2]), b.sub(v), b.y = 0, b.normalize();
                                    var x = Math.atan2(b.x, b.z);
                                    j.rotation.set(0, x, 0)
                                }
                            }
                        } else if ("rot" === n)
                            if (THREE.Quaternion.slerp(r, s, d, q), 0 === l.quaternionWeight) j.quaternion.copy(d), l.quaternionWeight = this.weight;
                            else {
                                var t = this.weight / (this.weight + l.quaternionWeight);
                                THREE.Quaternion.slerp(j.quaternion, d, j.quaternion, t), l.quaternionWeight += this.weight
                            } else if ("scl" === n) {
                            c.x = r[0] + (s[0] - r[0]) * q, c.y = r[1] + (s[1] - r[1]) * q, c.z = r[2] + (s[2] - r[2]) * q;
                            var t = this.weight / (this.weight + l.scaleWeight);
                            j.scale.lerp(c, t), l.scaleWeight += this.weight
                        }
                    }
                return !0
            }
        }
    }(), THREE.Animation.prototype.getNextKeyWith = function(a, b, c) {
        var d = this.data.hierarchy[b].keys;
        for (this.interpolationType === THREE.AnimationHandler.CATMULLROM || this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ? c = c < d.length - 1 ? c : d.length - 1 : c %= d.length; c < d.length; c++)
            if (void 0 !== d[c][a]) return d[c];
        return this.data.hierarchy[b].keys[0]
    }, THREE.Animation.prototype.getPrevKeyWith = function(a, b, c) {
        var d = this.data.hierarchy[b].keys;
        for (c = this.interpolationType === THREE.AnimationHandler.CATMULLROM || this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ? c > 0 ? c : 0 : c >= 0 ? c : c + d.length; c >= 0; c--)
            if (void 0 !== d[c][a]) return d[c];
        return this.data.hierarchy[b].keys[d.length - 1]
    }, THREE.KeyFrameAnimation = function(a) {
        this.root = a.node, this.data = THREE.AnimationHandler.init(a), this.hierarchy = THREE.AnimationHandler.parse(this.root), this.currentTime = 0, this.timeScale = .001, this.isPlaying = !1, this.isPaused = !0, this.loop = !0;
        for (var b = 0, c = this.hierarchy.length; c > b; b++) {
            var d = this.data.hierarchy[b].keys,
                e = this.data.hierarchy[b].sids,
                f = this.hierarchy[b];
            if (d.length && e) {
                for (var g = 0; g < e.length; g++) {
                    var h = e[g],
                        i = this.getNextKeyWith(h, b, 0);
                    i && i.apply(h)
                }
                f.matrixAutoUpdate = !1, this.data.hierarchy[b].node.updateMatrix(), f.matrixWorldNeedsUpdate = !0
            }
        }
    }, THREE.KeyFrameAnimation.prototype.play = function(a) {
        if (this.currentTime = void 0 !== a ? a : 0, this.isPlaying === !1) {
            this.isPlaying = !0;
            var b, c, d, e = this.hierarchy.length;
            for (b = 0; e > b; b++) {
                c = this.hierarchy[b], d = this.data.hierarchy[b], void 0 === d.animationCache && (d.animationCache = {}, d.animationCache.prevKey = null, d.animationCache.nextKey = null, d.animationCache.originalMatrix = c.matrix);
                var f = this.data.hierarchy[b].keys;
                f.length && (d.animationCache.prevKey = f[0], d.animationCache.nextKey = f[1], this.startTime = Math.min(f[0].time, this.startTime), this.endTime = Math.max(f[f.length - 1].time, this.endTime))
            }
            this.update(0)
        }
        this.isPaused = !1, THREE.AnimationHandler.play(this)
    }, THREE.KeyFrameAnimation.prototype.stop = function() {
        this.isPlaying = !1, this.isPaused = !1, THREE.AnimationHandler.stop(this);
        for (var a = 0; a < this.data.hierarchy.length; a++) {
            var b = this.hierarchy[a],
                c = this.data.hierarchy[a];
            if (void 0 !== c.animationCache) {
                var d = c.animationCache.originalMatrix;
                d.copy(b.matrix), b.matrix = d, delete c.animationCache
            }
        }
    }, THREE.KeyFrameAnimation.prototype.update = function(a) {
        if (this.isPlaying !== !1) {
            this.currentTime += a * this.timeScale;
            var b = this.data.length;
            this.loop === !0 && this.currentTime > b && (this.currentTime %= b), this.currentTime = Math.min(this.currentTime, b);
            for (var c = 0, d = this.hierarchy.length; d > c; c++) {
                var e = this.hierarchy[c],
                    f = this.data.hierarchy[c],
                    g = f.keys,
                    h = f.animationCache;
                if (g.length) {
                    var i = h.prevKey,
                        j = h.nextKey;
                    if (j.time <= this.currentTime) {
                        for (; j.time < this.currentTime && j.index > i.index;) i = j, j = g[i.index + 1];
                        h.prevKey = i, h.nextKey = j
                    }
                    j.time >= this.currentTime ? i.interpolate(j, this.currentTime) : i.interpolate(j, j.time), this.data.hierarchy[c].node.updateMatrix(), e.matrixWorldNeedsUpdate = !0
                }
            }
        }
    }, THREE.KeyFrameAnimation.prototype.getNextKeyWith = function(a, b, c) {
        var d = this.data.hierarchy[b].keys;
        for (c %= d.length; c < d.length; c++)
            if (d[c].hasTarget(a)) return d[c];
        return d[0]
    }, THREE.KeyFrameAnimation.prototype.getPrevKeyWith = function(a, b, c) {
        var d = this.data.hierarchy[b].keys;
        for (c = c >= 0 ? c : c + d.length; c >= 0; c--)
            if (d[c].hasTarget(a)) return d[c];
        return d[d.length - 1]
    }, THREE.MorphAnimation = function(a) {
        this.mesh = a, this.frames = a.morphTargetInfluences.length, this.currentTime = 0, this.duration = 1e3, this.loop = !0, this.lastFrame = 0, this.currentFrame = 0, this.isPlaying = !1
    }, THREE.MorphAnimation.prototype = {
        constructor: THREE.MorphAnimation,
        play: function() {
            this.isPlaying = !0
        },
        pause: function() {
            this.isPlaying = !1
        },
        update: function(a) {
            if (this.isPlaying !== !1) {
                this.currentTime += a, this.loop === !0 && this.currentTime > this.duration && (this.currentTime %= this.duration), this.currentTime = Math.min(this.currentTime, this.duration);
                var b = this.duration / this.frames,
                    c = Math.floor(this.currentTime / b);
                c != this.currentFrame && (this.mesh.morphTargetInfluences[this.lastFrame] = 0, this.mesh.morphTargetInfluences[this.currentFrame] = 1, this.mesh.morphTargetInfluences[c] = 0, this.lastFrame = this.currentFrame, this.currentFrame = c), this.mesh.morphTargetInfluences[c] = this.currentTime % b / b, this.mesh.morphTargetInfluences[this.lastFrame] = 1 - this.mesh.morphTargetInfluences[c]
            }
        }
    }, THREE.BoxGeometry = function(a, b, c, d, e, f) {
        function g(a, b, c, d, e, f, g, i) {
            var j, k, l, m = h.widthSegments,
                n = h.heightSegments,
                o = e / 2,
                p = f / 2,
                q = h.vertices.length;
            "x" === a && "y" === b || "y" === a && "x" === b ? j = "z" : "x" === a && "z" === b || "z" === a && "x" === b ? (j = "y", n = h.depthSegments) : ("z" === a && "y" === b || "y" === a && "z" === b) && (j = "x", m = h.depthSegments);
            var r = m + 1,
                s = n + 1,
                t = e / m,
                u = f / n,
                v = new THREE.Vector3;
            for (v[j] = g > 0 ? 1 : -1, l = 0; s > l; l++)
                for (k = 0; r > k; k++) {
                    var w = new THREE.Vector3;
                    w[a] = (k * t - o) * c, w[b] = (l * u - p) * d, w[j] = g, h.vertices.push(w)
                }
            for (l = 0; n > l; l++)
                for (k = 0; m > k; k++) {
                    var x = k + r * l,
                        y = k + r * (l + 1),
                        z = k + 1 + r * (l + 1),
                        A = k + 1 + r * l,
                        B = new THREE.Vector2(k / m, 1 - l / n),
                        C = new THREE.Vector2(k / m, 1 - (l + 1) / n),
                        D = new THREE.Vector2((k + 1) / m, 1 - (l + 1) / n),
                        E = new THREE.Vector2((k + 1) / m, 1 - l / n),
                        F = new THREE.Face3(x + q, y + q, A + q);
                    F.normal.copy(v), F.vertexNormals.push(v.clone(), v.clone(), v.clone()), F.materialIndex = i, h.faces.push(F), h.faceVertexUvs[0].push([B, C, E]), F = new THREE.Face3(y + q, z + q, A + q), F.normal.copy(v), F.vertexNormals.push(v.clone(), v.clone(), v.clone()), F.materialIndex = i, h.faces.push(F), h.faceVertexUvs[0].push([C.clone(), D, E.clone()])
                }
        }
        THREE.Geometry.call(this), this.type = "BoxGeometry", this.parameters = {
            width: a,
            height: b,
            depth: c,
            widthSegments: d,
            heightSegments: e,
            depthSegments: f
        }, this.widthSegments = d || 1, this.heightSegments = e || 1, this.depthSegments = f || 1;
        var h = this,
            i = a / 2,
            j = b / 2,
            k = c / 2;
        g("z", "y", -1, -1, c, b, i, 0), g("z", "y", 1, -1, c, b, -i, 1), g("x", "z", 1, 1, a, c, j, 2), g("x", "z", 1, -1, a, c, -j, 3), g("x", "y", 1, -1, a, b, k, 4), g("x", "y", -1, -1, a, b, -k, 5), this.mergeVertices()
    }, THREE.BoxGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.BoxGeometry.prototype.constructor = THREE.BoxGeometry, THREE.CircleGeometry = function(a, b, c, d) {
        THREE.Geometry.call(this), this.type = "CircleGeometry", this.parameters = {
            radius: a,
            segments: b,
            thetaStart: c,
            thetaLength: d
        }, a = a || 50, b = void 0 !== b ? Math.max(3, b) : 8, c = void 0 !== c ? c : 0, d = void 0 !== d ? d : 2 * Math.PI;
        var e, f = [],
            g = new THREE.Vector3,
            h = new THREE.Vector2(.5, .5);
        for (this.vertices.push(g), f.push(h), e = 0; b >= e; e++) {
            var i = new THREE.Vector3,
                j = c + e / b * d;
            i.x = a * Math.cos(j), i.y = a * Math.sin(j), this.vertices.push(i), f.push(new THREE.Vector2((i.x / a + 1) / 2, (i.y / a + 1) / 2))
        }
        var k = new THREE.Vector3(0, 0, 1);
        for (e = 1; b >= e; e++) this.faces.push(new THREE.Face3(e, e + 1, 0, [k.clone(), k.clone(), k.clone()])), this.faceVertexUvs[0].push([f[e].clone(), f[e + 1].clone(), h.clone()]);
        this.computeFaceNormals(), this.boundingSphere = new THREE.Sphere(new THREE.Vector3, a)
    }, THREE.CircleGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.CircleGeometry.prototype.constructor = THREE.CircleGeometry, THREE.CubeGeometry = function(a, b, c, d, e, f) {
        return console.warn("THREE.CubeGeometry has been renamed to THREE.BoxGeometry."), new THREE.BoxGeometry(a, b, c, d, e, f)
    }, THREE.CylinderGeometry = function(a, b, c, d, e, f, g, h) {
        THREE.Geometry.call(this), this.type = "CylinderGeometry", this.parameters = {
            radiusTop: a,
            radiusBottom: b,
            height: c,
            radialSegments: d,
            heightSegments: e,
            openEnded: f,
            thetaStart: g,
            thetaLength: h
        }, a = void 0 !== a ? a : 20, b = void 0 !== b ? b : 20, c = void 0 !== c ? c : 100, d = d || 8, e = e || 1, f = void 0 !== f ? f : !1, g = void 0 !== g ? g : 0, h = void 0 !== h ? h : 2 * Math.PI;
        var i, j, k = c / 2,
            l = [],
            m = [];
        for (j = 0; e >= j; j++) {
            var n = [],
                o = [],
                p = j / e,
                q = p * (b - a) + a;
            for (i = 0; d >= i; i++) {
                var r = i / d,
                    s = new THREE.Vector3;
                s.x = q * Math.sin(r * h + g), s.y = -p * c + k, s.z = q * Math.cos(r * h + g), this.vertices.push(s), n.push(this.vertices.length - 1), o.push(new THREE.Vector2(r, 1 - p))
            }
            l.push(n), m.push(o)
        }
        var t, u, v = (b - a) / c;
        for (i = 0; d > i; i++)
            for (0 !== a ? (t = this.vertices[l[0][i]].clone(), u = this.vertices[l[0][i + 1]].clone()) : (t = this.vertices[l[1][i]].clone(), u = this.vertices[l[1][i + 1]].clone()), t.setY(Math.sqrt(t.x * t.x + t.z * t.z) * v).normalize(), u.setY(Math.sqrt(u.x * u.x + u.z * u.z) * v).normalize(), j = 0; e > j; j++) {
                var w = l[j][i],
                    x = l[j + 1][i],
                    y = l[j + 1][i + 1],
                    z = l[j][i + 1],
                    A = t.clone(),
                    B = t.clone(),
                    C = u.clone(),
                    D = u.clone(),
                    E = m[j][i].clone(),
                    F = m[j + 1][i].clone(),
                    G = m[j + 1][i + 1].clone(),
                    H = m[j][i + 1].clone();
                this.faces.push(new THREE.Face3(w, x, z, [A, B, D])), this.faceVertexUvs[0].push([E, F, H]), this.faces.push(new THREE.Face3(x, y, z, [B.clone(), C, D.clone()])), this.faceVertexUvs[0].push([F.clone(), G, H.clone()])
            }
        if (f === !1 && a > 0)
            for (this.vertices.push(new THREE.Vector3(0, k, 0)), i = 0; d > i; i++) {
                var w = l[0][i],
                    x = l[0][i + 1],
                    y = this.vertices.length - 1,
                    A = new THREE.Vector3(0, 1, 0),
                    B = new THREE.Vector3(0, 1, 0),
                    C = new THREE.Vector3(0, 1, 0),
                    E = m[0][i].clone(),
                    F = m[0][i + 1].clone(),
                    G = new THREE.Vector2(F.x, 0);
                this.faces.push(new THREE.Face3(w, x, y, [A, B, C])), this.faceVertexUvs[0].push([E, F, G])
            }
        if (f === !1 && b > 0)
            for (this.vertices.push(new THREE.Vector3(0, -k, 0)), i = 0; d > i; i++) {
                var w = l[e][i + 1],
                    x = l[e][i],
                    y = this.vertices.length - 1,
                    A = new THREE.Vector3(0, -1, 0),
                    B = new THREE.Vector3(0, -1, 0),
                    C = new THREE.Vector3(0, -1, 0),
                    E = m[e][i + 1].clone(),
                    F = m[e][i].clone(),
                    G = new THREE.Vector2(F.x, 1);
                this.faces.push(new THREE.Face3(w, x, y, [A, B, C])), this.faceVertexUvs[0].push([E, F, G])
            }
        this.computeFaceNormals()
    }, THREE.CylinderGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.CylinderGeometry.prototype.constructor = THREE.CylinderGeometry, THREE.ExtrudeGeometry = function(a, b) {
        return "undefined" == typeof a ? void(a = []) : (THREE.Geometry.call(this), this.type = "ExtrudeGeometry", a = a instanceof Array ? a : [a], this.addShapeList(a, b), void this.computeFaceNormals())
    }, THREE.ExtrudeGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.ExtrudeGeometry.prototype.constructor = THREE.ExtrudeGeometry, THREE.ExtrudeGeometry.prototype.addShapeList = function(a, b) {
        for (var c = a.length, d = 0; c > d; d++) {
            var e = a[d];
            this.addShape(e, b)
        }
    }, THREE.ExtrudeGeometry.prototype.addShape = function(a, b) {
        function c(a, b, c) {
            return b || console.log("die"), b.clone().multiplyScalar(c).add(a)
        }

        function d(a, b, c) {
            var d, e, f = 1e-10,
                g = 1,
                h = a.x - b.x,
                i = a.y - b.y,
                j = c.x - a.x,
                k = c.y - a.y,
                l = h * h + i * i,
                m = h * k - i * j;
            if (Math.abs(m) > f) {
                var n = Math.sqrt(l),
                    o = Math.sqrt(j * j + k * k),
                    p = b.x - i / n,
                    q = b.y + h / n,
                    r = c.x - k / o,
                    s = c.y + j / o,
                    t = ((r - p) * k - (s - q) * j) / (h * k - i * j);
                d = p + h * t - a.x, e = q + i * t - a.y;
                var u = d * d + e * e;
                if (2 >= u) return new THREE.Vector2(d, e);
                g = Math.sqrt(u / 2)
            } else {
                var v = !1;
                h > f ? j > f && (v = !0) : -f > h ? -f > j && (v = !0) : Math.sign(i) == Math.sign(k) && (v = !0), v ? (d = -i, e = h, g = Math.sqrt(l)) : (d = h, e = i, g = Math.sqrt(l / 2))
            }
            return new THREE.Vector2(d / g, e / g)
        }

        function e() {
            if (t) {
                var a = 0,
                    b = S * a;
                for (V = 0; T > V; V++) R = K[V], i(R[2] + b, R[1] + b, R[0] + b);
                for (a = v + 2 * s, b = S * a, V = 0; T > V; V++) R = K[V], i(R[0] + b, R[1] + b, R[2] + b)
            } else {
                for (V = 0; T > V; V++) R = K[V], i(R[2], R[1], R[0]);
                for (V = 0; T > V; V++) R = K[V], i(R[0] + S * v, R[1] + S * v, R[2] + S * v)
            }
        }

        function f() {
            var a = 0;
            for (g(L, a), a += L.length, C = 0, D = I.length; D > C; C++) B = I[C], g(B, a), a += B.length
        }

        function g(a, b) {
            var c, d;
            for (V = a.length; --V >= 0;) {
                c = V, d = V - 1, 0 > d && (d = a.length - 1);
                var e = 0,
                    f = v + 2 * s;
                for (e = 0; f > e; e++) {
                    var g = S * e,
                        h = S * (e + 1),
                        i = b + c + g,
                        k = b + d + g,
                        l = b + d + h,
                        m = b + c + h;
                    j(i, k, l, m, a, e, f, c, d)
                }
            }
        }

        function h(a, b, c) {
            E.vertices.push(new THREE.Vector3(a, b, c))
        }

        function i(a, b, c) {
            a += F, b += F, c += F, E.faces.push(new THREE.Face3(a, b, c, null, null, y));
            var d = A.generateTopUV(E, a, b, c);
            E.faceVertexUvs[0].push(d)
        }

        function j(a, b, c, d) {
            a += F, b += F, c += F, d += F, E.faces.push(new THREE.Face3(a, b, d, null, null, z)), E.faces.push(new THREE.Face3(b, c, d, null, null, z));
            var e = A.generateSideWallUV(E, a, b, c, d);
            E.faceVertexUvs[0].push([e[0], e[1], e[3]]), E.faceVertexUvs[0].push([e[1], e[2], e[3]])
        }
        var k, l, m, n, o, p = void 0 !== b.amount ? b.amount : 100,
            q = void 0 !== b.bevelThickness ? b.bevelThickness : 6,
            r = void 0 !== b.bevelSize ? b.bevelSize : q - 2,
            s = void 0 !== b.bevelSegments ? b.bevelSegments : 3,
            t = void 0 !== b.bevelEnabled ? b.bevelEnabled : !0,
            u = void 0 !== b.curveSegments ? b.curveSegments : 12,
            v = void 0 !== b.steps ? b.steps : 1,
            w = b.extrudePath,
            x = !1,
            y = b.material,
            z = b.extrudeMaterial,
            A = void 0 !== b.UVGenerator ? b.UVGenerator : THREE.ExtrudeGeometry.WorldUVGenerator;
        w && (k = w.getSpacedPoints(v), x = !0, t = !1, l = void 0 !== b.frames ? b.frames : new THREE.TubeGeometry.FrenetFrames(w, v, !1), m = new THREE.Vector3, n = new THREE.Vector3, o = new THREE.Vector3), t || (s = 0, q = 0, r = 0);
        var B, C, D, E = this,
            F = this.vertices.length,
            G = a.extractPoints(u),
            H = G.shape,
            I = G.holes,
            J = !THREE.Shape.Utils.isClockWise(H);
        if (J) {
            for (H = H.reverse(), C = 0, D = I.length; D > C; C++) B = I[C], THREE.Shape.Utils.isClockWise(B) && (I[C] = B.reverse());
            J = !1
        }
        var K = THREE.Shape.Utils.triangulateShape(H, I),
            L = H;
        for (C = 0, D = I.length; D > C; C++) B = I[C], H = H.concat(B);
        for (var M, N, O, P, Q, R, S = H.length, T = K.length, U = (L.length, 180 / Math.PI, []), V = 0, W = L.length, X = W - 1, Y = V + 1; W > V; V++, X++, Y++) {
            X === W && (X = 0), Y === W && (Y = 0); {
                L[V], L[X], L[Y]
            }
            U[V] = d(L[V], L[X], L[Y])
        }
        var Z, $ = [],
            _ = U.concat();
        for (C = 0, D = I.length; D > C; C++) {
            for (B = I[C], Z = [], V = 0, W = B.length, X = W - 1, Y = V + 1; W > V; V++, X++, Y++) X === W && (X = 0), Y === W && (Y = 0), Z[V] = d(B[V], B[X], B[Y]);
            $.push(Z), _ = _.concat(Z)
        }
        for (M = 0; s > M; M++) {
            for (O = M / s, P = q * (1 - O), N = r * Math.sin(O * Math.PI / 2), V = 0, W = L.length; W > V; V++) Q = c(L[V], U[V], N), h(Q.x, Q.y, -P);
            for (C = 0, D = I.length; D > C; C++)
                for (B = I[C], Z = $[C], V = 0, W = B.length; W > V; V++) Q = c(B[V], Z[V], N), h(Q.x, Q.y, -P)
        }
        for (N = r, V = 0; S > V; V++) Q = t ? c(H[V], _[V], N) : H[V], x ? (n.copy(l.normals[0]).multiplyScalar(Q.x), m.copy(l.binormals[0]).multiplyScalar(Q.y), o.copy(k[0]).add(n).add(m), h(o.x, o.y, o.z)) : h(Q.x, Q.y, 0);
        var aa;
        for (aa = 1; v >= aa; aa++)
            for (V = 0; S > V; V++) Q = t ? c(H[V], _[V], N) : H[V], x ? (n.copy(l.normals[aa]).multiplyScalar(Q.x), m.copy(l.binormals[aa]).multiplyScalar(Q.y), o.copy(k[aa]).add(n).add(m), h(o.x, o.y, o.z)) : h(Q.x, Q.y, p / v * aa);
        for (M = s - 1; M >= 0; M--) {
            for (O = M / s, P = q * (1 - O), N = r * Math.sin(O * Math.PI / 2), V = 0, W = L.length; W > V; V++) Q = c(L[V], U[V], N), h(Q.x, Q.y, p + P);
            for (C = 0, D = I.length; D > C; C++)
                for (B = I[C], Z = $[C], V = 0, W = B.length; W > V; V++) Q = c(B[V], Z[V], N), x ? h(Q.x, Q.y + k[v - 1].y, k[v - 1].x + P) : h(Q.x, Q.y, p + P)
        }
        e(), f()
    }, THREE.ExtrudeGeometry.WorldUVGenerator = {
        generateTopUV: function(a, b, c, d) {
            var e = a.vertices,
                f = e[b],
                g = e[c],
                h = e[d];
            return [new THREE.Vector2(f.x, f.y), new THREE.Vector2(g.x, g.y), new THREE.Vector2(h.x, h.y)]
        },
        generateSideWallUV: function(a, b, c, d, e) {
            var f = a.vertices,
                g = f[b],
                h = f[c],
                i = f[d],
                j = f[e];
            return Math.abs(g.y - h.y) < .01 ? [new THREE.Vector2(g.x, 1 - g.z), new THREE.Vector2(h.x, 1 - h.z), new THREE.Vector2(i.x, 1 - i.z), new THREE.Vector2(j.x, 1 - j.z)] : [new THREE.Vector2(g.y, 1 - g.z), new THREE.Vector2(h.y, 1 - h.z), new THREE.Vector2(i.y, 1 - i.z), new THREE.Vector2(j.y, 1 - j.z)]
        }
    }, THREE.ShapeGeometry = function(a, b) {
        THREE.Geometry.call(this), this.type = "ShapeGeometry", a instanceof Array == !1 && (a = [a]), this.addShapeList(a, b), this.computeFaceNormals()
    }, THREE.ShapeGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.ShapeGeometry.prototype.constructor = THREE.ShapeGeometry, THREE.ShapeGeometry.prototype.addShapeList = function(a, b) {
        for (var c = 0, d = a.length; d > c; c++) this.addShape(a[c], b);
        return this
    }, THREE.ShapeGeometry.prototype.addShape = function(a, b) {
        void 0 === b && (b = {});
        var c, d, e, f = void 0 !== b.curveSegments ? b.curveSegments : 12,
            g = b.material,
            h = void 0 === b.UVGenerator ? THREE.ExtrudeGeometry.WorldUVGenerator : b.UVGenerator,
            i = this.vertices.length,
            j = a.extractPoints(f),
            k = j.shape,
            l = j.holes,
            m = !THREE.Shape.Utils.isClockWise(k);
        if (m) {
            for (k = k.reverse(), c = 0, d = l.length; d > c; c++) e = l[c], THREE.Shape.Utils.isClockWise(e) && (l[c] = e.reverse());
            m = !1
        }
        var n = THREE.Shape.Utils.triangulateShape(k, l),
            o = k;
        for (c = 0, d = l.length; d > c; c++) e = l[c], k = k.concat(e); {
            var p, q, r = k.length,
                s = n.length;
            o.length
        }
        for (c = 0; r > c; c++) p = k[c], this.vertices.push(new THREE.Vector3(p.x, p.y, 0));
        for (c = 0; s > c; c++) {
            q = n[c];
            var t = q[0] + i,
                u = q[1] + i,
                v = q[2] + i;
            this.faces.push(new THREE.Face3(t, u, v, null, null, g)), this.faceVertexUvs[0].push(h.generateTopUV(this, t, u, v))
        }
    }, THREE.LatheGeometry = function(a, b, c, d) {
        THREE.Geometry.call(this), this.type = "LatheGeometry", this.parameters = {
            points: a,
            segments: b,
            phiStart: c,
            phiLength: d
        }, b = b || 12, c = c || 0, d = d || 2 * Math.PI;
        for (var e = 1 / (a.length - 1), f = 1 / b, g = 0, h = b; h >= g; g++)
            for (var i = c + g * f * d, j = Math.cos(i), k = Math.sin(i), l = 0, m = a.length; m > l; l++) {
                var n = a[l],
                    o = new THREE.Vector3;
                o.x = j * n.x - k * n.y, o.y = k * n.x + j * n.y, o.z = n.z, this.vertices.push(o)
            }
        for (var p = a.length, g = 0, h = b; h > g; g++)
            for (var l = 0, m = a.length - 1; m > l; l++) {
                var q = l + p * g,
                    r = q,
                    s = q + p,
                    j = q + 1 + p,
                    t = q + 1,
                    u = g * f,
                    v = l * e,
                    w = u + f,
                    x = v + e;
                this.faces.push(new THREE.Face3(r, s, t)), this.faceVertexUvs[0].push([new THREE.Vector2(u, v), new THREE.Vector2(w, v), new THREE.Vector2(u, x)]), this.faces.push(new THREE.Face3(s, j, t)), this.faceVertexUvs[0].push([new THREE.Vector2(w, v), new THREE.Vector2(w, x), new THREE.Vector2(u, x)])
            }
        this.mergeVertices(), this.computeFaceNormals(), this.computeVertexNormals()
    }, THREE.LatheGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.LatheGeometry.prototype.constructor = THREE.LatheGeometry, THREE.PlaneGeometry = function(a, b, c, d) {
        console.info("THREE.PlaneGeometry: Consider using THREE.PlaneBufferGeometry for lower memory footprint."), THREE.Geometry.call(this), this.type = "PlaneGeometry", this.parameters = {
            width: a,
            height: b,
            widthSegments: c,
            heightSegments: d
        }, this.fromBufferGeometry(new THREE.PlaneBufferGeometry(a, b, c, d))
    }, THREE.PlaneGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.PlaneGeometry.prototype.constructor = THREE.PlaneGeometry, THREE.PlaneBufferGeometry = function(a, b, c, d) {
        THREE.BufferGeometry.call(this), this.type = "PlaneBufferGeometry", this.parameters = {
            width: a,
            height: b,
            widthSegments: c,
            heightSegments: d
        };
        for (var e = a / 2, f = b / 2, g = c || 1, h = d || 1, i = g + 1, j = h + 1, k = a / g, l = b / h, m = new Float32Array(i * j * 3), n = new Float32Array(i * j * 3), o = new Float32Array(i * j * 2), p = 0, q = 0, r = 0; j > r; r++)
            for (var s = r * l - f, t = 0; i > t; t++) {
                var u = t * k - e;
                m[p] = u, m[p + 1] = -s, n[p + 2] = 1, o[q] = t / g, o[q + 1] = 1 - r / h, p += 3, q += 2
            }
        p = 0;
        for (var v = new(m.length / 3 > 65535 ? Uint32Array : Uint16Array)(g * h * 6), r = 0; h > r; r++)
            for (var t = 0; g > t; t++) {
                var w = t + i * r,
                    x = t + i * (r + 1),
                    y = t + 1 + i * (r + 1),
                    z = t + 1 + i * r;
                v[p] = w, v[p + 1] = x, v[p + 2] = z, v[p + 3] = x, v[p + 4] = y, v[p + 5] = z, p += 6
            }
        this.addAttribute("index", new THREE.BufferAttribute(v, 1)), this.addAttribute("position", new THREE.BufferAttribute(m, 3)), this.addAttribute("normal", new THREE.BufferAttribute(n, 3)), this.addAttribute("uv", new THREE.BufferAttribute(o, 2))
    }, THREE.PlaneBufferGeometry.prototype = Object.create(THREE.BufferGeometry.prototype), THREE.PlaneBufferGeometry.prototype.constructor = THREE.PlaneBufferGeometry, THREE.RingGeometry = function(a, b, c, d, e, f) {
        THREE.Geometry.call(this), this.type = "RingGeometry", this.parameters = {
            innerRadius: a,
            outerRadius: b,
            thetaSegments: c,
            phiSegments: d,
            thetaStart: e,
            thetaLength: f
        }, a = a || 0, b = b || 50, e = void 0 !== e ? e : 0, f = void 0 !== f ? f : 2 * Math.PI, c = void 0 !== c ? Math.max(3, c) : 8, d = void 0 !== d ? Math.max(1, d) : 8;
        var g, h, i = [],
            j = a,
            k = (b - a) / d;
        for (g = 0; d + 1 > g; g++) {
            for (h = 0; c + 1 > h; h++) {
                var l = new THREE.Vector3,
                    m = e + h / c * f;
                l.x = j * Math.cos(m), l.y = j * Math.sin(m), this.vertices.push(l), i.push(new THREE.Vector2((l.x / b + 1) / 2, (l.y / b + 1) / 2))
            }
            j += k
        }
        var n = new THREE.Vector3(0, 0, 1);
        for (g = 0; d > g; g++) {
            var o = g * (c + 1);
            for (h = 0; c > h; h++) {
                var m = h + o,
                    p = m,
                    q = m + c + 1,
                    r = m + c + 2;
                this.faces.push(new THREE.Face3(p, q, r, [n.clone(), n.clone(), n.clone()])), this.faceVertexUvs[0].push([i[p].clone(), i[q].clone(), i[r].clone()]), p = m, q = m + c + 2, r = m + 1, this.faces.push(new THREE.Face3(p, q, r, [n.clone(), n.clone(), n.clone()])), this.faceVertexUvs[0].push([i[p].clone(), i[q].clone(), i[r].clone()])
            }
        }
        this.computeFaceNormals(), this.boundingSphere = new THREE.Sphere(new THREE.Vector3, j)
    }, THREE.RingGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.RingGeometry.prototype.constructor = THREE.RingGeometry, THREE.SphereGeometry = function(a, b, c, d, e, f, g) {
        THREE.Geometry.call(this), this.type = "SphereGeometry", this.parameters = {
            radius: a,
            widthSegments: b,
            heightSegments: c,
            phiStart: d,
            phiLength: e,
            thetaStart: f,
            thetaLength: g
        }, a = a || 50, b = Math.max(3, Math.floor(b) || 8), c = Math.max(2, Math.floor(c) || 6), d = void 0 !== d ? d : 0, e = void 0 !== e ? e : 2 * Math.PI, f = void 0 !== f ? f : 0, g = void 0 !== g ? g : Math.PI;
        var h, i, j = [],
            k = [];
        for (i = 0; c >= i; i++) {
            var l = [],
                m = [];
            for (h = 0; b >= h; h++) {
                var n = h / b,
                    o = i / c,
                    p = new THREE.Vector3;
                p.x = -a * Math.cos(d + n * e) * Math.sin(f + o * g), p.y = a * Math.cos(f + o * g), p.z = a * Math.sin(d + n * e) * Math.sin(f + o * g), this.vertices.push(p), l.push(this.vertices.length - 1), m.push(new THREE.Vector2(n, 1 - o))
            }
            j.push(l), k.push(m)
        }
        for (i = 0; c > i; i++)
            for (h = 0; b > h; h++) {
                var q = j[i][h + 1],
                    r = j[i][h],
                    s = j[i + 1][h],
                    t = j[i + 1][h + 1],
                    u = this.vertices[q].clone().normalize(),
                    v = this.vertices[r].clone().normalize(),
                    w = this.vertices[s].clone().normalize(),
                    x = this.vertices[t].clone().normalize(),
                    y = k[i][h + 1].clone(),
                    z = k[i][h].clone(),
                    A = k[i + 1][h].clone(),
                    B = k[i + 1][h + 1].clone();
                Math.abs(this.vertices[q].y) === a ? (y.x = (y.x + z.x) / 2, this.faces.push(new THREE.Face3(q, s, t, [u, w, x])), this.faceVertexUvs[0].push([y, A, B])) : Math.abs(this.vertices[s].y) === a ? (A.x = (A.x + B.x) / 2, this.faces.push(new THREE.Face3(q, r, s, [u, v, w])), this.faceVertexUvs[0].push([y, z, A])) : (this.faces.push(new THREE.Face3(q, r, t, [u, v, x])), this.faceVertexUvs[0].push([y, z, B]), this.faces.push(new THREE.Face3(r, s, t, [v.clone(), w, x.clone()])), this.faceVertexUvs[0].push([z.clone(), A, B.clone()]))
            }
        this.computeFaceNormals(), this.boundingSphere = new THREE.Sphere(new THREE.Vector3, a)
    }, THREE.SphereGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.SphereGeometry.prototype.constructor = THREE.SphereGeometry, THREE.TextGeometry = function(a, b) {
        b = b || {};
        var c = THREE.FontUtils.generateShapes(a, b);
        b.amount = void 0 !== b.height ? b.height : 50, void 0 === b.bevelThickness && (b.bevelThickness = 10), void 0 === b.bevelSize && (b.bevelSize = 8), void 0 === b.bevelEnabled && (b.bevelEnabled = !1), THREE.ExtrudeGeometry.call(this, c, b), this.type = "TextGeometry"
    }, THREE.TextGeometry.prototype = Object.create(THREE.ExtrudeGeometry.prototype),
    THREE.TextGeometry.prototype.constructor = THREE.TextGeometry, THREE.TorusGeometry = function(a, b, c, d, e) {
        THREE.Geometry.call(this), this.type = "TorusGeometry", this.parameters = {
            radius: a,
            tube: b,
            radialSegments: c,
            tubularSegments: d,
            arc: e
        }, a = a || 100, b = b || 40, c = c || 8, d = d || 6, e = e || 2 * Math.PI;
        for (var f = new THREE.Vector3, g = [], h = [], i = 0; c >= i; i++)
            for (var j = 0; d >= j; j++) {
                var k = j / d * e,
                    l = i / c * Math.PI * 2;
                f.x = a * Math.cos(k), f.y = a * Math.sin(k);
                var m = new THREE.Vector3;
                m.x = (a + b * Math.cos(l)) * Math.cos(k), m.y = (a + b * Math.cos(l)) * Math.sin(k), m.z = b * Math.sin(l), this.vertices.push(m), g.push(new THREE.Vector2(j / d, i / c)), h.push(m.clone().sub(f).normalize())
            }
        for (var i = 1; c >= i; i++)
            for (var j = 1; d >= j; j++) {
                var n = (d + 1) * i + j - 1,
                    o = (d + 1) * (i - 1) + j - 1,
                    p = (d + 1) * (i - 1) + j,
                    q = (d + 1) * i + j,
                    r = new THREE.Face3(n, o, q, [h[n].clone(), h[o].clone(), h[q].clone()]);
                this.faces.push(r), this.faceVertexUvs[0].push([g[n].clone(), g[o].clone(), g[q].clone()]), r = new THREE.Face3(o, p, q, [h[o].clone(), h[p].clone(), h[q].clone()]), this.faces.push(r), this.faceVertexUvs[0].push([g[o].clone(), g[p].clone(), g[q].clone()])
            }
        this.computeFaceNormals()
    }, THREE.TorusGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.TorusGeometry.prototype.constructor = THREE.TorusGeometry, THREE.TorusKnotGeometry = function(a, b, c, d, e, f, g) {
        function h(a, b, c, d, e) {
            var f = Math.cos(a),
                g = Math.sin(a),
                h = b / c * a,
                i = Math.cos(h),
                j = d * (2 + i) * .5 * f,
                k = d * (2 + i) * g * .5,
                l = e * d * Math.sin(h) * .5;
            return new THREE.Vector3(j, k, l)
        }
        THREE.Geometry.call(this), this.type = "TorusKnotGeometry", this.parameters = {
            radius: a,
            tube: b,
            radialSegments: c,
            tubularSegments: d,
            p: e,
            q: f,
            heightScale: g
        }, a = a || 100, b = b || 40, c = c || 64, d = d || 8, e = e || 2, f = f || 3, g = g || 1;
        for (var i = new Array(c), j = new THREE.Vector3, k = new THREE.Vector3, l = new THREE.Vector3, m = 0; c > m; ++m) {
            i[m] = new Array(d);
            var n = m / c * 2 * e * Math.PI,
                o = h(n, f, e, a, g),
                p = h(n + .01, f, e, a, g);
            j.subVectors(p, o), k.addVectors(p, o), l.crossVectors(j, k), k.crossVectors(l, j), l.normalize(), k.normalize();
            for (var q = 0; d > q; ++q) {
                var r = q / d * 2 * Math.PI,
                    s = -b * Math.cos(r),
                    t = b * Math.sin(r),
                    u = new THREE.Vector3;
                u.x = o.x + s * k.x + t * l.x, u.y = o.y + s * k.y + t * l.y, u.z = o.z + s * k.z + t * l.z, i[m][q] = this.vertices.push(u) - 1
            }
        }
        for (var m = 0; c > m; ++m)
            for (var q = 0; d > q; ++q) {
                var v = (m + 1) % c,
                    w = (q + 1) % d,
                    x = i[m][q],
                    y = i[v][q],
                    z = i[v][w],
                    A = i[m][w],
                    B = new THREE.Vector2(m / c, q / d),
                    C = new THREE.Vector2((m + 1) / c, q / d),
                    D = new THREE.Vector2((m + 1) / c, (q + 1) / d),
                    E = new THREE.Vector2(m / c, (q + 1) / d);
                this.faces.push(new THREE.Face3(x, y, A)), this.faceVertexUvs[0].push([B, C, E]), this.faces.push(new THREE.Face3(y, z, A)), this.faceVertexUvs[0].push([C.clone(), D, E.clone()])
            }
        this.computeFaceNormals(), this.computeVertexNormals()
    }, THREE.TorusKnotGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.TorusKnotGeometry.prototype.constructor = THREE.TorusKnotGeometry, THREE.TubeGeometry = function(a, b, c, d, e, f) {
        function g(a, b, c) {
            return D.vertices.push(new THREE.Vector3(a, b, c)) - 1
        }
        THREE.Geometry.call(this), this.type = "TubeGeometry", this.parameters = {
            path: a,
            segments: b,
            radius: c,
            radialSegments: d,
            closed: e
        }, b = b || 64, c = c || 1, d = d || 8, e = e || !1, f = f || THREE.TubeGeometry.NoTaper;
        var h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, A, B, C = [],
            D = this,
            E = b + 1,
            F = new THREE.Vector3,
            G = new THREE.TubeGeometry.FrenetFrames(a, b, e),
            H = G.tangents,
            I = G.normals,
            J = G.binormals;
        for (this.tangents = H, this.normals = I, this.binormals = J, q = 0; E > q; q++)
            for (C[q] = [], k = q / (E - 1), p = a.getPointAt(k), h = H[q], i = I[q], j = J[q], m = c * f(k), r = 0; d > r; r++) l = r / d * 2 * Math.PI, n = -m * Math.cos(l), o = m * Math.sin(l), F.copy(p), F.x += n * i.x + o * j.x, F.y += n * i.y + o * j.y, F.z += n * i.z + o * j.z, C[q][r] = g(F.x, F.y, F.z);
        for (q = 0; b > q; q++)
            for (r = 0; d > r; r++) s = e ? (q + 1) % b : q + 1, t = (r + 1) % d, u = C[q][r], v = C[s][r], w = C[s][t], x = C[q][t], y = new THREE.Vector2(q / b, r / d), z = new THREE.Vector2((q + 1) / b, r / d), A = new THREE.Vector2((q + 1) / b, (r + 1) / d), B = new THREE.Vector2(q / b, (r + 1) / d), this.faces.push(new THREE.Face3(u, v, x)), this.faceVertexUvs[0].push([y, z, B]), this.faces.push(new THREE.Face3(v, w, x)), this.faceVertexUvs[0].push([z.clone(), A, B.clone()]);
        this.computeFaceNormals(), this.computeVertexNormals()
    }, THREE.TubeGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.TubeGeometry.prototype.constructor = THREE.TubeGeometry, THREE.TubeGeometry.NoTaper = function() {
        return 1
    }, THREE.TubeGeometry.SinusoidalTaper = function(a) {
        return Math.sin(Math.PI * a)
    }, THREE.TubeGeometry.FrenetFrames = function(a, b, c) {
        function d() {
            n[0] = new THREE.Vector3, o[0] = new THREE.Vector3, f = Number.MAX_VALUE, g = Math.abs(m[0].x), h = Math.abs(m[0].y), i = Math.abs(m[0].z), f >= g && (f = g, l.set(1, 0, 0)), f >= h && (f = h, l.set(0, 1, 0)), f >= i && l.set(0, 0, 1), p.crossVectors(m[0], l).normalize(), n[0].crossVectors(m[0], p), o[0].crossVectors(m[0], n[0])
        }
        var e, f, g, h, i, j, k, l = (new THREE.Vector3, new THREE.Vector3),
            m = (new THREE.Vector3, []),
            n = [],
            o = [],
            p = new THREE.Vector3,
            q = new THREE.Matrix4,
            r = b + 1,
            s = 1e-4;
        for (this.tangents = m, this.normals = n, this.binormals = o, j = 0; r > j; j++) k = j / (r - 1), m[j] = a.getTangentAt(k), m[j].normalize();
        for (d(), j = 1; r > j; j++) n[j] = n[j - 1].clone(), o[j] = o[j - 1].clone(), p.crossVectors(m[j - 1], m[j]), p.length() > s && (p.normalize(), e = Math.acos(THREE.Math.clamp(m[j - 1].dot(m[j]), -1, 1)), n[j].applyMatrix4(q.makeRotationAxis(p, e))), o[j].crossVectors(m[j], n[j]);
        if (c)
            for (e = Math.acos(THREE.Math.clamp(n[0].dot(n[r - 1]), -1, 1)), e /= r - 1, m[0].dot(p.crossVectors(n[0], n[r - 1])) > 0 && (e = -e), j = 1; r > j; j++) n[j].applyMatrix4(q.makeRotationAxis(m[j], e * j)), o[j].crossVectors(m[j], n[j])
    }, THREE.PolyhedronGeometry = function(a, b, c, d) {
        function e(a) {
            var b = a.normalize().clone();
            b.index = k.vertices.push(b) - 1;
            var c = h(a) / 2 / Math.PI + .5,
                d = i(a) / Math.PI + .5;
            return b.uv = new THREE.Vector2(c, 1 - d), b
        }

        function f(a, b, c) {
            var d = new THREE.Face3(a.index, b.index, c.index, [a.clone(), b.clone(), c.clone()]);
            k.faces.push(d), t.copy(a).add(b).add(c).divideScalar(3);
            var e = h(t);
            k.faceVertexUvs[0].push([j(a.uv, a, e), j(b.uv, b, e), j(c.uv, c, e)])
        }

        function g(a, b) {
            for (var c = Math.pow(2, b), d = (Math.pow(4, b), e(k.vertices[a.a])), g = e(k.vertices[a.b]), h = e(k.vertices[a.c]), i = [], j = 0; c >= j; j++) {
                i[j] = [];
                for (var l = e(d.clone().lerp(h, j / c)), m = e(g.clone().lerp(h, j / c)), n = c - j, o = 0; n >= o; o++) i[j][o] = 0 == o && j == c ? l : e(l.clone().lerp(m, o / n))
            }
            for (var j = 0; c > j; j++)
                for (var o = 0; 2 * (c - j) - 1 > o; o++) {
                    var p = Math.floor(o / 2);
                    o % 2 == 0 ? f(i[j][p + 1], i[j + 1][p], i[j][p]) : f(i[j][p + 1], i[j + 1][p + 1], i[j + 1][p])
                }
        }

        function h(a) {
            return Math.atan2(a.z, -a.x)
        }

        function i(a) {
            return Math.atan2(-a.y, Math.sqrt(a.x * a.x + a.z * a.z))
        }

        function j(a, b, c) {
            return 0 > c && 1 === a.x && (a = new THREE.Vector2(a.x - 1, a.y)), 0 === b.x && 0 === b.z && (a = new THREE.Vector2(c / 2 / Math.PI + .5, a.y)), a.clone()
        }
        THREE.Geometry.call(this), this.type = "PolyhedronGeometry", this.parameters = {
            vertices: a,
            indices: b,
            radius: c,
            detail: d
        }, c = c || 1, d = d || 0;
        for (var k = this, l = 0, m = a.length; m > l; l += 3) e(new THREE.Vector3(a[l], a[l + 1], a[l + 2]));
        for (var n = this.vertices, o = [], l = 0, p = 0, m = b.length; m > l; l += 3, p++) {
            var q = n[b[l]],
                r = n[b[l + 1]],
                s = n[b[l + 2]];
            o[p] = new THREE.Face3(q.index, r.index, s.index, [q.clone(), r.clone(), s.clone()])
        }
        for (var t = new THREE.Vector3, l = 0, m = o.length; m > l; l++) g(o[l], d);
        for (var l = 0, m = this.faceVertexUvs[0].length; m > l; l++) {
            var u = this.faceVertexUvs[0][l],
                v = u[0].x,
                w = u[1].x,
                x = u[2].x,
                y = Math.max(v, Math.max(w, x)),
                z = Math.min(v, Math.min(w, x));
            y > .9 && .1 > z && (.2 > v && (u[0].x += 1), .2 > w && (u[1].x += 1), .2 > x && (u[2].x += 1))
        }
        for (var l = 0, m = this.vertices.length; m > l; l++) this.vertices[l].multiplyScalar(c);
        this.mergeVertices(), this.computeFaceNormals(), this.boundingSphere = new THREE.Sphere(new THREE.Vector3, c)
    }, THREE.PolyhedronGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.PolyhedronGeometry.prototype.constructor = THREE.PolyhedronGeometry, THREE.DodecahedronGeometry = function(a, b) {
        this.parameters = {
            radius: a,
            detail: b
        };
        var c = (1 + Math.sqrt(5)) / 2,
            d = 1 / c,
            e = [-1, -1, -1, -1, -1, 1, -1, 1, -1, -1, 1, 1, 1, -1, -1, 1, -1, 1, 1, 1, -1, 1, 1, 1, 0, -d, -c, 0, -d, c, 0, d, -c, 0, d, c, -d, -c, 0, -d, c, 0, d, -c, 0, d, c, 0, -c, 0, -d, c, 0, -d, -c, 0, d, c, 0, d],
            f = [3, 11, 7, 3, 7, 15, 3, 15, 13, 7, 19, 17, 7, 17, 6, 7, 6, 15, 17, 4, 8, 17, 8, 10, 17, 10, 6, 8, 0, 16, 8, 16, 2, 8, 2, 10, 0, 12, 1, 0, 1, 18, 0, 18, 16, 6, 10, 2, 6, 2, 13, 6, 13, 15, 2, 16, 18, 2, 18, 3, 2, 3, 13, 18, 1, 9, 18, 9, 11, 18, 11, 3, 4, 14, 12, 4, 12, 0, 4, 0, 8, 11, 9, 5, 11, 5, 19, 11, 19, 7, 19, 5, 14, 19, 14, 4, 19, 4, 17, 1, 12, 14, 1, 14, 5, 1, 5, 9];
        THREE.PolyhedronGeometry.call(this, e, f, a, b)
    }, THREE.DodecahedronGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.DodecahedronGeometry.prototype.constructor = THREE.DodecahedronGeometry, THREE.IcosahedronGeometry = function(a, b) {
        var c = (1 + Math.sqrt(5)) / 2,
            d = [-1, c, 0, 1, c, 0, -1, -c, 0, 1, -c, 0, 0, -1, c, 0, 1, c, 0, -1, -c, 0, 1, -c, c, 0, -1, c, 0, 1, -c, 0, -1, -c, 0, 1],
            e = [0, 11, 5, 0, 5, 1, 0, 1, 7, 0, 7, 10, 0, 10, 11, 1, 5, 9, 5, 11, 4, 11, 10, 2, 10, 7, 6, 7, 1, 8, 3, 9, 4, 3, 4, 2, 3, 2, 6, 3, 6, 8, 3, 8, 9, 4, 9, 5, 2, 4, 11, 6, 2, 10, 8, 6, 7, 9, 8, 1];
        THREE.PolyhedronGeometry.call(this, d, e, a, b), this.type = "IcosahedronGeometry", this.parameters = {
            radius: a,
            detail: b
        }
    }, THREE.IcosahedronGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.IcosahedronGeometry.prototype.constructor = THREE.IcosahedronGeometry, THREE.OctahedronGeometry = function(a, b) {
        this.parameters = {
            radius: a,
            detail: b
        };
        var c = [1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1, 0, 0, 0, 1, 0, 0, -1],
            d = [0, 2, 4, 0, 4, 3, 0, 3, 5, 0, 5, 2, 1, 2, 5, 1, 5, 3, 1, 3, 4, 1, 4, 2];
        THREE.PolyhedronGeometry.call(this, c, d, a, b), this.type = "OctahedronGeometry", this.parameters = {
            radius: a,
            detail: b
        }
    }, THREE.OctahedronGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.OctahedronGeometry.prototype.constructor = THREE.OctahedronGeometry, THREE.TetrahedronGeometry = function(a, b) {
        var c = [1, 1, 1, -1, -1, 1, -1, 1, -1, 1, -1, -1],
            d = [2, 1, 0, 0, 3, 2, 1, 3, 0, 2, 3, 1];
        THREE.PolyhedronGeometry.call(this, c, d, a, b), this.type = "TetrahedronGeometry", this.parameters = {
            radius: a,
            detail: b
        }
    }, THREE.TetrahedronGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.TetrahedronGeometry.prototype.constructor = THREE.TetrahedronGeometry, THREE.ParametricGeometry = function(a, b, c) {
        THREE.Geometry.call(this), this.type = "ParametricGeometry", this.parameters = {
            func: a,
            slices: b,
            stacks: c
        };
        var d, e, f, g, h, i = this.vertices,
            j = this.faces,
            k = this.faceVertexUvs[0],
            l = b + 1;
        for (d = 0; c >= d; d++)
            for (h = d / c, e = 0; b >= e; e++) g = e / b, f = a(g, h), i.push(f);
        var m, n, o, p, q, r, s, t;
        for (d = 0; c > d; d++)
            for (e = 0; b > e; e++) m = d * l + e, n = d * l + e + 1, o = (d + 1) * l + e + 1, p = (d + 1) * l + e, q = new THREE.Vector2(e / b, d / c), r = new THREE.Vector2((e + 1) / b, d / c), s = new THREE.Vector2((e + 1) / b, (d + 1) / c), t = new THREE.Vector2(e / b, (d + 1) / c), j.push(new THREE.Face3(m, n, p)), k.push([q, r, t]), j.push(new THREE.Face3(n, o, p)), k.push([r.clone(), s, t.clone()]);
        this.computeFaceNormals(), this.computeVertexNormals()
    }, THREE.ParametricGeometry.prototype = Object.create(THREE.Geometry.prototype), THREE.ParametricGeometry.prototype.constructor = THREE.ParametricGeometry, THREE.AxisHelper = function(a) {
        a = a || 1;
        var b = new Float32Array([0, 0, 0, a, 0, 0, 0, 0, 0, 0, a, 0, 0, 0, 0, 0, 0, a]),
            c = new Float32Array([1, 0, 0, 1, .6, 0, 0, 1, 0, .6, 1, 0, 0, 0, 1, 0, .6, 1]),
            d = new THREE.BufferGeometry;
        d.addAttribute("position", new THREE.BufferAttribute(b, 3)), d.addAttribute("color", new THREE.BufferAttribute(c, 3));
        var e = new THREE.LineBasicMaterial({
            vertexColors: THREE.VertexColors
        });
        THREE.Line.call(this, d, e, THREE.LinePieces)
    }, THREE.AxisHelper.prototype = Object.create(THREE.Line.prototype), THREE.AxisHelper.prototype.constructor = THREE.AxisHelper, THREE.ArrowHelper = function() {
        var a = new THREE.Geometry;
        a.vertices.push(new THREE.Vector3(0, 0, 0), new THREE.Vector3(0, 1, 0));
        var b = new THREE.CylinderGeometry(0, .5, 1, 5, 1);
        return b.applyMatrix((new THREE.Matrix4).makeTranslation(0, -.5, 0)),
            function(c, d, e, f, g, h) {
                THREE.Object3D.call(this), void 0 === f && (f = 16776960), void 0 === e && (e = 1), void 0 === g && (g = .2 * e), void 0 === h && (h = .2 * g), this.position.copy(d), this.line = new THREE.Line(a, new THREE.LineBasicMaterial({
                    color: f
                })), this.line.matrixAutoUpdate = !1, this.add(this.line), this.cone = new THREE.Mesh(b, new THREE.MeshBasicMaterial({
                    color: f
                })), this.cone.matrixAutoUpdate = !1, this.add(this.cone), this.setDirection(c), this.setLength(e, g, h)
            }
    }(), THREE.ArrowHelper.prototype = Object.create(THREE.Object3D.prototype), THREE.ArrowHelper.prototype.constructor = THREE.ArrowHelper, THREE.ArrowHelper.prototype.setDirection = function() {
        var a, b = new THREE.Vector3;
        return function(c) {
            c.y > .99999 ? this.quaternion.set(0, 0, 0, 1) : c.y < -.99999 ? this.quaternion.set(1, 0, 0, 0) : (b.set(c.z, 0, -c.x).normalize(), a = Math.acos(c.y), this.quaternion.setFromAxisAngle(b, a))
        }
    }(), THREE.ArrowHelper.prototype.setLength = function(a, b, c) {
        void 0 === b && (b = .2 * a), void 0 === c && (c = .2 * b), this.line.scale.set(1, a - b, 1), this.line.updateMatrix(), this.cone.scale.set(c, b, c), this.cone.position.y = a, this.cone.updateMatrix()
    }, THREE.ArrowHelper.prototype.setColor = function(a) {
        this.line.material.color.set(a), this.cone.material.color.set(a)
    }, THREE.BoxHelper = function(a) {
        var b = new THREE.BufferGeometry;
        b.addAttribute("position", new THREE.BufferAttribute(new Float32Array(72), 3)), THREE.Line.call(this, b, new THREE.LineBasicMaterial({
            color: 16776960
        }), THREE.LinePieces), void 0 !== a && this.update(a)
    }, THREE.BoxHelper.prototype = Object.create(THREE.Line.prototype), THREE.BoxHelper.prototype.constructor = THREE.BoxHelper, THREE.BoxHelper.prototype.update = function(a) {
        var b = a.geometry;
        null === b.boundingBox && b.computeBoundingBox();
        var c = b.boundingBox.min,
            d = b.boundingBox.max,
            e = this.geometry.attributes.position.array;
        e[0] = d.x, e[1] = d.y, e[2] = d.z, e[3] = c.x, e[4] = d.y, e[5] = d.z, e[6] = c.x, e[7] = d.y, e[8] = d.z, e[9] = c.x, e[10] = c.y, e[11] = d.z, e[12] = c.x, e[13] = c.y, e[14] = d.z, e[15] = d.x, e[16] = c.y, e[17] = d.z, e[18] = d.x, e[19] = c.y, e[20] = d.z, e[21] = d.x, e[22] = d.y, e[23] = d.z, e[24] = d.x, e[25] = d.y, e[26] = c.z, e[27] = c.x, e[28] = d.y, e[29] = c.z, e[30] = c.x, e[31] = d.y, e[32] = c.z, e[33] = c.x, e[34] = c.y, e[35] = c.z, e[36] = c.x, e[37] = c.y, e[38] = c.z, e[39] = d.x, e[40] = c.y, e[41] = c.z, e[42] = d.x, e[43] = c.y, e[44] = c.z, e[45] = d.x, e[46] = d.y, e[47] = c.z, e[48] = d.x, e[49] = d.y, e[50] = d.z, e[51] = d.x, e[52] = d.y, e[53] = c.z, e[54] = c.x, e[55] = d.y, e[56] = d.z, e[57] = c.x, e[58] = d.y, e[59] = c.z, e[60] = c.x, e[61] = c.y, e[62] = d.z, e[63] = c.x, e[64] = c.y, e[65] = c.z, e[66] = d.x, e[67] = c.y, e[68] = d.z, e[69] = d.x, e[70] = c.y, e[71] = c.z, this.geometry.attributes.position.needsUpdate = !0, this.geometry.computeBoundingSphere(), this.matrix = a.matrixWorld, this.matrixAutoUpdate = !1
    }, THREE.BoundingBoxHelper = function(a, b) {
        var c = void 0 !== b ? b : 8947848;
        this.object = a, this.box = new THREE.Box3, THREE.Mesh.call(this, new THREE.BoxGeometry(1, 1, 1), new THREE.MeshBasicMaterial({
            color: c,
            wireframe: !0
        }))
    }, THREE.BoundingBoxHelper.prototype = Object.create(THREE.Mesh.prototype), THREE.BoundingBoxHelper.prototype.constructor = THREE.BoundingBoxHelper, THREE.BoundingBoxHelper.prototype.update = function() {
        this.box.setFromObject(this.object), this.box.size(this.scale), this.box.center(this.position)
    }, THREE.CameraHelper = function(a) {
        function b(a, b, d) {
            c(a, d), c(b, d)
        }

        function c(a, b) {
            d.vertices.push(new THREE.Vector3), d.colors.push(new THREE.Color(b)), void 0 === f[a] && (f[a] = []), f[a].push(d.vertices.length - 1)
        }
        var d = new THREE.Geometry,
            e = new THREE.LineBasicMaterial({
                color: 16777215,
                vertexColors: THREE.FaceColors
            }),
            f = {},
            g = 16755200,
            h = 16711680,
            i = 43775,
            j = 16777215,
            k = 3355443;
        b("n1", "n2", g), b("n2", "n4", g), b("n4", "n3", g), b("n3", "n1", g), b("f1", "f2", g), b("f2", "f4", g), b("f4", "f3", g), b("f3", "f1", g), b("n1", "f1", g), b("n2", "f2", g), b("n3", "f3", g), b("n4", "f4", g), b("p", "n1", h), b("p", "n2", h), b("p", "n3", h), b("p", "n4", h), b("u1", "u2", i), b("u2", "u3", i), b("u3", "u1", i), b("c", "t", j), b("p", "c", k), b("cn1", "cn2", k), b("cn3", "cn4", k), b("cf1", "cf2", k), b("cf3", "cf4", k), THREE.Line.call(this, d, e, THREE.LinePieces), this.camera = a, this.matrix = a.matrixWorld, this.matrixAutoUpdate = !1, this.pointMap = f, this.update()
    }, THREE.CameraHelper.prototype = Object.create(THREE.Line.prototype), THREE.CameraHelper.prototype.constructor = THREE.CameraHelper, THREE.CameraHelper.prototype.update = function() {
        var a, b, c = new THREE.Vector3,
            d = new THREE.Camera,
            e = function(e, f, g, h) {
                c.set(f, g, h).unproject(d);
                var i = b[e];
                if (void 0 !== i)
                    for (var j = 0, k = i.length; k > j; j++) a.vertices[i[j]].copy(c)
            };
        return function() {
            a = this.geometry, b = this.pointMap;
            var c = 1,
                f = 1;
            d.projectionMatrix.copy(this.camera.projectionMatrix), e("c", 0, 0, -1), e("t", 0, 0, 1), e("n1", -c, -f, -1), e("n2", c, -f, -1), e("n3", -c, f, -1), e("n4", c, f, -1), e("f1", -c, -f, 1), e("f2", c, -f, 1), e("f3", -c, f, 1), e("f4", c, f, 1), e("u1", .7 * c, 1.1 * f, -1), e("u2", .7 * -c, 1.1 * f, -1), e("u3", 0, 2 * f, -1), e("cf1", -c, 0, 1), e("cf2", c, 0, 1), e("cf3", 0, -f, 1), e("cf4", 0, f, 1), e("cn1", -c, 0, -1), e("cn2", c, 0, -1), e("cn3", 0, -f, -1), e("cn4", 0, f, -1), a.verticesNeedUpdate = !0
        }
    }(), THREE.DirectionalLightHelper = function(a, b) {
        THREE.Object3D.call(this), this.light = a, this.light.updateMatrixWorld(), this.matrix = a.matrixWorld, this.matrixAutoUpdate = !1, b = b || 1;
        var c = new THREE.Geometry;
        c.vertices.push(new THREE.Vector3(-b, b, 0), new THREE.Vector3(b, b, 0), new THREE.Vector3(b, -b, 0), new THREE.Vector3(-b, -b, 0), new THREE.Vector3(-b, b, 0));
        var d = new THREE.LineBasicMaterial({
            fog: !1
        });
        d.color.copy(this.light.color).multiplyScalar(this.light.intensity), this.lightPlane = new THREE.Line(c, d), this.add(this.lightPlane), c = new THREE.Geometry, c.vertices.push(new THREE.Vector3, new THREE.Vector3), d = new THREE.LineBasicMaterial({
            fog: !1
        }), d.color.copy(this.light.color).multiplyScalar(this.light.intensity), this.targetLine = new THREE.Line(c, d), this.add(this.targetLine), this.update()
    }, THREE.DirectionalLightHelper.prototype = Object.create(THREE.Object3D.prototype), THREE.DirectionalLightHelper.prototype.constructor = THREE.DirectionalLightHelper, THREE.DirectionalLightHelper.prototype.dispose = function() {
        this.lightPlane.geometry.dispose(), this.lightPlane.material.dispose(), this.targetLine.geometry.dispose(), this.targetLine.material.dispose()
    }, THREE.DirectionalLightHelper.prototype.update = function() {
        var a = new THREE.Vector3,
            b = new THREE.Vector3,
            c = new THREE.Vector3;
        return function() {
            a.setFromMatrixPosition(this.light.matrixWorld), b.setFromMatrixPosition(this.light.target.matrixWorld), c.subVectors(b, a), this.lightPlane.lookAt(c), this.lightPlane.material.color.copy(this.light.color).multiplyScalar(this.light.intensity), this.targetLine.geometry.vertices[1].copy(c), this.targetLine.geometry.verticesNeedUpdate = !0, this.targetLine.material.color.copy(this.lightPlane.material.color)
        }
    }(), THREE.EdgesHelper = function(a, b) {
        var c = void 0 !== b ? b : 16777215,
            d = [0, 0],
            e = {},
            f = function(a, b) {
                return a - b
            },
            g = ["a", "b", "c"],
            h = new THREE.BufferGeometry,
            i = a.geometry.clone();
        i.mergeVertices(), i.computeFaceNormals();
        for (var j = i.vertices, k = i.faces, l = 0, m = 0, n = k.length; n > m; m++)
            for (var o = k[m], p = 0; 3 > p; p++) {
                d[0] = o[g[p]], d[1] = o[g[(p + 1) % 3]], d.sort(f);
                var q = d.toString();
                void 0 === e[q] ? (e[q] = {
                    vert1: d[0],
                    vert2: d[1],
                    face1: m,
                    face2: void 0
                }, l++) : e[q].face2 = m
            }
        var r = new Float32Array(2 * l * 3),
            s = 0;
        for (var q in e) {
            var t = e[q];
            if (void 0 === t.face2 || k[t.face1].normal.dot(k[t.face2].normal) < .9999) {
                var u = j[t.vert1];
                r[s++] = u.x, r[s++] = u.y, r[s++] = u.z, u = j[t.vert2], r[s++] = u.x, r[s++] = u.y, r[s++] = u.z
            }
        }
        h.addAttribute("position", new THREE.BufferAttribute(r, 3)), THREE.Line.call(this, h, new THREE.LineBasicMaterial({
            color: c
        }), THREE.LinePieces), this.matrix = a.matrixWorld, this.matrixAutoUpdate = !1
    }, THREE.EdgesHelper.prototype = Object.create(THREE.Line.prototype), THREE.EdgesHelper.prototype.constructor = THREE.EdgesHelper, THREE.FaceNormalsHelper = function(a, b, c, d) {
        this.object = a, this.size = void 0 !== b ? b : 1;
        for (var e = void 0 !== c ? c : 16776960, f = void 0 !== d ? d : 1, g = new THREE.Geometry, h = this.object.geometry.faces, i = 0, j = h.length; j > i; i++) g.vertices.push(new THREE.Vector3, new THREE.Vector3);
        THREE.Line.call(this, g, new THREE.LineBasicMaterial({
            color: e,
            linewidth: f
        }), THREE.LinePieces), this.matrixAutoUpdate = !1, this.normalMatrix = new THREE.Matrix3, this.update()
    }, THREE.FaceNormalsHelper.prototype = Object.create(THREE.Line.prototype), THREE.FaceNormalsHelper.prototype.constructor = THREE.FaceNormalsHelper, THREE.FaceNormalsHelper.prototype.update = function() {
        var a = this.geometry.vertices,
            b = this.object,
            c = b.geometry.vertices,
            d = b.geometry.faces,
            e = b.matrixWorld;
        b.updateMatrixWorld(!0), this.normalMatrix.getNormalMatrix(e);
        for (var f = 0, g = 0, h = d.length; h > f; f++, g += 2) {
            var i = d[f];
            a[g].copy(c[i.a]).add(c[i.b]).add(c[i.c]).divideScalar(3).applyMatrix4(e), a[g + 1].copy(i.normal).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size).add(a[g])
        }
        return this.geometry.verticesNeedUpdate = !0, this
    }, THREE.GridHelper = function(a, b) {
        var c = new THREE.Geometry,
            d = new THREE.LineBasicMaterial({
                vertexColors: THREE.VertexColors
            });
        this.color1 = new THREE.Color(4473924), this.color2 = new THREE.Color(8947848);
        for (var e = -a; a >= e; e += b) {
            c.vertices.push(new THREE.Vector3(-a, 0, e), new THREE.Vector3(a, 0, e), new THREE.Vector3(e, 0, -a), new THREE.Vector3(e, 0, a));
            var f = 0 === e ? this.color1 : this.color2;
            c.colors.push(f, f, f, f)
        }
        THREE.Line.call(this, c, d, THREE.LinePieces)
    }, THREE.GridHelper.prototype = Object.create(THREE.Line.prototype), THREE.GridHelper.prototype.constructor = THREE.GridHelper, THREE.GridHelper.prototype.setColors = function(a, b) {
        this.color1.set(a), this.color2.set(b), this.geometry.colorsNeedUpdate = !0
    }, THREE.HemisphereLightHelper = function(a, b) {
        THREE.Object3D.call(this), this.light = a, this.light.updateMatrixWorld(), this.matrix = a.matrixWorld, this.matrixAutoUpdate = !1, this.colors = [new THREE.Color, new THREE.Color];
        var c = new THREE.SphereGeometry(b, 4, 2);
        c.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI / 2));
        for (var d = 0, e = 8; e > d; d++) c.faces[d].color = this.colors[4 > d ? 0 : 1];
        var f = new THREE.MeshBasicMaterial({
            vertexColors: THREE.FaceColors,
            wireframe: !0
        });
        this.lightSphere = new THREE.Mesh(c, f), this.add(this.lightSphere), this.update()
    }, THREE.HemisphereLightHelper.prototype = Object.create(THREE.Object3D.prototype), THREE.HemisphereLightHelper.prototype.constructor = THREE.HemisphereLightHelper, THREE.HemisphereLightHelper.prototype.dispose = function() {
        this.lightSphere.geometry.dispose(), this.lightSphere.material.dispose()
    }, THREE.HemisphereLightHelper.prototype.update = function() {
        var a = new THREE.Vector3;
        return function() {
            this.colors[0].copy(this.light.color).multiplyScalar(this.light.intensity), this.colors[1].copy(this.light.groundColor).multiplyScalar(this.light.intensity), this.lightSphere.lookAt(a.setFromMatrixPosition(this.light.matrixWorld).negate()), this.lightSphere.geometry.colorsNeedUpdate = !0
        }
    }(), THREE.PointLightHelper = function(a, b) {
        this.light = a, this.light.updateMatrixWorld();
        var c = new THREE.SphereGeometry(b, 4, 2),
            d = new THREE.MeshBasicMaterial({
                wireframe: !0,
                fog: !1
            });
        d.color.copy(this.light.color).multiplyScalar(this.light.intensity), THREE.Mesh.call(this, c, d), this.matrix = this.light.matrixWorld, this.matrixAutoUpdate = !1
    }, THREE.PointLightHelper.prototype = Object.create(THREE.Mesh.prototype), THREE.PointLightHelper.prototype.constructor = THREE.PointLightHelper, THREE.PointLightHelper.prototype.dispose = function() {
        this.geometry.dispose(), this.material.dispose()
    }, THREE.PointLightHelper.prototype.update = function() {
        this.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)
    }, THREE.SkeletonHelper = function(a) {
        this.bones = this.getBoneList(a);
        for (var b = new THREE.Geometry, c = 0; c < this.bones.length; c++) {
            var d = this.bones[c];
            d.parent instanceof THREE.Bone && (b.vertices.push(new THREE.Vector3), b.vertices.push(new THREE.Vector3), b.colors.push(new THREE.Color(0, 0, 1)), b.colors.push(new THREE.Color(0, 1, 0)))
        }
        var e = new THREE.LineBasicMaterial({
            vertexColors: THREE.VertexColors,
            depthTest: !1,
            depthWrite: !1,
            transparent: !0
        });
        THREE.Line.call(this, b, e, THREE.LinePieces), this.root = a, this.matrix = a.matrixWorld, this.matrixAutoUpdate = !1, this.update()
    }, THREE.SkeletonHelper.prototype = Object.create(THREE.Line.prototype), THREE.SkeletonHelper.prototype.constructor = THREE.SkeletonHelper, THREE.SkeletonHelper.prototype.getBoneList = function(a) {
        var b = [];
        a instanceof THREE.Bone && b.push(a);
        for (var c = 0; c < a.children.length; c++) b.push.apply(b, this.getBoneList(a.children[c]));
        return b
    }, THREE.SkeletonHelper.prototype.update = function() {
        for (var a = this.geometry, b = (new THREE.Matrix4).getInverse(this.root.matrixWorld), c = new THREE.Matrix4, d = 0, e = 0; e < this.bones.length; e++) {
            var f = this.bones[e];
            f.parent instanceof THREE.Bone && (c.multiplyMatrices(b, f.matrixWorld), a.vertices[d].setFromMatrixPosition(c), c.multiplyMatrices(b, f.parent.matrixWorld), a.vertices[d + 1].setFromMatrixPosition(c), d += 2)
        }
        a.verticesNeedUpdate = !0, a.computeBoundingSphere()
    }, THREE.SpotLightHelper = function(a) {
        THREE.Object3D.call(this), this.light = a, this.light.updateMatrixWorld(), this.matrix = a.matrixWorld, this.matrixAutoUpdate = !1;
        var b = new THREE.CylinderGeometry(0, 1, 1, 8, 1, !0);
        b.applyMatrix((new THREE.Matrix4).makeTranslation(0, -.5, 0)), b.applyMatrix((new THREE.Matrix4).makeRotationX(-Math.PI / 2));
        var c = new THREE.MeshBasicMaterial({
            wireframe: !0,
            fog: !1
        });
        this.cone = new THREE.Mesh(b, c), this.add(this.cone), this.update()
    }, THREE.SpotLightHelper.prototype = Object.create(THREE.Object3D.prototype), THREE.SpotLightHelper.prototype.constructor = THREE.SpotLightHelper, THREE.SpotLightHelper.prototype.dispose = function() {
        this.cone.geometry.dispose(), this.cone.material.dispose()
    }, THREE.SpotLightHelper.prototype.update = function() {
        var a = new THREE.Vector3,
            b = new THREE.Vector3;
        return function() {
            var c = this.light.distance ? this.light.distance : 1e4,
                d = c * Math.tan(this.light.angle);
            this.cone.scale.set(d, d, c), a.setFromMatrixPosition(this.light.matrixWorld), b.setFromMatrixPosition(this.light.target.matrixWorld), this.cone.lookAt(b.sub(a)), this.cone.material.color.copy(this.light.color).multiplyScalar(this.light.intensity)
        }
    }(), THREE.VertexNormalsHelper = function(a, b, c, d) {
        this.object = a, this.size = void 0 !== b ? b : 1;
        for (var e = void 0 !== c ? c : 16711680, f = void 0 !== d ? d : 1, g = new THREE.Geometry, h = (a.geometry.vertices, a.geometry.faces), i = 0, j = h.length; j > i; i++)
            for (var k = h[i], l = 0, m = k.vertexNormals.length; m > l; l++) g.vertices.push(new THREE.Vector3, new THREE.Vector3);
        THREE.Line.call(this, g, new THREE.LineBasicMaterial({
            color: e,
            linewidth: f
        }), THREE.LinePieces), this.matrixAutoUpdate = !1, this.normalMatrix = new THREE.Matrix3, this.update()
    }, THREE.VertexNormalsHelper.prototype = Object.create(THREE.Line.prototype), THREE.VertexNormalsHelper.prototype.constructor = THREE.VertexNormalsHelper, THREE.VertexNormalsHelper.prototype.update = function() {
        var a = new THREE.Vector3;
        return function() {
            var b = ["a", "b", "c", "d"];
            this.object.updateMatrixWorld(!0), this.normalMatrix.getNormalMatrix(this.object.matrixWorld);
            for (var c = this.geometry.vertices, d = this.object.geometry.vertices, e = this.object.geometry.faces, f = this.object.matrixWorld, g = 0, h = 0, i = e.length; i > h; h++)
                for (var j = e[h], k = 0, l = j.vertexNormals.length; l > k; k++) {
                    var m = j[b[k]],
                        n = d[m],
                        o = j.vertexNormals[k];
                    c[g].copy(n).applyMatrix4(f), a.copy(o).applyMatrix3(this.normalMatrix).normalize().multiplyScalar(this.size), a.add(c[g]), g += 1, c[g].copy(a), g += 1
                }
            return this.geometry.verticesNeedUpdate = !0, this
        }
    }(), THREE.VertexTangentsHelper = function(a, b, c, d) {
        this.object = a, this.size = void 0 !== b ? b : 1;
        for (var e = void 0 !== c ? c : 255, f = void 0 !== d ? d : 1, g = new THREE.Geometry, h = (a.geometry.vertices, a.geometry.faces), i = 0, j = h.length; j > i; i++)
            for (var k = h[i], l = 0, m = k.vertexTangents.length; m > l; l++) g.vertices.push(new THREE.Vector3), g.vertices.push(new THREE.Vector3);
        THREE.Line.call(this, g, new THREE.LineBasicMaterial({
            color: e,
            linewidth: f
        }), THREE.LinePieces), this.matrixAutoUpdate = !1, this.update()
    }, THREE.VertexTangentsHelper.prototype = Object.create(THREE.Line.prototype), THREE.VertexTangentsHelper.prototype.constructor = THREE.VertexTangentsHelper, THREE.VertexTangentsHelper.prototype.update = function() {
        var a = new THREE.Vector3;
        return function() {
            var b = ["a", "b", "c", "d"];
            this.object.updateMatrixWorld(!0);
            for (var c = this.geometry.vertices, d = this.object.geometry.vertices, e = this.object.geometry.faces, f = this.object.matrixWorld, g = 0, h = 0, i = e.length; i > h; h++)
                for (var j = e[h], k = 0, l = j.vertexTangents.length; l > k; k++) {
                    var m = j[b[k]],
                        n = d[m],
                        o = j.vertexTangents[k];
                    c[g].copy(n).applyMatrix4(f), a.copy(o).transformDirection(f).multiplyScalar(this.size), a.add(c[g]), g += 1, c[g].copy(a), g += 1
                }
            return this.geometry.verticesNeedUpdate = !0, this
        }
    }(), THREE.WireframeHelper = function(a, b) {
        var c = void 0 !== b ? b : 16777215,
            d = [0, 0],
            e = {},
            f = function(a, b) {
                return a - b
            },
            g = ["a", "b", "c"],
            h = new THREE.BufferGeometry;
        if (a.geometry instanceof THREE.Geometry) {
            for (var i = a.geometry.vertices, j = a.geometry.faces, k = 0, l = new Uint32Array(6 * j.length), m = 0, n = j.length; n > m; m++)
                for (var o = j[m], p = 0; 3 > p; p++) {
                    d[0] = o[g[p]], d[1] = o[g[(p + 1) % 3]], d.sort(f);
                    var q = d.toString();
                    void 0 === e[q] && (l[2 * k] = d[0], l[2 * k + 1] = d[1], e[q] = !0, k++)
                }
            for (var r = new Float32Array(2 * k * 3), m = 0, n = k; n > m; m++)
                for (var p = 0; 2 > p; p++) {
                    var s = i[l[2 * m + p]],
                        t = 6 * m + 3 * p;
                    r[t + 0] = s.x, r[t + 1] = s.y, r[t + 2] = s.z
                }
            h.addAttribute("position", new THREE.BufferAttribute(r, 3))
        } else if (a.geometry instanceof THREE.BufferGeometry)
            if (void 0 !== a.geometry.attributes.index) {
                var i = a.geometry.attributes.position.array,
                    u = a.geometry.attributes.index.array,
                    v = a.geometry.drawcalls,
                    k = 0;
                0 === v.length && (v = [{
                    count: u.length,
                    index: 0,
                    start: 0
                }]);
                for (var l = new Uint32Array(2 * u.length), w = 0, x = v.length; x > w; ++w)
                    for (var y = v[w].start, z = v[w].count, t = v[w].index, m = y, A = y + z; A > m; m += 3)
                        for (var p = 0; 3 > p; p++) {
                            d[0] = t + u[m + p], d[1] = t + u[m + (p + 1) % 3], d.sort(f);
                            var q = d.toString();
                            void 0 === e[q] && (l[2 * k] = d[0], l[2 * k + 1] = d[1], e[q] = !0, k++)
                        }
                for (var r = new Float32Array(2 * k * 3), m = 0, n = k; n > m; m++)
                    for (var p = 0; 2 > p; p++) {
                        var t = 6 * m + 3 * p,
                            B = 3 * l[2 * m + p];
                        r[t + 0] = i[B], r[t + 1] = i[B + 1], r[t + 2] = i[B + 2]
                    }
                h.addAttribute("position", new THREE.BufferAttribute(r, 3))
            } else {
                for (var i = a.geometry.attributes.position.array, k = i.length / 3, C = k / 3, r = new Float32Array(2 * k * 3), m = 0, n = C; n > m; m++)
                    for (var p = 0; 3 > p; p++) {
                        var t = 18 * m + 6 * p,
                            D = 9 * m + 3 * p;
                        r[t + 0] = i[D], r[t + 1] = i[D + 1], r[t + 2] = i[D + 2];
                        var B = 9 * m + 3 * ((p + 1) % 3);
                        r[t + 3] = i[B], r[t + 4] = i[B + 1], r[t + 5] = i[B + 2]
                    }
                h.addAttribute("position", new THREE.BufferAttribute(r, 3))
            }
        THREE.Line.call(this, h, new THREE.LineBasicMaterial({
            color: c
        }), THREE.LinePieces), this.matrix = a.matrixWorld, this.matrixAutoUpdate = !1
    }, THREE.WireframeHelper.prototype = Object.create(THREE.Line.prototype), THREE.WireframeHelper.prototype.constructor = THREE.WireframeHelper, THREE.ImmediateRenderObject = function() {
        THREE.Object3D.call(this), this.render = function() {}
    }, THREE.ImmediateRenderObject.prototype = Object.create(THREE.Object3D.prototype), THREE.ImmediateRenderObject.prototype.constructor = THREE.ImmediateRenderObject, THREE.MorphBlendMesh = function(a, b) {
        THREE.Mesh.call(this, a, b), this.animationsMap = {}, this.animationsList = [];
        var c = this.geometry.morphTargets.length,
            d = "__default",
            e = 0,
            f = c - 1,
            g = c / 1;
        this.createAnimation(d, e, f, g), this.setAnimationWeight(d, 1)
    }, THREE.MorphBlendMesh.prototype = Object.create(THREE.Mesh.prototype), THREE.MorphBlendMesh.prototype.constructor = THREE.MorphBlendMesh, THREE.MorphBlendMesh.prototype.createAnimation = function(a, b, c, d) {
        var e = {
            startFrame: b,
            endFrame: c,
            length: c - b + 1,
            fps: d,
            duration: (c - b) / d,
            lastFrame: 0,
            currentFrame: 0,
            active: !1,
            time: 0,
            direction: 1,
            weight: 1,
            directionBackwards: !1,
            mirroredLoop: !1
        };
        this.animationsMap[a] = e, this.animationsList.push(e)
    }, THREE.MorphBlendMesh.prototype.autoCreateAnimations = function(a) {
        for (var b, c = /([a-z]+)_?(\d+)/, d = {}, e = this.geometry, f = 0, g = e.morphTargets.length; g > f; f++) {
            var h = e.morphTargets[f],
                i = h.name.match(c);
            if (i && i.length > 1) {
                {
                    var j = i[1];
                    i[2]
                }
                d[j] || (d[j] = {
                    start: 1 / 0,
                    end: -(1 / 0)
                });
                var k = d[j];
                f < k.start && (k.start = f), f > k.end && (k.end = f), b || (b = j)
            }
        }
        for (var j in d) {
            var k = d[j];
            this.createAnimation(j, k.start, k.end, a)
        }
        this.firstAnimation = b
    }, THREE.MorphBlendMesh.prototype.setAnimationDirectionForward = function(a) {
        var b = this.animationsMap[a];
        b && (b.direction = 1, b.directionBackwards = !1)
    }, THREE.MorphBlendMesh.prototype.setAnimationDirectionBackward = function(a) {
        var b = this.animationsMap[a];
        b && (b.direction = -1, b.directionBackwards = !0)
    }, THREE.MorphBlendMesh.prototype.setAnimationFPS = function(a, b) {
        var c = this.animationsMap[a];
        c && (c.fps = b, c.duration = (c.end - c.start) / c.fps)
    }, THREE.MorphBlendMesh.prototype.setAnimationDuration = function(a, b) {
        var c = this.animationsMap[a];
        c && (c.duration = b, c.fps = (c.end - c.start) / c.duration)
    }, THREE.MorphBlendMesh.prototype.setAnimationWeight = function(a, b) {
        var c = this.animationsMap[a];
        c && (c.weight = b)
    }, THREE.MorphBlendMesh.prototype.setAnimationTime = function(a, b) {
        var c = this.animationsMap[a];
        c && (c.time = b)
    }, THREE.MorphBlendMesh.prototype.getAnimationTime = function(a) {
        var b = 0,
            c = this.animationsMap[a];
        return c && (b = c.time), b
    }, THREE.MorphBlendMesh.prototype.getAnimationDuration = function(a) {
        var b = -1,
            c = this.animationsMap[a];
        return c && (b = c.duration), b
    }, THREE.MorphBlendMesh.prototype.playAnimation = function(a) {
        var b = this.animationsMap[a];
        b ? (b.time = 0, b.active = !0) : console.warn("animation[" + a + "] undefined")
    }, THREE.MorphBlendMesh.prototype.stopAnimation = function(a) {
        var b = this.animationsMap[a];
        b && (b.active = !1)
    }, THREE.MorphBlendMesh.prototype.update = function(a) {
        for (var b = 0, c = this.animationsList.length; c > b; b++) {
            var d = this.animationsList[b];
            if (d.active) {
                var e = d.duration / d.length;
                d.time += d.direction * a, d.mirroredLoop ? (d.time > d.duration || d.time < 0) && (d.direction *= -1, d.time > d.duration && (d.time = d.duration, d.directionBackwards = !0), d.time < 0 && (d.time = 0, d.directionBackwards = !1)) : (d.time = d.time % d.duration, d.time < 0 && (d.time += d.duration));
                var f = d.startFrame + THREE.Math.clamp(Math.floor(d.time / e), 0, d.length - 1),
                    g = d.weight;
                f !== d.currentFrame && (this.morphTargetInfluences[d.lastFrame] = 0,
                    this.morphTargetInfluences[d.currentFrame] = 1 * g, this.morphTargetInfluences[f] = 0, d.lastFrame = d.currentFrame, d.currentFrame = f);
                var h = d.time % e / e;
                d.directionBackwards && (h = 1 - h), this.morphTargetInfluences[d.currentFrame] = h * g, this.morphTargetInfluences[d.lastFrame] = (1 - h) * g
            }
        }
    }, define("threejs", function(a) {
        return function() {
            var b;
            return b || a.THREE
        }
    }(this)), this.createjs = this.createjs || {},
    function() {
        var a = createjs.SoundJS = createjs.SoundJS || {};
        a.version = "0.6.0", a.buildDate = "Thu, 11 Dec 2014 23:32:09 GMT"
    }(), this.createjs = this.createjs || {}, createjs.extend = function(a, b) {
        "use strict";

        function c() {
            this.constructor = a
        }
        return c.prototype = b.prototype, a.prototype = new c
    }, this.createjs = this.createjs || {}, createjs.promote = function(a, b) {
        "use strict";
        var c = a.prototype,
            d = Object.getPrototypeOf && Object.getPrototypeOf(c) || c.__proto__;
        if (d) {
            c[(b += "_") + "constructor"] = d.constructor;
            for (var e in d) c.hasOwnProperty(e) && "function" == typeof d[e] && (c[b + e] = d[e])
        }
        return a
    }, this.createjs = this.createjs || {}, createjs.indexOf = function(a, b) {
        "use strict";
        for (var c = 0, d = a.length; d > c; c++)
            if (b === a[c]) return c;
        return -1
    }, this.createjs = this.createjs || {},
    function() {
        "use strict";
        createjs.proxy = function(a, b) {
            var c = Array.prototype.slice.call(arguments, 2);
            return function() {
                return a.apply(b, Array.prototype.slice.call(arguments, 0).concat(c))
            }
        }
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";
        var a = Object.defineProperty ? !0 : !1,
            b = {};
        try {
            Object.defineProperty(b, "bar", {
                get: function() {
                    return this._bar
                },
                set: function(a) {
                    this._bar = a
                }
            })
        } catch (c) {
            a = !1
        }
        createjs.definePropertySupported = a
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a() {
            throw "BrowserDetect cannot be instantiated"
        }
        var b = a.agent = window.navigator.userAgent;
        a.isWindowPhone = b.indexOf("IEMobile") > -1 || b.indexOf("Windows Phone") > -1, a.isFirefox = b.indexOf("Firefox") > -1, a.isOpera = null != window.opera, a.isChrome = b.indexOf("Chrome") > -1, a.isIOS = (b.indexOf("iPod") > -1 || b.indexOf("iPhone") > -1 || b.indexOf("iPad") > -1) && !a.isWindowPhone, a.isAndroid = b.indexOf("Android") > -1 && !a.isWindowPhone, a.isBlackberry = b.indexOf("Blackberry") > -1, createjs.BrowserDetect = a
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a() {
            this._listeners = null, this._captureListeners = null
        }
        var b = a.prototype;
        a.initialize = function(a) {
            a.addEventListener = b.addEventListener, a.on = b.on, a.removeEventListener = a.off = b.removeEventListener, a.removeAllEventListeners = b.removeAllEventListeners, a.hasEventListener = b.hasEventListener, a.dispatchEvent = b.dispatchEvent, a._dispatchEvent = b._dispatchEvent, a.willTrigger = b.willTrigger
        }, b.addEventListener = function(a, b, c) {
            var d;
            d = c ? this._captureListeners = this._captureListeners || {} : this._listeners = this._listeners || {};
            var e = d[a];
            return e && this.removeEventListener(a, b, c), e = d[a], e ? e.push(b) : d[a] = [b], b
        }, b.on = function(a, b, c, d, e, f) {
            return b.handleEvent && (c = c || b, b = b.handleEvent), c = c || this, this.addEventListener(a, function(a) {
                b.call(c, a, e), d && a.remove()
            }, f)
        }, b.removeEventListener = function(a, b, c) {
            var d = c ? this._captureListeners : this._listeners;
            if (d) {
                var e = d[a];
                if (e)
                    for (var f = 0, g = e.length; g > f; f++)
                        if (e[f] == b) {
                            1 == g ? delete d[a] : e.splice(f, 1);
                            break
                        }
            }
        }, b.off = b.removeEventListener, b.removeAllEventListeners = function(a) {
            a ? (this._listeners && delete this._listeners[a], this._captureListeners && delete this._captureListeners[a]) : this._listeners = this._captureListeners = null
        }, b.dispatchEvent = function(a) {
            if ("string" == typeof a) {
                var b = this._listeners;
                if (!b || !b[a]) return !1;
                a = new createjs.Event(a)
            } else a.target && a.clone && (a = a.clone());
            try {
                a.target = this
            } catch (c) {}
            if (a.bubbles && this.parent) {
                for (var d = this, e = [d]; d.parent;) e.push(d = d.parent);
                var f, g = e.length;
                for (f = g - 1; f >= 0 && !a.propagationStopped; f--) e[f]._dispatchEvent(a, 1 + (0 == f));
                for (f = 1; g > f && !a.propagationStopped; f++) e[f]._dispatchEvent(a, 3)
            } else this._dispatchEvent(a, 2);
            return a.defaultPrevented
        }, b.hasEventListener = function(a) {
            var b = this._listeners,
                c = this._captureListeners;
            return !!(b && b[a] || c && c[a])
        }, b.willTrigger = function(a) {
            for (var b = this; b;) {
                if (b.hasEventListener(a)) return !0;
                b = b.parent
            }
            return !1
        }, b.toString = function() {
            return "[EventDispatcher]"
        }, b._dispatchEvent = function(a, b) {
            var c, d = 1 == b ? this._captureListeners : this._listeners;
            if (a && d) {
                var e = d[a.type];
                if (!e || !(c = e.length)) return;
                try {
                    a.currentTarget = this
                } catch (f) {}
                try {
                    a.eventPhase = b
                } catch (f) {}
                a.removed = !1, e = e.slice();
                for (var g = 0; c > g && !a.immediatePropagationStopped; g++) {
                    var h = e[g];
                    h.handleEvent ? h.handleEvent(a) : h(a), a.removed && (this.off(a.type, h, 1 == b), a.removed = !1)
                }
            }
        }, createjs.EventDispatcher = a
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c) {
            this.type = a, this.target = null, this.currentTarget = null, this.eventPhase = 0, this.bubbles = !!b, this.cancelable = !!c, this.timeStamp = (new Date).getTime(), this.defaultPrevented = !1, this.propagationStopped = !1, this.immediatePropagationStopped = !1, this.removed = !1
        }
        var b = a.prototype;
        b.preventDefault = function() {
            this.defaultPrevented = this.cancelable && !0
        }, b.stopPropagation = function() {
            this.propagationStopped = !0
        }, b.stopImmediatePropagation = function() {
            this.immediatePropagationStopped = this.propagationStopped = !0
        }, b.remove = function() {
            this.removed = !0
        }, b.clone = function() {
            return new a(this.type, this.bubbles, this.cancelable)
        }, b.set = function(a) {
            for (var b in a) this[b] = a[b];
            return this
        }, b.toString = function() {
            return "[Event (type=" + this.type + ")]"
        }, createjs.Event = a
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c) {
            this.Event_constructor("error"), this.title = a, this.message = b, this.data = c
        }
        var b = createjs.extend(a, createjs.Event);
        b.clone = function() {
            return new createjs.ErrorEvent(this.title, this.message, this.data)
        }, createjs.ErrorEvent = createjs.promote(a, "Event")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b) {
            this.Event_constructor("progress"), this.loaded = a, this.total = null == b ? 1 : b, this.progress = 0 == b ? 0 : this.loaded / this.total
        }
        var b = createjs.extend(a, createjs.Event);
        b.clone = function() {
            return new createjs.ProgressEvent(this.loaded, this.total)
        }, createjs.ProgressEvent = createjs.promote(a, "Event")
    }(window), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a() {
            this.src = null, this.type = null, this.id = null, this.maintainOrder = !1, this.callback = null, this.data = null, this.method = createjs.LoadItem.GET, this.values = null, this.headers = null, this.withCredentials = !1, this.mimeType = null, this.crossOrigin = "Anonymous", this.loadTimeout = 8e3
        }
        var b = a.prototype = {},
            c = a;
        c.create = function(b) {
            if ("string" == typeof b) {
                var d = new a;
                return d.src = b, d
            }
            if (b instanceof c) return b;
            if (b instanceof Object) return b;
            throw new Error("Type not recognized.")
        }, b.set = function(a) {
            for (var b in a) this[b] = a[b];
            return this
        }, createjs.LoadItem = c
    }(),
    function() {
        var a = {};
        a.ABSOLUTE_PATT = /^(?:\w+:)?\/{2}/i, a.RELATIVE_PATT = /^[./]*?\//i, a.EXTENSION_PATT = /\/?[^/]+\.(\w{1,5})$/i, a.parseURI = function(b) {
            var c = {
                absolute: !1,
                relative: !1
            };
            if (null == b) return c;
            var d = b.indexOf("?");
            d > -1 && (b = b.substr(0, d));
            var e;
            return a.ABSOLUTE_PATT.test(b) ? c.absolute = !0 : a.RELATIVE_PATT.test(b) && (c.relative = !0), (e = b.match(a.EXTENSION_PATT)) && (c.extension = e[1].toLowerCase()), c
        }, a.formatQueryString = function(a, b) {
            if (null == a) throw new Error("You must specify data.");
            var c = [];
            for (var d in a) c.push(d + "=" + escape(a[d]));
            return b && (c = c.concat(b)), c.join("&")
        }, a.buildPath = function(a, b) {
            if (null == b) return a;
            var c = [],
                d = a.indexOf("?");
            if (-1 != d) {
                var e = a.slice(d + 1);
                c = c.concat(e.split("&"))
            }
            return -1 != d ? a.slice(0, d) + "?" + this._formatQueryString(b, c) : a + "?" + this._formatQueryString(b, c)
        }, a.isCrossDomain = function(a) {
            var b = document.createElement("a");
            b.href = a.src;
            var c = document.createElement("a");
            c.href = location.href;
            var d = "" != b.hostname && (b.port != c.port || b.protocol != c.protocol || b.hostname != c.hostname);
            return d
        }, a.isLocal = function(a) {
            var b = document.createElement("a");
            return b.href = a.src, "" == b.hostname && "file:" == b.protocol
        }, a.isBinary = function(a) {
            switch (a) {
                case createjs.AbstractLoader.IMAGE:
                case createjs.AbstractLoader.BINARY:
                    return !0;
                default:
                    return !1
            }
        }, a.isImageTag = function(a) {
            return a instanceof HTMLImageElement
        }, a.isAudioTag = function(a) {
            return window.HTMLAudioElement ? a instanceof HTMLAudioElement : !1
        }, a.isVideoTag = function(a) {
            return window.HTMLVideoElement ? a instanceof HTMLVideoElement : void 0
        }, a.isText = function(a) {
            switch (a) {
                case createjs.AbstractLoader.TEXT:
                case createjs.AbstractLoader.JSON:
                case createjs.AbstractLoader.MANIFEST:
                case createjs.AbstractLoader.XML:
                case createjs.AbstractLoader.CSS:
                case createjs.AbstractLoader.SVG:
                case createjs.AbstractLoader.JAVASCRIPT:
                    return !0;
                default:
                    return !1
            }
        }, a.getTypeByExtension = function(a) {
            if (null == a) return createjs.AbstractLoader.TEXT;
            switch (a.toLowerCase()) {
                case "jpeg":
                case "jpg":
                case "gif":
                case "png":
                case "webp":
                case "bmp":
                    return createjs.AbstractLoader.IMAGE;
                case "ogg":
                case "mp3":
                case "webm":
                    return createjs.AbstractLoader.SOUND;
                case "mp4":
                case "webm":
                case "ts":
                    return createjs.AbstractLoader.VIDEO;
                case "json":
                    return createjs.AbstractLoader.JSON;
                case "xml":
                    return createjs.AbstractLoader.XML;
                case "css":
                    return createjs.AbstractLoader.CSS;
                case "js":
                    return createjs.AbstractLoader.JAVASCRIPT;
                case "svg":
                    return createjs.AbstractLoader.SVG;
                default:
                    return createjs.AbstractLoader.TEXT
            }
        }, createjs.RequestUtils = a
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c) {
            this.EventDispatcher_constructor(), this.loaded = !1, this.canceled = !1, this.progress = 0, this.type = c, this.resultFormatter = null, this._item = a ? createjs.LoadItem.create(a) : null, this._preferXHR = b, this._result = null, this._rawResult = null, this._loadedItems = null, this._tagSrcAttribute = null, this._tag = null
        }
        var b = createjs.extend(a, createjs.EventDispatcher),
            c = a;
        c.POST = "POST", c.GET = "GET", c.BINARY = "binary", c.CSS = "css", c.IMAGE = "image", c.JAVASCRIPT = "javascript", c.JSON = "json", c.JSONP = "jsonp", c.MANIFEST = "manifest", c.SOUND = "sound", c.VIDEO = "video", c.SPRITESHEET = "spritesheet", c.SVG = "svg", c.TEXT = "text", c.XML = "xml", b.getItem = function() {
            return this._item
        }, b.getResult = function(a) {
            return a ? this._rawResult : this._result
        }, b.getTag = function() {
            return this._tag
        }, b.setTag = function(a) {
            this._tag = a
        }, b.load = function() {
            this._createRequest(), this._request.on("complete", this, this), this._request.on("progress", this, this), this._request.on("loadStart", this, this), this._request.on("abort", this, this), this._request.on("timeout", this, this), this._request.on("error", this, this);
            var a = new createjs.Event("initialize");
            a.loader = this._request, this.dispatchEvent(a), this._request.load()
        }, b.cancel = function() {
            this.canceled = !0, this.destroy()
        }, b.destroy = function() {
            this._request && (this._request.removeAllEventListeners(), this._request.destroy()), this._request = null, this._item = null, this._rawResult = null, this._result = null, this._loadItems = null, this.removeAllEventListeners()
        }, b.getLoadedItems = function() {
            return this._loadedItems
        }, b._createRequest = function() {
            this._request = this._preferXHR ? new createjs.XHRRequest(this._item) : new createjs.TagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute)
        }, b._createTag = function() {
            return null
        }, b._sendLoadStart = function() {
            this._isCanceled() || this.dispatchEvent("loadstart")
        }, b._sendProgress = function(a) {
            if (!this._isCanceled()) {
                var b = null;
                "number" == typeof a ? (this.progress = a, b = new createjs.ProgressEvent(this.progress)) : (b = a, this.progress = a.loaded / a.total, b.progress = this.progress, (isNaN(this.progress) || this.progress == 1 / 0) && (this.progress = 0)), this.hasEventListener("progress") && this.dispatchEvent(b)
            }
        }, b._sendComplete = function() {
            if (!this._isCanceled()) {
                this.loaded = !0;
                var a = new createjs.Event("complete");
                a.rawResult = this._rawResult, null != this._result && (a.result = this._result), this.dispatchEvent(a)
            }
        }, b._sendError = function(a) {
            !this._isCanceled() && this.hasEventListener("error") && (null == a && (a = new createjs.ErrorEvent("PRELOAD_ERROR_EMPTY")), this.dispatchEvent(a))
        }, b._isCanceled = function() {
            return null == window.createjs || this.canceled ? !0 : !1
        }, b.resultFormatter = null, b.handleEvent = function(a) {
            switch (a.type) {
                case "complete":
                    this._rawResult = a.target._response;
                    var b = this.resultFormatter && this.resultFormatter(this),
                        c = this;
                    b instanceof Function ? b(function(a) {
                        c._result = a, c._sendComplete()
                    }) : (this._result = b || this._rawResult, this._sendComplete());
                    break;
                case "progress":
                    this._sendProgress(a);
                    break;
                case "error":
                    this._sendError(a);
                    break;
                case "loadstart":
                    this._sendLoadStart();
                    break;
                case "abort":
                case "timeout":
                    this._isCanceled() || this.dispatchEvent(a.type)
            }
        }, b.buildPath = function(a, b) {
            return createjs.RequestUtils.buildPath(a, b)
        }, b.toString = function() {
            return "[PreloadJS AbstractLoader]"
        }, createjs.AbstractLoader = createjs.promote(a, "EventDispatcher")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c) {
            this.AbstractLoader_constructor(a, b, c), this.resultFormatter = this._formatResult, this._tagSrcAttribute = "src"
        }
        var b = createjs.extend(a, createjs.AbstractLoader);
        b.load = function() {
            this._tag || (this._tag = this._createTag(this._item.src)), this._tag.preload = "auto", this._tag.load(), this.AbstractLoader_load()
        }, b._createTag = function() {}, b._createRequest = function() {
            this._request = this._preferXHR ? new createjs.XHRRequest(this._item) : new createjs.MediaTagRequest(this._item, this._tag || this._createTag(), this._tagSrcAttribute)
        }, b._formatResult = function(a) {
            return this._tag.removeEventListener && this._tag.removeEventListener("canplaythrough", this._loadedHandler), this._tag.onstalled = null, this._preferXHR && (a.getTag().src = a.getResult(!0)), a.getTag()
        }, createjs.AbstractMediaLoader = createjs.promote(a, "AbstractLoader")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";
        var a = function(a) {
                this._item = a
            },
            b = createjs.extend(a, createjs.EventDispatcher);
        b.load = function() {}, b.destroy = function() {}, b.cancel = function() {}, createjs.AbstractRequest = createjs.promote(a, "EventDispatcher")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c) {
            this.AbstractRequest_constructor(a), this._tag = b, this._tagSrcAttribute = c, this._loadedHandler = createjs.proxy(this._handleTagComplete, this), this._addedToDOM = !1, this._startTagVisibility = null
        }
        var b = createjs.extend(a, createjs.AbstractRequest);
        b.load = function() {
            null == this._tag.parentNode && (window.document.body.appendChild(this._tag), this._addedToDOM = !0), this._tag.onload = createjs.proxy(this._handleTagComplete, this), this._tag.onreadystatechange = createjs.proxy(this._handleReadyStateChange, this);
            var a = new createjs.Event("initialize");
            a.loader = this._tag, this.dispatchEvent(a), this._hideTag(), this._tag[this._tagSrcAttribute] = this._item.src
        }, b.destroy = function() {
            this._clean(), this._tag = null, this.AbstractRequest_destroy()
        }, b._handleReadyStateChange = function() {
            clearTimeout(this._loadTimeout);
            var a = this._tag;
            ("loaded" == a.readyState || "complete" == a.readyState) && this._handleTagComplete()
        }, b._handleTagComplete = function() {
            this._rawResult = this._tag, this._result = this.resultFormatter && this.resultFormatter(this) || this._rawResult, this._clean(), this._showTag(), this.dispatchEvent("complete")
        }, b._clean = function() {
            this._tag.onload = null, this._tag.onreadystatechange = null, this._addedToDOM && null != this._tag.parentNode && this._tag.parentNode.removeChild(this._tag)
        }, b._hideTag = function() {
            this._startTagVisibility = this._tag.style.visibility, this._tag.style.visibility = "hidden"
        }, b._showTag = function() {
            this._tag.style.visibility = this._startTagVisibility
        }, b._handleStalled = function() {}, createjs.TagRequest = createjs.promote(a, "AbstractRequest")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c) {
            this.AbstractRequest_constructor(a), this._tag = b, this._tagSrcAttribute = c, this._loadedHandler = createjs.proxy(this._handleTagComplete, this)
        }
        var b = createjs.extend(a, createjs.TagRequest);
        b.load = function() {
            this._tag.onstalled = createjs.proxy(this._handleStalled, this), this._tag.onprogress = createjs.proxy(this._handleProgress, this), this._tag.addEventListener && this._tag.addEventListener("canplaythrough", this._loadedHandler, !1), this.TagRequest_load()
        }, b._handleReadyStateChange = function() {
            clearTimeout(this._loadTimeout);
            var a = this._tag;
            ("loaded" == a.readyState || "complete" == a.readyState) && this._handleTagComplete()
        }, b._handleStalled = function() {}, b._handleProgress = function(a) {
            if (a && !(a.loaded > 0 && 0 == a.total)) {
                var b = new createjs.ProgressEvent(a.loaded, a.total);
                this.dispatchEvent(b)
            }
        }, b._clean = function() {
            this._tag.removeEventListener && this._tag.removeEventListener("canplaythrough", this._loadedHandler), this._tag.onstalled = null, this._tag.onprogress = null, this.TagRequest__clean()
        }, createjs.MediaTagRequest = createjs.promote(a, "TagRequest")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a) {
            this.AbstractRequest_constructor(a), this._request = null, this._loadTimeout = null, this._xhrLevel = 1, this._response = null, this._rawResponse = null, this._canceled = !1, this._handleLoadStartProxy = createjs.proxy(this._handleLoadStart, this), this._handleProgressProxy = createjs.proxy(this._handleProgress, this), this._handleAbortProxy = createjs.proxy(this._handleAbort, this), this._handleErrorProxy = createjs.proxy(this._handleError, this), this._handleTimeoutProxy = createjs.proxy(this._handleTimeout, this), this._handleLoadProxy = createjs.proxy(this._handleLoad, this), this._handleReadyStateChangeProxy = createjs.proxy(this._handleReadyStateChange, this), !this._createXHR(a)
        }
        var b = createjs.extend(a, createjs.AbstractRequest);
        a.ACTIVEX_VERSIONS = ["Msxml2.XMLHTTP.6.0", "Msxml2.XMLHTTP.5.0", "Msxml2.XMLHTTP.4.0", "MSXML2.XMLHTTP.3.0", "MSXML2.XMLHTTP", "Microsoft.XMLHTTP"], b.getResult = function(a) {
            return a && this._rawResponse ? this._rawResponse : this._response
        }, b.cancel = function() {
            this.canceled = !0, this._clean(), this._request.abort()
        }, b.load = function() {
            if (null == this._request) return void this._handleError();
            this._request.addEventListener("loadstart", this._handleLoadStartProxy, !1), this._request.addEventListener("progress", this._handleProgressProxy, !1), this._request.addEventListener("abort", this._handleAbortProxy, !1), this._request.addEventListener("error", this._handleErrorProxy, !1), this._request.addEventListener("timeout", this._handleTimeoutProxy, !1), this._request.addEventListener("load", this._handleLoadProxy, !1), this._request.addEventListener("readystatechange", this._handleReadyStateChangeProxy, !1), 1 == this._xhrLevel && (this._loadTimeout = setTimeout(createjs.proxy(this._handleTimeout, this), this._item.loadTimeout));
            try {
                this._item.values && this._item.method != createjs.AbstractLoader.GET ? this._item.method == createjs.AbstractLoader.POST && this._request.send(createjs.RequestUtils.formatQueryString(this._item.values)) : this._request.send()
            } catch (a) {
                this.dispatchEvent(new createjs.ErrorEvent("XHR_SEND", null, a))
            }
        }, b.setResponseType = function(a) {
            this._request.responseType = a
        }, b.getAllResponseHeaders = function() {
            return this._request.getAllResponseHeaders instanceof Function ? this._request.getAllResponseHeaders() : null
        }, b.getResponseHeader = function(a) {
            return this._request.getResponseHeader instanceof Function ? this._request.getResponseHeader(a) : null
        }, b._handleProgress = function(a) {
            if (a && !(a.loaded > 0 && 0 == a.total)) {
                var b = new createjs.ProgressEvent(a.loaded, a.total);
                this.dispatchEvent(b)
            }
        }, b._handleLoadStart = function() {
            clearTimeout(this._loadTimeout), this.dispatchEvent("loadstart")
        }, b._handleAbort = function(a) {
            this._clean(), this.dispatchEvent(new createjs.ErrorEvent("XHR_ABORTED", null, a))
        }, b._handleError = function(a) {
            this._clean(), this.dispatchEvent(new createjs.ErrorEvent(a.message))
        }, b._handleReadyStateChange = function() {
            4 == this._request.readyState && this._handleLoad()
        }, b._handleLoad = function() {
            if (!this.loaded) {
                this.loaded = !0;
                var a = this._checkError();
                if (a) return void this._handleError(a);
                this._response = this._getResponse(), this._clean(), this.dispatchEvent(new createjs.Event("complete"))
            }
        }, b._handleTimeout = function(a) {
            this._clean(), this.dispatchEvent(new createjs.ErrorEvent("PRELOAD_TIMEOUT", null, a))
        }, b._checkError = function() {
            var a = parseInt(this._request.status);
            switch (a) {
                case 404:
                case 0:
                    return new Error(a)
            }
            return null
        }, b._getResponse = function() {
            if (null != this._response) return this._response;
            if (null != this._request.response) return this._request.response;
            try {
                if (null != this._request.responseText) return this._request.responseText
            } catch (a) {}
            try {
                if (null != this._request.responseXML) return this._request.responseXML
            } catch (a) {}
            return null
        }, b._createXHR = function(a) {
            var b = createjs.RequestUtils.isCrossDomain(a),
                c = {},
                d = null;
            if (window.XMLHttpRequest) d = new XMLHttpRequest, b && void 0 === d.withCredentials && window.XDomainRequest && (d = new XDomainRequest);
            else {
                for (var e = 0, f = s.ACTIVEX_VERSIONS.length; f > e; e++) {
                    {
                        s.ACTIVEX_VERSIONS[e]
                    }
                    try {
                        d = new ActiveXObject(axVersions);
                        break
                    } catch (g) {}
                }
                if (null == d) return !1
            }
            a.mimeType && d.overrideMimeType && d.overrideMimeType(a.mimeType), this._xhrLevel = "string" == typeof d.responseType ? 2 : 1;
            var h = null;
            if (h = a.method == createjs.AbstractLoader.GET ? createjs.RequestUtils.buildPath(a.src, a.values) : a.src, d.open(a.method || createjs.AbstractLoader.GET, h, !0), b && d instanceof XMLHttpRequest && 1 == this._xhrLevel && (c.Origin = location.origin), a.values && a.method == createjs.AbstractLoader.POST && (c["Content-Type"] = "application/x-www-form-urlencoded"), b || c["X-Requested-With"] || (c["X-Requested-With"] = "XMLHttpRequest"), a.headers)
                for (var i in a.headers) c[i] = a.headers[i];
            for (i in c) d.setRequestHeader(i, c[i]);
            return d instanceof XMLHttpRequest && void 0 !== a.withCredentials && (d.withCredentials = a.withCredentials), this._request = d, !0
        }, b._clean = function() {
            clearTimeout(this._loadTimeout), this._request.removeEventListener("loadstart", this._handleLoadStartProxy), this._request.removeEventListener("progress", this._handleProgressProxy), this._request.removeEventListener("abort", this._handleAbortProxy), this._request.removeEventListener("error", this._handleErrorProxy), this._request.removeEventListener("timeout", this._handleTimeoutProxy), this._request.removeEventListener("load", this._handleLoadProxy), this._request.removeEventListener("readystatechange", this._handleReadyStateChangeProxy)
        }, b.toString = function() {
            return "[PreloadJS XHRRequest]"
        }, createjs.XHRRequest = createjs.promote(a, "AbstractRequest")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b) {
            this.AbstractMediaLoader_constructor(a, b, createjs.AbstractLoader.SOUND), createjs.RequestUtils.isAudioTag(a) ? this._tag = a : createjs.RequestUtils.isAudioTag(a.src) ? this._tag = a : createjs.RequestUtils.isAudioTag(a.tag) && (this._tag = createjs.RequestUtils.isAudioTag(a) ? a : a.src), null != this._tag && (this._preferXHR = !1)
        }
        var b = createjs.extend(a, createjs.AbstractMediaLoader),
            c = a;
        c.canLoadItem = function(a) {
            return a.type == createjs.AbstractLoader.SOUND
        }, b._createTag = function(a) {
            var b = document.createElement("audio");
            return b.autoplay = !1, b.preload = "none", b.src = a, b
        }, createjs.SoundLoader = createjs.promote(a, "AbstractMediaLoader")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a() {
            throw "Sound cannot be instantiated"
        }

        function b(a, b) {
            this.init(a, b)
        }
        var c = a;
        c.INTERRUPT_ANY = "any", c.INTERRUPT_EARLY = "early", c.INTERRUPT_LATE = "late", c.INTERRUPT_NONE = "none", c.PLAY_INITED = "playInited", c.PLAY_SUCCEEDED = "playSucceeded", c.PLAY_INTERRUPTED = "playInterrupted", c.PLAY_FINISHED = "playFinished", c.PLAY_FAILED = "playFailed", c.SUPPORTED_EXTENSIONS = ["mp3", "ogg", "mpeg", "wav", "m4a", "mp4", "aiff", "wma", "mid"], c.EXTENSION_MAP = {
            m4a: "mp4"
        }, c.FILE_PATTERN = /^(?:(\w+:)\/{2}(\w+(?:\.\w+)*\/?))?([/.]*?(?:[^?]+)?\/)?((?:[^/?]+)\.(\w+))(?:\?(\S+)?)?$/, c.defaultInterruptBehavior = c.INTERRUPT_NONE, c.alternateExtensions = [], c.activePlugin = null, c._pluginsRegistered = !1, c._lastID = 0, c._masterVolume = 1, c._masterMute = !1, c._instances = [], c._idHash = {}, c._preloadHash = {}, c.addEventListener = null, c.removeEventListener = null, c.removeAllEventListeners = null, c.dispatchEvent = null, c.hasEventListener = null, c._listeners = null, createjs.EventDispatcher.initialize(c), c.getPreloadHandlers = function() {
            return {
                callback: createjs.proxy(c.initLoad, c),
                types: ["sound"],
                extensions: c.SUPPORTED_EXTENSIONS
            }
        }, c._handleLoadComplete = function(a) {
            var b = a.target.getItem().src;
            if (c._preloadHash[b])
                for (var d = 0, e = c._preloadHash[b].length; e > d; d++) {
                    var f = c._preloadHash[b][d];
                    if (c._preloadHash[b][d] = !0, c.hasEventListener("fileload")) {
                        var a = new createjs.Event("fileload");
                        a.src = f.src, a.id = f.id, a.data = f.data, a.sprite = f.sprite, c.dispatchEvent(a)
                    }
                }
        }, c._handleLoadError = function(a) {
            var b = a.target.getItem().src;
            if (c._preloadHash[b])
                for (var d = 0, e = c._preloadHash[b].length; e > d; d++) {
                    var f = c._preloadHash[b][d];
                    if (c._preloadHash[b][d] = !1, c.hasEventListener("fileerror")) {
                        var a = new createjs.Event("fileerror");
                        a.src = f.src, a.id = f.id, a.data = f.data, a.sprite = f.sprite, c.dispatchEvent(a)
                    }
                }
        }, c._registerPlugin = function(a) {
            return a.isSupported() ? (c.activePlugin = new a, !0) : !1
        }, c.registerPlugins = function(a) {
            c._pluginsRegistered = !0;
            for (var b = 0, d = a.length; d > b; b++)
                if (c._registerPlugin(a[b])) return !0;
            return !1
        }, c.initializeDefaultPlugins = function() {
            return null != c.activePlugin ? !0 : c._pluginsRegistered ? !1 : c.registerPlugins([createjs.WebAudioPlugin, createjs.HTMLAudioPlugin]) ? !0 : !1
        }, c.isReady = function() {
            return null != c.activePlugin
        }, c.getCapabilities = function() {
            return null == c.activePlugin ? null : c.activePlugin._capabilities
        }, c.getCapability = function(a) {
            return null == c.activePlugin ? null : c.activePlugin._capabilities[a]
        }, c.initLoad = function(a) {
            return c._registerSound(a)
        }, c._registerSound = function(a) {
            if (!c.initializeDefaultPlugins()) return !1;
            var d = c._parsePath(a.src);
            if (null == d) return !1;
            a.src = d.src, a.type = "sound";
            var e = a.data,
                f = c.activePlugin.defaultNumChannels || null;
            if (null != e && (isNaN(e.channels) ? isNaN(e) || (f = parseInt(e)) : f = parseInt(e.channels), e.audioSprite))
                for (var g, h = e.audioSprite.length; h--;) g = e.audioSprite[h], c._idHash[g.id] = {
                    src: a.src,
                    startTime: parseInt(g.startTime),
                    duration: parseInt(g.duration)
                };
            null != a.id && (c._idHash[a.id] = {
                src: a.src
            });
            var i = c.activePlugin.register(a, f);
            return b.create(a.src, f), null != e && isNaN(e) ? a.data.channels = f || b.maxPerChannel() : a.data = f || b.maxPerChannel(), i.type && (a.type = i.type), i
        }, c.registerSound = function(a, b, d, e) {
            var f = {
                src: a,
                id: b,
                data: d
            };
            a instanceof Object && (e = b, f = a), f = createjs.LoadItem.create(f), null != e && (f.src = e + a);
            var g = c._registerSound(f);
            if (!g) return !1;
            if (c._preloadHash[f.src] || (c._preloadHash[f.src] = []), c._preloadHash[f.src].push(f), 1 == c._preloadHash[f.src].length) g.on("complete", createjs.proxy(this._handleLoadComplete, this)), g.on("error", createjs.proxy(this._handleLoadError, this)), c.activePlugin.preload(g);
            else if (1 == c._preloadHash[f.src][0]) return !0;
            return f
        }, c.registerSounds = function(a, b) {
            var c = [];
            a.path && (b ? b += a.path : b = a.path);
            for (var d = 0, e = a.length; e > d; d++) c[d] = createjs.Sound.registerSound(a[d].src, a[d].id, a[d].data, b);
            return c
        }, c.registerManifest = function(a, b) {
            try {
                console.log("createjs.Sound.registerManifest is deprecated, please use createjs.Sound.registerSounds.")
            } catch (c) {}
            return this.registerSounds(a, b)
        }, c.removeSound = function(a, d) {
            if (null == c.activePlugin) return !1;
            a instanceof Object && (a = a.src), a = c._getSrcById(a).src, null != d && (a = d + a);
            var e = c._parsePath(a);
            if (null == e) return !1;
            a = e.src;
            for (var f in c._idHash) c._idHash[f].src == a && delete c._idHash[f];
            return b.removeSrc(a), delete c._preloadHash[a], c.activePlugin.removeSound(a), !0
        }, c.removeSounds = function(a, b) {
            var c = [];
            a.path && (b ? b += a.path : b = a.path);
            for (var d = 0, e = a.length; e > d; d++) c[d] = createjs.Sound.removeSound(a[d].src, b);
            return c
        }, c.removeManifest = function(a, b) {
            try {
                console.log("createjs.Sound.removeManifest is deprecated, please use createjs.Sound.removeSounds.")
            } catch (d) {}
            return c.removeSounds(a, b)
        }, c.removeAllSounds = function() {
            c._idHash = {}, c._preloadHash = {}, b.removeAll(), c.activePlugin && c.activePlugin.removeAllSounds()
        }, c.loadComplete = function(a) {
            if (!c.isReady()) return !1;
            var b = c._parsePath(a);
            return a = b ? c._getSrcById(b.src).src : c._getSrcById(a).src, 1 == c._preloadHash[a][0]
        }, c._parsePath = function(a) {
            "string" != typeof a && (a = a.toString());
            var b = a.match(c.FILE_PATTERN);
            if (null == b) return !1;
            for (var d = b[4], e = b[5], f = c.getCapabilities(), g = 0; !f[e];)
                if (e = c.alternateExtensions[g++], g > c.alternateExtensions.length) return null;
            a = a.replace("." + b[5], "." + e);
            var h = {
                name: d,
                src: a,
                extension: e
            };
            return h
        }, c.play = function(a, b, d, e, f, g, h, i, j) {
            b instanceof Object && (d = b.delay, e = b.offset, f = b.loop, g = b.volume, h = b.pan, i = b.startTime, j = b.duration, b = b.interrupt);
            var k = c.createInstance(a, i, j),
                l = c._playInstance(k, b, d, e, f, g, h);
            return l || k._playFailed(), k
        }, c.createInstance = function(a, d, e) {
            if (!c.initializeDefaultPlugins()) return new createjs.DefaultSoundInstance(a, d, e);
            a = c._getSrcById(a);
            var f = c._parsePath(a.src),
                g = null;
            return null != f && null != f.src ? (b.create(f.src), null == d && (d = a.startTime), g = c.activePlugin.create(f.src, d, e || a.duration)) : g = new createjs.DefaultSoundInstance(a, d, e), g.uniqueId = c._lastID++, g
        }, c.setVolume = function(a) {
            if (null == Number(a)) return !1;
            if (a = Math.max(0, Math.min(1, a)), c._masterVolume = a, !this.activePlugin || !this.activePlugin.setVolume || !this.activePlugin.setVolume(a))
                for (var b = this._instances, d = 0, e = b.length; e > d; d++) b[d].setMasterVolume(a)
        }, c.getVolume = function() {
            return c._masterVolume
        }, c.setMute = function(a) {
            if (null == a) return !1;
            if (this._masterMute = a, !this.activePlugin || !this.activePlugin.setMute || !this.activePlugin.setMute(a))
                for (var b = this._instances, c = 0, d = b.length; d > c; c++) b[c].setMasterMute(a);
            return !0
        }, c.getMute = function() {
            return this._masterMute
        }, c.stop = function() {
            for (var a = this._instances, b = a.length; b--;) a[b].stop()
        }, c._playInstance = function(a, b, d, e, f, g, h) {
            if (b instanceof Object && (d = b.delay, e = b.offset, f = b.loop, g = b.volume, h = b.pan, b = b.interrupt), b = b || c.defaultInterruptBehavior, null == d && (d = 0), null == e && (e = a.getPosition()), null == f && (f = a.loop), null == g && (g = a.volume), null == h && (h = a.pan), 0 == d) {
                var i = c._beginPlaying(a, b, e, f, g, h);
                if (!i) return !1
            } else {
                var j = setTimeout(function() {
                    c._beginPlaying(a, b, e, f, g, h)
                }, d);
                a.delayTimeoutId = j
            }
            return this._instances.push(a), !0
        }, c._beginPlaying = function(a, c, d, e, f, g) {
            if (!b.add(a, c)) return !1;
            var h = a._beginPlaying(d, e, f, g);
            if (!h) {
                var i = createjs.indexOf(this._instances, a);
                return i > -1 && this._instances.splice(i, 1), !1
            }
            return !0
        }, c._getSrcById = function(a) {
            return c._idHash[a] || {
                src: a
            }
        }, c._playFinished = function(a) {
            b.remove(a);
            var c = createjs.indexOf(this._instances, a);
            c > -1 && this._instances.splice(c, 1)
        }, createjs.Sound = a, b.channels = {}, b.create = function(a, c) {
            var d = b.get(a);
            return null == d ? (b.channels[a] = new b(a, c), !0) : !1
        }, b.removeSrc = function(a) {
            var c = b.get(a);
            return null == c ? !1 : (c._removeAll(), delete b.channels[a], !0)
        }, b.removeAll = function() {
            for (var a in b.channels) b.channels[a]._removeAll();
            b.channels = {}
        }, b.add = function(a, c) {
            var d = b.get(a.src);
            return null == d ? !1 : d._add(a, c)
        }, b.remove = function(a) {
            var c = b.get(a.src);
            return null == c ? !1 : (c._remove(a), !0)
        }, b.maxPerChannel = function() {
            return d.maxDefault
        }, b.get = function(a) {
            return b.channels[a]
        };
        var d = b.prototype;
        d.constructor = b, d.src = null, d.max = null, d.maxDefault = 100, d.length = 0, d.init = function(a, b) {
            this.src = a, this.max = b || this.maxDefault, -1 == this.max && (this.max = this.maxDefault), this._instances = []
        }, d._get = function(a) {
            return this._instances[a]
        }, d._add = function(a, b) {
            return this._getSlot(b, a) ? (this._instances.push(a), this.length++, !0) : !1
        }, d._remove = function(a) {
            var b = createjs.indexOf(this._instances, a);
            return -1 == b ? !1 : (this._instances.splice(b, 1), this.length--, !0)
        }, d._removeAll = function() {
            for (var a = this.length - 1; a >= 0; a--) this._instances[a].stop()
        }, d._getSlot = function(b) {
            var c, d;
            if (b != a.INTERRUPT_NONE && (d = this._get(0), null == d)) return !0;
            for (var e = 0, f = this.max; f > e; e++) {
                if (c = this._get(e), null == c) return !0;
                if (c.playState == a.PLAY_FINISHED || c.playState == a.PLAY_INTERRUPTED || c.playState == a.PLAY_FAILED) {
                    d = c;
                    break
                }
                b != a.INTERRUPT_NONE && (b == a.INTERRUPT_EARLY && c.getPosition() < d.getPosition() || b == a.INTERRUPT_LATE && c.getPosition() > d.getPosition()) && (d = c)
            }
            return null != d ? (d._interrupt(), this._remove(d), !0) : !1
        }, d.toString = function() {
            return "[Sound SoundChannel]"
        }
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";
        var a = function(a, b, c, d) {
                this.EventDispatcher_constructor(), this.src = a, this.uniqueId = -1, this.playState = null, this.delayTimeoutId = null, this._startTime = Math.max(0, b || 0), this._volume = 1, createjs.definePropertySupported && Object.defineProperty(this, "volume", {
                        get: this.getVolume,
                        set: this.setVolume
                    }), this._pan = 0, createjs.definePropertySupported && Object.defineProperty(this, "pan", {
                        get: this.getPan,
                        set: this.setPan
                    }), this._duration = Math.max(0, c || 0), createjs.definePropertySupported && Object.defineProperty(this, "duration", {
                        get: this.getDuration,
                        set: this.setDuration
                    }), this._playbackResource = null, createjs.definePropertySupported && Object.defineProperty(this, "playbackResource", {
                        get: this.getPlaybackResource,
                        set: this.setPlaybackResource
                    }), d !== !1 && d !== !0 && this.setPlaybackResource(d),
                    this._position = 0, createjs.definePropertySupported && Object.defineProperty(this, "position", {
                        get: this.getPosition,
                        set: this.setPosition
                    }), this._loop = 0, createjs.definePropertySupported && Object.defineProperty(this, "loop", {
                        get: this.getLoop,
                        set: this.setLoop
                    }), this._muted = !1, createjs.definePropertySupported && Object.defineProperty(this, "muted", {
                        get: this.getMuted,
                        set: this.setMuted
                    }), this._paused = !1, createjs.definePropertySupported && Object.defineProperty(this, "paused", {
                        get: this.getPaused,
                        set: this.setPaused
                    })
            },
            b = createjs.extend(a, createjs.EventDispatcher);
        b.play = function(a, b, c, d, e, f) {
            return this.playState == createjs.Sound.PLAY_SUCCEEDED ? (a instanceof Object && (c = a.offset, d = a.loop, e = a.volume, f = a.pan), null != c && this.setPosition(c), null != d && this.setLoop(d), null != e && this.setVolume(e), null != f && this.setPan(f), void(this._paused && this.setPaused(!1))) : (this._cleanUp(), createjs.Sound._playInstance(this, a, b, c, d, e, f), this)
        }, b.pause = function() {
            return this._paused || this.playState != createjs.Sound.PLAY_SUCCEEDED ? !1 : (this.setPaused(!0), !0)
        }, b.resume = function() {
            return this._paused ? (this.setPaused(!1), !0) : !1
        }, b.stop = function() {
            return this._position = 0, this._paused = !1, this._handleStop(), this._cleanUp(), this.playState = createjs.Sound.PLAY_FINISHED, this
        }, b.destroy = function() {
            this._cleanUp(), this.src = null, this.playbackResource = null, this.removeAllEventListeners()
        }, b.toString = function() {
            return "[AbstractSoundInstance]"
        }, b.getPaused = function() {
            return this._paused
        }, b.setPaused = function(a) {
            return a !== !0 && a !== !1 || this._paused == a || 1 == a && this.playState != createjs.Sound.PLAY_SUCCEEDED ? void 0 : (this._paused = a, a ? this._pause() : this._resume(), clearTimeout(this.delayTimeoutId), this)
        }, b.setVolume = function(a) {
            return a == this._volume ? this : (this._volume = Math.max(0, Math.min(1, a)), this._muted || this._updateVolume(), this)
        }, b.getVolume = function() {
            return this._volume
        }, b.setMute = function(a) {
            this.setMuted(a)
        }, b.getMute = function() {
            return this._muted
        }, b.setMuted = function(a) {
            return a === !0 || a === !1 ? (this._muted = a, this._updateVolume(), this) : void 0
        }, b.getMuted = function() {
            return this._muted
        }, b.setPan = function(a) {
            return a == this._pan ? this : (this._pan = Math.max(-1, Math.min(1, a)), this._updatePan(), this)
        }, b.getPan = function() {
            return this._pan
        }, b.getPosition = function() {
            return this._paused || this.playState != createjs.Sound.PLAY_SUCCEEDED ? this._position : this._calculateCurrentPosition()
        }, b.setPosition = function(a) {
            return this._position = Math.max(0, a), this.playState == createjs.Sound.PLAY_SUCCEEDED && this._updatePosition(), this
        }, b.getDuration = function() {
            return this._duration
        }, b.setDuration = function(a) {
            return a == this._duration ? this : (this._duration = Math.max(0, a || 0), this._updateDuration(), this)
        }, b.setPlaybackResource = function(a) {
            return this._playbackResource = a, 0 == this._duration && this._setDurationFromSource(), this
        }, b.getPlaybackResource = function() {
            return this._playbackResource
        }, b.getLoop = function() {
            return this._loop
        }, b.setLoop = function(a) {
            null != this._playbackResource && (0 != this._loop && 0 == a && this._removeLooping(a), 0 == this._loop && 0 != a && this._addLooping(a)), this._loop = a
        }, b._sendEvent = function(a) {
            var b = new createjs.Event(a);
            this.dispatchEvent(b)
        }, b._cleanUp = function() {
            clearTimeout(this.delayTimeoutId), this._handleCleanUp(), this._paused = !1, createjs.Sound._playFinished(this)
        }, b._interrupt = function() {
            this._cleanUp(), this.playState = createjs.Sound.PLAY_INTERRUPTED, this._sendEvent("interrupted")
        }, b._beginPlaying = function(a, b, c, d) {
            return this.setPosition(a), this.setLoop(b), this.setVolume(c), this.setPan(d), null != this._playbackResource && this._position < this._duration ? (this._paused = !1, this._handleSoundReady(), this.playState = createjs.Sound.PLAY_SUCCEEDED, this._sendEvent("succeeded"), !0) : (this._playFailed(), !1)
        }, b._playFailed = function() {
            this._cleanUp(), this.playState = createjs.Sound.PLAY_FAILED, this._sendEvent("failed")
        }, b._handleSoundComplete = function() {
            return this._position = 0, 0 != this._loop ? (this._loop--, this._handleLoop(), void this._sendEvent("loop")) : (this._cleanUp(), this.playState = createjs.Sound.PLAY_FINISHED, void this._sendEvent("complete"))
        }, b._handleSoundReady = function() {}, b._updateVolume = function() {}, b._updatePan = function() {}, b._updateDuration = function() {}, b._setDurationFromSource = function() {}, b._calculateCurrentPosition = function() {}, b._updatePosition = function() {}, b._removeLooping = function() {}, b._addLooping = function() {}, b._pause = function() {}, b._resume = function() {}, b._handleStop = function() {}, b._handleCleanUp = function() {}, b._handleLoop = function() {}, createjs.AbstractSoundInstance = createjs.promote(a, "EventDispatcher"), createjs.DefaultSoundInstance = createjs.AbstractSoundInstance
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";
        var a = function() {
                this._capabilities = null, this._loaders = {}, this._audioSources = {}, this._soundInstances = {}, this._loaderClass, this._soundInstanceClass
            },
            b = a.prototype;
        a._capabilities = null, a.isSupported = function() {
            return !0
        }, b.register = function(a) {
            if (this._audioSources[a.src] = !0, this._soundInstances[a.src] = [], this._loaders[a.src]) return this._loaders[a.src];
            var b = new this._loaderClass(a);
            return b.on("complete", createjs.proxy(this._handlePreloadComplete, this)), this._loaders[a.src] = b, b
        }, b.preload = function(a) {
            a.on("error", createjs.proxy(this._handlePreloadError, this)), a.load()
        }, b.isPreloadStarted = function(a) {
            return null != this._audioSources[a]
        }, b.isPreloadComplete = function(a) {
            return !(null == this._audioSources[a] || 1 == this._audioSources[a])
        }, b.removeSound = function(a) {
            if (this._soundInstances[a]) {
                for (var b = this._soundInstances[a].length; b--;) {
                    var c = this._soundInstances[a][b];
                    c.destroy()
                }
                delete this._soundInstances[a], delete this._audioSources[a], this._loaders[a] && this._loaders[a].destroy(), delete this._loaders[a]
            }
        }, b.removeAllSounds = function() {
            for (var a in this._audioSources) this.removeSound(a)
        }, b.create = function(a, b, c) {
            this.isPreloadStarted(a) || this.preload(this.register(a));
            var d = new this._soundInstanceClass(a, b, c, this._audioSources[a]);
            return this._soundInstances[a].push(d), d
        }, b.setVolume = function(a) {
            return this._volume = a, this._updateVolume(), !0
        }, b.getVolume = function() {
            return this._volume
        }, b.setMute = function() {
            return this._updateVolume(), !0
        }, b.toString = function() {
            return "[AbstractPlugin]"
        }, b._handlePreloadComplete = function(a) {
            var b = a.target.getItem().src;
            this._audioSources[b] = a.result;
            for (var c = 0, d = this._soundInstances[b].length; d > c; c++) {
                var e = this._soundInstances[b][c];
                e.setPlaybackResource(this._audioSources[b])
            }
        }, b._handlePreloadError = function() {}, b._updateVolume = function() {}, createjs.AbstractPlugin = a
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a) {
            this.AbstractLoader_constructor(a, !0, createjs.AbstractLoader.SOUND)
        }
        var b = createjs.extend(a, createjs.AbstractLoader);
        a.context = null, b.toString = function() {
            return "[WebAudioLoader]"
        }, b._createRequest = function() {
            this._request = new createjs.XHRRequest(this._item, !1), this._request.setResponseType("arraybuffer")
        }, b._sendComplete = function() {
            a.context.decodeAudioData(this._rawResult, createjs.proxy(this._handleAudioDecoded, this), createjs.proxy(this._handleError, this))
        }, b._handleAudioDecoded = function(a) {
            this._result = a, this.AbstractLoader__sendComplete()
        }, createjs.WebAudioLoader = createjs.promote(a, "AbstractLoader")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, d, e) {
            this.AbstractSoundInstance_constructor(a, b, d, e), this.gainNode = c.context.createGain(), this.panNode = c.context.createPanner(), this.panNode.panningModel = c._panningModel, this.panNode.connect(this.gainNode), this.sourceNode = null, this._soundCompleteTimeout = null, this._sourceNodeNext = null, this._playbackStartTime = 0, this._endedHandler = createjs.proxy(this._handleSoundComplete, this)
        }
        var b = createjs.extend(a, createjs.AbstractSoundInstance),
            c = a;
        c.context = null, c.destinationNode = null, c._panningModel = "equalpower", b.destroy = function() {
            this.AbstractSoundInstance_destroy(), this.panNode.disconnect(0), this.panNode = null, this.gainNode.disconnect(0), this.gainNode = null
        }, b.toString = function() {
            return "[WebAudioSoundInstance]"
        }, b._updatePan = function() {
            this.panNode.setPosition(this._pan, 0, -.5)
        }, b._removeLooping = function() {
            this._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext)
        }, b._addLooping = function() {
            this.playState == createjs.Sound.PLAY_SUCCEEDED && (this._sourceNodeNext = this._createAndPlayAudioNode(this._playbackStartTime, 0))
        }, b._setDurationFromSource = function() {
            this._duration = 1e3 * this.playbackResource.duration
        }, b._handleCleanUp = function() {
            this.sourceNode && this.playState == createjs.Sound.PLAY_SUCCEEDED && (this.sourceNode = this._cleanUpAudioNode(this.sourceNode), this._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext)), 0 != this.gainNode.numberOfOutputs && this.gainNode.disconnect(0), clearTimeout(this._soundCompleteTimeout), this._playbackStartTime = 0
        }, b._cleanUpAudioNode = function(a) {
            return a && (a.stop(0), a.disconnect(0), a = null), a
        }, b._handleSoundReady = function() {
            this.gainNode.connect(c.destinationNode);
            var a = .001 * this._duration,
                b = .001 * this._position;
            this.sourceNode = this._createAndPlayAudioNode(c.context.currentTime - a, b), this._playbackStartTime = this.sourceNode.startTime - b, this._soundCompleteTimeout = setTimeout(this._endedHandler, 1e3 * (a - b)), 0 != this._loop && (this._sourceNodeNext = this._createAndPlayAudioNode(this._playbackStartTime, 0))
        }, b._createAndPlayAudioNode = function(a, b) {
            var d = c.context.createBufferSource();
            d.buffer = this.playbackResource, d.connect(this.panNode);
            var e = .001 * this._duration;
            return d.startTime = a + e, d.start(d.startTime, b + .001 * this._startTime, e - b), d
        }, b._pause = function() {
            this._position = 1e3 * (c.context.currentTime - this._playbackStartTime), this.sourceNode = this._cleanUpAudioNode(this.sourceNode), this._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext), 0 != this.gainNode.numberOfOutputs && this.gainNode.disconnect(0), clearTimeout(this._soundCompleteTimeout)
        }, b._resume = function() {
            this._handleSoundReady()
        }, b._updateVolume = function() {
            var a = this._muted ? 0 : this._volume;
            a != this.gainNode.gain.value && (this.gainNode.gain.value = a)
        }, b._calculateCurrentPosition = function() {
            return 1e3 * (c.context.currentTime - this._playbackStartTime)
        }, b._updatePosition = function() {
            this.sourceNode = this._cleanUpAudioNode(this.sourceNode), this._sourceNodeNext = this._cleanUpAudioNode(this._sourceNodeNext), clearTimeout(this._soundCompleteTimeout), this._paused || this._handleSoundReady()
        }, b._handleLoop = function() {
            this._cleanUpAudioNode(this.sourceNode), this.sourceNode = this._sourceNodeNext, this._playbackStartTime = this.sourceNode.startTime, this._sourceNodeNext = this._createAndPlayAudioNode(this._playbackStartTime, 0), this._soundCompleteTimeout = setTimeout(this._endedHandler, this._duration)
        }, b._updateDuration = function() {
            this._pause(), this._resume()
        }, createjs.WebAudioSoundInstance = createjs.promote(a, "AbstractSoundInstance")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a() {
            this.AbstractPlugin_constructor(), this._panningModel = c._panningModel, this._volume = 1, this.context = c.context, this.dynamicsCompressorNode = this.context.createDynamicsCompressor(), this.dynamicsCompressorNode.connect(this.context.destination), this.gainNode = this.context.createGain(), this.gainNode.connect(this.dynamicsCompressorNode), createjs.WebAudioSoundInstance.destinationNode = this.gainNode, this._capabilities = c._capabilities, this._loaderClass = createjs.WebAudioLoader, this._soundInstanceClass = createjs.WebAudioSoundInstance, this._addPropsToClasses()
        }
        var b = createjs.extend(a, createjs.AbstractPlugin),
            c = a;
        c._capabilities = null, c._panningModel = "equalpower", c.context = null, c.isSupported = function() {
            var a = createjs.BrowserDetect.isIOS || createjs.BrowserDetect.isAndroid || createjs.BrowserDetect.isBlackberry;
            return "file:" != location.protocol || a || this._isFileXHRSupported() ? (c._generateCapabilities(), null == c.context ? !1 : !0) : !1
        }, c.playEmptySound = function() {
            var a = c.context.createBufferSource();
            a.buffer = c.context.createBuffer(1, 1, 22050), a.connect(c.context.destination), a.start(0, 0, 0)
        }, c._isFileXHRSupported = function() {
            var a = !0,
                b = new XMLHttpRequest;
            try {
                b.open("GET", "WebAudioPluginTest.fail", !1)
            } catch (c) {
                return a = !1
            }
            b.onerror = function() {
                a = !1
            }, b.onload = function() {
                a = 404 == this.status || 200 == this.status || 0 == this.status && "" != this.response
            };
            try {
                b.send()
            } catch (c) {
                a = !1
            }
            return a
        }, c._generateCapabilities = function() {
            if (null == c._capabilities) {
                var a = document.createElement("audio");
                if (null == a.canPlayType) return null;
                if (null == c.context)
                    if (window.AudioContext) c.context = new AudioContext;
                    else {
                        if (!window.webkitAudioContext) return null;
                        c.context = new webkitAudioContext
                    }
                c._compatibilitySetUp(), c.playEmptySound(), c._capabilities = {
                    panning: !0,
                    volume: !0,
                    tracks: -1
                };
                for (var b = createjs.Sound.SUPPORTED_EXTENSIONS, d = createjs.Sound.EXTENSION_MAP, e = 0, f = b.length; f > e; e++) {
                    var g = b[e],
                        h = d[g] || g;
                    c._capabilities[g] = "no" != a.canPlayType("audio/" + g) && "" != a.canPlayType("audio/" + g) || "no" != a.canPlayType("audio/" + h) && "" != a.canPlayType("audio/" + h)
                }
                c.context.destination.numberOfChannels < 2 && (c._capabilities.panning = !1)
            }
        }, c._compatibilitySetUp = function() {
            if (c._panningModel = "equalpower", !c.context.createGain) {
                c.context.createGain = c.context.createGainNode;
                var a = c.context.createBufferSource();
                a.__proto__.start = a.__proto__.noteGrainOn, a.__proto__.stop = a.__proto__.noteOff, c._panningModel = 0
            }
        }, b.toString = function() {
            return "[WebAudioPlugin]"
        }, b._addPropsToClasses = function() {
            var a = this._soundInstanceClass;
            a.context = this.context, a.destinationNode = this.gainNode, a._panningModel = this._panningModel, this._loaderClass.context = this.context
        }, b._updateVolume = function() {
            var a = createjs.Sound._masterMute ? 0 : this._volume;
            a != this.gainNode.gain.value && (this.gainNode.gain.value = a)
        }, createjs.WebAudioPlugin = createjs.promote(a, "AbstractPlugin")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a) {
            this.src = a, this.length = 0, this.available = 0, this.tags = [], this.duration = 0
        }
        var b = a.prototype;
        b.constructor = a;
        var c = a;
        c.tags = {}, c.get = function(b) {
            var d = c.tags[b];
            return null == d && (d = c.tags[b] = new a(b)), d
        }, c.remove = function(a) {
            var b = c.tags[a];
            return null == b ? !1 : (b.removeAll(), delete c.tags[a], !0)
        }, c.getInstance = function(a) {
            var b = c.tags[a];
            return null == b ? null : b.get()
        }, c.setInstance = function(a, b) {
            var d = c.tags[a];
            return null == d ? null : d.set(b)
        }, c.getDuration = function(a) {
            var b = c.tags[a];
            return null == b ? 0 : b.getDuration()
        }, b.add = function(a) {
            this.tags.push(a), this.length++, this.available++
        }, b.removeAll = function() {
            for (var a; this.length--;) a = this.tags[this.length], a.parentNode && a.parentNode.removeChild(a), delete this.tags[this.length];
            this.src = null, this.tags.length = 0
        }, b.get = function() {
            if (0 == this.tags.length) return null;
            this.available = this.tags.length;
            var a = this.tags.pop();
            return null == a.parentNode && document.body.appendChild(a), a
        }, b.set = function(a) {
            var b = createjs.indexOf(this.tags, a); - 1 == b && this.tags.push(a), this.available = this.tags.length
        }, b.getDuration = function() {
            return this.duration || (this.duration = 1e3 * this.tags[this.tags.length - 1].duration), this.duration
        }, b.toString = function() {
            return "[HTMLAudioTagPool]"
        }, createjs.HTMLAudioTagPool = a
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c, d) {
            this.AbstractSoundInstance_constructor(a, b, c, d), this._audioSpriteStopTime = null, this._delayTimeoutId = null, this._endedHandler = createjs.proxy(this._handleSoundComplete, this), this._readyHandler = createjs.proxy(this._handleTagReady, this), this._stalledHandler = createjs.proxy(this.playFailed, this), this._audioSpriteEndHandler = createjs.proxy(this._handleAudioSpriteLoop, this), this._loopHandler = createjs.proxy(this._handleSoundComplete, this), c ? this._audioSpriteStopTime = .001 * (b + c) : this._duration = createjs.HTMLAudioTagPool.getDuration(this.src)
        }
        var b = createjs.extend(a, createjs.AbstractSoundInstance);
        b.setMasterVolume = function() {
            this._updateVolume()
        }, b.setMasterMute = function() {
            this._updateVolume()
        }, b.toString = function() {
            return "[HTMLAudioSoundInstance]"
        }, b._removeLooping = function() {
            null != this._playbackResource && (this._playbackResource.loop = !1, this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, !1))
        }, b._addLooping = function() {
            null == this._playbackResource || this._audioSpriteStopTime || (this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, !1), this._playbackResource.loop = !0)
        }, b._handleCleanUp = function() {
            var a = this._playbackResource;
            if (null != a) {
                a.pause(), a.loop = !1, a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, !1), a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY, this._readyHandler, !1), a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED, this._stalledHandler, !1), a.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, !1), a.removeEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, !1);
                try {
                    a.currentTime = this._startTime
                } catch (b) {}
                createjs.HTMLAudioTagPool.setInstance(this.src, a), this._playbackResource = null
            }
        }, b._beginPlaying = function(a, b, c, d) {
            return this._playbackResource = createjs.HTMLAudioTagPool.getInstance(this.src), this.AbstractSoundInstance__beginPlaying(a, b, c, d)
        }, b._handleSoundReady = function() {
            if (4 !== this._playbackResource.readyState) {
                var a = this._playbackResource;
                return a.addEventListener(createjs.HTMLAudioPlugin._AUDIO_READY, this._readyHandler, !1), a.addEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED, this._stalledHandler, !1), a.preload = "auto", void a.load()
            }
            this._updateVolume(), this._playbackResource.currentTime = .001 * (this._startTime + this._position), this._audioSpriteStopTime ? this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, !1) : (this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, !1), 0 != this._loop && (this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, !1), this._playbackResource.loop = !0)), this._playbackResource.play()
        }, b._handleTagReady = function() {
            this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_READY, this._readyHandler, !1), this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_STALLED, this._stalledHandler, !1), this._handleSoundReady()
        }, b._pause = function() {
            this._playbackResource.pause()
        }, b._resume = function() {
            this._playbackResource.play()
        }, b._updateVolume = function() {
            if (null != this._playbackResource) {
                var a = this._muted || createjs.Sound._masterMute ? 0 : this._volume * createjs.Sound._masterVolume;
                a != this._playbackResource.volume && (this._playbackResource.volume = a)
            }
        }, b._calculateCurrentPosition = function() {
            return 1e3 * this._playbackResource.currentTime - this._startTime
        }, b._updatePosition = function() {
            this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, !1), this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._handleSetPositionSeek, !1);
            try {
                this._playbackResource.currentTime = .001 * (this._position + this._startTime)
            } catch (a) {
                this._handleSetPositionSeek(null)
            }
        }, b._handleSetPositionSeek = function() {
            null != this._playbackResource && (this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._handleSetPositionSeek, !1), this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, !1))
        }, b._handleAudioSpriteLoop = function() {
            this._playbackResource.currentTime <= this._audioSpriteStopTime || (this._playbackResource.pause(), 0 == this._loop ? this._handleSoundComplete(null) : (this._position = 0, this._loop--, this._playbackResource.currentTime = .001 * this._startTime, this._paused || this._playbackResource.play(), this._sendEvent("loop")))
        }, b._handleLoop = function() {
            0 == this._loop && (this._playbackResource.loop = !1, this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_SEEKED, this._loopHandler, !1))
        }, b._updateDuration = function() {
            this._audioSpriteStopTime = .001 * (startTime + duration), this.playState == createjs.Sound.PLAY_SUCCEEDED && (this._playbackResource.removeEventListener(createjs.HTMLAudioPlugin._AUDIO_ENDED, this._endedHandler, !1), this._playbackResource.addEventListener(createjs.HTMLAudioPlugin._TIME_UPDATE, this._audioSpriteEndHandler, !1))
        }, createjs.HTMLAudioSoundInstance = createjs.promote(a, "AbstractSoundInstance")
    }(), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a() {
            this.AbstractPlugin_constructor(), this.defaultNumChannels = 2, this._capabilities = c._capabilities, this._loaderClass = createjs.SoundLoader, this._soundInstanceClass = createjs.HTMLAudioSoundInstance
        }
        var b = createjs.extend(a, createjs.AbstractPlugin),
            c = a;
        c.MAX_INSTANCES = 30, c._AUDIO_READY = "canplaythrough", c._AUDIO_ENDED = "ended", c._AUDIO_SEEKED = "seeked", c._AUDIO_STALLED = "stalled", c._TIME_UPDATE = "timeupdate", c._capabilities = null, c.enableIOS = !1, c.isSupported = function() {
            return c._generateCapabilities(), null == c._capabilities ? !1 : !0
        }, c._generateCapabilities = function() {
            if (null == c._capabilities) {
                var a = document.createElement("audio");
                if (null == a.canPlayType) return null;
                c._capabilities = {
                    panning: !0,
                    volume: !0,
                    tracks: -1
                };
                for (var b = createjs.Sound.SUPPORTED_EXTENSIONS, d = createjs.Sound.EXTENSION_MAP, e = 0, f = b.length; f > e; e++) {
                    var g = b[e],
                        h = d[g] || g;
                    c._capabilities[g] = "no" != a.canPlayType("audio/" + g) && "" != a.canPlayType("audio/" + g) || "no" != a.canPlayType("audio/" + h) && "" != a.canPlayType("audio/" + h)
                }
            }
        }, b.register = function(a, b) {
            for (var c = createjs.HTMLAudioTagPool.get(a.src), d = null, e = 0; b > e; e++) d = this._createTag(a.src), c.add(d);
            var f = this.AbstractPlugin_register(a, b);
            return f.setTag(d), f
        }, b.removeSound = function(a) {
            this.AbstractPlugin_removeSound(a), createjs.HTMLAudioTagPool.remove(a)
        }, b.create = function(a, b, c) {
            var d = this.AbstractPlugin_create(a, b, c);
            return d.setPlaybackResource(null), d
        }, b.toString = function() {
            return "[HTMLAudioPlugin]"
        }, b.setVolume = b.getVolume = b.setMute = null, b._createTag = function(a) {
            var b = document.createElement("audio");
            return b.autoplay = !1, b.preload = "none", b.src = a, b
        }, createjs.HTMLAudioPlugin = createjs.promote(a, "AbstractPlugin")
    }(), define("soundjs", function(a) {
        return function() {
            var b;
            return b || a.createjs
        }
    }(this)), (window._gsQueue || (window._gsQueue = [])).push(function() {
        "use strict";
        window._gsDefine("TweenMax", ["core.Animation", "core.SimpleTimeline", "TweenLite"], function(a, b, c) {
                var d = [].slice,
                    e = function(a, b, d) {
                        c.call(this, a, b, d), this._cycle = 0, this._yoyo = this.vars.yoyo === !0, this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._dirty = !0, this.render = e.prototype.render
                    },
                    f = 1e-10,
                    g = c._internals,
                    h = g.isSelector,
                    i = g.isArray,
                    j = e.prototype = c.to({}, .1, {}),
                    k = [];
                e.version = "1.12.1", j.constructor = e, j.kill()._gc = !1, e.killTweensOf = e.killDelayedCallsTo = c.killTweensOf, e.getTweensOf = c.getTweensOf, e.lagSmoothing = c.lagSmoothing, e.ticker = c.ticker, e.render = c.render, j.invalidate = function() {
                    return this._yoyo = this.vars.yoyo === !0, this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._uncache(!0), c.prototype.invalidate.call(this)
                }, j.updateTo = function(a, b) {
                    var d, e = this.ratio;
                    b && this._startTime < this._timeline._time && (this._startTime = this._timeline._time, this._uncache(!1), this._gc ? this._enabled(!0, !1) : this._timeline.insert(this, this._startTime - this._delay));
                    for (d in a) this.vars[d] = a[d];
                    if (this._initted)
                        if (b) this._initted = !1;
                        else if (this._gc && this._enabled(!0, !1), this._notifyPluginsOfEnabled && this._firstPT && c._onPluginEvent("_onDisable", this), this._time / this._duration > .998) {
                        var f = this._time;
                        this.render(0, !0, !1), this._initted = !1, this.render(f, !0, !1)
                    } else if (this._time > 0) {
                        this._initted = !1, this._init();
                        for (var g, h = 1 / (1 - e), i = this._firstPT; i;) g = i.s + i.c, i.c *= h, i.s = g - i.c, i = i._next
                    }
                    return this
                }, j.render = function(a, b, c) {
                    this._initted || 0 === this._duration && this.vars.repeat && this.invalidate();
                    var d, e, h, i, j, l, m, n, o = this._dirty ? this.totalDuration() : this._totalDuration,
                        p = this._time,
                        q = this._totalTime,
                        r = this._cycle,
                        s = this._duration,
                        t = this._rawPrevTime;
                    if (a >= o ? (this._totalTime = o, this._cycle = this._repeat, this._yoyo && 0 !== (1 & this._cycle) ? (this._time = 0, this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0) : (this._time = s, this.ratio = this._ease._calcEnd ? this._ease.getRatio(1) : 1), this._reversed || (d = !0, e = "onComplete"), 0 === s && (this._initted || !this.vars.lazy || c) && (this._startTime === this._timeline._duration && (a = 0), (0 === a || 0 > t || t === f) && t !== a && (c = !0, t > f && (e = "onReverseComplete")), this._rawPrevTime = n = !b || a || t === a ? a : f)) : 1e-7 > a ? (this._totalTime = this._time = this._cycle = 0, this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0, (0 !== q || 0 === s && t > 0 && t !== f) && (e = "onReverseComplete", d = this._reversed), 0 > a ? (this._active = !1, 0 === s && (this._initted || !this.vars.lazy || c) && (t >= 0 && (c = !0), this._rawPrevTime = n = !b || a || t === a ? a : f)) : this._initted || (c = !0)) : (this._totalTime = this._time = a, 0 !== this._repeat && (i = s + this._repeatDelay, this._cycle = this._totalTime / i >> 0, 0 !== this._cycle && this._cycle === this._totalTime / i && this._cycle--, this._time = this._totalTime - this._cycle * i, this._yoyo && 0 !== (1 & this._cycle) && (this._time = s - this._time), this._time > s ? this._time = s : this._time < 0 && (this._time = 0)), this._easeType ? (j = this._time / s, l = this._easeType, m = this._easePower, (1 === l || 3 === l && j >= .5) && (j = 1 - j), 3 === l && (j *= 2), 1 === m ? j *= j : 2 === m ? j *= j * j : 3 === m ? j *= j * j * j : 4 === m && (j *= j * j * j * j), this.ratio = 1 === l ? 1 - j : 2 === l ? j : this._time / s < .5 ? j / 2 : 1 - j / 2) : this.ratio = this._ease.getRatio(this._time / s)), p === this._time && !c && r === this._cycle) return void(q !== this._totalTime && this._onUpdate && (b || this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || k)));
                    if (!this._initted) {
                        if (this._init(), !this._initted || this._gc) return;
                        if (!c && this._firstPT && (this.vars.lazy !== !1 && this._duration || this.vars.lazy && !this._duration)) return this._time = p, this._totalTime = q, this._rawPrevTime = t, this._cycle = r, g.lazyTweens.push(this), void(this._lazy = a);
                        this._time && !d ? this.ratio = this._ease.getRatio(this._time / s) : d && this._ease._calcEnd && (this.ratio = this._ease.getRatio(0 === this._time ? 0 : 1))
                    }
                    for (this._lazy !== !1 && (this._lazy = !1), this._active || !this._paused && this._time !== p && a >= 0 && (this._active = !0), 0 === q && (2 === this._initted && a > 0 && this._init(), this._startAt && (a >= 0 ? this._startAt.render(a, b, c) : e || (e = "_dummyGS")), this.vars.onStart && (0 !== this._totalTime || 0 === s) && (b || this.vars.onStart.apply(this.vars.onStartScope || this, this.vars.onStartParams || k))), h = this._firstPT; h;) h.f ? h.t[h.p](h.c * this.ratio + h.s) : h.t[h.p] = h.c * this.ratio + h.s, h = h._next;
                    this._onUpdate && (0 > a && this._startAt && this._startTime && this._startAt.render(a, b, c), b || (this._totalTime !== q || d) && this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || k)), this._cycle !== r && (b || this._gc || this.vars.onRepeat && this.vars.onRepeat.apply(this.vars.onRepeatScope || this, this.vars.onRepeatParams || k)), e && (this._gc || (0 > a && this._startAt && !this._onUpdate && this._startTime && this._startAt.render(a, b, c), d && (this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !b && this.vars[e] && this.vars[e].apply(this.vars[e + "Scope"] || this, this.vars[e + "Params"] || k), 0 === s && this._rawPrevTime === f && n !== f && (this._rawPrevTime = 0)))
                }, e.to = function(a, b, c) {
                    return new e(a, b, c)
                }, e.from = function(a, b, c) {
                    return c.runBackwards = !0, c.immediateRender = 0 != c.immediateRender, new e(a, b, c)
                }, e.fromTo = function(a, b, c, d) {
                    return d.startAt = c, d.immediateRender = 0 != d.immediateRender && 0 != c.immediateRender, new e(a, b, d)
                }, e.staggerTo = e.allTo = function(a, b, f, g, j, l, m) {
                    g = g || 0;
                    var n, o, p, q, r = f.delay || 0,
                        s = [],
                        t = function() {
                            f.onComplete && f.onComplete.apply(f.onCompleteScope || this, arguments), j.apply(m || this, l || k)
                        };
                    for (i(a) || ("string" == typeof a && (a = c.selector(a) || a), h(a) && (a = d.call(a, 0))), n = a.length, p = 0; n > p; p++) {
                        o = {};
                        for (q in f) o[q] = f[q];
                        o.delay = r, p === n - 1 && j && (o.onComplete = t), s[p] = new e(a[p], b, o), r += g
                    }
                    return s
                }, e.staggerFrom = e.allFrom = function(a, b, c, d, f, g, h) {
                    return c.runBackwards = !0, c.immediateRender = 0 != c.immediateRender, e.staggerTo(a, b, c, d, f, g, h)
                }, e.staggerFromTo = e.allFromTo = function(a, b, c, d, f, g, h, i) {
                    return d.startAt = c, d.immediateRender = 0 != d.immediateRender && 0 != c.immediateRender, e.staggerTo(a, b, d, f, g, h, i)
                }, e.delayedCall = function(a, b, c, d, f) {
                    return new e(b, 0, {
                        delay: a,
                        onComplete: b,
                        onCompleteParams: c,
                        onCompleteScope: d,
                        onReverseComplete: b,
                        onReverseCompleteParams: c,
                        onReverseCompleteScope: d,
                        immediateRender: !1,
                        useFrames: f,
                        overwrite: 0
                    })
                }, e.set = function(a, b) {
                    return new e(a, 0, b)
                }, e.isTweening = function(a) {
                    return c.getTweensOf(a, !0).length > 0
                };
                var l = function(a, b) {
                        for (var d = [], e = 0, f = a._first; f;) f instanceof c ? d[e++] = f : (b && (d[e++] = f), d = d.concat(l(f, b)), e = d.length), f = f._next;
                        return d
                    },
                    m = e.getAllTweens = function(b) {
                        return l(a._rootTimeline, b).concat(l(a._rootFramesTimeline, b))
                    };
                e.killAll = function(a, c, d, e) {
                    null == c && (c = !0), null == d && (d = !0);
                    var f, g, h, i = m(0 != e),
                        j = i.length,
                        k = c && d && e;
                    for (h = 0; j > h; h++) g = i[h], (k || g instanceof b || (f = g.target === g.vars.onComplete) && d || c && !f) && (a ? g.totalTime(g._reversed ? 0 : g.totalDuration()) : g._enabled(!1, !1))
                }, e.killChildTweensOf = function(a, b) {
                    if (null != a) {
                        var f, j, k, l, m, n = g.tweenLookup;
                        if ("string" == typeof a && (a = c.selector(a) || a), h(a) && (a = d.call(a, 0)), i(a))
                            for (l = a.length; --l > -1;) e.killChildTweensOf(a[l], b);
                        else {
                            f = [];
                            for (k in n)
                                for (j = n[k].target.parentNode; j;) j === a && (f = f.concat(n[k].tweens)), j = j.parentNode;
                            for (m = f.length, l = 0; m > l; l++) b && f[l].totalTime(f[l].totalDuration()), f[l]._enabled(!1, !1)
                        }
                    }
                };
                var n = function(a, c, d, e) {
                    c = c !== !1, d = d !== !1, e = e !== !1;
                    for (var f, g, h = m(e), i = c && d && e, j = h.length; --j > -1;) g = h[j], (i || g instanceof b || (f = g.target === g.vars.onComplete) && d || c && !f) && g.paused(a)
                };
                return e.pauseAll = function(a, b, c) {
                    n(!0, a, b, c)
                }, e.resumeAll = function(a, b, c) {
                    n(!1, a, b, c)
                }, e.globalTimeScale = function(b) {
                    var d = a._rootTimeline,
                        e = c.ticker.time;
                    return arguments.length ? (b = b || f, d._startTime = e - (e - d._startTime) * d._timeScale / b, d = a._rootFramesTimeline, e = c.ticker.frame, d._startTime = e - (e - d._startTime) * d._timeScale / b, d._timeScale = a._rootTimeline._timeScale = b, b) : d._timeScale
                }, j.progress = function(a) {
                    return arguments.length ? this.totalTime(this.duration() * (this._yoyo && 0 !== (1 & this._cycle) ? 1 - a : a) + this._cycle * (this._duration + this._repeatDelay), !1) : this._time / this.duration()
                }, j.totalProgress = function(a) {
                    return arguments.length ? this.totalTime(this.totalDuration() * a, !1) : this._totalTime / this.totalDuration()
                }, j.time = function(a, b) {
                    return arguments.length ? (this._dirty && this.totalDuration(), a > this._duration && (a = this._duration), this._yoyo && 0 !== (1 & this._cycle) ? a = this._duration - a + this._cycle * (this._duration + this._repeatDelay) : 0 !== this._repeat && (a += this._cycle * (this._duration + this._repeatDelay)), this.totalTime(a, b)) : this._time
                }, j.duration = function(b) {
                    return arguments.length ? a.prototype.duration.call(this, b) : this._duration
                }, j.totalDuration = function(a) {
                    return arguments.length ? -1 === this._repeat ? this : this.duration((a - this._repeat * this._repeatDelay) / (this._repeat + 1)) : (this._dirty && (this._totalDuration = -1 === this._repeat ? 999999999999 : this._duration * (this._repeat + 1) + this._repeatDelay * this._repeat, this._dirty = !1), this._totalDuration)
                }, j.repeat = function(a) {
                    return arguments.length ? (this._repeat = a, this._uncache(!0)) : this._repeat
                }, j.repeatDelay = function(a) {
                    return arguments.length ? (this._repeatDelay = a, this._uncache(!0)) : this._repeatDelay
                }, j.yoyo = function(a) {
                    return arguments.length ? (this._yoyo = a, this) : this._yoyo
                }, e
            }, !0), window._gsDefine("TimelineLite", ["core.Animation", "core.SimpleTimeline", "TweenLite"], function(a, b, c) {
                var d = function(a) {
                        b.call(this, a), this._labels = {}, this.autoRemoveChildren = this.vars.autoRemoveChildren === !0, this.smoothChildTiming = this.vars.smoothChildTiming === !0, this._sortChildren = !0, this._onUpdate = this.vars.onUpdate;
                        var c, d, e = this.vars;
                        for (d in e) c = e[d], g(c) && -1 !== c.join("").indexOf("{self}") && (e[d] = this._swapSelfInParams(c));
                        g(e.tweens) && this.add(e.tweens, 0, e.align, e.stagger)
                    },
                    e = 1e-10,
                    f = c._internals.isSelector,
                    g = c._internals.isArray,
                    h = [],
                    i = window._gsDefine.globals,
                    j = function(a) {
                        var b, c = {};
                        for (b in a) c[b] = a[b];
                        return c
                    },
                    k = function(a, b, c, d) {
                        a._timeline.pause(a._startTime), b && b.apply(d || a._timeline, c || h)
                    },
                    l = h.slice,
                    m = d.prototype = new b;
                return d.version = "1.12.1", m.constructor = d, m.kill()._gc = !1, m.to = function(a, b, d, e) {
                    var f = d.repeat && i.TweenMax || c;
                    return b ? this.add(new f(a, b, d), e) : this.set(a, d, e)
                }, m.from = function(a, b, d, e) {
                    return this.add((d.repeat && i.TweenMax || c).from(a, b, d), e)
                }, m.fromTo = function(a, b, d, e, f) {
                    var g = e.repeat && i.TweenMax || c;
                    return b ? this.add(g.fromTo(a, b, d, e), f) : this.set(a, e, f)
                }, m.staggerTo = function(a, b, e, g, h, i, k, m) {
                    var n, o = new d({
                        onComplete: i,
                        onCompleteParams: k,
                        onCompleteScope: m,
                        smoothChildTiming: this.smoothChildTiming
                    });
                    for ("string" == typeof a && (a = c.selector(a) || a), f(a) && (a = l.call(a, 0)), g = g || 0, n = 0; n < a.length; n++) e.startAt && (e.startAt = j(e.startAt)), o.to(a[n], b, j(e), n * g);
                    return this.add(o, h);

                }, m.staggerFrom = function(a, b, c, d, e, f, g, h) {
                    return c.immediateRender = 0 != c.immediateRender, c.runBackwards = !0, this.staggerTo(a, b, c, d, e, f, g, h)
                }, m.staggerFromTo = function(a, b, c, d, e, f, g, h, i) {
                    return d.startAt = c, d.immediateRender = 0 != d.immediateRender && 0 != c.immediateRender, this.staggerTo(a, b, d, e, f, g, h, i)
                }, m.call = function(a, b, d, e) {
                    return this.add(c.delayedCall(0, a, b, d), e)
                }, m.set = function(a, b, d) {
                    return d = this._parseTimeOrLabel(d, 0, !0), null == b.immediateRender && (b.immediateRender = d === this._time && !this._paused), this.add(new c(a, 0, b), d)
                }, d.exportRoot = function(a, b) {
                    a = a || {}, null == a.smoothChildTiming && (a.smoothChildTiming = !0);
                    var e, f, g = new d(a),
                        h = g._timeline;
                    for (null == b && (b = !0), h._remove(g, !0), g._startTime = 0, g._rawPrevTime = g._time = g._totalTime = h._time, e = h._first; e;) f = e._next, b && e instanceof c && e.target === e.vars.onComplete || g.add(e, e._startTime - e._delay), e = f;
                    return h.add(g, 0), g
                }, m.add = function(e, f, h, i) {
                    var j, k, l, m, n, o;
                    if ("number" != typeof f && (f = this._parseTimeOrLabel(f, 0, !0, e)), !(e instanceof a)) {
                        if (e instanceof Array || e && e.push && g(e)) {
                            for (h = h || "normal", i = i || 0, j = f, k = e.length, l = 0; k > l; l++) g(m = e[l]) && (m = new d({
                                tweens: m
                            })), this.add(m, j), "string" != typeof m && "function" != typeof m && ("sequence" === h ? j = m._startTime + m.totalDuration() / m._timeScale : "start" === h && (m._startTime -= m.delay())), j += i;
                            return this._uncache(!0)
                        }
                        if ("string" == typeof e) return this.addLabel(e, f);
                        if ("function" != typeof e) throw "Cannot add " + e + " into the timeline; it is not a tween, timeline, function, or string.";
                        e = c.delayedCall(0, e)
                    }
                    if (b.prototype.add.call(this, e, f), (this._gc || this._time === this._duration) && !this._paused && this._duration < this.duration())
                        for (n = this, o = n.rawTime() > e._startTime; n._timeline;) o && n._timeline.smoothChildTiming ? n.totalTime(n._totalTime, !0) : n._gc && n._enabled(!0, !1), n = n._timeline;
                    return this
                }, m.remove = function(b) {
                    if (b instanceof a) return this._remove(b, !1);
                    if (b instanceof Array || b && b.push && g(b)) {
                        for (var c = b.length; --c > -1;) this.remove(b[c]);
                        return this
                    }
                    return "string" == typeof b ? this.removeLabel(b) : this.kill(null, b)
                }, m._remove = function(a, c) {
                    b.prototype._remove.call(this, a, c);
                    var d = this._last;
                    return d ? this._time > d._startTime + d._totalDuration / d._timeScale && (this._time = this.duration(), this._totalTime = this._totalDuration) : this._time = this._totalTime = this._duration = this._totalDuration = 0, this
                }, m.append = function(a, b) {
                    return this.add(a, this._parseTimeOrLabel(null, b, !0, a))
                }, m.insert = m.insertMultiple = function(a, b, c, d) {
                    return this.add(a, b || 0, c, d)
                }, m.appendMultiple = function(a, b, c, d) {
                    return this.add(a, this._parseTimeOrLabel(null, b, !0, a), c, d)
                }, m.addLabel = function(a, b) {
                    return this._labels[a] = this._parseTimeOrLabel(b), this
                }, m.addPause = function(a, b, c, d) {
                    return this.call(k, ["{self}", b, c, d], this, a)
                }, m.removeLabel = function(a) {
                    return delete this._labels[a], this
                }, m.getLabelTime = function(a) {
                    return null != this._labels[a] ? this._labels[a] : -1
                }, m._parseTimeOrLabel = function(b, c, d, e) {
                    var f;
                    if (e instanceof a && e.timeline === this) this.remove(e);
                    else if (e && (e instanceof Array || e.push && g(e)))
                        for (f = e.length; --f > -1;) e[f] instanceof a && e[f].timeline === this && this.remove(e[f]);
                    if ("string" == typeof c) return this._parseTimeOrLabel(c, d && "number" == typeof b && null == this._labels[c] ? b - this.duration() : 0, d);
                    if (c = c || 0, "string" != typeof b || !isNaN(b) && null == this._labels[b]) null == b && (b = this.duration());
                    else {
                        if (f = b.indexOf("="), -1 === f) return null == this._labels[b] ? d ? this._labels[b] = this.duration() + c : c : this._labels[b] + c;
                        c = parseInt(b.charAt(f - 1) + "1", 10) * Number(b.substr(f + 1)), b = f > 1 ? this._parseTimeOrLabel(b.substr(0, f - 1), 0, d) : this.duration()
                    }
                    return Number(b) + c
                }, m.seek = function(a, b) {
                    return this.totalTime("number" == typeof a ? a : this._parseTimeOrLabel(a), b !== !1)
                }, m.stop = function() {
                    return this.paused(!0)
                }, m.gotoAndPlay = function(a, b) {
                    return this.play(a, b)
                }, m.gotoAndStop = function(a, b) {
                    return this.pause(a, b)
                }, m.render = function(a, b, c) {
                    this._gc && this._enabled(!0, !1);
                    var d, f, g, i, j, k = this._dirty ? this.totalDuration() : this._totalDuration,
                        l = this._time,
                        m = this._startTime,
                        n = this._timeScale,
                        o = this._paused;
                    if (a >= k ? (this._totalTime = this._time = k, this._reversed || this._hasPausedChild() || (f = !0, i = "onComplete", 0 === this._duration && (0 === a || this._rawPrevTime < 0 || this._rawPrevTime === e) && this._rawPrevTime !== a && this._first && (j = !0, this._rawPrevTime > e && (i = "onReverseComplete"))), this._rawPrevTime = this._duration || !b || a || this._rawPrevTime === a ? a : e, a = k + 1e-4) : 1e-7 > a ? (this._totalTime = this._time = 0, (0 !== l || 0 === this._duration && this._rawPrevTime !== e && (this._rawPrevTime > 0 || 0 > a && this._rawPrevTime >= 0)) && (i = "onReverseComplete", f = this._reversed), 0 > a ? (this._active = !1, 0 === this._duration && this._rawPrevTime >= 0 && this._first && (j = !0), this._rawPrevTime = a) : (this._rawPrevTime = this._duration || !b || a || this._rawPrevTime === a ? a : e, a = 0, this._initted || (j = !0))) : this._totalTime = this._time = this._rawPrevTime = a, this._time !== l && this._first || c || j) {
                        if (this._initted || (this._initted = !0), this._active || !this._paused && this._time !== l && a > 0 && (this._active = !0), 0 === l && this.vars.onStart && 0 !== this._time && (b || this.vars.onStart.apply(this.vars.onStartScope || this, this.vars.onStartParams || h)), this._time >= l)
                            for (d = this._first; d && (g = d._next, !this._paused || o);)(d._active || d._startTime <= this._time && !d._paused && !d._gc) && (d._reversed ? d.render((d._dirty ? d.totalDuration() : d._totalDuration) - (a - d._startTime) * d._timeScale, b, c) : d.render((a - d._startTime) * d._timeScale, b, c)), d = g;
                        else
                            for (d = this._last; d && (g = d._prev, !this._paused || o);)(d._active || d._startTime <= l && !d._paused && !d._gc) && (d._reversed ? d.render((d._dirty ? d.totalDuration() : d._totalDuration) - (a - d._startTime) * d._timeScale, b, c) : d.render((a - d._startTime) * d._timeScale, b, c)), d = g;
                        this._onUpdate && (b || this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || h)), i && (this._gc || (m === this._startTime || n !== this._timeScale) && (0 === this._time || k >= this.totalDuration()) && (f && (this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !b && this.vars[i] && this.vars[i].apply(this.vars[i + "Scope"] || this, this.vars[i + "Params"] || h)))
                    }
                }, m._hasPausedChild = function() {
                    for (var a = this._first; a;) {
                        if (a._paused || a instanceof d && a._hasPausedChild()) return !0;
                        a = a._next
                    }
                    return !1
                }, m.getChildren = function(a, b, d, e) {
                    e = e || -9999999999;
                    for (var f = [], g = this._first, h = 0; g;) g._startTime < e || (g instanceof c ? b !== !1 && (f[h++] = g) : (d !== !1 && (f[h++] = g), a !== !1 && (f = f.concat(g.getChildren(!0, b, d)), h = f.length))), g = g._next;
                    return f
                }, m.getTweensOf = function(a, b) {
                    var d, e, f = this._gc,
                        g = [],
                        h = 0;
                    for (f && this._enabled(!0, !0), d = c.getTweensOf(a), e = d.length; --e > -1;)(d[e].timeline === this || b && this._contains(d[e])) && (g[h++] = d[e]);
                    return f && this._enabled(!1, !0), g
                }, m._contains = function(a) {
                    for (var b = a.timeline; b;) {
                        if (b === this) return !0;
                        b = b.timeline
                    }
                    return !1
                }, m.shiftChildren = function(a, b, c) {
                    c = c || 0;
                    for (var d, e = this._first, f = this._labels; e;) e._startTime >= c && (e._startTime += a), e = e._next;
                    if (b)
                        for (d in f) f[d] >= c && (f[d] += a);
                    return this._uncache(!0)
                }, m._kill = function(a, b) {
                    if (!a && !b) return this._enabled(!1, !1);
                    for (var c = b ? this.getTweensOf(b) : this.getChildren(!0, !0, !1), d = c.length, e = !1; --d > -1;) c[d]._kill(a, b) && (e = !0);
                    return e
                }, m.clear = function(a) {
                    var b = this.getChildren(!1, !0, !0),
                        c = b.length;
                    for (this._time = this._totalTime = 0; --c > -1;) b[c]._enabled(!1, !1);
                    return a !== !1 && (this._labels = {}), this._uncache(!0)
                }, m.invalidate = function() {
                    for (var a = this._first; a;) a.invalidate(), a = a._next;
                    return this
                }, m._enabled = function(a, c) {
                    if (a === this._gc)
                        for (var d = this._first; d;) d._enabled(a, !0), d = d._next;
                    return b.prototype._enabled.call(this, a, c)
                }, m.duration = function(a) {
                    return arguments.length ? (0 !== this.duration() && 0 !== a && this.timeScale(this._duration / a), this) : (this._dirty && this.totalDuration(), this._duration)
                }, m.totalDuration = function(a) {
                    if (!arguments.length) {
                        if (this._dirty) {
                            for (var b, c, d = 0, e = this._last, f = 999999999999; e;) b = e._prev, e._dirty && e.totalDuration(), e._startTime > f && this._sortChildren && !e._paused ? this.add(e, e._startTime - e._delay) : f = e._startTime, e._startTime < 0 && !e._paused && (d -= e._startTime, this._timeline.smoothChildTiming && (this._startTime += e._startTime / this._timeScale), this.shiftChildren(-e._startTime, !1, -9999999999), f = 0), c = e._startTime + e._totalDuration / e._timeScale, c > d && (d = c), e = b;
                            this._duration = this._totalDuration = d, this._dirty = !1
                        }
                        return this._totalDuration
                    }
                    return 0 !== this.totalDuration() && 0 !== a && this.timeScale(this._totalDuration / a), this
                }, m.usesFrames = function() {
                    for (var b = this._timeline; b._timeline;) b = b._timeline;
                    return b === a._rootFramesTimeline
                }, m.rawTime = function() {
                    return this._paused ? this._totalTime : (this._timeline.rawTime() - this._startTime) * this._timeScale
                }, d
            }, !0), window._gsDefine("TimelineMax", ["TimelineLite", "TweenLite", "easing.Ease"], function(a, b, c) {
                var d = function(b) {
                        a.call(this, b), this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._cycle = 0, this._yoyo = this.vars.yoyo === !0, this._dirty = !0
                    },
                    e = 1e-10,
                    f = [],
                    g = new c(null, null, 1, 0),
                    h = d.prototype = new a;
                return h.constructor = d, h.kill()._gc = !1, d.version = "1.12.1", h.invalidate = function() {
                    return this._yoyo = this.vars.yoyo === !0, this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._uncache(!0), a.prototype.invalidate.call(this)
                }, h.addCallback = function(a, c, d, e) {
                    return this.add(b.delayedCall(0, a, d, e), c)
                }, h.removeCallback = function(a, b) {
                    if (a)
                        if (null == b) this._kill(null, a);
                        else
                            for (var c = this.getTweensOf(a, !1), d = c.length, e = this._parseTimeOrLabel(b); --d > -1;) c[d]._startTime === e && c[d]._enabled(!1, !1);
                    return this
                }, h.tweenTo = function(a, c) {
                    c = c || {};
                    var d, e, h, i = {
                        ease: g,
                        overwrite: c.delay ? 2 : 1,
                        useFrames: this.usesFrames(),
                        immediateRender: !1
                    };
                    for (e in c) i[e] = c[e];
                    return i.time = this._parseTimeOrLabel(a), d = Math.abs(Number(i.time) - this._time) / this._timeScale || .001, h = new b(this, d, i), i.onStart = function() {
                        h.target.paused(!0), h.vars.time !== h.target.time() && d === h.duration() && h.duration(Math.abs(h.vars.time - h.target.time()) / h.target._timeScale), c.onStart && c.onStart.apply(c.onStartScope || h, c.onStartParams || f)
                    }, h
                }, h.tweenFromTo = function(a, b, c) {
                    c = c || {}, a = this._parseTimeOrLabel(a), c.startAt = {
                        onComplete: this.seek,
                        onCompleteParams: [a],
                        onCompleteScope: this
                    }, c.immediateRender = c.immediateRender !== !1;
                    var d = this.tweenTo(b, c);
                    return d.duration(Math.abs(d.vars.time - a) / this._timeScale || .001)
                }, h.render = function(a, b, c) {
                    this._gc && this._enabled(!0, !1);
                    var d, g, h, i, j, k, l = this._dirty ? this.totalDuration() : this._totalDuration,
                        m = this._duration,
                        n = this._time,
                        o = this._totalTime,
                        p = this._startTime,
                        q = this._timeScale,
                        r = this._rawPrevTime,
                        s = this._paused,
                        t = this._cycle;
                    if (a >= l ? (this._locked || (this._totalTime = l, this._cycle = this._repeat), this._reversed || this._hasPausedChild() || (g = !0, i = "onComplete", 0 === this._duration && (0 === a || 0 > r || r === e) && r !== a && this._first && (j = !0, r > e && (i = "onReverseComplete"))), this._rawPrevTime = this._duration || !b || a || this._rawPrevTime === a ? a : e, this._yoyo && 0 !== (1 & this._cycle) ? this._time = a = 0 : (this._time = m, a = m + 1e-4)) : 1e-7 > a ? (this._locked || (this._totalTime = this._cycle = 0), this._time = 0, (0 !== n || 0 === m && r !== e && (r > 0 || 0 > a && r >= 0) && !this._locked) && (i = "onReverseComplete", g = this._reversed), 0 > a ? (this._active = !1, 0 === m && r >= 0 && this._first && (j = !0), this._rawPrevTime = a) : (this._rawPrevTime = m || !b || a || this._rawPrevTime === a ? a : e, a = 0, this._initted || (j = !0))) : (0 === m && 0 > r && (j = !0), this._time = this._rawPrevTime = a, this._locked || (this._totalTime = a, 0 !== this._repeat && (k = m + this._repeatDelay, this._cycle = this._totalTime / k >> 0, 0 !== this._cycle && this._cycle === this._totalTime / k && this._cycle--, this._time = this._totalTime - this._cycle * k, this._yoyo && 0 !== (1 & this._cycle) && (this._time = m - this._time), this._time > m ? (this._time = m, a = m + 1e-4) : this._time < 0 ? this._time = a = 0 : a = this._time))), this._cycle !== t && !this._locked) {
                        var u = this._yoyo && 0 !== (1 & t),
                            v = u === (this._yoyo && 0 !== (1 & this._cycle)),
                            w = this._totalTime,
                            x = this._cycle,
                            y = this._rawPrevTime,
                            z = this._time;
                        if (this._totalTime = t * m, this._cycle < t ? u = !u : this._totalTime += m, this._time = n, this._rawPrevTime = 0 === m ? r - 1e-4 : r, this._cycle = t, this._locked = !0, n = u ? 0 : m, this.render(n, b, 0 === m), b || this._gc || this.vars.onRepeat && this.vars.onRepeat.apply(this.vars.onRepeatScope || this, this.vars.onRepeatParams || f), v && (n = u ? m + 1e-4 : -1e-4, this.render(n, !0, !1)), this._locked = !1, this._paused && !s) return;
                        this._time = z, this._totalTime = w, this._cycle = x, this._rawPrevTime = y
                    }
                    if (!(this._time !== n && this._first || c || j)) return void(o !== this._totalTime && this._onUpdate && (b || this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || f)));
                    if (this._initted || (this._initted = !0), this._active || !this._paused && this._totalTime !== o && a > 0 && (this._active = !0), 0 === o && this.vars.onStart && 0 !== this._totalTime && (b || this.vars.onStart.apply(this.vars.onStartScope || this, this.vars.onStartParams || f)), this._time >= n)
                        for (d = this._first; d && (h = d._next, !this._paused || s);)(d._active || d._startTime <= this._time && !d._paused && !d._gc) && (d._reversed ? d.render((d._dirty ? d.totalDuration() : d._totalDuration) - (a - d._startTime) * d._timeScale, b, c) : d.render((a - d._startTime) * d._timeScale, b, c)), d = h;
                    else
                        for (d = this._last; d && (h = d._prev, !this._paused || s);)(d._active || d._startTime <= n && !d._paused && !d._gc) && (d._reversed ? d.render((d._dirty ? d.totalDuration() : d._totalDuration) - (a - d._startTime) * d._timeScale, b, c) : d.render((a - d._startTime) * d._timeScale, b, c)), d = h;
                    this._onUpdate && (b || this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || f)), i && (this._locked || this._gc || (p === this._startTime || q !== this._timeScale) && (0 === this._time || l >= this.totalDuration()) && (g && (this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !b && this.vars[i] && this.vars[i].apply(this.vars[i + "Scope"] || this, this.vars[i + "Params"] || f)))
                }, h.getActive = function(a, b, c) {
                    null == a && (a = !0), null == b && (b = !0), null == c && (c = !1);
                    var d, e, f = [],
                        g = this.getChildren(a, b, c),
                        h = 0,
                        i = g.length;
                    for (d = 0; i > d; d++) e = g[d], e.isActive() && (f[h++] = e);
                    return f
                }, h.getLabelAfter = function(a) {
                    a || 0 !== a && (a = this._time);
                    var b, c = this.getLabelsArray(),
                        d = c.length;
                    for (b = 0; d > b; b++)
                        if (c[b].time > a) return c[b].name;
                    return null
                }, h.getLabelBefore = function(a) {
                    null == a && (a = this._time);
                    for (var b = this.getLabelsArray(), c = b.length; --c > -1;)
                        if (b[c].time < a) return b[c].name;
                    return null
                }, h.getLabelsArray = function() {
                    var a, b = [],
                        c = 0;
                    for (a in this._labels) b[c++] = {
                        time: this._labels[a],
                        name: a
                    };
                    return b.sort(function(a, b) {
                        return a.time - b.time
                    }), b
                }, h.progress = function(a) {
                    return arguments.length ? this.totalTime(this.duration() * (this._yoyo && 0 !== (1 & this._cycle) ? 1 - a : a) + this._cycle * (this._duration + this._repeatDelay), !1) : this._time / this.duration()
                }, h.totalProgress = function(a) {
                    return arguments.length ? this.totalTime(this.totalDuration() * a, !1) : this._totalTime / this.totalDuration()
                }, h.totalDuration = function(b) {
                    return arguments.length ? -1 === this._repeat ? this : this.duration((b - this._repeat * this._repeatDelay) / (this._repeat + 1)) : (this._dirty && (a.prototype.totalDuration.call(this), this._totalDuration = -1 === this._repeat ? 999999999999 : this._duration * (this._repeat + 1) + this._repeatDelay * this._repeat), this._totalDuration)
                }, h.time = function(a, b) {
                    return arguments.length ? (this._dirty && this.totalDuration(), a > this._duration && (a = this._duration), this._yoyo && 0 !== (1 & this._cycle) ? a = this._duration - a + this._cycle * (this._duration + this._repeatDelay) : 0 !== this._repeat && (a += this._cycle * (this._duration + this._repeatDelay)), this.totalTime(a, b)) : this._time
                }, h.repeat = function(a) {
                    return arguments.length ? (this._repeat = a, this._uncache(!0)) : this._repeat
                }, h.repeatDelay = function(a) {
                    return arguments.length ? (this._repeatDelay = a, this._uncache(!0)) : this._repeatDelay
                }, h.yoyo = function(a) {
                    return arguments.length ? (this._yoyo = a, this) : this._yoyo
                }, h.currentLabel = function(a) {
                    return arguments.length ? this.seek(a, !0) : this.getLabelBefore(this._time + 1e-8)
                }, d
            }, !0),
            function() {
                var a = 180 / Math.PI,
                    b = [],
                    c = [],
                    d = [],
                    e = {},
                    f = function(a, b, c, d) {
                        this.a = a, this.b = b, this.c = c, this.d = d, this.da = d - a, this.ca = c - a, this.ba = b - a
                    },
                    g = ",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",
                    h = function(a, b, c, d) {
                        var e = {
                                a: a
                            },
                            f = {},
                            g = {},
                            h = {
                                c: d
                            },
                            i = (a + b) / 2,
                            j = (b + c) / 2,
                            k = (c + d) / 2,
                            l = (i + j) / 2,
                            m = (j + k) / 2,
                            n = (m - l) / 8;
                        return e.b = i + (a - i) / 4, f.b = l + n, e.c = f.a = (e.b + f.b) / 2, f.c = g.a = (l + m) / 2, g.b = m - n, h.b = k + (d - k) / 4, g.c = h.a = (g.b + h.b) / 2, [e, f, g, h]
                    },
                    i = function(a, e, f, g, i) {
                        var j, k, l, m, n, o, p, q, r, s, t, u, v, w = a.length - 1,
                            x = 0,
                            y = a[0].a;
                        for (j = 0; w > j; j++) n = a[x], k = n.a, l = n.d, m = a[x + 1].d, i ? (t = b[j], u = c[j], v = (u + t) * e * .25 / (g ? .5 : d[j] || .5), o = l - (l - k) * (g ? .5 * e : 0 !== t ? v / t : 0), p = l + (m - l) * (g ? .5 * e : 0 !== u ? v / u : 0), q = l - (o + ((p - o) * (3 * t / (t + u) + .5) / 4 || 0))) : (o = l - (l - k) * e * .5, p = l + (m - l) * e * .5, q = l - (o + p) / 2), o += q, p += q, n.c = r = o, n.b = 0 !== j ? y : y = n.a + .6 * (n.c - n.a), n.da = l - k, n.ca = r - k, n.ba = y - k, f ? (s = h(k, y, r, l), a.splice(x, 1, s[0], s[1], s[2], s[3]), x += 4) : x++, y = p;
                        n = a[x], n.b = y, n.c = y + .4 * (n.d - y), n.da = n.d - n.a, n.ca = n.c - n.a, n.ba = y - n.a, f && (s = h(n.a, y, n.c, n.d), a.splice(x, 1, s[0], s[1], s[2], s[3]))
                    },
                    j = function(a, d, e, g) {
                        var h, i, j, k, l, m, n = [];
                        if (g)
                            for (a = [g].concat(a), i = a.length; --i > -1;) "string" == typeof(m = a[i][d]) && "=" === m.charAt(1) && (a[i][d] = g[d] + Number(m.charAt(0) + m.substr(2)));
                        if (h = a.length - 2, 0 > h) return n[0] = new f(a[0][d], 0, 0, a[-1 > h ? 0 : 1][d]), n;
                        for (i = 0; h > i; i++) j = a[i][d], k = a[i + 1][d], n[i] = new f(j, 0, 0, k), e && (l = a[i + 2][d], b[i] = (b[i] || 0) + (k - j) * (k - j), c[i] = (c[i] || 0) + (l - k) * (l - k));
                        return n[i] = new f(a[i][d], 0, 0, a[i + 1][d]), n
                    },
                    k = function(a, f, h, k, l, m) {
                        var n, o, p, q, r, s, t, u, v = {},
                            w = [],
                            x = m || a[0];
                        l = "string" == typeof l ? "," + l + "," : g, null == f && (f = 1);
                        for (o in a[0]) w.push(o);
                        if (a.length > 1) {
                            for (u = a[a.length - 1], t = !0, n = w.length; --n > -1;)
                                if (o = w[n], Math.abs(x[o] - u[o]) > .05) {
                                    t = !1;
                                    break
                                }
                            t && (a = a.concat(), m && a.unshift(m), a.push(a[1]), m = a[a.length - 3])
                        }
                        for (b.length = c.length = d.length = 0, n = w.length; --n > -1;) o = w[n], e[o] = -1 !== l.indexOf("," + o + ","), v[o] = j(a, o, e[o], m);
                        for (n = b.length; --n > -1;) b[n] = Math.sqrt(b[n]), c[n] = Math.sqrt(c[n]);
                        if (!k) {
                            for (n = w.length; --n > -1;)
                                if (e[o])
                                    for (p = v[w[n]], s = p.length - 1, q = 0; s > q; q++) r = p[q + 1].da / c[q] + p[q].da / b[q], d[q] = (d[q] || 0) + r * r;
                            for (n = d.length; --n > -1;) d[n] = Math.sqrt(d[n])
                        }
                        for (n = w.length, q = h ? 4 : 1; --n > -1;) o = w[n], p = v[o], i(p, f, h, k, e[o]), t && (p.splice(0, q), p.splice(p.length - q, q));
                        return v
                    },
                    l = function(a, b, c) {
                        b = b || "soft";
                        var d, e, g, h, i, j, k, l, m, n, o, p = {},
                            q = "cubic" === b ? 3 : 2,
                            r = "soft" === b,
                            s = [];
                        if (r && c && (a = [c].concat(a)), null == a || a.length < q + 1) throw "invalid Bezier data";
                        for (m in a[0]) s.push(m);
                        for (j = s.length; --j > -1;) {
                            for (m = s[j], p[m] = i = [], n = 0, l = a.length, k = 0; l > k; k++) d = null == c ? a[k][m] : "string" == typeof(o = a[k][m]) && "=" === o.charAt(1) ? c[m] + Number(o.charAt(0) + o.substr(2)) : Number(o), r && k > 1 && l - 1 > k && (i[n++] = (d + i[n - 2]) / 2), i[n++] = d;
                            for (l = n - q + 1, n = 0, k = 0; l > k; k += q) d = i[k], e = i[k + 1], g = i[k + 2], h = 2 === q ? 0 : i[k + 3], i[n++] = o = 3 === q ? new f(d, e, g, h) : new f(d, (2 * e + d) / 3, (2 * e + g) / 3, g);
                            i.length = n
                        }
                        return p
                    },
                    m = function(a, b, c) {
                        for (var d, e, f, g, h, i, j, k, l, m, n, o = 1 / c, p = a.length; --p > -1;)
                            for (m = a[p], f = m.a, g = m.d - f, h = m.c - f, i = m.b - f, d = e = 0, k = 1; c >= k; k++) j = o * k, l = 1 - j, d = e - (e = (j * j * g + 3 * l * (j * h + l * i)) * j), n = p * c + k - 1, b[n] = (b[n] || 0) + d * d
                    },
                    n = function(a, b) {
                        b = b >> 0 || 6;
                        var c, d, e, f, g = [],
                            h = [],
                            i = 0,
                            j = 0,
                            k = b - 1,
                            l = [],
                            n = [];
                        for (c in a) m(a[c], g, b);
                        for (e = g.length, d = 0; e > d; d++) i += Math.sqrt(g[d]), f = d % b, n[f] = i, f === k && (j += i, f = d / b >> 0, l[f] = n, h[f] = j, i = 0, n = []);
                        return {
                            length: j,
                            lengths: h,
                            segments: l
                        }
                    },
                    o = window._gsDefine.plugin({
                        propName: "bezier",
                        priority: -1,
                        version: "1.3.2",
                        API: 2,
                        global: !0,
                        init: function(a, b, c) {
                            this._target = a, b instanceof Array && (b = {
                                values: b
                            }), this._func = {}, this._round = {}, this._props = [], this._timeRes = null == b.timeResolution ? 6 : parseInt(b.timeResolution, 10);
                            var d, e, f, g, h, i = b.values || [],
                                j = {},
                                m = i[0],
                                o = b.autoRotate || c.vars.orientToBezier;
                            this._autoRotate = o ? o instanceof Array ? o : [
                                ["x", "y", "rotation", o === !0 ? 0 : Number(o) || 0]
                            ] : null;
                            for (d in m) this._props.push(d);
                            for (f = this._props.length; --f > -1;) d = this._props[f], this._overwriteProps.push(d), e = this._func[d] = "function" == typeof a[d], j[d] = e ? a[d.indexOf("set") || "function" != typeof a["get" + d.substr(3)] ? d : "get" + d.substr(3)]() : parseFloat(a[d]), h || j[d] !== i[0][d] && (h = j);
                            if (this._beziers = "cubic" !== b.type && "quadratic" !== b.type && "soft" !== b.type ? k(i, isNaN(b.curviness) ? 1 : b.curviness, !1, "thruBasic" === b.type, b.correlate, h) : l(i, b.type, j), this._segCount = this._beziers[d].length, this._timeRes) {
                                var p = n(this._beziers, this._timeRes);
                                this._length = p.length, this._lengths = p.lengths, this._segments = p.segments, this._l1 = this._li = this._s1 = this._si = 0, this._l2 = this._lengths[0], this._curSeg = this._segments[0], this._s2 = this._curSeg[0], this._prec = 1 / this._curSeg.length
                            }
                            if (o = this._autoRotate)
                                for (this._initialRotations = [], o[0] instanceof Array || (this._autoRotate = o = [o]), f = o.length; --f > -1;) {
                                    for (g = 0; 3 > g; g++) d = o[f][g], this._func[d] = "function" == typeof a[d] ? a[d.indexOf("set") || "function" != typeof a["get" + d.substr(3)] ? d : "get" + d.substr(3)] : !1;
                                    d = o[f][2], this._initialRotations[f] = this._func[d] ? this._func[d].call(this._target) : this._target[d]
                                }
                            return this._startRatio = c.vars.runBackwards ? 1 : 0, !0
                        },
                        set: function(b) {
                            var c, d, e, f, g, h, i, j, k, l, m = this._segCount,
                                n = this._func,
                                o = this._target,
                                p = b !== this._startRatio;
                            if (this._timeRes) {
                                if (k = this._lengths, l = this._curSeg, b *= this._length, e = this._li, b > this._l2 && m - 1 > e) {
                                    for (j = m - 1; j > e && (this._l2 = k[++e]) <= b;);
                                    this._l1 = k[e - 1], this._li = e, this._curSeg = l = this._segments[e], this._s2 = l[this._s1 = this._si = 0]
                                } else if (b < this._l1 && e > 0) {
                                    for (; e > 0 && (this._l1 = k[--e]) >= b;);
                                    0 === e && b < this._l1 ? this._l1 = 0 : e++, this._l2 = k[e], this._li = e, this._curSeg = l = this._segments[e], this._s1 = l[(this._si = l.length - 1) - 1] || 0, this._s2 = l[this._si]
                                }
                                if (c = e, b -= this._l1, e = this._si, b > this._s2 && e < l.length - 1) {
                                    for (j = l.length - 1; j > e && (this._s2 = l[++e]) <= b;);
                                    this._s1 = l[e - 1], this._si = e
                                } else if (b < this._s1 && e > 0) {
                                    for (; e > 0 && (this._s1 = l[--e]) >= b;);
                                    0 === e && b < this._s1 ? this._s1 = 0 : e++, this._s2 = l[e], this._si = e
                                }
                                h = (e + (b - this._s1) / (this._s2 - this._s1)) * this._prec
                            } else c = 0 > b ? 0 : b >= 1 ? m - 1 : m * b >> 0, h = (b - c * (1 / m)) * m;
                            for (d = 1 - h, e = this._props.length; --e > -1;) f = this._props[e], g = this._beziers[f][c], i = (h * h * g.da + 3 * d * (h * g.ca + d * g.ba)) * h + g.a, this._round[f] && (i = Math.round(i)), n[f] ? o[f](i) : o[f] = i;
                            if (this._autoRotate) {
                                var q, r, s, t, u, v, w, x = this._autoRotate;
                                for (e = x.length; --e > -1;) f = x[e][2], v = x[e][3] || 0, w = x[e][4] === !0 ? 1 : a, g = this._beziers[x[e][0]], q = this._beziers[x[e][1]], g && q && (g = g[c], q = q[c], r = g.a + (g.b - g.a) * h, t = g.b + (g.c - g.b) * h, r += (t - r) * h, t += (g.c + (g.d - g.c) * h - t) * h, s = q.a + (q.b - q.a) * h, u = q.b + (q.c - q.b) * h, s += (u - s) * h, u += (q.c + (q.d - q.c) * h - u) * h, i = p ? Math.atan2(u - s, t - r) * w + v : this._initialRotations[e], n[f] ? o[f](i) : o[f] = i)
                            }
                        }
                    }),
                    p = o.prototype;
                o.bezierThrough = k, o.cubicToQuadratic = h, o._autoCSS = !0, o.quadraticToCubic = function(a, b, c) {
                    return new f(a, (2 * b + a) / 3, (2 * b + c) / 3, c)
                }, o._cssRegister = function() {
                    var a = window._gsDefine.globals.CSSPlugin;
                    if (a) {
                        var b = a._internals,
                            c = b._parseToProxy,
                            d = b._setPluginRatio,
                            e = b.CSSPropTween;
                        b._registerComplexSpecialProp("bezier", {
                            parser: function(a, b, f, g, h, i) {
                                b instanceof Array && (b = {
                                    values: b
                                }), i = new o;
                                var j, k, l, m = b.values,
                                    n = m.length - 1,
                                    p = [],
                                    q = {};
                                if (0 > n) return h;
                                for (j = 0; n >= j; j++) l = c(a, m[j], g, h, i, n !== j), p[j] = l.end;
                                for (k in b) q[k] = b[k];
                                return q.values = p, h = new e(a, "bezier", 0, 0, l.pt, 2), h.data = l, h.plugin = i, h.setRatio = d, 0 === q.autoRotate && (q.autoRotate = !0), !q.autoRotate || q.autoRotate instanceof Array || (j = q.autoRotate === !0 ? 0 : Number(q.autoRotate), q.autoRotate = null != l.end.left ? [
                                    ["left", "top", "rotation", j, !1]
                                ] : null != l.end.x ? [
                                    ["x", "y", "rotation", j, !1]
                                ] : !1), q.autoRotate && (g._transform || g._enableTransforms(!1), l.autoRotate = g._target._gsTransform), i._onInitTween(l.proxy, q, g._tween), h
                            }
                        })
                    }
                }, p._roundProps = function(a, b) {
                    for (var c = this._overwriteProps, d = c.length; --d > -1;)(a[c[d]] || a.bezier || a.bezierThrough) && (this._round[c[d]] = b)
                }, p._kill = function(a) {
                    var b, c, d = this._props;
                    for (b in this._beziers)
                        if (b in a)
                            for (delete this._beziers[b], delete this._func[b], c = d.length; --c > -1;) d[c] === b && d.splice(c, 1);
                    return this._super._kill.call(this, a)
                }
            }(), window._gsDefine("plugins.CSSPlugin", ["plugins.TweenPlugin", "TweenLite"], function(a, b) {
                var c, d, e, f, g = function() {
                        a.call(this, "css"), this._overwriteProps.length = 0, this.setRatio = g.prototype.setRatio
                    },
                    h = {},
                    i = g.prototype = new a("css");
                i.constructor = g, g.version = "1.12.1", g.API = 2, g.defaultTransformPerspective = 0, g.defaultSkewType = "compensated", i = "px", g.suffixMap = {
                    top: i,
                    right: i,
                    bottom: i,
                    left: i,
                    width: i,
                    height: i,
                    fontSize: i,
                    padding: i,
                    margin: i,
                    perspective: i,
                    lineHeight: ""
                };
                var j, k, l, m, n, o, p = /(?:\d|\-\d|\.\d|\-\.\d)+/g,
                    q = /(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,
                    r = /(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,
                    s = /[^\d\-\.]/g,
                    t = /(?:\d|\-|\+|=|#|\.)*/g,
                    u = /opacity *= *([^)]*)/i,
                    v = /opacity:([^;]*)/i,
                    w = /alpha\(opacity *=.+?\)/i,
                    x = /^(rgb|hsl)/,
                    y = /([A-Z])/g,
                    z = /-([a-z])/gi,
                    A = /(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,
                    B = function(a, b) {
                        return b.toUpperCase()
                    },
                    C = /(?:Left|Right|Width)/i,
                    D = /(M11|M12|M21|M22)=[\d\-\.e]+/gi,
                    E = /progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,
                    F = /,(?=[^\)]*(?:\(|$))/gi,
                    G = Math.PI / 180,
                    H = 180 / Math.PI,
                    I = {},
                    J = document,
                    K = J.createElement("div"),
                    L = J.createElement("img"),
                    M = g._internals = {
                        _specialProps: h
                    },
                    N = navigator.userAgent,
                    O = function() {
                        var a, b = N.indexOf("Android"),
                            c = J.createElement("div");
                        return l = -1 !== N.indexOf("Safari") && -1 === N.indexOf("Chrome") && (-1 === b || Number(N.substr(b + 8, 1)) > 3), n = l && Number(N.substr(N.indexOf("Version/") + 8, 1)) < 6, m = -1 !== N.indexOf("Firefox"), /MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(N) && (o = parseFloat(RegExp.$1)), c.innerHTML = "<a style='top:1px;opacity:.55;'>a</a>", a = c.getElementsByTagName("a")[0], a ? /^0.55/.test(a.style.opacity) : !1
                    }(),
                    P = function(a) {
                        return u.test("string" == typeof a ? a : (a.currentStyle ? a.currentStyle.filter : a.style.filter) || "") ? parseFloat(RegExp.$1) / 100 : 1
                    },
                    Q = function(a) {
                        window.console && console.log(a)
                    },
                    R = "",
                    S = "",
                    T = function(a, b) {
                        b = b || K;
                        var c, d, e = b.style;
                        if (void 0 !== e[a]) return a;
                        for (a = a.charAt(0).toUpperCase() + a.substr(1), c = ["O", "Moz", "ms", "Ms", "Webkit"], d = 5; --d > -1 && void 0 === e[c[d] + a];);
                        return d >= 0 ? (S = 3 === d ? "ms" : c[d], R = "-" + S.toLowerCase() + "-", S + a) : null
                    },
                    U = J.defaultView ? J.defaultView.getComputedStyle : function() {},
                    V = g.getStyle = function(a, b, c, d, e) {
                        var f;
                        return O || "opacity" !== b ? (!d && a.style[b] ? f = a.style[b] : (c = c || U(a)) ? f = c[b] || c.getPropertyValue(b) || c.getPropertyValue(b.replace(y, "-$1").toLowerCase()) : a.currentStyle && (f = a.currentStyle[b]), null == e || f && "none" !== f && "auto" !== f && "auto auto" !== f ? f : e) : P(a)
                    },
                    W = M.convertToPixels = function(a, c, d, e, f) {
                        if ("px" === e || !e) return d;
                        if ("auto" === e || !d) return 0;
                        var h, i, j, k = C.test(c),
                            l = a,
                            m = K.style,
                            n = 0 > d;
                        if (n && (d = -d), "%" === e && -1 !== c.indexOf("border")) h = d / 100 * (k ? a.clientWidth : a.clientHeight);
                        else {
                            if (m.cssText = "border:0 solid red;position:" + V(a, "position") + ";line-height:0;", "%" !== e && l.appendChild) m[k ? "borderLeftWidth" : "borderTopWidth"] = d + e;
                            else {
                                if (l = a.parentNode || J.body, i = l._gsCache, j = b.ticker.frame, i && k && i.time === j) return i.width * d / 100;
                                m[k ? "width" : "height"] = d + e
                            }
                            l.appendChild(K), h = parseFloat(K[k ? "offsetWidth" : "offsetHeight"]), l.removeChild(K), k && "%" === e && g.cacheWidths !== !1 && (i = l._gsCache = l._gsCache || {}, i.time = j, i.width = h / d * 100), 0 !== h || f || (h = W(a, c, d, e, !0))
                        }
                        return n ? -h : h
                    },
                    X = M.calculateOffset = function(a, b, c) {
                        if ("absolute" !== V(a, "position", c)) return 0;
                        var d = "left" === b ? "Left" : "Top",
                            e = V(a, "margin" + d, c);
                        return a["offset" + d] - (W(a, b, parseFloat(e), e.replace(t, "")) || 0)
                    },
                    Y = function(a, b) {
                        var c, d, e = {};
                        if (b = b || U(a, null))
                            if (c = b.length)
                                for (; --c > -1;) e[b[c].replace(z, B)] = b.getPropertyValue(b[c]);
                            else
                                for (c in b) e[c] = b[c];
                        else if (b = a.currentStyle || a.style)
                            for (c in b) "string" == typeof c && void 0 === e[c] && (e[c.replace(z, B)] = b[c]);
                        return O || (e.opacity = P(a)), d = ya(a, b, !1), e.rotation = d.rotation, e.skewX = d.skewX, e.scaleX = d.scaleX, e.scaleY = d.scaleY, e.x = d.x, e.y = d.y, wa && (e.z = d.z, e.rotationX = d.rotationX, e.rotationY = d.rotationY, e.scaleZ = d.scaleZ), e.filters && delete e.filters, e
                    },
                    Z = function(a, b, c, d, e) {
                        var f, g, h, i = {},
                            j = a.style;
                        for (g in c) "cssText" !== g && "length" !== g && isNaN(g) && (b[g] !== (f = c[g]) || e && e[g]) && -1 === g.indexOf("Origin") && ("number" == typeof f || "string" == typeof f) && (i[g] = "auto" !== f || "left" !== g && "top" !== g ? "" !== f && "auto" !== f && "none" !== f || "string" != typeof b[g] || "" === b[g].replace(s, "") ? f : 0 : X(a, g), void 0 !== j[g] && (h = new la(j, g, j[g], h)));
                        if (d)
                            for (g in d) "className" !== g && (i[g] = d[g]);
                        return {
                            difs: i,
                            firstMPT: h
                        }
                    },
                    $ = {
                        width: ["Left", "Right"],
                        height: ["Top", "Bottom"]
                    },
                    _ = ["marginLeft", "marginRight", "marginTop", "marginBottom"],
                    aa = function(a, b, c) {
                        var d = parseFloat("width" === b ? a.offsetWidth : a.offsetHeight),
                            e = $[b],
                            f = e.length;
                        for (c = c || U(a, null); --f > -1;) d -= parseFloat(V(a, "padding" + e[f], c, !0)) || 0, d -= parseFloat(V(a, "border" + e[f] + "Width", c, !0)) || 0;
                        return d
                    },
                    ba = function(a, b) {
                        (null == a || "" === a || "auto" === a || "auto auto" === a) && (a = "0 0");
                        var c = a.split(" "),
                            d = -1 !== a.indexOf("left") ? "0%" : -1 !== a.indexOf("right") ? "100%" : c[0],
                            e = -1 !== a.indexOf("top") ? "0%" : -1 !== a.indexOf("bottom") ? "100%" : c[1];
                        return null == e ? e = "0" : "center" === e && (e = "50%"), ("center" === d || isNaN(parseFloat(d)) && -1 === (d + "").indexOf("=")) && (d = "50%"), b && (b.oxp = -1 !== d.indexOf("%"), b.oyp = -1 !== e.indexOf("%"), b.oxr = "=" === d.charAt(1), b.oyr = "=" === e.charAt(1), b.ox = parseFloat(d.replace(s, "")), b.oy = parseFloat(e.replace(s, ""))), d + " " + e + (c.length > 2 ? " " + c[2] : "")
                    },
                    ca = function(a, b) {
                        return "string" == typeof a && "=" === a.charAt(1) ? parseInt(a.charAt(0) + "1", 10) * parseFloat(a.substr(2)) : parseFloat(a) - parseFloat(b)
                    },
                    da = function(a, b) {
                        return null == a ? b : "string" == typeof a && "=" === a.charAt(1) ? parseInt(a.charAt(0) + "1", 10) * Number(a.substr(2)) + b : parseFloat(a)
                    },
                    ea = function(a, b, c, d) {
                        var e, f, g, h, i = 1e-6;
                        return null == a ? h = b : "number" == typeof a ? h = a : (e = 360, f = a.split("_"), g = Number(f[0].replace(s, "")) * (-1 === a.indexOf("rad") ? 1 : H) - ("=" === a.charAt(1) ? 0 : b), f.length && (d && (d[c] = b + g), -1 !== a.indexOf("short") && (g %= e, g !== g % (e / 2) && (g = 0 > g ? g + e : g - e)), -1 !== a.indexOf("_cw") && 0 > g ? g = (g + 9999999999 * e) % e - (g / e | 0) * e : -1 !== a.indexOf("ccw") && g > 0 && (g = (g - 9999999999 * e) % e - (g / e | 0) * e)), h = b + g), i > h && h > -i && (h = 0), h
                    },
                    fa = {
                        aqua: [0, 255, 255],
                        lime: [0, 255, 0],
                        silver: [192, 192, 192],
                        black: [0, 0, 0],
                        maroon: [128, 0, 0],
                        teal: [0, 128, 128],
                        blue: [0, 0, 255],
                        navy: [0, 0, 128],
                        white: [255, 255, 255],
                        fuchsia: [255, 0, 255],
                        olive: [128, 128, 0],
                        yellow: [255, 255, 0],
                        orange: [255, 165, 0],
                        gray: [128, 128, 128],
                        purple: [128, 0, 128],
                        green: [0, 128, 0],
                        red: [255, 0, 0],
                        pink: [255, 192, 203],
                        cyan: [0, 255, 255],
                        transparent: [255, 255, 255, 0]
                    },
                    ga = function(a, b, c) {
                        return a = 0 > a ? a + 1 : a > 1 ? a - 1 : a, 255 * (1 > 6 * a ? b + (c - b) * a * 6 : .5 > a ? c : 2 > 3 * a ? b + (c - b) * (2 / 3 - a) * 6 : b) + .5 | 0
                    },
                    ha = function(a) {
                        var b, c, d, e, f, g;
                        return a && "" !== a ? "number" == typeof a ? [a >> 16, a >> 8 & 255, 255 & a] : ("," === a.charAt(a.length - 1) && (a = a.substr(0, a.length - 1)), fa[a] ? fa[a] : "#" === a.charAt(0) ? (4 === a.length && (b = a.charAt(1), c = a.charAt(2), d = a.charAt(3), a = "#" + b + b + c + c + d + d), a = parseInt(a.substr(1), 16), [a >> 16, a >> 8 & 255, 255 & a]) : "hsl" === a.substr(0, 3) ? (a = a.match(p), e = Number(a[0]) % 360 / 360, f = Number(a[1]) / 100, g = Number(a[2]) / 100, c = .5 >= g ? g * (f + 1) : g + f - g * f, b = 2 * g - c, a.length > 3 && (a[3] = Number(a[3])), a[0] = ga(e + 1 / 3, b, c), a[1] = ga(e, b, c), a[2] = ga(e - 1 / 3, b, c), a) : (a = a.match(p) || fa.transparent, a[0] = Number(a[0]), a[1] = Number(a[1]), a[2] = Number(a[2]), a.length > 3 && (a[3] = Number(a[3])), a)) : fa.black
                    },
                    ia = "(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#.+?\\b";
                for (i in fa) ia += "|" + i + "\\b";
                ia = new RegExp(ia + ")", "gi");
                var ja = function(a, b, c, d) {
                        if (null == a) return function(a) {
                            return a
                        };
                        var e, f = b ? (a.match(ia) || [""])[0] : "",
                            g = a.split(f).join("").match(r) || [],
                            h = a.substr(0, a.indexOf(g[0])),
                            i = ")" === a.charAt(a.length - 1) ? ")" : "",
                            j = -1 !== a.indexOf(" ") ? " " : ",",
                            k = g.length,
                            l = k > 0 ? g[0].replace(p, "") : "";
                        return k ? e = b ? function(a) {
                            var b, m, n, o;
                            if ("number" == typeof a) a += l;
                            else if (d && F.test(a)) {
                                for (o = a.replace(F, "|").split("|"), n = 0; n < o.length; n++) o[n] = e(o[n]);
                                return o.join(",")
                            }
                            if (b = (a.match(ia) || [f])[0], m = a.split(b).join("").match(r) || [], n = m.length, k > n--)
                                for (; ++n < k;) m[n] = c ? m[(n - 1) / 2 | 0] : g[n];
                            return h + m.join(j) + j + b + i + (-1 !== a.indexOf("inset") ? " inset" : "")
                        } : function(a) {
                            var b, f, m;
                            if ("number" == typeof a) a += l;
                            else if (d && F.test(a)) {
                                for (f = a.replace(F, "|").split("|"), m = 0; m < f.length; m++) f[m] = e(f[m]);
                                return f.join(",")
                            }
                            if (b = a.match(r) || [], m = b.length, k > m--)
                                for (; ++m < k;) b[m] = c ? b[(m - 1) / 2 | 0] : g[m];
                            return h + b.join(j) + i
                        } : function(a) {
                            return a
                        }
                    },
                    ka = function(a) {
                        return a = a.split(","),
                            function(b, c, d, e, f, g, h) {
                                var i, j = (c + "").split(" ");
                                for (h = {}, i = 0; 4 > i; i++) h[a[i]] = j[i] = j[i] || j[(i - 1) / 2 >> 0];
                                return e.parse(b, h, f, g)
                            }
                    },
                    la = (M._setPluginRatio = function(a) {
                        this.plugin.setRatio(a);
                        for (var b, c, d, e, f = this.data, g = f.proxy, h = f.firstMPT, i = 1e-6; h;) b = g[h.v], h.r ? b = Math.round(b) : i > b && b > -i && (b = 0), h.t[h.p] = b, h = h._next;
                        if (f.autoRotate && (f.autoRotate.rotation = g.rotation), 1 === a)
                            for (h = f.firstMPT; h;) {
                                if (c = h.t, c.type) {
                                    if (1 === c.type) {
                                        for (e = c.xs0 + c.s + c.xs1, d = 1; d < c.l; d++) e += c["xn" + d] + c["xs" + (d + 1)];
                                        c.e = e
                                    }
                                } else c.e = c.s + c.xs0;
                                h = h._next
                            }
                    }, function(a, b, c, d, e) {
                        this.t = a, this.p = b, this.v = c, this.r = e, d && (d._prev = this, this._next = d)
                    }),
                    ma = (M._parseToProxy = function(a, b, c, d, e, f) {
                        var g, h, i, j, k, l = d,
                            m = {},
                            n = {},
                            o = c._transform,
                            p = I;
                        for (c._transform = null, I = b, d = k = c.parse(a, b, d, e), I = p, f && (c._transform = o, l && (l._prev = null, l._prev && (l._prev._next = null))); d && d !== l;) {
                            if (d.type <= 1 && (h = d.p, n[h] = d.s + d.c, m[h] = d.s, f || (j = new la(d, "s", h, j, d.r), d.c = 0), 1 === d.type))
                                for (g = d.l; --g > 0;) i = "xn" + g, h = d.p + "_" + i, n[h] = d.data[i], m[h] = d[i], f || (j = new la(d, i, h, j, d.rxp[i]));

                            d = d._next
                        }
                        return {
                            proxy: m,
                            end: n,
                            firstMPT: j,
                            pt: k
                        }
                    }, M.CSSPropTween = function(a, b, d, e, g, h, i, j, k, l, m) {
                        this.t = a, this.p = b, this.s = d, this.c = e, this.n = i || b, a instanceof ma || f.push(this.n), this.r = j, this.type = h || 0, k && (this.pr = k, c = !0), this.b = void 0 === l ? d : l, this.e = void 0 === m ? d + e : m, g && (this._next = g, g._prev = this)
                    }),
                    na = g.parseComplex = function(a, b, c, d, e, f, g, h, i, k) {
                        c = c || f || "", g = new ma(a, b, 0, 0, g, k ? 2 : 1, null, !1, h, c, d), d += "";
                        var l, m, n, o, r, s, t, u, v, w, y, z, A = c.split(", ").join(",").split(" "),
                            B = d.split(", ").join(",").split(" "),
                            C = A.length,
                            D = j !== !1;
                        for ((-1 !== d.indexOf(",") || -1 !== c.indexOf(",")) && (A = A.join(" ").replace(F, ", ").split(" "), B = B.join(" ").replace(F, ", ").split(" "), C = A.length), C !== B.length && (A = (f || "").split(" "), C = A.length), g.plugin = i, g.setRatio = k, l = 0; C > l; l++)
                            if (o = A[l], r = B[l], u = parseFloat(o), u || 0 === u) g.appendXtra("", u, ca(r, u), r.replace(q, ""), D && -1 !== r.indexOf("px"), !0);
                            else if (e && ("#" === o.charAt(0) || fa[o] || x.test(o))) z = "," === r.charAt(r.length - 1) ? ")," : ")", o = ha(o), r = ha(r), v = o.length + r.length > 6, v && !O && 0 === r[3] ? (g["xs" + g.l] += g.l ? " transparent" : "transparent", g.e = g.e.split(B[l]).join("transparent")) : (O || (v = !1), g.appendXtra(v ? "rgba(" : "rgb(", o[0], r[0] - o[0], ",", !0, !0).appendXtra("", o[1], r[1] - o[1], ",", !0).appendXtra("", o[2], r[2] - o[2], v ? "," : z, !0), v && (o = o.length < 4 ? 1 : o[3], g.appendXtra("", o, (r.length < 4 ? 1 : r[3]) - o, z, !1)));
                        else if (s = o.match(p)) {
                            if (t = r.match(q), !t || t.length !== s.length) return g;
                            for (n = 0, m = 0; m < s.length; m++) y = s[m], w = o.indexOf(y, n), g.appendXtra(o.substr(n, w - n), Number(y), ca(t[m], y), "", D && "px" === o.substr(w + y.length, 2), 0 === m), n = w + y.length;
                            g["xs" + g.l] += o.substr(n)
                        } else g["xs" + g.l] += g.l ? " " + o : o;
                        if (-1 !== d.indexOf("=") && g.data) {
                            for (z = g.xs0 + g.data.s, l = 1; l < g.l; l++) z += g["xs" + l] + g.data["xn" + l];
                            g.e = z + g["xs" + l]
                        }
                        return g.l || (g.type = -1, g.xs0 = g.e), g.xfirst || g
                    },
                    oa = 9;
                for (i = ma.prototype, i.l = i.pr = 0; --oa > 0;) i["xn" + oa] = 0, i["xs" + oa] = "";
                i.xs0 = "", i._next = i._prev = i.xfirst = i.data = i.plugin = i.setRatio = i.rxp = null, i.appendXtra = function(a, b, c, d, e, f) {
                    var g = this,
                        h = g.l;
                    return g["xs" + h] += f && h ? " " + a : a || "", c || 0 === h || g.plugin ? (g.l++, g.type = g.setRatio ? 2 : 1, g["xs" + g.l] = d || "", h > 0 ? (g.data["xn" + h] = b + c, g.rxp["xn" + h] = e, g["xn" + h] = b, g.plugin || (g.xfirst = new ma(g, "xn" + h, b, c, g.xfirst || g, 0, g.n, e, g.pr), g.xfirst.xs0 = 0), g) : (g.data = {
                        s: b + c
                    }, g.rxp = {}, g.s = b, g.c = c, g.r = e, g)) : (g["xs" + h] += b + (d || ""), g)
                };
                var pa = function(a, b) {
                        b = b || {}, this.p = b.prefix ? T(a) || a : a, h[a] = h[this.p] = this, this.format = b.formatter || ja(b.defaultValue, b.color, b.collapsible, b.multi), b.parser && (this.parse = b.parser), this.clrs = b.color, this.multi = b.multi, this.keyword = b.keyword, this.dflt = b.defaultValue, this.pr = b.priority || 0
                    },
                    qa = M._registerComplexSpecialProp = function(a, b, c) {
                        "object" != typeof b && (b = {
                            parser: c
                        });
                        var d, e, f = a.split(","),
                            g = b.defaultValue;
                        for (c = c || [g], d = 0; d < f.length; d++) b.prefix = 0 === d && b.prefix, b.defaultValue = c[d] || g, e = new pa(f[d], b)
                    },
                    ra = function(a) {
                        if (!h[a]) {
                            var b = a.charAt(0).toUpperCase() + a.substr(1) + "Plugin";
                            qa(a, {
                                parser: function(a, c, d, e, f, g, i) {
                                    var j = (window.GreenSockGlobals || window).com.greensock.plugins[b];
                                    return j ? (j._cssRegister(), h[d].parse(a, c, d, e, f, g, i)) : (Q("Error: " + b + " js file not loaded."), f)
                                }
                            })
                        }
                    };
                i = pa.prototype, i.parseComplex = function(a, b, c, d, e, f) {
                    var g, h, i, j, k, l, m = this.keyword;
                    if (this.multi && (F.test(c) || F.test(b) ? (h = b.replace(F, "|").split("|"), i = c.replace(F, "|").split("|")) : m && (h = [b], i = [c])), i) {
                        for (j = i.length > h.length ? i.length : h.length, g = 0; j > g; g++) b = h[g] = h[g] || this.dflt, c = i[g] = i[g] || this.dflt, m && (k = b.indexOf(m), l = c.indexOf(m), k !== l && (c = -1 === l ? i : h, c[g] += " " + m));
                        b = h.join(", "), c = i.join(", ")
                    }
                    return na(a, this.p, b, c, this.clrs, this.dflt, d, this.pr, e, f)
                }, i.parse = function(a, b, c, d, f, g) {
                    return this.parseComplex(a.style, this.format(V(a, this.p, e, !1, this.dflt)), this.format(b), f, g)
                }, g.registerSpecialProp = function(a, b, c) {
                    qa(a, {
                        parser: function(a, d, e, f, g, h) {
                            var i = new ma(a, e, 0, 0, g, 2, e, !1, c);
                            return i.plugin = h, i.setRatio = b(a, d, f._tween, e), i
                        },
                        priority: c
                    })
                };
                var sa = "scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective".split(","),
                    ta = T("transform"),
                    ua = R + "transform",
                    va = T("transformOrigin"),
                    wa = null !== T("perspective"),
                    xa = M.Transform = function() {
                        this.skewY = 0
                    },
                    ya = M.getTransform = function(a, b, c, d) {
                        if (a._gsTransform && c && !d) return a._gsTransform;
                        var e, f, h, i, j, k, l, m, n, o, p, q, r, s = c ? a._gsTransform || new xa : new xa,
                            t = s.scaleX < 0,
                            u = 2e-5,
                            v = 1e5,
                            w = 179.99,
                            x = w * G,
                            y = wa ? parseFloat(V(a, va, b, !1, "0 0 0").split(" ")[2]) || s.zOrigin || 0 : 0;
                        for (ta ? e = V(a, ua, b, !0) : a.currentStyle && (e = a.currentStyle.filter.match(D), e = e && 4 === e.length ? [e[0].substr(4), Number(e[2].substr(4)), Number(e[1].substr(4)), e[3].substr(4), s.x || 0, s.y || 0].join(",") : ""), f = (e || "").match(/(?:\-|\b)[\d\-\.e]+\b/gi) || [], h = f.length; --h > -1;) i = Number(f[h]), f[h] = (j = i - (i |= 0)) ? (j * v + (0 > j ? -.5 : .5) | 0) / v + i : i;
                        if (16 === f.length) {
                            var z = f[8],
                                A = f[9],
                                B = f[10],
                                C = f[12],
                                E = f[13],
                                F = f[14];
                            if (s.zOrigin && (F = -s.zOrigin, C = z * F - f[12], E = A * F - f[13], F = B * F + s.zOrigin - f[14]), !c || d || null == s.rotationX) {
                                var I, J, K, L, M, N, O, P = f[0],
                                    Q = f[1],
                                    R = f[2],
                                    S = f[3],
                                    T = f[4],
                                    U = f[5],
                                    W = f[6],
                                    X = f[7],
                                    Y = f[11],
                                    Z = Math.atan2(W, B),
                                    $ = -x > Z || Z > x;
                                s.rotationX = Z * H, Z && (L = Math.cos(-Z), M = Math.sin(-Z), I = T * L + z * M, J = U * L + A * M, K = W * L + B * M, z = T * -M + z * L, A = U * -M + A * L, B = W * -M + B * L, Y = X * -M + Y * L, T = I, U = J, W = K), Z = Math.atan2(z, P), s.rotationY = Z * H, Z && (N = -x > Z || Z > x, L = Math.cos(-Z), M = Math.sin(-Z), I = P * L - z * M, J = Q * L - A * M, K = R * L - B * M, A = Q * M + A * L, B = R * M + B * L, Y = S * M + Y * L, P = I, Q = J, R = K), Z = Math.atan2(Q, U), s.rotation = Z * H, Z && (O = -x > Z || Z > x, L = Math.cos(-Z), M = Math.sin(-Z), P = P * L + T * M, J = Q * L + U * M, U = Q * -M + U * L, W = R * -M + W * L, Q = J), O && $ ? s.rotation = s.rotationX = 0 : O && N ? s.rotation = s.rotationY = 0 : N && $ && (s.rotationY = s.rotationX = 0), s.scaleX = (Math.sqrt(P * P + Q * Q) * v + .5 | 0) / v, s.scaleY = (Math.sqrt(U * U + A * A) * v + .5 | 0) / v, s.scaleZ = (Math.sqrt(W * W + B * B) * v + .5 | 0) / v, s.skewX = 0, s.perspective = Y ? 1 / (0 > Y ? -Y : Y) : 0, s.x = C, s.y = E, s.z = F
                            }
                        } else if (!(wa && !d && f.length && s.x === f[4] && s.y === f[5] && (s.rotationX || s.rotationY) || void 0 !== s.x && "none" === V(a, "display", b))) {
                            var _ = f.length >= 6,
                                aa = _ ? f[0] : 1,
                                ba = f[1] || 0,
                                ca = f[2] || 0,
                                da = _ ? f[3] : 1;
                            s.x = f[4] || 0, s.y = f[5] || 0, k = Math.sqrt(aa * aa + ba * ba), l = Math.sqrt(da * da + ca * ca), m = aa || ba ? Math.atan2(ba, aa) * H : s.rotation || 0, n = ca || da ? Math.atan2(ca, da) * H + m : s.skewX || 0, o = k - Math.abs(s.scaleX || 0), p = l - Math.abs(s.scaleY || 0), Math.abs(n) > 90 && Math.abs(n) < 270 && (t ? (k *= -1, n += 0 >= m ? 180 : -180, m += 0 >= m ? 180 : -180) : (l *= -1, n += 0 >= n ? 180 : -180)), q = (m - s.rotation) % 180, r = (n - s.skewX) % 180, (void 0 === s.skewX || o > u || -u > o || p > u || -u > p || q > -w && w > q && q * v | !1 || r > -w && w > r && r * v | !1) && (s.scaleX = k, s.scaleY = l, s.rotation = m, s.skewX = n), wa && (s.rotationX = s.rotationY = s.z = 0, s.perspective = parseFloat(g.defaultTransformPerspective) || 0, s.scaleZ = 1)
                        }
                        s.zOrigin = y;
                        for (h in s) s[h] < u && s[h] > -u && (s[h] = 0);
                        return c && (a._gsTransform = s), s
                    },
                    za = function(a) {
                        var b, c, d = this.data,
                            e = -d.rotation * G,
                            f = e + d.skewX * G,
                            g = 1e5,
                            h = (Math.cos(e) * d.scaleX * g | 0) / g,
                            i = (Math.sin(e) * d.scaleX * g | 0) / g,
                            j = (Math.sin(f) * -d.scaleY * g | 0) / g,
                            k = (Math.cos(f) * d.scaleY * g | 0) / g,
                            l = this.t.style,
                            m = this.t.currentStyle;
                        if (m) {
                            c = i, i = -j, j = -c, b = m.filter, l.filter = "";
                            var n, p, q = this.t.offsetWidth,
                                r = this.t.offsetHeight,
                                s = "absolute" !== m.position,
                                v = "progid:DXImageTransform.Microsoft.Matrix(M11=" + h + ", M12=" + i + ", M21=" + j + ", M22=" + k,
                                w = d.x,
                                x = d.y;
                            if (null != d.ox && (n = (d.oxp ? q * d.ox * .01 : d.ox) - q / 2, p = (d.oyp ? r * d.oy * .01 : d.oy) - r / 2, w += n - (n * h + p * i), x += p - (n * j + p * k)), s ? (n = q / 2, p = r / 2, v += ", Dx=" + (n - (n * h + p * i) + w) + ", Dy=" + (p - (n * j + p * k) + x) + ")") : v += ", sizingMethod='auto expand')", l.filter = -1 !== b.indexOf("DXImageTransform.Microsoft.Matrix(") ? b.replace(E, v) : v + " " + b, (0 === a || 1 === a) && 1 === h && 0 === i && 0 === j && 1 === k && (s && -1 === v.indexOf("Dx=0, Dy=0") || u.test(b) && 100 !== parseFloat(RegExp.$1) || -1 === b.indexOf("gradient(" && b.indexOf("Alpha")) && l.removeAttribute("filter")), !s) {
                                var y, z, A, B = 8 > o ? 1 : -1;
                                for (n = d.ieOffsetX || 0, p = d.ieOffsetY || 0, d.ieOffsetX = Math.round((q - ((0 > h ? -h : h) * q + (0 > i ? -i : i) * r)) / 2 + w), d.ieOffsetY = Math.round((r - ((0 > k ? -k : k) * r + (0 > j ? -j : j) * q)) / 2 + x), oa = 0; 4 > oa; oa++) z = _[oa], y = m[z], c = -1 !== y.indexOf("px") ? parseFloat(y) : W(this.t, z, parseFloat(y), y.replace(t, "")) || 0, A = c !== d[z] ? 2 > oa ? -d.ieOffsetX : -d.ieOffsetY : 2 > oa ? n - d.ieOffsetX : p - d.ieOffsetY, l[z] = (d[z] = Math.round(c - A * (0 === oa || 2 === oa ? 1 : B))) + "px"
                            }
                        }
                    },
                    Aa = M.set3DTransformRatio = function(a) {
                        var b, c, d, e, f, g, h, i, j, k, l, n, o, p, q, r, s, t, u, v, w, x, y, z = this.data,
                            A = this.t.style,
                            B = z.rotation * G,
                            C = z.scaleX,
                            D = z.scaleY,
                            E = z.scaleZ,
                            F = z.perspective;
                        if ((1 === a || 0 === a) && "auto" === z.force3D && !(z.rotationY || z.rotationX || 1 !== E || F || z.z)) return void Ba.call(this, a);
                        if (m) {
                            var H = 1e-4;
                            H > C && C > -H && (C = E = 2e-5), H > D && D > -H && (D = E = 2e-5), !F || z.z || z.rotationX || z.rotationY || (F = 0)
                        }
                        if (B || z.skewX) t = Math.cos(B), u = Math.sin(B), b = t, f = u, z.skewX && (B -= z.skewX * G, t = Math.cos(B), u = Math.sin(B), "simple" === z.skewType && (v = Math.tan(z.skewX * G), v = Math.sqrt(1 + v * v), t *= v, u *= v)), c = -u, g = t;
                        else {
                            if (!(z.rotationY || z.rotationX || 1 !== E || F)) return void(A[ta] = "translate3d(" + z.x + "px," + z.y + "px," + z.z + "px)" + (1 !== C || 1 !== D ? " scale(" + C + "," + D + ")" : ""));
                            b = g = 1, c = f = 0
                        }
                        l = 1, d = e = h = i = j = k = n = o = p = 0, q = F ? -1 / F : 0, r = z.zOrigin, s = 1e5, B = z.rotationY * G, B && (t = Math.cos(B), u = Math.sin(B), j = l * -u, o = q * -u, d = b * u, h = f * u, l *= t, q *= t, b *= t, f *= t), B = z.rotationX * G, B && (t = Math.cos(B), u = Math.sin(B), v = c * t + d * u, w = g * t + h * u, x = k * t + l * u, y = p * t + q * u, d = c * -u + d * t, h = g * -u + h * t, l = k * -u + l * t, q = p * -u + q * t, c = v, g = w, k = x, p = y), 1 !== E && (d *= E, h *= E, l *= E, q *= E), 1 !== D && (c *= D, g *= D, k *= D, p *= D), 1 !== C && (b *= C, f *= C, j *= C, o *= C), r && (n -= r, e = d * n, i = h * n, n = l * n + r), e = (v = (e += z.x) - (e |= 0)) ? (v * s + (0 > v ? -.5 : .5) | 0) / s + e : e, i = (v = (i += z.y) - (i |= 0)) ? (v * s + (0 > v ? -.5 : .5) | 0) / s + i : i, n = (v = (n += z.z) - (n |= 0)) ? (v * s + (0 > v ? -.5 : .5) | 0) / s + n : n, A[ta] = "matrix3d(" + [(b * s | 0) / s, (f * s | 0) / s, (j * s | 0) / s, (o * s | 0) / s, (c * s | 0) / s, (g * s | 0) / s, (k * s | 0) / s, (p * s | 0) / s, (d * s | 0) / s, (h * s | 0) / s, (l * s | 0) / s, (q * s | 0) / s, e, i, n, F ? 1 + -n / F : 1].join(",") + ")"
                    },
                    Ba = M.set2DTransformRatio = function(a) {
                        var b, c, d, e, f, g = this.data,
                            h = this.t,
                            i = h.style;
                        return g.rotationX || g.rotationY || g.z || g.force3D === !0 || "auto" === g.force3D && 1 !== a && 0 !== a ? (this.setRatio = Aa, void Aa.call(this, a)) : void(g.rotation || g.skewX ? (b = g.rotation * G, c = b - g.skewX * G, d = 1e5, e = g.scaleX * d, f = g.scaleY * d, i[ta] = "matrix(" + (Math.cos(b) * e | 0) / d + "," + (Math.sin(b) * e | 0) / d + "," + (Math.sin(c) * -f | 0) / d + "," + (Math.cos(c) * f | 0) / d + "," + g.x + "," + g.y + ")") : i[ta] = "matrix(" + g.scaleX + ",0,0," + g.scaleY + "," + g.x + "," + g.y + ")")
                    };
                qa("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType", {
                    parser: function(a, b, c, d, f, h, i) {
                        if (d._transform) return f;
                        var j, k, l, m, n, o, p, q = d._transform = ya(a, e, !0, i.parseTransform),
                            r = a.style,
                            s = 1e-6,
                            t = sa.length,
                            u = i,
                            v = {};
                        if ("string" == typeof u.transform && ta) l = K.style, l[ta] = u.transform, l.display = "block", l.position = "absolute", J.body.appendChild(K), j = ya(K, null, !1), J.body.removeChild(K);
                        else if ("object" == typeof u) {
                            if (j = {
                                    scaleX: da(null != u.scaleX ? u.scaleX : u.scale, q.scaleX),
                                    scaleY: da(null != u.scaleY ? u.scaleY : u.scale, q.scaleY),
                                    scaleZ: da(u.scaleZ, q.scaleZ),
                                    x: da(u.x, q.x),
                                    y: da(u.y, q.y),
                                    z: da(u.z, q.z),
                                    perspective: da(u.transformPerspective, q.perspective)
                                }, p = u.directionalRotation, null != p)
                                if ("object" == typeof p)
                                    for (l in p) u[l] = p[l];
                                else u.rotation = p;
                            j.rotation = ea("rotation" in u ? u.rotation : "shortRotation" in u ? u.shortRotation + "_short" : "rotationZ" in u ? u.rotationZ : q.rotation, q.rotation, "rotation", v), wa && (j.rotationX = ea("rotationX" in u ? u.rotationX : "shortRotationX" in u ? u.shortRotationX + "_short" : q.rotationX || 0, q.rotationX, "rotationX", v), j.rotationY = ea("rotationY" in u ? u.rotationY : "shortRotationY" in u ? u.shortRotationY + "_short" : q.rotationY || 0, q.rotationY, "rotationY", v)), j.skewX = null == u.skewX ? q.skewX : ea(u.skewX, q.skewX), j.skewY = null == u.skewY ? q.skewY : ea(u.skewY, q.skewY), (k = j.skewY - q.skewY) && (j.skewX += k, j.rotation += k)
                        }
                        for (wa && null != u.force3D && (q.force3D = u.force3D, o = !0), q.skewType = u.skewType || q.skewType || g.defaultSkewType, n = q.force3D || q.z || q.rotationX || q.rotationY || j.z || j.rotationX || j.rotationY || j.perspective, n || null == u.scale || (j.scaleZ = 1); --t > -1;) c = sa[t], m = j[c] - q[c], (m > s || -s > m || null != I[c]) && (o = !0, f = new ma(q, c, q[c], m, f), c in v && (f.e = v[c]), f.xs0 = 0, f.plugin = h, d._overwriteProps.push(f.n));
                        return m = u.transformOrigin, (m || wa && n && q.zOrigin) && (ta ? (o = !0, c = va, m = (m || V(a, c, e, !1, "50% 50%")) + "", f = new ma(r, c, 0, 0, f, -1, "transformOrigin"), f.b = r[c], f.plugin = h, wa ? (l = q.zOrigin, m = m.split(" "), q.zOrigin = (m.length > 2 && (0 === l || "0px" !== m[2]) ? parseFloat(m[2]) : l) || 0, f.xs0 = f.e = m[0] + " " + (m[1] || "50%") + " 0px", f = new ma(q, "zOrigin", 0, 0, f, -1, f.n), f.b = l, f.xs0 = f.e = q.zOrigin) : f.xs0 = f.e = m) : ba(m + "", q)), o && (d._transformType = n || 3 === this._transformType ? 3 : 2), f
                    },
                    prefix: !0
                }), qa("boxShadow", {
                    defaultValue: "0px 0px 0px 0px #999",
                    prefix: !0,
                    color: !0,
                    multi: !0,
                    keyword: "inset"
                }), qa("borderRadius", {
                    defaultValue: "0px",
                    parser: function(a, b, c, f, g) {
                        b = this.format(b);
                        var h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x = ["borderTopLeftRadius", "borderTopRightRadius", "borderBottomRightRadius", "borderBottomLeftRadius"],
                            y = a.style;
                        for (p = parseFloat(a.offsetWidth), q = parseFloat(a.offsetHeight), h = b.split(" "), i = 0; i < x.length; i++) this.p.indexOf("border") && (x[i] = T(x[i])), l = k = V(a, x[i], e, !1, "0px"), -1 !== l.indexOf(" ") && (k = l.split(" "), l = k[0], k = k[1]), m = j = h[i], n = parseFloat(l), s = l.substr((n + "").length), t = "=" === m.charAt(1), t ? (o = parseInt(m.charAt(0) + "1", 10), m = m.substr(2), o *= parseFloat(m), r = m.substr((o + "").length - (0 > o ? 1 : 0)) || "") : (o = parseFloat(m), r = m.substr((o + "").length)), "" === r && (r = d[c] || s), r !== s && (u = W(a, "borderLeft", n, s), v = W(a, "borderTop", n, s), "%" === r ? (l = u / p * 100 + "%", k = v / q * 100 + "%") : "em" === r ? (w = W(a, "borderLeft", 1, "em"), l = u / w + "em", k = v / w + "em") : (l = u + "px", k = v + "px"), t && (m = parseFloat(l) + o + r, j = parseFloat(k) + o + r)), g = na(y, x[i], l + " " + k, m + " " + j, !1, "0px", g);
                        return g
                    },
                    prefix: !0,
                    formatter: ja("0px 0px 0px 0px", !1, !0)
                }), qa("backgroundPosition", {
                    defaultValue: "0 0",
                    parser: function(a, b, c, d, f, g) {
                        var h, i, j, k, l, m, n = "background-position",
                            p = e || U(a, null),
                            q = this.format((p ? o ? p.getPropertyValue(n + "-x") + " " + p.getPropertyValue(n + "-y") : p.getPropertyValue(n) : a.currentStyle.backgroundPositionX + " " + a.currentStyle.backgroundPositionY) || "0 0"),
                            r = this.format(b);
                        if (-1 !== q.indexOf("%") != (-1 !== r.indexOf("%")) && (m = V(a, "backgroundImage").replace(A, ""), m && "none" !== m)) {
                            for (h = q.split(" "), i = r.split(" "), L.setAttribute("src", m), j = 2; --j > -1;) q = h[j], k = -1 !== q.indexOf("%"), k !== (-1 !== i[j].indexOf("%")) && (l = 0 === j ? a.offsetWidth - L.width : a.offsetHeight - L.height, h[j] = k ? parseFloat(q) / 100 * l + "px" : parseFloat(q) / l * 100 + "%");
                            q = h.join(" ")
                        }
                        return this.parseComplex(a.style, q, r, f, g)
                    },
                    formatter: ba
                }), qa("backgroundSize", {
                    defaultValue: "0 0",
                    formatter: ba
                }), qa("perspective", {
                    defaultValue: "0px",
                    prefix: !0
                }), qa("perspectiveOrigin", {
                    defaultValue: "50% 50%",
                    prefix: !0
                }), qa("transformStyle", {
                    prefix: !0
                }), qa("backfaceVisibility", {
                    prefix: !0
                }), qa("userSelect", {
                    prefix: !0
                }), qa("margin", {
                    parser: ka("marginTop,marginRight,marginBottom,marginLeft")
                }), qa("padding", {
                    parser: ka("paddingTop,paddingRight,paddingBottom,paddingLeft")
                }), qa("clip", {
                    defaultValue: "rect(0px,0px,0px,0px)",
                    parser: function(a, b, c, d, f, g) {
                        var h, i, j;
                        return 9 > o ? (i = a.currentStyle, j = 8 > o ? " " : ",", h = "rect(" + i.clipTop + j + i.clipRight + j + i.clipBottom + j + i.clipLeft + ")", b = this.format(b).split(",").join(j)) : (h = this.format(V(a, this.p, e, !1, this.dflt)), b = this.format(b)), this.parseComplex(a.style, h, b, f, g)
                    }
                }), qa("textShadow", {
                    defaultValue: "0px 0px 0px #999",
                    color: !0,
                    multi: !0
                }), qa("autoRound,strictUnits", {
                    parser: function(a, b, c, d, e) {
                        return e
                    }
                }), qa("border", {
                    defaultValue: "0px solid #000",
                    parser: function(a, b, c, d, f, g) {
                        return this.parseComplex(a.style, this.format(V(a, "borderTopWidth", e, !1, "0px") + " " + V(a, "borderTopStyle", e, !1, "solid") + " " + V(a, "borderTopColor", e, !1, "#000")), this.format(b), f, g)
                    },
                    color: !0,
                    formatter: function(a) {
                        var b = a.split(" ");
                        return b[0] + " " + (b[1] || "solid") + " " + (a.match(ia) || ["#000"])[0]
                    }
                }), qa("borderWidth", {
                    parser: ka("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")
                }), qa("float,cssFloat,styleFloat", {
                    parser: function(a, b, c, d, e) {
                        var f = a.style,
                            g = "cssFloat" in f ? "cssFloat" : "styleFloat";
                        return new ma(f, g, 0, 0, e, -1, c, !1, 0, f[g], b)
                    }
                });
                var Ca = function(a) {
                    var b, c = this.t,
                        d = c.filter || V(this.data, "filter"),
                        e = this.s + this.c * a | 0;
                    100 === e && (-1 === d.indexOf("atrix(") && -1 === d.indexOf("radient(") && -1 === d.indexOf("oader(") ? (c.removeAttribute("filter"), b = !V(this.data, "filter")) : (c.filter = d.replace(w, ""), b = !0)), b || (this.xn1 && (c.filter = d = d || "alpha(opacity=" + e + ")"), -1 === d.indexOf("pacity") ? 0 === e && this.xn1 || (c.filter = d + " alpha(opacity=" + e + ")") : c.filter = d.replace(u, "opacity=" + e))
                };
                qa("opacity,alpha,autoAlpha", {
                    defaultValue: "1",
                    parser: function(a, b, c, d, f, g) {
                        var h = parseFloat(V(a, "opacity", e, !1, "1")),
                            i = a.style,
                            j = "autoAlpha" === c;
                        return "string" == typeof b && "=" === b.charAt(1) && (b = ("-" === b.charAt(0) ? -1 : 1) * parseFloat(b.substr(2)) + h), j && 1 === h && "hidden" === V(a, "visibility", e) && 0 !== b && (h = 0), O ? f = new ma(i, "opacity", h, b - h, f) : (f = new ma(i, "opacity", 100 * h, 100 * (b - h), f), f.xn1 = j ? 1 : 0, i.zoom = 1, f.type = 2, f.b = "alpha(opacity=" + f.s + ")", f.e = "alpha(opacity=" + (f.s + f.c) + ")", f.data = a, f.plugin = g, f.setRatio = Ca), j && (f = new ma(i, "visibility", 0, 0, f, -1, null, !1, 0, 0 !== h ? "inherit" : "hidden", 0 === b ? "hidden" : "inherit"), f.xs0 = "inherit", d._overwriteProps.push(f.n), d._overwriteProps.push(c)), f
                    }
                });
                var Da = function(a, b) {
                        b && (a.removeProperty ? ("ms" === b.substr(0, 2) && (b = "M" + b.substr(1)), a.removeProperty(b.replace(y, "-$1").toLowerCase())) : a.removeAttribute(b))
                    },
                    Ea = function(a) {
                        if (this.t._gsClassPT = this, 1 === a || 0 === a) {
                            this.t.setAttribute("class", 0 === a ? this.b : this.e);
                            for (var b = this.data, c = this.t.style; b;) b.v ? c[b.p] = b.v : Da(c, b.p), b = b._next;
                            1 === a && this.t._gsClassPT === this && (this.t._gsClassPT = null)
                        } else this.t.getAttribute("class") !== this.e && this.t.setAttribute("class", this.e)
                    };
                qa("className", {
                    parser: function(a, b, d, f, g, h, i) {
                        var j, k, l, m, n, o = a.getAttribute("class") || "",
                            p = a.style.cssText;
                        if (g = f._classNamePT = new ma(a, d, 0, 0, g, 2), g.setRatio = Ea, g.pr = -11, c = !0, g.b = o, k = Y(a, e), l = a._gsClassPT) {
                            for (m = {}, n = l.data; n;) m[n.p] = 1, n = n._next;
                            l.setRatio(1)
                        }
                        return a._gsClassPT = g, g.e = "=" !== b.charAt(1) ? b : o.replace(new RegExp("\\s*\\b" + b.substr(2) + "\\b"), "") + ("+" === b.charAt(0) ? " " + b.substr(2) : ""), f._tween._duration && (a.setAttribute("class", g.e), j = Z(a, k, Y(a), i, m), a.setAttribute("class", o), g.data = j.firstMPT, a.style.cssText = p, g = g.xfirst = f.parse(a, j.difs, g, h)), g
                    }
                });
                var Fa = function(a) {
                    if ((1 === a || 0 === a) && this.data._totalTime === this.data._totalDuration && "isFromStart" !== this.data.data) {
                        var b, c, d, e, f = this.t.style,
                            g = h.transform.parse;
                        if ("all" === this.e) f.cssText = "", e = !0;
                        else
                            for (b = this.e.split(","), d = b.length; --d > -1;) c = b[d], h[c] && (h[c].parse === g ? e = !0 : c = "transformOrigin" === c ? va : h[c].p), Da(f, c);
                        e && (Da(f, ta), this.t._gsTransform && delete this.t._gsTransform)
                    }
                };
                for (qa("clearProps", {
                        parser: function(a, b, d, e, f) {
                            return f = new ma(a, d, 0, 0, f, 2), f.setRatio = Fa, f.e = b, f.pr = -10, f.data = e._tween, c = !0, f
                        }
                    }), i = "bezier,throwProps,physicsProps,physics2D".split(","), oa = i.length; oa--;) ra(i[oa]);
                i = g.prototype, i._firstPT = null, i._onInitTween = function(a, b, h) {
                    if (!a.nodeType) return !1;
                    this._target = a, this._tween = h, this._vars = b, j = b.autoRound, c = !1, d = b.suffixMap || g.suffixMap, e = U(a, ""), f = this._overwriteProps;
                    var i, m, o, p, q, r, s, t, u, w = a.style;
                    if (k && "" === w.zIndex && (i = V(a, "zIndex", e), ("auto" === i || "" === i) && this._addLazySet(w, "zIndex", 0)), "string" == typeof b && (p = w.cssText, i = Y(a, e), w.cssText = p + ";" + b, i = Z(a, i, Y(a)).difs, !O && v.test(b) && (i.opacity = parseFloat(RegExp.$1)), b = i, w.cssText = p), this._firstPT = m = this.parse(a, b, null), this._transformType) {
                        for (u = 3 === this._transformType, ta ? l && (k = !0, "" === w.zIndex && (s = V(a, "zIndex", e), ("auto" === s || "" === s) && this._addLazySet(w, "zIndex", 0)), n && this._addLazySet(w, "WebkitBackfaceVisibility", this._vars.WebkitBackfaceVisibility || (u ? "visible" : "hidden"))) : w.zoom = 1, o = m; o && o._next;) o = o._next;
                        t = new ma(a, "transform", 0, 0, null, 2), this._linkCSSP(t, null, o), t.setRatio = u && wa ? Aa : ta ? Ba : za, t.data = this._transform || ya(a, e, !0), f.pop()
                    }
                    if (c) {
                        for (; m;) {
                            for (r = m._next, o = p; o && o.pr > m.pr;) o = o._next;
                            (m._prev = o ? o._prev : q) ? m._prev._next = m: p = m, (m._next = o) ? o._prev = m : q = m, m = r
                        }
                        this._firstPT = p
                    }
                    return !0
                }, i.parse = function(a, b, c, f) {
                    var g, i, k, l, m, n, o, p, q, r, s = a.style;
                    for (g in b) n = b[g], i = h[g], i ? c = i.parse(a, n, g, this, c, f, b) : (m = V(a, g, e) + "", q = "string" == typeof n, "color" === g || "fill" === g || "stroke" === g || -1 !== g.indexOf("Color") || q && x.test(n) ? (q || (n = ha(n), n = (n.length > 3 ? "rgba(" : "rgb(") + n.join(",") + ")"), c = na(s, g, m, n, !0, "transparent", c, 0, f)) : !q || -1 === n.indexOf(" ") && -1 === n.indexOf(",") ? (k = parseFloat(m), o = k || 0 === k ? m.substr((k + "").length) : "", ("" === m || "auto" === m) && ("width" === g || "height" === g ? (k = aa(a, g, e), o = "px") : "left" === g || "top" === g ? (k = X(a, g, e), o = "px") : (k = "opacity" !== g ? 0 : 1, o = "")), r = q && "=" === n.charAt(1), r ? (l = parseInt(n.charAt(0) + "1", 10), n = n.substr(2), l *= parseFloat(n), p = n.replace(t, "")) : (l = parseFloat(n), p = q ? n.substr((l + "").length) || "" : ""), "" === p && (p = g in d ? d[g] : o), n = l || 0 === l ? (r ? l + k : l) + p : b[g], o !== p && "" !== p && (l || 0 === l) && k && (k = W(a, g, k, o), "%" === p ? (k /= W(a, g, 100, "%") / 100, b.strictUnits !== !0 && (m = k + "%")) : "em" === p ? k /= W(a, g, 1, "em") : "px" !== p && (l = W(a, g, l, p), p = "px"), r && (l || 0 === l) && (n = l + k + p)), r && (l += k), !k && 0 !== k || !l && 0 !== l ? void 0 !== s[g] && (n || n + "" != "NaN" && null != n) ? (c = new ma(s, g, l || k || 0, 0, c, -1, g, !1, 0, m, n), c.xs0 = "none" !== n || "display" !== g && -1 === g.indexOf("Style") ? n : m) : Q("invalid " + g + " tween value: " + b[g]) : (c = new ma(s, g, k, l - k, c, 0, g, j !== !1 && ("px" === p || "zIndex" === g), 0, m, n), c.xs0 = p)) : c = na(s, g, m, n, !0, null, c, 0, f)), f && c && !c.plugin && (c.plugin = f);
                    return c
                }, i.setRatio = function(a) {
                    var b, c, d, e = this._firstPT,
                        f = 1e-6;
                    if (1 !== a || this._tween._time !== this._tween._duration && 0 !== this._tween._time)
                        if (a || this._tween._time !== this._tween._duration && 0 !== this._tween._time || this._tween._rawPrevTime === -1e-6)
                            for (; e;) {
                                if (b = e.c * a + e.s, e.r ? b = Math.round(b) : f > b && b > -f && (b = 0), e.type)
                                    if (1 === e.type)
                                        if (d = e.l, 2 === d) e.t[e.p] = e.xs0 + b + e.xs1 + e.xn1 + e.xs2;
                                        else if (3 === d) e.t[e.p] = e.xs0 + b + e.xs1 + e.xn1 + e.xs2 + e.xn2 + e.xs3;
                                else if (4 === d) e.t[e.p] = e.xs0 + b + e.xs1 + e.xn1 + e.xs2 + e.xn2 + e.xs3 + e.xn3 + e.xs4;
                                else if (5 === d) e.t[e.p] = e.xs0 + b + e.xs1 + e.xn1 + e.xs2 + e.xn2 + e.xs3 + e.xn3 + e.xs4 + e.xn4 + e.xs5;
                                else {
                                    for (c = e.xs0 + b + e.xs1, d = 1; d < e.l; d++) c += e["xn" + d] + e["xs" + (d + 1)];
                                    e.t[e.p] = c
                                } else -1 === e.type ? e.t[e.p] = e.xs0 : e.setRatio && e.setRatio(a);
                                else e.t[e.p] = b + e.xs0;
                                e = e._next
                            } else
                                for (; e;) 2 !== e.type ? e.t[e.p] = e.b : e.setRatio(a), e = e._next;
                        else
                            for (; e;) 2 !== e.type ? e.t[e.p] = e.e : e.setRatio(a), e = e._next
                }, i._enableTransforms = function(a) {
                    this._transformType = a || 3 === this._transformType ? 3 : 2, this._transform = this._transform || ya(this._target, e, !0)
                };
                var Ga = function() {
                    this.t[this.p] = this.e, this.data._linkCSSP(this, this._next, null, !0)
                };
                i._addLazySet = function(a, b, c) {
                    var d = this._firstPT = new ma(a, b, 0, 0, this._firstPT, 2);
                    d.e = c, d.setRatio = Ga, d.data = this
                }, i._linkCSSP = function(a, b, c, d) {
                    return a && (b && (b._prev = a), a._next && (a._next._prev = a._prev), a._prev ? a._prev._next = a._next : this._firstPT === a && (this._firstPT = a._next, d = !0), c ? c._next = a : d || null !== this._firstPT || (this._firstPT = a), a._next = b, a._prev = c), a
                }, i._kill = function(b) {
                    var c, d, e, f = b;
                    if (b.autoAlpha || b.alpha) {
                        f = {};
                        for (d in b) f[d] = b[d];
                        f.opacity = 1, f.autoAlpha && (f.visibility = 1)
                    }
                    return b.className && (c = this._classNamePT) && (e = c.xfirst, e && e._prev ? this._linkCSSP(e._prev, c._next, e._prev._prev) : e === this._firstPT && (this._firstPT = c._next), c._next && this._linkCSSP(c._next, c._next._next, e._prev), this._classNamePT = null), a.prototype._kill.call(this, f)
                };
                var Ha = function(a, b, c) {
                    var d, e, f, g;
                    if (a.slice)
                        for (e = a.length; --e > -1;) Ha(a[e], b, c);
                    else
                        for (d = a.childNodes, e = d.length; --e > -1;) f = d[e], g = f.type, f.style && (b.push(Y(f)), c && c.push(f)), 1 !== g && 9 !== g && 11 !== g || !f.childNodes.length || Ha(f, b, c)
                };
                return g.cascadeTo = function(a, c, d) {
                    var e, f, g, h = b.to(a, c, d),
                        i = [h],
                        j = [],
                        k = [],
                        l = [],
                        m = b._internals.reservedProps;
                    for (a = h._targets || h.target, Ha(a, j, l), h.render(c, !0), Ha(a, k), h.render(0, !0), h._enabled(!0), e = l.length; --e > -1;)
                        if (f = Z(l[e], j[e], k[e]), f.firstMPT) {
                            f = f.difs;
                            for (g in d) m[g] && (f[g] = d[g]);
                            i.push(b.to(l[e], c, f))
                        }
                    return i
                }, a.activate([g]), g
            }, !0),
            function() {
                var a = window._gsDefine.plugin({
                        propName: "roundProps",
                        priority: -1,
                        API: 2,
                        init: function(a, b, c) {
                            return this._tween = c, !0
                        }
                    }),
                    b = a.prototype;
                b._onInitAllProps = function() {
                    for (var a, b, c, d = this._tween, e = d.vars.roundProps instanceof Array ? d.vars.roundProps : d.vars.roundProps.split(","), f = e.length, g = {}, h = d._propLookup.roundProps; --f > -1;) g[e[f]] = 1;
                    for (f = e.length; --f > -1;)
                        for (a = e[f], b = d._firstPT; b;) c = b._next, b.pg ? b.t._roundProps(g, !0) : b.n === a && (this._add(b.t, a, b.s, b.c), c && (c._prev = b._prev), b._prev ? b._prev._next = c : d._firstPT === b && (d._firstPT = c), b._next = b._prev = null, d._propLookup[a] = h), b = c;
                    return !1
                }, b._add = function(a, b, c, d) {
                    this._addTween(a, b, c, c + d, b, !0), this._overwriteProps.push(b)
                }
            }(), window._gsDefine.plugin({
                propName: "attr",
                API: 2,
                version: "0.3.2",
                init: function(a, b) {
                    var c, d, e;
                    if ("function" != typeof a.setAttribute) return !1;
                    this._target = a, this._proxy = {}, this._start = {}, this._end = {};
                    for (c in b) this._start[c] = this._proxy[c] = d = a.getAttribute(c), e = this._addTween(this._proxy, c, parseFloat(d), b[c], c), this._end[c] = e ? e.s + e.c : b[c], this._overwriteProps.push(c);
                    return !0
                },
                set: function(a) {
                    this._super.setRatio.call(this, a);
                    for (var b, c = this._overwriteProps, d = c.length, e = 1 === a ? this._end : a ? this._proxy : this._start; --d > -1;) b = c[d], this._target.setAttribute(b, e[b] + "")
                }
            }), window._gsDefine.plugin({
                propName: "directionalRotation",
                API: 2,
                version: "0.2.0",
                init: function(a, b) {
                    "object" != typeof b && (b = {
                        rotation: b
                    }), this.finals = {};
                    var c, d, e, f, g, h, i = b.useRadians === !0 ? 2 * Math.PI : 360,
                        j = 1e-6;
                    for (c in b) "useRadians" !== c && (h = (b[c] + "").split("_"), d = h[0], e = parseFloat("function" != typeof a[c] ? a[c] : a[c.indexOf("set") || "function" != typeof a["get" + c.substr(3)] ? c : "get" + c.substr(3)]()), f = this.finals[c] = "string" == typeof d && "=" === d.charAt(1) ? e + parseInt(d.charAt(0) + "1", 10) * Number(d.substr(2)) : Number(d) || 0, g = f - e, h.length && (d = h.join("_"), -1 !== d.indexOf("short") && (g %= i, g !== g % (i / 2) && (g = 0 > g ? g + i : g - i)), -1 !== d.indexOf("_cw") && 0 > g ? g = (g + 9999999999 * i) % i - (g / i | 0) * i : -1 !== d.indexOf("ccw") && g > 0 && (g = (g - 9999999999 * i) % i - (g / i | 0) * i)), (g > j || -j > g) && (this._addTween(a, c, e, e + g, c), this._overwriteProps.push(c)));
                    return !0
                },
                set: function(a) {
                    var b;
                    if (1 !== a) this._super.setRatio.call(this, a);
                    else
                        for (b = this._firstPT; b;) b.f ? b.t[b.p](this.finals[b.p]) : b.t[b.p] = this.finals[b.p], b = b._next
                }
            })._autoCSS = !0, window._gsDefine("easing.Back", ["easing.Ease"], function(a) {
                var b, c, d, e = window.GreenSockGlobals || window,
                    f = e.com.greensock,
                    g = 2 * Math.PI,
                    h = Math.PI / 2,
                    i = f._class,
                    j = function(b, c) {
                        var d = i("easing." + b, function() {}, !0),
                            e = d.prototype = new a;
                        return e.constructor = d, e.getRatio = c, d
                    },
                    k = a.register || function() {},
                    l = function(a, b, c, d) {
                        var e = i("easing." + a, {
                            easeOut: new b,
                            easeIn: new c,
                            easeInOut: new d
                        }, !0);
                        return k(e, a), e
                    },
                    m = function(a, b, c) {
                        this.t = a, this.v = b, c && (this.next = c, c.prev = this, this.c = c.v - b, this.gap = c.t - a)
                    },
                    n = function(b, c) {
                        var d = i("easing." + b, function(a) {
                                this._p1 = a || 0 === a ? a : 1.70158, this._p2 = 1.525 * this._p1
                            }, !0),
                            e = d.prototype = new a;
                        return e.constructor = d, e.getRatio = c, e.config = function(a) {
                            return new d(a)
                        }, d
                    },
                    o = l("Back", n("BackOut", function(a) {
                        return (a -= 1) * a * ((this._p1 + 1) * a + this._p1) + 1
                    }), n("BackIn", function(a) {
                        return a * a * ((this._p1 + 1) * a - this._p1)
                    }), n("BackInOut", function(a) {
                        return (a *= 2) < 1 ? .5 * a * a * ((this._p2 + 1) * a - this._p2) : .5 * ((a -= 2) * a * ((this._p2 + 1) * a + this._p2) + 2)
                    })),
                    p = i("easing.SlowMo", function(a, b, c) {
                        b = b || 0 === b ? b : .7, null == a ? a = .7 : a > 1 && (a = 1), this._p = 1 !== a ? b : 0, this._p1 = (1 - a) / 2, this._p2 = a, this._p3 = this._p1 + this._p2, this._calcEnd = c === !0
                    }, !0),
                    q = p.prototype = new a;
                return q.constructor = p, q.getRatio = function(a) {
                    var b = a + (.5 - a) * this._p;
                    return a < this._p1 ? this._calcEnd ? 1 - (a = 1 - a / this._p1) * a : b - (a = 1 - a / this._p1) * a * a * a * b : a > this._p3 ? this._calcEnd ? 1 - (a = (a - this._p3) / this._p1) * a : b + (a - b) * (a = (a - this._p3) / this._p1) * a * a * a : this._calcEnd ? 1 : b
                }, p.ease = new p(.7, .7), q.config = p.config = function(a, b, c) {
                    return new p(a, b, c)
                }, b = i("easing.SteppedEase", function(a) {
                    a = a || 1, this._p1 = 1 / a, this._p2 = a + 1
                }, !0), q = b.prototype = new a, q.constructor = b, q.getRatio = function(a) {
                    return 0 > a ? a = 0 : a >= 1 && (a = .999999999), (this._p2 * a >> 0) * this._p1
                }, q.config = b.config = function(a) {
                    return new b(a)
                }, c = i("easing.RoughEase", function(b) {
                    b = b || {};
                    for (var c, d, e, f, g, h, i = b.taper || "none", j = [], k = 0, l = 0 | (b.points || 20), n = l, o = b.randomize !== !1, p = b.clamp === !0, q = b.template instanceof a ? b.template : null, r = "number" == typeof b.strength ? .4 * b.strength : .4; --n > -1;) c = o ? Math.random() : 1 / l * n, d = q ? q.getRatio(c) : c, "none" === i ? e = r : "out" === i ? (f = 1 - c, e = f * f * r) : "in" === i ? e = c * c * r : .5 > c ? (f = 2 * c, e = f * f * .5 * r) : (f = 2 * (1 - c), e = f * f * .5 * r), o ? d += Math.random() * e - .5 * e : n % 2 ? d += .5 * e : d -= .5 * e, p && (d > 1 ? d = 1 : 0 > d && (d = 0)), j[k++] = {
                        x: c,
                        y: d
                    };
                    for (j.sort(function(a, b) {
                            return a.x - b.x
                        }), h = new m(1, 1, null), n = l; --n > -1;) g = j[n], h = new m(g.x, g.y, h);
                    this._prev = new m(0, 0, 0 !== h.t ? h : h.next)
                }, !0), q = c.prototype = new a, q.constructor = c, q.getRatio = function(a) {
                    var b = this._prev;
                    if (a > b.t) {
                        for (; b.next && a >= b.t;) b = b.next;
                        b = b.prev
                    } else
                        for (; b.prev && a <= b.t;) b = b.prev;
                    return this._prev = b, b.v + (a - b.t) / b.gap * b.c
                }, q.config = function(a) {
                    return new c(a)
                }, c.ease = new c, l("Bounce", j("BounceOut", function(a) {
                    return 1 / 2.75 > a ? 7.5625 * a * a : 2 / 2.75 > a ? 7.5625 * (a -= 1.5 / 2.75) * a + .75 : 2.5 / 2.75 > a ? 7.5625 * (a -= 2.25 / 2.75) * a + .9375 : 7.5625 * (a -= 2.625 / 2.75) * a + .984375
                }), j("BounceIn", function(a) {
                    return (a = 1 - a) < 1 / 2.75 ? 1 - 7.5625 * a * a : 2 / 2.75 > a ? 1 - (7.5625 * (a -= 1.5 / 2.75) * a + .75) : 2.5 / 2.75 > a ? 1 - (7.5625 * (a -= 2.25 / 2.75) * a + .9375) : 1 - (7.5625 * (a -= 2.625 / 2.75) * a + .984375)
                }), j("BounceInOut", function(a) {
                    var b = .5 > a;
                    return a = b ? 1 - 2 * a : 2 * a - 1, a = 1 / 2.75 > a ? 7.5625 * a * a : 2 / 2.75 > a ? 7.5625 * (a -= 1.5 / 2.75) * a + .75 : 2.5 / 2.75 > a ? 7.5625 * (a -= 2.25 / 2.75) * a + .9375 : 7.5625 * (a -= 2.625 / 2.75) * a + .984375, b ? .5 * (1 - a) : .5 * a + .5
                })), l("Circ", j("CircOut", function(a) {
                    return Math.sqrt(1 - (a -= 1) * a)
                }), j("CircIn", function(a) {
                    return -(Math.sqrt(1 - a * a) - 1)
                }), j("CircInOut", function(a) {
                    return (a *= 2) < 1 ? -.5 * (Math.sqrt(1 - a * a) - 1) : .5 * (Math.sqrt(1 - (a -= 2) * a) + 1)
                })), d = function(b, c, d) {
                    var e = i("easing." + b, function(a, b) {
                            this._p1 = a || 1, this._p2 = b || d, this._p3 = this._p2 / g * (Math.asin(1 / this._p1) || 0)
                        }, !0),
                        f = e.prototype = new a;
                    return f.constructor = e, f.getRatio = c, f.config = function(a, b) {
                        return new e(a, b)
                    }, e
                }, l("Elastic", d("ElasticOut", function(a) {
                    return this._p1 * Math.pow(2, -10 * a) * Math.sin((a - this._p3) * g / this._p2) + 1
                }, .3), d("ElasticIn", function(a) {
                    return -(this._p1 * Math.pow(2, 10 * (a -= 1)) * Math.sin((a - this._p3) * g / this._p2))
                }, .3), d("ElasticInOut", function(a) {
                    return (a *= 2) < 1 ? -.5 * this._p1 * Math.pow(2, 10 * (a -= 1)) * Math.sin((a - this._p3) * g / this._p2) : this._p1 * Math.pow(2, -10 * (a -= 1)) * Math.sin((a - this._p3) * g / this._p2) * .5 + 1
                }, .45)), l("Expo", j("ExpoOut", function(a) {
                    return 1 - Math.pow(2, -10 * a)
                }), j("ExpoIn", function(a) {
                    return Math.pow(2, 10 * (a - 1)) - .001
                }), j("ExpoInOut", function(a) {
                    return (a *= 2) < 1 ? .5 * Math.pow(2, 10 * (a - 1)) : .5 * (2 - Math.pow(2, -10 * (a - 1)))
                })), l("Sine", j("SineOut", function(a) {
                    return Math.sin(a * h)
                }), j("SineIn", function(a) {
                    return -Math.cos(a * h) + 1
                }), j("SineInOut", function(a) {
                    return -.5 * (Math.cos(Math.PI * a) - 1)
                })), i("easing.EaseLookup", {
                    find: function(b) {
                        return a.map[b]
                    }
                }, !0), k(e.SlowMo, "SlowMo", "ease,"), k(c, "RoughEase", "ease,"), k(b, "SteppedEase", "ease,"), o
            }, !0)
    }),
    function(a) {
        "use strict";
        var b = a.GreenSockGlobals || a;
        if (!b.TweenLite) {
            var c, d, e, f, g, h = function(a) {
                    var c, d = a.split("."),
                        e = b;
                    for (c = 0; c < d.length; c++) e[d[c]] = e = e[d[c]] || {};
                    return e
                },
                i = h("com.greensock"),
                j = 1e-10,
                k = [].slice,
                l = function() {},
                m = function() {
                    var a = Object.prototype.toString,
                        b = a.call([]);
                    return function(c) {
                        return null != c && (c instanceof Array || "object" == typeof c && !!c.push && a.call(c) === b)
                    }
                }(),
                n = {},
                o = function(c, d, e, f) {
                    this.sc = n[c] ? n[c].sc : [], n[c] = this, this.gsClass = null, this.func = e;
                    var g = [];
                    this.check = function(i) {
                        for (var j, k, l, m, p = d.length, q = p; --p > -1;)(j = n[d[p]] || new o(d[p], [])).gsClass ? (g[p] = j.gsClass, q--) : i && j.sc.push(this);
                        if (0 === q && e)
                            for (k = ("com.greensock." + c).split("."), l = k.pop(), m = h(k.join("."))[l] = this.gsClass = e.apply(e, g), f && (b[l] = m, "function" == typeof define && define.amd ? define((a.GreenSockAMDPath ? a.GreenSockAMDPath + "/" : "") + c.split(".").join("/"), [], function() {
                                    return m
                                }) : "undefined" != typeof module && module.exports && (module.exports = m)), p = 0; p < this.sc.length; p++) this.sc[p].check()
                    }, this.check(!0)
                },
                p = a._gsDefine = function(a, b, c, d) {
                    return new o(a, b, c, d)
                },
                q = i._class = function(a, b, c) {
                    return b = b || function() {}, p(a, [], function() {
                        return b
                    }, c), b
                };
            p.globals = b;
            var r = [0, 0, 1, 1],
                s = [],
                t = q("easing.Ease", function(a, b, c, d) {
                    this._func = a, this._type = c || 0, this._power = d || 0, this._params = b ? r.concat(b) : r
                }, !0),
                u = t.map = {},
                v = t.register = function(a, b, c, d) {
                    for (var e, f, g, h, j = b.split(","), k = j.length, l = (c || "easeIn,easeOut,easeInOut").split(","); --k > -1;)
                        for (f = j[k], e = d ? q("easing." + f, null, !0) : i.easing[f] || {}, g = l.length; --g > -1;) h = l[g], u[f + "." + h] = u[h + f] = e[h] = a.getRatio ? a : a[h] || new a
                };
            for (e = t.prototype, e._calcEnd = !1, e.getRatio = function(a) {
                    if (this._func) return this._params[0] = a, this._func.apply(null, this._params);
                    var b = this._type,
                        c = this._power,
                        d = 1 === b ? 1 - a : 2 === b ? a : .5 > a ? 2 * a : 2 * (1 - a);
                    return 1 === c ? d *= d : 2 === c ? d *= d * d : 3 === c ? d *= d * d * d : 4 === c && (d *= d * d * d * d), 1 === b ? 1 - d : 2 === b ? d : .5 > a ? d / 2 : 1 - d / 2
                }, c = ["Linear", "Quad", "Cubic", "Quart", "Quint,Strong"], d = c.length; --d > -1;) e = c[d] + ",Power" + d, v(new t(null, null, 1, d), e, "easeOut", !0), v(new t(null, null, 2, d), e, "easeIn" + (0 === d ? ",easeNone" : "")), v(new t(null, null, 3, d), e, "easeInOut");
            u.linear = i.easing.Linear.easeIn, u.swing = i.easing.Quad.easeInOut;

            var w = q("events.EventDispatcher", function(a) {
                this._listeners = {}, this._eventTarget = a || this
            });
            e = w.prototype, e.addEventListener = function(a, b, c, d, e) {
                e = e || 0;
                var h, i, j = this._listeners[a],
                    k = 0;
                for (null == j && (this._listeners[a] = j = []), i = j.length; --i > -1;) h = j[i], h.c === b && h.s === c ? j.splice(i, 1) : 0 === k && h.pr < e && (k = i + 1);
                j.splice(k, 0, {
                    c: b,
                    s: c,
                    up: d,
                    pr: e
                }), this !== f || g || f.wake()
            }, e.removeEventListener = function(a, b) {
                var c, d = this._listeners[a];
                if (d)
                    for (c = d.length; --c > -1;)
                        if (d[c].c === b) return void d.splice(c, 1)
            }, e.dispatchEvent = function(a) {
                var b, c, d, e = this._listeners[a];
                if (e)
                    for (b = e.length, c = this._eventTarget; --b > -1;) d = e[b], d.up ? d.c.call(d.s || c, {
                        type: a,
                        target: c
                    }) : d.c.call(d.s || c)
            };
            var x = a.requestAnimationFrame,
                y = a.cancelAnimationFrame,
                z = Date.now || function() {
                    return (new Date).getTime()
                },
                A = z();
            for (c = ["ms", "moz", "webkit", "o"], d = c.length; --d > -1 && !x;) x = a[c[d] + "RequestAnimationFrame"], y = a[c[d] + "CancelAnimationFrame"] || a[c[d] + "CancelRequestAnimationFrame"];
            q("Ticker", function(a, b) {
                var c, d, e, h, i, k = this,
                    m = z(),
                    n = b !== !1 && x,
                    o = 500,
                    p = 33,
                    q = function(a) {
                        var b, f, g = z() - A;
                        g > o && (m += g - p), A += g, k.time = (A - m) / 1e3, b = k.time - i, (!c || b > 0 || a === !0) && (k.frame++, i += b + (b >= h ? .004 : h - b), f = !0), a !== !0 && (e = d(q)), f && k.dispatchEvent("tick")
                    };
                w.call(k), k.time = k.frame = 0, k.tick = function() {
                    q(!0)
                }, k.lagSmoothing = function(a, b) {
                    o = a || 1 / j, p = Math.min(b, o, 0)
                }, k.sleep = function() {
                    null != e && (n && y ? y(e) : clearTimeout(e), d = l, e = null, k === f && (g = !1))
                }, k.wake = function() {
                    null !== e ? k.sleep() : k.frame > 10 && (A = z() - o + 5), d = 0 === c ? l : n && x ? x : function(a) {
                        return setTimeout(a, 1e3 * (i - k.time) + 1 | 0)
                    }, k === f && (g = !0), q(2)
                }, k.fps = function(a) {
                    return arguments.length ? (c = a, h = 1 / (c || 60), i = this.time + h, void k.wake()) : c
                }, k.useRAF = function(a) {
                    return arguments.length ? (k.sleep(), n = a, void k.fps(c)) : n
                }, k.fps(a), setTimeout(function() {
                    n && (!e || k.frame < 5) && k.useRAF(!1)
                }, 1500)
            }), e = i.Ticker.prototype = new i.events.EventDispatcher, e.constructor = i.Ticker;
            var B = q("core.Animation", function(a, b) {
                if (this.vars = b = b || {}, this._duration = this._totalDuration = a || 0, this._delay = Number(b.delay) || 0, this._timeScale = 1, this._active = b.immediateRender === !0, this.data = b.data, this._reversed = b.reversed === !0, Q) {
                    g || f.wake();
                    var c = this.vars.useFrames ? P : Q;
                    c.add(this, c._time), this.vars.paused && this.paused(!0)
                }
            });
            f = B.ticker = new i.Ticker, e = B.prototype, e._dirty = e._gc = e._initted = e._paused = !1, e._totalTime = e._time = 0, e._rawPrevTime = -1, e._next = e._last = e._onUpdate = e._timeline = e.timeline = null, e._paused = !1;
            var C = function() {
                g && z() - A > 2e3 && f.wake(), setTimeout(C, 2e3)
            };
            C(), e.play = function(a, b) {
                return null != a && this.seek(a, b), this.reversed(!1).paused(!1)
            }, e.pause = function(a, b) {
                return null != a && this.seek(a, b), this.paused(!0)
            }, e.resume = function(a, b) {
                return null != a && this.seek(a, b), this.paused(!1)
            }, e.seek = function(a, b) {
                return this.totalTime(Number(a), b !== !1)
            }, e.restart = function(a, b) {
                return this.reversed(!1).paused(!1).totalTime(a ? -this._delay : 0, b !== !1, !0)
            }, e.reverse = function(a, b) {
                return null != a && this.seek(a || this.totalDuration(), b), this.reversed(!0).paused(!1)
            }, e.render = function() {}, e.invalidate = function() {
                return this
            }, e.isActive = function() {
                var a, b = this._timeline,
                    c = this._startTime;
                return !b || !this._gc && !this._paused && b.isActive() && (a = b.rawTime()) >= c && a < c + this.totalDuration() / this._timeScale
            }, e._enabled = function(a, b) {
                return g || f.wake(), this._gc = !a, this._active = this.isActive(), b !== !0 && (a && !this.timeline ? this._timeline.add(this, this._startTime - this._delay) : !a && this.timeline && this._timeline._remove(this, !0)), !1
            }, e._kill = function() {
                return this._enabled(!1, !1)
            }, e.kill = function(a, b) {
                return this._kill(a, b), this
            }, e._uncache = function(a) {
                for (var b = a ? this : this.timeline; b;) b._dirty = !0, b = b.timeline;
                return this
            }, e._swapSelfInParams = function(a) {
                for (var b = a.length, c = a.concat(); --b > -1;) "{self}" === a[b] && (c[b] = this);
                return c
            }, e.eventCallback = function(a, b, c, d) {
                if ("on" === (a || "").substr(0, 2)) {
                    var e = this.vars;
                    if (1 === arguments.length) return e[a];
                    null == b ? delete e[a] : (e[a] = b, e[a + "Params"] = m(c) && -1 !== c.join("").indexOf("{self}") ? this._swapSelfInParams(c) : c, e[a + "Scope"] = d), "onUpdate" === a && (this._onUpdate = b)
                }
                return this
            }, e.delay = function(a) {
                return arguments.length ? (this._timeline.smoothChildTiming && this.startTime(this._startTime + a - this._delay), this._delay = a, this) : this._delay
            }, e.duration = function(a) {
                return arguments.length ? (this._duration = this._totalDuration = a, this._uncache(!0), this._timeline.smoothChildTiming && this._time > 0 && this._time < this._duration && 0 !== a && this.totalTime(this._totalTime * (a / this._duration), !0), this) : (this._dirty = !1, this._duration)
            }, e.totalDuration = function(a) {
                return this._dirty = !1, arguments.length ? this.duration(a) : this._totalDuration
            }, e.time = function(a, b) {
                return arguments.length ? (this._dirty && this.totalDuration(), this.totalTime(a > this._duration ? this._duration : a, b)) : this._time
            }, e.totalTime = function(a, b, c) {
                if (g || f.wake(), !arguments.length) return this._totalTime;
                if (this._timeline) {
                    if (0 > a && !c && (a += this.totalDuration()), this._timeline.smoothChildTiming) {
                        this._dirty && this.totalDuration();
                        var d = this._totalDuration,
                            e = this._timeline;
                        if (a > d && !c && (a = d), this._startTime = (this._paused ? this._pauseTime : e._time) - (this._reversed ? d - a : a) / this._timeScale, e._dirty || this._uncache(!1), e._timeline)
                            for (; e._timeline;) e._timeline._time !== (e._startTime + e._totalTime) / e._timeScale && e.totalTime(e._totalTime, !0), e = e._timeline
                    }
                    this._gc && this._enabled(!0, !1), (this._totalTime !== a || 0 === this._duration) && (this.render(a, b, !1), H.length && R())
                }
                return this
            }, e.progress = e.totalProgress = function(a, b) {
                return arguments.length ? this.totalTime(this.duration() * a, b) : this._time / this.duration()
            }, e.startTime = function(a) {
                return arguments.length ? (a !== this._startTime && (this._startTime = a, this.timeline && this.timeline._sortChildren && this.timeline.add(this, a - this._delay)), this) : this._startTime
            }, e.timeScale = function(a) {
                if (!arguments.length) return this._timeScale;
                if (a = a || j, this._timeline && this._timeline.smoothChildTiming) {
                    var b = this._pauseTime,
                        c = b || 0 === b ? b : this._timeline.totalTime();
                    this._startTime = c - (c - this._startTime) * this._timeScale / a
                }
                return this._timeScale = a, this._uncache(!1)
            }, e.reversed = function(a) {
                return arguments.length ? (a != this._reversed && (this._reversed = a, this.totalTime(this._timeline && !this._timeline.smoothChildTiming ? this.totalDuration() - this._totalTime : this._totalTime, !0)), this) : this._reversed
            }, e.paused = function(a) {
                if (!arguments.length) return this._paused;
                if (a != this._paused && this._timeline) {
                    g || a || f.wake();
                    var b = this._timeline,
                        c = b.rawTime(),
                        d = c - this._pauseTime;
                    !a && b.smoothChildTiming && (this._startTime += d, this._uncache(!1)), this._pauseTime = a ? c : null, this._paused = a, this._active = this.isActive(), !a && 0 !== d && this._initted && this.duration() && this.render(b.smoothChildTiming ? this._totalTime : (c - this._startTime) / this._timeScale, !0, !0)
                }
                return this._gc && !a && this._enabled(!0, !1), this
            };
            var D = q("core.SimpleTimeline", function(a) {
                B.call(this, 0, a), this.autoRemoveChildren = this.smoothChildTiming = !0
            });
            e = D.prototype = new B, e.constructor = D, e.kill()._gc = !1, e._first = e._last = null, e._sortChildren = !1, e.add = e.insert = function(a, b) {
                var c, d;
                if (a._startTime = Number(b || 0) + a._delay, a._paused && this !== a._timeline && (a._pauseTime = a._startTime + (this.rawTime() - a._startTime) / a._timeScale), a.timeline && a.timeline._remove(a, !0), a.timeline = a._timeline = this, a._gc && a._enabled(!0, !0), c = this._last, this._sortChildren)
                    for (d = a._startTime; c && c._startTime > d;) c = c._prev;
                return c ? (a._next = c._next, c._next = a) : (a._next = this._first, this._first = a), a._next ? a._next._prev = a : this._last = a, a._prev = c, this._timeline && this._uncache(!0), this
            }, e._remove = function(a, b) {
                return a.timeline === this && (b || a._enabled(!1, !0), a.timeline = null, a._prev ? a._prev._next = a._next : this._first === a && (this._first = a._next), a._next ? a._next._prev = a._prev : this._last === a && (this._last = a._prev), this._timeline && this._uncache(!0)), this
            }, e.render = function(a, b, c) {
                var d, e = this._first;
                for (this._totalTime = this._time = this._rawPrevTime = a; e;) d = e._next, (e._active || a >= e._startTime && !e._paused) && (e._reversed ? e.render((e._dirty ? e.totalDuration() : e._totalDuration) - (a - e._startTime) * e._timeScale, b, c) : e.render((a - e._startTime) * e._timeScale, b, c)), e = d
            }, e.rawTime = function() {
                return g || f.wake(), this._totalTime
            };
            var E = q("TweenLite", function(b, c, d) {
                    if (B.call(this, c, d), this.render = E.prototype.render, null == b) throw "Cannot tween a null target.";
                    this.target = b = "string" != typeof b ? b : E.selector(b) || b;
                    var e, f, g, h = b.jquery || b.length && b !== a && b[0] && (b[0] === a || b[0].nodeType && b[0].style && !b.nodeType),
                        i = this.vars.overwrite;
                    if (this._overwrite = i = null == i ? O[E.defaultOverwrite] : "number" == typeof i ? i >> 0 : O[i], (h || b instanceof Array || b.push && m(b)) && "number" != typeof b[0])
                        for (this._targets = g = k.call(b, 0), this._propLookup = [], this._siblings = [], e = 0; e < g.length; e++) f = g[e], f ? "string" != typeof f ? f.length && f !== a && f[0] && (f[0] === a || f[0].nodeType && f[0].style && !f.nodeType) ? (g.splice(e--, 1), this._targets = g = g.concat(k.call(f, 0))) : (this._siblings[e] = S(f, this, !1), 1 === i && this._siblings[e].length > 1 && T(f, this, null, 1, this._siblings[e])) : (f = g[e--] = E.selector(f), "string" == typeof f && g.splice(e + 1, 1)) : g.splice(e--, 1);
                    else this._propLookup = {}, this._siblings = S(b, this, !1), 1 === i && this._siblings.length > 1 && T(b, this, null, 1, this._siblings);
                    (this.vars.immediateRender || 0 === c && 0 === this._delay && this.vars.immediateRender !== !1) && (this._time = -j, this.render(-this._delay))
                }, !0),
                F = function(b) {
                    return b.length && b !== a && b[0] && (b[0] === a || b[0].nodeType && b[0].style && !b.nodeType)
                },
                G = function(a, b) {
                    var c, d = {};
                    for (c in a) N[c] || c in b && "transform" !== c && "x" !== c && "y" !== c && "width" !== c && "height" !== c && "className" !== c && "border" !== c || !(!K[c] || K[c] && K[c]._autoCSS) || (d[c] = a[c], delete a[c]);
                    a.css = d
                };
            e = E.prototype = new B, e.constructor = E, e.kill()._gc = !1, e.ratio = 0, e._firstPT = e._targets = e._overwrittenProps = e._startAt = null, e._notifyPluginsOfEnabled = e._lazy = !1, E.version = "1.12.1", E.defaultEase = e._ease = new t(null, null, 1, 1), E.defaultOverwrite = "auto", E.ticker = f, E.autoSleep = !0, E.lagSmoothing = function(a, b) {
                f.lagSmoothing(a, b)
            }, E.selector = a.$ || a.jQuery || function(b) {
                return a.$ ? (E.selector = a.$, a.$(b)) : a.document ? a.document.getElementById("#" === b.charAt(0) ? b.substr(1) : b) : b
            };
            var H = [],
                I = {},
                J = E._internals = {
                    isArray: m,
                    isSelector: F,
                    lazyTweens: H
                },
                K = E._plugins = {},
                L = J.tweenLookup = {},
                M = 0,
                N = J.reservedProps = {
                    ease: 1,
                    delay: 1,
                    overwrite: 1,
                    onComplete: 1,
                    onCompleteParams: 1,
                    onCompleteScope: 1,
                    useFrames: 1,
                    runBackwards: 1,
                    startAt: 1,
                    onUpdate: 1,
                    onUpdateParams: 1,
                    onUpdateScope: 1,
                    onStart: 1,
                    onStartParams: 1,
                    onStartScope: 1,
                    onReverseComplete: 1,
                    onReverseCompleteParams: 1,
                    onReverseCompleteScope: 1,
                    onRepeat: 1,
                    onRepeatParams: 1,
                    onRepeatScope: 1,
                    easeParams: 1,
                    yoyo: 1,
                    immediateRender: 1,
                    repeat: 1,
                    repeatDelay: 1,
                    data: 1,
                    paused: 1,
                    reversed: 1,
                    autoCSS: 1,
                    lazy: 1
                },
                O = {
                    none: 0,
                    all: 1,
                    auto: 2,
                    concurrent: 3,
                    allOnStart: 4,
                    preexisting: 5,
                    "true": 1,
                    "false": 0
                },
                P = B._rootFramesTimeline = new D,
                Q = B._rootTimeline = new D,
                R = function() {
                    var a = H.length;
                    for (I = {}; --a > -1;) c = H[a], c && c._lazy !== !1 && (c.render(c._lazy, !1, !0), c._lazy = !1);
                    H.length = 0
                };
            Q._startTime = f.time, P._startTime = f.frame, Q._active = P._active = !0, setTimeout(R, 1), B._updateRoot = E.render = function() {
                var a, b, c;
                if (H.length && R(), Q.render((f.time - Q._startTime) * Q._timeScale, !1, !1), P.render((f.frame - P._startTime) * P._timeScale, !1, !1), H.length && R(), !(f.frame % 120)) {
                    for (c in L) {
                        for (b = L[c].tweens, a = b.length; --a > -1;) b[a]._gc && b.splice(a, 1);
                        0 === b.length && delete L[c]
                    }
                    if (c = Q._first, (!c || c._paused) && E.autoSleep && !P._first && 1 === f._listeners.tick.length) {
                        for (; c && c._paused;) c = c._next;
                        c || f.sleep()
                    }
                }
            }, f.addEventListener("tick", B._updateRoot);
            var S = function(a, b, c) {
                    var d, e, f = a._gsTweenID;
                    if (L[f || (a._gsTweenID = f = "t" + M++)] || (L[f] = {
                            target: a,
                            tweens: []
                        }), b && (d = L[f].tweens, d[e = d.length] = b, c))
                        for (; --e > -1;) d[e] === b && d.splice(e, 1);
                    return L[f].tweens
                },
                T = function(a, b, c, d, e) {
                    var f, g, h, i;
                    if (1 === d || d >= 4) {
                        for (i = e.length, f = 0; i > f; f++)
                            if ((h = e[f]) !== b) h._gc || h._enabled(!1, !1) && (g = !0);
                            else if (5 === d) break;
                        return g
                    }
                    var k, l = b._startTime + j,
                        m = [],
                        n = 0,
                        o = 0 === b._duration;
                    for (f = e.length; --f > -1;)(h = e[f]) === b || h._gc || h._paused || (h._timeline !== b._timeline ? (k = k || U(b, 0, o), 0 === U(h, k, o) && (m[n++] = h)) : h._startTime <= l && h._startTime + h.totalDuration() / h._timeScale > l && ((o || !h._initted) && l - h._startTime <= 2e-10 || (m[n++] = h)));
                    for (f = n; --f > -1;) h = m[f], 2 === d && h._kill(c, a) && (g = !0), (2 !== d || !h._firstPT && h._initted) && h._enabled(!1, !1) && (g = !0);
                    return g
                },
                U = function(a, b, c) {
                    for (var d = a._timeline, e = d._timeScale, f = a._startTime; d._timeline;) {
                        if (f += d._startTime, e *= d._timeScale, d._paused) return -100;
                        d = d._timeline
                    }
                    return f /= e, f > b ? f - b : c && f === b || !a._initted && 2 * j > f - b ? j : (f += a.totalDuration() / a._timeScale / e) > b + j ? 0 : f - b - j
                };
            e._init = function() {
                var a, b, c, d, e, f = this.vars,
                    g = this._overwrittenProps,
                    h = this._duration,
                    i = !!f.immediateRender,
                    j = f.ease;
                if (f.startAt) {
                    this._startAt && (this._startAt.render(-1, !0), this._startAt.kill()), e = {};
                    for (d in f.startAt) e[d] = f.startAt[d];
                    if (e.overwrite = !1, e.immediateRender = !0, e.lazy = i && f.lazy !== !1, e.startAt = e.delay = null, this._startAt = E.to(this.target, 0, e), i)
                        if (this._time > 0) this._startAt = null;
                        else if (0 !== h) return
                } else if (f.runBackwards && 0 !== h)
                    if (this._startAt) this._startAt.render(-1, !0), this._startAt.kill(), this._startAt = null;
                    else {
                        c = {};
                        for (d in f) N[d] && "autoCSS" !== d || (c[d] = f[d]);
                        if (c.overwrite = 0, c.data = "isFromStart", c.lazy = i && f.lazy !== !1, c.immediateRender = i, this._startAt = E.to(this.target, 0, c), i) {
                            if (0 === this._time) return
                        } else this._startAt._init(), this._startAt._enabled(!1)
                    }
                if (this._ease = j ? j instanceof t ? f.easeParams instanceof Array ? j.config.apply(j, f.easeParams) : j : "function" == typeof j ? new t(j, f.easeParams) : u[j] || E.defaultEase : E.defaultEase, this._easeType = this._ease._type, this._easePower = this._ease._power, this._firstPT = null, this._targets)
                    for (a = this._targets.length; --a > -1;) this._initProps(this._targets[a], this._propLookup[a] = {}, this._siblings[a], g ? g[a] : null) && (b = !0);
                else b = this._initProps(this.target, this._propLookup, this._siblings, g);
                if (b && E._onPluginEvent("_onInitAllProps", this), g && (this._firstPT || "function" != typeof this.target && this._enabled(!1, !1)), f.runBackwards)
                    for (c = this._firstPT; c;) c.s += c.c, c.c = -c.c, c = c._next;
                this._onUpdate = f.onUpdate, this._initted = !0
            }, e._initProps = function(b, c, d, e) {
                var f, g, h, i, j, k;
                if (null == b) return !1;
                I[b._gsTweenID] && R(), this.vars.css || b.style && b !== a && b.nodeType && K.css && this.vars.autoCSS !== !1 && G(this.vars, b);
                for (f in this.vars) {
                    if (k = this.vars[f], N[f]) k && (k instanceof Array || k.push && m(k)) && -1 !== k.join("").indexOf("{self}") && (this.vars[f] = k = this._swapSelfInParams(k, this));
                    else if (K[f] && (i = new K[f])._onInitTween(b, this.vars[f], this)) {
                        for (this._firstPT = j = {
                                _next: this._firstPT,
                                t: i,
                                p: "setRatio",
                                s: 0,
                                c: 1,
                                f: !0,
                                n: f,
                                pg: !0,
                                pr: i._priority
                            }, g = i._overwriteProps.length; --g > -1;) c[i._overwriteProps[g]] = this._firstPT;
                        (i._priority || i._onInitAllProps) && (h = !0), (i._onDisable || i._onEnable) && (this._notifyPluginsOfEnabled = !0)
                    } else this._firstPT = c[f] = j = {
                        _next: this._firstPT,
                        t: b,
                        p: f,
                        f: "function" == typeof b[f],
                        n: f,
                        pg: !1,
                        pr: 0
                    }, j.s = j.f ? b[f.indexOf("set") || "function" != typeof b["get" + f.substr(3)] ? f : "get" + f.substr(3)]() : parseFloat(b[f]), j.c = "string" == typeof k && "=" === k.charAt(1) ? parseInt(k.charAt(0) + "1", 10) * Number(k.substr(2)) : Number(k) - j.s || 0;
                    j && j._next && (j._next._prev = j)
                }
                return e && this._kill(e, b) ? this._initProps(b, c, d, e) : this._overwrite > 1 && this._firstPT && d.length > 1 && T(b, this, c, this._overwrite, d) ? (this._kill(c, b), this._initProps(b, c, d, e)) : (this._firstPT && (this.vars.lazy !== !1 && this._duration || this.vars.lazy && !this._duration) && (I[b._gsTweenID] = !0), h)
            }, e.render = function(a, b, c) {
                var d, e, f, g, h = this._time,
                    i = this._duration,
                    k = this._rawPrevTime;
                if (a >= i) this._totalTime = this._time = i, this.ratio = this._ease._calcEnd ? this._ease.getRatio(1) : 1, this._reversed || (d = !0, e = "onComplete"), 0 === i && (this._initted || !this.vars.lazy || c) && (this._startTime === this._timeline._duration && (a = 0), (0 === a || 0 > k || k === j) && k !== a && (c = !0, k > j && (e = "onReverseComplete")), this._rawPrevTime = g = !b || a || k === a ? a : j);
                else if (1e-7 > a) this._totalTime = this._time = 0, this.ratio = this._ease._calcEnd ? this._ease.getRatio(0) : 0, (0 !== h || 0 === i && k > 0 && k !== j) && (e = "onReverseComplete", d = this._reversed), 0 > a ? (this._active = !1, 0 === i && (this._initted || !this.vars.lazy || c) && (k >= 0 && (c = !0), this._rawPrevTime = g = !b || a || k === a ? a : j)) : this._initted || (c = !0);
                else if (this._totalTime = this._time = a, this._easeType) {
                    var l = a / i,
                        m = this._easeType,
                        n = this._easePower;
                    (1 === m || 3 === m && l >= .5) && (l = 1 - l), 3 === m && (l *= 2), 1 === n ? l *= l : 2 === n ? l *= l * l : 3 === n ? l *= l * l * l : 4 === n && (l *= l * l * l * l), this.ratio = 1 === m ? 1 - l : 2 === m ? l : .5 > a / i ? l / 2 : 1 - l / 2
                } else this.ratio = this._ease.getRatio(a / i);
                if (this._time !== h || c) {
                    if (!this._initted) {
                        if (this._init(), !this._initted || this._gc) return;
                        if (!c && this._firstPT && (this.vars.lazy !== !1 && this._duration || this.vars.lazy && !this._duration)) return this._time = this._totalTime = h, this._rawPrevTime = k, H.push(this), void(this._lazy = a);
                        this._time && !d ? this.ratio = this._ease.getRatio(this._time / i) : d && this._ease._calcEnd && (this.ratio = this._ease.getRatio(0 === this._time ? 0 : 1))
                    }
                    for (this._lazy !== !1 && (this._lazy = !1), this._active || !this._paused && this._time !== h && a >= 0 && (this._active = !0), 0 === h && (this._startAt && (a >= 0 ? this._startAt.render(a, b, c) : e || (e = "_dummyGS")), this.vars.onStart && (0 !== this._time || 0 === i) && (b || this.vars.onStart.apply(this.vars.onStartScope || this, this.vars.onStartParams || s))), f = this._firstPT; f;) f.f ? f.t[f.p](f.c * this.ratio + f.s) : f.t[f.p] = f.c * this.ratio + f.s, f = f._next;
                    this._onUpdate && (0 > a && this._startAt && this._startTime && this._startAt.render(a, b, c), b || (this._time !== h || d) && this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || s)), e && (this._gc || (0 > a && this._startAt && !this._onUpdate && this._startTime && this._startAt.render(a, b, c), d && (this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !b && this.vars[e] && this.vars[e].apply(this.vars[e + "Scope"] || this, this.vars[e + "Params"] || s), 0 === i && this._rawPrevTime === j && g !== j && (this._rawPrevTime = 0)))
                }
            }, e._kill = function(a, b) {
                if ("all" === a && (a = null), null == a && (null == b || b === this.target)) return this._lazy = !1, this._enabled(!1, !1);
                b = "string" != typeof b ? b || this._targets || this.target : E.selector(b) || b;
                var c, d, e, f, g, h, i, j;
                if ((m(b) || F(b)) && "number" != typeof b[0])
                    for (c = b.length; --c > -1;) this._kill(a, b[c]) && (h = !0);
                else {
                    if (this._targets) {
                        for (c = this._targets.length; --c > -1;)
                            if (b === this._targets[c]) {
                                g = this._propLookup[c] || {}, this._overwrittenProps = this._overwrittenProps || [], d = this._overwrittenProps[c] = a ? this._overwrittenProps[c] || {} : "all";
                                break
                            }
                    } else {
                        if (b !== this.target) return !1;
                        g = this._propLookup, d = this._overwrittenProps = a ? this._overwrittenProps || {} : "all"
                    }
                    if (g) {
                        i = a || g, j = a !== d && "all" !== d && a !== g && ("object" != typeof a || !a._tempKill);
                        for (e in i)(f = g[e]) && (f.pg && f.t._kill(i) && (h = !0), f.pg && 0 !== f.t._overwriteProps.length || (f._prev ? f._prev._next = f._next : f === this._firstPT && (this._firstPT = f._next), f._next && (f._next._prev = f._prev), f._next = f._prev = null), delete g[e]), j && (d[e] = 1);
                        !this._firstPT && this._initted && this._enabled(!1, !1)
                    }
                }
                return h
            }, e.invalidate = function() {
                return this._notifyPluginsOfEnabled && E._onPluginEvent("_onDisable", this), this._firstPT = null, this._overwrittenProps = null, this._onUpdate = null, this._startAt = null, this._initted = this._active = this._notifyPluginsOfEnabled = this._lazy = !1, this._propLookup = this._targets ? {} : [], this
            }, e._enabled = function(a, b) {
                if (g || f.wake(), a && this._gc) {
                    var c, d = this._targets;
                    if (d)
                        for (c = d.length; --c > -1;) this._siblings[c] = S(d[c], this, !0);
                    else this._siblings = S(this.target, this, !0)
                }
                return B.prototype._enabled.call(this, a, b), this._notifyPluginsOfEnabled && this._firstPT ? E._onPluginEvent(a ? "_onEnable" : "_onDisable", this) : !1
            }, E.to = function(a, b, c) {
                return new E(a, b, c)
            }, E.from = function(a, b, c) {
                return c.runBackwards = !0, c.immediateRender = 0 != c.immediateRender, new E(a, b, c)
            }, E.fromTo = function(a, b, c, d) {
                return d.startAt = c, d.immediateRender = 0 != d.immediateRender && 0 != c.immediateRender, new E(a, b, d)
            }, E.delayedCall = function(a, b, c, d, e) {
                return new E(b, 0, {
                    delay: a,
                    onComplete: b,
                    onCompleteParams: c,
                    onCompleteScope: d,
                    onReverseComplete: b,
                    onReverseCompleteParams: c,
                    onReverseCompleteScope: d,
                    immediateRender: !1,
                    useFrames: e,
                    overwrite: 0
                })
            }, E.set = function(a, b) {
                return new E(a, 0, b)
            }, E.getTweensOf = function(a, b) {
                if (null == a) return [];
                a = "string" != typeof a ? a : E.selector(a) || a;
                var c, d, e, f;
                if ((m(a) || F(a)) && "number" != typeof a[0]) {
                    for (c = a.length, d = []; --c > -1;) d = d.concat(E.getTweensOf(a[c], b));
                    for (c = d.length; --c > -1;)
                        for (f = d[c], e = c; --e > -1;) f === d[e] && d.splice(c, 1)
                } else
                    for (d = S(a).concat(), c = d.length; --c > -1;)(d[c]._gc || b && !d[c].isActive()) && d.splice(c, 1);
                return d
            }, E.killTweensOf = E.killDelayedCallsTo = function(a, b, c) {
                "object" == typeof b && (c = b, b = !1);
                for (var d = E.getTweensOf(a, b), e = d.length; --e > -1;) d[e]._kill(c, a)
            };
            var V = q("plugins.TweenPlugin", function(a, b) {
                this._overwriteProps = (a || "").split(","), this._propName = this._overwriteProps[0], this._priority = b || 0, this._super = V.prototype
            }, !0);
            if (e = V.prototype, V.version = "1.10.1", V.API = 2, e._firstPT = null, e._addTween = function(a, b, c, d, e, f) {
                    var g, h;
                    return null != d && (g = "number" == typeof d || "=" !== d.charAt(1) ? Number(d) - c : parseInt(d.charAt(0) + "1", 10) * Number(d.substr(2))) ? (this._firstPT = h = {
                        _next: this._firstPT,
                        t: a,
                        p: b,
                        s: c,
                        c: g,
                        f: "function" == typeof a[b],
                        n: e || b,
                        r: f
                    }, h._next && (h._next._prev = h), h) : void 0
                }, e.setRatio = function(a) {
                    for (var b, c = this._firstPT, d = 1e-6; c;) b = c.c * a + c.s, c.r ? b = Math.round(b) : d > b && b > -d && (b = 0), c.f ? c.t[c.p](b) : c.t[c.p] = b, c = c._next
                }, e._kill = function(a) {
                    var b, c = this._overwriteProps,
                        d = this._firstPT;
                    if (null != a[this._propName]) this._overwriteProps = [];
                    else
                        for (b = c.length; --b > -1;) null != a[c[b]] && c.splice(b, 1);
                    for (; d;) null != a[d.n] && (d._next && (d._next._prev = d._prev), d._prev ? (d._prev._next = d._next, d._prev = null) : this._firstPT === d && (this._firstPT = d._next)), d = d._next;
                    return !1
                }, e._roundProps = function(a, b) {
                    for (var c = this._firstPT; c;)(a[this._propName] || null != c.n && a[c.n.split(this._propName + "_").join("")]) && (c.r = b), c = c._next
                }, E._onPluginEvent = function(a, b) {
                    var c, d, e, f, g, h = b._firstPT;
                    if ("_onInitAllProps" === a) {
                        for (; h;) {
                            for (g = h._next, d = e; d && d.pr > h.pr;) d = d._next;
                            (h._prev = d ? d._prev : f) ? h._prev._next = h: e = h, (h._next = d) ? d._prev = h : f = h, h = g
                        }
                        h = b._firstPT = e
                    }
                    for (; h;) h.pg && "function" == typeof h.t[a] && h.t[a]() && (c = !0), h = h._next;
                    return c
                }, V.activate = function(a) {
                    for (var b = a.length; --b > -1;) a[b].API === V.API && (K[(new a[b])._propName] = a[b]);
                    return !0
                }, p.plugin = function(a) {
                    if (!(a && a.propName && a.init && a.API)) throw "illegal plugin definition.";
                    var b, c = a.propName,
                        d = a.priority || 0,
                        e = a.overwriteProps,
                        f = {
                            init: "_onInitTween",
                            set: "setRatio",
                            kill: "_kill",
                            round: "_roundProps",
                            initAll: "_onInitAllProps"
                        },
                        g = q("plugins." + c.charAt(0).toUpperCase() + c.substr(1) + "Plugin", function() {
                            V.call(this, c, d), this._overwriteProps = e || []
                        }, a.global === !0),
                        h = g.prototype = new V(c);
                    h.constructor = g, g.API = a.API;
                    for (b in f) "function" == typeof a[b] && (h[f[b]] = a[b]);
                    return g.version = a.version, V.activate([g]), g
                }, c = a._gsQueue) {
                for (d = 0; d < c.length; d++) c[d]();
                for (e in n) n[e].func || a.console.log("GSAP encountered missing dependency: com.greensock." + e)
            }
            g = !1
        }
    }(window), define("tweenMax", function(a) {
        return function() {
            var b;
            return b || a.TweenMax
        }
    }(this)), (window._gsQueue || (window._gsQueue = [])).push(function() {
        "use strict";
        window._gsDefine("easing.Back", ["easing.Ease"], function(a) {
            var b, c, d, e = window.GreenSockGlobals || window,
                f = e.com.greensock,
                g = 2 * Math.PI,
                h = Math.PI / 2,
                i = f._class,
                j = function(b, c) {
                    var d = i("easing." + b, function() {}, !0),
                        e = d.prototype = new a;
                    return e.constructor = d, e.getRatio = c, d
                },
                k = a.register || function() {},
                l = function(a, b, c, d) {
                    var e = i("easing." + a, {
                        easeOut: new b,
                        easeIn: new c,
                        easeInOut: new d
                    }, !0);
                    return k(e, a), e
                },
                m = function(a, b, c) {
                    this.t = a, this.v = b, c && (this.next = c, c.prev = this, this.c = c.v - b, this.gap = c.t - a)
                },
                n = function(b, c) {
                    var d = i("easing." + b, function(a) {
                            this._p1 = a || 0 === a ? a : 1.70158, this._p2 = 1.525 * this._p1
                        }, !0),
                        e = d.prototype = new a;
                    return e.constructor = d, e.getRatio = c, e.config = function(a) {
                        return new d(a)
                    }, d
                },
                o = l("Back", n("BackOut", function(a) {
                    return (a -= 1) * a * ((this._p1 + 1) * a + this._p1) + 1
                }), n("BackIn", function(a) {
                    return a * a * ((this._p1 + 1) * a - this._p1)
                }), n("BackInOut", function(a) {
                    return (a *= 2) < 1 ? .5 * a * a * ((this._p2 + 1) * a - this._p2) : .5 * ((a -= 2) * a * ((this._p2 + 1) * a + this._p2) + 2)
                })),
                p = i("easing.SlowMo", function(a, b, c) {
                    b = b || 0 === b ? b : .7, null == a ? a = .7 : a > 1 && (a = 1), this._p = 1 !== a ? b : 0, this._p1 = (1 - a) / 2, this._p2 = a, this._p3 = this._p1 + this._p2, this._calcEnd = c === !0
                }, !0),
                q = p.prototype = new a;
            return q.constructor = p, q.getRatio = function(a) {
                var b = a + (.5 - a) * this._p;
                return a < this._p1 ? this._calcEnd ? 1 - (a = 1 - a / this._p1) * a : b - (a = 1 - a / this._p1) * a * a * a * b : a > this._p3 ? this._calcEnd ? 1 - (a = (a - this._p3) / this._p1) * a : b + (a - b) * (a = (a - this._p3) / this._p1) * a * a * a : this._calcEnd ? 1 : b
            }, p.ease = new p(.7, .7), q.config = p.config = function(a, b, c) {
                return new p(a, b, c)
            }, b = i("easing.SteppedEase", function(a) {
                a = a || 1, this._p1 = 1 / a, this._p2 = a + 1
            }, !0), q = b.prototype = new a, q.constructor = b, q.getRatio = function(a) {
                return 0 > a ? a = 0 : a >= 1 && (a = .999999999), (this._p2 * a >> 0) * this._p1
            }, q.config = b.config = function(a) {
                return new b(a)
            }, c = i("easing.RoughEase", function(b) {
                b = b || {};
                for (var c, d, e, f, g, h, i = b.taper || "none", j = [], k = 0, l = 0 | (b.points || 20), n = l, o = b.randomize !== !1, p = b.clamp === !0, q = b.template instanceof a ? b.template : null, r = "number" == typeof b.strength ? .4 * b.strength : .4; --n > -1;) c = o ? Math.random() : 1 / l * n, d = q ? q.getRatio(c) : c, "none" === i ? e = r : "out" === i ? (f = 1 - c, e = f * f * r) : "in" === i ? e = c * c * r : .5 > c ? (f = 2 * c, e = f * f * .5 * r) : (f = 2 * (1 - c), e = f * f * .5 * r), o ? d += Math.random() * e - .5 * e : n % 2 ? d += .5 * e : d -= .5 * e, p && (d > 1 ? d = 1 : 0 > d && (d = 0)), j[k++] = {
                    x: c,
                    y: d
                };
                for (j.sort(function(a, b) {
                        return a.x - b.x
                    }), h = new m(1, 1, null), n = l; --n > -1;) g = j[n], h = new m(g.x, g.y, h);
                this._prev = new m(0, 0, 0 !== h.t ? h : h.next)
            }, !0), q = c.prototype = new a, q.constructor = c, q.getRatio = function(a) {
                var b = this._prev;
                if (a > b.t) {
                    for (; b.next && a >= b.t;) b = b.next;
                    b = b.prev
                } else
                    for (; b.prev && a <= b.t;) b = b.prev;
                return this._prev = b, b.v + (a - b.t) / b.gap * b.c
            }, q.config = function(a) {
                return new c(a)
            }, c.ease = new c, l("Bounce", j("BounceOut", function(a) {
                return 1 / 2.75 > a ? 7.5625 * a * a : 2 / 2.75 > a ? 7.5625 * (a -= 1.5 / 2.75) * a + .75 : 2.5 / 2.75 > a ? 7.5625 * (a -= 2.25 / 2.75) * a + .9375 : 7.5625 * (a -= 2.625 / 2.75) * a + .984375
            }), j("BounceIn", function(a) {
                return (a = 1 - a) < 1 / 2.75 ? 1 - 7.5625 * a * a : 2 / 2.75 > a ? 1 - (7.5625 * (a -= 1.5 / 2.75) * a + .75) : 2.5 / 2.75 > a ? 1 - (7.5625 * (a -= 2.25 / 2.75) * a + .9375) : 1 - (7.5625 * (a -= 2.625 / 2.75) * a + .984375)
            }), j("BounceInOut", function(a) {
                var b = .5 > a;
                return a = b ? 1 - 2 * a : 2 * a - 1, a = 1 / 2.75 > a ? 7.5625 * a * a : 2 / 2.75 > a ? 7.5625 * (a -= 1.5 / 2.75) * a + .75 : 2.5 / 2.75 > a ? 7.5625 * (a -= 2.25 / 2.75) * a + .9375 : 7.5625 * (a -= 2.625 / 2.75) * a + .984375, b ? .5 * (1 - a) : .5 * a + .5
            })), l("Circ", j("CircOut", function(a) {
                return Math.sqrt(1 - (a -= 1) * a)
            }), j("CircIn", function(a) {
                return -(Math.sqrt(1 - a * a) - 1)
            }), j("CircInOut", function(a) {
                return (a *= 2) < 1 ? -.5 * (Math.sqrt(1 - a * a) - 1) : .5 * (Math.sqrt(1 - (a -= 2) * a) + 1)
            })), d = function(b, c, d) {
                var e = i("easing." + b, function(a, b) {
                        this._p1 = a || 1, this._p2 = b || d, this._p3 = this._p2 / g * (Math.asin(1 / this._p1) || 0)
                    }, !0),
                    f = e.prototype = new a;
                return f.constructor = e, f.getRatio = c, f.config = function(a, b) {
                    return new e(a, b)
                }, e
            }, l("Elastic", d("ElasticOut", function(a) {
                return this._p1 * Math.pow(2, -10 * a) * Math.sin((a - this._p3) * g / this._p2) + 1
            }, .3), d("ElasticIn", function(a) {
                return -(this._p1 * Math.pow(2, 10 * (a -= 1)) * Math.sin((a - this._p3) * g / this._p2))
            }, .3), d("ElasticInOut", function(a) {
                return (a *= 2) < 1 ? -.5 * this._p1 * Math.pow(2, 10 * (a -= 1)) * Math.sin((a - this._p3) * g / this._p2) : this._p1 * Math.pow(2, -10 * (a -= 1)) * Math.sin((a - this._p3) * g / this._p2) * .5 + 1
            }, .45)), l("Expo", j("ExpoOut", function(a) {
                return 1 - Math.pow(2, -10 * a)
            }), j("ExpoIn", function(a) {
                return Math.pow(2, 10 * (a - 1)) - .001
            }), j("ExpoInOut", function(a) {
                return (a *= 2) < 1 ? .5 * Math.pow(2, 10 * (a - 1)) : .5 * (2 - Math.pow(2, -10 * (a - 1)))
            })), l("Sine", j("SineOut", function(a) {
                return Math.sin(a * h)
            }), j("SineIn", function(a) {
                return -Math.cos(a * h) + 1
            }), j("SineInOut", function(a) {
                return -.5 * (Math.cos(Math.PI * a) - 1)
            })), i("easing.EaseLookup", {
                find: function(b) {
                    return a.map[b]
                }
            }, !0), k(e.SlowMo, "SlowMo", "ease,"), k(c, "RoughEase", "ease,"), k(b, "SteppedEase", "ease,"), o
        }, !0)
    }), window._gsDefine && window._gsQueue.pop()(), define("easing", function(a) {
        return function() {
            var b;
            return b || a.easing
        }
    }(this)), define("audio/ThumpAudioInstance", ["soundjs", "tweenMax", "easing"], function() {
        var a = function() {
            this.onFileLoad = this.onFileLoad.bind(this), this.onComplete = this.onComplete.bind(this), this.onFailed = this.onFailed.bind(this), this.onSucceeded = this.onSucceeded.bind(this)
        };
        a.useWebAudio = function() {
            try {
                return window.AudioContext = window.AudioContext || window.webkitAudioContext, new window.AudioContext, !0
            } catch (a) {
                return !1
            }
        }();
        var b = a.prototype;
        return createjs.EventDispatcher.initialize(b), Object.defineProperty(b, "isPlaying", {
            get: function() {
                return this._isPlaying
            }
        }), Object.defineProperty(b, "isLoading", {
            get: function() {
                return this._isLoading
            }
        }), Object.defineProperty(b, "isLoaded", {
            get: function() {
                try {
                    return createjs.Sound.loadComplete(this.id)
                } catch (a) {
                    return !1
                }
            }
        }), Object.defineProperty(b, "mute", {
            get: function() {
                return this._mute
            },
            set: function(a) {
                this._mute = a, this.applyTransform()
            }
        }), Object.defineProperty(b, "volume", {
            get: function() {
                return this._volume
            },
            set: function(a) {
                isNaN(a) || (0 > a ? a = 0 : a > 1 && (a = 1), this._volume = a, this.applyTransform())
            }
        }), Object.defineProperty(b, "pan", {
            get: function() {
                return this._pan
            },
            set: function(a) {
                a > 1 ? a = 1 : -1 > a && (a = -1), this._pan = a, this.applyTransform()
            }
        }), Object.defineProperty(b, "position", {
            get: function() {
                return this.instance ? this.instance.getPosition() : 0
            }
        }), Object.defineProperty(b, "duration", {
            get: function() {
                return this.instance ? this.instance.getDuration() : 0
            }
        }), b.init = function(a, b, c, d) {
            return this.id = b, this.src = c, this.type = a, this.preload = d, this.instance = null, this._mute = !1, this._volume = 1, this._pan = 0, this._fadeCoefficient = 1, this._isPlaying = !1, this._timeline = null, this._timer = null, this._playOnLoaded = !1, this._isLoading = !1, this._applyWhenSucceededQueue = [], d && this.load(), this
        }, b.load = function() {
            return this._isLoading || this.isLoaded || (this._isLoading = !0, createjs.EventDispatcher.initialize(this), createjs.Sound.registerSound(this.src, this.id), createjs.Sound.addEventListener("fileload", this.onFileLoad, null, !0)), this
        }, b.onFileLoad = function(a) {
            a.id === this.id && this.isLoaded && (this._isLoading = !1, this.instance = createjs.Sound.createInstance(this.id), this.instance.addEventListener("complete", this.onComplete), this.instance.addEventListener("failed", this.onFailed), this.dispatchEvent({
                type: "loaded",
                id: this.id,
                src: this.src
            }), this._playOnLoaded && this.play(this._playArguments))
        }, b.applyWhenSucceeded = function(a, b) {
            b || (b = []), this._applyWhenSucceededQueue.push({
                func: a,
                parameters: b
            })
        }, b.executeApplyWhenSucceededQueue = function() {
            for (var a; this._applyWhenSucceededQueue.length;) a = this._applyWhenSucceededQueue.shift(), a.func.apply(this, a.parameters)
        }, b.onFailed = function(a) {
            console.log(a)
        }, b.play = function(a) {
            if (this.isLoaded || this._isLoading) {
                if (this.instance) {
                    this.instance.addEventListener("succeeded", this.onSucceeded);
                    var b = a ? -1 : 0,
                        c = {
                            interrupt: createjs.Sound.INTERRUPT_ANY,
                            loop: b
                        };
                    try {
                        "object" == typeof a ? (a.interrupt = createjs.Sound.INTERRUPT_ANY, this.instance.play(a)) : this.instance.play(c)
                    } catch (d) {}
                    this._isPlaying = !0
                }
            } else this._playArguments = a, this._playOnLoaded = !0;
            return this
        }, b.onSucceeded = function() {
            this.applyTransform(), this.executeApplyWhenSucceededQueue()
        }, b.pause = function() {
            return this._playOnLoaded = !1, this._isPlaying = !1, this.isLoading ? this.applyWhenSucceeded(this.pause) : this.instance.pause(), this
        }, b.resume = function() {
            return this.isLoaded ? (this.instance.resume(), this._isPlaying = !0) : this.applyWhenSucceeded(this.resume), this
        }, b.seek = function(a) {
            return this.isLoaded ? this.instance.setPosition(a) : this.applyWhenSucceeded(this.seek, [a]), this
        }, b.stop = function() {
            if (this.isLoaded) {
                try {
                    this.instance.stop()
                } catch (a) {}
                this._isPlaying = !1
            } else this.applyWhenSucceeded(this.stop);
            return this
        }, b.fadeIn = function(a) {
            return a = a || 5, this.isLoaded ? (this._fadeCoefficient = 0, this.fadeTransition(a, !1, 1)) : this.applyWhenSucceeded(this.fadeIn, [a]), this
        }, b.fadeOut = function(a) {
            return a = a || 5, this.isLoaded ? this.fadeTransition(a, !0, 0) : this.applyWhenSucceeded(this.fadeOut, [a]), this
        }, b.fadeTransition = function(a, b, c) {
            var d;
            this.isLoaded ? (this._timeline && this._timeline.kill(), d = {
                onUpdate: function() {
                    this.applyTransform()
                },
                onUpdateScope: this,
                onComplete: function(a) {
                    a && this.stop()
                },
                onCompleteParams: [b],
                onCompleteScope: this
            }, this._timeline = new TimelineMax(d), this._timeline.insert(TweenMax.to(this, a, {
                ease: Linear.easeNone,
                _fadeCoefficient: c
            })), this.applyTransform()) : this.applyWhenSucceeded(this.fadeTransition, [a, b, c])
        }, b.applyTransform = function() {
            this.isLoaded ? (this.instance.setMute(this._mute), this.instance.setVolume(this._volume * this._fadeCoefficient), this.instance.setPan(this._pan)) : this.applyWhenSucceeded(this.applyTransform)
        }, b.activateTimer = function() {
            this.isLoaded ? this._timer || (this._timer = setInterval(function() {
                this._isPlaying && this.dispatchEvent({
                    type: "positionUpdate",
                    position: this.position,
                    duration: this.duration
                })
            }.bind(this), 100)) : this.applyWhenSucceeded(this.activateTimer)
        }, b.cancelTimer = function() {
            this.isLoaded ? this._timer && (clearInterval(this._timer),
                this._timer = null) : this.applyWhenSucceeded(this.cancelTimer)
        }, b.onComplete = function() {
            this.stop()
        }, b.dispose = function() {
            createjs.Sound.removeEventListener("fileload", this.onFileLoad), this._timeline && this._timeline.kill(), this._timeline = null, this.cancelTimer(), this.instance && (this.stop(), this.instance.removeEventListener("complete", this.onComplete), this.instance.removeEventListener("failed", this.onFailed), this.instance.removeEventListener("succeeded", this.onSucceeded)), createjs.Sound.remove(this.id), this.instance = null
        }, b.toString = function() {
            return "ThumpAudioInstance: " + this.id
        }, a
    }), define("config", [], function() {
        var a = {},
            b = {
                localhost: "development",
                "www.stg.sbs.com.au": "staging",
                "www.sbs.com.au": "production",
                "sbs.com.au": "production"
            }[window.location.hostname],
            c = !1,
            d = !1;
        ("production" == b || "staging" == b) && (d = !0);
        var e = !1;
        return "ie" == Detectizr.browser.name || "production" != b && "staging" != b || (e = !0), a.deploymentLevel = b, a.isCORSOnDataAvailable = c, a.isCORSOnMediaAvailable = d, a.isCORSOnImagesAvailable = e, a.cdnBasePath = "http://videocdn.sbs.com.au/u/video/theboat/", a.dataBasePath = "", a.videoBasePath = "", a.audioBasePath = "", a.imagesBasePath = "", a.htmlBasePath = "", c && (a.dataBasePath = a.cdnBasePath + a.dataBasePath), e && (a.imagesBasePath = a.cdnBasePath + a.imagesBasePath), d && (a.videoBasePath = a.cdnBasePath + a.videoBasePath, a.audioBasePath = a.cdnBasePath + a.audioBasePath), a.isKioskMode = window.location.search.indexOf("kioskMode") > -1, a
    }), window.Modernizr = function(a, b, c) {
        function d(a) {
            t.cssText = a
        }

        function e(a, b) {
            return d(x.join(a + ";") + (b || ""))
        }

        function f(a, b) {
            return typeof a === b
        }

        function g(a, b) {
            return !!~("" + a).indexOf(b)
        }

        function h(a, b) {
            for (var d in a) {
                var e = a[d];
                if (!g(e, "-") && t[e] !== c) return "pfx" == b ? e : !0
            }
            return !1
        }

        function i(a, b, d) {
            for (var e in a) {
                var g = b[a[e]];
                if (g !== c) return d === !1 ? a[e] : f(g, "function") ? g.bind(d || b) : g
            }
            return !1
        }

        function j(a, b, c) {
            var d = a.charAt(0).toUpperCase() + a.slice(1),
                e = (a + " " + z.join(d + " ") + d).split(" ");
            return f(b, "string") || f(b, "undefined") ? h(e, b) : (e = (a + " " + A.join(d + " ") + d).split(" "), i(e, b, c))
        }

        function k() {
            o.input = function(c) {
                for (var d = 0, e = c.length; e > d; d++) E[c[d]] = !!(c[d] in u);
                return E.list && (E.list = !(!b.createElement("datalist") || !a.HTMLDataListElement)), E
            }("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")), o.inputtypes = function(a) {
                for (var d, e, f, g = 0, h = a.length; h > g; g++) u.setAttribute("type", e = a[g]), d = "text" !== u.type, d && (u.value = v, u.style.cssText = "position:absolute;visibility:hidden;", /^range$/.test(e) && u.style.WebkitAppearance !== c ? (q.appendChild(u), f = b.defaultView, d = f.getComputedStyle && "textfield" !== f.getComputedStyle(u, null).WebkitAppearance && 0 !== u.offsetHeight, q.removeChild(u)) : /^(search|tel)$/.test(e) || (d = /^(url|email)$/.test(e) ? u.checkValidity && u.checkValidity() === !1 : u.value != v)), D[a[g]] = !!d;
                return D
            }("search tel url email datetime date month week time datetime-local number range color".split(" "))
        }
        var l, m, n = "2.8.3",
            o = {},
            p = !0,
            q = b.documentElement,
            r = "modernizr",
            s = b.createElement(r),
            t = s.style,
            u = b.createElement("input"),
            v = ":)",
            w = {}.toString,
            x = " -webkit- -moz- -o- -ms- ".split(" "),
            y = "Webkit Moz O ms",
            z = y.split(" "),
            A = y.toLowerCase().split(" "),
            B = {
                svg: "http://www.w3.org/2000/svg"
            },
            C = {},
            D = {},
            E = {},
            F = [],
            G = F.slice,
            H = function(a, c, d, e) {
                var f, g, h, i, j = b.createElement("div"),
                    k = b.body,
                    l = k || b.createElement("body");
                if (parseInt(d, 10))
                    for (; d--;) h = b.createElement("div"), h.id = e ? e[d] : r + (d + 1), j.appendChild(h);
                return f = ["&#173;", '<style id="s', r, '">', a, "</style>"].join(""), j.id = r, (k ? j : l).innerHTML += f, l.appendChild(j), k || (l.style.background = "", l.style.overflow = "hidden", i = q.style.overflow, q.style.overflow = "hidden", q.appendChild(l)), g = c(j, a), k ? j.parentNode.removeChild(j) : (l.parentNode.removeChild(l), q.style.overflow = i), !!g
            },
            I = function() {
                function a(a, e) {
                    e = e || b.createElement(d[a] || "div"), a = "on" + a;
                    var g = a in e;
                    return g || (e.setAttribute || (e = b.createElement("div")), e.setAttribute && e.removeAttribute && (e.setAttribute(a, ""), g = f(e[a], "function"), f(e[a], "undefined") || (e[a] = c), e.removeAttribute(a))), e = null, g
                }
                var d = {
                    select: "input",
                    change: "input",
                    submit: "form",
                    reset: "form",
                    error: "img",
                    load: "img",
                    abort: "img"
                };
                return a
            }(),
            J = {}.hasOwnProperty;
        m = f(J, "undefined") || f(J.call, "undefined") ? function(a, b) {
            return b in a && f(a.constructor.prototype[b], "undefined")
        } : function(a, b) {
            return J.call(a, b)
        }, Function.prototype.bind || (Function.prototype.bind = function(a) {
            var b = this;
            if ("function" != typeof b) throw new TypeError;
            var c = G.call(arguments, 1),
                d = function() {
                    if (this instanceof d) {
                        var e = function() {};
                        e.prototype = b.prototype;
                        var f = new e,
                            g = b.apply(f, c.concat(G.call(arguments)));
                        return Object(g) === g ? g : f
                    }
                    return b.apply(a, c.concat(G.call(arguments)))
                };
            return d
        }), C.flexbox = function() {
            return j("flexWrap")
        }, C.canvas = function() {
            var a = b.createElement("canvas");
            return !(!a.getContext || !a.getContext("2d"))
        }, C.canvastext = function() {
            return !(!o.canvas || !f(b.createElement("canvas").getContext("2d").fillText, "function"))
        }, C.webgl = function() {
            return !!a.WebGLRenderingContext
        }, C.touch = function() {
            var c;
            return "ontouchstart" in a || a.DocumentTouch && b instanceof DocumentTouch ? c = !0 : H(["@media (", x.join("touch-enabled),("), r, ")", "{#modernizr{top:9px;position:absolute}}"].join(""), function(a) {
                c = 9 === a.offsetTop
            }), c
        }, C.geolocation = function() {
            return "geolocation" in navigator
        }, C.postmessage = function() {
            return !!a.postMessage
        }, C.websqldatabase = function() {
            return !!a.openDatabase
        }, C.indexedDB = function() {
            return !!j("indexedDB", a)
        }, C.hashchange = function() {
            return I("hashchange", a) && (b.documentMode === c || b.documentMode > 7)
        }, C.history = function() {
            return !(!a.history || !history.pushState)
        }, C.draganddrop = function() {
            var a = b.createElement("div");
            return "draggable" in a || "ondragstart" in a && "ondrop" in a
        }, C.websockets = function() {
            return "WebSocket" in a || "MozWebSocket" in a
        }, C.rgba = function() {
            return d("background-color:rgba(150,255,150,.5)"), g(t.backgroundColor, "rgba")
        }, C.hsla = function() {
            return d("background-color:hsla(120,40%,100%,.5)"), g(t.backgroundColor, "rgba") || g(t.backgroundColor, "hsla")
        }, C.multiplebgs = function() {
            return d("background:url(https://),url(https://),red url(https://)"), /(url\s*\(.*?){3}/.test(t.background)
        }, C.backgroundsize = function() {
            return j("backgroundSize")
        }, C.borderimage = function() {
            return j("borderImage")
        }, C.borderradius = function() {
            return j("borderRadius")
        }, C.boxshadow = function() {
            return j("boxShadow")
        }, C.textshadow = function() {
            return "" === b.createElement("div").style.textShadow
        }, C.opacity = function() {
            return e("opacity:.55"), /^0.55$/.test(t.opacity)
        }, C.cssanimations = function() {
            return j("animationName")
        }, C.csscolumns = function() {
            return j("columnCount")
        }, C.cssgradients = function() {
            var a = "background-image:",
                b = "gradient(linear,left top,right bottom,from(#9f9),to(white));",
                c = "linear-gradient(left top,#9f9, white);";
            return d((a + "-webkit- ".split(" ").join(b + a) + x.join(c + a)).slice(0, -a.length)), g(t.backgroundImage, "gradient")
        }, C.cssreflections = function() {
            return j("boxReflect")
        }, C.csstransforms = function() {
            return !!j("transform")
        }, C.csstransforms3d = function() {
            var a = !!j("perspective");
            return a && "webkitPerspective" in q.style && H("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}", function(b) {
                a = 9 === b.offsetLeft && 3 === b.offsetHeight
            }), a
        }, C.csstransitions = function() {
            return j("transition")
        }, C.fontface = function() {
            var a;
            return H('@font-face {font-family:"font";src:url("https://")}', function(c, d) {
                var e = b.getElementById("smodernizr"),
                    f = e.sheet || e.styleSheet,
                    g = f ? f.cssRules && f.cssRules[0] ? f.cssRules[0].cssText : f.cssText || "" : "";
                a = /src/i.test(g) && 0 === g.indexOf(d.split(" ")[0])
            }), a
        }, C.generatedcontent = function() {
            var a;
            return H(["#", r, "{font:0/0 a}#", r, ':after{content:"', v, '";visibility:hidden;font:3px/1 a}'].join(""), function(b) {
                a = b.offsetHeight >= 3
            }), a
        }, C.video = function() {
            var a = b.createElement("video"),
                c = !1;
            try {
                (c = !!a.canPlayType) && (c = new Boolean(c), c.ogg = a.canPlayType('video/ogg; codecs="theora"').replace(/^no$/, ""), c.h264 = a.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/, ""), c.webm = a.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/, ""))
            } catch (d) {}
            return c
        }, C.audio = function() {
            var a = b.createElement("audio"),
                c = !1;
            try {
                (c = !!a.canPlayType) && (c = new Boolean(c), c.ogg = a.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/, ""), c.mp3 = a.canPlayType("audio/mpeg;").replace(/^no$/, ""), c.wav = a.canPlayType('audio/wav; codecs="1"').replace(/^no$/, ""), c.m4a = (a.canPlayType("audio/x-m4a;") || a.canPlayType("audio/aac;")).replace(/^no$/, ""))
            } catch (d) {}
            return c
        }, C.localstorage = function() {
            try {
                return localStorage.setItem(r, r), localStorage.removeItem(r), !0
            } catch (a) {
                return !1
            }
        }, C.sessionstorage = function() {
            try {
                return sessionStorage.setItem(r, r), sessionStorage.removeItem(r), !0
            } catch (a) {
                return !1
            }
        }, C.webworkers = function() {
            return !!a.Worker
        }, C.applicationcache = function() {
            return !!a.applicationCache
        }, C.svg = function() {
            return !!b.createElementNS && !!b.createElementNS(B.svg, "svg").createSVGRect
        }, C.inlinesvg = function() {
            var a = b.createElement("div");
            return a.innerHTML = "<svg/>", (a.firstChild && a.firstChild.namespaceURI) == B.svg
        }, C.smil = function() {
            return !!b.createElementNS && /SVGAnimate/.test(w.call(b.createElementNS(B.svg, "animate")))
        }, C.svgclippaths = function() {
            return !!b.createElementNS && /SVGClipPath/.test(w.call(b.createElementNS(B.svg, "clipPath")))
        };
        for (var K in C) m(C, K) && (l = K.toLowerCase(), o[l] = C[K](), F.push((o[l] ? "" : "no-") + l));
        return o.input || k(), o.addTest = function(a, b) {
                if ("object" == typeof a)
                    for (var d in a) m(a, d) && o.addTest(d, a[d]);
                else {
                    if (a = a.toLowerCase(), o[a] !== c) return o;
                    b = "function" == typeof b ? b() : b, "undefined" != typeof p && p && (q.className += " " + (b ? "" : "no-") + a), o[a] = b
                }
                return o
            }, d(""), s = u = null,
            function(a, b) {
                function c(a, b) {
                    var c = a.createElement("p"),
                        d = a.getElementsByTagName("head")[0] || a.documentElement;
                    return c.innerHTML = "x<style>" + b + "</style>", d.insertBefore(c.lastChild, d.firstChild)
                }

                function d() {
                    var a = s.elements;
                    return "string" == typeof a ? a.split(" ") : a
                }

                function e(a) {
                    var b = r[a[p]];
                    return b || (b = {}, q++, a[p] = q, r[q] = b), b
                }

                function f(a, c, d) {
                    if (c || (c = b), k) return c.createElement(a);
                    d || (d = e(c));
                    var f;
                    return f = d.cache[a] ? d.cache[a].cloneNode() : o.test(a) ? (d.cache[a] = d.createElem(a)).cloneNode() : d.createElem(a), !f.canHaveChildren || n.test(a) || f.tagUrn ? f : d.frag.appendChild(f)
                }

                function g(a, c) {
                    if (a || (a = b), k) return a.createDocumentFragment();
                    c = c || e(a);
                    for (var f = c.frag.cloneNode(), g = 0, h = d(), i = h.length; i > g; g++) f.createElement(h[g]);
                    return f
                }

                function h(a, b) {
                    b.cache || (b.cache = {}, b.createElem = a.createElement, b.createFrag = a.createDocumentFragment, b.frag = b.createFrag()), a.createElement = function(c) {
                        return s.shivMethods ? f(c, a, b) : b.createElem(c)
                    }, a.createDocumentFragment = Function("h,f", "return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&(" + d().join().replace(/[\w\-]+/g, function(a) {
                        return b.createElem(a), b.frag.createElement(a), 'c("' + a + '")'
                    }) + ");return n}")(s, b.frag)
                }

                function i(a) {
                    a || (a = b);
                    var d = e(a);
                    return !s.shivCSS || j || d.hasCSS || (d.hasCSS = !!c(a, "article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")), k || h(a, d), a
                }
                var j, k, l = "3.7.0",
                    m = a.html5 || {},
                    n = /^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,
                    o = /^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,
                    p = "_html5shiv",
                    q = 0,
                    r = {};
                ! function() {
                    try {
                        var a = b.createElement("a");
                        a.innerHTML = "<xyz></xyz>", j = "hidden" in a, k = 1 == a.childNodes.length || function() {
                            b.createElement("a");
                            var a = b.createDocumentFragment();
                            return "undefined" == typeof a.cloneNode || "undefined" == typeof a.createDocumentFragment || "undefined" == typeof a.createElement
                        }()
                    } catch (c) {
                        j = !0, k = !0
                    }
                }();
                var s = {
                    elements: m.elements || "abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",
                    version: l,
                    shivCSS: m.shivCSS !== !1,
                    supportsUnknownElements: k,
                    shivMethods: m.shivMethods !== !1,
                    type: "default",
                    shivDocument: i,
                    createElement: f,
                    createDocumentFragment: g
                };
                a.html5 = s, i(b)
            }(this, b), o._version = n, o._prefixes = x, o._domPrefixes = A, o._cssomPrefixes = z, o.hasEvent = I, o.testProp = function(a) {
                return h([a])
            }, o.testAllProps = j, o.testStyles = H, o.prefixed = function(a, b, c) {
                return b ? j(a, b, c) : j(a, "pfx")
            }, q.className = q.className.replace(/(^|\s)no-js(\s|$)/, "$1$2") + (p ? " js " + F.join(" ") : ""), o
    }(this, this.document),
    function(a, b, c) {
        function d(a) {
            return "[object Function]" == q.call(a)
        }

        function e(a) {
            return "string" == typeof a
        }

        function f() {}

        function g(a) {
            return !a || "loaded" == a || "complete" == a || "uninitialized" == a
        }

        function h() {
            var a = r.shift();
            s = 1, a ? a.t ? o(function() {
                ("c" == a.t ? m.injectCss : m.injectJs)(a.s, 0, a.a, a.x, a.e, 1)
            }, 0) : (a(), h()) : s = 0
        }

        function i(a, c, d, e, f, i, j) {
            function k(b) {
                if (!n && g(l.readyState) && (t.r = n = 1, !s && h(), l.onload = l.onreadystatechange = null, b)) {
                    "img" != a && o(function() {
                        v.removeChild(l)
                    }, 50);
                    for (var d in A[c]) A[c].hasOwnProperty(d) && A[c][d].onload()
                }
            }
            var j = j || m.errorTimeout,
                l = b.createElement(a),
                n = 0,
                q = 0,
                t = {
                    t: d,
                    s: c,
                    e: f,
                    a: i,
                    x: j
                };
            1 === A[c] && (q = 1, A[c] = []), "object" == a ? l.data = c : (l.src = c, l.type = a), l.width = l.height = "0", l.onerror = l.onload = l.onreadystatechange = function() {
                k.call(this, q)
            }, r.splice(e, 0, t), "img" != a && (q || 2 === A[c] ? (v.insertBefore(l, u ? null : p), o(k, j)) : A[c].push(l))
        }

        function j(a, b, c, d, f) {
            return s = 0, b = b || "j", e(a) ? i("c" == b ? x : w, a, b, this.i++, c, d, f) : (r.splice(this.i++, 0, a), 1 == r.length && h()), this
        }

        function k() {
            var a = m;
            return a.loader = {
                load: j,
                i: 0
            }, a
        }
        var l, m, n = b.documentElement,
            o = a.setTimeout,
            p = b.getElementsByTagName("script")[0],
            q = {}.toString,
            r = [],
            s = 0,
            t = "MozAppearance" in n.style,
            u = t && !!b.createRange().compareNode,
            v = u ? n : p.parentNode,
            n = a.opera && "[object Opera]" == q.call(a.opera),
            n = !!b.attachEvent && !n,
            w = t ? "object" : n ? "script" : "img",
            x = n ? "script" : w,
            y = Array.isArray || function(a) {
                return "[object Array]" == q.call(a)
            },
            z = [],
            A = {},
            B = {
                timeout: function(a, b) {
                    return b.length && (a.timeout = b[0]), a
                }
            };
        m = function(a) {
            function b(a) {
                var b, c, d, a = a.split("!"),
                    e = z.length,
                    f = a.pop(),
                    g = a.length,
                    f = {
                        url: f,
                        origUrl: f,
                        prefixes: a
                    };
                for (c = 0; g > c; c++) d = a[c].split("="), (b = B[d.shift()]) && (f = b(f, d));
                for (c = 0; e > c; c++) f = z[c](f);
                return f
            }

            function g(a, e, f, g, h) {
                var i = b(a),
                    j = i.autoCallback;
                i.url.split(".").pop().split("?").shift(), i.bypass || (e && (e = d(e) ? e : e[a] || e[g] || e[a.split("/").pop().split("?")[0]]), i.instead ? i.instead(a, e, f, g, h) : (A[i.url] ? i.noexec = !0 : A[i.url] = 1, f.load(i.url, i.forceCSS || !i.forceJS && "css" == i.url.split(".").pop().split("?").shift() ? "c" : c, i.noexec, i.attrs, i.timeout), (d(e) || d(j)) && f.load(function() {
                    k(), e && e(i.origUrl, h, g), j && j(i.origUrl, h, g), A[i.url] = 2
                })))
            }

            function h(a, b) {
                function c(a, c) {
                    if (a) {
                        if (e(a)) c || (l = function() {
                            var a = [].slice.call(arguments);
                            m.apply(this, a), n()
                        }), g(a, l, b, 0, j);
                        else if (Object(a) === a)
                            for (i in h = function() {
                                    var b, c = 0;
                                    for (b in a) a.hasOwnProperty(b) && c++;
                                    return c
                                }(), a) a.hasOwnProperty(i) && (!c && !--h && (d(l) ? l = function() {
                                var a = [].slice.call(arguments);
                                m.apply(this, a), n()
                            } : l[i] = function(a) {
                                return function() {
                                    var b = [].slice.call(arguments);
                                    a && a.apply(this, b), n()
                                }
                            }(m[i])), g(a[i], l, b, i, j))
                    } else !c && n()
                }
                var h, i, j = !!a.test,
                    k = a.load || a.both,
                    l = a.callback || f,
                    m = l,
                    n = a.complete || f;
                c(j ? a.yep : a.nope, !!k), k && c(k)
            }
            var i, j, l = this.yepnope.loader;
            if (e(a)) g(a, 0, l, 0);
            else if (y(a))
                for (i = 0; i < a.length; i++) j = a[i], e(j) ? g(j, 0, l, 0) : y(j) ? m(j) : Object(j) === j && h(j, l);
            else Object(a) === a && h(a, l)
        }, m.addPrefix = function(a, b) {
            B[a] = b
        }, m.addFilter = function(a) {
            z.push(a)
        }, m.errorTimeout = 1e4, null == b.readyState && b.addEventListener && (b.readyState = "loading", b.addEventListener("DOMContentLoaded", l = function() {
            b.removeEventListener("DOMContentLoaded", l, 0), b.readyState = "complete"
        }, 0)), a.yepnope = k(), a.yepnope.executeStack = h, a.yepnope.injectJs = function(a, c, d, e, i, j) {
            var k, l, n = b.createElement("script"),
                e = e || m.errorTimeout;
            n.src = a;
            for (l in d) n.setAttribute(l, d[l]);
            c = j ? h : c || f, n.onreadystatechange = n.onload = function() {
                !k && g(n.readyState) && (k = 1, c(), n.onload = n.onreadystatechange = null)
            }, o(function() {
                k || (k = 1, c(1))
            }, e), i ? n.onload() : p.parentNode.insertBefore(n, p)
        }, a.yepnope.injectCss = function(a, c, d, e, g, i) {
            var j, e = b.createElement("link"),
                c = i ? h : c || f;
            e.href = a, e.rel = "stylesheet", e.type = "text/css";
            for (j in d) e.setAttribute(j, d[j]);
            g || (p.parentNode.insertBefore(e, p), o(c, 0))
        }
    }(this, document), Modernizr.load = function() {
        yepnope.apply(window, [].slice.call(arguments, 0))
    }, Modernizr.addTest("cors", !!(window.XMLHttpRequest && "withCredentials" in new XMLHttpRequest)), Modernizr.addTest("devicemotion", "DeviceMotionEvent" in window), Modernizr.addTest("deviceorientation", "DeviceOrientationEvent" in window), Modernizr.addTest("fullscreen", function() {
        for (var a = 0; a < Modernizr._domPrefixes.length; a++)
            if (document[Modernizr._domPrefixes[a].toLowerCase() + "CancelFullScreen"]) return !0;
        return !!document.cancelFullScreen || !1
    }), Modernizr.addTest("vibrate", !!Modernizr.prefixed("vibrate", navigator)),
    function() {
        if (Modernizr.webgl) {
            var a, b, c;
            try {
                a = document.createElement("canvas"), b = a.getContext("webgl") || a.getContext("experimental-webgl"), c = b.getSupportedExtensions()
            } catch (d) {
                return
            }
            Modernizr.webgl = new Boolean(void 0 === b ? !1 : !0);
            for (var e = -1, f = c.length; ++e < f;) Modernizr.webgl[c[e]] = !0;
            window.TEST && TEST.audvid && TEST.audvid.push("webgl"), a = void 0
        }
    }(), define("modernizr", function(a) {
        return function() {
            var b;
            return b || a.Modernizr
        }
    }(this)), define("audio/Thump", ["audio/ThumpAudioInstance", "config", "jquery", "underscore", "modernizr", "soundjs"], function(a, b, c, d, e, f) {
        var g = function() {};
        return f.Sound.registerPlugins([f.HTMLAudioPlugin]), f.Sound.alternateExtensions = ["mp3", "ogg"], f.EventDispatcher.initialize(g), g.audioInstanceLookup = {}, g.isPreloadComplete = !1, g.preloadInstanceCount = 0, g.preloadInstanceLoadedCount = 0, Object.defineProperty(g, "progress", {
            get: function() {
                return 0 === g.preloadInstanceCount ? 1 : g.preloadInstanceCount ? g.preloadInstanceLoadedCount / g.preloadInstanceCount : 0
            }
        }), Object.defineProperty(g, "volume", {
            get: function() {
                return f.Sound.getVolume()
            },
            set: function(a) {
                f.Sound.setVolume(a)
            }
        }), Object.defineProperty(g, "mute", {
            get: function() {
                return f.Sound.getMute()
            },
            set: function(a) {
                f.Sound.setMute(a)
            }
        }), Object.defineProperty(g, "autoPlaySupported", {
            get: function() {
                return "tablet" != Detectizr.device.type && "mobile" != Detectizr.device.type
            }
        }), g.init = function(e) {
            e = e || "data/audio-manifest.json", c.ajax({
                dataType: "json",
                url: e,
                error: function() {
                    console.error("Thump: error loading manifest. Is the path correct? Is the json well-formed?")
                },
                success: function(c) {
                    var e, f, h;
                    g._manifest = c, d.each(g._manifest.sources, function(a) {
                        d.each(a, function(a) {
                            a.src = b.audioBasePath + a.src
                        })
                    });
                    for (e in c.sources.sfx) f = {
                        id: e,
                        src: c.sources.sfx[e].src
                    }, h = (new a).init("sfx", e, f.src, !0), h.addEventListener("loaded", g.onPreloadInstanceLoaded), g.preloadInstanceCount++, g.audioInstanceLookup[e] = h;
                    for (e in c.sources.music) f = {
                        id: e,
                        src: c.sources.music[e].src
                    }, h = (new a).init("music", e, f.src, !1), g.audioInstanceLookup[e] = h;
                    g.dispatchEvent({
                        type: "initComplete",
                        manifest: c
                    })
                }
            })
        }, g.onPreloadInstanceLoaded = function(a) {
            var b = a.target;
            a.target.preload && (g.preloadInstanceLoadedCount++, g.dispatchEvent({
                type: "preloadProgress",
                id: a.id,
                src: a.src,
                instance: b
            }), g.preloadInstanceLoadedCount >= g.preloadInstanceCount && g.dispatchEvent({
                type: "preloadComplete"
            }))
        }, g.get = function(a) {
            try {
                return g.audioInstanceLookup[a]
            } catch (b) {
                return console.error("Whack: No sound instance exists for that ID"), !1
            }
        }, g.remove = function(a) {
            var b = g.audioInstanceLookup[a];
            b.dispose(), b = null, delete g.audioInstanceLookup[a]
        }, g.stopAll = function() {
            return f.Sound.stop(), g
        }, g
    }), define("tracking/Tracking", [], function() {
        var a = function() {};
        return a.init = function(b) {
            a.prefix = b
        }, a.sendCustomEvent = function(b) {
            console.log("tracking", b);
            try {
                window.sbs_s && (window.sbs_s.manageVars("clearVars"), window.sbs_s.contextData = {}, window.sbs_s.linkTrackVars = "", window.sbs_s.tl(!0, "o", a.prefix + "/" + b), window.sbs_s.manageVars("clearVars"))
            } catch (c) {
                console.log("tracking error")
            }
        }, a
    }), define("utils/inherit", [], function() {
        var a = {};
        return a.extend = function(a, b) {
            function c() {
                this.constructor = a
            }
            return c.prototype = b.prototype, a.prototype = new c
        }, a.promote = function(a, b) {
            var c = a.prototype,
                d = Object.getPrototypeOf && Object.getPrototypeOf(c) || c.__proto__;
            if (d) {
                c[(b += "_") + "constructor"] = d.constructor;
                for (var e in d) c.hasOwnProperty(e) && "function" == typeof d[e] && (c[b + e] = d[e])
            }
            return a
        }, a
    }), define("dat/utils/css", [], function() {
        return {
            load: function(a, b) {
                b = b || document;
                var c = b.createElement("link");
                c.type = "text/css", c.rel = "stylesheet", c.href = a, b.getElementsByTagName("head")[0].appendChild(c)
            },
            inject: function(a, b) {
                b = b || document;
                var c = document.createElement("style");
                c.type = "text/css", c.innerHTML = a, b.getElementsByTagName("head")[0].appendChild(c)
            }
        }
    }), define("text", ["module"], function(a) {
        "use strict";
        var b, c, d, e, f, g = ["Msxml2.XMLHTTP", "Microsoft.XMLHTTP", "Msxml2.XMLHTTP.4.0"],
            h = /^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,
            i = /<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,
            j = "undefined" != typeof location && location.href,
            k = j && location.protocol && location.protocol.replace(/\:/, ""),
            l = j && location.hostname,
            m = j && (location.port || void 0),
            n = {},
            o = a.config && a.config() || {};
        return b = {
            version: "2.0.12",
            strip: function(a) {
                if (a) {
                    a = a.replace(h, "");
                    var b = a.match(i);
                    b && (a = b[1])
                } else a = "";
                return a
            },
            jsEscape: function(a) {
                return a.replace(/(['\\])/g, "\\$1").replace(/[\f]/g, "\\f").replace(/[\b]/g, "\\b").replace(/[\n]/g, "\\n").replace(/[\t]/g, "\\t").replace(/[\r]/g, "\\r").replace(/[\u2028]/g, "\\u2028").replace(/[\u2029]/g, "\\u2029")
            },
            createXhr: o.createXhr || function() {
                var a, b, c;
                if ("undefined" != typeof XMLHttpRequest) return new XMLHttpRequest;
                if ("undefined" != typeof ActiveXObject)
                    for (b = 0; 3 > b; b += 1) {
                        c = g[b];
                        try {
                            a = new ActiveXObject(c)
                        } catch (d) {}
                        if (a) {
                            g = [c];
                            break
                        }
                    }
                return a
            },
            parseName: function(a) {
                var b, c, d, e = !1,
                    f = a.indexOf("."),
                    g = 0 === a.indexOf("./") || 0 === a.indexOf("../");
                return -1 !== f && (!g || f > 1) ? (b = a.substring(0, f), c = a.substring(f + 1, a.length)) : b = a, d = c || b, f = d.indexOf("!"), -1 !== f && (e = "strip" === d.substring(f + 1), d = d.substring(0, f), c ? c = d : b = d), {
                    moduleName: b,
                    ext: c,
                    strip: e
                }
            },
            xdRegExp: /^((\w+)\:)?\/\/([^\/\\]+)/,
            useXhr: function(a, c, d, e) {
                var f, g, h, i = b.xdRegExp.exec(a);
                return i ? (f = i[2], g = i[3], g = g.split(":"), h = g[1], g = g[0], !(f && f !== c || g && g.toLowerCase() !== d.toLowerCase() || (h || g) && h !== e)) : !0
            },
            finishLoad: function(a, c, d, e) {
                d = c ? b.strip(d) : d, o.isBuild && (n[a] = d), e(d)
            },
            load: function(a, c, d, e) {
                if (e && e.isBuild && !e.inlineText) return void d();
                o.isBuild = e && e.isBuild;
                var f = b.parseName(a),
                    g = f.moduleName + (f.ext ? "." + f.ext : ""),
                    h = c.toUrl(g),
                    i = o.useXhr || b.useXhr;
                return 0 === h.indexOf("empty:") ? void d() : void(!j || i(h, k, l, m) ? b.get(h, function(c) {
                    b.finishLoad(a, f.strip, c, d)
                }, function(a) {
                    d.error && d.error(a)
                }) : c([g], function(a) {
                    b.finishLoad(f.moduleName + "." + f.ext, f.strip, a, d)
                }))
            },
            write: function(a, c, d) {
                if (n.hasOwnProperty(c)) {
                    var e = b.jsEscape(n[c]);
                    d.asModule(a + "!" + c, "define(function () { return '" + e + "';});\n")
                }
            },
            writeFile: function(a, c, d, e, f) {
                var g = b.parseName(c),
                    h = g.ext ? "." + g.ext : "",
                    i = g.moduleName + h,
                    j = d.toUrl(g.moduleName + h) + ".js";
                b.load(i, d, function() {
                    var c = function(a) {
                        return e(j, a)
                    };
                    c.asModule = function(a, b) {
                        return e.asModule(a, j, b)
                    }, b.write(a, i, c, f)
                }, f)
            }
        }, "node" === o.env || !o.env && "undefined" != typeof process && process.versions && process.versions.node && !process.versions["node-webkit"] ? (c = require.nodeRequire("fs"), b.get = function(a, b, d) {
            try {
                var e = c.readFileSync(a, "utf8");
                0 === e.indexOf("\ufeff") && (e = e.substring(1)), b(e)
            } catch (f) {
                d && d(f)
            }
        }) : "xhr" === o.env || !o.env && b.createXhr() ? b.get = function(a, c, d, e) {
            var f, g = b.createXhr();
            if (g.open("GET", a, !0), e)
                for (f in e) e.hasOwnProperty(f) && g.setRequestHeader(f.toLowerCase(), e[f]);
            o.onXhr && o.onXhr(g, a), g.onreadystatechange = function() {
                var b, e;
                4 === g.readyState && (b = g.status || 0, b > 399 && 600 > b ? (e = new Error(a + " HTTP status: " + b), e.xhr = g, d && d(e)) : c(g.responseText), o.onXhrComplete && o.onXhrComplete(g, a))
            }, g.send(null)
        } : "rhino" === o.env || !o.env && "undefined" != typeof Packages && "undefined" != typeof java ? b.get = function(a, b) {
            var c, d, e = "utf-8",
                f = new java.io.File(a),
                g = java.lang.System.getProperty("line.separator"),
                h = new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(f), e)),
                i = "";
            try {
                for (c = new java.lang.StringBuffer, d = h.readLine(), d && d.length() && 65279 === d.charAt(0) && (d = d.substring(1)), null !== d && c.append(d); null !== (d = h.readLine());) c.append(g), c.append(d);
                i = String(c.toString())
            } finally {
                h.close()
            }
            b(i)
        } : ("xpconnect" === o.env || !o.env && "undefined" != typeof Components && Components.classes && Components.interfaces) && (d = Components.classes, e = Components.interfaces, Components.utils["import"]("resource://gre/modules/FileUtils.jsm"), f = "@mozilla.org/windows-registry-key;1" in d, b.get = function(a, b) {
            var c, g, h, i = {};
            f && (a = a.replace(/\//g, "\\")), h = new FileUtils.File(a);
            try {
                c = d["@mozilla.org/network/file-input-stream;1"].createInstance(e.nsIFileInputStream), c.init(h, 1, 0, !1), g = d["@mozilla.org/intl/converter-input-stream;1"].createInstance(e.nsIConverterInputStream), g.init(c, "utf-8", c.available(), e.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER), g.readString(c.available(), i), g.close(), c.close(), b(i.value)
            } catch (j) {
                throw new Error((h && h.path || "") + ": " + j)
            }
        }), b
    }), define("text!dat/gui/saveDialogue.html", [], function() {
        return '<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n      \n    </div>\n    \n  </div>\n\n</div>'
    }), define("text!dat/gui/style.css", [], function() {
        return ".dg {\n  /** Clear list styles */\n  /* Auto-place container */\n  /* Auto-placed GUI's */\n  /* Line items that don't contain folders. */\n  /** Folder names */\n  /** Hides closed items */\n  /** Controller row */\n  /** Name-half (left) */\n  /** Controller-half (right) */\n  /** Controller placement */\n  /** Shorter number boxes when slider is present. */\n  /** Ensure the entire boolean and function row shows a hand */ }\n  .dg ul {\n    list-style: none;\n    margin: 0;\n    padding: 0;\n    width: 100%;\n    clear: both; }\n  .dg.ac {\n    position: fixed;\n    top: 0;\n    left: 0;\n    right: 0;\n    height: 0;\n    z-index: 0; }\n  .dg:not(.ac) .main {\n    /** Exclude mains in ac so that we don't hide close button */\n    overflow: hidden; }\n  .dg.main {\n    -webkit-transition: opacity 0.1s linear;\n    -o-transition: opacity 0.1s linear;\n    -moz-transition: opacity 0.1s linear;\n    transition: opacity 0.1s linear; }\n    .dg.main.taller-than-window {\n      overflow-y: auto; }\n      .dg.main.taller-than-window .close-button {\n        opacity: 1;\n        /* TODO, these are style notes */\n        margin-top: -1px;\n        border-top: 1px solid #2c2c2c; }\n    .dg.main ul.closed .close-button {\n      opacity: 1 !important; }\n    .dg.main:hover .close-button,\n    .dg.main .close-button.drag {\n      opacity: 1; }\n    .dg.main .close-button {\n      /*opacity: 0;*/\n      -webkit-transition: opacity 0.1s linear;\n      -o-transition: opacity 0.1s linear;\n      -moz-transition: opacity 0.1s linear;\n      transition: opacity 0.1s linear;\n      border: 0;\n      position: absolute;\n      line-height: 19px;\n      height: 20px;\n      /* TODO, these are style notes */\n      cursor: pointer;\n      text-align: center;\n      background-color: #000; }\n      .dg.main .close-button:hover {\n        background-color: #111; }\n  .dg.a {\n    float: right;\n    margin-right: 15px;\n    overflow-x: hidden; }\n    .dg.a.has-save > ul {\n      margin-top: 27px; }\n      .dg.a.has-save > ul.closed {\n        margin-top: 0; }\n    .dg.a .save-row {\n      position: fixed;\n      top: 0;\n      z-index: 1002; }\n  .dg li {\n    -webkit-transition: height 0.1s ease-out;\n    -o-transition: height 0.1s ease-out;\n    -moz-transition: height 0.1s ease-out;\n    transition: height 0.1s ease-out; }\n  .dg li:not(.folder) {\n    cursor: auto;\n    height: 27px;\n    line-height: 27px;\n    overflow: hidden;\n    padding: 0 4px 0 5px; }\n  .dg li.folder {\n    padding: 0;\n    border-left: 4px solid rgba(0, 0, 0, 0); }\n  .dg li.title {\n    cursor: pointer;\n    margin-left: -4px; }\n  .dg .closed li:not(.title),\n  .dg .closed ul li,\n  .dg .closed ul li > * {\n    height: 0;\n    overflow: hidden;\n    border: 0; }\n  .dg .cr {\n    clear: both;\n    padding-left: 3px;\n    height: 27px; }\n  .dg .property-name {\n    cursor: default;\n    float: left;\n    clear: left;\n    width: 40%;\n    overflow: hidden;\n    text-overflow: ellipsis; }\n  .dg .c {\n    float: left;\n    width: 60%; }\n  .dg .c input[type=text] {\n    border: 0;\n    margin-top: 4px;\n    padding: 3px;\n    width: 100%;\n    float: right; }\n  .dg .has-slider input[type=text] {\n    width: 30%;\n    /*display: none;*/\n    margin-left: 0; }\n  .dg .slider {\n    float: left;\n    width: 66%;\n    margin-left: -5px;\n    margin-right: 0;\n    height: 19px;\n    margin-top: 4px; }\n  .dg .slider-fg {\n    height: 100%; }\n  .dg .c input[type=checkbox] {\n    margin-top: 9px; }\n  .dg .c select {\n    margin-top: 5px; }\n  .dg .cr.function,\n  .dg .cr.function .property-name,\n  .dg .cr.function *,\n  .dg .cr.boolean,\n  .dg .cr.boolean * {\n    cursor: pointer; }\n  .dg .selector {\n    display: none;\n    position: absolute;\n    margin-left: -9px;\n    margin-top: 23px;\n    z-index: 10; }\n  .dg .c:hover .selector,\n  .dg .selector.drag {\n    display: block; }\n  .dg li.save-row {\n    padding: 0; }\n    .dg li.save-row .button {\n      display: inline-block;\n      padding: 0px 6px; }\n  .dg.dialogue {\n    background-color: #222;\n    width: 460px;\n    padding: 15px;\n    font-size: 13px;\n    line-height: 15px; }\n\n/* TODO Separate style and structure */\n#dg-new-constructor {\n  padding: 10px;\n  color: #222;\n  font-family: Monaco, monospace;\n  font-size: 10px;\n  border: 0;\n  resize: none;\n  box-shadow: inset 1px 1px 1px #888;\n  word-wrap: break-word;\n  margin: 12px 0;\n  display: block;\n  width: 440px;\n  overflow-y: scroll;\n  height: 100px;\n  position: relative; }\n\n#dg-local-explain {\n  display: none;\n  font-size: 11px;\n  line-height: 17px;\n  border-radius: 3px;\n  background-color: #333;\n  padding: 8px;\n  margin-top: 10px; }\n  #dg-local-explain code {\n    font-size: 10px; }\n\n#dat-gui-save-locally {\n  display: none; }\n\n/** Main type */\n.dg {\n  color: #eee;\n  font: 11px 'Lucida Grande', sans-serif;\n  text-shadow: 0 -1px 0 #111;\n  /** Auto place */\n  /* Controller row, <li> */\n  /** Controllers */ }\n  .dg.main {\n    /** Scrollbar */ }\n    .dg.main::-webkit-scrollbar {\n      width: 5px;\n      background: #1a1a1a; }\n    .dg.main::-webkit-scrollbar-corner {\n      height: 0;\n      display: none; }\n    .dg.main::-webkit-scrollbar-thumb {\n      border-radius: 5px;\n      background: #676767; }\n  .dg li:not(.folder) {\n    background: #1a1a1a;\n    border-bottom: 1px solid #2c2c2c; }\n  .dg li.save-row {\n    line-height: 25px;\n    background: #dad5cb;\n    border: 0; }\n    .dg li.save-row select {\n      margin-left: 5px;\n      width: 108px; }\n    .dg li.save-row .button {\n      margin-left: 5px;\n      margin-top: 1px;\n      border-radius: 2px;\n      font-size: 9px;\n      line-height: 7px;\n      padding: 4px 4px 5px 4px;\n      background: #c5bdad;\n      color: #fff;\n      text-shadow: 0 1px 0 #b0a58f;\n      box-shadow: 0 -1px 0 #b0a58f;\n      cursor: pointer; }\n      .dg li.save-row .button.gears {\n        background: #c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;\n        height: 7px;\n        width: 8px; }\n      .dg li.save-row .button:hover {\n        background-color: #bab19e;\n        box-shadow: 0 -1px 0 #b0a58f; }\n  .dg li.folder {\n    border-bottom: 0; }\n  .dg li.title {\n    padding-left: 16px;\n    background: black url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;\n    cursor: pointer;\n    border-bottom: 1px solid rgba(255, 255, 255, 0.2); }\n  .dg .closed li.title {\n    background-image: url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==); }\n  .dg .cr.boolean {\n    border-left: 3px solid #806787; }\n  .dg .cr.function {\n    border-left: 3px solid #e61d5f; }\n  .dg .cr.number {\n    border-left: 3px solid #2fa1d6; }\n    .dg .cr.number input[type=text] {\n      color: #2fa1d6; }\n  .dg .cr.string {\n    border-left: 3px solid #1ed36f; }\n    .dg .cr.string input[type=text] {\n      color: #1ed36f; }\n  .dg .cr.function:hover, .dg .cr.boolean:hover {\n    background: #111; }\n  .dg .c input[type=text] {\n    background: #303030;\n    outline: none; }\n    .dg .c input[type=text]:hover {\n      background: #3c3c3c; }\n    .dg .c input[type=text]:focus {\n      background: #494949;\n      color: #fff; }\n  .dg .c .slider {\n    background: #303030;\n    cursor: ew-resize; }\n  .dg .c .slider-fg {\n    background: #2fa1d6; }\n  .dg .c .slider:hover {\n    background: #3c3c3c; }\n    .dg .c .slider:hover .slider-fg {\n      background: #44abda; }\n";

    }), define("dat/utils/common", [], function() {
        var a = Array.prototype.forEach,
            b = Array.prototype.slice;
        return {
            BREAK: {},
            extend: function(a) {
                return this.each(b.call(arguments, 1), function(b) {
                    for (var c in b) this.isUndefined(b[c]) || (a[c] = b[c])
                }, this), a
            },
            defaults: function(a) {
                return this.each(b.call(arguments, 1), function(b) {
                    for (var c in b) this.isUndefined(a[c]) && (a[c] = b[c])
                }, this), a
            },
            compose: function() {
                var a = b.call(arguments);
                return function() {
                    for (var c = b.call(arguments), d = a.length - 1; d >= 0; d--) c = [a[d].apply(this, c)];
                    return c[0]
                }
            },
            each: function(b, c, d) {
                if (b)
                    if (a && b.forEach && b.forEach === a) b.forEach(c, d);
                    else if (b.length === b.length + 0) {
                    for (var e = 0, f = b.length; f > e; e++)
                        if (e in b && c.call(d, b[e], e) === this.BREAK) return
                } else
                    for (var e in b)
                        if (c.call(d, b[e], e) === this.BREAK) return
            },
            defer: function(a) {
                setTimeout(a, 0)
            },
            toArray: function(a) {
                return a.toArray ? a.toArray() : b.call(a)
            },
            isUndefined: function(a) {
                return void 0 === a
            },
            isNull: function(a) {
                return null === a
            },
            isNaN: function(a) {
                return a !== a
            },
            isArray: Array.isArray || function(a) {
                return a.constructor === Array
            },
            isObject: function(a) {
                return a === Object(a)
            },
            isNumber: function(a) {
                return a === a + 0
            },
            isString: function(a) {
                return a === a + ""
            },
            isBoolean: function(a) {
                return a === !1 || a === !0
            },
            isFunction: function(a) {
                return "[object Function]" === Object.prototype.toString.call(a)
            }
        }
    }), define("dat/controllers/Controller", ["dat/utils/common"], function(a) {
        var b = function(a, b) {
            this.initialValue = a[b], this.domElement = document.createElement("div"), this.object = a, this.property = b, this.__onChange = void 0, this.__onFinishChange = void 0
        };
        return a.extend(b.prototype, {
            onChange: function(a) {
                return this.__onChange = a, this
            },
            onFinishChange: function(a) {
                return this.__onFinishChange = a, this
            },
            setValue: function(a) {
                return this.object[this.property] = a, this.__onChange && this.__onChange.call(this, a), this.updateDisplay(), this
            },
            getValue: function() {
                return this.object[this.property]
            },
            updateDisplay: function() {
                return this
            },
            isModified: function() {
                return this.initialValue !== this.getValue()
            }
        }), b
    }), define("dat/dom/dom", ["dat/utils/common"], function(a) {
        function b(b) {
            if ("0" === b || a.isUndefined(b)) return 0;
            var c = b.match(e);
            return a.isNull(c) ? 0 : parseFloat(c[1])
        }
        var c = {
                HTMLEvents: ["change"],
                MouseEvents: ["click", "mousemove", "mousedown", "mouseup", "mouseover"],
                KeyboardEvents: ["keydown"]
            },
            d = {};
        a.each(c, function(b, c) {
            a.each(b, function(a) {
                d[a] = c
            })
        });
        var e = /(\d+(\.\d+)?)px/,
            f = {
                makeSelectable: function(a, b) {
                    void 0 !== a && void 0 !== a.style && (a.onselectstart = b ? function() {
                        return !1
                    } : function() {}, a.style.MozUserSelect = b ? "auto" : "none", a.style.KhtmlUserSelect = b ? "auto" : "none", a.unselectable = b ? "on" : "off")
                },
                makeFullscreen: function(b, c, d) {
                    a.isUndefined(c) && (c = !0), a.isUndefined(d) && (d = !0), b.style.position = "absolute", c && (b.style.left = 0, b.style.right = 0), d && (b.style.top = 0, b.style.bottom = 0)
                },
                fakeEvent: function(b, c, e, f) {
                    e = e || {};
                    var g = d[c];
                    if (!g) throw new Error("Event type " + c + " not supported.");
                    var h = document.createEvent(g);
                    switch (g) {
                        case "MouseEvents":
                            var i = e.x || e.clientX || 0,
                                j = e.y || e.clientY || 0;
                            h.initMouseEvent(c, e.bubbles || !1, e.cancelable || !0, window, e.clickCount || 1, 0, 0, i, j, !1, !1, !1, !1, 0, null);
                            break;
                        case "KeyboardEvents":
                            var k = h.initKeyboardEvent || h.initKeyEvent;
                            a.defaults(e, {
                                cancelable: !0,
                                ctrlKey: !1,
                                altKey: !1,
                                shiftKey: !1,
                                metaKey: !1,
                                keyCode: void 0,
                                charCode: void 0
                            }), k(c, e.bubbles || !1, e.cancelable, window, e.ctrlKey, e.altKey, e.shiftKey, e.metaKey, e.keyCode, e.charCode);
                            break;
                        default:
                            h.initEvent(c, e.bubbles || !1, e.cancelable || !0)
                    }
                    a.defaults(h, f), b.dispatchEvent(h)
                },
                bind: function(a, b, c, d) {
                    return d = d || !1, a.addEventListener ? a.addEventListener(b, c, d) : a.attachEvent && a.attachEvent("on" + b, c), f
                },
                unbind: function(a, b, c, d) {
                    return d = d || !1, a.removeEventListener ? a.removeEventListener(b, c, d) : a.detachEvent && a.detachEvent("on" + b, c), f
                },
                addClass: function(a, b) {
                    if (void 0 === a.className) a.className = b;
                    else if (a.className !== b) {
                        var c = a.className.split(/ +/); - 1 == c.indexOf(b) && (c.push(b), a.className = c.join(" ").replace(/^\s+/, "").replace(/\s+$/, ""))
                    }
                    return f
                },
                removeClass: function(a, b) {
                    if (b)
                        if (void 0 === a.className);
                        else if (a.className === b) a.removeAttribute("class");
                    else {
                        var c = a.className.split(/ +/),
                            d = c.indexOf(b); - 1 != d && (c.splice(d, 1), a.className = c.join(" "))
                    } else a.className = void 0;
                    return f
                },
                hasClass: function(a, b) {
                    return new RegExp("(?:^|\\s+)" + b + "(?:\\s+|$)").test(a.className) || !1
                },
                getWidth: function(a) {
                    var c = getComputedStyle(a);
                    return b(c["border-left-width"]) + b(c["border-right-width"]) + b(c["padding-left"]) + b(c["padding-right"]) + b(c.width)
                },
                getHeight: function(a) {
                    var c = getComputedStyle(a);
                    return b(c["border-top-width"]) + b(c["border-bottom-width"]) + b(c["padding-top"]) + b(c["padding-bottom"]) + b(c.height)
                },
                getOffset: function(a) {
                    var b = {
                        left: 0,
                        top: 0
                    };
                    if (a.offsetParent)
                        do b.left += a.offsetLeft, b.top += a.offsetTop; while (a = a.offsetParent);
                    return b
                },
                isActive: function(a) {
                    return a === document.activeElement && (a.type || a.href)
                }
            };
        return f
    }), define("dat/controllers/OptionController", ["dat/controllers/Controller", "dat/dom/dom", "dat/utils/common"], function(a, b, c) {
        var d = function(a, e, f) {
            d.superclass.call(this, a, e);
            var g = this;
            if (this.__select = document.createElement("select"), c.isArray(f)) {
                var h = {};
                c.each(f, function(a) {
                    h[a] = a
                }), f = h
            }
            c.each(f, function(a, b) {
                var c = document.createElement("option");
                c.innerHTML = b, c.setAttribute("value", a), g.__select.appendChild(c)
            }), this.updateDisplay(), b.bind(this.__select, "change", function() {
                var a = this.options[this.selectedIndex].value;
                g.setValue(a)
            }), this.domElement.appendChild(this.__select)
        };
        return d.superclass = a, c.extend(d.prototype, a.prototype, {
            setValue: function(a) {
                var b = d.superclass.prototype.setValue.call(this, a);
                return this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()), b
            },
            updateDisplay: function() {
                return this.__select.value = this.getValue(), d.superclass.prototype.updateDisplay.call(this)
            }
        }), d
    }), define("dat/controllers/NumberController", ["dat/controllers/Controller", "dat/utils/common"], function(a, b) {
        function c(a) {
            return a = a.toString(), a.indexOf(".") > -1 ? a.length - a.indexOf(".") - 1 : 0
        }
        var d = function(a, e, f) {
            d.superclass.call(this, a, e), f = f || {}, this.__min = f.min, this.__max = f.max, this.__step = f.step, this.__impliedStep = b.isUndefined(this.__step) ? 0 == this.initialValue ? 1 : Math.pow(10, Math.floor(Math.log(this.initialValue) / Math.LN10)) / 10 : this.__step, this.__precision = c(this.__impliedStep)
        };
        return d.superclass = a, b.extend(d.prototype, a.prototype, {
            setValue: function(a) {
                return void 0 !== this.__min && a < this.__min ? a = this.__min : void 0 !== this.__max && a > this.__max && (a = this.__max), void 0 !== this.__step && a % this.__step != 0 && (a = Math.round(a / this.__step) * this.__step), d.superclass.prototype.setValue.call(this, a)
            },
            min: function(a) {
                return this.__min = a, this
            },
            max: function(a) {
                return this.__max = a, this
            },
            step: function(a) {
                return this.__step = a, this.__impliedStep = a, this.__precision = c(a), this
            }
        }), d
    }), define("dat/controllers/NumberControllerBox", ["dat/controllers/NumberController", "dat/dom/dom", "dat/utils/common"], function(a, b, c) {
        function d(a, b) {
            var c = Math.pow(10, b);
            return Math.round(a * c) / c
        }
        var e = function(a, d, f) {
            function g() {
                var a = parseFloat(m.__input.value);
                c.isNaN(a) || m.setValue(a)
            }

            function h() {
                g(), m.__onFinishChange && m.__onFinishChange.call(m, m.getValue())
            }

            function i(a) {
                b.bind(window, "mousemove", j), b.bind(window, "mouseup", k), l = a.clientY
            }

            function j(a) {
                var b = l - a.clientY;
                m.setValue(m.getValue() + b * m.__impliedStep), l = a.clientY
            }

            function k() {
                b.unbind(window, "mousemove", j), b.unbind(window, "mouseup", k)
            }
            this.__truncationSuspended = !1, e.superclass.call(this, a, d, f);
            var l, m = this;
            this.__input = document.createElement("input"), this.__input.setAttribute("type", "text"), b.bind(this.__input, "change", g), b.bind(this.__input, "blur", h), b.bind(this.__input, "mousedown", i), b.bind(this.__input, "keydown", function(a) {
                13 === a.keyCode && (m.__truncationSuspended = !0, this.blur(), m.__truncationSuspended = !1)
            }), this.updateDisplay(), this.domElement.appendChild(this.__input)
        };
        return e.superclass = a, c.extend(e.prototype, a.prototype, {
            updateDisplay: function() {
                return this.__input.value = this.__truncationSuspended ? this.getValue() : d(this.getValue(), this.__precision), e.superclass.prototype.updateDisplay.call(this)
            }
        }), e
    }), define("text!dat/controllers/NumberControllerSlider.css", [], function() {
        return "/**\n * dat-gui JavaScript Controller Library\n * http://code.google.com/p/dat-gui\n *\n * Copyright 2011 Data Arts Team, Google Creative Lab\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n * http://www.apache.org/licenses/LICENSE-2.0\n */\n\n.slider {\n  box-shadow: inset 0 2px 4px rgba(0,0,0,0.15);\n  height: 1em;\n  border-radius: 1em;\n  background-color: #eee;\n  padding: 0 0.5em;\n  overflow: hidden;\n}\n\n.slider-fg {\n  padding: 1px 0 2px 0;\n  background-color: #aaa;\n  height: 1em;\n  margin-left: -0.5em;\n  padding-right: 0.5em;\n  border-radius: 1em 0 0 1em;\n}\n\n.slider-fg:after {\n  display: inline-block;\n  border-radius: 1em;\n  background-color: #fff;\n  border:  1px solid #aaa;\n  content: '';\n  float: right;\n  margin-right: -1em;\n  margin-top: -1px;\n  height: 0.9em;\n  width: 0.9em;\n}"
    }), define("dat/controllers/NumberControllerSlider", ["dat/controllers/NumberController", "dat/dom/dom", "dat/utils/css", "dat/utils/common", "text!dat/controllers/NumberControllerSlider.css"], function(a, b, c, d, e) {
        function f(a, b, c, d, e) {
            return d + (e - d) * ((a - b) / (c - b))
        }
        var g = function(a, c, d, e, h) {
            function i(a) {
                b.bind(window, "mousemove", j), b.bind(window, "mouseup", k), j(a)
            }

            function j(a) {
                a.preventDefault();
                var c = b.getOffset(l.__background),
                    d = b.getWidth(l.__background);
                return l.setValue(f(a.clientX, c.left, c.left + d, l.__min, l.__max)), !1
            }

            function k() {
                b.unbind(window, "mousemove", j), b.unbind(window, "mouseup", k), l.__onFinishChange && l.__onFinishChange.call(l, l.getValue())
            }
            g.superclass.call(this, a, c, {
                min: d,
                max: e,
                step: h
            });
            var l = this;
            this.__background = document.createElement("div"), this.__foreground = document.createElement("div"), b.bind(this.__background, "mousedown", i), b.addClass(this.__background, "slider"), b.addClass(this.__foreground, "slider-fg"), this.updateDisplay(), this.__background.appendChild(this.__foreground), this.domElement.appendChild(this.__background)
        };
        return g.superclass = a, g.useDefaultStyles = function() {
            c.inject(e)
        }, d.extend(g.prototype, a.prototype, {
            updateDisplay: function() {
                var a = (this.getValue() - this.__min) / (this.__max - this.__min);
                return this.__foreground.style.width = 100 * a + "%", g.superclass.prototype.updateDisplay.call(this)
            }
        }), g
    }), define("dat/controllers/StringController", ["dat/controllers/Controller", "dat/dom/dom", "dat/utils/common"], function(a, b, c) {
        var d = function(a, c) {
            function e() {
                g.setValue(g.__input.value)
            }

            function f() {
                g.__onFinishChange && g.__onFinishChange.call(g, g.getValue())
            }
            d.superclass.call(this, a, c);
            var g = this;
            this.__input = document.createElement("input"), this.__input.setAttribute("type", "text"), b.bind(this.__input, "keyup", e), b.bind(this.__input, "change", e), b.bind(this.__input, "blur", f), b.bind(this.__input, "keydown", function(a) {
                13 === a.keyCode && this.blur()
            }), this.updateDisplay(), this.domElement.appendChild(this.__input)
        };
        return d.superclass = a, c.extend(d.prototype, a.prototype, {
            updateDisplay: function() {
                return b.isActive(this.__input) || (this.__input.value = this.getValue()), d.superclass.prototype.updateDisplay.call(this)
            }
        }), d
    }), define("dat/controllers/FunctionController", ["dat/controllers/Controller", "dat/dom/dom", "dat/utils/common"], function(a, b, c) {
        var d = function(a, c, e) {
            d.superclass.call(this, a, c);
            var f = this;
            this.__button = document.createElement("div"), this.__button.innerHTML = void 0 === e ? "Fire" : e, b.bind(this.__button, "click", function(a) {
                return a.preventDefault(), f.fire(), !1
            }), b.addClass(this.__button, "button"), this.domElement.appendChild(this.__button)
        };
        return d.superclass = a, c.extend(d.prototype, a.prototype, {
            fire: function() {
                this.__onChange && this.__onChange.call(this), this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()), this.getValue().call(this.object)
            }
        }), d
    }), define("dat/controllers/BooleanController", ["dat/controllers/Controller", "dat/dom/dom", "dat/utils/common"], function(a, b, c) {
        var d = function(a, c) {
            function e() {
                f.setValue(!f.__prev)
            }
            d.superclass.call(this, a, c);
            var f = this;
            this.__prev = this.getValue(), this.__checkbox = document.createElement("input"), this.__checkbox.setAttribute("type", "checkbox"), b.bind(this.__checkbox, "change", e, !1), this.domElement.appendChild(this.__checkbox), this.updateDisplay()
        };
        return d.superclass = a, c.extend(d.prototype, a.prototype, {
            setValue: function(a) {
                var b = d.superclass.prototype.setValue.call(this, a);
                return this.__onFinishChange && this.__onFinishChange.call(this, this.getValue()), this.__prev = this.getValue(), b
            },
            updateDisplay: function() {
                return this.getValue() === !0 ? (this.__checkbox.setAttribute("checked", "checked"), this.__checkbox.checked = !0) : this.__checkbox.checked = !1, d.superclass.prototype.updateDisplay.call(this)
            }
        }), d
    }), define("dat/controllers/factory", ["dat/controllers/OptionController", "dat/controllers/NumberControllerBox", "dat/controllers/NumberControllerSlider", "dat/controllers/StringController", "dat/controllers/FunctionController", "dat/controllers/BooleanController", "dat/utils/common"], function(a, b, c, d, e, f, g) {
        return function(h, i) {
            var j = h[i];
            return g.isArray(arguments[2]) || g.isObject(arguments[2]) ? new a(h, i, arguments[2]) : g.isNumber(j) ? g.isNumber(arguments[2]) && g.isNumber(arguments[3]) ? new c(h, i, arguments[2], arguments[3]) : new b(h, i, {
                min: arguments[2],
                max: arguments[3]
            }) : g.isString(j) ? new d(h, i) : g.isFunction(j) ? new e(h, i, "") : g.isBoolean(j) ? new f(h, i) : void 0
        }
    }), define("dat/color/toString", ["dat/utils/common"], function(a) {
        return function(b) {
            if (1 == b.a || a.isUndefined(b.a)) {
                for (var c = b.hex.toString(16); c.length < 6;) c = "0" + c;
                return "#" + c
            }
            return "rgba(" + Math.round(b.r) + "," + Math.round(b.g) + "," + Math.round(b.b) + "," + b.a + ")"
        }
    }), define("dat/color/interpret", ["dat/color/toString", "dat/utils/common"], function(a, b) {
        var c, d, e = function() {
                d = !1;
                var a = arguments.length > 1 ? b.toArray(arguments) : arguments[0];
                return b.each(f, function(e) {
                    return e.litmus(a) ? (b.each(e.conversions, function(e, f) {
                        return c = e.read(a), d === !1 && c !== !1 ? (d = c, c.conversionName = f, c.conversion = e, b.BREAK) : void 0
                    }), b.BREAK) : void 0
                }), d
            },
            f = [{
                litmus: b.isString,
                conversions: {
                    THREE_CHAR_HEX: {
                        read: function(a) {
                            var b = a.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);
                            return null === b ? !1 : {
                                space: "HEX",
                                hex: parseInt("0x" + b[1].toString() + b[1].toString() + b[2].toString() + b[2].toString() + b[3].toString() + b[3].toString())
                            }
                        },
                        write: a
                    },
                    SIX_CHAR_HEX: {
                        read: function(a) {
                            var b = a.match(/^#([A-F0-9]{6})$/i);
                            return null === b ? !1 : {
                                space: "HEX",
                                hex: parseInt("0x" + b[1].toString())
                            }
                        },
                        write: a
                    },
                    CSS_RGB: {
                        read: function(a) {
                            var b = a.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);
                            return null === b ? !1 : {
                                space: "RGB",
                                r: parseFloat(b[1]),
                                g: parseFloat(b[2]),
                                b: parseFloat(b[3])
                            }
                        },
                        write: a
                    },
                    CSS_RGBA: {
                        read: function(a) {
                            var b = a.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\,\s*(.+)\s*\)/);
                            return null === b ? !1 : {
                                space: "RGB",
                                r: parseFloat(b[1]),
                                g: parseFloat(b[2]),
                                b: parseFloat(b[3]),
                                a: parseFloat(b[4])
                            }
                        },
                        write: a
                    }
                }
            }, {
                litmus: b.isNumber,
                conversions: {
                    HEX: {
                        read: function(a) {
                            return {
                                space: "HEX",
                                hex: a,
                                conversionName: "HEX"
                            }
                        },
                        write: function(a) {
                            return a.hex
                        }
                    }
                }
            }, {
                litmus: b.isArray,
                conversions: {
                    RGB_ARRAY: {
                        read: function(a) {
                            return 3 != a.length ? !1 : {
                                space: "RGB",
                                r: a[0],
                                g: a[1],
                                b: a[2]
                            }
                        },
                        write: function(a) {
                            return [a.r, a.g, a.b]
                        }
                    },
                    RGBA_ARRAY: {
                        read: function(a) {
                            return 4 != a.length ? !1 : {
                                space: "RGB",
                                r: a[0],
                                g: a[1],
                                b: a[2],
                                a: a[3]
                            }
                        },
                        write: function(a) {
                            return [a.r, a.g, a.b, a.a]
                        }
                    }
                }
            }, {
                litmus: b.isObject,
                conversions: {
                    RGBA_OBJ: {
                        read: function(a) {
                            return b.isNumber(a.r) && b.isNumber(a.g) && b.isNumber(a.b) && b.isNumber(a.a) ? {
                                space: "RGB",
                                r: a.r,
                                g: a.g,
                                b: a.b,
                                a: a.a
                            } : !1
                        },
                        write: function(a) {
                            return {
                                r: a.r,
                                g: a.g,
                                b: a.b,
                                a: a.a
                            }
                        }
                    },
                    RGB_OBJ: {
                        read: function(a) {
                            return b.isNumber(a.r) && b.isNumber(a.g) && b.isNumber(a.b) ? {
                                space: "RGB",
                                r: a.r,
                                g: a.g,
                                b: a.b
                            } : !1
                        },
                        write: function(a) {
                            return {
                                r: a.r,
                                g: a.g,
                                b: a.b
                            }
                        }
                    },
                    HSVA_OBJ: {
                        read: function(a) {
                            return b.isNumber(a.h) && b.isNumber(a.s) && b.isNumber(a.v) && b.isNumber(a.a) ? {
                                space: "HSV",
                                h: a.h,
                                s: a.s,
                                v: a.v,
                                a: a.a
                            } : !1
                        },
                        write: function(a) {
                            return {
                                h: a.h,
                                s: a.s,
                                v: a.v,
                                a: a.a
                            }
                        }
                    },
                    HSV_OBJ: {
                        read: function(a) {
                            return b.isNumber(a.h) && b.isNumber(a.s) && b.isNumber(a.v) ? {
                                space: "HSV",
                                h: a.h,
                                s: a.s,
                                v: a.v
                            } : !1
                        },
                        write: function(a) {
                            return {
                                h: a.h,
                                s: a.s,
                                v: a.v
                            }
                        }
                    }
                }
            }];
        return e
    }), define("dat/color/math", [], function() {
        var a;
        return {
            hsv_to_rgb: function(a, b, c) {
                var d = Math.floor(a / 60) % 6,
                    e = a / 60 - Math.floor(a / 60),
                    f = c * (1 - b),
                    g = c * (1 - e * b),
                    h = c * (1 - (1 - e) * b),
                    i = [
                        [c, h, f],
                        [g, c, f],
                        [f, c, h],
                        [f, g, c],
                        [h, f, c],
                        [c, f, g]
                    ][d];
                return {
                    r: 255 * i[0],
                    g: 255 * i[1],
                    b: 255 * i[2]
                }
            },
            rgb_to_hsv: function(a, b, c) {
                var d, e, f = Math.min(a, b, c),
                    g = Math.max(a, b, c),
                    h = g - f;
                return 0 == g ? {
                    h: 0 / 0,
                    s: 0,
                    v: 0
                } : (e = h / g, d = a == g ? (b - c) / h : b == g ? 2 + (c - a) / h : 4 + (a - b) / h, d /= 6, 0 > d && (d += 1), {
                    h: 360 * d,
                    s: e,
                    v: g / 255
                })
            },
            rgb_to_hex: function(a, b, c) {
                var d = this.hex_with_component(0, 2, a);
                return d = this.hex_with_component(d, 1, b), d = this.hex_with_component(d, 0, c)
            },
            component_from_hex: function(a, b) {
                return a >> 8 * b & 255
            },
            hex_with_component: function(b, c, d) {
                return d << (a = 8 * c) | b & ~(255 << a)
            }
        }
    }), define("dat/color/Color", ["dat/color/interpret", "dat/color/math", "dat/color/toString", "dat/utils/common"], function(a, b, c, d) {
        function e(a, b, c) {
            Object.defineProperty(a, b, {
                get: function() {
                    return "RGB" === this.__state.space ? this.__state[b] : (g(this, b, c), this.__state[b])
                },
                set: function(a) {
                    "RGB" !== this.__state.space && (g(this, b, c), this.__state.space = "RGB"), this.__state[b] = a
                }
            })
        }

        function f(a, b) {
            Object.defineProperty(a, b, {
                get: function() {
                    return "HSV" === this.__state.space ? this.__state[b] : (h(this), this.__state[b])
                },
                set: function(a) {
                    "HSV" !== this.__state.space && (h(this), this.__state.space = "HSV"), this.__state[b] = a
                }
            })
        }

        function g(a, c, e) {
            if ("HEX" === a.__state.space) a.__state[c] = b.component_from_hex(a.__state.hex, e);
            else {
                if ("HSV" !== a.__state.space) throw "Corrupted color state";
                d.extend(a.__state, b.hsv_to_rgb(a.__state.h, a.__state.s, a.__state.v))
            }
        }

        function h(a) {
            var c = b.rgb_to_hsv(a.r, a.g, a.b);
            d.extend(a.__state, {
                s: c.s,
                v: c.v
            }), d.isNaN(c.h) ? d.isUndefined(a.__state.h) && (a.__state.h = 0) : a.__state.h = c.h
        }
        var i = function() {
            if (this.__state = a.apply(this, arguments), this.__state === !1) throw "Failed to interpret color arguments";
            this.__state.a = this.__state.a || 1
        };
        return i.COMPONENTS = ["r", "g", "b", "h", "s", "v", "hex", "a"], d.extend(i.prototype, {
            toString: function() {
                return c(this)
            },
            toOriginal: function() {
                return this.__state.conversion.write(this)
            }
        }), e(i.prototype, "r", 2), e(i.prototype, "g", 1), e(i.prototype, "b", 0), f(i.prototype, "h"), f(i.prototype, "s"), f(i.prototype, "v"), Object.defineProperty(i.prototype, "a", {
            get: function() {
                return this.__state.a
            },
            set: function(a) {
                this.__state.a = a
            }
        }), Object.defineProperty(i.prototype, "hex", {
            get: function() {
                return "HEX" !== !this.__state.space && (this.__state.hex = b.rgb_to_hex(this.r, this.g, this.b)), this.__state.hex
            },
            set: function(a) {
                this.__state.space = "HEX", this.__state.hex = a
            }
        }), i
    }), define("dat/controllers/ColorController", ["dat/controllers/Controller", "dat/dom/dom", "dat/color/Color", "dat/color/interpret", "dat/utils/common"], function(a, b, c, d, e) {
        function f(a, b, c, d) {
            a.style.background = "", e.each(i, function(e) {
                a.style.cssText += "background: " + e + "linear-gradient(" + b + ", " + c + " 0%, " + d + " 100%); "
            })
        }

        function g(a) {
            a.style.background = "", a.style.cssText += "background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);", a.style.cssText += "background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);", a.style.cssText += "background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);", a.style.cssText += "background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);", a.style.cssText += "background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);"
        }
        var h = function(a, i) {
            function j(a) {
                n(a), b.bind(window, "mousemove", n), b.bind(window, "mouseup", k)
            }

            function k() {
                b.unbind(window, "mousemove", n), b.unbind(window, "mouseup", k)
            }

            function l() {
                var a = d(this.value);
                a !== !1 ? (p.__color.__state = a, p.setValue(p.__color.toOriginal())) : this.value = p.__color.toString()
            }

            function m() {
                b.unbind(window, "mousemove", o), b.unbind(window, "mouseup", m)
            }

            function n(a) {
                a.preventDefault();
                var c = b.getWidth(p.__saturation_field),
                    d = b.getOffset(p.__saturation_field),
                    e = (a.clientX - d.left + document.body.scrollLeft) / c,
                    f = 1 - (a.clientY - d.top + document.body.scrollTop) / c;
                return f > 1 ? f = 1 : 0 > f && (f = 0), e > 1 ? e = 1 : 0 > e && (e = 0), p.__color.v = f, p.__color.s = e, p.setValue(p.__color.toOriginal()), !1
            }

            function o(a) {
                a.preventDefault();
                var c = b.getHeight(p.__hue_field),
                    d = b.getOffset(p.__hue_field),
                    e = 1 - (a.clientY - d.top + document.body.scrollTop) / c;
                return e > 1 ? e = 1 : 0 > e && (e = 0), p.__color.h = 360 * e, p.setValue(p.__color.toOriginal()), !1
            }
            h.superclass.call(this, a, i), this.__color = new c(this.getValue()), this.__temp = new c(0);
            var p = this;
            this.domElement = document.createElement("div"), b.makeSelectable(this.domElement, !1), this.__selector = document.createElement("div"), this.__selector.className = "selector", this.__saturation_field = document.createElement("div"), this.__saturation_field.className = "saturation-field", this.__field_knob = document.createElement("div"), this.__field_knob.className = "field-knob", this.__field_knob_border = "2px solid ", this.__hue_knob = document.createElement("div"), this.__hue_knob.className = "hue-knob", this.__hue_field = document.createElement("div"), this.__hue_field.className = "hue-field", this.__input = document.createElement("input"), this.__input.type = "text", this.__input_textShadow = "0 1px 1px ", b.bind(this.__input, "keydown", function(a) {
                13 === a.keyCode && l.call(this)
            }), b.bind(this.__input, "blur", l), b.bind(this.__selector, "mousedown", function() {
                b.addClass(this, "drag").bind(window, "mouseup", function() {
                    b.removeClass(p.__selector, "drag")
                })
            });
            var q = document.createElement("div");
            e.extend(this.__selector.style, {
                width: "122px",
                height: "102px",
                padding: "3px",
                backgroundColor: "#222",
                boxShadow: "0px 1px 3px rgba(0,0,0,0.3)"
            }), e.extend(this.__field_knob.style, {
                position: "absolute",
                width: "12px",
                height: "12px",
                border: this.__field_knob_border + (this.__color.v < .5 ? "#fff" : "#000"),
                boxShadow: "0px 1px 3px rgba(0,0,0,0.5)",
                borderRadius: "12px",
                zIndex: 1
            }), e.extend(this.__hue_knob.style, {
                position: "absolute",
                width: "15px",
                height: "2px",
                borderRight: "4px solid #fff",
                zIndex: 1
            }), e.extend(this.__saturation_field.style, {
                width: "100px",
                height: "100px",
                border: "1px solid #555",
                marginRight: "3px",
                display: "inline-block",
                cursor: "pointer"
            }), e.extend(q.style, {
                width: "100%",
                height: "100%",
                background: "none"
            }), f(q, "top", "rgba(0,0,0,0)", "#000"), e.extend(this.__hue_field.style, {
                width: "15px",
                height: "100px",
                display: "inline-block",
                border: "1px solid #555",
                cursor: "ns-resize"
            }), g(this.__hue_field), e.extend(this.__input.style, {
                outline: "none",
                textAlign: "center",
                color: "#fff",
                border: 0,
                fontWeight: "bold",
                textShadow: this.__input_textShadow + "rgba(0,0,0,0.7)"
            }), b.bind(this.__saturation_field, "mousedown", j), b.bind(this.__field_knob, "mousedown", j), b.bind(this.__hue_field, "mousedown", function(a) {
                o(a), b.bind(window, "mousemove", o), b.bind(window, "mouseup", m)
            }), this.__saturation_field.appendChild(q), this.__selector.appendChild(this.__field_knob), this.__selector.appendChild(this.__saturation_field), this.__selector.appendChild(this.__hue_field), this.__hue_field.appendChild(this.__hue_knob), this.domElement.appendChild(this.__input), this.domElement.appendChild(this.__selector), this.updateDisplay()
        };
        h.superclass = a, e.extend(h.prototype, a.prototype, {
            updateDisplay: function() {
                var a = d(this.getValue());
                if (a !== !1) {
                    var b = !1;
                    e.each(c.COMPONENTS, function(c) {
                        return e.isUndefined(a[c]) || e.isUndefined(this.__color.__state[c]) || a[c] === this.__color.__state[c] ? void 0 : (b = !0, {})
                    }, this), b && e.extend(this.__color.__state, a)
                }
                e.extend(this.__temp.__state, this.__color.__state), this.__temp.a = 1;
                var g = this.__color.v < .5 || this.__color.s > .5 ? 255 : 0,
                    h = 255 - g;
                e.extend(this.__field_knob.style, {
                    marginLeft: 100 * this.__color.s - 7 + "px",
                    marginTop: 100 * (1 - this.__color.v) - 7 + "px",
                    backgroundColor: this.__temp.toString(),
                    border: this.__field_knob_border + "rgb(" + g + "," + g + "," + g + ")"
                }), this.__hue_knob.style.marginTop = 100 * (1 - this.__color.h / 360) + "px", this.__temp.s = 1, this.__temp.v = 1, f(this.__saturation_field, "left", "#fff", this.__temp.toString()), e.extend(this.__input.style, {
                    backgroundColor: this.__input.value = this.__color.toString(),
                    color: "rgb(" + g + "," + g + "," + g + ")",
                    textShadow: this.__input_textShadow + "rgba(" + h + "," + h + "," + h + ",.7)"
                })
            }
        });
        var i = ["-moz-", "-o-", "-webkit-", "-ms-", ""];
        return h
    }), define("dat/utils/requestAnimationFrame", [], function() {
        return window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || function(a) {
            window.setTimeout(a, 1e3 / 60)
        }
    }), define("dat/dom/CenteredDiv", ["dat/dom/dom", "dat/utils/common"], function(a, b) {
        var c = function() {
            this.backgroundElement = document.createElement("div"), b.extend(this.backgroundElement.style, {
                backgroundColor: "rgba(0,0,0,0.8)",
                top: 0,
                left: 0,
                display: "none",
                zIndex: "1000",
                opacity: 0,
                WebkitTransition: "opacity 0.2s linear"
            }), a.makeFullscreen(this.backgroundElement), this.backgroundElement.style.position = "fixed", this.domElement = document.createElement("div"), b.extend(this.domElement.style, {
                position: "fixed",
                display: "none",
                zIndex: "1001",
                opacity: 0,
                WebkitTransition: "-webkit-transform 0.2s ease-out, opacity 0.2s linear"
            }), document.body.appendChild(this.backgroundElement), document.body.appendChild(this.domElement);
            var c = this;
            a.bind(this.backgroundElement, "click", function() {
                c.hide()
            })
        };
        return c.prototype.show = function() {
            var a = this;
            this.backgroundElement.style.display = "block", this.domElement.style.display = "block", this.domElement.style.opacity = 0, this.domElement.style.webkitTransform = "scale(1.1)", this.layout(), b.defer(function() {
                a.backgroundElement.style.opacity = 1, a.domElement.style.opacity = 1, a.domElement.style.webkitTransform = "scale(1)"
            })
        }, c.prototype.hide = function() {
            var b = this,
                c = function() {
                    b.domElement.style.display = "none", b.backgroundElement.style.display = "none", a.unbind(b.domElement, "webkitTransitionEnd", c), a.unbind(b.domElement, "transitionend", c), a.unbind(b.domElement, "oTransitionEnd", c)
                };
            a.bind(this.domElement, "webkitTransitionEnd", c), a.bind(this.domElement, "transitionend", c), a.bind(this.domElement, "oTransitionEnd", c), this.backgroundElement.style.opacity = 0, this.domElement.style.opacity = 0, this.domElement.style.webkitTransform = "scale(1.1)"
        }, c.prototype.layout = function() {
            this.domElement.style.left = window.innerWidth / 2 - a.getWidth(this.domElement) / 2 + "px", this.domElement.style.top = window.innerHeight / 2 - a.getHeight(this.domElement) / 2 + "px"
        }, c
    }), define("dat/gui/GUI", ["dat/utils/css", "text!dat/gui/saveDialogue.html", "text!dat/gui/style.css", "dat/controllers/factory", "dat/controllers/Controller", "dat/controllers/BooleanController", "dat/controllers/FunctionController", "dat/controllers/NumberControllerBox", "dat/controllers/NumberControllerSlider", "dat/controllers/OptionController", "dat/controllers/ColorController", "dat/utils/requestAnimationFrame", "dat/dom/CenteredDiv", "dat/dom/dom", "dat/utils/common"], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o) {
        function p(a, b, c, f) {
            if (void 0 === b[c]) throw new Error("Object " + b + ' has no property "' + c + '"');
            var g;
            if (f.color) g = new k(b, c);
            else {
                var h = [b, c].concat(f.factoryArgs);
                g = d.apply(a, h)
            }
            f.before instanceof e && (f.before = f.before.__li), s(a, g), n.addClass(g.domElement, "c");
            var i = document.createElement("span");
            n.addClass(i, "property-name"), i.innerHTML = g.property;
            var j = document.createElement("div");
            j.appendChild(i), j.appendChild(g.domElement);
            var l = q(a, j, f.before);
            return n.addClass(l, M.CLASS_CONTROLLER_ROW), n.addClass(l, typeof g.getValue()), r(a, l, g), a.__controllers.push(g), g
        }

        function q(a, b, c) {
            var d = document.createElement("li");
            return b && d.appendChild(b), c ? a.__ul.insertBefore(d, params.before) : a.__ul.appendChild(d), a.onResize(), d
        }

        function r(a, b, c) {
            if (c.__li = b, c.__gui = a, o.extend(c, {
                    options: function(b) {
                        return arguments.length > 1 ? (c.remove(), p(a, c.object, c.property, {
                            before: c.__li.nextElementSibling,
                            factoryArgs: [o.toArray(arguments)]
                        })) : o.isArray(b) || o.isObject(b) ? (c.remove(), p(a, c.object, c.property, {
                            before: c.__li.nextElementSibling,
                            factoryArgs: [b]
                        })) : void 0
                    },
                    name: function(a) {
                        return c.__li.firstElementChild.firstElementChild.innerHTML = a, c
                    },
                    listen: function() {
                        return c.__gui.listen(c), c
                    },
                    remove: function() {
                        return c.__gui.remove(c), c
                    }
                }), c instanceof i) {
                var d = new h(c.object, c.property, {
                    min: c.__min,
                    max: c.__max,
                    step: c.__step
                });
                o.each(["updateDisplay", "onChange", "onFinishChange"], function(a) {
                    var b = c[a],
                        e = d[a];
                    c[a] = d[a] = function() {
                        var a = Array.prototype.slice.call(arguments);
                        return b.apply(c, a), e.apply(d, a)
                    }
                }), n.addClass(b, "has-slider"), c.domElement.insertBefore(d.domElement, c.domElement.firstElementChild)
            } else if (c instanceof h) {
                var e = function(b) {
                    return o.isNumber(c.__min) && o.isNumber(c.__max) ? (c.remove(), p(a, c.object, c.property, {
                        before: c.__li.nextElementSibling,
                        factoryArgs: [c.__min, c.__max, c.__step]
                    })) : b
                };
                c.min = o.compose(e, c.min), c.max = o.compose(e, c.max)
            } else c instanceof f ? (n.bind(b, "click", function() {
                n.fakeEvent(c.__checkbox, "click")
            }), n.bind(c.__checkbox, "click", function(a) {
                a.stopPropagation()
            })) : c instanceof g ? (n.bind(b, "click", function() {
                n.fakeEvent(c.__button, "click")
            }), n.bind(b, "mouseover", function() {
                n.addClass(c.__button, "hover")
            }), n.bind(b, "mouseout", function() {
                n.removeClass(c.__button, "hover")
            })) : c instanceof k && (n.addClass(b, "color"), c.updateDisplay = o.compose(function(a) {
                return b.style.borderLeftColor = c.__color.toString(), a
            }, c.updateDisplay), c.updateDisplay());
            c.setValue = o.compose(function(b) {
                return a.getRoot().__preset_select && c.isModified() && A(a.getRoot(), !0), b
            }, c.setValue)
        }

        function s(a, b) {
            var c = a.getRoot(),
                d = c.__rememberedObjects.indexOf(b.object);
            if (-1 != d) {
                var e = c.__rememberedObjectIndecesToControllers[d];
                if (void 0 === e && (e = {}, c.__rememberedObjectIndecesToControllers[d] = e), e[b.property] = b, c.load && c.load.remembered) {
                    var f, g = c.load.remembered;
                    if (g[a.preset]) f = g[a.preset];
                    else {
                        if (!g[H]) return;
                        f = g[H]
                    }
                    if (f[d] && void 0 !== f[d][b.property]) {
                        var h = f[d][b.property];
                        b.initialValue = h, b.setValue(h)
                    }
                }
            }
        }

        function t(a, b) {
            return document.location.href + "." + b
        }

        function u(a) {
            function b() {
                j.style.display = a.useLocalStorage ? "block" : "none"
            }
            var c = a.__save_row = document.createElement("li");
            n.addClass(a.domElement, "has-save"), a.__ul.insertBefore(c, a.__ul.firstChild), n.addClass(c, "save-row");
            var d = document.createElement("span");
            d.innerHTML = "&nbsp;", n.addClass(d, "button gears");
            var e = document.createElement("span");
            e.innerHTML = "Save", n.addClass(e, "button"), n.addClass(e, "save");
            var f = document.createElement("span");
            f.innerHTML = "New", n.addClass(f, "button"), n.addClass(f, "save-as");
            var g = document.createElement("span");
            g.innerHTML = "Revert", n.addClass(g, "button"), n.addClass(g, "revert");
            var h = a.__preset_select = document.createElement("select");
            if (a.load && a.load.remembered ? o.each(a.load.remembered, function(b, c) {
                    y(a, c, c == a.preset)
                }) : y(a, H, !1), n.bind(h, "change", function() {
                    for (var b = 0; b < a.__preset_select.length; b++) a.__preset_select[b].innerHTML = a.__preset_select[b].value;
                    a.preset = this.value
                }), c.appendChild(h), c.appendChild(d), c.appendChild(e), c.appendChild(f), c.appendChild(g), I) {
                var i = document.getElementById("dg-save-locally"),
                    j = document.getElementById("dg-local-explain");
                i.style.display = "block";
                var k = document.getElementById("dg-local-storage");
                "true" === localStorage.getItem(t(a, "isLocal")) && k.setAttribute("checked", "checked"), b(), n.bind(k, "change", function() {
                    a.useLocalStorage = !a.useLocalStorage, b()
                })
            }
            var l = document.getElementById("dg-new-constructor");
            n.bind(l, "keydown", function(a) {
                !a.metaKey || 67 !== a.which && 67 != a.keyCode || C.hide()
            }), n.bind(d, "click", function() {
                l.innerHTML = JSON.stringify(a.getSaveObject(), void 0, 2), C.show(), l.focus(), l.select()
            }), n.bind(e, "click", function() {
                a.save()
            }), n.bind(f, "click", function() {
                var b = prompt("Enter a new preset name.");
                b && a.saveAs(b)
            }), n.bind(g, "click", function() {
                a.revert()
            })
        }

        function v(a) {
            function b(b) {
                return b.preventDefault(), e = b.clientX, n.addClass(a.__closeButton, M.CLASS_DRAG), n.bind(window, "mousemove", c), n.bind(window, "mouseup", d), !1
            }

            function c(b) {
                return b.preventDefault(), a.width += e - b.clientX, a.onResize(), e = b.clientX, !1
            }

            function d() {
                n.removeClass(a.__closeButton, M.CLASS_DRAG), n.unbind(window, "mousemove", c), n.unbind(window, "mouseup", d)
            }
            a.__resize_handle = document.createElement("div"), o.extend(a.__resize_handle.style, {
                width: "6px",
                marginLeft: "-3px",
                height: "200px",
                cursor: "ew-resize",
                position: "absolute"
            });
            var e;
            n.bind(a.__resize_handle, "mousedown", b), n.bind(a.__closeButton, "mousedown", b), a.domElement.insertBefore(a.__resize_handle, a.domElement.firstElementChild)
        }

        function w(a, b) {
            a.domElement.style.width = b + "px", a.__save_row && a.autoPlace && (a.__save_row.style.width = b + "px"), a.__closeButton && (a.__closeButton.style.width = b + "px")
        }

        function x(a, b) {
            var c = {};
            return o.each(a.__rememberedObjects, function(d, e) {
                var f = {},
                    g = a.__rememberedObjectIndecesToControllers[e];
                o.each(g, function(a, c) {
                    f[c] = b ? a.initialValue : a.getValue()
                }), c[e] = f
            }), c
        }

        function y(a, b, c) {
            var d = document.createElement("option");
            d.innerHTML = b, d.value = b, a.__preset_select.appendChild(d), c && (a.__preset_select.selectedIndex = a.__preset_select.length - 1)
        }

        function z(a) {
            for (var b = 0; b < a.__preset_select.length; b++) a.__preset_select[b].value == a.preset && (a.__preset_select.selectedIndex = b)
        }

        function A(a, b) {
            var c = a.__preset_select[a.__preset_select.selectedIndex];
            c.innerHTML = b ? c.value + "*" : c.value
        }

        function B(a) {
            0 != a.length && l(function() {
                B(a)
            }), o.each(a, function(a) {
                a.updateDisplay()
            })
        }
        a.inject(c);
        var C, D, E = "dg",
            F = 72,
            G = 20,
            H = "Default",
            I = function() {
                try {
                    return "localStorage" in window && null !== window.localStorage
                } catch (a) {
                    return !1
                }
            }(),
            J = !0,
            K = !1,
            L = [],
            M = function(a) {
                function b() {
                    var a = c.getRoot();
                    a.width += 1, o.defer(function() {
                        a.width -= 1
                    })
                }
                var c = this;
                this.domElement = document.createElement("div"), this.__ul = document.createElement("ul"), this.domElement.appendChild(this.__ul), n.addClass(this.domElement, E), this.__folders = {}, this.__controllers = [], this.__rememberedObjects = [], this.__rememberedObjectIndecesToControllers = [], this.__listening = [], a = a || {}, a = o.defaults(a, {
                    autoPlace: !0,
                    width: M.DEFAULT_WIDTH
                }), a = o.defaults(a, {
                    resizable: a.autoPlace,
                    hideable: a.autoPlace
                }), o.isUndefined(a.load) ? a.load = {
                    preset: H
                } : a.preset && (a.load.preset = a.preset), o.isUndefined(a.parent) && a.hideable && L.push(this), a.resizable = o.isUndefined(a.parent) && a.resizable, a.autoPlace && o.isUndefined(a.scrollable) && (a.scrollable = !0);
                var d, e = I && "true" === localStorage.getItem(t(this, "isLocal"));
                if (Object.defineProperties(this, {
                        parent: {
                            get: function() {
                                return a.parent
                            }
                        },
                        scrollable: {
                            get: function() {
                                return a.scrollable
                            }
                        },
                        autoPlace: {
                            get: function() {
                                return a.autoPlace
                            }
                        },
                        preset: {
                            get: function() {
                                return c.parent ? c.getRoot().preset : a.load.preset
                            },
                            set: function(b) {
                                c.parent ? c.getRoot().preset = b : a.load.preset = b, z(this), c.revert()
                            }
                        },
                        width: {
                            get: function() {
                                return a.width
                            },
                            set: function(b) {
                                a.width = b, w(c, b)
                            }
                        },
                        name: {
                            get: function() {
                                return a.name
                            },
                            set: function(b) {
                                a.name = b, g && (g.innerHTML = a.name)
                            }
                        },
                        closed: {
                            get: function() {
                                return a.closed
                            },
                            set: function(b) {
                                a.closed = b, a.closed ? n.addClass(c.__ul, M.CLASS_CLOSED) : n.removeClass(c.__ul, M.CLASS_CLOSED), this.onResize(), c.__closeButton && (c.__closeButton.innerHTML = b ? M.TEXT_OPEN : M.TEXT_CLOSED)
                            }
                        },
                        load: {
                            get: function() {
                                return a.load
                            }
                        },
                        useLocalStorage: {
                            get: function() {
                                return e
                            },
                            set: function(a) {
                                I && (e = a, a ? n.bind(window, "unload", d) : n.unbind(window, "unload", d), localStorage.setItem(t(c, "isLocal"), a))
                            }
                        }
                    }), o.isUndefined(a.parent)) {
                    if (a.closed = !1, n.addClass(this.domElement, M.CLASS_MAIN), n.makeSelectable(this.domElement, !1), I && e) {
                        c.useLocalStorage = !0;
                        var f = localStorage.getItem(t(this, "gui"));
                        f && (a.load = JSON.parse(f))
                    }
                    this.__closeButton = document.createElement("div"), this.__closeButton.innerHTML = M.TEXT_CLOSED, n.addClass(this.__closeButton, M.CLASS_CLOSE_BUTTON), this.domElement.appendChild(this.__closeButton), n.bind(this.__closeButton, "click", function() {
                        c.closed = !c.closed
                    })
                } else {
                    void 0 === a.closed && (a.closed = !0);
                    var g = document.createTextNode(a.name);
                    n.addClass(g, "controller-name");
                    var h = q(c, g),
                        i = function(a) {
                            return a.preventDefault(), c.closed = !c.closed, !1
                        };
                    n.addClass(this.__ul, M.CLASS_CLOSED), n.addClass(h, "title"), n.bind(h, "click", i), a.closed || (this.closed = !1)
                }
                a.autoPlace && (o.isUndefined(a.parent) && (J && (D = document.createElement("div"), n.addClass(D, E), n.addClass(D, M.CLASS_AUTO_PLACE_CONTAINER), document.body.appendChild(D), J = !1), D.appendChild(this.domElement), n.addClass(this.domElement, M.CLASS_AUTO_PLACE)), this.parent || w(c, a.width)), n.bind(window, "resize", function() {
                    c.onResize()
                }), n.bind(this.__ul, "webkitTransitionEnd", function() {
                    c.onResize()
                }), n.bind(this.__ul, "transitionend", function() {
                    c.onResize()
                }), n.bind(this.__ul, "oTransitionEnd", function() {
                    c.onResize()
                }), this.onResize(), a.resizable && v(this), d = function() {
                    I && "true" === localStorage.getItem(t(c, "isLocal")) && localStorage.setItem(t(c, "gui"), JSON.stringify(c.getSaveObject()))
                }, this.saveToLocalStorageIfPossible = d;
                c.getRoot();
                a.parent || b()
            };
        return M.toggleHide = function() {
            K = !K, o.each(L, function(a) {
                a.domElement.style.zIndex = K ? -999 : 999, a.domElement.style.opacity = K ? 0 : 1
            })
        }, M.CLASS_AUTO_PLACE = "a", M.CLASS_AUTO_PLACE_CONTAINER = "ac", M.CLASS_MAIN = "main", M.CLASS_CONTROLLER_ROW = "cr", M.CLASS_TOO_TALL = "taller-than-window", M.CLASS_CLOSED = "closed", M.CLASS_CLOSE_BUTTON = "close-button", M.CLASS_DRAG = "drag", M.DEFAULT_WIDTH = 245, M.TEXT_CLOSED = "Close Controls", M.TEXT_OPEN = "Open Controls", n.bind(window, "keydown", function(a) {
            "text" === document.activeElement.type || a.which !== F && a.keyCode != F || M.toggleHide()
        }, !1), o.extend(M.prototype, {
            add: function(a, b) {
                return p(this, a, b, {
                    factoryArgs: Array.prototype.slice.call(arguments, 2)
                })
            },
            addColor: function(a, b) {
                return p(this, a, b, {
                    color: !0
                })
            },
            remove: function(a) {
                this.__ul.removeChild(a.__li), this.__controllers.slice(this.__controllers.indexOf(a), 1);
                var b = this;
                o.defer(function() {
                    b.onResize()
                })
            },
            destroy: function() {
                this.autoPlace && D.removeChild(this.domElement)
            },
            addFolder: function(a) {
                if (void 0 !== this.__folders[a]) throw new Error('You already have a folder in this GUI by the name "' + a + '"');
                var b = {
                    name: a,
                    parent: this
                };
                b.autoPlace = this.autoPlace, this.load && this.load.folders && this.load.folders[a] && (b.closed = this.load.folders[a].closed, b.load = this.load.folders[a]);
                var c = new M(b);
                this.__folders[a] = c;
                var d = q(this, c.domElement);
                return n.addClass(d, "folder"), c
            },
            open: function() {
                this.closed = !1
            },
            close: function() {
                this.closed = !0
            },
            onResize: function() {
                var a = this.getRoot();
                if (a.scrollable) {
                    var b = n.getOffset(a.__ul).top,
                        c = 0;
                    o.each(a.__ul.childNodes, function(b) {
                        a.autoPlace && b === a.__save_row || (c += n.getHeight(b))
                    }), window.innerHeight - b - G < c ? (n.addClass(a.domElement, M.CLASS_TOO_TALL), a.__ul.style.height = window.innerHeight - b - G + "px") : (n.removeClass(a.domElement, M.CLASS_TOO_TALL), a.__ul.style.height = "auto")
                }
                a.__resize_handle && o.defer(function() {
                    a.__resize_handle.style.height = a.__ul.offsetHeight + "px"
                }), a.__closeButton && (a.__closeButton.style.width = a.width + "px")
            },
            remember: function() {
                if (o.isUndefined(C) && (C = new m, C.domElement.innerHTML = b), this.parent) throw new Error("You can only call remember on a top level GUI.");
                var a = this;
                o.each(Array.prototype.slice.call(arguments), function(b) {
                    0 == a.__rememberedObjects.length && u(a), -1 == a.__rememberedObjects.indexOf(b) && a.__rememberedObjects.push(b)
                }), this.autoPlace && w(this, this.width)
            },
            getRoot: function() {
                for (var a = this; a.parent;) a = a.parent;
                return a
            },
            getSaveObject: function() {
                var a = this.load;
                return a.closed = this.closed, this.__rememberedObjects.length > 0 && (a.preset = this.preset, a.remembered || (a.remembered = {}), a.remembered[this.preset] = x(this)), a.folders = {}, o.each(this.__folders, function(b, c) {
                    a.folders[c] = b.getSaveObject()
                }), a
            },
            save: function() {
                this.load.remembered || (this.load.remembered = {}), this.load.remembered[this.preset] = x(this), A(this, !1), this.saveToLocalStorageIfPossible()
            },
            saveAs: function(a) {
                this.load.remembered || (this.load.remembered = {}, this.load.remembered[H] = x(this, !0)), this.load.remembered[a] = x(this), this.preset = a, y(this, a, !0), this.saveToLocalStorageIfPossible()
            },
            revert: function(a) {
                o.each(this.__controllers, function(b) {
                    this.getRoot().load.remembered ? s(a || this.getRoot(), b) : b.setValue(b.initialValue)
                }, this), o.each(this.__folders, function(a) {
                    a.revert(a)
                }), a || A(this.getRoot(), !1)
            },
            listen: function(a) {
                var b = 0 == this.__listening.length;
                this.__listening.push(a), b && B(this.__listening)
            }
        }), M
    }), define("comic/audio/Atmos", ["underscore", "utils/inherit", "audio/Thump", "dat/gui/GUI"], function(a, b, c, d) {
        var e = function(b) {
                this.thumpId = b, this._volumeIn = 0, this._volumeOut = 0, a.throttle(this.update, 1e3 / 30), this.update()
            },
            f = e.prototype;
        Object.defineProperties(f, {
            volumeIn: {
                set: function(a) {
                    a > 1 && (a = 1), 0 > a && (a = 0), this._volumeIn = a, this.update()
                },
                get: function() {
                    return this._volumeIn
                }
            },
            volumeOut: {
                set: function(a) {
                    a > 1 && (a = 1), 0 > a && (a = 0), this._volumeOut = a, this.update()
                },
                get: function() {
                    return this._volumeOut
                }
            }
        });
        var f = e.prototype;
        return f.update = function() {
            this.applyVolume()
        }, f.applyVolume = function() {
            if (this.volumeMixed = this._volumeIn * this._volumeOut, !this.thumpInstance && this.volumeMixed > 0 ? (console.log(this.thumpId, "loading"), this.thumpInstance = c.get(this.thumpId), this.thumpInstance.load()) : this.thumpInstance && this.volumeMixed <= 0 && (console.log(this.thumpId, "pause"), this.thumpInstance.pause(), this.thumpInstance = null, this.guiFolder && this.guiFolder.close()), this.thumpInstance && this.thumpInstance.isLoaded && !this.thumpInstance.isPlaying)
                if (console.log(this.thumpId, "play"), this.thumpInstance.play(-1), e.gui && !this.guiFolder) {
                    var a = Math.floor(1e5 * Math.random());
                    this.guiFolder = e.gui.addFolder(this.thumpId + " UID: " + a), this.guiFolder.add(this, "_volumeIn").listen(), this.guiFolder.add(this, "_volumeOut").listen(), this.guiFolder.open()
                } else this.guiFolder && this.guiFolder.open();
            this.thumpInstance && this.thumpInstance.volume != this.volumeMixed && (this.thumpInstance.volume = this.volumeMixed)
        }, e.initialized = function() {
            return "?samMode" == window.location.search && (e.gui = new d), !0
        }(), e
    }), define("comic/audio/SoundEffect", ["utils/inherit", "audio/Thump"], function(a, b) {
        var c = function(a, b) {
                this.thumpId = a, this.volume = isNaN(b) ? 1 : b
            },
            d = c.prototype;
        return d.play = function() {
            this.playedOnce || (this.playedOnce = !0, this.thumpInstance = b.get(this.thumpId), this.thumpInstance.volume = this.volume, this.thumpInstance.play())
        }, c
    }), define("math/ArmyKnife", [], function() {
        var a = function() {
            throw "Only static methods to be found here."
        };
        return a.map = function(a, b, c, d, e, f, g, h) {
            f = void 0 === f ? !1 : f, g = void 0 === g ? !0 : g, h = void 0 === h ? !0 : h;
            var i = (a - b) / (c - b),
                j = i * (e - d) + d;
            return f && (j = Math.round(j)), g && d > j ? d : h && j > e ? e : j
        }, a.radiansToDegrees = function(a) {
            return 180 * a / Math.PI
        }, a.radiansToDegrees = function(a) {
            return 180 * a / Math.PI
        }, a.rangeToPercent = function(a, b, c, d, e) {
            return d = void 0 === d ? !0 : d, e = void 0 === e ? !0 : e, d && b > a ? 0 : e && a > c ? 1 : (a - b) / (c - b)
        }, a.percentToRange = function(a, b, c) {
            return a * (c - b) + b
        }, a.sign = function(a) {
            return 0 > a ? -1 : 1
        }, a.between = function(a, b, c) {
            var d = Math.min(b, c),
                e = Math.max(b, c);
            return a >= d && e >= a
        }, a
    }), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a(a, b, c) {
            this.type = a, this.target = null, this.currentTarget = null, this.eventPhase = 0, this.bubbles = !!b, this.cancelable = !!c, this.timeStamp = (new Date).getTime(), this.defaultPrevented = !1, this.propagationStopped = !1, this.immediatePropagationStopped = !1, this.removed = !1
        }
        var b = a.prototype;
        b.preventDefault = function() {
            this.defaultPrevented = this.cancelable && !0
        }, b.stopPropagation = function() {
            this.propagationStopped = !0
        }, b.stopImmediatePropagation = function() {
            this.immediatePropagationStopped = this.propagationStopped = !0
        }, b.remove = function() {
            this.removed = !0
        }, b.clone = function() {
            return new a(this.type, this.bubbles, this.cancelable)
        }, b.set = function(a) {
            for (var b in a) this[b] = a[b];
            return this
        }, b.toString = function() {
            return "[Event (type=" + this.type + ")]"
        }, createjs.Event = a
    }(), define("createjsEvent", function() {}), this.createjs = this.createjs || {},
    function() {
        "use strict";

        function a() {
            this._listeners = null, this._captureListeners = null
        }
        var b = a.prototype;
        a.initialize = function(a) {
            a.addEventListener = b.addEventListener, a.on = b.on, a.removeEventListener = a.off = b.removeEventListener, a.removeAllEventListeners = b.removeAllEventListeners, a.hasEventListener = b.hasEventListener, a.dispatchEvent = b.dispatchEvent, a._dispatchEvent = b._dispatchEvent, a.willTrigger = b.willTrigger
        }, b.addEventListener = function(a, b, c) {
            var d;
            d = c ? this._captureListeners = this._captureListeners || {} : this._listeners = this._listeners || {};
            var e = d[a];
            return e && this.removeEventListener(a, b, c), e = d[a], e ? e.push(b) : d[a] = [b], b
        }, b.on = function(a, b, c, d, e, f) {
            return b.handleEvent && (c = c || b, b = b.handleEvent), c = c || this, this.addEventListener(a, function(a) {
                b.call(c, a, e), d && a.remove()
            }, f)
        }, b.removeEventListener = function(a, b, c) {
            var d = c ? this._captureListeners : this._listeners;
            if (d) {
                var e = d[a];
                if (e)
                    for (var f = 0, g = e.length; g > f; f++)
                        if (e[f] == b) {
                            1 == g ? delete d[a] : e.splice(f, 1);
                            break
                        }
            }
        }, b.off = b.removeEventListener, b.removeAllEventListeners = function(a) {
            a ? (this._listeners && delete this._listeners[a], this._captureListeners && delete this._captureListeners[a]) : this._listeners = this._captureListeners = null
        }, b.dispatchEvent = function(a) {
            if ("string" == typeof a) {
                var b = this._listeners;
                if (!b || !b[a]) return !1;
                a = new createjs.Event(a)
            } else a.target && a.clone && (a = a.clone());
            try {
                a.target = this
            } catch (c) {}
            if (a.bubbles && this.parent) {
                for (var d = this, e = [d]; d.parent;) e.push(d = d.parent);
                var f, g = e.length;
                for (f = g - 1; f >= 0 && !a.propagationStopped; f--) e[f]._dispatchEvent(a, 1 + (0 == f));
                for (f = 1; g > f && !a.propagationStopped; f++) e[f]._dispatchEvent(a, 3)
            } else this._dispatchEvent(a, 2);
            return a.defaultPrevented
        }, b.hasEventListener = function(a) {
            var b = this._listeners,
                c = this._captureListeners;
            return !!(b && b[a] || c && c[a])
        }, b.willTrigger = function(a) {
            for (var b = this; b;) {
                if (b.hasEventListener(a)) return !0;
                b = b.parent
            }
            return !1
        }, b.toString = function() {
            return "[EventDispatcher]"
        }, b._dispatchEvent = function(a, b) {
            var c, d = 1 == b ? this._captureListeners : this._listeners;
            if (a && d) {
                var e = d[a.type];
                if (!e || !(c = e.length)) return;
                try {
                    a.currentTarget = this
                } catch (f) {}
                try {
                    a.eventPhase = b
                } catch (f) {}
                a.removed = !1, e = e.slice();
                for (var g = 0; c > g && !a.immediatePropagationStopped; g++) {
                    var h = e[g];
                    h.handleEvent ? h.handleEvent(a) : h(a), a.removed && (this.off(a.type, h, 1 == b), a.removed = !1)
                }
            }
        }, createjs.EventDispatcher = a
    }(), define("createjsEventDispatcher", ["createjsEvent"], function(a) {
        return function() {
            var b;
            return b || a.createjs
        }
    }(this)), define("comic/display/Image", ["underscore", "threejs", "createjsEventDispatcher", "config"], function(a, b, c, d) {
        var e = function(c, e, f, g, h) {
                h = h || {};
                var i = null;
                c && (this.imgURL = this.rewriteTabletURL(c), this.imgURL = d.imagesBasePath + this.imgURL), this.crossOrigin = d.isCORSOnImagesAvailable, this.width = e || 100, this.height = f || 100, this.scale = g || 1, this.bufferGeometry = void 0 === h.bufferGeometry ? !0 : h.bufferGeometry, this.widthSegments = h.widthSegments || 1, this.heightSegments = h.heightSegments || 1, this.color = isNaN(h.color) ? null : h.color, this.cacheTexture = void 0 === h.cacheTexture ? !0 : h.cacheTexture, i = this.bufferGeometry ? b.PlaneBufferGeometry : b.PlaneGeometry, this.geometry = new i(this.width * this.scale, this.height * this.scale, this.widthSegments, this.heightSegments), this.texture = this.getTexture(this.cacheTexture, c), this.material = new b.MeshBasicMaterial({
                    color: this.color
                }), this.material.shading = b.NoShading, this.material.needsUpdate = !0, this.mesh = new b.Mesh(this.geometry, this.material), this.material.transparent = !0, a.bindAll(this, "onLoad")
            },
            f = e.prototype;
        return c.EventDispatcher.initialize(f), Object.defineProperties(f, {
            img: {
                set: function(a) {
                    this._img = a, this.texture && (this.texture.image = this._img, this.texture.needsUpdate = !0, this.material.map = this.texture, this.material.needsUpdate = !0)
                },
                get: function() {
                    return this._img
                }
            }
        }), e.textureCache = [], f.rewriteTabletURL = function(a) {
            return "tablet" == Detectizr.device.type || "mobile" == Detectizr.device.type ? a.split("images/").join("images-tablet/") : a
        }, f.load = function() {
            this.loader = new b.ImageLoader, this.crossOrigin && (this.loader.crossOrigin = "anonymous"), this.loader.load(this.imgURL, this.onLoad)
        }, f.getTexture = function(c, d) {
            var f = a.findWhere(e.textureCache, {
                imgURL: d
            });
            if (f) return f.texture;
            var g = new b.Texture;
            return g.minFilter = b.LinearFilter, c && e.textureCache.push({
                imgURL: d,
                texture: g
            }), g
        }, f.removeTextureFromCache = function(a) {
            for (var b = [], c = 0; c < e.textureCache.length; c++) {
                var d = e.textureCache[c];
                d.texture != a && b.push(d)
            }
            e.textureCache = b
        }, f.onLoad = function(b) {
            this.loaded = !0, this.disposed || a.defer(function() {
                this.img = b, this.dispatchEvent({
                    type: "load"
                })
            }.bind(this))
        }, f.dispose = function() {
            this.geometry.dispose(), this.material.dispose(), this.texture.dispose(), this.cacheTexture && this.removeTextureFromCache(this.texture), this.geometry = null, this.material = null, this.texture = null, this.mesh = null, this._img = null, this.loader = null, this.disposed = !0
        }, e
    }), define("comic/ComicMetrics", [], function() {
        var a = {};
        return a.columnsTotal = 12, a.columnSize = 102, a.columnGutterSize = 15, a.tierSize = 450, a.tierGutterSize = 90, a.width = a.columnsTotal * a.columnSize + (a.columnsTotal - 1) * a.columnGutterSize, a.left = a.width * -.5, a.right = .5 * a.width, a.getWidthOf = function(b) {
            return b * a.columnSize + (b - 1) * a.columnGutterSize
        }, a.getHeightOf = function(b) {
            return b * a.tierSize + (b - 1) * a.tierGutterSize
        }, a
    }), define("comic/UnitParser", ["comic/ComicMetrics"], function(a) {
        var b = {};
        return b.toPixels = function(b) {
            var c = 0;
            return "number" == typeof b ? b : ("string" == typeof b && (-1 != b.lastIndexOf("col") ? (b = b.substring(0, b.length - 3), c = a.getWidthOf(b)) : -1 != b.lastIndexOf("tier") ? (b = b.substring(0, b.length - 4), c = a.getHeightOf(b)) : -1 != b.lastIndexOf("px") && (b = b.substring(0, b.length - 2), c = parseInt(b, 10))), c)
        }, b
    }), define("comic/Queue", ["underscore", "createjsEventDispatcher"], function(a, b) {
        var c = function(b, c) {
                this.lookup = [], this.defaultStartFunctionName = b, this.defaultEventType = c, a.bindAll(this, "onEvent")
            },
            d = c.prototype;
        return b.EventDispatcher.initialize(d), d.add = function(a, b, c, d) {
            this.lookup.push({
                dispatcher: a,
                startFunctionName: b || this.defaultStartFunctionName,
                eventType: c || this.defaultEventType,
                args: d || []
            })
        }, d.start = function() {
            var a, b;
            if (this.started = !0, 0 == this.lookup.length) return void this.dispatchEvent({
                type: "complete"
            });
            for (var c = 0; c < this.lookup.length; c++) a = this.lookup[c], a.dispatcher.addEventListener(a.eventType, this.onEvent), b = a.dispatcher[a.startFunctionName], b.call(a.dispatcher, a.args)
        }, d.dispose = function() {
            for (var a, b = 0; b < this.lookup.length; b++) a = this.lookup[b], a.dispatcher.removeEventListener(a.eventType, this.onEvent);
            this.lookup = null
        }, d.onEvent = function(b) {
            var c = b.target,
                d = a.findWhere(this.lookup, {
                    dispatcher: c
                });
            c.removeEventListener(d.eventType, this.onEvent), this.lookup = a.filter(this.lookup, function(a) {
                return a.dispatcher != c
            }), 0 == this.lookup.length && (this.complete = !0, this.dispatchEvent({
                type: "complete"
            }))
        }, c
    }), define("utils/Color", [], function() {
        var a = function(a, b, c) {
                this.r = a, this.g = b, this.b = c
            },
            b = a.prototype;
        return a.random = function() {
            return new a(Math.random(), Math.random(), Math.random())
        }, a.fromRGB = function(b, c, d) {
            return new a(b, c, d)
        }, a.fromInt = function(b) {
            var c = b >> 16 & 255,
                d = b >> 8 & 255,
                e = 255 & b;
            return new a(c / 255, d / 255, e / 255)
        }, b.toInt = function() {
            return 255 * this.b & 255 | (255 * this.g & 255) << 8 | (255 * this.r & 255) << 16
        }, b.toHTML = function() {
            var a = function(a) {
                    var b;
                    return a = Math.floor(255 * a), b = a.toString(16), b.length <= 1 && (b = "0" + b), b
                },
                b = "#" + a(this.r) + a(this.g) + a(this.b);
            return b
        }, b.toHSV = function() {
            var a = {},
                b = Math.min(this.r, this.g, this.b),
                c = Math.max(this.r, this.g, this.b),
                d = c - b;
            return a.v = c, 0 == c ? (a.s = 0, void(a.h = -1)) : (a.s = d / c, a.h = this.r == c ? (this.g - this.b) / d : this.g == c ? 2 + (this.b - this.r) / d : 4 + (this.r - this.g) / d, a.h *= 60, a.h < 0 && (a.h += 360), a)
        }, b.clone = function() {
            return new a(this.r, this.g, this.b)
        }, a
    }), THREE.CSS3DObject = function(a) {
        THREE.Object3D.call(this), this.element = a, this.element.style.position = "absolute", this.addEventListener("removed", function() {
            null !== this.element.parentNode && this.element.parentNode.removeChild(this.element)
        })
    }, THREE.CSS3DObject.prototype = Object.create(THREE.Object3D.prototype), THREE.CSS3DObject.prototype.constructor = THREE.CSS3DObject, THREE.CSS3DSprite = function(a) {
        THREE.CSS3DObject.call(this, a)
    }, THREE.CSS3DSprite.prototype = Object.create(THREE.CSS3DObject.prototype), THREE.CSS3DSprite.prototype.constructor = THREE.CSS3DSprite, THREE.CSS3DRenderer = function() {
        console.log("THREE.CSS3DRenderer", THREE.REVISION);
        var a, b, c, d, e = new THREE.Matrix4,
            f = {
                camera: {
                    fov: 0,
                    style: ""
                },
                objects: {}
            },
            g = document.createElement("div");
        g.style.overflow = "hidden", g.style.WebkitTransformStyle = "preserve-3d", g.style.MozTransformStyle = "preserve-3d", g.style.oTransformStyle = "preserve-3d", g.style.transformStyle = "preserve-3d", this.domElement = g;
        var h = document.createElement("div");
        h.style.WebkitTransformStyle = "preserve-3d", h.style.MozTransformStyle = "preserve-3d", h.style.oTransformStyle = "preserve-3d", h.style.transformStyle = "preserve-3d", g.appendChild(h), this.setClearColor = function() {}, this.setSize = function(e, f) {
            a = e, b = f, c = a / 2, d = b / 2, g.style.width = e + "px", g.style.height = f + "px", h.style.width = e + "px", h.style.height = f + "px"
        };
        var i = function(a) {
                return Math.abs(a) < 1e-6 ? 0 : a
            },
            j = function(a) {
                var b = a.elements;
                return "matrix3d(" + i(b[0]) + "," + i(-b[1]) + "," + i(b[2]) + "," + i(b[3]) + "," + i(b[4]) + "," + i(-b[5]) + "," + i(b[6]) + "," + i(b[7]) + "," + i(b[8]) + "," + i(-b[9]) + "," + i(b[10]) + "," + i(b[11]) + "," + i(b[12]) + "," + i(-b[13]) + "," + i(b[14]) + "," + i(b[15]) + ")"
            },
            k = function(a) {
                var b = a.elements;
                return "translate3d(-50%,-50%,0) matrix3d(" + i(b[0]) + "," + i(b[1]) + "," + i(b[2]) + "," + i(b[3]) + "," + i(-b[4]) + "," + i(-b[5]) + "," + i(-b[6]) + "," + i(-b[7]) + "," + i(b[8]) + "," + i(b[9]) + "," + i(b[10]) + "," + i(b[11]) + "," + i(b[12]) + "," + i(b[13]) + "," + i(b[14]) + "," + i(b[15]) + ")"
            },
            l = function(a, b) {
                if (a instanceof THREE.CSS3DObject) {
                    var c;
                    a instanceof THREE.CSS3DSprite ? (e.copy(b.matrixWorldInverse), e.transpose(), e.copyPosition(a.matrixWorld), e.scale(a.scale), e.elements[3] = 0, e.elements[7] = 0, e.elements[11] = 0, e.elements[15] = 1, c = k(e)) : c = k(a.matrixWorld);
                    var d = a.element,
                        g = f.objects[a.id];
                    (void 0 === g || g !== c) && (d.style.WebkitTransform = c, d.style.MozTransform = c, d.style.oTransform = c, d.style.transform = c, f.objects[a.id] = c), d.parentNode !== h && h.appendChild(d)
                }
                for (var i = 0, j = a.children.length; j > i; i++) l(a.children[i], b)
            };
        this.render = function(a, e) {
            var i = .5 / Math.tan(THREE.Math.degToRad(.5 * e.fov)) * b;
            f.camera.fov !== i && (g.style.WebkitPerspective = i + "px", g.style.MozPerspective = i + "px", g.style.oPerspective = i + "px", g.style.perspective = i + "px", f.camera.fov = i), a.updateMatrixWorld(), void 0 === e.parent && e.updateMatrixWorld(), e.matrixWorldInverse.getInverse(e.matrixWorld);
            var k = "translate3d(0,0," + i + "px)" + j(e.matrixWorldInverse) + " translate3d(" + c + "px," + d + "px, 0)";
            f.camera.style !== k && (h.style.WebkitTransform = k, h.style.MozTransform = k, h.style.oTransform = k, h.style.transform = k, f.camera.style = k), l(a, e)
        }
    }, define("threejsCSS", ["threejs"], function(a) {
        return function() {
            var b;
            return b || a.THREE
        }
    }(this)), define("comic/display/ComicObject", ["underscore", "utils/inherit", "comic/UnitParser", "comic/display/ComicObject", "comic/Queue", "utils/Color", "threejs", "threejsCSS", "createjsEventDispatcher"], function(a, b, c, d, e, f, g, h, i) {
        var d = function(b, d) {
                a.bindAll(this, "onLoadQueueComplete"), this._x = 0, this._y = 0, this._active = !1, this.debug = !1, this.useGL = !1, this.useCSS = !1, this.width = c.toPixels(b), this.height = c.toPixels(d), this.uid = function() {
                    function a() {
                        return Math.floor(65536 * (1 + Math.random())).toString(16).substring(1)
                    }
                    return a() + a() + "-" + a() + "-" + a() + "-" + a() + "-" + a() + a() + a()
                }()
            },
            j = d.prototype;
        return i.EventDispatcher.initialize(j), Object.defineProperties(j, {
            x: {
                set: function(a) {
                    this._x = a, this.draw()
                },
                get: function() {
                    return this._x
                }
            },
            y: {
                set: function(a) {
                    this._y = a, this.draw()
                },
                get: function() {
                    return this._y
                }
            },
            active: {
                set: function(a) {
                    a && !this._active ? (this.createActiveModeObjects(), this.load(), this.draw(), this.update()) : !a && this._active && this.disposeActiveModeObjects(), this._active = a
                },
                get: function() {
                    return this._active
                }
            }
        }), j.createCSS = function() {
            if (this.domElement = document.createElement("div"), this.domElement.style.width = this.width + "px", this.domElement.style.height = this.height + "px", this.domElement.style.willChange = "transform", this.objectCSS = new h.CSS3DObject(this.domElement), this.objectCSS.visible = !1, this.debug) {
                var a = document.createElement("div");
                a.innerHTML = this.width + " x " + this.height + " (" + 2 * this.width + " x " + 2 * this.height + ")", a.style.color = "black", this.domElement.appendChild(a)
            }
        }, j.disposeCSS = function() {
            this.objectCSS && (this.domElement.innerHTML = "", this.domElement = null, this.objectCSS = null)
        }, j.createGL = function() {
            this.objectGL = new g.Object3D, this.loadQueue = new e("load", "load"), this.objectGL.visible = !1, this.debug && (this.originGLPlaneGeom = new g.PlaneBufferGeometry(10, 10, 1, 1), this.originGLMaterial = new g.MeshBasicMaterial({
                color: 0,
                wireframe: !0
            }), this.originGLPlane = new g.Mesh(this.originGLPlaneGeom, this.originGLMaterial), this.objectGL.add(this.originGLPlane), this.debugGLPlaneGeom = new g.PlaneBufferGeometry(this.width, this.height, 1, 1), this.debugGLMaterial = new g.MeshBasicMaterial({
                color: f.random().toInt(),
                wireframe: !0,
                wireframeLinewidth: 2
            }), this.debugGLPlane = new g.Mesh(this.debugGLPlaneGeom, this.debugGLMaterial), this.objectGL.add(this.debugGLPlane))
        }, j.disposeGL = function() {
            this.objectGL && (this.objectGL = null), this.loadQueue && (this.loadQueue.dispose(), this.loadQueue = null), this.timeline && (this.timeline.kill(), this.timeline = null)
        }, j.draw = function() {
            this.objectGL && (this.objectGL.position.x = this._x, this.objectGL.position.y = this._y), this.objectCSS && (this.objectCSS.position.x = this._x, this.objectCSS.position.y = this._y)
        }, j.load = function() {
            this.loadQueue && (this.objectGL && (this.objectGL.visible = !1), this.objectCSS && (this.objectCSS.visible = !1), this.loadQueue.addEventListener("complete", this.onLoadQueueComplete), this.loadQueue.start())
        }, j.onLoadQueueComplete = function() {
            this.objectGL && (this.objectGL.visible = !0), this.objectCSS && (this.objectCSS.visible = !0), this.dispatchEvent({
                type: "load"
            })
        }, j.update = function() {}, j.createActiveModeObjects = function() {
            this.useGL && this.createGL(), this.useCSS && this.createCSS(), this.update()
        }, j.disposeActiveModeObjects = function() {
            this.disposeGL(), this.disposeCSS()
        }, j.dispose = j.disposeActiveModeObjects, d
    }), define("comic/display/BasicText", ["jquery", "underscore", "utils/inherit", "comic/display/Image", "comic/ComicMetrics", "comic/display/ComicObject"], function(a, b, c, d, e, f) {
        var g = function(a, c, d, e) {
                this.params = e || {}, this.params.rasterize = !1, this.params.offsetX = this.params.offsetX || 0, this.params.offsetY = this.params.offsetY || 0, this.params.offsetZ = this.params.offsetZ || 0, this.htmlText = b.isArray(d) ? d.join("") : d, this.ComicObject_constructor(a, c), this.useGL = !1, this.useCSS = !0, this._visible = !0
            },
            h = c.extend(g, f);
        return Object.defineProperties(h, {
            visible: {
                set: function(a) {
                    this._visible = a, this.domElement && (this.domElement.style.display = this._visible ? "block" : "none")
                },
                get: function() {
                    return this._visible
                }
            }
        }), h.createCSS = function() {
            this.ComicObject_createCSS(), this.div = document.createElement("div"), this.div.innerHTML = this.htmlText;
            try {
                a(this.div).find("p").widont()
            } catch (b) {}
            this.domElement.appendChild(this.div), this.objectCSS.position.z = this.params.offsetZ, TweenMax.set(this.div, {
                x: this.params.offsetX,
                y: this.params.offsetY
            })
        }, h.disposeCSS = function() {
            this.domElement && this.domElement.removeChild(this.div), this.div = null, this.ComicObject_disposeCSS()
        }, c.promote(g, "ComicObject"), g
    }), define("utils/ThreeUtils", ["threejs"], function(a) {
        var b = function() {
                this.zero = new a.Vector3, this.toScreenVector2 = new a.Vector2, this.toCanvasXYAVector2 = new a.Vector2, this.toCanvasXYBVector2 = new a.Vector2, this.toWindowXYAVector2 = new a.Vector2, this.toWindowXYBVector2 = new a.Vector2
            },
            c = b.prototype;
        return c.objectPositionToScreen = function(a, c) {
            var d = a.localToWorld(b.zero);
            return this.toScreen(d, c)
        }, c.localPositionToScreen = function(a, b, c) {
            c.updateMatrixWorld();
            var d = c.localToWorld(a);
            return this.toScreen(d, b)
        }, c.toScreen = function(a, b) {
            a = a.clone();
            var c = a.project(b);
            return this.toScreenVector2.x = (c.x + 1) / 2, this.toScreenVector2.y = (-c.y + 1) / 2, this.toScreenVector2
        }, c.toCanvasXY = function(a, b, c) {
            var d = this.toScreen(a, b);
            return this.toCanvasXYAVector2.x = 0, this.toCanvasXYAVector2.y = 0, this.toCanvasXYBVector2.x = c.width, this.toCanvasXYBVector2.y = c.height, this.toCanvasXYAVector2.multiplyVectors(this.toCanvasXYBVector2, d)
        }, c.toWindowXY = function(a, b) {
            var c = this.toScreen(a, b);
            return this.toWindowXYAVector2.x = 0, this.toWindowXYAVector2.y = 0, this.toWindowXYBVector2.x = canvas.width, this.toWindowXYBVector2.y = canvas.height, new this.toWindowXYAVector2(this.toWindowXYBVector2, c)
        }, c.isDescendantOf = function(a, b) {
            if (a && a.children)
                for (var c = 0; c < a.children.length; c++) {
                    var d = a.children[c];
                    if (d == b) return !0;
                    if (d.children) return this.isDescendantOf(d, b)
                }
            return !1
        }, b
    }), define("comic/ScreenPositionCache", ["underscore", "createjsEventDispatcher", "comic/display/BasicText", "utils/ThreeUtils"], function(a, b, c, d) {
        var e = function(b, c, e) {
                this.camera = b, this.containerGL = c, this.containerCSS = e, this.lookup = [], this.cssTasks = [], this.utils = new d, this.tmpComicObjectPosition = new THREE.Vector3, this.yieldedAtIndex = 0, this.totalOnScreen = 0, this.totalTextOnScreen = 0, this.totalCharsOnScreen = 0, this.optimiseLookup = a.throttle(this.optimiseLookup, 500)
            },
            f = e.prototype;
        return b.EventDispatcher.initialize(f), f.add = function(a) {
            this.lookup.push({
                comicObject: a,
                screenPosition: 0
            })
        }, f.update = function(a) {
            var b = Date.now();
            this.yieldedAtIndex >= this.lookup.length - 1 && (this.totalOnScreen = 0, this.totalTextOnScreen = 0, this.yieldedAtIndex = 0, this.totalCharsOnScreen = 0);
            for (var d = this.yieldedAtIndex, e = d; e < this.lookup.length; e++) {
                var f = this.lookup[e],
                    g = f.comicObject;
                if (this.tmpComicObjectPosition.set(g.x, g.y, 0), f.screenPosition = this.utils.localPositionToScreen(this.tmpComicObjectPosition, this.camera, this.containerGL).y, f.screenPosition >= 0 && f.screenPosition <= 1 && (this.totalOnScreen++, f.comicObject instanceof c && (this.totalTextOnScreen++, this.totalCharsOnScreen = f.comicObject.htmlText.length)), this.yieldedAtIndex = e, Date.now() - b >= 1e3 / 180 && !a) return
            }
            this.optimiseLookup()
        }, f.optimiseLookup = function() {
            this.lookup = this.lookup.sort(this._optimiseSortFunction)
        }, f._optimiseSortFunction = function(a) {
            return a.screenPosition >= 6 && a.screenPosition <= -6
        }, f.get = function(b) {
            var c = a.findWhere(this.lookup, {
                comicObject: b
            }).screenPosition;
            return c
        }, f._filterFunction = function(a) {
            return a.comicObject == this
        }, e
    }), define("comic/InteractivityManager", ["underscore", "threejs", "utils/ThreeUtils", "createjsEventDispatcher"], function(a, b, c, d) {
        var e = function(b, d) {
                this.utils = new c, this.domElement = b, this.camera = d, this.comicObjects = [], this.prevIntersectingComicObjects = [], this.position = {
                    x: 0,
                    y: 0
                }, this.prevPosition = {
                    x: 0,
                    y: 0
                }, a.bindAll(this, "onMouseDown", "onMouseMove", "onInterval"), this.domElement.addEventListener("mousedown", this.onMouseDown, !1), this.domElement.addEventListener("mousemove", this.onMouseMove, !1), setInterval(this.onInterval, 1e3 / 30)
            },
            f = e.prototype;
        return d.EventDispatcher.initialize(f), f.add = function(a) {
            this.comicObjects.push(a)
        }, f.checkInteractions = function() {
            if (this.comicObjects && this.comicObjects.length) {
                var c = new b.Vector3(this.position.x, this.position.y, .5);
                c.unproject(this.camera);
                var d = a.flatten(a.pluck(this.comicObjects, "objectGL"));
                if (d = a.without(d, void 0, null), d && d.length) {
                    var e = new b.Raycaster(this.camera.position, c.sub(this.camera.position).normalize()),
                        f = e.intersectObjects(d, !0),
                        g = a.flatten(a.pluck(f, "object"));
                    if (g && g.length) {
                        for (var h = [], i = 0; i < g.length; i++) {
                            var j = g[i],
                                k = this.getParentComicObject(j);
                            h.push(k), k && (this.position.x != this.prevPosition.x && this.position.y != this.prevPosition.y && this.dispatch("mouseMove", k), a.contains(this.prevIntersectingComicObjects, k) || this.dispatch("rollOver", k), this.wasClicked && this.dispatch("click", k))
                        }
                        this.domElement.style.cursor = "pointer"
                    } else this.domElement.style.cursor = "auto";
                    h = a.without(a.unique(h), null, void 0);
                    for (var l = 0; l < this.prevIntersectingComicObjects.length; l++) {
                        var m = this.prevIntersectingComicObjects[l];
                        a.contains(h, m) || this.dispatch("rollOut", m)
                    }
                    this.prevIntersectingComicObjects = h || []
                }
                this.wasClicked = !1
            }
        }, f.getParentComicObject = function(a) {
            for (var b = 0; b < this.comicObjects.length; b++) {
                var c = this.comicObjects[b],
                    d = c.objectGL;
                if (this.utils.isDescendantOf(d, a)) return c
            }
            return null
        }, f.onInterval = function() {
            this.checkInteractions()
        }, f.onMouseMove = function(a) {
            this.prevPosition = this.position, this.position.x = a.clientX / window.innerWidth * 2 - 1, this.position.y = 2 * -(a.clientY / window.innerHeight) + 1
        }, f.onMouseDown = function() {
            this.wasClicked = !0
        }, f.dispatch = function(a, b) {
            b.dispatchEvent({
                type: a
            }), this.dispatchEvent({
                type: a,
                object: b
            })
        }, e
    }), define("comic/ResourceManager", ["underscore", "createjsEventDispatcher", "utils/ThreeUtils"], function(a, b, c) {
        var d = function(b, d, e, f) {
                this.camera = b, this.screenPositionCache = d, this.containerGL = e, this.containerCSS = f, this.lookup = [], this.cssTasks = [], this.comicObjectPosition = new THREE.Vector3, this.utils = new c, this.time = 0, this.yieldedAtIndex = 0, this.processCSSTasks = "desktop" == Detectizr.device.type ? a.throttle(this.processCSSTasks, 500) : a.throttle(this.processCSSTasks, 2500)
            },
            e = d.prototype;
        return b.EventDispatcher.initialize(e), e.add = function(a, b) {
            b = b || {}, b.activeBetweenScreenPosition = b.activeBetweenScreenPosition || {
                min: -3,
                max: 4.5
            }, this.lookup.push({
                comicObject: a,
                params: b,
                hasLoaded: !1
            })
        }, e.update = function() {
            this.flagActive();
            for (var a = 0; a < this.lookup.length; a++) {
                var b = this.lookup[a],
                    c = b.comicObject;
                c.active && c.update()
            }
            this.processCSSTasks(), this.time++
        }, e.flagActive = function() {
            this.yieldedAtIndex >= this.lookup.length - 1 && (this.yieldedAtIndex = 0);
            for (var a = this.yieldedAtIndex, b = Date.now(), c = a; c < this.lookup.length; c++) {
                var d = this.lookup[c],
                    e = d.comicObject,
                    f = d.params,
                    g = this.screenPositionCache.get(e);
                if (g >= f.activeBetweenScreenPosition.min && g <= f.activeBetweenScreenPosition.max && 0 == e.active ? (e.active = !0, e.objectGL && this.containerGL.add(e.objectGL), e.objectCSS && this.cssTasks.push({
                        type: "add",
                        objectCSS: e.objectCSS
                    })) : (g < f.activeBetweenScreenPosition.min || g > f.activeBetweenScreenPosition.max) && 1 == e.active && (e.objectGL && this.containerGL.remove(e.objectGL), e.objectCSS && this.cssTasks.push({
                        type: "remove",
                        objectCSS: e.objectCSS
                    }), e.active = !1), this.yieldedAtIndex = c, Date.now() - b >= 1e3 / 240) return
            }
        }, e.processCSSTasks = function() {
            for (; this.cssTasks.length > 0;) {
                var a = this.cssTasks.shift();
                "add" == a.type && a.objectCSS && this.containerCSS.add(a.objectCSS), "remove" == a.type && a.objectCSS && this.containerCSS.remove(a.objectCSS)
            }
        }, d
    }), define("comic/TriggerManager", ["underscore", "createjsEventDispatcher", "comic/display/ComicObject"], function(a, b, c) {
        var d = function(b, c, d) {
                this.camera = b, this.screenPositionCache = c, this.container = d, this.lookup = [], this.comicObjectPosition = new THREE.Vector3, this.enabled = !0, this.yieldedAtIndex = 0, this.update = a.throttle(this.update, 200)
            },
            e = d.prototype;
        return e.add = function(a, b) {
            b = b || [], this.lookup.push({
                comicObject: a,
                triggers: b,
                previousScreenPosition: null
            })
        }, e.enable = function() {
            this.enabled = !0;
            for (var a = 0; a < this.lookup.length; a++) {
                var b = this.lookup[a];
                b.previousScreenPosition = null
            }
        }, e.disable = function() {
            this.enabled = !1
        }, e.update = function() {
            if (this.enabled) {
                var a = Date.now();
                this.yieldedAtIndex >= this.lookup.length - 1 && (this.yieldedAtIndex = 0);
                for (var b = this.yieldedAtIndex, d = b; d < this.lookup.length; d++) {
                    var e = this.lookup[d],
                        f = e.comicObject,
                        g = e.triggers,
                        h = this.screenPositionCache.get(f),
                        i = e.previousScreenPosition;
                    if (i)
                        for (var j = 0; j < g.length; j++) {
                            var k = g[j],
                                l = k.target || f,
                                m = k.call,
                                n = k.params || [];
                            h <= k.atScreenPosition && i > k.atScreenPosition && (l instanceof c && l[m] ? l.active && l[m].apply(l, n) : !l || l instanceof c || !l[m] || l[m].apply(l, n))
                        }
                    if (e.previousScreenPosition = h, Date.now() - a >= 1e3 / 150) return;
                    this.yieldedAtIndex = d
                }
            }
        }, d
    }), define("comic/MapsManager", ["underscore", "math/ArmyKnife"], function(a, b) {
        var c = function(a, b, c) {
                this.camera = a, this.container = c, this.screenPositionCache = b, this.lookup = [], this.time = 0
            },
            d = c.prototype;
        return d.add = function(a, b) {
            b = b || [], this.lookup.push({
                comicObject: a,
                maps: b
            })
        }, d.update = function() {
            for (var c = 0; c < this.lookup.length; c++)
                for (var d = this.lookup[c], e = d.comicObject, f = d.maps, g = this.screenPositionCache.get(e), h = 0; h < f.length; h++) {
                    var i = [],
                        j = f[h],
                        k = j.target || e,
                        l = j.property;
                    a.contains(i, l) || (b.between(g, j.startScreenPosition, j.endScreenPosition) ? (k[l] = b.map(g, j.startScreenPosition, j.endScreenPosition, j.startValue, j.endValue, !1, !1, !1), i.push(l)) : j.startScreenPosition < j.endScreenPosition ? g < j.startScreenPosition ? k[l] = j.startValue : g > j.endScreenPosition && (k[l] = j.endValue) : j.startScreenPosition > j.endScreenPosition && (g > j.startScreenPosition ? k[l] = j.startValue : g < j.endScreenPosition && (k[l] = j.endValue)))
                }
        }, c
    }), define("math/Interpolation", [], function() {
        var a = function() {
            throw "Only static methods to be found here."
        };
        return a.lerp = function(a, b, c) {
            return a + (b - a) * c
        }, a
    }), define("comic/FPS", ["createjsEventDispatcher"], function(a) {
        var b = function(a) {
                return this.targetFPS = a || 60, this.targetFrameDurationMS = 1e3 / this.targetFPS, this.lastTickTime = (new Date).valueOf(), this.deltaTime = 1, this
            },
            c = b.prototype;
        return a.EventDispatcher.initialize(c), c.step = function() {
            var a = (new Date).valueOf(),
                b = a - this.lastTickTime;
            this.deltaTime = b / this.targetFrameDurationMS, this.lastTickTime = a
        }, b
    }), define("comic/ScrollManager", ["underscore", "createjsEventDispatcher", "math/Interpolation", "math/ArmyKnife", "comic/FPS"], function(a, b, c, d, e) {
        var f = function(b, c, d) {
                this._position = 0, this.screenPositionCache = d, this.scrollScale = "firefox" == Detectizr.browser.name ? .45 : 1, this.domElement = b || document.body, this.scrollHeight = (c || 1e4) * this.scrollScale, this.outerContainer = document.createElement("div"), this.container = document.createElement("div"), this.fakeContent = document.createElement("div"), this.outerContainer.id = "scroll-manager-outer-container", this.container.id = "scroll-manager-container", this.fakeContent.id = "scroll-manager-fake-content", this.outerContainer.appendChild(this.container), this.container.appendChild(this.fakeContent), this.onMouseWheel = a.throttle(this.onMouseWheel, 300), this.fakeContent.style.height = this.scrollHeight + "px", this.interpolationEnabled = !0, this.fps = new e, a.bindAll(this, "onScroll", "onMouseWheel", "onTouch", "onClick", "onBeforeUnload", "onKeyDown"), window.addEventListener("beforeunload", this.onBeforeUnload), this.enable()
            },
            g = f.prototype;
        return b.EventDispatcher.initialize(g), Object.defineProperties(g, {
            autoScroll: {
                set: function(a) {
                    a != this.autoScroll && (this._autoScroll = a)
                },
                get: function() {
                    return this._autoScroll
                }
            }
        }), Object.defineProperties(g, {
            position: {
                set: function(a) {
                    this._position = a, this.container.scrollTop = this._position * this.scrollScale
                },
                get: function() {
                    return this._position
                }
            }
        }), g.enable = function() {
            this.enabled = !0, this.domElement.appendChild(this.outerContainer), this.container.addEventListener("scroll", this.onScroll), this.container.addEventListener("mousewheel", this.onMouseWheel), this.container.addEventListener("touchstart", this.onTouch), this.container.addEventListener("click", this.onClick), window.addEventListener("keydown", this.onKeyDown), this.fakeContent.tabIndex = -1, this.fakeContent.focus()
        }, g.disable = function() {
            this.enabled = !1, this.domElement.removeChild(this.outerContainer), this.container.removeEventListener("scroll", this.onScroll), this.container.removeEventListener("mousewheel", this.onMouseWheel), this.container.removeEventListener("touchstart", this.onTouch), this.container.removeEventListener("click", this.onClick), window.removeEventListener("keydown", this.onKeyDown)
        }, g.onTouch = function() {
            this.interpolationEnabled = !1
        }, g.onClick = function() {
            this.interpolationEnabled = !0
        }, g.update = function() {
            if (this.enabled) {
                var a = this.container.scrollTop * (1 / this.scrollScale);
                if (a != this.position && (this._position = this.interpolationEnabled ? c.lerp(this.position, a, .1) : a, this.dispatchEvent({
                        type: "scroll",
                        position: this.position
                    })), this.autoScroll) {
                    var b = 1.6;
                    this.container.scrollTop += b
                }
            }
        }, g.onKeyDown = function(a) {
            switch (a.keyCode) {
                case 38:
                    a.preventDefault(), this.container.scrollTop -= 150;
                    break;
                case 40:
                    a.preventDefault(), this.container.scrollTop += 150
            }
        }, g.onMouseWheel = function() {}, g.onScroll = function() {}, g.onBeforeUnload = function() {
            this.container.scrollTop = 0
        }, f
    }), THREE.CopyShader = {
        uniforms: {
            tDiffuse: {
                type: "t",
                value: null
            },
            opacity: {
                type: "f",
                value: 1
            }
        },
        vertexShader: ["varying vec2 vUv;", "void main() {", "vUv = uv;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
        fragmentShader: ["uniform float opacity;", "uniform sampler2D tDiffuse;", "varying vec2 vUv;", "void main() {", "vec4 texel = texture2D( tDiffuse, vUv );", "gl_FragColor = opacity * texel;", "}"].join("\n")
    }, define("threejsCopyShader", ["threejs"], function(a) {
        return function() {
            var b;
            return b || a.THREE
        }
    }(this)), THREE.NoiseShader = {
        uniforms: {
            tDiffuse: {
                type: "t",
                value: null
            },
            time: {
                type: "f",
                value: 0
            },
            nIntensity: {
                type: "f",
                value: .5
            },
            grayscale: {
                type: "i",
                value: 1
            }
        },
        vertexShader: ["varying vec2 vUv;", "void main() {", "vUv = uv;", "gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );", "}"].join("\n"),
        fragmentShader: ["uniform float time;", "uniform bool grayscale;", "uniform float nIntensity;", "uniform sampler2D tDiffuse;", "varying vec2 vUv;", "void main() {", "vec4 cTextureScreen = texture2D( tDiffuse, vUv );", "float x = vUv.x * vUv.y * time *  1000.0;", "x = mod( x, 13.0 ) * mod( x, 123.0 );", "float dx = mod( x, 0.01 );", "vec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx * 100.0, 0.0, 1.0 );", "cResult = cTextureScreen.rgb + clamp( nIntensity, 0.0,1.0 ) * ( cResult - cTextureScreen.rgb );", "if( grayscale ) {", "cResult = vec3( cResult.r * 0.3 + cResult.g * 0.59 + cResult.b * 0.11 );", "}", "gl_FragColor =  vec4( cResult, cTextureScreen.a );", "}"].join("\n")
    }, define("threejsNoiseShader", ["threejs"], function(a) {
        return function() {
            var b;
            return b || a.THREE
        }
    }(this)), THREE.NoisePass = function(a, b) {
        void 0 === THREE.NoiseShader && console.error("THREE.FilmPass relies on THREE.FilmShader");
        var c = THREE.NoiseShader;
        this.uniforms = THREE.UniformsUtils.clone(c.uniforms), this.material = new THREE.ShaderMaterial({
            uniforms: this.uniforms,
            vertexShader: c.vertexShader,
            fragmentShader: c.fragmentShader
        }), void 0 !== b && (this.uniforms.grayscale.value = b), void 0 !== a && (this.uniforms.nIntensity.value = a), this.enabled = !0, this.renderToScreen = !1, this.needsSwap = !0, this.camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1), this.scene = new THREE.Scene, this.quad = new THREE.Mesh(new THREE.PlaneBufferGeometry(2, 2), null), this.scene.add(this.quad)
    }, THREE.NoisePass.prototype = {
        render: function(a, b, c, d) {
            this.uniforms.tDiffuse.value = c, this.uniforms.time.value += d, this.quad.material = this.material, this.renderToScreen ? a.render(this.scene, this.camera) : a.render(this.scene, this.camera, b, !1)
        }
    }, define("threejsNoisePass", ["threejs", "threejsNoiseShader"], function(a) {
        return function() {
            var b;
            return b || a.THREE
        }
    }(this)), THREE.RenderPass = function(a, b, c, d, e) {
        this.scene = a, this.camera = b, this.overrideMaterial = c, this.clearColor = d, this.clearAlpha = void 0 !== e ? e : 1, this.oldClearColor = new THREE.Color, this.oldClearAlpha = 1, this.enabled = !0, this.clear = !0, this.needsSwap = !1
    }, THREE.RenderPass.prototype = {
        render: function(a, b, c) {
            this.scene.overrideMaterial = this.overrideMaterial, this.clearColor && (this.oldClearColor.copy(a.getClearColor()), this.oldClearAlpha = a.getClearAlpha(), a.setClearColor(this.clearColor, this.clearAlpha)), a.render(this.scene, this.camera, c, this.clear), this.clearColor && a.setClearColor(this.oldClearColor, this.oldClearAlpha), this.scene.overrideMaterial = null
        }
    }, define("threejsRenderPass", ["threejs"], function(a) {
        return function() {
            var b;
            return b || a.THREE
        }
    }(this)), THREE.MaskPass = function(a, b) {
        this.scene = a, this.camera = b, this.enabled = !0, this.clear = !0, this.needsSwap = !1, this.inverse = !1
    }, THREE.MaskPass.prototype = {
        render: function(a, b, c) {
            var d = a.context;
            d.colorMask(!1, !1, !1, !1), d.depthMask(!1);
            var e, f;
            this.inverse ? (e = 0, f = 1) : (e = 1, f = 0), d.enable(d.STENCIL_TEST), d.stencilOp(d.REPLACE, d.REPLACE, d.REPLACE), d.stencilFunc(d.ALWAYS, e, 4294967295), d.clearStencil(f), a.render(this.scene, this.camera, c, this.clear), a.render(this.scene, this.camera, b, this.clear), d.colorMask(!0, !0, !0, !0), d.depthMask(!0), d.stencilFunc(d.EQUAL, 1, 4294967295), d.stencilOp(d.KEEP, d.KEEP, d.KEEP)
        }
    }, THREE.ClearMaskPass = function() {
        this.enabled = !0
    }, THREE.ClearMaskPass.prototype = {
        render: function(a) {
            var b = a.context;
            b.disable(b.STENCIL_TEST)
        }
    }, define("threejsMaskPass", ["threejs"], function(a) {
        return function() {
            var b;
            return b || a.THREE
        }
    }(this)), THREE.ShaderPass = function(a, b) {
        this.textureID = void 0 !== b ? b : "tDiffuse", this.uniforms = THREE.UniformsUtils.clone(a.uniforms), this.material = new THREE.ShaderMaterial({
            defines: a.defines || {},
            uniforms: this.uniforms,
            vertexShader: a.vertexShader,
            fragmentShader: a.fragmentShader
        }), this.renderToScreen = !1, this.enabled = !0, this.needsSwap = !0, this.clear = !1, this.camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1), this.scene = new THREE.Scene, this.quad = new THREE.Mesh(new THREE.PlaneBufferGeometry(2, 2), null), this.scene.add(this.quad)
    }, THREE.ShaderPass.prototype = {
        render: function(a, b, c) {
            this.uniforms[this.textureID] && (this.uniforms[this.textureID].value = c), this.quad.material = this.material, this.renderToScreen ? a.render(this.scene, this.camera) : a.render(this.scene, this.camera, b, this.clear)
        }
    }, define("threejsShaderPass", ["threejs"], function(a) {
        return function() {
            var b;
            return b || a.THREE
        }
    }(this)), THREE.EffectComposer = function(a, b) {
        if (this.renderer = a, void 0 === b) {
            var c = a.getPixelRatio(),
                d = Math.floor(a.context.canvas.width / c) || 1,
                e = Math.floor(a.context.canvas.height / c) || 1,
                f = {
                    minFilter: THREE.LinearFilter,
                    magFilter: THREE.LinearFilter,
                    format: THREE.RGBFormat,
                    stencilBuffer: !1
                };
            b = new THREE.WebGLRenderTarget(d, e, f)
        }
        this.renderTarget1 = b, this.renderTarget2 = b.clone(), this.writeBuffer = this.renderTarget1, this.readBuffer = this.renderTarget2, this.passes = [], void 0 === THREE.CopyShader && console.error("THREE.EffectComposer relies on THREE.CopyShader"), this.copyPass = new THREE.ShaderPass(THREE.CopyShader)
    }, THREE.EffectComposer.prototype = {
        swapBuffers: function() {
            var a = this.readBuffer;
            this.readBuffer = this.writeBuffer, this.writeBuffer = a
        },
        addPass: function(a) {
            this.passes.push(a)
        },
        insertPass: function(a, b) {
            this.passes.splice(b, 0, a)
        },
        render: function(a) {
            this.writeBuffer = this.renderTarget1, this.readBuffer = this.renderTarget2;
            var b, c, d = !1,
                e = this.passes.length;
            for (c = 0; e > c; c++)
                if (b = this.passes[c], b.enabled) {
                    if (b.render(this.renderer, this.writeBuffer, this.readBuffer, a, d), b.needsSwap) {
                        if (d) {
                            var f = this.renderer.context;
                            f.stencilFunc(f.NOTEQUAL, 1, 4294967295), this.copyPass.render(this.renderer, this.writeBuffer, this.readBuffer, a), f.stencilFunc(f.EQUAL, 1, 4294967295)
                        }
                        this.swapBuffers()
                    }
                    b instanceof THREE.MaskPass ? d = !0 : b instanceof THREE.ClearMaskPass && (d = !1)
                }
        },
        reset: function(a) {
            if (void 0 === a) {
                a = this.renderTarget1.clone();
                var b = renderer.getPixelRatio();
                a.width = Math.floor(this.renderer.context.canvas.width / b), a.height = Math.floor(this.renderer.context.canvas.height / b)
            }
            this.renderTarget1 = a, this.renderTarget2 = a.clone(), this.writeBuffer = this.renderTarget1, this.readBuffer = this.renderTarget2
        },
        setSize: function(a, b) {
            var c = this.renderTarget1.clone();
            c.width = a, c.height = b, this.reset(c)
        }
    }, define("threejsFX", ["threejs", "threejsCopyShader", "threejsNoisePass", "threejsNoiseShader", "threejsRenderPass", "threejsMaskPass", "threejsShaderPass"], function(a) {
        return function() {
            var b;
            return b || a.THREE
        }
    }(this));
var Stats = function() {
    var a = Date.now(),
        b = a,
        c = 0,
        d = 1 / 0,
        e = 0,
        f = 0,
        g = 1 / 0,
        h = 0,
        i = 0,
        j = 0,
        k = document.createElement("div");
    k.id = "stats", k.addEventListener("mousedown", function(a) {
        a.preventDefault(), s(++j % 2)
    }, !1), k.style.cssText = "width:80px;opacity:0.9;cursor:pointer";
    var l = document.createElement("div");
    l.id = "fps", l.style.cssText = "padding:0 0 3px 3px;text-align:left;background-color:#002", k.appendChild(l);
    var m = document.createElement("div");
    m.id = "fpsText", m.style.cssText = "color:#0ff;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px", m.innerHTML = "FPS", l.appendChild(m);
    var n = document.createElement("div");
    for (n.id = "fpsGraph", n.style.cssText = "position:relative;width:74px;height:30px;background-color:#0ff", l.appendChild(n); 74 > n.children.length;) {
        var o = document.createElement("span");
        o.style.cssText = "width:1px;height:30px;float:left;background-color:#113", n.appendChild(o)
    }
    var p = document.createElement("div");
    p.id = "ms", p.style.cssText = "padding:0 0 3px 3px;text-align:left;background-color:#020;display:none", k.appendChild(p);
    var q = document.createElement("div");
    q.id = "msText", q.style.cssText = "color:#0f0;font-family:Helvetica,Arial,sans-serif;font-size:9px;font-weight:bold;line-height:15px", q.innerHTML = "MS", p.appendChild(q);
    var r = document.createElement("div");
    for (r.id = "msGraph", r.style.cssText = "position:relative;width:74px;height:30px;background-color:#0f0", p.appendChild(r); 74 > r.children.length;) o = document.createElement("span"), o.style.cssText = "width:1px;height:30px;float:left;background-color:#131", r.appendChild(o);
    var s = function(a) {
        switch (j = a) {
            case 0:
                l.style.display = "block", p.style.display = "none";
                break;
            case 1:
                l.style.display = "none", p.style.display = "block"
        }
    };
    return {
        REVISION: 12,
        domElement: k,
        setMode: s,
        begin: function() {
            a = Date.now()
        },
        end: function() {
            var j = Date.now();
            c = j - a, d = Math.min(d, c), e = Math.max(e, c), q.textContent = c + " MS (" + d + "-" + e + ")";
            var k = Math.min(30, 30 - 30 * (c / 200));
            return r.appendChild(r.firstChild).style.height = k + "px", i++, j > b + 1e3 && (f = Math.round(1e3 * i / (j - b)), g = Math.min(g, f), h = Math.max(h, f), m.textContent = f + " FPS (" + g + "-" + h + ")", k = Math.min(30, 30 - 30 * (f / 100)), n.appendChild(n.firstChild).style.height = k + "px", b = j, i = 0), j
        },
        update: function() {
            a = this.end()
        }
    }
};
"object" == typeof module && (module.exports = Stats), define("statsjs", function() {}), window.Detectizr = function(a, b, c, d) {
        function e(a, b) {
            var c, d, f;
            if (arguments.length > 2)
                for (c = 1, d = arguments.length; d > c; c += 1) e(a, arguments[c]);
            else
                for (f in b) b.hasOwnProperty(f) && (a[f] = b[f]);
            return a
        }

        function f(a) {
            return s.browser.userAgent.indexOf(a) > -1
        }

        function g(a) {
            return a.test(s.browser.userAgent)
        }

        function h(a) {
            return a.exec(s.browser.userAgent)
        }

        function i(a) {
            return a.replace(/^\s+|\s+$/g, "")
        }

        function j(a) {
            return null === a || a === d ? "" : String(a).replace(/((\s|\-|\.)+[a-z0-9])/g, function(a) {
                return a.toUpperCase().replace(/(\s|\-|\.)/g, "")
            })
        }

        function k(a, b) {
            var c = b || "",
                d = 1 === a.nodeType && (a.className ? (" " + a.className + " ").replace(x, " ") : "");
            if (d) {
                for (; d.indexOf(" " + c + " ") >= 0;) d = d.replace(" " + c + " ", " ");
                a.className = b ? i(d) : ""
            }
        }

        function l(a, b, c) {
            a && (a = j(a), b && (b = j(b), n(a + b, !0), c && n(a + b + "_" + c, !0)))
        }

        function m() {
            a.clearTimeout(q), q = a.setTimeout(function() {
                r = s.device.orientation, s.device.orientation = a.innerHeight > a.innerWidth ? "portrait" : "landscape", n(s.device.orientation, !0), r !== s.device.orientation && n(r, !1)
            }, 10)
        }

        function n(a, b) {
            a && t && (v.addAllFeaturesAsClass ? t.addTest(a, b) : (b = "function" == typeof b ? b() : b, b ? t.addTest(a, !0) : (delete t[a], k(y, a))))
        }

        function o(a, b) {
            a.version = b;
            var c = b.split(".");
            c.length > 0 ? (c = c.reverse(), a.major = c.pop(), c.length > 0 ? (a.minor = c.pop(), c.length > 0 ? (c = c.reverse(), a.patch = c.join(".")) : a.patch = "0") : a.minor = "0") : a.major = "0"
        }

        function p(d) {
            var i, k, p, q, r, x, y, z, A = this;
            if (v = e({}, v, d || {}), v.detectDevice) {
                for (s.device = {
                        type: "",
                        model: "",
                        orientation: ""
                    }, q = s.device, g(/googletv|smarttv|internet.tv|netcast|nettv|appletv|boxee|kylo|roku|dlnadoc|ce\-html/) ? (q.type = u[0], q.model = "smartTv") : g(/xbox|playstation.3|wii/) ? (q.type = u[0], q.model = "gameConsole") : g(/ip(a|ro)d/) ? (q.type = u[1], q.model = "ipad") : g(/tablet/) && !g(/rx-34/) || g(/folio/) ? (q.type = u[1], q.model = String(h(/playbook/) || "")) : g(/linux/) && g(/android/) && !g(/fennec|mobi|htc.magic|htcX06ht|nexus.one|sc-02b|fone.945/) ? (q.type = u[1], q.model = "android") : g(/kindle/) || g(/mac.os/) && g(/silk/) ? (q.type = u[1], q.model = "kindle") : g(/gt-p10|sc-01c|shw-m180s|sgh-t849|sch-i800|shw-m180l|sph-p100|sgh-i987|zt180|htc(.flyer|\_flyer)|sprint.atp51|viewpad7|pandigital(sprnova|nova)|ideos.s7|dell.streak.7|advent.vega|a101it|a70bht|mid7015|next2|nook/) || g(/mb511/) && g(/rutem/) ? (q.type = u[1], q.model = "android") : g(/bb10/) ? (q.type = u[1], q.model = "blackberry") : (q.model = h(/iphone|ipod|android|blackberry|opera mini|opera mobi|skyfire|maemo|windows phone|palm|iemobile|symbian|symbianos|fennec|j2me/), null !== q.model ? (q.type = u[2], q.model = String(q.model)) : (q.model = "", g(/bolt|fennec|iris|maemo|minimo|mobi|mowser|netfront|novarra|prism|rx-34|skyfire|tear|xv6875|xv6975|google.wireless.transcoder/) ? q.type = u[2] : g(/opera/) && g(/windows.nt.5/) && g(/htc|xda|mini|vario|samsung\-gt\-i8000|samsung\-sgh\-i9/) ? q.type = u[2] : g(/windows.(nt|xp|me|9)/) && !g(/phone/) || g(/win(9|.9|nt)/) || g(/\(windows 8\)/) ? q.type = u[3] : g(/macintosh|powerpc/) && !g(/silk/) ? (q.type = u[3], q.model = "mac") : g(/linux/) && g(/x11/) ? q.type = u[3] : g(/solaris|sunos|bsd/) ? q.type = u[3] : g(/bot|crawler|spider|yahoo|ia_archiver|covario-ids|findlinks|dataparksearch|larbin|mediapartners-google|ng-search|snappy|teoma|jeeves|tineye/) && !g(/mobile/) ? (q.type = u[3], q.model = "crawler") : q.type = u[2])), i = 0, k = u.length; k > i; i += 1) n(u[i], q.type === u[i]);
                v.detectDeviceModel && n(j(q.model), !0)
            }
            if (v.detectScreen && (t && t.mq && (n("smallScreen", t.mq("only screen and (max-width: 480px)")), n("verySmallScreen", t.mq("only screen and (max-width: 320px)")), n("veryVerySmallScreen", t.mq("only screen and (max-width: 240px)"))), q.type === u[1] || q.type === u[2] ? (a.onresize = function(a) {
                    m(a)
                }, m()) : (q.orientation = "landscape", n(q.orientation, !0))), v.detectOS && (s.os = {}, r = s.os, "" !== q.model && ("ipad" === q.model || "iphone" === q.model || "ipod" === q.model ? (r.name = "ios", o(r, (g(/os\s([\d_]+)/) ? RegExp.$1 : "").replace(/_/g, "."))) : "android" === q.model ? (r.name = "android", o(r, g(/android\s([\d\.]+)/) ? RegExp.$1 : "")) : "blackberry" === q.model ? (r.name = "blackberry", o(r, g(/version\/([^\s]+)/) ? RegExp.$1 : "")) : "playbook" === q.model && (r.name = "blackberry", o(r, g(/os ([^\s]+)/) ? RegExp.$1.replace(";", "") : ""))), r.name || (f("win") || f("16bit") ? (r.name = "windows", f("windows nt 6.3") ? o(r, "8.1") : f("windows nt 6.2") || g(/\(windows 8\)/) ? o(r, "8") : f("windows nt 6.1") ? o(r, "7") : f("windows nt 6.0") ? o(r, "vista") : f("windows nt 5.2") || f("windows nt 5.1") || f("windows xp") ? o(r, "xp") : f("windows nt 5.0") || f("windows 2000") ? o(r, "2k") : f("winnt") || f("windows nt") ? o(r, "nt") : f("win98") || f("windows 98") ? o(r, "98") : (f("win95") || f("windows 95")) && o(r, "95")) : f("mac") || f("darwin") ? (r.name = "mac os", f("68k") || f("68000") ? o(r, "68k") : f("ppc") || f("powerpc") ? o(r, "ppc") : f("os x") && o(r, (g(/os\sx\s([\d_]+)/) ? RegExp.$1 : "os x").replace(/_/g, "."))) : f("webtv") ? r.name = "webtv" : f("x11") || f("inux") ? r.name = "linux" : f("sunos") ? r.name = "sun" : f("irix") ? r.name = "irix" : f("freebsd") ? r.name = "freebsd" : f("bsd") && (r.name = "bsd")), r.name && (n(r.name, !0), r.major && (l(r.name, r.major), r.minor && l(r.name, r.major, r.minor))), r.addressRegisterSize = g(/\sx64|\sx86|\swin64|\swow64|\samd64/) ? "64bit" : "32bit", n(r.addressRegisterSize, !0)), v.detectBrowser && (x = s.browser, g(/opera|webtv/) || !g(/msie\s([\d\w\.]+)/) && !f("trident") ? f("firefox") ? (x.engine = "gecko", x.name = "firefox", o(x, g(/firefox\/([\d\w\.]+)/) ? RegExp.$1 : "")) : f("gecko/") ? x.engine = "gecko" : f("opera") ? (x.name = "opera", x.engine = "presto", o(x, g(/version\/([\d\.]+)/) ? RegExp.$1 : g(/opera(\s|\/)([\d\.]+)/) ? RegExp.$2 : "")) : f("konqueror") ? x.name = "konqueror" : f("chrome") ? (x.engine = "webkit", x.name = "chrome", o(x, g(/chrome\/([\d\.]+)/) ? RegExp.$1 : "")) : f("iron") ? (x.engine = "webkit", x.name = "iron") : f("crios") ? (x.name = "chrome", x.engine = "webkit", o(x, g(/crios\/([\d\.]+)/) ? RegExp.$1 : "")) : f("applewebkit/") ? (x.name = "safari", x.engine = "webkit", o(x, g(/version\/([\d\.]+)/) ? RegExp.$1 : "")) : f("mozilla/") && (x.engine = "gecko") : (x.engine = "trident", x.name = "ie", !a.addEventListener && c.documentMode && 7 === c.documentMode ? o(x, "8.compat") : g(/trident.*rv[ :](\d+)\./) ? o(x, RegExp.$1) : o(x, g(/trident\/4\.0/) ? "8" : RegExp.$1)), x.name && (n(x.name, !0), x.major && (l(x.name, x.major), x.minor && l(x.name, x.major, x.minor))), n(x.engine, !0), x.language = b.userLanguage || b.language, n(x.language, !0)), v.detectPlugins) {
                for (x.plugins = [], A.detectPlugin = function(a) {
                        var c, d, e, f = b.plugins;
                        for (k = f.length - 1; k >= 0; k--) {
                            for (c = f[k], d = c.name + c.description, e = 0, p = a.length; p >= 0; p--) - 1 !== d.indexOf(a[p]) && (e += 1);
                            if (e === a.length) return !0
                        }
                        return !1
                    }, A.detectObject = function(a) {
                        for (k = a.length - 1; k >= 0; k--) try {
                            new ActiveXObject(a[k])
                        } catch (b) {}
                        return !1
                    }, i = w.length - 1; i >= 0; i--) y = w[i], z = !1, a.ActiveXObject ? z = A.detectObject(y.progIds) : b.plugins && (z = A.detectPlugin(y.substrs)), z && (x.plugins.push(y.name), n(y.name, !0));
                b.javaEnabled() && (x.plugins.push("java"), n("java", !0))
            }
        }
        var q, r, s = {},
            t = a.Modernizr,
            u = ["tv", "tablet", "mobile", "desktop"],
            v = {
                addAllFeaturesAsClass: !1,
                detectDevice: !0,
                detectDeviceModel: !0,
                detectScreen: !0,
                detectOS: !0,
                detectBrowser: !0,
                detectPlugins: !0
            },
            w = [{
                name: "adobereader",
                substrs: ["Adobe", "Acrobat"],
                progIds: ["AcroPDF.PDF", "PDF.PDFCtrl.5"]
            }, {
                name: "flash",
                substrs: ["Shockwave Flash"],
                progIds: ["ShockwaveFlash.ShockwaveFlash.1"]
            }, {
                name: "wmplayer",
                substrs: ["Windows Media"],
                progIds: ["wmplayer.ocx"]
            }, {
                name: "silverlight",
                substrs: ["Silverlight"],
                progIds: ["AgControl.AgControl"]
            }, {
                name: "quicktime",
                substrs: ["QuickTime"],
                progIds: ["QuickTime.QuickTime"]
            }],
            x = /[\t\r\n]/g,
            y = c.documentElement;
        return s.detect = function(a) {
            return p(a)
        }, s.init = function() {
            s !== d && (s.browser = {
                userAgent: (b.userAgent || b.vendor || a.opera).toLowerCase()
            }, s.detect())
        }, s.init(), s
    }(this, this.navigator, this.document), define("detectizr", function() {}), define("comic/Comic", ["underscore", "math/ArmyKnife", "comic/ScreenPositionCache", "comic/InteractivityManager", "comic/ResourceManager", "comic/TriggerManager", "comic/MapsManager", "comic/ComicMetrics", "comic/ScrollManager", "threejs", "threejsCSS", "threejsFX", "createjsEventDispatcher", "math/Interpolation", "statsjs", "detectizr"], function(a, b, c, d, e, f, g, h, i, j, k, l, m) {
        var n = function(b) {
            this.domElement = b || document.createElement("div"), this.comicObjects = [], this.comicObjectsToPreload = [], this.anchors = [], this.fxs = [], this.paused = !1, a.bindAll(this, "step", "onComicBookObjectClick", "onScroll", "onComicObjectLoad"), this.createRenderer(), this.time = 0
        };
        n.CAMERA_Z = 1200, n.CLEAR_COLOR_BEFORE_INIT = 0, n.CLEAR_COLOR_AFTER_INIT = 16777215;
        var o = n.prototype;
        return m.EventDispatcher.initialize(o), Object.defineProperties(o, {
            autoScroll: {
                set: function(a) {
                    this.scroller.autoScroll = a
                },
                get: function() {
                    return this.scroller.autoScroll
                }
            }
        }), o.createRenderer = function() {
            this.fps = "desktop" == Detectizr.device.type ? 60 : 30, this.frameInterval = 1e3 / this.fps, this.prevTime = Date.now(), this.sceneGL = new j.Scene, this.sceneCSS = new j.Scene, this.precision = "highp", this.precision = "android" == Detectizr.os.name ? "lowp" : this.precision, this.rendererGL = new j.WebGLRenderer({
                antialias: !1,
                precision: this.precision
            }), this.rendererCSS = new k.CSS3DRenderer, this.rendererGL.setClearColor(n.CLEAR_COLOR_BEFORE_INIT, 1), this.rendererCSS.setClearColor(n.CLEAR_COLOR_BEFORE_INIT, 1);
            var a = window.devicePixelRatio || 1;
            a > 2 && (a = 2), "safari" == Detectizr.browser.name && "desktop" == Detectizr.device.type && (a = 1), this.rendererGL.setPixelRatio(a), this.rootGL = new j.Object3D, this.rootCSS = new j.Object3D, this.containerGL = new j.Object3D, this.containerCSS = new j.Object3D, this.rootGL.add(this.containerGL), this.rootCSS.add(this.containerCSS), this.sceneGL.add(this.rootGL), this.sceneCSS.add(this.rootCSS), this.camera = new j.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 1, 85e3), this.camera.position.z = n.CAMERA_Z, this.rendererCSS.domElement.style.position = this.rendererGL.domElement.style.position = "fixed", this.rendererCSS.domElement.style.top = this.rendererGL.domElement.style.top = "0", this.rendererCSS.domElement.style.pointerEvents = "none", this.rendererCSS.domElement.style.zoom = "reset", document.body.style.zoom = "reset", this.screenPositionCache = new c(this.camera, this.containerGL, this.containerCSS), this.interactivityManager = new d(this.domElement, this.camera), this.interactivityManager.addEventListener("click", this.onComicBookObjectClick), this.resourceManager = new e(this.camera, this.screenPositionCache, this.containerGL, this.containerCSS), this.triggerManager = new f(this.camera, this.screenPositionCache, this.containerGL), this.mapsManager = new g(this.camera, this.screenPositionCache, this.containerGL), this.useComposer = "desktop" == Detectizr.device.type && "chrome" == Detectizr.browser.name, this.useComposer && (this.composerRenderTarget = new j.WebGLRenderTarget(3e3, 2500, {
                minFilter: j.LinearFilter,
                magFilter: j.LinearFilter,
                format: j.RGBFormat,
                stencilBuffer: !0
            }), this.composer = new j.EffectComposer(this.rendererGL, this.composerRenderTarget), this.composer.addPass(new j.RenderPass(this.sceneGL, this.camera)), this.effect = new j.NoisePass(.25, !1), this.effect.renderToScreen = !0, this.effect.uniforms.time.value = 4, this.composer.addPass(this.effect)), this.insertAt = {
                x: h.left,
                y: 0
            }
        }, o.createAnchor = function(b) {
            var c = {
                position: -1 * this.insertAt.y,
                name: b
            };
            this.anchors.push(c), a.sortBy(this.anchors, "position")
        }, o.gotoAnchor = function(b) {
            this.transitioning = !0;
            var c = a.findWhere(this.anchors, {
                name: b
            });
            this.triggerManager.disable(), this.scroller.position = c.position - 1200, this.triggerManager.enable(), this.screenPositionCache.update(!0), TweenMax.killTweensOf(this.scroller), TweenMax.to(this.scroller, 2, {
                ease: Power2.easeOut,
                position: c.position,
                onComplete: function() {
                    this.transitioning = !1
                },
                onCompleteScope: this
            })
        }, o.createScroller = function() {
            this.scroller = new i(this.domElement, Math.abs(this.insertAt.y), this.screenPositionCache), this.scroller.on("scroll", this.onScroll)
        }, o.add = function(a, b) {
            b = b || {};
            var c = .5 * a.width;
            this.insertAt.x += c, b.center ? (a.x = 0, a.y = this.insertAt.y) : (a.x = this.insertAt.x, a.y = this.insertAt.y, this.insertAt.x += c + h.columnGutterSize), this.screenPositionCache.add(a), a.interactive && this.interactivityManager.add(a);
            var d = {};
            b.activeBetweenScreenPosition && (d.activeBetweenScreenPosition = b.activeBetweenScreenPosition), this.resourceManager.add(a, d), b.triggers && this.triggerManager.add(a, b.triggers), b.maps && this.mapsManager.add(a, b.maps), b.preload && (this.comicObjectsToPreload.push(a), a.addEventListener("load", this.onComicObjectLoad)), this.comicObjects.push(a)
        }, o.setPreloader = function(a) {
            this.preloaderComicObject = a, this.preloaderComicObject.active = !0, this.containerGL.add(a.objectGL)
        }, o.onComicObjectLoad = function(b) {
            var c = b.target;
            c.removeEventListener("load", this.onComicObjectLoad), this.comicObjectsToPreload = a.without(this.comicObjectsToPreload, c), this.checkPreloaded()
        }, o.checkPreloaded = function() {
            this.preloaded = !0, 0 == this.comicObjectsToPreload.length && (this.preloaderComicObject && (this.containerGL.remove(this.preloaderComicObject), this.preloaderComicObject.dispose(), this.preloaderComicObject = null, this.rendererGL.setClearColor(n.CLEAR_COLOR_AFTER_INIT, 1), this.rendererCSS.setClearColor(n.CLEAR_COLOR_AFTER_INIT, 1)), this.dispatchEvent({
                type: "preload"
            }))
        }, o.remove = function() {}, o.addFX = function(a) {
            a.init({
                camera: this.camera,
                rendererGL: this.rendererGL,
                rendererCSS: this.rendererCSS,
                rootGL: this.rootGL,
                containerGL: this.containerGL,
                rootCSS: this.rootCSS,
                containerCSS: this.containerCSS
            }), this.fxs.push(a)
        }, o.wrap = function(a) {
            this.insertAt.x = h.left, this.insertAt.y -= isNaN(a) ? h.tierSize + h.tierGutterSize : a
        }, o.setSize = function(a, b) {
            this._width = a, this._height = b, this.domElement.style.width = a + "px", this.domElement.style.height = b + "px", this.composerRenderTarget && (this.composerRenderTarget.width = a, this.composerRenderTarget.height = b), this.rendererCSS.setSize(a, b), this.rendererGL.setSize(a, b);
            var c = a / b;
            c = c > 2.4 ? 2.4 : c, this.camera.aspect = c, this.camera.updateProjectionMatrix()
        }, o.start = function() {
            this.domElement.appendChild(this.rendererGL.domElement), this.domElement.appendChild(this.rendererCSS.domElement), this.createScroller(), this.screenPositionCache.update(!0), this.step(), this.checkPreloaded()
        }, o.step = function() {
            var a = Date.now(),
                b = a - this.prevTime;
            b > this.frameInterval && (this.prevTime = a - b % this.frameInterval, this.preloaderComicObject && this.preloaderComicObject.update(), this.preloaded && this.updateChildren(), this.render()), this.paused || window.requestAnimationFrame(this.step)
        }, o.updateChildren = function() {
            var a = this.scroller.position;
            this.scroller.update(), a != this.scroller.position && (this.containerGL.position.y = this.scroller.position, this.containerCSS.position.y = this.scroller.position, this.updateAnchors()), this.fxs.forEach(function(a) {
                a.beforeUpdate()
            }), this.screenPositionCache.update(), this.triggerManager.update(), this.mapsManager.update(), this.resourceManager.update(), this.fxs.forEach(function(a) {
                a.update()
            })
        }, o.updateAnchors = function() {
            if (!this.transitioning) {
                for (var a = this.currentAnchor, c = 0; c < this.anchors.length; c++) {
                    var d = this.anchors[c],
                        e = c == this.anchors.length ? null : this.anchors[c + 1];
                    e ? b.between(this.scroller.position, d.position, e.position) && (this.currentAnchor = d.name) : b.between(this.scroller.position, d.position, Math.abs(this.insertAt.y)) && (this.currentAnchor = d.name)
                }
                a != this.currentAnchor && (this.fxs.forEach(function(a) {
                    a.revert && a.revert()
                }), this.dispatchEvent({
                    type: "anchorChange",
                    name: this.currentAnchor
                }))
            }
        }, o.render = function() {
            this.useComposer ? this.composer.render(.01) : this.rendererGL.render(this.sceneGL, this.camera), this.rendererCSS.render(this.sceneCSS, this.camera)
        }, o.pause = function() {
            this.paused = !0
        }, o.resume = function() {
            this.paused && (this.paused = !1, this.step())
        }, o.onComicBookObjectClick = function() {}, o.onScroll = function() {}, n
    }), define("theboat/TheBoatComic", ["utils/inherit", "comic/Comic", "utils/Color", "comic/ScreenPositionCache", "comic/display/BasicText", "comic/InteractivityManager", "comic/ResourceManager", "comic/TriggerManager", "comic/MapsManager", "comic/ComicMetrics", "comic/ScrollManager"], function(a, b, c, d, e, f, g, h, i, j) {
        var k = function() {
                this.Comic_constructor(), this.authoringStoryLine = null, this.activeStoryLine = null, this.storyLines = [], this.clearColor = c.fromInt(k.CLEAR_COLOR_DEFAULT)
            },
            l = a.extend(k, b);
        return k.CLEAR_COLOR_DEFAULT = b.CLEAR_COLOR_AFTER_INIT, k.CLEAR_COLOR_SIDE_STORY = 0, l.createStoryLine = function(a, b, c) {
            var e = new THREE.Object3D,
                j = new THREE.Object3D;
            b = b || "left";
            var k = {
                left: -4700,
                right: 4700,
                middle: 0
            }[b];
            e.position.x = k, e.position.z = 2050, j.position.x = e.position.x, j.position.z = e.position.z, e.visible = !1, j.visible = !1;
            var l = new d(this.camera, e, j),
                m = new g(this.camera, l, e, j),
                n = new h(this.camera, l, e),
                o = new i(this.camera, l, e),
                p = new f(this.domElement, this.camera);
            m.debug = c;
            var q = {
                name: a,
                screenPositionCache: l,
                containerGL: e,
                containerCSS: j,
                resourceManager: m,
                triggerManager: n,
                mapsManager: o,
                interactivityManager: p,
                comicObjects: [],
                limitScrollPosition: {
                    min: 0,
                    max: 30
                },
                insertAt: {
                    x: 0,
                    y: 0
                },
                position: b
            };
            this.storyLines.push(q), this.rootGL.add(e), this.rootCSS.add(j)
        }, l.createRenderer = function() {
            this.Comic_createRenderer()
        }, l.startAuthoringStoryLine = function(a) {
            this.authoringStoryLine = a;
            var b = this.getStoryLine(this.authoringStoryLine);
            b.insertAt.x = this.insertAt.x, b.insertAt.y = this.insertAt.y, b.limitScrollPosition.min = Math.abs(b.insertAt.y)
        }, l.endAuthoringStoryLine = function() {
            var a = this.getStoryLine(this.authoringStoryLine);
            a.limitScrollPosition.max = Math.abs(a.insertAt.y), this.authoringStoryLine = null
        }, l.add = function(a, b) {
            if (this.authoringStoryLine) {
                b = b || {};
                var c = this.getStoryLine(this.authoringStoryLine),
                    d = .5 * a.width;
                c.insertAt.x += d, b.center ? (a.x = 0, a.y = c.insertAt.y) : (a.x = c.insertAt.x, a.y = c.insertAt.y, c.insertAt.x += d + j.columnGutterSize), c.screenPositionCache.add(a), a.interactive && c.interactivityManager.add(a);
                var e = {};
                b.activeBetweenScreenPosition && (e.activeBetweenScreenPosition = b.activeBetweenScreenPosition), c.resourceManager.add(a, e), b.triggers && c.triggerManager.add(a, b.triggers), b.maps && c.mapsManager.add(a, b.maps), c.comicObjects.push(a)
            } else this.Comic_add(a, b)
        }, l.wrap = function(a) {
            if (this.authoringStoryLine) {
                var b = this.getStoryLine(this.authoringStoryLine);
                b.insertAt.x = j.left, b.insertAt.y -= isNaN(a) ? j.tierSize + j.tierGutterSize : a
            } else this.Comic_wrap(a)
        }, l.updateChildren = function() {
            var a = this.clearColor.toInt();
            if (this.prevClearColorInt != a && (this.rendererGL.setClearColor(a, 1), this.rendererCSS.setClearColor(a, 1), this.prevClearColorInt = a), this.activeStoryLine) {
                this.containerGL.position.y = this.scroller.position, this.containerCSS.position.y = this.scroller.position;
                var b = this.getStoryLine(this.activeStoryLine);
                this.scroller.update(), this.transitioning || (this.scroller.position < b.limitScrollPosition.min && (this.scroller.position = b.limitScrollPosition.min), this.scroller.position > b.limitScrollPosition.max && (this.scroller.position = b.limitScrollPosition.max)), b.containerGL.position.y = this.scroller.position, b.containerCSS.position.y = this.scroller.position, b.screenPositionCache.update(), b.triggerManager.update(), b.mapsManager.update(), b.resourceManager.update()
            } else this.Comic_updateChildren()
        }, l.getStoryLine = function(a) {
            return _.findWhere(this.storyLines, {
                name: a
            })
        }, l.switchStoryLine = function(a) {
            var d = c.fromInt(k.CLEAR_COLOR_SIDE_STORY);
            this.activeStoryLine = a, this.defaultStoryLineScrollPosition = this.scroller.position;
            var f = this.getStoryLine(this.activeStoryLine),
                g = "left" == f.position ? -.1 : .1,
                h = "left" == f.position ? .45 : -.45;
            this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.to(this.clearColor, 2, {
                r: d.r,
                g: d.g,
                b: d.b
            })), this.timeline.insert(TweenMax.to(this.camera.position, 3, {
                ease: Power4.easeOut,
                x: f.containerGL.position.x,
                z: f.containerGL.position.z + b.CAMERA_Z + 30
            })), this.timeline.insert(TweenMax.to(this.camera.position, 4.75, {
                ease: Power2.easeInOut,
                z: f.containerGL.position.z + b.CAMERA_Z
            }), 3.15), this.timeline.insert(TweenMax.to(this.camera.rotation, 1.5, {
                ease: Power4.easeOut,
                z: g
            }), 0), this.timeline.insert(TweenMax.to(this.containerGL.rotation, 1.5, {
                ease: Power4.easeOut,
                y: h
            }), 0), this.timeline.insert(TweenMax.to(this.containerCSS.rotation, 1.5, {
                ease: Power4.easeOut,
                y: h
            }), 0);
            for (var i = 0; i < this.comicObjects.length; i++) {
                var j = this.comicObjects[i];
                j instanceof e && (j.visible = !1)
            }
            f.containerGL.visible = !0, f.containerCSS.visible = !0, this.updateChildren(), this.dispatchEvent({
                type: "switchStoryLine"
            })
        }, l.defaultStoryLine = function() {
            this.transitioning = !0;
            var a = c.fromInt(k.CLEAR_COLOR_DEFAULT);
            this.timeline && this.timeline.kill(), this.timeline = new TimelineMax({
                onComplete: this.onDefaultStoryLineComplete,
                onCompleteScope: this
            }), this.timeline.insert(TweenMax.to(this.camera.position, 2, {
                ease: Power4.easeInOut,
                x: 0,
                z: b.CAMERA_Z
            }), 1), this.timeline.insert(TweenMax.to(this.camera.rotation, 1.5, {
                ease: Power4.easeInOut,
                z: 0
            }), .5), this.timeline.insert(TweenMax.to(this.containerGL.rotation, 1.5, {
                ease: Power4.easeOut,
                y: 0
            }), 2), this.timeline.insert(TweenMax.to(this.containerCSS.rotation, 1.5, {
                ease: Power4.easeOut,
                y: 0
            }), 2), this.timeline.insert(TweenMax.to(this.scroller, 1.5, {
                ease: Power2.easeInOut,
                position: this.defaultStoryLineScrollPosition
            })), this.timeline.insert(TweenMax.to(this.clearColor, 2, {
                r: a.r,
                g: a.g,
                b: a.b
            }), .75);
            for (var d = 0; d < this.comicObjects.length; d++) {
                var f = this.comicObjects[d];
                f instanceof e && (f.visible = !0)
            }
        }, l.onDefaultStoryLineComplete = function() {
            this.transitioning = !1;
            for (var a = this.getStoryLine(this.activeStoryLine), b = 0; b < a.comicObjects.length; b++) {
                var c = a.comicObjects[b];
                c.active = !1
            }
            a.containerGL.visible = !1, a.containerCSS.visible = !1, this.activeStoryLine = null, this.dispatchEvent({
                type: "switchDefaultStoryLine"
            })
        }, a.promote(k, "Comic"), k
    }), define("comic/display/Frame", ["utils/inherit", "comic/ComicMetrics", "comic/display/ComicObject", "utils/Color", "threejs", "threejsCSS"], function(a, b, c) {
        var d = function(a, b) {
                this.ComicObject_constructor(a, b), this.useGL = !1, this.useCSS = !1
            },
            e = a.extend(d, c);
        return e.createCSS = function() {
            this.ComicObject_createCSS()
        }, e.createGL = function() {
            this.ComicObject_createGL()
        }, e.draw = function() {
            this.ComicObject_draw()
        }, e.update = function() {
            this.ComicObject_update()
        }, a.promote(d, "ComicObject"), d
    }), define("utils/Random", [], function() {
        var a = function() {
            throw "Pls don't <3"
        };
        return a.canvasCache = [], a.fromArray = function(a) {
            return a[Math.floor(a.length * Math.random())]
        }, a.between = function(a, b, c) {
            var d = b - a,
                e = Math.random() * d,
                f = a + e;
            return c && (f = Math.round(f)), f
        }, a.fromSeed = function(a) {
            var b;
            return a = (9301 * a + 49297) % 233280, b = a / 233280
        }, a.generateSeedFromString = function(a) {
            a = a.toString();
            for (var b = 0, c = 0; c < a.length; c++) b += a.charCodeAt(c);
            return b
        }, a.pixel = function(b, c) {
            var d, e, f, g, h, i, j, k, l, m, n, o, p;
            for (p = 0; p < a.canvasCache.length; p++) {
                var q = a.canvasCache[p];
                b === q.canvas && c.r === q.color.r && c.g === q.color.g && c.b === q.color.b && c.a === q.color.a && (f = q.pixelsOfColor)
            }
            if (0 === f.length) {
                for (d = b.getContext("2d"), e = d.getImageData(0, 0, b.width, b.height), f = [], g = b.width, p = 0; p < e.data.length; p += 4) h = e.data[p + 0], i = e.data[p + 1], j = e.data[p + 2], k = e.data[p + 3], l = p / 4, h === c.r && i === c.g && j === c.b && k === c.a && (n = l / g, m = l % g, o = {
                    x: m,
                    y: n,
                    r: c.r,
                    g: c.g,
                    b: c.b,
                    a: c.a
                }, f.push(o));
                a.canvasCache.push({
                    canvas: b,
                    color: c,
                    pixelsOfColor: f
                })
            }
            return f.length ? a.fromArray(f) : null
        }, a.shuffle = function(a) {
            for (var b, c, d = a.length; 0 !== d;) c = Math.floor(Math.random() * d), d -= 1, b = a[d], a[d] = a[c], a[c] = b;
            return a
        }, a
    }), define("comic/display/ImageFrame", ["utils/inherit", "comic/ComicMetrics", "comic/display/Frame", "comic/display/Image", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b, c, d) {
            this.imgURL = c, this.params = d || {}, this.params.offsetX = this.params.offsetX || 0, this.params.offsetY = this.params.offsetY || 0, this.params.offsetZ = this.params.offsetZ || 0, this.Frame_constructor(a, b), this.useGL = !0, this.useCSS = !1
        };
        f.preloaderDisplayClass = null;
        var g = a.extend(f, c);
        return g.createCSS = function() {
            this.Frame_createCSS()
        }, g.createGL = function() {
            this.Frame_createGL(), this.image = new d(this.imgURL, this.width, this.height), this.image.mesh.position.x = this.params.offsetX, this.image.mesh.position.y = this.params.offsetY, this.image.mesh.position.z = this.params.offsetZ + e.between(-50, 50), this.image.mesh.rotation.x = e.between(-.1, .1), this.image.mesh.rotation.y = e.between(-.1, .1), this.image.material.depthTest = !1, this.image.material.depthWrite = !1, this.objectGL.add(this.image.mesh), this.loadQueue.add(this.image), f.preloaderDisplayClass && (this.preloaderDisplay = new f.preloaderDisplayClass, this.objectGL.add(this.preloaderDisplay.object), this.objectGL.visible = !0)
        }, g.load = function() {
            this.Frame_load(), this.objectGL.visible = !0, this.image.mesh.visible = !1
        }, g.onLoadQueueComplete = function() {
            this.Frame_onLoadQueueComplete(), this.preloaderDisplay && (this.objectGL.remove(this.preloaderDisplay.object), this.preloaderDisplay.dispose(), this.preloaderDisplay = null, this.image.mesh.visible = !0)
        }, g.update = function() {
            this.active && this.preloaderDisplay && this.preloaderDisplay.update(), this.Frame_update()
        }, g.disposeGL = function() {
            this.objectGL.remove(this.image.mesh), this.preloaderDisplay && (this.objectGL.remove(this.preloaderDisplay.object), this.preloaderDisplay.dispose(), this.preloaderDisplay = null), this.image.dispose(), this.image = null, this.Frame_disposeGL()
        }, a.promote(f, "Frame"), f
    }), define("comic/display/Splash", ["utils/inherit", "comic/ComicMetrics", "comic/display/ComicObject", "utils/Color", "threejs", "threejsCSS"], function(a, b, c) {
        var d = function(a, b) {
            a = a || 2200, b = b || 1300, this.ComicObject_constructor(a, b), this.useGL = !0, this.useCSS = !1, this.usePreloader = !0
        };
        d.preloaderDisplayClass = null;
        var e = a.extend(d, c);
        return e.createGL = function() {
            this.ComicObject_createGL(), this.rootObject = new THREE.Object3D, this.rootObject.visible = !1
        }, e.load = function() {
            this.ComicObject_load(), d.preloaderDisplayClass && this.usePreloader && (this.preloaderDisplay = new d.preloaderDisplayClass, this.objectGL.add(this.preloaderDisplay.object), this.objectGL.visible = !0)
        }, e.onLoadQueueComplete = function() {
            this.ComicObject_onLoadQueueComplete(), this.preloaderDisplay && (this.objectGL.remove(this.preloaderDisplay.object), this.preloaderDisplay.dispose(), this.preloaderDisplay = null), this.rootObject.visible = !0
        }, e.disposeGL = function() {
            this.preloaderDisplay && (this.objectGL.remove(this.preloaderDisplay.object), this.preloaderDisplay.dispose(), this.preloaderDisplay = null), this.objectGL.remove(this.rootObject), this.rootObject = null, this.ComicObject_disposeGL()
        }, a.promote(d, "ComicObject"), d
    }),
    function(a) {
        "use strict";
        var b = a.GreenSockGlobals || a,
            c = function(a) {
                var c, d = a.split("."),
                    e = b;
                for (c = 0; c < d.length; c++) e[d[c]] = e = e[d[c]] || {};
                return e
            },
            d = c("com.greensock.utils"),
            e = function(a) {
                var b = a.nodeType,
                    c = "";
                if (1 === b || 9 === b || 11 === b) {
                    if ("string" == typeof a.textContent) return a.textContent;
                    for (a = a.firstChild; a; a = a.nextSibling) c += e(a)
                } else if (3 === b || 4 === b) return a.nodeValue;
                return c
            },
            f = document,
            g = f.defaultView ? f.defaultView.getComputedStyle : function() {},
            h = /([A-Z])/g,
            i = function(a, b, c, d) {
                var e;
                return (c = c || g(a, null)) ? (a = c.getPropertyValue(b.replace(h, "-$1").toLowerCase()), e = a || c.length ? a : c[b]) : a.currentStyle && (c = a.currentStyle, e = c[b]), d ? e : parseInt(e, 10) || 0
            },
            j = function(a) {
                return a.length && a[0] && (a[0].nodeType && a[0].style && !a.nodeType || a[0].length && a[0][0]) ? !0 : !1
            },
            k = function(a) {
                var b, c, d, e = [],
                    f = a.length;
                for (b = 0; f > b; b++)
                    if (c = a[b], j(c))
                        for (d = c.length, d = 0; d < c.length; d++) e.push(c[d]);
                    else e.push(c);
                return e
            },
            l = ")eefec303079ad17405c",
            m = /(?:<br>|<br\/>|<br \/>)/gi,
            n = f.all && !f.addEventListener,
            o = "<div style='position:relative;display:inline-block;" + (n ? "*display:inline;*zoom:1;'" : "'"),
            p = function(a) {
                a = a || "";
                var b = -1 !== a.indexOf("++"),
                    c = 1;
                return b && (a = a.split("++").join("")),
                    function() {
                        return o + (a ? " class='" + a + (b ? c++ : "") + "'>" : ">")
                    }
            },
            q = d.SplitText = b.SplitText = function(a, b) {
                if ("string" == typeof a && (a = q.selector(a)), !a) throw "cannot split a null element.";
                this.elements = j(a) ? k(a) : [a], this.chars = [], this.words = [], this.lines = [], this._originals = [], this.vars = b || {}, this.split(b)
            },
            r = function(a, b, c, d, h) {
                m.test(a.innerHTML) && (a.innerHTML = a.innerHTML.replace(m, l));
                var j, k, n, o, q, r, s, t, u, v, w, x, y, z = e(a),
                    A = b.type || b.split || "chars,words,lines",
                    B = -1 !== A.indexOf("lines") ? [] : null,
                    C = -1 !== A.indexOf("words"),
                    D = -1 !== A.indexOf("chars"),
                    E = "absolute" === b.position || b.absolute === !0,
                    F = E ? "&#173; " : " ",
                    G = -999,
                    H = g(a),
                    I = i(a, "paddingLeft", H),
                    J = i(a, "borderBottomWidth", H) + i(a, "borderTopWidth", H),
                    K = i(a, "borderLeftWidth", H) + i(a, "borderRightWidth", H),
                    L = i(a, "paddingTop", H) + i(a, "paddingBottom", H),
                    M = i(a, "paddingLeft", H) + i(a, "paddingRight", H),
                    N = i(a, "textAlign", H, !0),
                    O = a.clientHeight,
                    P = a.clientWidth,
                    Q = z.length,
                    R = "</div>",
                    S = p(b.wordsClass),
                    T = p(b.charsClass),
                    U = -1 !== (b.linesClass || "").indexOf("++"),
                    V = b.linesClass;
                for (U && (V = V.split("++").join("")), n = S(), o = 0; Q > o; o++) r = z.charAt(o), ")" === r && z.substr(o, 20) === l ? (n += R + "<BR/>", o !== Q - 1 && (n += " " + S()), o += 19) : " " === r && " " !== z.charAt(o - 1) && o !== Q - 1 ? (n += R, o !== Q - 1 && (n += F + S())) : n += D && " " !== r ? T() + r + "</div>" : r;
                for (a.innerHTML = n + R, q = a.getElementsByTagName("*"), Q = q.length, s = [], o = 0; Q > o; o++) s[o] = q[o];
                if (B || E)
                    for (o = 0; Q > o; o++) t = s[o], k = t.parentNode === a, (k || E || D && !C) && (u = t.offsetTop, B && k && u !== G && "BR" !== t.nodeName && (j = [], B.push(j), G = u), E && (t._x = t.offsetLeft, t._y = u, t._w = t.offsetWidth, t._h = t.offsetHeight), B && (C !== k && D || (j.push(t), t._x -= I), k && o && (s[o - 1]._wordEnd = !0)));
                for (o = 0; Q > o; o++) t = s[o], k = t.parentNode === a, "BR" !== t.nodeName ? (E && (w = t.style, C || k || (t._x += t.parentNode._x, t._y += t.parentNode._y), w.left = t._x + "px", w.top = t._y + "px", w.position = "absolute", w.display = "block", w.width = t._w + 1 + "px", w.height = t._h + "px"), C ? k ? d.push(t) : D && c.push(t) : k ? (a.removeChild(t), s.splice(o--, 1), Q--) : !k && D && (u = !B && !E && t.nextSibling, a.appendChild(t), u || a.appendChild(f.createTextNode(" ")), c.push(t))) : B || E ? (a.removeChild(t), s.splice(o--, 1), Q--) : C || a.appendChild(t);
                if (B) {
                    for (E && (v = f.createElement("div"), a.appendChild(v), x = v.offsetWidth + "px", u = v.offsetParent === a ? 0 : a.offsetLeft, a.removeChild(v)), w = a.style.cssText, a.style.cssText = "display:none;"; a.firstChild;) a.removeChild(a.firstChild);
                    for (y = !E || !C && !D, o = 0; o < B.length; o++) {
                        for (j = B[o], v = f.createElement("div"), v.style.cssText = "display:block;text-align:" + N + ";position:" + (E ? "absolute;" : "relative;"), V && (v.className = V + (U ? o + 1 : "")), h.push(v), Q = j.length, q = 0; Q > q; q++) "BR" !== j[q].nodeName && (t = j[q], v.appendChild(t), y && (t._wordEnd || C) && v.appendChild(f.createTextNode(" ")), E && (0 === q && (v.style.top = t._y + "px", v.style.left = I + u + "px"), t.style.top = "0px", u && (t.style.left = t._x - u + "px")));
                        C || D || (v.innerHTML = e(v).split(String.fromCharCode(160)).join(" ")), E && (v.style.width = x, v.style.height = t._h + "px"), a.appendChild(v)
                    }
                    a.style.cssText = w
                }
                E && (O > a.clientHeight && (a.style.height = O - L + "px", a.clientHeight < O && (a.style.height = O + J + "px")), P > a.clientWidth && (a.style.width = P - M + "px", a.clientWidth < P && (a.style.width = P + K + "px")))
            },
            s = q.prototype;
        s.split = function(a) {
            this.isSplit && this.revert(), this.vars = a || this.vars, this._originals.length = this.chars.length = this.words.length = this.lines.length = 0;
            for (var b = 0; b < this.elements.length; b++) this._originals[b] = this.elements[b].innerHTML, r(this.elements[b], this.vars, this.chars, this.words, this.lines);
            return this.isSplit = !0, this
        }, s.revert = function() {
            if (!this._originals) throw "revert() call wasn't scoped properly.";
            for (var a = this._originals.length; --a > -1;) this.elements[a].innerHTML = this._originals[a];
            return this.chars = [], this.words = [], this.lines = [], this.isSplit = !1, this
        }, q.selector = a.$ || a.jQuery || function(b) {
            return a.$ ? (q.selector = a.$, a.$(b)) : f ? f.getElementById("#" === b.charAt(0) ? b.substr(1) : b) : b
        }
    }(window || {}), define("splitText", function() {}), define("comic/display/BubbleText", ["underscore", "utils/inherit", "comic/display/BasicText", "splitText"], function(a, b, c) {
        var d = function(a, b, c, d) {
            this.params = d || {}, this.params.offsetZ = this.params.offsetZ || 85, this.BasicText_constructor(a, b, c, d), this.useGL = !1, this.useCSS = !0
        };
        d.defaultTrigger = {
            atScreenPosition: .9,
            call: "transitionIn"
        }, d.directionRules = [{
            search: "-nt",
            x: 0,
            y: 0
        }, {
            search: "-t",
            x: 0,
            y: 1
        }, {
            search: "-tr",
            x: 1,
            y: 1
        }, {
            search: "-r",
            x: 1,
            y: 0
        }, {
            search: "-br",
            x: 1,
            y: -1
        }, {
            search: "-b",
            x: 0,
            y: -1
        }, {
            search: "-bl",
            x: -1,
            y: -1
        }, {
            search: "-l",
            x: -1,
            y: 0
        }, {
            search: "-tl",
            x: -1,
            y: 1
        }], d.sequenceTransitionIn = function(b) {
            d.sequence || (d.sequence = [], a.bindAll(d, "next")), d.sequence.push(b), 1 == d.sequence.length && d.next()
        }, d.next = function() {
            var a = d.sequence[0];
            a._transitionIn.apply(a);
            var b = 450;
            d.sequence.length >= 5 && (b = 350), d.sequence.length >= 10 && (b = 200), d.sequence.length >= 15 && (b = 75), setTimeout(function() {
                d.sequence.shift(), d.sequence.length > 0 && d.next()
            }, b)
        };
        var e = b.extend(d, c);
        return e.createCSS = function() {
            this.BasicText_createCSS(), "desktop" == Detectizr.device.type && (this.splitText = new SplitText(this.div.getElementsByClassName("dialog")[0], {
                type: "words"
            }), TweenMax.set(this.splitText.words, {
                css: {
                    opacity: 0
                }
            })), TweenMax.set(this.domElement, {
                opacity: 0
            })
        }, e.getRule = function() {
            for (var a = 0; a < d.directionRules.length; a++) {
                var b = d.directionRules[a];
                if (-1 != this.htmlText.indexOf(b.search)) return b
            }
            return {
                x: 0,
                y: 0
            }
        }, e.disposeCSS = function() {
            this.BasicText_disposeCSS(), this.timeline && (this.timeline.kill(), this.timeline = null), this.splitText && (this.splitText.revert(), this.splitText = null), this.hasTransitionedIn = !1, TweenMax.killTweensOf(this.domElement)
        }, e.transitionIn = function() {
            d.sequenceTransitionIn(this)
        }, e._transitionIn = function() {
            if (!this.hasTransitionedIn) {
                if (this.hasTransitionedIn = !0, this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.domElement) {
                    var a = this.getRule();
                    this.timeline.add(TweenMax.fromTo(this.div, .2, {
                        x: this.params.offsetX + 60 * a.x,
                        y: this.params.offsetY + -60 * a.y,
                        ease: Power4.easeOut
                    }, {
                        x: this.params.offsetX,
                        y: this.params.offsetY
                    }), 0), this.timeline.add(TweenMax.to(this.domElement, .2, {
                        opacity: 1
                    }), 0)
                }
                if (this.splitText)
                    for (var b = this.splitText.words.length, c = 0; b > c; c++) {
                        var d = this.splitText.words[c];
                        d.style.padding = "30px", d.style.margin = "-30px", this.timeline.add(TweenMax.to(this.splitText.words[c], .2, {
                            opacity: 1
                        }), .1 * c + .15)
                    }
            }
        }, b.promote(d, "BasicText"), d
    }), define("theboat/001landing/rain/RainAlt", ["underscore", "createjsEventDispatcher", "threejs", "comic/Queue", "comic/display/Image"], function(a, b, c, d, e) {
        var f = function() {
                this.object = new c.Object3D, this.loadQueue = new d("load", "load"), a.bindAll(this, "onLoad"), this.draw()
            },
            g = f.prototype;
        return b.EventDispatcher.initialize(g), g.draw = function() {
            var a = 2,
                b = 3;
            this.rain1 = new e("images/rain/rain-light-pot.png", 2048 * a, 2048 * b, 2.5), this.rain1.mesh.position.y = 1500, this.rain1.mesh.position.z = -500, this.rain1.texture.wrapS = c.RepeatWrapping, this.rain1.texture.wrapT = c.RepeatWrapping, this.rain1.texture.repeat.x = a, this.rain1.texture.repeat.y = b, this.rain1.material.depthWrite = !1, this.rain1.material.depthTest = !1, this.object.add(this.rain1.mesh), this.loadQueue.add(this.rain1), this.rain2 = new e("images/rain/rain-light-pot.png", 2048 * a, 2048 * b, 2.5), this.rain2.mesh.position.y = 1500, this.rain2.mesh.position.z = -1e3, this.rain2.texture.wrapS = c.RepeatWrapping, this.rain2.texture.wrapT = c.RepeatWrapping, this.rain2.texture.repeat.x = a, this.rain2.texture.repeat.y = b, this.rain2.material.depthWrite = !1, this.rain2.material.depthTest = !1, this.rain2.texture.wrapS = c.RepeatWrapping, this.object.add(this.rain2.mesh), this.loadQueue.add(this.rain2), this.object.rotation.x = -.65, this.object.rotation.z = -.45
        }, g.update = function() {
            this.rain1.texture.offset.y += .025
        }, g.dispose = function() {
            this.loadQueue.removeEventListener("complete", this.onLoad), this.loadQueue.dispose(), this.loadQueue = null, this.object.remove(this.rain1.mesh), this.object.remove(this.rain2.mesh), this.rain1.dispose(), this.rain2.dispose(), this.rain1 = null, this.rain2 = null
        }, g.load = function() {
            this.loadQueue.addEventListener("complete", this.onLoad), this.loadQueue.start()
        }, g.onLoad = function() {
            this.dispatchEvent({
                type: "load"
            })
        }, f
    }), define("theboat/000preloaderrain/PreloaderRainSplash", ["underscore", "utils/inherit", "comic/ComicMetrics", "comic/display/Splash", "theboat/001landing/rain/RainAlt"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b), this.usePreloader = !1
            },
            g = b.extend(f, d);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.rain = new e, this.rootObject.add(this.rain.object), this.blackMattePlane = new THREE.PlaneBufferGeometry(8e4, 3e4), this.blackMatteMaterial = new THREE.MeshBasicMaterial({
                color: 0
            }), this.blackMatte = new THREE.Mesh(this.blackMattePlane, this.blackMatteMaterial), this.blackMatte.position.x = 0, this.blackMatte.position.z = -2e4, this.rootObject.add(this.blackMatte), this.objectGL.position.z = -300, this.objectGL.add(this.rootObject), this.loadQueue.add(this.rain), this.rain.rain1.material.opacity = 0, this.rain.rain2.material.opacity = 0
        }, g.onLoadQueueComplete = function() {
            this.timeline = new TimelineMax, this.rain.object.visible = !0, this.timeline.insert(TweenMax.to(this.rain.rain1.material, 2, {
                opacity: 1
            })), this.timeline.insert(TweenMax.to(this.rain.rain2.material, 2, {
                opacity: 1
            }), 2), this.Splash_onLoadQueueComplete()
        }, g.disposeGL = function() {
            this.timeline && this.timeline.kill(), this.rootObject.remove(this.rain.object), this.rootObject.remove(this.blackMatte), this.blackMattePlane.dispose(), this.blackMatteMaterial.dispose(), this.blackMatte = null, this.blackMattePlane = null, this.blackMatteMaterial = null, this.rain = null, this.Splash_disposeGL()
        }, g.draw = function() {
            this.Splash_draw()
        }, g.update = function() {
            this.active && this.rain.update()
        }, b.promote(f, "Splash"), f
    }), define("comic/display/ChunkedImage", ["underscore", "threejs", "createjsEventDispatcher", "config", "comic/display/Image"], function(a, b, c, d, e) {
        var f = function(c, d, e, f, g) {
                this.imgURL = c, this.width = d, this.height = e, this.scale = f, this.params = g || {}, this.params.widthSegments = 6, this.params.heightSegments = 6, this.mesh = new b.Object3D, this._opacity = 1, this._transparent = !0, this.drawnUnits = 0, this.currentUnit = 0, this.subImages = [], a.bindAll(this, "onLoad", "drawNext")
            },
            g = f.prototype;
        return c.EventDispatcher.initialize(g), Object.defineProperties(g, {
            opacity: {
                set: function(a) {
                    this._opacity = a;
                    for (var b = 0; b < this.subImages.length; b++) {
                        var c = this.subImages[b];
                        c.material.opacity = this._opacity
                    }
                },
                get: function() {
                    return this._opacity
                }
            },
            transparent: {
                set: function(a) {
                    this._transparent = a;
                    for (var b = 0; b < this.subImages.length; b++) {
                        var c = this.subImages[b];
                        c.material.transparent = this._transparent
                    }
                },
                get: function() {
                    return this._transparent
                }
            }
        }), g.load = function() {
            this.loader = new b.ImageLoader, this.crossOrigin && (this.loader.crossOrigin = "anonymous"), this.loader.load(this.imgURL, this.onLoad)
        }, g.onLoad = function(a) {
            this.disposed || (this.img = a, this.draw())
        }, g.draw = function() {
            this.timeoutId = setTimeout(this.drawNext, 1)
        }, g.drawNext = function() {
            for (var a = Date.now(), b = this.params.widthSegments, c = this.params.heightSegments, d = this.width * this.scale, f = this.height * this.scale, g = this.width / b * this.scale, h = this.height / c * this.scale, i = this.width / b, j = this.height / c, k = b * c; this.currentUnit < k;) {
                var l = this.currentUnit,
                    m = new e(null, g, h, 1, {
                        cacheTexture: !1
                    }),
                    n = l % b,
                    o = Math.floor(l / c),
                    p = document.createElement("canvas");
                p.width = i, p.height = j;
                var q = p.getContext("2d");
                if (q.fillStyle = "#ff0000", q.drawImage(this.img, n * i, o * j, i, j, 0, 0, i, j), m.img = p, m.mesh.position.x = n * g - .5 * d + .5 * g, m.mesh.position.y = -1 * (o * h - .5 * f + .5 * h), m.material.opacity = this._opacity, m.material.transparent = this._transparent, this.mesh.add(m.mesh), this.subImages.push(m), this.currentUnit++, this.currentUnit >= k) return void this.dispatchEvent({
                    type: "load"
                });
                if (Date.now() - a >= 1e3 / 120) return void(this.timeoutId = setTimeout(this.drawNext, 1))
            }
        }, g.dispose = function() {
            this.disposed = !0, this.timeoutId && clearTimeout(this.timeoutId);
            for (var a = 0; a < this.subImages.length; a++) {
                var b = this.subImages[a];
                this.mesh.remove(b.mesh), b.dispose()
            }
            this.subImages = null
        }, f
    }), define("theboat/001landing/ScrollCTA", ["underscore", "threejs", "comic/display/Image", "createjsEventDispatcher", "utils/Random", "utils/Color", "comic/Queue"], function(a, b, c, d, e, f, g) {
        var h = function() {
                a.bindAll(this, "onLoad"), this.object = new b.Object3D, this.loadQueue = new g("load", "load"), this.draw()
            },
            i = h.prototype;
        return d.EventDispatcher.initialize(i), i.draw = function() {
            this.arrow = new c("images/001-landing/arrow.png", 69, 98, .75), this.object.add(this.arrow.mesh), this.loadQueue.add(this.arrow), this.arrow.material.opacity = 0, this.label20mins = new c("images/001-landing/text-20-mins.png", 336, 72, .75), this.object.add(this.label20mins.mesh), this.loadQueue.add(this.label20mins), this.label20mins.material.opacity = 0, this.labelScroll = new c("images/001-landing/text-scroll.png", 154, 42, .75), this.object.add(this.labelScroll.mesh), this.loadQueue.add(this.labelScroll), this.labelScroll.material.opacity = 0
        }, i.load = function() {
            this.loadQueue.addEventListener("complete", this.onLoad), this.loadQueue.start()
        }, i.onLoad = function() {
            this.dispatchEvent({
                type: "load"
            })
        }, i.transitionIn = function() {
            this.hasTransitionedOut || (this.label20mins.mesh.position.set(0, 210, 400), this.labelScroll.mesh.position.set(0, 210, 400), this.arrow.mesh.position.set(0, 600, 1200), this.arrow.mesh.rotation.set(1, 0, 0), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.to(this.arrow.mesh.position, 2.5, {
                ease: Power4.easeOut,
                y: 0,
                z: 0
            })), this.timeline.insert(TweenMax.to(this.arrow.mesh.rotation, 1.25, {
                ease: Power4.easeOut,
                x: 0
            })), this.timeline.insert(TweenMax.to(this.arrow.material, .35, {
                ease: Linear.easeOut,
                opacity: 1
            })), this.timeline.insert(TweenMax.to(this.label20mins.material, 2, {
                ease: Power2.easeOut,
                opacity: 1
            }), .5), this.timeline.insert(TweenMax.to(this.label20mins.mesh.position, 2, {
                ease: Power2.easeOut,
                y: 70,
                z: 0
            }), .5), this.timeline.insert(TweenMax.to(this.label20mins.material, 2, {
                ease: Power2.easeOut,
                opacity: 0
            }), 3), this.timeline.insert(TweenMax.to(this.label20mins.mesh.position, 2, {
                ease: Power2.easeOut,
                y: -70,
                z: -400
            }), 3), this.timeline.insert(TweenMax.to(this.labelScroll.material, 2, {
                ease: Power2.easeOut,
                opacity: 1
            }), 3.5), this.timeline.insert(TweenMax.to(this.labelScroll.mesh.position, 2, {
                ease: Power2.easeOut,
                y: 70,
                z: 0
            }), 3.5))
        }, i.transitionOut = function() {
            this.hasTransitionedOut || (this.hasTransitionedOut = !0, this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.to(this.labelScroll.mesh.position, 1, {
                ease: Power2.easeIn,
                y: 70,
                z: 400
            }), 0), this.timeline.insert(TweenMax.to(this.labelScroll.material, 2, {
                ease: Power2.easeOut,
                opacity: 0
            }), 0), this.timeline.insert(TweenMax.to(this.label20mins.mesh.position, 1, {
                ease: Power2.easeIn,
                y: 70,
                z: 400
            }), 0), this.timeline.insert(TweenMax.to(this.label20mins.material, 2, {
                ease: Power2.easeOut,
                opacity: 0
            }), 0), this.timeline.insert(TweenMax.to(this.arrow.material, 1, {
                ease: Power2.easeOut,
                opacity: 0
            }), 0), this.timeline.insert(TweenMax.to(this.arrow.mesh.position, 1, {
                ease: Power4.easeInOut,
                y: -340
            }), 0))
        }, i.dispose = function() {
            this.timeline && (this.timeline.kill(), this.timeline = null), this.loadQueue.removeEventListener("complete", this.onLoad), this.loadQueue.dispose(), this.loadQueue = null, this.object.remove(this.arrow.mesh), this.object.remove(this.labelScroll.mesh), this.object.remove(this.label20mins.mesh), this.arrow.dispose(), this.labelScroll.dispose(), this.label20mins.dispose(), this.arrow = null, this.labelScroll = null, this.label20mins = null
        }, i.update = function() {}, h
    }), define("theboat/001landing/clouds/Cloud", ["underscore", "createjsEventDispatcher", "utils/inherit", "utils/Random", "comic/display/Image", "math/ArmyKnife", "threejs"], function(a, b, c, d, e, f) {
        var g = function() {
                a.bindAll(this, "onLoad"), this.draw()
            },
            h = g.prototype;
        return b.EventDispatcher.initialize(h), h.draw = function() {
            this.image = new e("images/001-landing/cloud-pot-01.png", 512, 256, 5), this.object = this.image.mesh, this.image.material.opacity = f.map(this.object.position.z, -1e4, -2e3, .2, .85)
        }, h.update = function() {
            this.object.position.x -= 4.8, this.object.position.x < -12e3 && (this.object.position.x = 12e3)
        }, h.dispose = function() {
            this.image.removeEventListener("load", this.onLoad), this.object.remove(this.image.mesh), this.image.dispose(), this.image = null
        }, h.load = function() {
            this.image.addEventListener("load", this.onLoad), this.image.load()
        }, h.onLoad = function() {
            this.dispatchEvent({
                type: "load"
            })
        }, g
    }), define("theboat/001landing/clouds/Clouds", ["underscore", "createjsEventDispatcher", "comic/Queue", "threejs", "theboat/001landing/clouds/Cloud", "comic/display/Image", "math/ArmyKnife", "utils/Random"], function(a, b, c, d, e, f, g, h) {
        var i = function() {
                a.bindAll(this, "onLoad"), this.loadQueue = new c("load", "load"), this.object = new d.Object3D, this.clouds = [], this.draw()
            },
            j = i.prototype;
        return b.EventDispatcher.initialize(j), j.draw = function() {
            this.foreClouds = new f("images/001-landing/foreground-clouds-pot.png", 2748, 512, 5.15), this.foreClouds.material.opacity = .75, this.foreClouds.mesh.position.y = 1550, this.foreClouds.mesh.position.z = -3e3, this.foreClouds.texture.repeat.x = 1.4, this.foreClouds.texture.wrapS = d.RepeatWrapping, this.object.add(this.foreClouds.mesh), this.loadQueue.add(this.foreClouds);
            for (var a = 35, b = 0; a > b; b++) {
                var c = new e;
                this.object.add(c.object), this.clouds.push(c), this.loadQueue.add(c), c.object.position.x = h.between(-9e3, 9e3), c.object.position.y = h.between(0, 1700), c.object.position.z = g.map(b, a, 0, -3500, -8e3, !1, !1, !1), c.image.material.opacity = g.map(c.object.position.z, -8e3, -2e3, .2, 1, !1, !1, !1)
            }
        }, j.update = function() {
            this.foreClouds.texture.offset.x += .0015;
            for (var a = 0; a < this.clouds.length; a++) {
                var b = this.clouds[a];
                b.update()
            }
        }, j.load = function() {
            this.loadQueue.addEventListener("complete", this.onLoad), this.loadQueue.start()
        }, j.dispose = function() {
            this.loadQueue.removeEventListener("complete", this.onLoad), this.loadQueue.dispose(), this.loadQueue = null, this.object.remove(this.foreClouds.mesh), this.foreClouds.dispose(), this.foreClouds = null;
            for (var a = 0; a < this.clouds.length; a++) {
                var b = this.clouds[a];
                this.object.remove(b.object), b.dispose()
            }
            this.clouds = null
        }, j.onLoad = function() {
            this.dispatchEvent({
                type: "load"
            })
        }, i
    }), define("theboat/001landing/lightning/LightningBolt", ["underscore", "createjsEventDispatcher", "utils/inherit", "comic/Queue", "utils/Random", "comic/display/Image", "audio/Thump", "threejs", "tweenMax"], function(a, b, c, d, e, f, g, h) {
        var i = function() {
                a.bindAll(this, "onLoad"), this.bolts = [], this.loadQueue = new d("load", "load"), this.draw(), this.audioIndex = 0, this.audioIds = ["thunder01", "thunder02", "thunder03", "thunder04", "thunder05"]
            },
            j = i.prototype;
        return b.EventDispatcher.initialize(j), i.dimensions = [{
            width: 614,
            height: 1284
        }, {
            width: 570,
            height: 769
        }, {
            width: 367,
            height: 861
        }, {
            width: 353,
            height: 638
        }], j.draw = function() {
            this.object = new h.Object3D;
            for (var a = 0; a < i.dimensions.length; a++) {
                var b = i.dimensions[a],
                    c = new f("images/lightning/lightning-bolt-0" + (a + 1) + ".png", b.width, b.height, 2);
                c.mesh.visible = !1, this.bolts.push(c), this.object.add(c.mesh), this.loadQueue.add(c)
            }
            this.flashMaterial = new h.MeshBasicMaterial({
                color: 16777215
            }), this.flashGeometry = new h.PlaneBufferGeometry(13e3, 1e5), this.flashMesh = new h.Mesh(this.flashGeometry, this.flashMaterial), this.flashMaterial.transparent = !0, this.flashMaterial.opacity = 0, this.flashMesh.position.z = -1e3, this.object.add(this.flashMesh)
        }, j.strike = function(a, b) {
            a = a || .5, b = b || 0;
            for (var c = 0; c < this.bolts.length; c++) this.bolts[c].mesh.visible = !1;
            var d = e.fromArray(this.bolts),
                f = d.mesh,
                h = d.material;
            f.position.x = e.between(-3e3, 3e3), f.position.y = e.between(800, 1e3), f.position.z = e.between(-1900, -1900), f.visible = !0, this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.fromTo(h, 2, {
                easing: Power4.easeOut,
                opacity: 1
            }, {
                opacity: 0,
                onComplete: function() {
                    f.visible = !1
                }
            })), TweenMax.set(this.flashMaterial, {
                opacity: 1
            }), this.timeline.insert(TweenMax.fromTo(this.flashMaterial, a, {
                easing: Power4.easeOut,
                opacity: 1
            }, {
                opacity: 0
            }), b);
            var i = this.audioIds[this.audioIndex],
                j = g.get(i);
            this.audioIndex++, this.audioIndex >= this.audioIds.length && (this.audioIndex = 0), j.volume = .05 * Math.random() + .05, j.isLoaded && j.seek(0).play()
        }, j.bigStrike = function() {
            this.strike(2, .2), TweenMax.delayedCall(.5, this.strike, null, this), TweenMax.delayedCall(.8, this.strike, null, this), TweenMax.delayedCall(.9, this.strike, null, this)
        }, j.load = function() {
            this.loadQueue.addEventListener("complete", this.onLoad), this.loadQueue.start()
        }, j.dispose = function() {
            this.loadQueue.removeEventListener("complete", this.onLoad), this.loadQueue.dispose(), this.loadQueue = null;
            for (var a = 0; a < this.bolts.length; a++) {
                var b = this.bolts[a];
                b.dispose()
            }
            this.bolts = null, this.object.remove(this.flashMesh), this.flashMaterial.dispose(), this.flashGeometry.dispose(), this.flashMesh = null, this.flashMaterial = null, this.flashGeometry = null
        }, j.onLoad = function() {
            this.dispatchEvent({
                type: "load"
            })
        }, i
    }), define("theboat/001landing/lightning/Lightning", ["underscore", "createjsEventDispatcher", "threejs", "theboat/001landing/lightning/LightningBolt"], function(a, b, c, d) {
        var e = function() {
                a.bindAll(this, "onLoad"), this.object = new c.Object3D, this.draw()
            },
            f = e.prototype;
        return b.EventDispatcher.initialize(f), f.draw = function() {
            this.lightningBolt = new d, this.object.add(this.lightningBolt.object)
        }, f.update = function() {
            Math.random() > .995 && this.lightningBolt.strike()
        }, f.strike = function(a, b) {
            this.lightningBolt.strike(a, b), this.dispatchEvent({
                type: "strike"
            })
        }, f.bigStrike = function() {
            this.lightningBolt.bigStrike()
        }, f.load = function() {
            this.lightningBolt.addEventListener("load", this.onLoad), this.lightningBolt.load()
        }, f.dispose = function() {
            this.object.remove(this.lightningBolt.object), this.lightningBolt.removeEventListener("load", this.onLoad), this.lightningBolt.dispose(), this.lightningBolt = null
        }, f.onLoad = function() {
            this.dispatchEvent({
                type: "load"
            })
        }, e
    }), define("theboat/001landing/Boat", ["underscore", "threejs", "comic/display/Image", "createjsEventDispatcher", "utils/Random", "utils/Color", "comic/Queue"], function(a, b, c, d, e, f, g) {
        var h = function() {
                a.bindAll(this, "onLoad"), this.object = new b.Object3D, this.time = 0, this.loadQueue = new g("load", "load"), this.draw()
            },
            j = h.prototype;
        return d.EventDispatcher.initialize(j), j.draw = function() {
            var a = ["images/001-landing/boat-01.png", "images/001-landing/boat-02.png"];
            this.boats = [];
            for (var d = 0; d < a.length; d++) {
                var e = new c(a[d], 1104, 555, 5.5);
                this.loadQueue.add(e), this.boats.push(e)
            }
            this.object.add(this.boats[0].mesh), this.activeBoatIndex = 0, this.hook = new c("images/001-landing/hook-01.png", 72, 271, 5.5), this.loadQueue.add(this.hook), this.hookContainer = new b.Object3D, this.hookContainer.add(this.hook.mesh), this.object.add(this.hookContainer), this.hook.mesh.position.y = -745, this.hook.material.depthWrite = !1, this.hook.material.depthTest = !1, this.hookContainer.position.x = -2810, this.hookContainer.position.y = 950, this.hookContainer.position.z = -10
        }, j.dispose = function() {
            for (this.loadQueue.removeEventListener("complete", this.onLoad), this.loadQueue.dispose(), this.loadQueue = null, i = 0; i < this.boats.length; i++) {
                var a = this.boats[i];
                this.object.remove(a.mesh)
            }
            this.boats = null, this.object.remove(this.hookContainer), this.hookContainer.remove(this.hook), this.hook.dispose(), this.hook = null, this.hookContainer = null
        }, j.load = function() {
            this.loadQueue.addEventListener("complete", this.onLoad), this.loadQueue.start()
        }, j.onLoad = function() {
            this.dispatchEvent({
                type: "load"
            })
        }, j.changeBoat = function() {}, j.update = function() {
            var a = -1 * this.object.rotation.z - .8,
                b = .25 * Math.sin(.035 * this.time),
                c = .1 * Math.sin(.15 * this.time);
            this.hookContainer.rotation.z = a - b + c, this.time++
        }, h
    }), define("theboat/001landing/waves/Waves", ["underscore", "threejs", "comic/display/Image", "createjsEventDispatcher", "utils/Random", "utils/Color", "comic/Queue", "theboat/001landing/Boat"], function(a, b, c, d, e, f, g, h) {
        var i = function() {
                a.bindAll(this, "onLoad"), this.object = new b.Object3D, this.time = 0, this.loadQueue = new g("load", "load"), this.draw()
            },
            j = i.prototype;
        return d.EventDispatcher.initialize(j), j.draw = function() {
            var a = 15,
                d = -500;
            this.waves = [];
            for (var e = 0; a > e; e++) {
                var g = .015 * e,
                    i = new f(g, g, g).toInt(),
                    j = new c("images/001-landing/waves-pot.png", 5120, 300, 10, {
                        color: 0 != e ? i : null,
                        cacheTexture: !1
                    });
                j.texture.wrapS = b.RepeatWrapping, j.texture.repeat.x = 2.5, j.texture.offset.x = Math.random(), j.material.opacity = 0 == e ? 1 : .85, j.mesh.position.z = e * d - 100, j.mesh.position.y = 200 * e, j.material.depthWrite = !1, j.material.depthTest = !1, this.waves.push(j), this.object.add(j.mesh), this.loadQueue.add(j)
            }
            this.object.position.y = -5800, this.object.position.z = -2500, this.gradient = new c("images/001-landing/white-gradient.png", 3048, 1e3, 9), this.object.add(this.gradient.mesh), this.gradient.mesh.position.y = -700, this.loadQueue.add(this.gradient), this.boat = new h, this.object.add(this.boat.object), this.loadQueue.add(this.boat), this.boat.object.position.z = -5800, this.boat.object.position.y = 3800
        }, j.dispose = function() {
            this.loadQueue.removeEventListener("complete", this.onLoad), this.loadQueue.dispose(), this.loadQueue = null;
            var a;
            for (a = 0; a < this.waves.length; a++) {
                var b = this.waves[a];
                this.object.remove(b.mesh)
            }
            this.object.remove(this.boat.object), this.boat.dispose(), this.gradient.dispose(), this.gradient = null, this.boat = null, this.waves = null
        }, j.load = function() {
            this.loadQueue.addEventListener("complete", this.onLoad), this.loadQueue.start()
        }, j.onLoad = function() {
            this.dispatchEvent({
                type: "load"
            })
        }, j.changeBoat = function() {
            this.boat.changeBoat()
        }, j.update = function() {
            for (var a = 0; a < this.waves.length; a++) {
                var b = 18 * a,
                    c = 5 * Math.sin(.035 * (this.time + b)),
                    d = 3 * Math.sin(.015 * (this.time + b)),
                    e = 2 * Math.sin(.02 * (this.time + b)),
                    f = this.waves[a];
                f.mesh.position.y += c * d * e, f.mesh.rotation.z = c * e * .031, f.texture.offset.x += 75e-5 * (Math.sin(.01 * (this.time + a)) - .5) + .0011, 0 == a && (this.gradient.mesh.position.x = f.mesh.position.x, this.gradient.mesh.position.y = f.mesh.position.y - 1500, this.gradient.mesh.position.z = f.mesh.position.z + 600, this.gradient.mesh.rotation.x = f.mesh.rotation.x, this.gradient.mesh.rotation.y = f.mesh.rotation.y, this.gradient.mesh.rotation.z = f.mesh.rotation.z), 9 == a && (this.boat.object.position.x += 3 * e, this.boat.object.position.y += 1.7 * c, this.boat.object.position.z += c * e * -35e-5, this.boat.object.rotation.z += c * e * -35e-5, this.object.rotation.y += e * d * 35e-5)
            }
            this.boat.update(), this.time++
        }, i
    }), define("theboat/001landing/fog/Fog", ["underscore", "threejs", "comic/display/Image", "createjsEventDispatcher", "utils/Random", "utils/Color", "comic/Queue"], function(a, b, c, d, e, f, g) {
        var h = function() {
                a.bindAll(this, "onLoad"), this.object = new b.Object3D, this.time = 0, this.loadQueue = new g("load", "load"), this.draw()
            },
            i = h.prototype;
        return d.EventDispatcher.initialize(i), i.draw = function() {
            this.fog = new c("images/001-landing/fog-pot.png", 4096, 1536, 4), this.fog.mesh.position.z = -3300, this.fog.texture.wrapS = b.RepeatWrapping, this.fog.texture.repeat.x = 1, this.fog.material.opacity = .85, this.object.add(this.fog.mesh), this.loadQueue.add(this.fog)
        }, i.load = function() {
            this.loadQueue.addEventListener("complete", this.onLoad), this.loadQueue.start()
        }, i.onLoad = function() {
            this.dispatchEvent({
                type: "load"
            })
        }, i.dispose = function() {
            this.loadQueue.removeEventListener("complete", this.onLoad), this.loadQueue.dispose(), this.loadQueue = null, this.object.remove(this.fog.mesh), this.fog.dispose(), this.fog = null
        }, i.update = function() {
            this.fog.texture.offset.x += .01;
            var a = 5 * Math.sin(.035 * this.time),
                b = 3 * Math.sin(.015 * this.time),
                c = 2 * Math.sin(.02 * this.time);
            this.fog.mesh.rotation.z += a * c * 15e-5, this.fog.mesh.position.y += a * b * c, this.time++
        }, h
    }), define("theboat/001landing/Laurels", ["underscore", "threejs", "comic/display/Image", "createjsEventDispatcher", "utils/Random", "utils/Color", "comic/Queue"], function(a, b, c, d, e, f, g) {
        var h = function() {
                a.bindAll(this, "onLoad"), this.object = new b.Object3D, this.loadQueue = new g("load", "load"), this.draw()
            },
            i = h.prototype;
        return d.EventDispatcher.initialize(i), i.draw = function() {
            var a = .35;
            this.images = [];
            for (var b = 250 * a, c = b * this.images.length, d = c * -.5 + 91.5 * a, e = 0; e < this.images.length; e++) {
                var f = this.images[e];
                f.mesh.position.x = d, this.object.add(f.mesh), this.loadQueue.add(f), d += b
            }
        }, i.load = function() {
            this.loadQueue.addEventListener("complete", this.onLoad), this.loadQueue.start()
        }, i.onLoad = function() {
            this.dispatchEvent({
                type: "load"
            })
        }, i.transitionIn = function() {
            this.timeline = new TimelineMax;
            for (var a = 0; a < this.images.length; a++) {
                var b = this.images[a],
                    c = 1.3 * Math.random();
                b.material.opacity = 0, b.mesh.position.y = -30, b.mesh.position.z = 100, this.timeline.insert(TweenMax.to(b.material, 2, {
                    opacity: 1
                }), c), this.timeline.insert(TweenMax.to(b.mesh.position, 3, {
                    ease: Power4.easeOut,
                    y: 0,
                    z: 0
                }), c)
            }
        }, i.dispose = function() {
            this.timeline && (this.timeline.kill(), this.timeline = null);
            for (var a = 0; a < this.images.length; a++) {
                var b = this.images[a];
                b.dispose()
            }
            this.images = null, this.loadQueue.removeEventListener("complete", this.onLoad), this.loadQueue.dispose(), this.loadQueue = null
        }, i.update = function() {}, h
    }), define("theboat/001landing/LandingSplash", ["underscore", "utils/inherit", "utils/Random", "comic/ComicMetrics", "comic/display/Splash", "comic/display/Image", "comic/display/ChunkedImage", "theboat/001landing/ScrollCTA", "theboat/001landing/rain/RainAlt", "theboat/001landing/clouds/Clouds", "theboat/001landing/lightning/Lightning", "theboat/001landing/waves/Waves", "theboat/001landing/fog/Fog", "theboat/001landing/Laurels"], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n) {
        var o = function(a, b) {
                this.Splash_constructor(a, b), this.time = 0, this.usePreloader = !1
            },
            p = b.extend(o, e);
        return p.createCSS = function() {
            this.Splash_createCSS()
        }, p.createGL = function() {
            this.Splash_createGL(), this.strikes = 0, this.bg = new g("images/001-landing/bg.jpg", 2602, 1695, 15), this.rootObject.add(this.bg.mesh), this.bg.mesh.position.z = -21e3, this.bg.mesh.position.y = -1100, this.title = new f("images/001-landing/title.png", 1643, 339, .4), this.rootObject.add(this.title.mesh), this.title.mesh.position.z = 900, this.title.mesh.position.y = 100, this.nam = new f("images/001-landing/text-nam.png", 1078, 65, .4), this.rootObject.add(this.nam.mesh), this.nam.mesh.position.z = 700, this.nam.mesh.position.y = 10, this.matt = new f("images/001-landing/text-matt.png", 958, 66, .4), this.rootObject.add(this.matt.mesh), this.matt.mesh.position.z = 700, this.matt.mesh.position.y = -30, this.sbs = new f("images/001-landing/text-sbs.png", 735, 63, .35), this.rootObject.add(this.sbs.mesh), this.sbs.mesh.position.z = 700, this.sbs.mesh.position.y = -70, this.rain = new i, this.rootObject.add(this.rain.object), this.clouds = new j, this.rootObject.add(this.clouds.object), this.lightning = new k, this.rootObject.add(this.lightning.object), this.waves = new l, this.rootObject.add(this.waves.object), this.fog = new m, this.rootObject.add(this.fog.object), this.cta = new h, this.objectGL.add(this.cta.object), this.cta.object.position.y = -570, this.laurels = new n, this.objectGL.add(this.laurels.object), this.laurels.object.position.y = 200, this.laurels.object.position.z = 940, this.objectGL.position.z = -300, this.objectGL.add(this.rootObject), this.loadQueue.add(this.bg), this.loadQueue.add(this.matt), this.loadQueue.add(this.nam), this.loadQueue.add(this.sbs), this.loadQueue.add(this.title), this.loadQueue.add(this.rain), this.loadQueue.add(this.clouds), this.loadQueue.add(this.lightning), this.loadQueue.add(this.waves), this.loadQueue.add(this.fog), this.loadQueue.add(this.cta), this.loadQueue.add(this.laurels), this.hasTransitionedIn || (this.title.mesh.visible = !1, this.nam.mesh.visible = !1, this.matt.mesh.visible = !1, this.sbs.mesh.visible = !1, this.laurels.object.visible = !1), a.bindAll(this, "onLightningStrike"), this.lightning.addEventListener("strike", this.onLightningStrike)
        }, p.disposeGL = function() {
            this.lightning.removeEventListener("strike", this.onLightningStrike), this.timeline && (this.timeline.kill(), this.timeline = null), this.rootObject.remove(this.bg.mesh), this.rootObject.remove(this.title.mesh), this.rootObject.remove(this.rain.object), this.rootObject.remove(this.clouds.object), this.rootObject.remove(this.waves.object), this.rootObject.remove(this.fog.object), this.rootObject.remove(this.lightning.object), this.objectGL.remove(this.laurels.object), this.objectGL.remove(this.cta.object), this.matt.dispose(), this.nam.dispose(), this.sbs.dispose(), this.bg.dispose(), this.title.dispose(), this.rain.dispose(), this.clouds.dispose(), this.waves.dispose(), this.lightning.dispose(), this.fog.dispose(), this.laurels.dispose(), this.cta.dispose(), this.matt = null, this.nam = null, this.sbs = null, this.bg = null, this.title = null, this.rain = null, this.clouds = null, this.lightning = null, this.fog = null, this.cta = null, this.laurels = null, this.Splash_disposeGL()
        }, p.draw = function() {
            this.Splash_draw()
        }, p.update = function() {
            if (this.active) {
                var a = .2 * Math.sin(.005 * this.time) - .1,
                    b = .2 * Math.sin(.015 * this.time) - .1,
                    c = .2 * Math.sin(.01 * this.time) - .1,
                    d = .2 * Math.sin(.0075 * this.time) - .1,
                    e = .2 * Math.sin(.01 * this.time) - .1,
                    f = .1 * Math.sin(.015 * this.time) - .05;
                this.title.mesh.rotation.x = .3 * b, this.title.mesh.rotation.y = .4 * e, this.title.mesh.rotation.z = .3 * a, this.rootObject.rotation.y = a * b * c, this.rootObject.rotation.x = d * e * f, this.rootObject.rotation.z = a * b * 1.5, this.rain.update(), this.clouds.update(), this.lightning.update(), this.waves.update(), this.fog.update(), this.time++
            }
        }, p.transitionIn = function() {
            this.hasTransitionedIn || (this.hasTransitionedIn = !0, this.lightning.strike(2, .2), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.delayedCall(0, this.lightning.strike, null, this.lightning), .3), this.timeline.insert(TweenMax.delayedCall(0, this.lightning.strike, null, this.lightning), .5), this.timeline.insert(TweenMax.delayedCall(0, this.showTitle, null, this), 2.5), this.timeline.insert(TweenMax.delayedCall(0, this.lightning.strike, [2, .2], this.lightning), 2.5), this.timeline.insert(TweenMax.delayedCall(0, this.lightning.strike, null, this.lightning), 2.8), this.timeline.insert(TweenMax.delayedCall(0, this.showCredits, null, this), 3.5), this.timeline.insert(TweenMax.delayedCall(0, this.lightning.strike, [2, .2], this.lightning), 3.5), this.timeline.insert(TweenMax.delayedCall(0, this.lightning.strike, null, this.lightning), 3.8), this.timeline.insert(TweenMax.delayedCall(0, this.showLaurels, null, this), 4.3), this.timeline.insert(TweenMax.delayedCall(0, this.cta.transitionIn, null, this.cta), 4.2))
        }, p.showTitle = function() {
            this.active && (this.title.mesh.visible = !0, TweenMax.from(this.title.mesh.position, 4.5, {
                ease: Power3.easeOut,
                z: 1200
            }), TweenMax.from(this.objectGL.rotation, 2.5, {
                ease: Power4.easeOut,
                z: -.2
            }))
        }, p.showCredits = function() {
            this.active && (this.nam.mesh.visible = !0, this.matt.mesh.visible = !0, this.sbs.mesh.visible = !0, TweenMax.from(this.nam.mesh.position, 4.5, {
                ease: Power3.easeOut,
                z: 1300,
                delay: 0
            }), TweenMax.from(this.matt.mesh.position, 4.5, {
                ease: Power3.easeOut,
                z: 1300,
                delay: 0
            }), TweenMax.from(this.sbs.mesh.position, 4.5, {
                ease: Power3.easeOut,
                z: 1300,
                delay: 0
            }), TweenMax.from(this.objectGL.rotation, 2.5, {
                ease: Power4.easeOut,
                z: .2
            }))
        }, p.showLaurels = function() {
            this.active && (this.laurels.object.visible = !0, this.laurels.transitionIn())
        }, p.hideCTA = function() {
            this.cta.transitionOut()
        }, p.onLightningStrike = function() {}, p.changeBoat = function() {
            this.waves.changeBoat()
        }, b.promote(o, "Splash"), o
    }), define("theboat/007stormarrived/StormArrivedSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/ChunkedImage", "comic/display/Splash", "audio/Thump"], function(a, b, c, d, e, f, g) {
        var h = function(a, b) {
                this.Splash_constructor(a, b), this._blackMatteOpacity = 1, this.hasArrived = !1, this.time = 0
            },
            i = a.extend(h, f);
        return Object.defineProperties(i, {
            blackMatteOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._blackMatteOpacity = a
                },
                get: function() {
                    return this._blackMatteOpacity
                }
            }
        }), i.createCSS = function() {
            this.Splash_createCSS()
        }, i.createGL = function() {
            this.Splash_createGL(), this.bg = new d("images/007-storm-arrived/bg-pot-02.jpg", 4096, 2048, 1.5), this.bg.texture.wrapS = b.RepeatWrapping, this.bg.texture.wrapT = b.RepeatWrapping, this.bg.texture.repeat.x = 2, this.bg.texture.repeat.y = 1, this.bg.mesh.position.z = -900, this.bg.mesh.position.y = -800, this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.lightning = new d("images/007-storm-arrived/lightning.png", 616, 1205, 1.1), this.lightning.mesh.position.x = 600, this.lightning.mesh.position.y = -290, this.lightning.mesh.position.z = 200, this.lightning.mesh.rotation.z = -.3, this.rootObject.add(this.lightning.mesh), this.loadQueue.add(this.lightning), this.blackMattePlane = new b.PlaneBufferGeometry(3903, 4500), this.blackMatteMaterial = new b.MeshBasicMaterial({
                color: 0
            }), this.blackMatte = new b.Mesh(this.blackMattePlane, this.blackMatteMaterial), this.blackMatteMaterial.transparent = !0, this.blackMatte.position.x = 0, this.blackMatte.position.y = -4300, this.blackMatte.position.z = -300, this.rootObject.add(this.blackMatte), this.rain1 = new d("images/007-storm-arrived/rain-02-black-pot.png", 4096, 2048, 1), this.rain1.mesh.position.y = -900, this.rain1.mesh.position.z = -260, this.rain1.texture.wrapS = b.RepeatWrapping, this.rain1.texture.wrapT = b.RepeatWrapping, this.rain1.texture.repeat.x = 3, this.rain1.texture.repeat.y = 1.5, this.rootObject.add(this.rain1.mesh), this.loadQueue.add(this.rain1), this.rain1.material.opacity = .5, this.clouds = new d("images/007-storm-arrived/clouds-pot.png", 4096, 1024, .75), this.clouds.mesh.position.y = 100, this.clouds.mesh.position.z = 680, this.clouds.texture.wrapS = b.RepeatWrapping, this.clouds.texture.wrapT = b.RepeatWrapping, this.clouds.texture.repeat.x = 1, this.clouds.texture.repeat.y = 1, this.rootObject.add(this.clouds.mesh), this.loadQueue.add(this.clouds), this.bg.material.opacity = 0, this.lightning.material.opacity = 0, this.rain1.material.opacity = 0, this.clouds.material.opacity = 0, this.hasArrived && (TweenMax.set(this.bg.material, {
                opacity: 1
            }), TweenMax.set(this.rain1.material, {
                opacity: 1
            }), TweenMax.set(this.bg.mesh.position, {
                z: -320
            }), TweenMax.set(this.lightning.material, {
                opacity: 1
            }), TweenMax.set(this.lightning.mesh.position, {
                z: -50
            }), TweenMax.set(this.clouds.material, {
                opacity: 1
            }), TweenMax.set(this.clouds.mesh.position, {
                z: 150
            })), this.objectGL.add(this.rootObject)
        }, i.disposeGL = function() {
            this.rootObject.remove(this.bg.mesh), this.rootObject.remove(this.lightning.mesh), this.rootObject.remove(this.blackMatte), this.rootObject.remove(this.rain1), this.rootObject.remove(this.clouds), this.bg.dispose(), this.lightning.dispose(), this.clouds.dispose(), this.rain1.dispose(), this.blackMattePlane.dispose(), this.blackMatteMaterial.dispose(), this.bg = null, this.lightning = null, this.clouds = null, this.rain1 = null, this.blackMattePlane = null, this.blackMatteMaterial = null, this.blackMatte = null, this.timeline && (this.timeline.kill(), this.timeline = null), this.Splash_disposeGL()
        }, i.stormArrives = function() {
            if (!this.hasArrived && this.active) {
                this.hasArrived = !0;
                var a = g.get("thunder02");
                a.seek(0).play(), this.timeline = new TimelineMax, this.timeline.add(TweenMax.to(this.bg.material, .5, {
                    opacity: 1
                }), 0), this.timeline.add(TweenMax.to(this.bg.mesh.position, 1, {
                    z: -320,
                    ease: Power4.easeOut
                }), 0), this.timeline.add(TweenMax.to(this.lightning.material, .5, {
                    opacity: 1
                }), 0), this.timeline.add(TweenMax.to(this.lightning.mesh.position, .25, {
                    z: 170
                }), 0), this.timeline.add(TweenMax.to(this.rain1.material, .5, {
                    opacity: 1
                }), .2), this.timeline.add(TweenMax.to(this.clouds.mesh.position, .25, {
                    z: 150
                }), 0), this.timeline.add(TweenMax.to(this.clouds.material, .25, {
                    opacity: 1
                }), 0)
            }
        }, i.update = function() {
            this.Splash_update(), this.active && (this.blackMatteMaterial.opacity = this._blackMatteOpacity, this.rain1.texture.offset.x += .035, this.rain1.texture.offset.y += .0455, this.bg.texture.offset.x += .002, this.clouds.texture.offset.x += .007, this.time++)
        }, a.promote(h, "Splash"), h
    }), define("theboat/007stormarrived/StormArrivedText", ["underscore", "utils/inherit", "comic/display/BasicText", "utils/Random", "splitText"], function(a, b, c, d) {
        var e = function(a, b, c) {
            this.BasicText_constructor(a, b, c)
        };
        e.defaultTrigger = {
            atScreenPosition: .9,
            call: "transitionIn"
        };
        var f = b.extend(e, c);
        return f.createCSS = function() {
            this.BasicText_createCSS(), this.hasArrived && TweenMax.set(this.div.children[0], {
                color: 16777215
            })
        }, f.createGL = function() {
            this.BasicText_createGL()
        }, f.draw = function() {
            this.BasicText_draw()
        }, f.stormArrives = function() {
            if (!this.hasArrived && (this.hasArrived = !0, this.div)) {
                TweenMax.to(this.div.children[0], .2, {
                    color: 16777215
                }); {
                    RoughEase.ease.config({
                        strength: 1,
                        template: Quint.easeOut,
                        taper: "out"
                    })
                }
            }
        }, f.disposeCSS = function() {
            this.BasicText_disposeCSS(), this.timeline && (this.timeline.kill(), this.timeline = null), this.splitText && (this.splitText.revert(), this.splitText = null)
        }, f.blowAway = function() {
            if (!this.hasBlownAway && (this.hasBlownAway = !0, this.splitText = new SplitText(this.div.children[0], {
                    type: "words"
                }), this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.splitText))
                for (var a = this.splitText.words.length, b = 0; a > b; b++) {
                    var c = (Math.random() > .3 ? .05 * Math.random() : 0) * b;
                    this.timeline.add(TweenMax.to(this.splitText.words[b], d.between(.5, 1), {
                        ease: Power4.easeIn,
                        x: -1200,
                        y: d.between(800, -300),
                        scale: 7,
                        opacity: 0,
                        rotation: d.between(-180, 180)
                    }), c)
                }
        }, b.promote(e, "BasicText"), e
    }), define("theboat/013incense/IncenseSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/ChunkedImage", "comic/display/Splash"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.bg1 = new d("images/013-021/bg-incense-01.png", 1290, 961, 1.3), this.bg1.mesh.position.x = 700, this.bg1.mesh.position.y = -1500, this.bg1.mesh.position.z = -900, this.rootObject.add(this.bg1.mesh), this.loadQueue.add(this.bg1), this.bg2 = new d("images/013-021/bg-incense-02.png", 1424, 1997, 1.3), this.bg2.mesh.position.x = 500, this.bg2.mesh.position.y = -300, this.bg2.mesh.position.z = -1e3, this.rootObject.add(this.bg2.mesh), this.loadQueue.add(this.bg2), this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.rootObject.remove(this.bg1.mesh), this.rootObject.remove(this.bg2.mesh), this.bg1.dispose(), this.bg2.dispose(), this.bg1 = null, this.bg2 = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/015song/SongPt1Splash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Color", "utils/Random"], function(a, b, c, d, e, f) {
        var g = function(a, b) {
                this.Splash_constructor(a, b)
            },
            h = a.extend(g, e);
        return Object.defineProperties(h, {
            bgInOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgInOpacity = a
                },
                get: function() {
                    return this._bgInOpacity
                }
            },
            bgMidOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgMidOpacity = a
                },
                get: function() {
                    return this._bgMidOpacity
                }
            },
            bgOutOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgOutOpacity = a
                },
                get: function() {
                    return this._bgOutOpacity
                }
            },
            bgSaturation: {
                set: function(a) {
                    a != this._bgSaturation && (a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgSaturation = a)
                },
                get: function() {
                    return this._bgSaturation
                }
            }
        }), h.createCSS = function() {
            this.Splash_createCSS()
        }, h.createGL = function() {
            this.Splash_createGL(), this.time = 0, this.baseColor = f.fromInt(16728873), this.lyrics1 = new d("images/013-021/song-pt1-lyrics.png", 1246, 348, 1, {
                widthSegments: 10,
                heightSegments: 5,
                bufferGeometry: !1
            }), this.rootObject.add(this.lyrics1.mesh), this.loadQueue.add(this.lyrics1), this.lyrics1.mesh.geometry.dynamic = !0, this.bgLeft = new d("images/013-021/song-pt1-bg-flowers-white-left.png", 1169, 926, 9), this.bgLeft.mesh.position.x = -8800, this.bgLeft.mesh.position.y = -400, this.bgLeft.mesh.position.z = -13e3, this.rootObject.add(this.bgLeft.mesh), this.loadQueue.add(this.bgLeft), this.bgRight = new d("images/013-021/song-pt1-bg-flowers-white-right.png", 1609, 859, 9), this.bgRight.mesh.position.x = 8e3, this.bgRight.mesh.position.y = 2e3, this.bgRight.mesh.position.z = -13e3, this.rootObject.add(this.bgRight.mesh), this.loadQueue.add(this.bgRight), this.bgInOpacity = 0, this.bgMidOpacity = 0, this.bgOutOpacity = 0, this.bgSaturation = 1, this.bgLeft.material.opacity = 0, this.bgRight.material.opacity = 0, this.objectGL.add(this.rootObject)
        }, h.disposeGL = function() {
            this.rootObject.remove(this.lyrics1.mesh), this.rootObject.remove(this.bgLeft.mesh), this.rootObject.remove(this.bgRight.mesh), this.lyrics1.dispose(), this.bgLeft.dispose(), this.bgRight.dispose(), this.lyrics1 = null, this.bgLeft = null, this.bgRight = null, this.Splash_disposeGL()
        }, h.update = function() {
            if (this.active) {
                for (var a = this.lyrics1.mesh.geometry.vertices, b = 0; b < a.length; b++) {
                    var c = a[b],
                        d = this.time + 7.7 * b;
                    c.x += .035 * Math.sin(.015 * d), c.y += .05 * Math.sin(.025 * d), c.z += .05 * Math.sin(.01 * d)
                }
                this.lyrics1.mesh.needsUpdate = !0, this.lyrics1.mesh.geometry.verticesNeedUpdate = !0, this.bgLeft.material.opacity = this._bgInOpacity * this._bgMidOpacity * this._bgOutOpacity, this.bgRight.material.opacity = this.bgLeft.material.opacity;
                var e = this.baseColor.clone();
                e.r *= this._bgSaturation, e.g *= this._bgSaturation, e.b *= this._bgSaturation, this.bgRight.material.color.setHex(e.toInt()), this.bgLeft.material.color.setHex(e.toInt()), this.time++
            }
        }, a.promote(g, "Splash"), g
    }), define("theboat/015song/SongPt2Splash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random", "math/ArmyKnife"], function(a, b, c, d, e, f, g) {
        var h = function(a, b) {
                this.Splash_constructor(a, b)
            },
            i = a.extend(h, e);
        return i.createCSS = function() {
            this.Splash_createCSS()
        }, i.createGL = function() {
            this.Splash_createGL(), this.time = 0;
            var a = [{
                file: "images/013-021/song-pt2-left-leaf-01.png",
                width: 141,
                height: 170
            }, {
                file: "images/013-021/song-pt2-left-leaf-02.png",
                width: 153,
                height: 86
            }, {
                file: "images/013-021/song-pt2-left-leaf-02.png",
                width: 126,
                height: 70
            }, {
                file: "images/013-021/song-pt2-right-leaf-01.png",
                width: 135,
                height: 141
            }, {
                file: "images/013-021/song-pt2-right-leaf-02.png",
                width: 112,
                height: 97
            }, {
                file: "images/013-021/song-pt2-right-leaf-03.png",
                width: 114,
                height: 134
            }];
            this.leaves = [];
            for (var b = 0; 20 > b; b++) {
                var c = f.fromArray(a),
                    e = new d(c.file, c.width, c.height, 1.5);
                this.loadQueue.add(e), this.rootObject.add(e.mesh), e.mesh.position.x = f.between(-2e3, 2e3), e.mesh.position.y = f.between(-1e3, 1e3), e.mesh.position.z = f.between(-500, -3e3), e.mesh.rotation.z = f.between(0, 2 * Math.PI), this.leaves.push(e)
            }
            this.lyrics1 = new d("images/013-021/song-pt2-lyrics.png", 1246, 348, 1, {
                widthSegments: 10,
                heightSegments: 5,
                bufferGeometry: !1
            }), this.rootObject.add(this.lyrics1.mesh), this.loadQueue.add(this.lyrics1), this.lyrics1.mesh.geometry.dynamic = !0, this.leftFlower01 = new d("images/013-021/song-pt2-left-flower-01.png", 272, 295, 1.1), this.leftFlower01.mesh.position.x = -650, this.leftFlower01.mesh.position.y = -220, this.leftFlower01.mesh.position.z = 75, this.rootObject.add(this.leftFlower01.mesh), this.loadQueue.add(this.leftFlower01), this.leftFlower02 = new d("images/013-021/song-pt2-left-flower-02.png", 218, 212, 1.1), this.leftFlower02.mesh.position.x = -700, this.leftFlower02.mesh.position.y = 250, this.leftFlower02.mesh.position.z = -200, this.rootObject.add(this.leftFlower02.mesh), this.loadQueue.add(this.leftFlower02), this.leftFlower03 = new d("images/013-021/song-pt2-left-flower-03.png", 289, 305, 1.1), this.leftFlower03.mesh.position.x = -900, this.leftFlower03.mesh.position.y = 0, this.leftFlower03.mesh.position.z = -100, this.rootObject.add(this.leftFlower03.mesh), this.loadQueue.add(this.leftFlower03), this.rightFlower01 = new d("images/013-021/song-pt2-right-flower-01.png", 264, 261, 1.1), this.rightFlower01.mesh.position.x = 650, this.rightFlower01.mesh.position.y = -180, this.rightFlower01.mesh.position.z = 75, this.rootObject.add(this.rightFlower01.mesh), this.loadQueue.add(this.rightFlower01), this.rightFlower02 = new d("images/013-021/song-pt2-right-flower-02.png", 352, 266, 1.1), this.rightFlower02.mesh.position.x = 700, this.rightFlower02.mesh.position.y = 200, this.rightFlower02.mesh.position.z = -200, this.rootObject.add(this.rightFlower02.mesh), this.loadQueue.add(this.rightFlower02), this.rightFlower03 = new d("images/013-021/song-pt2-right-flower-03.png", 235, 187, 1.1), this.rightFlower03.mesh.position.x = 900, this.rightFlower03.mesh.position.y = 0, this.rightFlower03.mesh.position.z = -100, this.rootObject.add(this.rightFlower03.mesh), this.loadQueue.add(this.rightFlower03), this.objectGL.add(this.rootObject)
        }, i.fall = function() {
            this.falling || (this.falling = !0, this.timeline = new TimelineMax)
        }, i.update = function() {
            if (this.active) {
                var a, b = this.lyrics1.mesh.geometry.vertices;
                for (a = 0; a < b.length; a++) {
                    var c = b[a],
                        d = this.time + 7.7 * a;
                    c.x += .035 * Math.sin(.015 * d), c.y += .05 * Math.sin(.025 * d), c.z += .05 * Math.sin(.01 * d)
                }
                if (this.lyrics1.mesh.needsUpdate = !0, this.lyrics1.mesh.geometry.verticesNeedUpdate = !0, this.time++, this.falling)
                    for (a = 0; a < this.leaves.length; a++) {
                        var e = this.leaves[a],
                            f = 1;
                        e.mesh.position.y -= .75, e.mesh.position.x += .3, e.mesh.rotation.z += .005, f = g.map(e.mesh.position.y, -1e3, -2500, 1, 0, !1, !1, !1), f = f > 1 ? 1 : f, f = 0 > f ? 0 : f, e.material.opacity = f
                    }
            }
        }, i.disposeGL = function() {
            this.rootObject.remove(this.lyrics1.mesh), this.rootObject.remove(this.leftFlower01.mesh), this.rootObject.remove(this.leftFlower02.mesh), this.rootObject.remove(this.leftFlower03.mesh), this.rootObject.remove(this.rightFlower01.mesh), this.rootObject.remove(this.rightFlower02.mesh), this.rootObject.remove(this.rightFlower03.mesh), this.lyrics1.dispose(), this.leftFlower01.dispose(), this.leftFlower02.dispose(), this.leftFlower03.dispose(), this.rightFlower01.dispose(), this.rightFlower02.dispose(), this.rightFlower03.dispose(), this.lyrics1 = null, this.leftFlower01 = null, this.leftFlower02 = null, this.leftFlower03 = null, this.rightFlower01 = null, this.rightFlower02 = null, this.rightFlower03 = null;
            for (var a = 0; a < this.leaves.length; a++) {
                var b = this.leaves[a];
                this.rootObject.remove(b.mesh), b.dispose()
            }
            this.leaves = null, this.Splash_disposeGL()
        }, a.promote(h, "Splash"), h
    }), define("theboat/015song/SongPt3Splash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.time = 0, this.lyrics1 = new d("images/013-021/song-pt3-lyrics.png", 1246, 348, 1, {
                widthSegments: 10,
                heightSegments: 5,
                bufferGeometry: !1
            }), this.rootObject.add(this.lyrics1.mesh), this.loadQueue.add(this.lyrics1), this.lyrics1.mesh.geometry.dynamic = !0, this.mai = new d("images/013-021/song-pt3-mai.png", 214, 680, 0), this.mai.mesh.position.x = -850, this.rootObject.add(this.mai.mesh), this.loadQueue.add(this.mai), this.flower01 = new d("images/013-021/song-pt3-flower-01.png", 336, 514, 1.1), this.flower01.mesh.position.x = -1100, this.flower01.mesh.position.y = 0, this.flower01.mesh.position.z = 75, this.rootObject.add(this.flower01.mesh), this.loadQueue.add(this.flower01), this.flower02 = new d("images/013-021/song-pt3-flower-02.png", 353, 272, 1.1), this.flower02.mesh.position.x = -600, this.flower02.mesh.position.y = 300, this.flower02.mesh.position.z = -200, this.rootObject.add(this.flower02.mesh), this.loadQueue.add(this.flower02), this.flower03 = new d("images/013-021/song-pt3-flower-03.png", 604, 292, 1.1), this.flower03.mesh.position.x = 650, this.flower03.mesh.position.y = 300, this.flower03.mesh.position.z = -200, this.rootObject.add(this.flower03.mesh), this.loadQueue.add(this.flower03), this.flower04 = new d("images/013-021/song-pt3-flower-04.png", 539, 324, 1.1), this.flower04.mesh.position.x = 500, this.flower04.mesh.position.y = -210, this.flower04.mesh.position.z = 75, this.rootObject.add(this.flower04.mesh), this.loadQueue.add(this.flower04), this.flower05 = new d("images/013-021/song-pt3-flower-05.png", 409, 323, 1.1), this.flower05.mesh.position.x = -550, this.flower05.mesh.position.y = -270, this.flower05.mesh.position.z = 75, this.rootObject.add(this.flower05.mesh), this.loadQueue.add(this.flower05), this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.rootObject.remove(this.lyrics1.mesh), this.rootObject.remove(this.mai.mesh), this.rootObject.remove(this.flower01.mesh), this.rootObject.remove(this.flower02.mesh), this.rootObject.remove(this.flower03.mesh), this.rootObject.remove(this.flower04.mesh), this.rootObject.remove(this.flower05.mesh), this.lyrics1.dispose(), this.mai.dispose(), this.flower01.dispose(), this.flower02.dispose(), this.flower03.dispose(), this.flower04.dispose(), this.flower05.dispose(), this.lyrics1 = null, this.mai = null, this.flower01 = null, this.flower02 = null, this.flower03 = null, this.flower04 = null, this.flower05 = null, this.Splash_disposeGL()
        }, g.update = function() {
            if (this.active) {
                var a, b = this.lyrics1.mesh.geometry.vertices;
                for (a = 0; a < b.length; a++) {
                    var c = b[a],
                        d = this.time + 7.7 * a;
                    c.x += .035 * Math.sin(.015 * d), c.y += .05 * Math.sin(.025 * d), c.z += .05 * Math.sin(.01 * d)
                }
                this.lyrics1.mesh.needsUpdate = !0, this.lyrics1.mesh.geometry.verticesNeedUpdate = !0, this.time++
            }
        }, a.promote(f, "Splash"), f
    }), define("theboat/021garden/GardenSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.garden = new d("images/022-028/garden.jpg", 1562, 932, 1), this.rootObject.add(this.garden.mesh), this.loadQueue.add(this.garden), this.flowers = new d("images/022-028/flowers.png", 1878, 1479, .85), this.flowers.mesh.position.y = 100, this.flowers.mesh.position.z = 100, this.rootObject.add(this.flowers.mesh), this.loadQueue.add(this.flowers), this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.rootObject.remove(this.garden.mesh), this.rootObject.remove(this.flowers.mesh), this.flowers.dispose(), this.garden.dispose(), this.flowers = null, this.garden = null, this.Splash_disposeGL()
        }, g.update = function() {
            this.active && this.Splash_update()
        }, a.promote(f, "Splash"), f
    }), define("theboat/022ba/BaSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.running = new d("images/022-028/01.png", 1625, 658, 1.2), this.running.mesh.position.z = -300, this.rootObject.add(this.running.mesh), this.loadQueue.add(this.running), this.objectGL.add(this.rootObject)
        }, g.update = function() {}, g.disposeGL = function() {
            this.rootObject.remove(this.running.mesh), this.running.dispose(), this.running = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/026busletter/BusLetterSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.running = new d("images/022-028/bus-letter.jpg", 1817, 586, 1.2), this.running.mesh.position.z = -300, this.rootObject.add(this.running.mesh), this.loadQueue.add(this.running), this.objectGL.add(this.rootObject)
        }, g.update = function() {}, g.disposeGL = function() {
            this.rootObject.remove(this.running.mesh), this.running.dispose(), this.running = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/028closingwound/ClosingWoundSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random", "math/ArmyKnife"], function(a, b, c, d, e, f, g) {
        var h = function(a, b) {
                this.Splash_constructor(a, b), this._bgInOpacity = 0, this._bgOutOpacity = 0
            },
            i = a.extend(h, e);
        return Object.defineProperties(i, {
            bgInOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgInOpacity = a
                },
                get: function() {
                    return this._bgInOpacity
                }
            },
            bgOutOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgOutOpacity = a
                },
                get: function() {
                    return this._bgOutOpacity
                }
            },
            bgDistance: {
                set: function(a) {
                    a != this._bgDistance && (a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgDistance = a)
                },
                get: function() {
                    return this._bgDistance
                }
            }
        }), i.createCSS = function() {
            this.Splash_createCSS()
        }, i.createGL = function() {
            this.Splash_createGL(), this.time = 0, this.bg = new d("images/022-028/closing-wound.jpg", 1838, 660, 13, {
                widthSegments: 10,
                heightSegments: 5,
                bufferGeometry: !1
            }), this.bg.mesh.position.z = -15e3, this.bg.mesh.geometry.dynamic = !0, this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.bgOpacity = 0, this.bgDistance = 0, this.objectGL.add(this.rootObject)
        }, i.disposeGL = function() {
            this.rootObject.remove(this.bg.mesh), this.bg.dispose(), this.bg = null, this.Splash_disposeGL()
        }, i.update = function() {
            if (this.active) {
                var a, b = this.bg.mesh.geometry.vertices;
                for (a = 0; a < b.length; a++) {
                    var c = b[a],
                        d = this.time + 7.7 * a;
                    c.x += 4 * Math.sin(.015 * d) * (1 - this.bgDistance), c.y += 4 * Math.sin(.025 * d) * (1 - this.bgDistance), c.z += 2 * Math.sin(.01 * d) * (1 - this.bgDistance)
                }
                this.bg.mesh.needsUpdate = !0, this.bg.mesh.geometry.verticesNeedUpdate = !0, this.bg.material.opacity = this._bgInOpacity * this._bgOutOpacity, 1 - this.bgDistance > .66 && (this.bg.material.opacity -= f.between(0, .2 * (1 - this.bgDistance)));
                var e = g.map(this._bgDistance, 1, 0, -15e3, -25e3, !1, !1, !1);
                this.bg.mesh.position.z = e, this.time++
            }
        }, a.promote(h, "Splash"), h
    }), define("theboat/033markets/MarketsSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random", "math/ArmyKnife", "math/Interpolation"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b), this._progress = 0
            },
            g = a.extend(f, e);
        return Object.defineProperties(g, {
            progress: {
                set: function(a) {
                    this._progress = a
                },
                get: function() {
                    return this._progress
                }
            }
        }), g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.time = 0, this.markets = new d("images/033-markets/markets.png", 1389, 677, 1), this.rootObject.add(this.markets.mesh), this.loadQueue.add(this.markets), this.inset = new d("images/033-markets/mai-inset.png", 472, 450, .8), this.inset.mesh.position.x = 500, this.inset.mesh.position.y = 0, this.inset.mesh.position.z = 150, this.inset.material.opacity = 0, this.rootObject.add(this.inset.mesh), this.loadQueue.add(this.inset), this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.rootObject.remove(this.markets.mesh), this.rootObject.remove(this.inset.mesh), this.markets.dispose(), this.inset.dispose(), this.markets = null, this.inset = null, this.Splash_disposeGL()
        }, g.transitionIn = function() {
            this.timeline = new TimelineMax, this.timeline.add(TweenMax.to(this.markets.material, 2, {
                opacity: .6,
                ease: Power3.easeInOut
            }), 0), this.timeline.add(TweenMax.to(this.inset.mesh.position, 2, {
                x: 250,
                ease: Power3.easeOut
            }), 0), this.timeline.add(TweenMax.to(this.inset.material, 1, {
                opacity: 1,
                ease: Power3.easeInOut
            }), 0)
        }, a.promote(f, "Splash"), f
    }), define("theboat/037canoe/Signal", ["underscore", "threejs", "comic/display/Image", "createjsEventDispatcher", "utils/Random", "utils/Color", "comic/Queue", "math/ArmyKnife"], function(a, b, c, d, e, f, g, h) {
        var i = function() {
                a.bindAll(this, "onLoad"), this.object = new b.Object3D, this.time = 0, this.loadQueue = new g("load", "load"), this.masterOpacity = 0, this.flickerOpacity = 0, this.smokeOpacity = 0, this.draw()
            },
            j = i.prototype;
        return d.EventDispatcher.initialize(j), j.draw = function() {
            this.smoke = new c("images/037-canoe/signal-smoke-3.png", 128, 512, 11, {
                bufferGeometry: !1,
                widthSegments: 10,
                heightSegments: 5
            }), this.smoke.mesh.rotation.z = 1, this.smoke.mesh.position.z = -150, this.smoke.material.opacity = 0, this.object.add(this.smoke.mesh), this.loadQueue.add(this.smoke), this.flickerDict = [{
                width: 5,
                height: 30,
                minOpacity: .1,
                maxOpacity: .2
            }, {
                width: 8,
                height: 8,
                minOpacity: .3,
                maxOpacity: 1
            }, {
                width: 120,
                height: 120,
                minOpacity: .05,
                maxOpacity: .2
            }, {
                width: 300,
                height: 300,
                minOpacity: .15,
                maxOpacity: .2
            }], this.flickers = [];
            for (var a = 0; a < this.flickerDict.length; a++) {
                var b = this.flickerDict[a],
                    d = new c("images/037-canoe/flicker-2.png", b.width, b.height, 11);
                d.mesh.position.x = 1750, d.mesh.position.y = -1300, d.mesh.position.z = 100 * a, d.mesh.renderDepth = -1 * a, this.object.add(d.mesh), this.loadQueue.add(d), this.flickers.push(d)
            }
            this.lenseFlare2 = new c("images/037-canoe/lense-flare.png", 32, 32, 11), this.lenseFlare2.mesh.position.x = 1750, this.lenseFlare2.mesh.position.y = -1300, this.lenseFlare2.mesh.position.z = 35, this.object.add(this.lenseFlare2.mesh), this.loadQueue.add(this.lenseFlare2), this.object.visible = !1
        }, j.load = function() {
            this.loadQueue.addEventListener("complete", this.onLoad), this.loadQueue.start()
        }, j.onLoad = function() {
            this.dispatchEvent({
                type: "load"
            })
        }, j.dispose = function() {
            this.loadQueue.removeEventListener("complete", this.onLoad), this.loadQueue.dispose(), this.loadQueue = null, this.timeline && (this.timeline.kill(), this.timeline = null);
            for (var a = 0; a < this.flickers.length; a++) {
                var b = this.flickers[a];
                this.object.remove(b), b.dispose()
            }
            this.flickers = null, this.object.remove(this.lenseFlare2.mesh), this.lenseFlare2.dispose(), this.lenseFlare2 = null, this.object.remove(this.smoke.mesh), this.smoke.dispose(), this.smoke = null
        }, j.transitionIn = function() {
            TweenMax.to(this, 7, {
                smokeOpacity: 1
            }), TweenMax.to(this, .5, {
                flickerOpacity: 1
            }), this.object.visible = !0
        }, j.update = function() {
            for (var a = this.smoke.mesh.geometry.vertices, b = 0; b < a.length; b++) {
                var c = a[b],
                    d = h.map(c.y, -2816, 2816, 0, 1, !1, !1, !1),
                    f = this.time + 7.7 * b;
                c.x += Math.sin(.015 * f) * d * 10, c.y += Math.sin(.005 * f) * d * 5
            }
            this.smoke.mesh.needsUpdate = !0, this.smoke.mesh.geometry.verticesNeedUpdate = !0, this.smoke.material.opacity = this.smokeOpacity * this.masterOpacity;
            for (var b = 0; b < this.flickerDict.length; b++) {
                var g = this.flickerDict[b],
                    i = this.flickers[b];
                i.material.opacity = e.between(g.minOpacity, g.maxOpacity) * this.flickerOpacity * this.masterOpacity
            }
            Math.random() > .4 && (this.lenseFlare2.mesh.rotation.z = Math.random() * Math.PI * 2), this.lenseFlare2.material.opacity = e.between(.75, .85) * this.flickerOpacity * this.masterOpacity, this.time++
        }, i
    }), define("theboat/037canoe/CanoeSplash", ["utils/inherit", "threejs", "theboat/037canoe/Signal", "comic/ComicMetrics", "comic/display/Image", "comic/display/ChunkedImage", "comic/display/Splash", "audio/Thump", "math/ArmyKnife", "math/Interpolation"], function(a, b, c, d, e, f, g, h, i, j) {
        var k = function(a, b) {
                this.Splash_constructor(a, b), this._canoePosition = 0, this._canoeOpacity = 0, this._blackMatteOpacityIn = 0, this._bgOpacityOut = 1, this._visibleHack = 0, this.time = 0
            },
            l = a.extend(k, g);
        return Object.defineProperties(l, {
            whiteMatteOpacityIn: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._blackMatteOpacityIn = a
                },
                get: function() {
                    return this._blackMatteOpacityIn
                }
            },
            canoeOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._canoeOpacity = a
                },
                get: function() {
                    return this._canoeOpacity
                }
            },
            canoePosition: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._canoePosition = a
                },
                get: function() {
                    return this._canoePosition
                }
            },
            visibleHack: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._visibleHack = a
                },
                get: function() {
                    return this._visibleHack
                }
            }
        }), l.createCSS = function() {
            this.Splash_createCSS()
        }, l.createGL = function() {
            this.Splash_createGL(), this.blackMatteInPlane = new b.PlaneBufferGeometry(6e3, 1e4), this.blackMatteInMaterial = new b.MeshBasicMaterial({
                color: 16777215,
                opacity: 0
            }), this.blackMatteIn = new b.Mesh(this.blackMatteInPlane, this.blackMatteInMaterial), this.blackMatteInMaterial.transparent = !0, this.blackMatteIn.position.x = 0, this.blackMatteIn.position.y = 0, this.blackMatteIn.position.z = -500, this.rootObject.add(this.blackMatteIn), this.blackMattePlane = new b.PlaneBufferGeometry(7e4, 1e5), this.blackMatteMaterial = new b.MeshBasicMaterial({
                color: 0,
                opacity: 1
            }), this.blackMatte = new b.Mesh(this.blackMattePlane, this.blackMatteMaterial), this.blackMatteMaterial.transparent = !1, this.blackMatte.position.x = 0, this.blackMatte.position.y = 0, this.blackMatte.position.z = -21e3, this.rootObject.add(this.blackMatte), this.bg = new f("images/037-canoe/bg-alt.jpg", 2602, 1441, 13.5), this.bg.transparent = !1, this.bg.mesh.position.y = 3e3, this.bg.mesh.position.z = -2e4, this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.canoe = new e("images/037-canoe/canoe-2.png", 781, 222, 10), this.canoe.mesh.position.x = -1e4, this.canoe.mesh.position.y = -1e3, this.canoe.mesh.position.z = -18e3, this.rootObject.add(this.canoe.mesh), this.loadQueue.add(this.canoe), this.signal = new c, this.signal.object.position.x = this.canoe.mesh.position.x, this.signal.object.position.y = this.canoe.mesh.position.y, this.signal.object.position.z = this.canoe.mesh.position.z, this.rootObject.add(this.signal.object), this.loadQueue.add(this.signal), this.objectGL.add(this.rootObject)
        }, l.disposeGL = function() {
            this.rootObject.remove(this.blackMatteIn), this.rootObject.remove(this.blackMatte), this.rootObject.remove(this.canoe.mesh), this.rootObject.remove(this.signal.object), this.blackMatteInMaterial.dispose(), this.blackMatteInPlane.dispose(), this.blackMatteMaterial.dispose(), this.blackMattePlane.dispose(), this.canoe.dispose(), this.signal.dispose(), this.blackMatteInMaterial = null, this.blackMatteInPlane = null, this.blackMatteMaterial = null, this.blackMattePlane = null, this.bg = null, this.canoe = null, this.signal = null, this.Splash_disposeGL()
        }, l.showSignal = function() {
            this.signal.transitionIn()
        }, l.update = function() {
            if (this.Splash_update(), this.active) {
                this.time++, this.rootObject.visible = this._visibleHack > 0, this.blackMatteInMaterial.opacity = this._blackMatteOpacityIn, this.canoe.material.opacity = this._canoeOpacity, this.signal.masterOpacity = this._canoeOpacity;
                var a = i.map(this._canoePosition, 0, 1, -1e4, 3e4, !1, !1, !1);
                a < this.canoe.mesh.position.x && (a = this.canoe.mesh.position.x);
                var b = 75 * Math.sin(.025 * this.time);
                this.canoe.mesh.position.x = j.lerp(this.canoe.mesh.position.x, a, .025), this.canoe.mesh.position.y = b, this.signal.object.position.x = this.canoe.mesh.position.x + 930, this.signal.object.position.y = this.canoe.mesh.position.y + 1600, this.signal.update()
            }
        }, a.promote(k, "Splash"), k
    }), define("theboat/040signal/SignalSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b), this.time = 0
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.bg = new d("images/040-signal/bg.png", 1139, 706, 1), this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.canoe = new d("images/040-signal/canoe.png", 1007, 298, 1), this.canoe.mesh.position.y = -1, this.canoe.mesh.position.z = 20, this.rootObject.add(this.canoe.mesh), this.loadQueue.add(this.canoe), this.signal = new d("images/040-signal/signal.png", 1139, 706, 1), this.signal.material.opacity = 0, this.signal.mesh.position.z = 10, this.rootObject.add(this.signal.mesh), this.loadQueue.add(this.signal), this.objectGL.add(this.rootObject)
        }, g.update = function() {
            this.Splash_update(), this.active && (this.time++, this.canoe.mesh.position.y = 3 * Math.sin(.025 * this.time) - 10)
        }, g.flash = function() {
            this.timeline = new TimelineMax;
            for (var a = 0; 3 > a; a++) {
                var b = 1.5 * a;
                this.timeline.insert(TweenMax.to(this.signal.material, .05, {
                    opacity: 1
                }), b), this.timeline.insert(TweenMax.to(this.signal.material, 1, {
                    opacity: 0
                }), b + .5)
            }
            this.timeline.insert(TweenMax.to(this.signal.material, .05, {
                opacity: 1
            }), 1.5 * a)
        }, g.disposeGL = function() {
            this.timeline && this.timeline.kill(), this.rootObject.remove(this.bg.mesh), this.rootObject.remove(this.canoe.mesh), this.rootObject.remove(this.signal.mesh), this.bg.dispose(), this.canoe.dispose(), this.signal.dispose(), this.bg = null, this.canoe = null, this.signal = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/041canoeandboat/CanoeAndBoatSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random", "math/Interpolation", "math/ArmyKnife"], function(a, b, c, d, e, f, g, h) {
        var i = function(a, b) {
                this.Splash_constructor(a, b), this.time = 0, this._canoePosition = .5
            },
            j = a.extend(i, e);
        return Object.defineProperties(j, {
            canoePosition: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._canoePosition = a
                },
                get: function() {
                    return this._canoePosition
                }
            }
        }), j.createCSS = function() {
            this.Splash_createCSS()
        }, j.createGL = function() {
            this.Splash_createGL(), this.bg = new d("images/041-canoe-and-boat/bg.png", 1139, 706, 1), this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.boat = new d("images/041-canoe-and-boat/boat.png", 677, 271, 1), this.boat.mesh.position.x = 200, this.boat.mesh.position.y = 200, this.boat.mesh.position.z = 15, this.rootObject.add(this.boat.mesh), this.loadQueue.add(this.boat), this.canoe = new d("images/041-canoe-and-boat/canoe-pot.png", 1139, 256, 1), this.canoe.mesh.position.y = -175, this.canoe.mesh.position.z = 30, this.canoe.texture.wrapS = b.ClampToEdgeWrapping, this.canoe.texture.repeat.x = 1.3, this.rootObject.add(this.canoe.mesh), this.loadQueue.add(this.canoe), this.objectGL.add(this.rootObject)
        }, j.update = function() {
            if (this.Splash_update(), this.active) {
                this.time++, this.boat.mesh.position.y = 3 * Math.sin(.025 * this.time) + 60;
                var a = h.map(this._canoePosition, 0, 1, 0, 1, !1, !1, !1),
                    b = 6 * Math.sin(.025 * this.time) - 175;
                this.canoe.texture.offset.x = g.lerp(this.canoe.texture.offset.x, a, .01), this.canoe.mesh.position.y = b
            }
        }, j.disposeGL = function() {
            this.rootObject.remove(this.bg.mesh), this.rootObject.remove(this.boat.mesh), this.rootObject.remove(this.canoe.mesh), this.bg.dispose(), this.boat.dispose(), this.canoe.dispose(), this.bg = null, this.boat = null, this.canoe = null, this.Splash_disposeGL()
        }, a.promote(i, "Splash"), i
    }), define("theboat/042boat/BoatSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.running = new d("images/042-boat/01.png", 1139, 706, 1), this.rootObject.add(this.running.mesh), this.loadQueue.add(this.running), this.objectGL.add(this.rootObject)
        }, g.update = function() {}, g.disposeGL = function() {
            this.rootObject.remove(this.running.mesh), this.running.dispose(), this.running = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/044bodies/BodiesSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/ChunkedImage", "comic/display/Splash", "utils/Color", "utils/Random"], function(a, b, c, d, e, f) {
        var g = function(a, b) {
                this.Splash_constructor(a, b), this._bgOpacity = 1
            },
            h = a.extend(g, f);
        return Object.defineProperties(h, {
            bgOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgOpacity = a
                },
                get: function() {
                    return this._bgInOpacity
                }
            }
        }), h.createGL = function() {
            this.Splash_createGL(), this.time = 0, this.bodies = new e("images/044-bodies/bg3.png", 2376, 2911, 3), this.bodies.mesh.position.z = -2e3, this.rootObject.add(this.bodies.mesh), this.loadQueue.add(this.bodies), this.ripples = new d("images/044-bodies/ripples4-pot.png", 8192, 2048, 2.8), this.ripples.material.transparent = !1, this.ripples.mesh.position.z = -2500, this.ripples.texture.wrapS = b.RepeatWrapping, this.ripples.texture.repeat.x = 8, this.rootObject.add(this.ripples.mesh), this.loadQueue.add(this.ripples), this.gradient = new d("images/044-bodies/black-gradient.png", 5048, 1024, 2), this.rootObject.add(this.gradient.mesh), this.gradient.mesh.position.y = -3900, this.gradient.mesh.position.z = -1800, this.loadQueue.add(this.gradient), this.objectGL.add(this.rootObject)
        }, h.update = function() {
            this.active && (this._bgOpacity > 0 && (this.ripples.texture.offset.x += 5e-4, this.ripples.material.opacity = this._bgOpacity, this.time++), this.ripples.material.transparent = this._bgOpacity < 1, this._bgOpacity <= 0 && this.rootObject.parent || this._bgOpacity > 0 && !this.rootObject.parent && this.objectGL.add(this.rootObject))
        }, h.disposeGL = function() {
            this.rootObject.remove(this.bodies.mesh), this.rootObject.remove(this.ripples.mesh), this.bodies.dispose(), this.ripples.dispose(), this.bodies = null, this.ripples = null, this.Splash_disposeGL()
        }, a.promote(g, "Splash"), g
    }), define("theboat/051afterstorm/AfterStormSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/ChunkedImage", "comic/display/Splash", "audio/Thump", "math/ArmyKnife", "math/Interpolation", "utils/Random"], function(a, b, c, d, e, f, g, h, i, j) {
        var k = function(a, b) {
                this.Splash_constructor(a, b), this._canoePosition = 0, this._bgOpacityIn = 1, this._glare = 0, this.time = 0
            },
            l = a.extend(k, f);
        return Object.defineProperties(l, {
            bgOpacityIn: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgOpacityIn = a
                },
                get: function() {
                    return this._bgOpacityIn
                }
            },
            glare: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._glare = a
                },
                get: function() {
                    return this._glare
                }
            }
        }), l.createCSS = function() {
            this.Splash_createCSS()
        }, l.createGL = function() {
            this.Splash_createGL(), this.rootObject.position.y = -3700, this.blackMattePlane = new b.PlaneBufferGeometry(2e4, 3e4), this.blackMatteMaterial = new b.MeshBasicMaterial({
                color: 0,
                opacity: 1
            }), this.blackMatte = new b.Mesh(this.blackMattePlane, this.blackMatteMaterial), this.blackMatteMaterial.transparent = !0, this.blackMatte.position.x = 0, this.blackMatte.position.y = 0, this.blackMatte.position.z = -3e3, this.objectGL.add(this.blackMatte), this.glareMattePlane = new b.PlaneBufferGeometry(2e4, 2e4), this.glareMatteMaterial = new b.MeshBasicMaterial({
                color: 16777215,
                opacity: 0
            }), this.glareMatte = new b.Mesh(this.glareMattePlane, this.glareMatteMaterial), this.glareMatteMaterial.transparent = !0, this.glareMatte.position.z = -3100, this.rootObject.add(this.glareMatte), this.whiteMattePlane = new b.PlaneBufferGeometry(2e4, 4e3), this.whiteMatteMaterial = new b.MeshBasicMaterial({
                color: 16777215
            }), this.whiteMatte = new b.Mesh(this.whiteMattePlane, this.whiteMatteMaterial), this.whiteMatte.position.y = -7e3, this.whiteMatte.position.z = -5900, this.rootObject.add(this.whiteMatte), this.bg = new e("images/051-after-storm/bg-alt.jpg", 2602, 1695, 15), this.bg.transparent = !1, this.bg.mesh.position.z = -2e4, this.bg.mesh.position.y = -3e3, this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.boat = new d("images/051-after-storm/boat.png", 672, 358, 5), this.boat.mesh.position.z = -5800, this.boat.mesh.position.y = -1400, this.rootObject.add(this.boat.mesh), this.loadQueue.add(this.boat), this.wave = new d("images/051-after-storm/water-pot.png", 6144, 512, 6), this.wave.texture.wrapS = b.RepeatWrapping, this.wave.texture.repeat.x = 3, this.wave.texture.offset.x = Math.random(), this.wave.mesh.position.z = -5900, this.wave.mesh.position.y = -3100, this.rootObject.add(this.wave.mesh), this.loadQueue.add(this.wave), this.sunsLookup = [{
                y: 800,
                rotationDelta: -15e-5,
                scale: 10
            }, {
                y: 800,
                rotationDelta: -26e-5,
                scale: 11
            }, {
                y: 800,
                rotationDelta: 16e-5,
                scale: 15
            }], this.suns = [];
            for (var a = 0; a < this.sunsLookup.length; a++) {
                var c = this.sunsLookup[a],
                    f = new d("images/051-after-storm/sun.png", 2e3, 2e3, c.scale);
                f.mesh.position.y = c.y, f.mesh.position.z = -16e3 + -400 * a, f.mesh.rotation.z = j.between(0, 2 * Math.PI), f.material.depthTest = !1, f.material.depthWrite = !1, this.rootObject.add(f.mesh), this.loadQueue.add(f), this.suns.push(f)
            }
            this.glareSun = new d("images/051-after-storm/sun.png", 2e3, 2e3, 5), this.glareSun.mesh.position.y = -1e3, this.glareSun.mesh.position.z = -5e3, this.glareSun.material.opacity = 0, this.rootObject.add(this.glareSun.mesh), this.loadQueue.add(this.glareSun)
        }, l.update = function() {
            if (this.Splash_update(), this.active)
                if (this._bgOpacityIn < 1) {
                    this.time++, this.boat.mesh.position.y = 15 * Math.sin(.025 * this.time) - 1450, this.wave.mesh.position.y = 35 * Math.sin(.017 * this.time) - 3600;
                    for (var a = 0; a < this.suns.length; a++) {
                        var b = this.suns[a];
                        Math.random() > .97 && (b.mesh.rotation.z = j.between(0, 2 * Math.PI)), b.material.opacity = j.between(.55, .75), b.mesh.rotation.z += this.sunsLookup[a].rotationDelta
                    }
                    this.wave.texture.offset.x += 1e-4, this.blackMatteMaterial.opacity = this._bgOpacityIn, this.glareMatteMaterial.opacity = j.between(this._glare, this._glare + .1) * this._glare, this.glareSun.mesh.rotation.z += 5e-4, this.glareSun.material.opacity = 1.75 * this._glare, this.rootObject.parent || this.objectGL.add(this.rootObject)
                } else this.rootObject.parent
        }, l.disposeGL = function() {
            this.objectGL.remove(this.blackMatte), this.rootObject.remove(this.whiteMatte), this.rootObject.remove(this.glareMatte), this.rootObject.remove(this.bg.mesh), this.rootObject.remove(this.boat.mesh), this.rootObject.remove(this.wave.mesh), this.blackMatteMaterial.dispose(), this.blackMattePlane.dispose(), this.whiteMatteMaterial.dispose(), this.whiteMattePlane.dispose(), this.glareMatteMaterial.dispose(), this.glareMattePlane.dispose(), this.bg.dispose(), this.boat.dispose(), this.wave.dispose();
            for (var a = 0; a < this.suns.length; a++) {
                var b = this.suns[a];
                this.rootObject.remove(b.mesh), b.dispose()
            }
            this.suns = null, this.bg = null, this.blackMatte = null, this.blackMatteMaterial = null, this.whiteMatte = null, this.whiteMatteMaterial = null, this.whiteMattePlane = null, this.glareMatte = null, this.glareMatteMaterial = null, this.glareMattePlane = null, this.suns = null, this.Splash_disposeGL()
        }, a.promote(k, "Splash"), k
    }), define("theboat/054maifeveralt/MaiFeverSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Color", "utils/Random"], function(a, b, c, d, e, f, g) {
        var h = function(a, b) {
                this.Splash_constructor(a, b), this._bgInOpacity = 0, this._hazeOpacity = 1
            },
            i = a.extend(h, e);
        return Object.defineProperties(i, {
            bgInOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgInOpacity = a
                },
                get: function() {
                    return this._bgInOpacity
                }
            }
        }), i.createCSS = function() {
            this.Splash_createCSS()
        }, i.createGL = function() {
            this.Splash_createGL(), this.time = 0, this.baseColor = f.fromInt(16728873), this.bg = new d("images/054-mai-fever-alt/bg-pot.jpg", 6144, 4096, 6, {
                widthSegments: 10,
                heightSegments: 5,
                bufferGeometry: !1
            }), this.bg.mesh.position.z = -8500, this.bg.texture.wrapS = b.RepeatWrapping, this.bg.texture.repeat.x = 3, this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.bg.mesh.geometry.dynamic = !0, this.haze = new d("images/054-mai-fever/haze.png", 8e3, 9e3), this.haze.mesh.position.z = -1e3, this.haze.texture.wrapS = b.RepeatWrapping, this.haze.texture.wrapT = b.RepeatWrapping, this.haze.texture.repeat.x = 5, this.haze.texture.repeat.y = 5, this.haze.material.opacity = .55, this.rootObject.add(this.haze.mesh), this.loadQueue.add(this.haze), this.particleTexture = b.ImageUtils.loadTexture("images/054-mai-fever-alt/particle-01.png"), this.particleMaterial = new b.PointCloudMaterial({
                size: 600,
                map: this.particleTexture,
                transparent: !0,
                depthTest: !1
            }), this.particleGeom = new b.Geometry;
            for (var a = 0; 50 > a; a++) {
                var c = new b.Vector3(g.between(-5e3, 5e3), g.between(-2e3, 5e3), g.between(-6500, 6500));
                c.vx = g.between(-10, 10), c.vy = g.between(-5, 5), c.vz = g.between(-10, 10), this.particleGeom.vertices.push(c)
            }
            this.particles = new b.PointCloud(this.particleGeom, this.particleMaterial), this.rootObject.add(this.particles), this.objectGL.add(this.rootObject)
        }, i.onLoadQueueComplete = function(a) {
            this.Splash_onLoadQueueComplete(a)
        }, i.update = function() {
            if (this.active) {
                this.haze.texture.offset.x = .6 * Math.sin(.01 * this.time) + .8 * Math.sin(.005 * this.time), this.haze.texture.offset.y = .5 * Math.sin(.02 * this.time) + .9 * Math.sin(.003 * this.time), this.haze.material.opacity = g.between(.025, .065) * this._hazeOpacity, Math.random() > .99 && (this.haze.material.opacity = .6);
                for (var a = this.bg.mesh.geometry.vertices, b = 0; b < a.length; b++) {
                    var c = a[b],
                        d = this.time + 7.7 * b;
                    c.x += 10 * Math.sin(.01 * d), c.y += 8 * Math.sin(.005 * d)
                }
                this.bg.mesh.needsUpdate = !0, this.bg.mesh.geometry.verticesNeedUpdate = !0, this.bg.texture.offset.x += 5e-4;
                for (var b = 0; b < this.particleGeom.vertices.length; b++) {
                    var e = this.particleGeom.vertices[b];
                    e.set(e.x + e.vx, e.y + e.vy, e.z + e.vz), e.x > 5e3 && (e.x = -5e3), e.x < -5e3 && (e.x = 5e3), e.y > 5e3 && (e.y = -2e3), e.y < -2e3 && (e.y = 5e3), e.z > -1500 && (e.z = -8e3), e.z < -8e3 && (e.z = -1500)
                }
                this.particleGeom.verticesNeedUpdate = !0, this.bg.material.opacity = this._bgInOpacity, this.time++
            }
        }, i.disposeGL = function() {
            this.rootObject.remove(this.bg.mesh), this.rootObject.remove(this.haze.mesh), this.bg.dispose(), this.haze.dispose(), this.particleMaterial.dispose(), this.particleTexture.dispose(), this.particleGeom.dispose(), this.rootObject.remove(this.particles), this.particleMaterial = null, this.particleTexture = null, this.particleGeom = null, this.particles = null, this.bg = null, this.haze = null, this.Splash_disposeGL()
        }, a.promote(h, "Splash"), h
    }), define("theboat/058maifeverbreaks/MaiFeverBreaksSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random", "math/Interpolation", "math/ArmyKnife"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b), this.time = 0, this._whiteMatteOpacity = 0
            },
            g = a.extend(f, e);
        return Object.defineProperties(g, {
            whiteMatteOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._whiteMatteOpacity = a
                },
                get: function() {
                    return this._whiteMatteOpacity
                }
            }
        }), g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.bg = new d("images/058-mai-fever-breaks/bg.png", 1634, 1272, 1.4), this.bg.mesh.position.z = -800, this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.mai = new d("images/058-mai-fever-breaks/mai.png", 656, 849, 1.3), this.mai.mesh.position.x = 100, this.mai.mesh.position.y = -100, this.mai.mesh.position.z = -300, this.rootObject.add(this.mai.mesh), this.loadQueue.add(this.mai), this.kaboom = new d("images/058-mai-fever-breaks/kaboom.png", 1514, 1024, 1.1), this.kaboom.mesh.position.x = 50, this.kaboom.mesh.position.y = 0, this.kaboom.mesh.position.z = -500, this.rootObject.add(this.kaboom.mesh), this.loadQueue.add(this.kaboom), this.whiteMattePlane = new b.PlaneBufferGeometry(2e4, 8e4), this.whiteMatteMaterial = new b.MeshBasicMaterial({
                color: 16777215
            }), this.whiteMatte = new b.Mesh(this.whiteMattePlane, this.whiteMatteMaterial), this.whiteMatteMaterial.transparent = !0, this.whiteMatte.position.z = -1350, this.rootObject.add(this.whiteMatte), this.bg.material.opacity = 0, this.mai.material.opacity = 0, this.kaboom.material.opacity = 0, this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.rootObject.remove(this.bg.mesh), this.rootObject.remove(this.mai.mesh), this.rootObject.remove(this.kaboom.mesh), this.rootObject.remove(this.whiteMatte), this.bg.dispose(), this.mai.dispose(), this.kaboom.dispose(), this.whiteMatteMaterial.dispose(), this.whiteMattePlane.dispose(), this.bg = null, this.mai = null, this.kaboom = null, this.whiteMatteMaterial = null, this.whiteMattePlane = null, this.Splash_disposeGL()
        }, g.transitionIn = function() {
            if (!this.transitionedIn) {
                this.timeline = new TimelineMax;
                var a = (RoughEase.ease.config({
                    strength: 3,
                    template: Power4.easeOut,
                    taper: "out",
                    randomize: !1
                }), RoughEase.ease.config({
                    strength: .5,
                    points: 120,
                    template: Power4.easeOut,
                    taper: "out",
                    randomize: !0
                }));
                this.timeline.add(TweenMax.from(this.bg.mesh.position, 1, {
                    ease: a,
                    z: -5e3
                }), 0), this.timeline.add(TweenMax.to(this.bg.material, .3, {
                    opacity: 1
                }), 0), this.timeline.add(TweenMax.from(this.mai.mesh.position, 1, {
                    ease: a,
                    z: -1e3
                }), .4), this.timeline.add(TweenMax.to(this.mai.material, .3, {
                    opacity: 1
                }), .4), this.timeline.add(TweenMax.from(this.kaboom.mesh.position, 1, {
                    ease: a,
                    z: -3e3
                }), .2), this.timeline.add(TweenMax.to(this.kaboom.material, .3, {
                    opacity: 1
                }), .2), this.transitionedIn = !0
            }
        }, g.update = function() {
            this.Splash_update(), this.active && (this.whiteMatteMaterial.opacity = this._whiteMatteOpacity, this.time++)
        }, a.promote(f, "Splash"), f
    }), define("theboat/060batroung/BaTroungSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b), this.time = 0
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.running = new d("images/060-ba-troung/01.png", 620, 619, 1.2), this.running.mesh.position.z = -300, this.rootObject.add(this.running.mesh), this.loadQueue.add(this.running), this.troung = new d("images/060-ba-troung/troung.png", 467, 1449, 1), this.troung.mesh.position.y = -2100, this.rootObject.add(this.troung.mesh), this.loadQueue.add(this.troung), this.mainTrip = new d("images/060-ba-troung/main-trip.png", 568, 1236, 1), this.mainTrip.mesh.position.z = -100, this.mainTrip.mesh.position.y = -800, this.rootObject.add(this.mainTrip.mesh), this.loadQueue.add(this.mainTrip), this.sideTrip = new d("images/060-ba-troung/side-trip.png", 815, 773, 1), this.sideTrip.mesh.position.z = -200, this.sideTrip.mesh.position.x = -50, this.sideTrip.mesh.position.y = -800, this.rootObject.add(this.sideTrip.mesh), this.loadQueue.add(this.sideTrip), this.sideTrip2 = new d("images/060-ba-troung/side-trip.png", 815, 773, 3), this.sideTrip2.mesh.position.z = -700, this.sideTrip2.mesh.position.x = -50, this.sideTrip2.mesh.position.y = -800, this.rootObject.add(this.sideTrip2.mesh), this.loadQueue.add(this.sideTrip2), this.troung.material.opacity = 0, this.mainTrip.material.opacity = 0, this.sideTrip.material.opacity = 0, this.sideTrip2.material.opacity = .03, this.images = [], this.lookup = [{
                img: "images/060-ba-troung/02.png",
                width: 364,
                height: 481,
                x: 540,
                y: -320,
                z: -108,
                scale: .7,
                inOpacity: 0,
                opacity: .27
            }, {
                img: "images/060-ba-troung/03.png",
                width: 448,
                height: 399,
                x: -450,
                y: -420,
                z: -303,
                scale: .3,
                inOpacity: 0,
                opacity: .16
            }, {
                img: "images/060-ba-troung/04.png",
                width: 493,
                height: 454,
                x: 700,
                y: -620,
                z: -105,
                scale: .5,
                inOpacity: 0,
                opacity: .19
            }, {
                img: "images/060-ba-troung/05.png",
                width: 358,
                height: 459,
                x: -390,
                y: -950,
                z: -305,
                scale: .3,
                inOpacity: 0,
                opacity: .27
            }, {
                img: "images/060-ba-troung/06.png",
                width: 312,
                height: 443,
                x: 420,
                y: -1e3,
                z: -100,
                scale: .3,
                inOpacity: 0,
                opacity: .3
            }, {
                img: "images/060-ba-troung/07.png",
                width: 319,
                height: 465,
                x: 570,
                y: -1230,
                z: -310,
                scale: .5,
                inOpacity: 0,
                opacity: .14
            }];
            for (var a = 0; a < this.lookup.length; a++) {
                var b = this.lookup[a],
                    c = new d(b.img, b.width, b.height, b.scale, {
                        widthSegments: 1,
                        heightSegments: 1,
                        bufferGeometry: !1
                    });
                c.mesh.position.x = b.x, c.mesh.position.y = b.y, c.mesh.position.z = b.z, c.material.opacity = b.inOpacity, this.rootObject.add(c.mesh), this.loadQueue.add(c), this.images.push(c)
            }
            this.objectGL.add(this.rootObject)
        }, g.transitionIn = function() {
            var a = new TimelineMax;
            a.add(TweenMax.to(this.mainTrip.material, 2, {
                opacity: 1
            }), 0), a.add(TweenMax.to(this.sideTrip.material, 2, {
                opacity: 1
            }), .75), a.add(TweenMax.to(this.troung.material, 2, {
                opacity: 1
            }), 1.5);
            for (var b = 0; b < this.images.length; b++) {
                var c = this.images[b],
                    d = this.lookup[b],
                    e = .25 * b;
                a.add(TweenMax.to(c.material, 4, {
                    opacity: d.opacity
                }), e)
            }
        }, g.update = function() {
            if (this.Splash_update(), this.active) {
                this.time++;
                for (var a = 0; a < this.images.length; a++) {
                    var b = this.images[a],
                        c = this.lookup[a],
                        d = Math.sqrt(c.x * c.x + c.z * c.z),
                        e = Math.atan2(b.mesh.position.z, b.mesh.position.x);
                    e += .0025, b.mesh.position.z = Math.sin(e) * d, b.mesh.position.x = Math.cos(e) * d
                }
            }
        }, g.disposeGL = function() {
            this.rootObject.remove(this.running.mesh), this.rootObject.remove(this.troung.mesh), this.rootObject.remove(this.sideTrip.mesh), this.rootObject.remove(this.sideTrip2.mesh), this.running.dispose(), this.troung.dispose(), this.sideTrip.dispose(), this.sideTrip2.dispose();
            for (var a = 0; a < this.images.length; a++) {
                var b = this.images[a];
                this.rootObject.remove(b.mesh), b.dispose()
            }
            this.images = null, this.running = null, this.troung = null, this.sideTrip = null, this.sideTrip2 = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/063troungshadow/TroungShadowSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.troung = new d("images/063-troung-shadow/troung.png", 659, 656, 1), this.troung.mesh.position.x = 50, this.troung.mesh.position.z = -300, this.rootObject.add(this.troung.mesh), this.loadQueue.add(this.troung), this.shadow = new d("images/063-troung-shadow/crane-shadow.png", 1785, 939, 1), this.shadow.mesh.position.x = 50, this.shadow.mesh.position.z = -500, this.rootObject.add(this.shadow.mesh), this.loadQueue.add(this.shadow), this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.rootObject.remove(this.troung.mesh), this.rootObject.remove(this.shadow.mesh), this.troung.dispose(), this.shadow.dispose(), this.troung = null, this.shadow = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/068troungcrane/TroungCraneSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b), this.time = 0
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.troung = new d("images/068-troung-crane/bg.png", 831, 1587, 1.3), this.troung.mesh.position.x = 50, this.troung.mesh.position.z = -300, this.rootObject.add(this.troung.mesh), this.loadQueue.add(this.troung), this.hook = new d("images/068-troung-crane/crane-hook.png", 142, 939, 1.3), this.loadQueue.add(this.hook), this.hookContainer = new b.Object3D, this.hookContainer.add(this.hook.mesh), this.hook.mesh.position.y = -550, this.hookContainer.position.x = -280, this.hookContainer.position.y = 650, this.hookContainer.position.z = -200, this.rootObject.add(this.hookContainer), this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.rootObject.remove(this.troung.mesh), this.rootObject.remove(this.hookContainer), this.hookContainer.remove(this.hook.mesh), this.troung.dispose(), this.hook.dispose(), this.troung = null, this.hook = null, this.hookContainer = null, this.Splash_disposeGL()
        }, g.update = function() {
            this.Splash_update(), this.active && (this.time++, this.hookContainer.rotation.z = .05 * Math.sin(.02 * this.time))
        }, a.promote(f, "Splash"), f
    }), define("theboat/071punch/PunchSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.mai = new d("images/071-punch/mai.png", 862, 557, 1.2), this.mai.mesh.position.x = -600, this.mai.mesh.position.y = -100, this.mai.mesh.position.z = -300, this.rootObject.add(this.mai.mesh), this.loadQueue.add(this.mai), this.fist = new d("images/071-punch/fist.png", 756, 282, 1), this.fist.mesh.position.x = 0, this.fist.mesh.position.y = -50, this.fist.mesh.position.z = -100, this.fist.mesh.rotation.y = -.3, this.fist.mesh.rotation.z = .7, this.rootObject.add(this.fist.mesh), this.loadQueue.add(this.fist), this.bottle = new d("images/071-punch/bottle.png", 350, 373, 1), this.bottle.mesh.position.x = 380, this.bottle.mesh.position.y = 300, this.bottle.mesh.position.z = 0, this.bottle.mesh.rotation.y = 0, this.rootObject.add(this.bottle.mesh), this.loadQueue.add(this.bottle), this.kaboom = new d("images/071-punch/kaboom.png", 839, 520, 1.2), this.kaboom.mesh.position.x = 200, this.kaboom.mesh.position.y = 0, this.kaboom.mesh.position.z = -200, this.rootObject.add(this.kaboom.mesh), this.loadQueue.add(this.kaboom), this.frame1 = new d("images/071-punch/01.png", 472, 450, 1), this.frame1.mesh.position.x = 380, this.frame1.mesh.position.y = 300, this.frame1.mesh.position.z = -1, this.rootObject.add(this.frame1.mesh), this.loadQueue.add(this.frame1), this.frame2 = new d("images/071-punch/02.png", 323, 323, .6), this.frame2.mesh.position.x = 570, this.frame2.mesh.position.y = 150, this.frame2.mesh.position.z = 150, this.rootObject.add(this.frame2.mesh), this.loadQueue.add(this.frame2), this.frame3 = new d("images/071-punch/03.png", 323, 323, .6), this.frame3.mesh.position.x = 570, this.frame3.mesh.position.y = -100, this.frame3.mesh.position.z = 150, this.rootObject.add(this.frame3.mesh), this.loadQueue.add(this.frame3), this.frame4 = new d("images/071-punch/04.png", 323, 323, .6), this.frame4.mesh.position.x = 570, this.frame4.mesh.position.y = -350, this.frame4.mesh.position.z = 150, this.rootObject.add(this.frame4.mesh), this.loadQueue.add(this.frame4), this.mai.material.opacity = this.fist.material.opacity = this.bottle.material.opacity = this.kaboom.material.opacity = this.frame1.material.opacity = this.frame2.material.opacity = this.frame3.material.opacity = this.frame4.material.opacity = 0, this.objectGL.add(this.rootObject)
        }, g.update = function() {}, g.transitionIn = function() {
            if (!this.transitionedIn) {
                this.timeline = new TimelineMax;
                var a = RoughEase.ease.config({
                    strength: .4,
                    template: Quint.easeOut,
                    taper: "out",
                    randomize: !1
                });
                this.timeline.add(TweenMax.from(this.fist.mesh.rotation, .3, {
                    z: -.5
                }), 0), this.timeline.add(TweenMax.from(this.fist.mesh.position, .2, {
                    x: 500,
                    y: 100
                }), 0), this.timeline.add(TweenMax.to(this.fist.material, .3, {
                    opacity: 1
                }), 0), this.timeline.add(TweenMax.to(this.fist.mesh.rotation, .5, {
                    y: 0,
                    z: .5
                }), .2), this.timeline.add(TweenMax.from(this.mai.mesh.position, .5, {
                    ease: a,
                    x: -300
                }), .15), this.timeline.add(TweenMax.to(this.mai.material, .3, {
                    opacity: 1
                }), .15), this.timeline.add(TweenMax.from(this.kaboom.mesh.position, .2, {
                    x: 150
                }), .15), this.timeline.add(TweenMax.to(this.kaboom.material, .1, {
                    opacity: 1
                }), .15), this.timeline.add(TweenMax.from(this.rootObject.rotation, 1.5, {
                    ease: Power4.easeOut,
                    y: -.2,
                    x: .3,
                    z: .3
                }), .15), this.timeline.add(TweenMax.from(this.bottle.mesh.position, 1, {
                    ease: Power4.easeOut,
                    x: -100,
                    y: 250
                }), .2), this.timeline.add(TweenMax.from(this.bottle.mesh.rotation, 1.5, {
                    ease: Power4.easeOut,
                    z: 2
                }), .2), this.timeline.add(TweenMax.to(this.bottle.material, .1, {
                    opacity: 1
                }), .2), this.timeline.add(TweenMax.to(this.frame1.material, 2, {
                    opacity: 1
                }), 1), this.timeline.add(TweenMax.from(this.frame2.mesh.position, 6, {
                    ease: Power4.easeOut,
                    y: 200
                }), 1.5), this.timeline.add(TweenMax.to(this.frame2.material, 2, {
                    opacity: 1
                }), 1.5), this.timeline.add(TweenMax.from(this.frame3.mesh.position, 4, {
                    ease: Power4.easeOut,
                    y: -50
                }), 2), this.timeline.add(TweenMax.to(this.frame3.material, 2, {
                    opacity: 1
                }), 2), this.timeline.add(TweenMax.from(this.frame4.mesh.position, 2, {
                    ease: Power4.easeOut,
                    y: -300
                }), 2.5), this.timeline.add(TweenMax.to(this.frame4.material, 2, {
                    opacity: 1
                }), 2.5), this.transitionedIn = !0
            }
        }, g.disposeGL = function() {
            this.rootObject.remove(this.mai.mesh), this.rootObject.remove(this.fist.mesh), this.rootObject.remove(this.bottle.mesh), this.rootObject.remove(this.kaboom.mesh), this.rootObject.remove(this.frame1.mesh), this.rootObject.remove(this.frame2.mesh), this.rootObject.remove(this.frame3.mesh), this.rootObject.remove(this.frame4.mesh), this.mai.dispose(), this.fist.dispose(), this.bottle.dispose(), this.kaboom.dispose(), this.frame1.dispose(), this.frame2.dispose(), this.frame3.dispose(), this.frame4.dispose(), this.mai = null, this.fist = null, this.bottle = null, this.kaboom = null, this.frame1 = null, this.frame2 = null, this.frame3 = null, this.frame4 = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/072notacloud/NotACloudSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/ChunkedImage", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e, f, g) {
        var h = function(a, b) {
                this.Splash_constructor(a, b), this._whiteMatteOpacity = 0
            },
            i = a.extend(h, f);
        return Object.defineProperties(i, {
            whiteMatteOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._whiteMatteOpacity = a
                },
                get: function() {
                    return this._whiteMatteOpacity
                }
            }
        }), i.createCSS = function() {
            this.Splash_createCSS()
        }, i.createGL = function() {
            this.Splash_createGL(), this.deck1 = new e("images/072-not-a-cloud/deck-01.png", 3150, 1470, 2.4), this.deck1.mesh.position.z = -2e3, this.rootObject.add(this.deck1.mesh), this.loadQueue.add(this.deck1), this.glare = new d("images/072-not-a-cloud/glare.png", 2340, 1108, 2.4), this.glare.mesh.position.z = -1500, this.rootObject.add(this.glare.mesh), this.loadQueue.add(this.glare), this.blackMattePlane = new b.PlaneBufferGeometry(2e4, 1e4), this.blackMatteMaterial = new b.MeshBasicMaterial({
                color: 0
            }), this.blackMatte = new b.Mesh(this.blackMattePlane, this.blackMatteMaterial), this.blackMatte.position.x = 0, this.blackMatte.position.y = -5500, this.blackMatte.position.z = -2500, this.rootObject.add(this.blackMatte), this.whiteMattePlane = new b.PlaneBufferGeometry(2e4, 1e4), this.whiteMatteMaterial = new b.MeshBasicMaterial({
                color: 16777215
            }), this.whiteMatte = new b.Mesh(this.whiteMattePlane, this.whiteMatteMaterial), this.whiteMatteMaterial.transparent = !0, this.whiteMatte.position.x = 0, this.whiteMatte.position.y = -5500, this.whiteMatte.position.z = -1100, this.whiteMatteMaterial.opacity = 0, this.rootObject.add(this.whiteMatte), this.objectGL.add(this.rootObject)
        }, i.disposeGL = function() {
            this.rootObject.remove(this.blackMatte), this.rootObject.remove(this.whiteMatte), this.rootObject.remove(this.deck1.mesh), this.rootObject.remove(this.glare.mesh), this.blackMatteMaterial.dispose(), this.blackMattePlane.dispose(), this.whiteMatteMaterial.dispose(), this.whiteMattePlane.dispose(), this.deck1.dispose(), this.glare.dispose(), this.blackMatte = null, this.blackMatteMaterial = null, this.blackMattePlane = null, this.whiteMatte = null, this.whiteMatteMaterial = null, this.whiteMattePlane = null, this.deck1 = null, this.glare = null, this.Splash_disposeGL()
        }, i.update = function() {
            this.Splash_update(), this.active && (this.whiteMatteMaterial.opacity = this._whiteMatteOpacity, this.glare.material.opacity = g.between(.85, 1))
        }, a.promote(h, "Splash"), h
    }), define("theboat/075derrickcrane/DerrickCraneSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.bg = new d("images/075-derrick-crane/bg.png", 1635, 1067, 1.2), this.bg.mesh.position.z = -400, this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.rootObject.remove(this.bg.mesh), this.bg.dispose(), this.bg = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/076belowdeck/BelowDeckSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b), this._blackMatteInOpacity = 0, this._blackMatteOutOpacity = 1, this.usePreloader = !1
            },
            g = a.extend(f, e);
        return Object.defineProperties(g, {
            blackMatteInOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._blackMatteInOpacity = a
                },
                get: function() {
                    return this._blackMatteInOpacity
                }
            },
            blackMatteOutOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._blackMatteOutOpacity = a
                },
                get: function() {
                    return this._blackMatteOutOpacity
                }
            }
        }), g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.blackMattePlane = new b.PlaneBufferGeometry(8e3, 8e4), this.blackMatteMaterial = new b.MeshBasicMaterial({
                color: 0
            }), this.blackMatte = new b.Mesh(this.blackMattePlane, this.blackMatteMaterial), this.blackMatteMaterial.transparent = !0, this.blackMatte.position.z = -1e3, this.rootObject.add(this.blackMatte), this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.rootObject.remove(this.blackMatte), this.blackMatteMaterial.dispose(), this.blackMattePlane.dispose(), this.blackMatteMaterial = null, this.blackMattePlane = null, this.blackMatte = null, this.Splash_disposeGL()
        }, g.update = function() {
            this.Splash_update(), this.active && (this.blackMatteMaterial.opacity = this._blackMatteInOpacity * this._blackMatteOutOpacity)
        }, a.promote(f, "Splash"), f
    }), define("theboat/080troungfever/TroungFeverSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Color", "utils/Random"], function(a, b, c, d, e, f, g) {
        var h = function(a, b) {
                this.Splash_constructor(a, b), this._bgInOpacity = 1, this._bgOutOpacity = 0
            },
            i = a.extend(h, e);
        return Object.defineProperties(i, {
            bgInOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgInOpacity = a
                },
                get: function() {
                    return this._bgInOpacity
                }
            },
            bgOutOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgOutOpacity = a
                },
                get: function() {
                    return this._bgOutOpacity
                }
            }
        }), i.createCSS = function() {
            this.Splash_createCSS()
        }, i.createGL = function() {
            this.Splash_createGL(), this.time = 0, this.baseColor = f.fromInt(16728873), this.bg = new d("images/080-troung-fever/bg-pot.jpg", 6144, 4096, 6, {
                widthSegments: 10,
                heightSegments: 5,
                bufferGeometry: !1
            }), this.bg.mesh.position.z = -8e3, this.bg.texture.wrapS = b.RepeatWrapping, this.bg.texture.repeat.x = 3, this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.bg.mesh.geometry.dynamic = !0, this.maiTroung = new d("images/080-troung-fever/mai-troung-alt.png", 856, 969), this.maiTroung.mesh.position.y = -1050, this.rootObject.add(this.maiTroung.mesh), this.loadQueue.add(this.maiTroung), this.haze = new d("images/054-mai-fever/haze.png", 8e3, 9e3), this.haze.mesh.position.z = -1100, this.haze.texture.wrapS = b.RepeatWrapping, this.haze.texture.wrapT = b.RepeatWrapping, this.haze.texture.repeat.x = 5, this.haze.texture.repeat.y = 5, this.haze.material.opacity = .55, this.rootObject.add(this.haze.mesh), this.loadQueue.add(this.haze), this.particleTexture = b.ImageUtils.loadTexture("images/054-mai-fever-alt/particle-01.png"), this.particleMaterial = new b.PointCloudMaterial({
                size: 600,
                map: this.particleTexture,
                transparent: !0,
                depthTest: !1
            }), this.particleGeom = new b.Geometry;
            for (var a = 0; 50 > a; a++) {
                var c = new b.Vector3(g.between(-5e3, 5e3), g.between(-2e3, 5e3), g.between(-6500, 6500));
                c.vx = g.between(-10, 10), c.vy = g.between(-5, 5), c.vz = g.between(-10, 10), this.particleGeom.vertices.push(c)
            }
            this.particles = new b.PointCloud(this.particleGeom, this.particleMaterial), this.rootObject.add(this.particles), this.objectGL.add(this.rootObject)
        }, i.update = function() {
            if (this.active) {
                this.bg.material.opacity = this._bgInOpacity * this._bgOutOpacity;
                for (var a = this.bg.mesh.geometry.vertices, b = 0; b < a.length; b++) {
                    var c = a[b],
                        d = this.time + 7.7 * b;
                    c.x += 10 * Math.sin(.01 * d), c.y += 8 * Math.sin(.005 * d)
                }
                this.bg.mesh.needsUpdate = !0, this.bg.mesh.geometry.verticesNeedUpdate = !0, this.bg.texture.offset.x += 5e-4, this.haze.texture.offset.x = .6 * Math.sin(.01 * this.time) + .8 * Math.sin(.005 * this.time), this.haze.texture.offset.y = .5 * Math.sin(.02 * this.time) + .9 * Math.sin(.003 * this.time), this.haze.material.opacity = g.between(.025, .065), Math.random() > .99 && (this.haze.material.opacity = .6);
                for (var b = 0; b < this.particleGeom.vertices.length; b++) {
                    var e = this.particleGeom.vertices[b];
                    e.set(e.x + e.vx, e.y + e.vy, e.z + e.vz), e.x > 5e3 && (e.x = -5e3), e.x < -5e3 && (e.x = 5e3), e.y > 4e3 && (e.y = -4e3), e.y < -4e3 && (e.y = 4e3), e.z > -1200 && (e.z = -6500), e.z < -6500 && (e.z = -1200)
                }
                this.particleGeom.verticesNeedUpdate = !0, this.particleMaterial.opacity = this.bg.material.opacity, this.time++
            }
        }, i.disposeGL = function() {
            this.rootObject.remove(this.bg.mesh), this.rootObject.remove(this.haze.mesh), this.bg.dispose(), this.haze.dispose(), this.particleMaterial.dispose(), this.particleTexture.dispose(), this.particleGeom.dispose(), this.rootObject.remove(this.particles), this.particleMaterial = null, this.particleTexture = null, this.particleGeom = null, this.particles = null, this.bg = null, this.haze = null, this.Splash_disposeGL()
        }, a.promote(h, "Splash"), h
    }), define("theboat/082iwanttogoup/IWantToGoUpSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.running = new d("images/082-i-want-to-go-up/bg.png", 1544, 800, 1), this.running.mesh.position.z = 0, this.rootObject.add(this.running.mesh), this.loadQueue.add(this.running), this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.rootObject.remove(this.running.mesh), this.running.dispose(), this.running = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/082deck/DeckSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b), this._bgInOpacity = 0, this._bgOutOpacity = 1
            },
            g = a.extend(f, e);
        return Object.defineProperties(g, {
            bgInOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgInOpacity = a
                },
                get: function() {
                    return this._bgInOpacity
                }
            },
            bgOutOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgOutOpacity = a
                },
                get: function() {
                    return this._bgOutOpacity
                }
            }
        }), g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.bg = new d("images/082-deck/bg.jpg", 1444, 1085, 2.5), this.bg.mesh.position.z = -1400, this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.rootObject.remove(this.bg.mesh), this.bg.dispose(), this.bg = null, this.Splash_disposeGL()
        }, g.update = function() {
            this.Splash_update(), this.active && (this.bg.material.opacity = this._bgInOpacity * this._bgOutOpacity)
        }, a.promote(f, "Splash"), f
    }), define("theboat/083troungface/TroungFaceSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b), this._bgInOpacity = 0, this._bgMidOpacity = 1, this._bgOutOpacity = 1
            },
            g = a.extend(f, e);
        return Object.defineProperties(g, {
            bgInOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgInOpacity = a
                },
                get: function() {
                    return this._bgInOpacity
                }
            },
            bgMidOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgMidOpacity = a
                },
                get: function() {
                    return this._bgMidOpacity
                }
            },
            bgOutOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgOutOpacity = a
                },
                get: function() {
                    return this._bgOutOpacity
                }
            }
        }), g.createGL = function() {
            this.Splash_createGL(), this.bg = new d("images/083-troung-face/bg.jpg", 1982, 1384, 1.85), this.bg.mesh.position.z = -1500, this.bg.mesh.position.y = -500, this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.frame1 = new d("images/083-troung-face/01.png", 460, 453, .9), this.frame1.mesh.position.x = -510, this.frame1.mesh.position.y = -1300, this.rootObject.add(this.frame1.mesh), this.loadQueue.add(this.frame1), this.frame2 = new d("images/083-troung-face/02.png", 391, 368, .9), this.frame2.mesh.position.x = 100, this.frame2.mesh.position.y = -800, this.rootObject.add(this.frame2.mesh), this.loadQueue.add(this.frame2), this.frame3 = new d("images/083-troung-face/03.png", 468, 493, .9), this.frame3.mesh.position.x = 510, this.frame3.mesh.position.y = -1050, this.rootObject.add(this.frame3.mesh), this.loadQueue.add(this.frame3), this.frame1.material.opacity = 0, this.frame2.material.opacity = 0, this.frame3.material.opacity = 0, this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.timeline && this.timeline.kill(), this.rootObject.remove(this.bg.mesh), this.rootObject.remove(this.frame1.mesh), this.rootObject.remove(this.frame2.mesh), this.rootObject.remove(this.frame3.mesh), this.bg.dispose(), this.frame1.dispose(), this.frame2.dispose(), this.frame3.dispose(), this.bg = null, this.frame1 = null, this.frame2 = null, this.frame3 = null, this.Splash_disposeGL()
        }, g.transitionIn = function() {
            this.timeline = new TimelineMax, this.timeline.add(TweenMax.to(this.frame1.material, 1, {
                opacity: 1
            }), 0), this.timeline.add(TweenMax.to(this.frame2.material, 1, {
                opacity: 1
            }), .75), this.timeline.add(TweenMax.to(this.frame3.material, 1, {
                opacity: 1
            }), 1.5)
        }, g.update = function() {
            this.Splash_update(), this.active && (this.bg.material.opacity = this._bgInOpacity * this._bgMidOpacity * this._bgOutOpacity)
        }, a.promote(f, "Splash"), f
    }), define("theboat/085hatch/HatchSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random", "math/ArmyKnife", "math/Interpolation"], function(a, b, c, d, e, f, g, h) {
        var i = function(a, b) {
                this.Splash_constructor(a, b), this._bgInOpacity = 0, this._bgOutOpacity = 1, this._boatPosition = 0, this.time = 0
            },
            j = a.extend(i, e);
        return Object.defineProperties(j, {
            bgInOpacity: {
                set: function(a) {
                    this.hasOpenedHatch || (a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgInOpacity = a)
                },
                get: function() {
                    return this._bgInOpacity
                }
            },
            bgOutOpacity: {
                set: function(a) {
                    this.hasOpenedHatch && (a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgOutOpacity = a)
                },
                get: function() {
                    return this._bgOutOpacity
                }
            },
            boatPosition: {
                set: function(a) {
                    this.hasOpenedHatch || (a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._boatPosition = a)
                },
                get: function() {
                    return this._boatPosition
                }
            }
        }), j.createGL = function() {
            this.Splash_createGL(), this.boat = new b.Object3D, this.rootObject.add(this.boat), this.bg = new d("images/085-hatch/bg.jpg", 1198, 2179, 8), this.boat.add(this.bg.mesh), this.loadQueue.add(this.bg), this.hatch = new d("images/085-hatch/hatch.png", 281, 229, 9.5), this.hatch.mesh.position.x = 650, this.hatch.mesh.position.y = 4700, this.hatch.mesh.position.z = 500, this.loadQueue.add(this.hatch), this.objectGL.add(this.rootObject)
        }, j.disposeGL = function() {
            this.timeline && this.timeline.kill(), this.rootObject.remove(this.bg.mesh), this.rootObject.remove(this.boat), this.rootObject.remove(this.hatch.mesh), this.bg.dispose(), this.hatch.dispose(), this.bg = null, this.boat = null, this.hatch = null, this.Splash_disposeGL()
        }, j.openHatch = function() {
            if (!this.hasOpenedHatch) {
                this.hasOpenedHatch = !0, this.boat.add(this.hatch.mesh), this.rootObject.rotation.z = -.1, this.rootObject.position.z = 4e3;
                var a = RoughEase.ease.config({
                    strength: .7,
                    points: 150,
                    template: Power4.easeOut,
                    taper: "out",
                    randomize: !1
                });
                this.timeline = new TimelineMax, this.timeline.add(TweenMax.to(this.rootObject.position, 1, {
                    ease: a,
                    z: 6e3
                }), 0), this.timeline.add(TweenMax.to(this.rootObject.rotation, 1, {
                    ease: Back.easeOut,
                    z: 0
                }), 0)
            }
        }, j.update = function() {
            if (this.Splash_update(), this.active) {
                this.bg.material.opacity = this._bgInOpacity * this._bgOutOpacity;
                var a = g.map(this._boatPosition, 0, 1, 3e3, -1e4, !1, !1, !1),
                    b = g.map(this._boatPosition, 0, 1, -25e3, -13e3, !1, !1, !1);
                this.boat.position.y = h.lerp(this.boat.position.y, a, .7), this.boat.position.z = h.lerp(this.boat.position.z, b, .7), this.boat.position.y += 100 * Math.sin(.02 * this.time), this.time++
            }
        }, a.promote(i, "Splash"), i
    }), define("theboat/092scream/ScreamSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.bg = new d("images/092-scream/bg.jpg", 1452, 458, 1.2), this.bg.mesh.position.z = -300, this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.aaaa = new d("images/092-scream/aaaa.png", 828, 246, 1), this.aaaa.mesh.position.x = -340, this.aaaa.mesh.position.y = 150, this.aaaa.mesh.position.z = 400, this.aaaa.mesh.rotation.y = .85, this.rootObject.add(this.aaaa.mesh), this.loadQueue.add(this.aaaa), this.iiii = new d("images/092-scream/iiii.png", 498, 157, 1), this.iiii.mesh.position.x = 450, this.iiii.mesh.position.y = 100, this.iiii.mesh.position.z = 400, this.iiii.mesh.rotation.y = -.85, this.rootObject.add(this.iiii.mesh), this.loadQueue.add(this.iiii), this.aaaa.material.opacity = 0, this.iiii.material.opacity = 0, this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.rootObject.remove(this.bg.mesh), this.rootObject.remove(this.aaaa.mesh), this.rootObject.remove(this.iiii.mesh), this.bg.dispose(), this.aaaa.dispose(), this.iiii.dispose(), this.bg = null, this.aaaa = null, this.iiii = null, this.Splash_disposeGL()
        }, g.scream = function() {
            if (!this.screamed) {
                this.timeline = new TimelineMax;
                var a = RoughEase.ease.config({
                    strength: .55,
                    template: Back.easeOut,
                    taper: "out",
                    randomize: !1
                });
                this.timeline.add(TweenMax.from(this.aaaa.mesh.rotation, 1, {
                    ease: a,
                    y: .6,
                    x: .2,
                    z: -.2
                }), 0), this.timeline.add(TweenMax.from(this.aaaa.mesh.position, 1, {
                    ease: Back.easeOut,
                    y: 75
                }), 0), this.timeline.add(TweenMax.to(this.aaaa.material, .6, {
                    opacity: 1
                }), 0), this.timeline.add(TweenMax.from(this.iiii.mesh.rotation, 1, {
                    ease: a,
                    y: -.6,
                    x: .2,
                    z: .2
                }), .4), this.timeline.add(TweenMax.from(this.iiii.mesh.position, 1, {
                    ease: Back.easeOut,
                    y: 75
                }), .4), this.timeline.add(TweenMax.to(this.iiii.material, .6, {
                    opacity: 1
                }), .4), this.timeline.add(TweenMax.to(this.rootObject.position, .75, {
                    ease: Power4.easeOut,
                    z: -300
                }), 0), this.timeline.add(TweenMax.to(this.rootObject.position, 1, {
                    ease: Power4.easeInOut,
                    z: 0
                }), .75), this.screamed = !0
            }
        }, g.update = function() {}, a.promote(f, "Splash"), f
    }), define("theboat/FeverImage", ["utils/inherit", "comic/ComicMetrics", "comic/display/Image", "utils/Random", "audio/Thump", "modernizr", "tweenMax"], function(a, b, c) {
        var d = function(a, b, c, d, e) {
                e = e || {}, e.widthSegments = 4, e.heightSegments = 4, e.bufferGeometry = !1, this.time = 0, this.xt = e.xt || .03 * Math.random(), this.xd = e.xd || .15 * Math.random() + .1, this.yt = e.yt || .03 * Math.random(), this.yd = e.yd || .15 * Math.random() + .1, this.Image_constructor(a, b, c, d, e)
            },
            e = a.extend(d, c);
        return e.update = function() {
            for (var a = this.mesh.geometry.vertices, b = 0; b < a.length; b++) {
                var c = a[b],
                    d = this.time + 7.7 * b;
                c.x += Math.sin(d * this.xt) * this.xd, c.y += Math.sin(d * this.yt) * this.yd
            }
            this.mesh.needsUpdate = !0, this.mesh.geometry.verticesNeedUpdate = !0, this.time++
        }, a.promote(d, "Image"), d
    }), define("theboat/094thatafternoon/ThatAfternoonSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "theboat/FeverImage", "comic/display/Splash", "utils/Random", "math/ArmyKnife"], function(a, b, c, d, e, f, g, h) {
        var i = function(a, b) {
                this.Splash_constructor(a, b), this._bodyPosition = 0, this.time = 0
            },
            j = a.extend(i, f);
        return Object.defineProperties(j, {
            bodyPosition: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bodyPosition = a
                },
                get: function() {
                    return this._bodyPosition
                }
            }
        }), j.createCSS = function() {
            this.Splash_createCSS()
        }, j.createGL = function() {
            this.Splash_createGL(), this.image1 = new e("images/094-that-afternoon/01.png", 1523, 1007, 1, {
                xt: .1,
                yt: .01,
                xd: .1,
                yd: .2
            }), this.image1.mesh.position.y = 0, this.image1.mesh.position.z = -500, this.rootObject.add(this.image1.mesh), this.loadQueue.add(this.image1), this.image2 = new e("images/094-that-afternoon/02.png", 1530, 813, 1.1, {
                xt: .05,
                yt: .01,
                xd: .2,
                yd: .1
            }), this.image2.mesh.position.y = -1e3, this.image2.mesh.position.z = -1e3, this.rootObject.add(this.image2.mesh), this.loadQueue.add(this.image2), this.image3 = new e("images/094-that-afternoon/03.png", 1045, 642, 1.3, {
                xt: .01,
                yt: .05,
                xd: .1,
                yd: .2
            }), this.image3.mesh.position.y = -2e3, this.image3.mesh.position.z = -1500, this.rootObject.add(this.image3.mesh), this.loadQueue.add(this.image3), this.body = new b.Object3D, this.leftArmImage = new d("images/094-that-afternoon/left-arm.png", 177, 140, 1.9), this.leftArmImage.material.depthWrite = !1, this.leftArmImage.material.depthTest = !1, this.leftArm = new b.Object3D, this.leftArm.add(this.leftArmImage.mesh), this.leftArmImage.mesh.position.x = 100, this.leftArmImage.mesh.position.y = 100, this.leftArm.position.x = -310, this.leftArm.position.y = 110, this.leftArm.position.z = -25, this.loadQueue.add(this.leftArmImage), this.rightArm = new d("images/094-that-afternoon/right-arm.png", 150, 77, 1.9), this.rightArm.mesh.position.x = 200, this.rightArm.mesh.position.y = 200, this.rightArm.mesh.position.z = -20, this.loadQueue.add(this.rightArm), this.leftLegImage = new d("images/094-that-afternoon/left-leg.png", 147, 239, 1.9), this.leftLegImage.material.depthWrite = !1, this.leftLegImage.material.depthTest = !1, this.leftLeg = new b.Object3D, this.leftLeg.add(this.leftLegImage.mesh), this.leftLegImage.mesh.position.x = 50, this.leftLeg.position.x = -100, this.leftLeg.position.y = -270, this.leftLeg.position.z = -15, this.loadQueue.add(this.leftLegImage), this.rightLegImage = new d("images/094-that-afternoon/right-leg.png", 310, 205, 1.9), this.rightLegImage.material.depthWrite = !1, this.rightLegImage.material.depthTest = !1, this.rightLeg = new b.Object3D, this.rightLeg.add(this.rightLegImage.mesh), this.rightLegImage.mesh.position.x = 150, this.rightLeg.position.x = 150, this.rightLeg.position.y = -170, this.rightLeg.position.z = -20, this.loadQueue.add(this.rightLegImage), this.trunk = new d("images/094-that-afternoon/trunk.png", 338, 163, 1.9), this.trunk.mesh.position.z = -50, this.loadQueue.add(this.trunk), this.head = new d("images/094-that-afternoon/head.png", 66, 72, 1.9), this.head.mesh.position.y = 180, this.head.mesh.position.z = 20, this.loadQueue.add(this.head), this.body.add(this.leftArm, this.rightArm.mesh, this.leftLeg, this.rightLeg, this.trunk.mesh, this.head.mesh), this.body.position.y = -3e3, this.body.position.z = -300, this.rootObject.add(this.body), this.objectGL.add(this.rootObject)
        }, j.disposeGL = function() {
            this.rootObject.remove(this.image1.mesh), this.rootObject.remove(this.image2.mesh), this.rootObject.remove(this.image3.mesh), this.rootObject.remove(this.leftArmImage.mesh), this.rootObject.remove(this.rightArm.mesh), this.rootObject.remove(this.leftLegImage.mesh), this.rootObject.remove(this.rightLegImage.mesh), this.rootObject.remove(this.trunk.mesh), this.rootObject.remove(this.head.mesh), this.rootObject.remove(this.body.mesh), this.image1.dispose(), this.image2.dispose(), this.image3.dispose(), this.leftArmImage.dispose(), this.rightArm.dispose(), this.leftLegImage.dispose(), this.rightLegImage.dispose(), this.trunk.dispose(), this.head.dispose(), this.image1 = null, this.image2 = null, this.image3 = null, this.leftArmImage = null, this.rightArm = null, this.leftLegImage = null, this.image3 = null, this.rightLegImage = null, this.trunk = null, this.head = null, this.body = null, this.Splash_disposeGL()
        }, j.update = function() {
            this.active && (this.body.position.z = h.map(this._bodyPosition, 0, 1, -1500, -6e3, !1, !1, !1), this.leftArm.rotation.z = .25 * Math.sin(.015 * this.time), this.leftLeg.rotation.z = Math.sin(.009 * this.time) * -.3, this.rightLeg.rotation.z = .3 * Math.sin(.01 * this.time), this.head.mesh.rotation.z = .3 * Math.sin(.011 * this.time), this.body.rotation.x = .3 * Math.sin(.01 * this.time) - .15, this.body.rotation.y = .3 * Math.sin(.013 * this.time) - .15, this.body.rotation.z = .2 * Math.sin(.012 * this.time) - .1, this.image1.update(), this.image2.update(), this.image3.update(), this.time++)
        }, a.promote(i, "Splash"), i
    }), define("theboat/098songpt4/SongPt4Splash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random", "math/ArmyKnife"], function(a, b, c, d, e, f, g) {
        var h = function(a, b) {
                this.Splash_constructor(a, b), this._bgOpacityIn = 0, this._bgOpacityOut = 1
            },
            j = a.extend(h, e);
        return Object.defineProperties(j, {
            bgOpacityIn: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgOpacityIn = a
                },
                get: function() {
                    return this._bgOpacityIn
                }
            },
            bgOpacityOut: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._bgOpacityOut = a
                },
                get: function() {
                    return this._bgOpacityOut
                }
            }
        }), j.createCSS = function() {
            this.Splash_createCSS()
        }, j.createGL = function() {
            this.Splash_createGL(), this.time = 0, this.lyrics1 = new d("images/098-song-pt4/song-pt4-lyrics.png", 1246, 261, 1, {
                widthSegments: 10,
                heightSegments: 3,
                bufferGeometry: !1
            }), this.rootObject.add(this.lyrics1.mesh), this.loadQueue.add(this.lyrics1), this.lyrics1.mesh.geometry.dynamic = !0;
            var a = [{
                file: "images/013-021/song-pt2-left-leaf-01.png",
                width: 141,
                height: 170
            }, {
                file: "images/013-021/song-pt2-left-leaf-02.png",
                width: 153,
                height: 86
            }, {
                file: "images/013-021/song-pt2-left-leaf-02.png",
                width: 126,
                height: 70
            }, {
                file: "images/013-021/song-pt2-right-leaf-01.png",
                width: 135,
                height: 141
            }, {
                file: "images/013-021/song-pt2-right-leaf-02.png",
                width: 112,
                height: 97
            }, {
                file: "images/013-021/song-pt2-right-leaf-03.png",
                width: 114,
                height: 134
            }];
            this.leaves = [];
            for (var c = 0; 20 > c; c++) {
                var e = f.fromArray(a),
                    g = new d(e.file, e.width, e.height, 1.5);
                this.loadQueue.add(g), this.rootObject.add(g.mesh), g.mesh.position.x = f.between(-2e3, 2e3), g.mesh.position.y = f.between(-1e3, 1e3), g.mesh.position.z = f.between(-500, -3e3), g.mesh.rotation.z = f.between(0, 2 * Math.PI), g.material.opacity = 0, this.leaves.push(g)
            }
            this.blackMattePlane = new b.PlaneBufferGeometry(2e4, 8e4), this.blackMatteMaterial = new b.MeshBasicMaterial({
                color: 0
            }), this.blackMatte = new b.Mesh(this.blackMattePlane, this.blackMatteMaterial), this.blackMatteMaterial.transparent = !0, this.blackMatteMaterial.opacity = 0, this.blackMatte.position.z = -3100, this.rootObject.add(this.blackMatte), this.objectGL.add(this.rootObject)
        }, j.disposeGL = function() {
            this.rootObject.remove(this.lyrics1.mesh), this.lyrics1.dispose(), this.lyrics1 = null, this.blackMattePlane.dispose(), this.blackMatteMaterial.dispose(), this.blackMatte = null;
            for (var a = 0; a < this.leaves.length; a++) {
                var b = this.leaves[a];
                this.rootObject.remove(b.mesh), b.dispose()
            }
            this.leaves = null, this.Splash_disposeGL()
        }, j.update = function() {
            if (this.active) {
                this.blackMatteMaterial.opacity = this._bgOpacityIn * this._bgOpacityOut;
                var a, b = this.lyrics1.mesh.geometry.vertices;
                for (a = 0; a < b.length; a++) {
                    var c = b[a],
                        d = this.time + 7.7 * a;
                    c.x += .035 * Math.sin(.015 * d), c.y += .05 * Math.sin(.025 * d), c.z += .05 * Math.sin(.01 * d)
                }
                if (this.lyrics1.mesh.needsUpdate = !0,
                    this.lyrics1.mesh.geometry.verticesNeedUpdate = !0, this.falling)
                    for (a = 0; a < this.leaves.length; a++) {
                        var e = this.leaves[a];
                        e.mesh.position.y -= .75, e.mesh.position.x += .3, e.mesh.rotation.z += .005
                    }
                this.time++
            }
        }, j.fall = function() {
            if (!this.falling)
                for (this.falling = !0, i = 0; i < this.leaves.length; i++) {
                    var a = this.leaves[i],
                        b = g.map(a.mesh.position.z, -500, -3e3, 1, 0);
                    TweenMax.to(a.material, 3, {
                        delay: f.between(0, 5),
                        opacity: b
                    }), TweenMax.to(a.material, 3, {
                        delay: f.between(5, 20),
                        opacity: 0
                    })
                }
        }, a.promote(h, "Splash"), h
    }), define("theboat/101birds/BirdsSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random", "math/ArmyKnife"], function(a, b, c, d, e, f, g) {
        var h = function(a, b) {
                this.Splash_constructor(a, b), this.time = 0, this._blackMatteOpacity = 0
            },
            i = a.extend(h, e);
        return Object.defineProperties(i, {
            blackMatteOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._blackMatteOpacity = a
                },
                get: function() {
                    return this._blackMatteOutOpacity
                }
            }
        }), i.createCSS = function() {
            this.Splash_createCSS()
        }, i.createGL = function() {
            this.Splash_createGL(), this.ocean = new d("images/101-birds/ocean-alt3.jpg", 2340, 2340, 25, {
                widthSegments: 20,
                heightSegments: 10,
                bufferGeometry: !1
            }), this.ocean.mesh.position.y = -5e3, this.ocean.mesh.position.z = -25e3, this.ocean.mesh.rotation.x = Math.PI * -.4, this.rootObject.add(this.ocean.mesh), this.loadQueue.add(this.ocean), this.bird1 = new d("images/101-birds/bird-01.png", 224, 202, 6), this.rootObject.add(this.bird1.mesh), this.loadQueue.add(this.bird1), this.bird1.mesh.position.x = -5500, this.bird1.mesh.position.y = 1900, this.bird1.mesh.position.z = 3e3, this.bird2 = new d("images/101-birds/bird-02.png", 299, 129, 6), this.bird2.mesh.position.x = -5200, this.bird2.mesh.position.y = 2900, this.bird2.mesh.position.z = 3e3, this.rootObject.add(this.bird2.mesh), this.loadQueue.add(this.bird2), this.bird3 = new d("images/101-birds/bird-03.png", 126, 121, 6), this.bird3.mesh.position.x = 4e3, this.bird3.mesh.position.y = 700, this.bird3.mesh.position.z = 3e3, this.rootObject.add(this.bird3.mesh), this.loadQueue.add(this.bird3), this.bird4 = new d("images/101-birds/bird-04.png", 363, 116, 6), this.bird4.mesh.position.x = 5500, this.bird4.mesh.position.y = 1200, this.bird4.mesh.position.z = 3e3, this.rootObject.add(this.bird4.mesh), this.loadQueue.add(this.bird4), this.distantBirds = [];
            for (var a = 0; 8 > a; a++) {
                var c = new d("images/101-birds/distant-bird-alt.png", 91, 29, 10);
                c.mesh.position.x = Math.random() > .5 ? f.between(-1e4, -15e3) : f.between(1e4, 15e3), c.mesh.position.y = f.between(3e3, 8e3), c.mesh.position.z = 3e3, this.rootObject.add(c.mesh), this.loadQueue.add(c), this.distantBirds.push(c)
            }
            this.blackMattePlane = new b.PlaneBufferGeometry(2e4, 8e4), this.blackMatteMaterial = new b.MeshBasicMaterial({
                color: 0
            }), this.blackMatte = new b.Mesh(this.blackMattePlane, this.blackMatteMaterial), this.blackMatteMaterial.transparent = !0, this.blackMatte.position.z = -2e3, this.rootObject.add(this.blackMatte), this.objectGL.add(this.rootObject)
        }, i.disposeGL = function() {
            this.timeline && this.timeline.kill(), this.rootObject.remove(this.ocean.mesh), this.rootObject.remove(this.bird1.mesh), this.rootObject.remove(this.bird2.mesh), this.rootObject.remove(this.bird3.mesh), this.rootObject.remove(this.bird4.mesh), this.ocean.dispose(), this.bird1.dispose(), this.bird2.dispose(), this.bird3.dispose(), this.bird4.dispose();
            for (var a = 0; a < this.distantBirds.length; a++) {
                var b = this.distantBirds[a];
                this.rootObject.remove(b), b.dispose()
            }
            this.distantBirds = null, this.rootObject.remove(this.blackMatte), this.blackMatteMaterial.dispose(), this.blackMattePlane.dispose(), this.ocean = null, this.bird1 = null, this.bird2 = null, this.bird3 = null, this.bird4 = null, this.blackMatteMaterial = null, this.blackMattePlane = null, this.blackMatte = null, this.Splash_disposeGL()
        }, i.update = function() {
            if (this.active) {
                this.blackMatteMaterial.opacity = this._blackMatteOpacity;
                for (var a = this.ocean.mesh.geometry.vertices, b = 0; b < a.length; b++) {
                    var c = a[b],
                        d = this.time + 30 * b;
                    c.z = 250 * Math.sin(.015 * d) + 550 * Math.sin(.01 * d)
                }
                this.ocean.mesh.needsUpdate = !0, this.ocean.mesh.geometry.verticesNeedUpdate = !0, this.time++
            }
        }, i.transitionIn = function() {
            if (!this.transitionedIn) {
                this.timeline = new TimelineMax, this.timeline.add(TweenMax.to(this.bird1.mesh.position, 1.5, {
                    ease: Power4.easeOut,
                    bezier: [{
                        y: 0,
                        z: -5e3
                    }, {
                        y: 1e3,
                        z: -1e4
                    }]
                }), .6), this.timeline.add(TweenMax.to(this.bird2.mesh.position, 1.5, {
                    ease: Power4.easeOut,
                    bezier: [{
                        y: 0,
                        z: -4e3
                    }, {
                        y: 3800,
                        z: -9e3
                    }]
                }), .9), this.timeline.add(TweenMax.to(this.bird3.mesh.position, 1.5, {
                    ease: Power4.easeOut,
                    bezier: [{
                        y: 0,
                        z: -5e3
                    }, {
                        y: 1700,
                        z: -11e3
                    }]
                }), .85), this.timeline.add(TweenMax.to(this.bird4.mesh.position, 1.5, {
                    ease: Power4.easeOut,
                    bezier: [{
                        y: 0,
                        z: -5e3
                    }, {
                        y: 1200,
                        z: -8e3
                    }]
                }), .7);
                for (var a = 0; a < this.distantBirds.length; a++) {
                    var b = this.distantBirds[a],
                        c = f.between(7, 9),
                        d = f.between(0, 1),
                        e = f.between(-5500, 5500),
                        h = f.between(-5e4, 5e4);
                    this.timeline.add(TweenMax.to(b.mesh.position, c, {
                        ease: Power2.easeOut,
                        bezier: [{
                            x: e,
                            y: f.between(3e3, 7e3),
                            z: -35e3
                        }, {
                            x: h,
                            y: f.between(1e4, 17e3),
                            z: -85e3
                        }]
                    }), d), this.timeline.add(TweenMax.to(b.mesh.rotation, .25 * c, {
                        ease: Power3.easeOut,
                        z: g.map(h, -5e4, 5e4, 1, -1, !1, !1, !1)
                    }), d + .025 * c), this.timeline.add(TweenMax.to(b.material, 4, {
                        opacity: 0
                    }), d + 2.5)
                }
                this.transitionedIn = !0
            }
        }, a.promote(h, "Splash"), h
    }), define("theboat/103somethingamiss/SomethingAmissSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random", "utils/Color"], function(a, b, c, d, e, f, g) {
        var h = function(a, b) {
                this.Splash_constructor(a, b), this._quyenBrightness = 0
            },
            i = a.extend(h, e);
        return Object.defineProperties(i, {
            quyenBrightness: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._quyenBrightness = a
                },
                get: function() {
                    return this._quyenBrightness
                }
            }
        }), i.createCSS = function() {
            this.Splash_createCSS()
        }, i.createGL = function() {
            this.Splash_createGL(), this.bg = new d("images/103-something-amiss/bg.jpg", 1701, 2237, 1), this.bg.mesh.position.z = -200, this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.quyen = new d("images/103-something-amiss/quyen.png", 1232, 519, 1), this.quyen.mesh.position.x = 100, this.quyen.mesh.position.y = -850, this.quyen.mesh.position.z = 0, this.rootObject.add(this.quyen.mesh), this.loadQueue.add(this.quyen), this.brightnessColor = new g.fromRGB(0, 0, 0), this.objectGL.add(this.rootObject)
        }, i.disposeGL = function() {
            this.rootObject.remove(this.bg.mesh), this.rootObject.remove(this.quyen.mesh), this.bg.dispose(), this.quyen.dispose(), this.bg = null, this.quyen = null, this.Splash_disposeGL()
        }, i.update = function() {
            this.Splash_update(), this.active && (this.brightnessColor.r = this._quyenBrightness, this.brightnessColor.g = this._quyenBrightness, this.brightnessColor.b = this._quyenBrightness, this.quyen.material.color.setHex(this.brightnessColor.toInt()))
        }, a.promote(h, "Splash"), h
    }), define("theboat/106troungbody/TroungBodySplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random", "math/ArmyKnife", "utils/Color"], function(a, b, c, d, e, f, g, h) {
        var i = function(a, b) {
                this.Splash_constructor(a, b), this._progress = 0
            },
            j = a.extend(i, e);
        return Object.defineProperties(j, {
            progress: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._progress = a
                },
                get: function() {
                    return this._progress
                }
            }
        }), j.createCSS = function() {
            this.Splash_createCSS()
        }, j.createGL = function() {
            this.Splash_createGL(), this.body = new d("images/106-troung-body/body.png", 1762, 592, 1.5), this.body.mesh.position.z = -2400, this.rootObject.add(this.body.mesh), this.loadQueue.add(this.body), this.quyen = new d("images/106-troung-body/quyen.png", 982, 880, 2.4), this.quyen.mesh.position.x = -1e3, this.quyen.mesh.position.y = -200, this.quyen.mesh.position.z = -800, this.rootObject.add(this.quyen.mesh), this.loadQueue.add(this.quyen), this.mai = new d("images/106-troung-body/mai.png", 660, 894, 2.4), this.mai.mesh.position.x = 1e3, this.mai.mesh.position.y = -200, this.mai.mesh.position.z = -800, this.rootObject.add(this.mai.mesh), this.loadQueue.add(this.mai), this.blackMattePlane = new b.PlaneBufferGeometry(2e4, 8e4), this.blackMatteMaterial = new b.MeshBasicMaterial({
                color: 0
            }), this.blackMatte = new b.Mesh(this.blackMattePlane, this.blackMatteMaterial), this.blackMatte.position.z = -3e3, this.rootObject.add(this.blackMatte), this.brightnessColor = new h.fromRGB(0, 0, 0), this.rootObject.position.z = 1e3, this.objectGL.add(this.rootObject)
        }, j.disposeGL = function() {
            this.rootObject.remove(this.body.mesh), this.rootObject.remove(this.quyen.mesh), this.rootObject.remove(this.mai.mesh), this.rootObject.remove(this.blackMatte), this.body.dispose(), this.quyen.dispose(), this.mai.dispose(), this.blackMattePlane.dispose(), this.blackMatteMaterial.dispose(), this.body = null, this.quyen = null, this.mai = null, this.blackMatte = null, this.blackMattePlane = null, this.blackMatteMaterial = null, this.Splash_disposeGL()
        }, j.update = function() {
            if (this.Splash_update(), this.active) {
                var a = Power1.easeInOut.getRatio(this._progress);
                this.rootObject.position.z = g.map(a, 0, 1, 1e3, 0, !1, !1, !1), this.rootObject.position.y = g.map(a, 0, 1, 0, -700, !1, !1, !1), this.quyen.mesh.position.x = g.map(a, 0, 1, -1e3, -900, !1, !1, !1), this.quyen.mesh.position.z = g.map(a, 0, 1, -800, -1800, !1, !1, !1), this.mai.mesh.position.x = g.map(a, 0, 1, 1e3, 900, !1, !1, !1), this.mai.mesh.position.z = g.map(a, 0, 1, -800, -1900, !1, !1, !1);
                var b = a;
                this.brightnessColor.r = b, this.brightnessColor.g = b, this.brightnessColor.b = b, this.quyen.material.color.setHex(this.brightnessColor.toInt()), this.mai.material.color.setHex(this.brightnessColor.toInt())
            }
        }, a.promote(i, "Splash"), i
    }), define("theboat/109quyenmourns/QuyenMournsSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b), this._whiteMatteOpacity = 0
            },
            g = a.extend(f, e);
        return Object.defineProperties(g, {
            whiteMatteOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._whiteMatteOpacity = a
                },
                get: function() {
                    return this._whiteMatteOpacity
                }
            }
        }), g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.bg = new d("images/109-quyen-mourns/bg.png", 926, 442, 1.2), this.bg.mesh.position.x = 400, this.bg.mesh.position.y = -100, this.bg.mesh.position.z = -300, this.rootObject.add(this.bg.mesh), this.loadQueue.add(this.bg), this.whiteMattePlane = new b.PlaneBufferGeometry(2e4, 8e4), this.whiteMatteMaterial = new b.MeshBasicMaterial({
                color: 16777215
            }), this.whiteMatte = new b.Mesh(this.whiteMattePlane, this.whiteMatteMaterial), this.whiteMatteMaterial.transparent = !0, this.whiteMatte.position.z = -350, this.rootObject.add(this.whiteMatte), this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.rootObject.remove(this.bg.mesh), this.rootObject.remove(this.whiteMatte), this.bg.dispose(), this.whiteMatteMaterial.dispose(), this.whiteMattePlane.dispose(), this.bg = null, this.whiteMatte = null, this.whiteMatteMaterial = null, this.whiteMattePlane = null, this.Splash_disposeGL()
        }, g.update = function() {
            this.Splash_update(), this.active && (this.whiteMatteMaterial.opacity = this._whiteMatteOpacity)
        }, a.promote(f, "Splash"), f
    }), define("theboat/115end/EndSplash", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b), this._blackMatteOpacity = 1, this._videoOpacity = 1
            },
            g = a.extend(f, e);
        return Object.defineProperties(g, {
            blackMatteOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._blackMatteOpacity = a
                },
                get: function() {
                    return this._blackMatteOpacity
                }
            },
            videoOpacity: {
                set: function(a) {
                    a = a > 1 ? 1 : a, a = 0 > a ? 0 : a, this._videoOpacity = a
                },
                get: function() {
                    return this._videoOpacity
                }
            }
        }), g.createGL = function() {
            this.Splash_createGL(), this.videoEl = document.createElement("video"), this.videoEl.width = 1280, this.videoEl.height = 960, this.videoEl.loop = !0, this.mp4Src = document.createElement("source"), this.mp4Src.type = "video/mp4", this.mp4Src.src = "videos/end-4-3-bw.mp4", this.oggSrc = document.createElement("source"), this.oggSrc.type = "video/ogg", this.oggSrc.src = "videos/end-4-3-bw.ogg", this.videoEl.appendChild(this.mp4Src), this.videoEl.appendChild(this.oggSrc);
            var a = 30;
            this.videoTexture = new b.VideoTexture(this.videoEl), this.videoTexture.minFilter = b.LinearFilter, this.videoTexture.magFilter = b.LinearFilter, this.videoTexture.format = b.RGBAFormat, this.videoMaterial = new b.MeshBasicMaterial({
                color: 16777215,
                map: this.videoTexture
            }), this.videoMaterial.transparent = !0, this.videoGeom = new b.PlaneBufferGeometry(1280 * a, 960 * a), this.video = new b.Mesh(this.videoGeom, this.videoMaterial), this.video.position.z = -35e3, this.rootObject.add(this.video), this.maskImage = new d("images/115-end/mask.png", 1400, 1030, a), this.maskImage.mesh.position.z = -34500, this.rootObject.add(this.maskImage.mesh), this.loadQueue.add(this.maskImage), this.maskImage.mesh.visible = !1, this.blackMattePlane = new b.PlaneBufferGeometry(9e4, 8e4), this.blackMatteMaterial = new b.MeshBasicMaterial({
                color: 0
            }), this.blackMatte = new b.Mesh(this.blackMattePlane, this.blackMatteMaterial), this.blackMatteMaterial.transparent = !0, this.blackMatteMaterial.opacity = 0, this.blackMatte.position.x = 0, this.blackMatte.position.z = -4e4, this.rootObject.add(this.blackMatte), this.objectGL.add(this.rootObject)
        }, g.play = function() {
            this.videoEl.play()
        }, g.disposeGL = function() {
            this.rootObject.remove(this.video), this.rootObject.remove(this.blackMatte), this.videoEl && (this.videoEl.pause(), this.videoTexture.dispose(), this.videoMaterial.dispose(), this.videoGeom.dispose()), this.blackMattePlane.dispose(), this.blackMattePlane = null, this.blackMatteMaterial.dispose(), this.blackMatteMaterial = null, this.videoTexture = null, this.videoMaterial = null, this.videoGeom = null, this.video = null, this.videoEl = null, this.mp4Src = null, this.oggSrc = null, this.credits = null, this.Splash_disposeGL()
        }, g.update = function() {
            this.Splash_update(), this.active && (this.videoMaterial.opacity = this._videoOpacity, this.blackMatteMaterial.opacity = this._blackMatteOpacity, this.maskImage.mesh.visible = this.videoMaterial.opacity > 0)
        }, a.promote(f, "Splash"), f
    }), define("comic/display/FadeImage", ["utils/inherit", "comic/ComicMetrics", "comic/display/Image", "tweenMax"], function(a, b, c) {
        var d = function(a, b, c, d, e) {
                this.Image_constructor(a, b, c, d, e), this.targetOpacity = e && e.targetOpacity ? e.targetOpacity : 1
            },
            e = a.extend(d, c);
        return e.onLoad = function(a) {
            this.disposed || (TweenMax.fromTo(this.material, 2, {
                ease: Power3.easeOut,
                opacity: 0
            }, {
                opacity: this.targetOpacity
            }), this.Image_onLoad(a))
        }, a.promote(d, "Image"), d
    }), define("theboat/blineancestors/BLineAncestorsSplash1", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/FadeImage", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e, f, g) {
        var h = function(a, b) {
                this.Splash_constructor(a, b)
            },
            i = a.extend(h, f);
        return i.createCSS = function() {
            this.Splash_createCSS()
        }, i.createGL = function() {
            this.Splash_createGL(), this.archive = new e("images/b-line-ancestors/procession.png", 1118, 703, 1.2, {
                targetOpacity: 1
            }), this.archive.mesh.position.x = 400, this.archive.mesh.position.y = 0, this.archive.mesh.position.z = -400, this.archive.material.opacity = 1, this.rootObject.add(this.archive.mesh), this.loadQueue.add(this.archive), this.backlight = new e("images/b-line-ancestors/procession-backlight.png", 1118, 703, 1.2), this.backlight.mesh.position.x = 400, this.backlight.mesh.position.y = 0, this.backlight.mesh.position.z = -420, this.rootObject.add(this.backlight.mesh), this.loadQueue.add(this.backlight), this.objectGL.add(this.rootObject)
        }, i.update = function() {
            this.active && Math.random() > .3 && (this.backlight.material.opacity = g.between(.15, .35))
        }, i.disposeGL = function() {
            this.rootObject.remove(this.archive.mesh), this.archive.dispose(), this.archive = null, this.Splash_disposeGL()
        }, a.promote(h, "Splash"), h
    }), define("theboat/blineancestors/BLineAncestorsSplash2", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/FadeImage", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e, f) {
        var g = function(a, b) {
                this.Splash_constructor(a, b)
            },
            h = a.extend(g, f);
        return h.createCSS = function() {
            this.Splash_createCSS()
        }, h.createGL = function() {
            this.Splash_createGL(), this.archive = new e("images/b-line-ancestors/archive-02.png", 1197, 793, 2, {
                targetOpacity: .6
            }), this.archive.mesh.position.x = 400, this.archive.mesh.position.y = 400, this.archive.material.opacity = 0, this.archive.mesh.position.z = -500, this.rootObject.add(this.archive.mesh), this.loadQueue.add(this.archive), this.boat = new e("images/b-line-ancestors/boat-moon-light.png", 1142, 515, .8), this.boat.mesh.position.x = 300, this.boat.mesh.position.y = -150, this.boat.mesh.position.z = 0, this.rootObject.add(this.boat.mesh), this.loadQueue.add(this.boat), this.moon = new e("images/b-line-ancestors/moon.png", 267, 234, 2), this.moon.mesh.position.x = -800, this.moon.mesh.position.y = 700, this.moon.mesh.position.z = -1e3, this.rootObject.add(this.moon.mesh), this.loadQueue.add(this.moon), this.objectGL.add(this.rootObject)
        }, h.update = function() {}, h.disposeGL = function() {
            this.rootObject.remove(this.archive.mesh), this.rootObject.remove(this.boat.mesh), this.rootObject.remove(this.moon.mesh), this.archive.dispose(), this.boat.dispose(), this.moon.dispose(), this.archive = null, this.boat = null, this.moon = null, this.Splash_disposeGL()
        }, a.promote(g, "Splash"), g
    }), define("theboat/blineancestors/BLineAncestorsSplash3", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/FadeImage", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e, f) {
        var g = function(a, b) {
                this.Splash_constructor(a, b)
            },
            h = a.extend(g, f);
        return h.createCSS = function() {
            this.Splash_createCSS()
        }, h.createGL = function() {
            this.Splash_createGL(), this.archive = new e("images/b-line-ancestors/archive-01.png", 1197, 793, 1.8, {
                targetOpacity: .45
            }), this.archive.mesh.position.x = -400, this.archive.mesh.position.y = 400, this.archive.material.opacity = .45, this.archive.mesh.position.z = -500, this.rootObject.add(this.archive.mesh), this.loadQueue.add(this.archive), this.boat = new e("images/b-line-ancestors/boat-fog.png", 526, 271, 1), this.boat.mesh.position.x = 300, this.boat.mesh.position.y = -150, this.boat.mesh.position.z = 0, this.rootObject.add(this.boat.mesh), this.loadQueue.add(this.boat), this.fogFG = new e("images/b-line-ancestors/fog-fg.png", 1291, 542, 1.1), this.fogFG.mesh.position.x = 300, this.fogFG.mesh.position.y = 0, this.fogFG.mesh.position.z = 100, this.rootObject.add(this.fogFG.mesh), this.loadQueue.add(this.fogFG), this.fogBG = new e("images/b-line-ancestors/fog-bg.png", 1320, 797, .9), this.fogBG.mesh.position.x = 300, this.fogBG.mesh.position.y = -200, this.fogBG.mesh.position.z = -20, this.fogBG.material.opacity = .35, this.rootObject.add(this.fogBG.mesh), this.loadQueue.add(this.fogBG), this.objectGL.add(this.rootObject)
        }, h.update = function() {}, h.disposeGL = function() {
            this.rootObject.remove(this.archive.mesh), this.rootObject.remove(this.boat.mesh), this.rootObject.remove(this.fogFG.mesh), this.rootObject.remove(this.fogBG.mesh), this.archive.dispose(), this.boat.dispose(), this.fogFG.dispose(), this.fogBG.dispose(), this.archive = null, this.boat = null, this.fogFG = null, this.fogBG = null, this.Splash_disposeGL()
        }, a.promote(g, "Splash"), g
    }), define("theboat/blinebackstory/BLineBackStoryBlackMatte", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b), this.usePreloader = !1
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.blackMattePlane = new b.PlaneBufferGeometry(8e3, 8e4), this.blackMatteMaterial = new b.MeshBasicMaterial({
                color: 0
            }), this.blackMatte = new b.Mesh(this.blackMattePlane, this.blackMatteMaterial), this.blackMatte.position.z = -2e3, this.rootObject.add(this.blackMatte), this.objectGL.add(this.rootObject)
        }, g.disposeGL = function() {
            this.rootObject.remove(this.blackMatte), this.blackMatteMaterial.dispose(), this.blackMattePlane.dispose(), this.blackMatteMaterial = null, this.blackMattePlane = null, this.blackMatte = null, this.Splash_disposeGL()
        }, g.update = function() {
            this.Splash_update()
        }, a.promote(f, "Splash"), f
    }), define("theboat/blinebackstory/BLineBackStorySplash1", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/FadeImage", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e, f) {
        var g = function(a, b) {
                this.Splash_constructor(a, b)
            },
            h = a.extend(g, f);
        return h.createCSS = function() {
            this.Splash_createCSS()
        }, h.createGL = function() {
            this.Splash_createGL(), this.running = new e("images/b-line-backstory/archive-01.png", 1009, 761, 1.3), this.running.mesh.position.x = 900, this.running.mesh.position.y = -200, this.running.mesh.position.z = -500, this.rootObject.add(this.running.mesh), this.loadQueue.add(this.running), this.archive2 = new e("images/b-line-backstory/archive-02.png", 1209, 849, 2.6, {
                targetOpacity: .5
            }), this.archive2.mesh.position.x = 0, this.archive2.mesh.position.z = -900, this.archive2.material.opacity = .5, this.rootObject.add(this.archive2.mesh), this.loadQueue.add(this.archive2), this.objectGL.add(this.rootObject)
        }, h.update = function() {}, h.disposeGL = function() {
            this.rootObject.remove(this.running.mesh), this.rootObject.remove(this.archive2.mesh), this.running.dispose(), this.archive2.dispose(), this.running = null, this.archive2 = null, this.Splash_disposeGL()
        }, a.promote(g, "Splash"), g
    }), define("theboat/blinebackstory/BLineBackStorySplash2", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.running = new d("images/b-line-backstory/archive-03.png", 1205, 945, 1.3), this.running.mesh.position.x = -900, this.running.mesh.position.y = -200, this.running.mesh.position.z = -500, this.rootObject.add(this.running.mesh), this.loadQueue.add(this.running), this.archive2 = new d("images/b-line-backstory/archive-04.png", 920, 681, 2.9), this.archive2.mesh.position.x = 0, this.archive2.mesh.position.z = -900, this.archive2.material.opacity = .5, this.rootObject.add(this.archive2.mesh), this.loadQueue.add(this.archive2), this.objectGL.add(this.rootObject)
        }, g.update = function() {}, g.disposeGL = function() {
            this.rootObject.remove(this.running.mesh), this.rootObject.remove(this.archive2.mesh), this.running.dispose(), this.archive2.dispose(), this.running = null, this.archive2 = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/blinebackstory/BLineBackStoryRunning", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.running = new d("images/b-line-backstory/running.png", 458, 693, 1.2), this.running.mesh.position.z = -300, this.rootObject.add(this.running.mesh), this.loadQueue.add(this.running), this.objectGL.add(this.rootObject)
        }, g.update = function() {}, g.disposeGL = function() {
            this.rootObject.remove(this.running.mesh), this.running.dispose(), this.running = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/blinereeducation/BLineReeducationSplash1", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/FadeImage", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e, f) {
        var g = function(a, b) {
                this.Splash_constructor(a, b)
            },
            h = a.extend(g, f);
        return h.createCSS = function() {
            this.Splash_createCSS()
        }, h.createGL = function() {
            this.Splash_createGL(), this.archive = new e("images/b-line-reeducation/archive-01.png", 1197, 793, 1.8, {
                targetOpacity: .85
            }), this.archive.mesh.position.x = -400, this.archive.material.opacity = .85, this.archive.mesh.position.z = -500, this.rootObject.add(this.archive.mesh), this.loadQueue.add(this.archive), this.line = new e("images/b-line-reeducation/line.png", 1553, 506, 1.1), this.line.mesh.position.y = -300, this.line.mesh.position.z = 0, this.rootObject.add(this.line.mesh), this.loadQueue.add(this.line), this.guardLeft = new e("images/b-line-reeducation/line-guard-fore-left.png", 347, 505, .9), this.guardLeft.mesh.position.x = -400, this.guardLeft.mesh.position.y = -450, this.guardLeft.mesh.position.z = 100, this.rootObject.add(this.guardLeft.mesh), this.loadQueue.add(this.guardLeft), this.guardRight = new e("images/b-line-reeducation/line-guard-fore-right.png", 320, 566, .9), this.guardRight.mesh.position.x = 400, this.guardRight.mesh.position.y = -450, this.guardRight.mesh.position.z = 100, this.rootObject.add(this.guardRight.mesh), this.loadQueue.add(this.guardRight), this.guardBack = new e("images/b-line-reeducation/line-guard-back.png", 230, 458, 1.1), this.guardBack.mesh.position.x = -200, this.guardBack.mesh.position.y = -270, this.guardBack.mesh.position.z = -100, this.rootObject.add(this.guardBack.mesh), this.loadQueue.add(this.guardBack), this.objectGL.add(this.rootObject)
        }, h.update = function() {}, h.disposeGL = function() {
            this.rootObject.remove(this.archive.mesh), this.rootObject.remove(this.line.mesh), this.rootObject.remove(this.guardLeft.mesh), this.rootObject.remove(this.guardRight.mesh), this.rootObject.remove(this.guardBack.mesh), this.archive.dispose(), this.guardBack.dispose(), this.guardLeft.dispose(), this.guardRight.dispose(), this.archive = null, this.guardBack = null, this.guardLeft = null, this.guardRight = null, this.Splash_disposeGL()
        }, a.promote(g, "Splash"), g
    }), define("theboat/blinereeducation/BLineReeducationSplash2", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.archive2 = new d("images/b-line-reeducation/archive-02.png", 1500, 995, 1.5), this.archive2.mesh.position.x = 400, this.archive2.mesh.position.z = -600, this.archive2.material.opacity = .85, this.rootObject.add(this.archive2.mesh), this.loadQueue.add(this.archive2), this.flee = new d("images/b-line-reeducation/flee.png", 500, 499, 1.3), this.flee.mesh.position.x = -350, this.flee.mesh.position.y = 300, this.flee.mesh.position.z = -100, this.rootObject.add(this.flee.mesh), this.loadQueue.add(this.flee), this.objectGL.add(this.rootObject)
        }, g.update = function() {}, g.disposeGL = function() {
            this.rootObject.remove(this.archive2.mesh), this.rootObject.remove(this.flee.mesh), this.archive2.dispose(), this.flee.dispose(), this.archive2 = null, this.flee = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/blinereeducation/BLineReeducationSplash3", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.archive2 = new d("images/b-line-reeducation/archive-03.png", 1150, 766, 1.8), this.archive2.mesh.position.x = -400, this.archive2.mesh.position.z = -500, this.archive2.material.opacity = .85, this.rootObject.add(this.archive2.mesh), this.loadQueue.add(this.archive2), this.prisoners = new d("images/b-line-reeducation/prisoners.png", 1518, 712, 1), this.prisoners.mesh.position.x = -200, this.prisoners.mesh.position.y = -200, this.prisoners.mesh.position.z = 0, this.rootObject.add(this.prisoners.mesh), this.loadQueue.add(this.prisoners), this.guardLeft = new d("images/b-line-reeducation/reed-guard-left.png", 187, 425, 1.1), this.guardLeft.mesh.position.x = -600, this.guardLeft.mesh.position.y = -500, this.guardLeft.mesh.position.z = 100, this.rootObject.add(this.guardLeft.mesh), this.loadQueue.add(this.guardLeft), this.guardMid = new d("images/b-line-reeducation/reed-guard-middle.png", 267, 464, 1.1), this.guardMid.mesh.position.x = -100, this.guardMid.mesh.position.y = -500, this.guardMid.mesh.position.z = 100, this.rootObject.add(this.guardMid.mesh), this.loadQueue.add(this.guardMid), this.guardRight = new d("images/b-line-reeducation/reed-guard-right.png", 259, 437, 1.1), this.guardRight.mesh.position.x = 400, this.guardRight.mesh.position.y = -500, this.guardRight.mesh.position.z = 100, this.rootObject.add(this.guardRight.mesh), this.loadQueue.add(this.guardRight), this.objectGL.add(this.rootObject)
        }, g.update = function() {}, g.disposeGL = function() {
            this.rootObject.remove(this.archive2.mesh), this.rootObject.remove(this.prisoners.mesh), this.rootObject.remove(this.guardLeft.mesh), this.rootObject.remove(this.guardMid.mesh), this.rootObject.remove(this.guardRight.mesh), this.archive2.dispose(), this.prisoners.dispose(), this.guardLeft.dispose(), this.guardMid.dispose(), this.guardRight.dispose(), this.archive2 = null, this.prisoners = null, this.guardLeft = null, this.guardMid = null, this.guardRight = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/blinebidong/BLineBidongSplash1", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/FadeImage", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e, f) {
        var g = function(a, b) {
                this.Splash_constructor(a, b)
            },
            h = a.extend(g, f);
        return h.createCSS = function() {
            this.Splash_createCSS()
        }, h.createGL = function() {
            this.Splash_createGL(), this.archive1 = new e("images/b-line-bidong/archive-01.png", 1009, 761, 1.3), this.archive1.mesh.position.x = 900, this.archive1.mesh.position.y = -200, this.archive1.mesh.position.z = -500, this.rootObject.add(this.archive1.mesh), this.loadQueue.add(this.archive1), this.archive2 = new e("images/b-line-bidong/archive-02.png", 1209, 849, 2.6, {
                targetOpacity: .5
            }), this.archive2.mesh.position.x = 0, this.archive2.mesh.position.z = -900, this.rootObject.add(this.archive2.mesh), this.loadQueue.add(this.archive2), this.ba = new e("images/b-line-bidong/ba.png", 522, 693, 1), this.ba.mesh.position.x = -650, this.ba.mesh.position.y = 100, this.ba.mesh.position.z = 0, this.rootObject.add(this.ba.mesh), this.loadQueue.add(this.ba), this.objectGL.add(this.rootObject)
        }, h.update = function() {}, h.disposeGL = function() {
            this.rootObject.remove(this.archive1.mesh), this.rootObject.remove(this.archive2.mesh), this.rootObject.remove(this.ba.mesh), this.archive1.dispose(), this.archive2.dispose(), this.ba.dispose(), this.archive1 = null, this.archive2 = null, this.ba = null, this.Splash_disposeGL()
        }, a.promote(g, "Splash"), g
    }), define("theboat/blinebidong/BLineBidongSplash2", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.archive1 = new d("images/b-line-bidong/archive-04.png", 1009, 761, 1.3), this.archive1.mesh.position.x = -900, this.archive1.mesh.position.y = -200, this.archive1.mesh.position.z = -500, this.archive1.material.opacity = .85, this.rootObject.add(this.archive1.mesh), this.loadQueue.add(this.archive1), this.archive2 = new d("images/b-line-bidong/archive-03.png", 1311, 886, 2.6), this.archive2.mesh.position.x = 0, this.archive2.mesh.position.z = -900, this.archive2.material.opacity = .5, this.rootObject.add(this.archive2.mesh), this.loadQueue.add(this.archive2), this.objectGL.add(this.rootObject)
        }, g.update = function() {}, g.disposeGL = function() {
            this.rootObject.remove(this.archive1.mesh), this.rootObject.remove(this.archive2.mesh), this.archive1.dispose(), this.archive2.dispose(), this.archive1 = null, this.archive2 = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/blinebidong/BLineBidongSplash3", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/Splash", "utils/Random"], function(a, b, c, d, e) {
        var f = function(a, b) {
                this.Splash_constructor(a, b)
            },
            g = a.extend(f, e);
        return g.createCSS = function() {
            this.Splash_createCSS()
        }, g.createGL = function() {
            this.Splash_createGL(), this.archive1 = new d("images/b-line-bidong/archive-05.png", 1009, 761, 1.3), this.archive1.mesh.position.x = 900, this.archive1.mesh.position.y = -200, this.archive1.mesh.position.z = -500, this.rootObject.add(this.archive1.mesh), this.loadQueue.add(this.archive1), this.archive2 = new d("images/b-line-bidong/archive-06.png", 1311, 886, 2.6), this.archive2.mesh.position.x = 0, this.archive2.mesh.position.z = -900, this.archive2.material.opacity = .5, this.rootObject.add(this.archive2.mesh), this.loadQueue.add(this.archive2), this.objectGL.add(this.rootObject)
        }, g.update = function() {}, g.disposeGL = function() {
            this.rootObject.remove(this.archive1.mesh), this.rootObject.remove(this.archive2.mesh), this.archive1.dispose(), this.archive2.dispose(), this.archive1 = null, this.archive2 = null, this.Splash_disposeGL()
        }, a.promote(f, "Splash"), f
    }), define("theboat/blinebubbles/BubbleAncestors", ["underscore", "utils/inherit", "comic/ComicMetrics", "comic/display/ComicObject", "comic/display/Image", "theboat/FeverImage", "utils/Random", "utils/Color", "threejs", "threejsCSS"], function(a, b, c, d, e, f, g, h, i) {
        var j = function(b, c, d, e) {
                this.ComicObject_constructor(d, e), this.useGL = !0, this.useCSS = !1, this.interactive = !0, this.time = 0, a.bindAll(this, "onRollOver", "onRollOut", "onClick")
            },
            k = b.extend(j, d);
        return k.createCSS = function() {
            this.ComicObject_createCSS()
        }, k.createGL = function() {
            this.ComicObject_createGL(), this.transitionedIn = !1, this.rootObject = new i.Object3D, this.objectGL.add(this.rootObject), this.rootObject.position.x = 900, this.rootObject.position.y = -500, this.bubble = new e("images/b-line-ancestors/bubble/bubble-alt.png", 565, 306, .6), this.bubble.mesh.position.x = 90, this.bubble.mesh.position.y = 30, this.bubble.mesh.position.z = 250, this.rootObject.add(this.bubble.mesh), this.loadQueue.add(this.bubble), this.arrow = new e("images/b-line-ancestors/bubble/arrow.png", 194, 119, .6), this.arrow.mesh.position.x = 80, this.arrow.mesh.position.y = -70, this.arrow.mesh.position.z = 360, this.rootObject.add(this.arrow.mesh), this.loadQueue.add(this.arrow), this.graphic = new e("images/b-line-ancestors/bubble/procession-alt.png", 629, 445, .6), this.graphic.mesh.position.x = 120, this.graphic.mesh.position.y = -30, this.graphic.mesh.position.z = 350, this.rootObject.add(this.graphic.mesh), this.loadQueue.add(this.graphic), this.tail1 = new e("images/b-line-ancestors/bubble/bubble-tail-01.png", 47, 47, .6), this.tail1.mesh.position.x = 0, this.tail1.mesh.position.y = 135, this.tail1.mesh.position.z = 200, this.rootObject.add(this.tail1.mesh), this.loadQueue.add(this.tail1), this.tail2 = new e("images/b-line-ancestors/bubble/bubble-tail-02.png", 47, 47, .6), this.tail2.mesh.position.x = -60, this.tail2.mesh.position.y = 165, this.tail2.mesh.position.z = 150, this.rootObject.add(this.tail2.mesh), this.loadQueue.add(this.tail2), this.tail3 = new e("images/b-line-ancestors/bubble/bubble-tail-03.png", 47, 47, .6), this.tail3.mesh.position.x = -100, this.tail3.mesh.position.y = 180, this.tail3.mesh.position.z = 100, this.rootObject.add(this.tail3.mesh), this.loadQueue.add(this.tail3), this.tail3.material.opacity = this.tail2.material.opacity = this.tail1.material.opacity = this.bubble.material.opacity = this.graphic.material.opacity = this.arrow.material.opacity = 0
        }, k.load = function() {
            this.ComicObject_load(), this.objectGL.visible = !0
        }, k.draw = function() {
            this.ComicObject_draw()
        }, k.transitionIn = function() {
            this.transitionedIn || (this.timeline = new TimelineMax({
                onComplete: this.onTransitionInComplete,
                onCompleteScope: this
            }), this.timeline.insert(TweenMax.from(this.tail3.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-50"
            }), 0), this.timeline.insert(TweenMax.from(this.tail2.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-100"
            }), .2), this.timeline.insert(TweenMax.from(this.tail1.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-150"
            }), .4), this.timeline.insert(TweenMax.from(this.bubble.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-200"
            }), .6), this.timeline.insert(TweenMax.from(this.graphic.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-200"
            }), .6), this.timeline.insert(TweenMax.to(this.tail3.material, 1, {
                opacity: 1
            })), this.timeline.insert(TweenMax.to(this.tail2.material, 1, {
                opacity: 1
            }), .2), this.timeline.insert(TweenMax.to(this.tail1.material, 1, {
                opacity: 1
            }), .4), this.timeline.insert(TweenMax.to(this.bubble.material, 1, {
                opacity: 1
            }), .6), this.timeline.insert(TweenMax.to(this.graphic.material, 1, {
                opacity: 1
            }), .8), this.timeline.insert(TweenMax.to(this.arrow.material, 1, {
                opacity: 1
            }), 1), this.transitionedIn = !0)
        }, k.onTransitionInComplete = function() {
            this.addEventListener("click", this.onClick), this.addEventListener("rollOver", this.onRollOver), this.addEventListener("rollOut", this.onRollOut)
        }, k.onRollOver = function() {
            this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.to(this.graphic.mesh.position, .25, {
                ease: Power2.easeOut,
                x: 120,
                z: 450
            })), this.timeline.insert(TweenMax.to(this.arrow.mesh.position, .25, {
                ease: Power2.easeOut,
                x: 90,
                z: 460
            })), this.timeline.insert(TweenMax.to(this.bubble.mesh.position, .25, {
                ease: Power2.easeOut,
                z: 300
            }), 0), this.timeline.insert(TweenMax.to(this.tail1.mesh.position, .33, {
                ease: Power2.easeOut,
                z: 250
            }), .1), this.timeline.insert(TweenMax.to(this.tail2.mesh.position, .7, {
                ease: Power2.easeOut,
                z: 175
            }), .2), this.timeline.insert(TweenMax.to(this.tail3.mesh.position, 1, {
                ease: Power2.easeOut,
                z: 125
            }), .3)
        }, k.onRollOut = function() {
            this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.to(this.graphic.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                x: 100,
                z: 350
            })), this.timeline.insert(TweenMax.to(this.arrow.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                x: 80,
                z: 360
            })), this.timeline.insert(TweenMax.to(this.bubble.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 250
            }), 0), this.timeline.insert(TweenMax.to(this.tail1.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 200
            }), .2), this.timeline.insert(TweenMax.to(this.tail2.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 150
            }), .4), this.timeline.insert(TweenMax.to(this.tail3.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 100
            }), .6)
        }, k.onClick = function() {}, k.disposeGL = function() {
            this.timeline && this.timeline.kill(), this.objectGL.remove(this.rootObject), this.removeEventListener("click", this.onClick), this.removeEventListener("rollOver", this.onRollOver), this.removeEventListener("rollOut", this.onRollOut), this.rootObject.remove(this.bubble), this.rootObject.remove(this.arrow), this.rootObject.remove(this.graphic), this.rootObject.remove(this.tail1), this.rootObject.remove(this.tail2), this.rootObject.remove(this.tail3), this.bubble.dispose(), this.arrow.dispose(), this.graphic.dispose(), this.tail1.dispose(), this.tail2.dispose(), this.tail3.dispose(), this.bubble = null, this.arrow = null, this.graphic = null, this.tail1 = null, this.tail2 = null, this.tail3 = null, this.rootObject = null, this.ComicObject_disposeGL()
        }, k.update = function() {
            if (this.ComicObject_update(), this.active) {
                this.time++;
                var a = Math.sin(.02 * (this.time + 0)),
                    b = Math.sin(.02 * (this.time + 50)),
                    c = Math.sin(.02 * (this.time + 100)),
                    d = Math.sin(.02 * (this.time + 150));
                this.bubble.mesh.position.x += .1 * a, this.bubble.mesh.position.y += .1 * d, this.tail1.mesh.position.x += .1 * b, this.tail1.mesh.position.y += .1 * c, this.tail2.mesh.position.x += .1 * c, this.tail2.mesh.position.y += .1 * b, this.tail3.mesh.position.x += .1 * d, this.tail3.mesh.position.y += .1 * a
            }
        }, b.promote(j, "ComicObject"), j
    }), define("theboat/blinebubbles/BubbleReeducation", ["underscore", "utils/inherit", "comic/ComicMetrics", "comic/display/ComicObject", "comic/display/Image", "theboat/FeverImage", "utils/Random", "utils/Color", "threejs", "threejsCSS"], function(a, b, c, d, e, f, g, h, i) {
        var j = function(b, c, d, e) {
                this.ComicObject_constructor(d, e), this.useGL = !0, this.useCSS = !1, this.interactive = !0, this.time = 0, a.bindAll(this, "onRollOver", "onRollOut", "onClick")
            },
            k = b.extend(j, d);
        return k.createCSS = function() {
            this.ComicObject_createCSS()
        }, k.createGL = function() {
            this.ComicObject_createGL(), this.transitionedIn = !1, this.rootObject = new i.Object3D, this.objectGL.add(this.rootObject), this.rootObject.position.x = 950, this.rootObject.position.y = -300, this.rootObject.position.z = 0, this.bubble = new e("images/b-line-reeducation/bubble/bubble-alt.png", 565, 306, .6), this.bubble.mesh.position.x = 90, this.bubble.mesh.position.y = 30, this.bubble.mesh.position.z = 250, this.rootObject.add(this.bubble.mesh), this.loadQueue.add(this.bubble), this.arrow = new e("images/b-line-reeducation/bubble/arrow.png", 194, 119, .6), this.arrow.mesh.position.x = 30, this.arrow.mesh.position.y = -70, this.arrow.mesh.position.z = 360, this.rootObject.add(this.arrow.mesh), this.loadQueue.add(this.arrow), this.graphic = new e("images/b-line-reeducation/bubble/flee.png", 333, 333, .6), this.graphic.mesh.position.x = 100, this.graphic.mesh.position.y = 0, this.graphic.mesh.position.z = 350, this.rootObject.add(this.graphic.mesh), this.loadQueue.add(this.graphic), this.tail1 = new e("images/b-line-reeducation/bubble/bubble-tail-01.png", 47, 47, .6), this.tail1.mesh.position.x = 100, this.tail1.mesh.position.y = 135, this.tail1.mesh.position.z = 200, this.rootObject.add(this.tail1.mesh), this.loadQueue.add(this.tail1), this.tail2 = new e("images/b-line-reeducation/bubble/bubble-tail-02.png", 47, 47, .6), this.tail2.mesh.position.x = 160, this.tail2.mesh.position.y = 165, this.tail2.mesh.position.z = 150, this.rootObject.add(this.tail2.mesh), this.loadQueue.add(this.tail2), this.tail3 = new e("images/b-line-reeducation/bubble/bubble-tail-03.png", 47, 47, .6), this.tail3.mesh.position.x = 200, this.tail3.mesh.position.y = 180, this.tail3.mesh.position.z = 100, this.rootObject.add(this.tail3.mesh), this.loadQueue.add(this.tail3), this.tail3.material.opacity = this.tail2.material.opacity = this.tail1.material.opacity = this.bubble.material.opacity = this.graphic.material.opacity = this.arrow.material.opacity = 0
        }, k.load = function() {
            this.ComicObject_load(), this.objectGL.visible = !0
        }, k.draw = function() {
            this.ComicObject_draw()
        }, k.transitionIn = function() {
            this.transitionedIn || (this.timeline = new TimelineMax({
                onComplete: this.onTransitionInComplete,
                onCompleteScope: this
            }), this.timeline.insert(TweenMax.from(this.tail3.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-50"
            }), 0), this.timeline.insert(TweenMax.from(this.tail2.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-100"
            }), .2), this.timeline.insert(TweenMax.from(this.tail1.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-150"
            }), .4), this.timeline.insert(TweenMax.from(this.bubble.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-200"
            }), .6), this.timeline.insert(TweenMax.from(this.graphic.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-200"
            }), .6), this.timeline.insert(TweenMax.to(this.tail3.material, 1, {
                opacity: 1
            })), this.timeline.insert(TweenMax.to(this.tail2.material, 1, {
                opacity: 1
            }), .2), this.timeline.insert(TweenMax.to(this.tail1.material, 1, {
                opacity: 1
            }), .4), this.timeline.insert(TweenMax.to(this.bubble.material, 1, {
                opacity: 1
            }), .6), this.timeline.insert(TweenMax.to(this.graphic.material, 1, {
                opacity: 1
            }), .8), this.timeline.insert(TweenMax.to(this.arrow.material, 1, {
                opacity: 1
            }), 1), this.transitionedIn = !0)
        }, k.onTransitionInComplete = function() {
            this.addEventListener("click", this.onClick), this.addEventListener("rollOver", this.onRollOver), this.addEventListener("rollOut", this.onRollOut)
        }, k.onRollOver = function() {
            this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.to(this.graphic.mesh.position, .25, {
                ease: Power2.easeOut,
                x: 100,
                z: 450
            })), this.timeline.insert(TweenMax.to(this.arrow.mesh.position, .25, {
                ease: Power2.easeOut,
                x: 0,
                z: 460
            })), this.timeline.insert(TweenMax.to(this.bubble.mesh.position, .25, {
                ease: Power2.easeOut,
                z: 300
            }), 0), this.timeline.insert(TweenMax.to(this.tail1.mesh.position, .33, {
                ease: Power2.easeOut,
                z: 250
            }), .1), this.timeline.insert(TweenMax.to(this.tail2.mesh.position, .7, {
                ease: Power2.easeOut,
                z: 175
            }), .2), this.timeline.insert(TweenMax.to(this.tail3.mesh.position, 1, {
                ease: Power2.easeOut,
                z: 125
            }), .3)
        }, k.onRollOut = function() {
            this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.to(this.graphic.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                x: 100,
                z: 350
            })), this.timeline.insert(TweenMax.to(this.arrow.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                x: 30,
                z: 360
            })), this.timeline.insert(TweenMax.to(this.bubble.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 250
            }), 0), this.timeline.insert(TweenMax.to(this.tail1.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 200
            }), .2), this.timeline.insert(TweenMax.to(this.tail2.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 150
            }), .4), this.timeline.insert(TweenMax.to(this.tail3.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 100
            }), .6)
        }, k.onClick = function() {}, k.disposeGL = function() {
            this.timeline && this.timeline.kill(), this.objectGL.remove(this.rootObject), this.removeEventListener("click", this.onClick), this.removeEventListener("rollOver", this.onRollOver), this.removeEventListener("rollOut", this.onRollOut), this.rootObject.remove(this.bubble), this.rootObject.remove(this.arrow), this.rootObject.remove(this.graphic), this.rootObject.remove(this.tail1), this.rootObject.remove(this.tail2), this.rootObject.remove(this.tail3), this.bubble.dispose(), this.arrow.dispose(), this.graphic.dispose(), this.tail1.dispose(), this.tail2.dispose(), this.tail3.dispose(), this.bubble = null, this.arrow = null, this.graphic = null, this.tail1 = null, this.tail2 = null, this.tail3 = null, this.rootObject = null, this.ComicObject_disposeGL()
        }, k.update = function() {
            if (this.ComicObject_update(), this.active) {
                this.time++;
                var a = Math.sin(.02 * (this.time + 0)),
                    b = Math.sin(.02 * (this.time + 50)),
                    c = Math.sin(.02 * (this.time + 100)),
                    d = Math.sin(.02 * (this.time + 150));
                this.bubble.mesh.position.x += .1 * a, this.bubble.mesh.position.y += .1 * d, this.tail1.mesh.position.x += .1 * b, this.tail1.mesh.position.y += .1 * c, this.tail2.mesh.position.x += .1 * c, this.tail2.mesh.position.y += .1 * b, this.tail3.mesh.position.x += .1 * d, this.tail3.mesh.position.y += .1 * a
            }
        }, b.promote(j, "ComicObject"), j
    }), define("theboat/blinebubbles/BubbleBidong", ["underscore", "utils/inherit", "comic/ComicMetrics", "comic/display/ComicObject", "comic/display/Image", "theboat/FeverImage", "utils/Random", "utils/Color", "threejs", "threejsCSS"], function(a, b, c, d, e, f, g, h, i) {
        var j = function(b, c, d, e) {
                this.ComicObject_constructor(d, e), this.useGL = !0, this.useCSS = !1, this.interactive = !0, this.time = 0, a.bindAll(this, "onRollOver", "onRollOut", "onClick")
            },
            k = b.extend(j, d);
        return k.createCSS = function() {
            this.ComicObject_createCSS()
        }, k.createGL = function() {
            this.ComicObject_createGL(), this.transitionedIn = !1, this.rootObject = new i.Object3D, this.objectGL.add(this.rootObject), this.rootObject.position.x = 900, this.rootObject.position.y = -450, this.bubble = new e("images/b-line-bidong/bubble/bubble-alt.png", 565, 306, .6), this.bubble.mesh.position.x = 90, this.bubble.mesh.position.y = 30, this.bubble.mesh.position.z = 250, this.rootObject.add(this.bubble.mesh), this.loadQueue.add(this.bubble), this.arrow = new e("images/b-line-bidong/bubble/arrow.png", 194, 119, .6), this.arrow.mesh.position.x = 250, this.arrow.mesh.position.y = -70, this.arrow.mesh.position.z = 360, this.rootObject.add(this.arrow.mesh), this.loadQueue.add(this.arrow), this.graphic = new e("images/b-line-bidong/bubble/ba.png", 304, 382, .6), this.graphic.mesh.position.x = 100, this.graphic.mesh.position.y = 0, this.graphic.mesh.position.z = 350, this.rootObject.add(this.graphic.mesh), this.loadQueue.add(this.graphic), this.tail1 = new e("images/b-line-bidong/bubble/bubble-tail-01.png", 47, 47, .6), this.tail1.mesh.position.x = 0, this.tail1.mesh.position.y = 135, this.tail1.mesh.position.z = 200, this.rootObject.add(this.tail1.mesh), this.loadQueue.add(this.tail1), this.tail2 = new e("images/b-line-bidong/bubble/bubble-tail-02.png", 47, 47, .6), this.tail2.mesh.position.x = -60, this.tail2.mesh.position.y = 165, this.tail2.mesh.position.z = 150, this.rootObject.add(this.tail2.mesh), this.loadQueue.add(this.tail2), this.tail3 = new e("images/b-line-bidong/bubble/bubble-tail-03.png", 47, 47, .6), this.tail3.mesh.position.x = -100, this.tail3.mesh.position.y = 180, this.tail3.mesh.position.z = 100, this.rootObject.add(this.tail3.mesh), this.loadQueue.add(this.tail3), this.tail3.material.opacity = this.tail2.material.opacity = this.tail1.material.opacity = this.bubble.material.opacity = this.graphic.material.opacity = this.arrow.material.opacity = 0
        }, k.load = function() {
            this.ComicObject_load(), this.objectGL.visible = !0
        }, k.draw = function() {
            this.ComicObject_draw()
        }, k.transitionIn = function() {
            this.transitionedIn || (this.timeline = new TimelineMax({
                onComplete: this.onTransitionInComplete,
                onCompleteScope: this
            }), this.timeline.insert(TweenMax.from(this.tail3.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-50"
            }), 0), this.timeline.insert(TweenMax.from(this.tail2.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-100"
            }), .2), this.timeline.insert(TweenMax.from(this.tail1.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-150"
            }), .4), this.timeline.insert(TweenMax.from(this.bubble.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-200"
            }), .6), this.timeline.insert(TweenMax.from(this.graphic.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-200"
            }), .6), this.timeline.insert(TweenMax.to(this.tail3.material, 1, {
                opacity: 1
            })), this.timeline.insert(TweenMax.to(this.tail2.material, 1, {
                opacity: 1
            }), .2), this.timeline.insert(TweenMax.to(this.tail1.material, 1, {
                opacity: 1
            }), .4), this.timeline.insert(TweenMax.to(this.bubble.material, 1, {
                opacity: 1
            }), .6), this.timeline.insert(TweenMax.to(this.graphic.material, 1, {
                opacity: 1
            }), .8), this.timeline.insert(TweenMax.to(this.arrow.material, 1, {
                opacity: 1
            }), 1), this.transitionedIn = !0)
        }, k.onTransitionInComplete = function() {
            this.addEventListener("click", this.onClick), this.addEventListener("rollOver", this.onRollOver), this.addEventListener("rollOut", this.onRollOut)
        }, k.onRollOver = function() {
            this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.to(this.graphic.mesh.position, .25, {
                ease: Power2.easeOut,
                x: 100,
                z: 450
            })), this.timeline.insert(TweenMax.to(this.arrow.mesh.position, .25, {
                ease: Power2.easeOut,
                x: 280,
                z: 460
            })), this.timeline.insert(TweenMax.to(this.bubble.mesh.position, .25, {
                ease: Power2.easeOut,
                z: 300
            }), 0), this.timeline.insert(TweenMax.to(this.tail1.mesh.position, .33, {
                ease: Power2.easeOut,
                z: 250
            }), .1), this.timeline.insert(TweenMax.to(this.tail2.mesh.position, .7, {
                ease: Power2.easeOut,
                z: 175
            }), .2), this.timeline.insert(TweenMax.to(this.tail3.mesh.position, 1, {
                ease: Power2.easeOut,
                z: 125
            }), .3)
        }, k.onRollOut = function() {
            this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.to(this.graphic.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                x: 100,
                z: 350
            })), this.timeline.insert(TweenMax.to(this.arrow.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                x: 250,
                z: 360
            })), this.timeline.insert(TweenMax.to(this.bubble.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 250
            }), 0), this.timeline.insert(TweenMax.to(this.tail1.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 200
            }), .2), this.timeline.insert(TweenMax.to(this.tail2.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 150
            }), .4), this.timeline.insert(TweenMax.to(this.tail3.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 100
            }), .6)
        }, k.onClick = function() {}, k.disposeGL = function() {
            this.timeline && this.timeline.kill(), this.objectGL.remove(this.rootObject), this.removeEventListener("click", this.onClick), this.removeEventListener("rollOver", this.onRollOver), this.removeEventListener("rollOut", this.onRollOut), this.rootObject.remove(this.bubble), this.rootObject.remove(this.arrow), this.rootObject.remove(this.graphic), this.rootObject.remove(this.tail1), this.rootObject.remove(this.tail2), this.rootObject.remove(this.tail3), this.bubble.dispose(), this.arrow.dispose(), this.graphic.dispose(), this.tail1.dispose(), this.tail2.dispose(), this.tail3.dispose(), this.bubble = null, this.arrow = null, this.graphic = null, this.tail1 = null, this.tail2 = null, this.tail3 = null, this.rootObject = null, this.ComicObject_disposeGL()
        }, k.update = function() {
            if (this.ComicObject_update(), this.active) {
                this.time++;
                var a = Math.sin(.02 * (this.time + 0)),
                    b = Math.sin(.02 * (this.time + 50)),
                    c = Math.sin(.02 * (this.time + 100)),
                    d = Math.sin(.02 * (this.time + 150));
                this.bubble.mesh.position.x += .1 * a, this.bubble.mesh.position.y += .1 * d, this.tail1.mesh.position.x += .1 * b, this.tail1.mesh.position.y += .1 * c, this.tail2.mesh.position.x += .1 * c, this.tail2.mesh.position.y += .1 * b, this.tail3.mesh.position.x += .1 * d, this.tail3.mesh.position.y += .1 * a
            }
        }, b.promote(j, "ComicObject"), j
    }), define("theboat/blinebubbles/BubbleBackstory", ["underscore", "utils/inherit", "comic/ComicMetrics", "comic/display/ComicObject", "comic/display/Image", "theboat/FeverImage", "utils/Random", "utils/Color", "threejs", "threejsCSS"], function(a, b, c, d, e, f, g, h, i) {
        var j = function(b, c, d, e) {
                this.ComicObject_constructor(d, e), this.useGL = !0, this.useCSS = !1, this.interactive = !0, this.time = 0, a.bindAll(this, "onRollOver", "onRollOut", "onClick")
            },
            k = b.extend(j, d);
        return k.createCSS = function() {
            this.ComicObject_createCSS()
        }, k.createGL = function() {
            this.ComicObject_createGL(), this.transitionedIn = !1, this.rootObject = new i.Object3D, this.objectGL.add(this.rootObject), this.rootObject.position.x = 100, this.rootObject.position.y = -130, this.bubble = new e("images/b-line-backstory/bubble/bubble-alt.png", 565, 306, .6), this.bubble.mesh.position.x = 90, this.bubble.mesh.position.y = 30, this.bubble.mesh.position.z = 250, this.rootObject.add(this.bubble.mesh), this.loadQueue.add(this.bubble), this.arrow = new e("images/b-line-backstory/bubble/arrow.png", 194, 119, .6), this.arrow.mesh.position.x = 80, this.arrow.mesh.position.y = -70, this.arrow.mesh.position.z = 360, this.rootObject.add(this.arrow.mesh), this.loadQueue.add(this.arrow), this.graphic = new e("images/b-line-backstory/bubble/flee.png", 289, 445, .6), this.graphic.mesh.position.x = 170, this.graphic.mesh.position.y = -40, this.graphic.mesh.position.z = 350, this.rootObject.add(this.graphic.mesh), this.loadQueue.add(this.graphic), this.tail1 = new e("images/b-line-reeducation/bubble/bubble-tail-01.png", 47, 47, .6), this.tail1.mesh.position.x = 100, this.tail1.mesh.position.y = 135, this.tail1.mesh.position.z = 200, this.rootObject.add(this.tail1.mesh), this.loadQueue.add(this.tail1), this.tail2 = new e("images/b-line-reeducation/bubble/bubble-tail-02.png", 47, 47, .6), this.tail2.mesh.position.x = 160, this.tail2.mesh.position.y = 165, this.tail2.mesh.position.z = 150, this.rootObject.add(this.tail2.mesh), this.loadQueue.add(this.tail2), this.tail3 = new e("images/b-line-reeducation/bubble/bubble-tail-03.png", 47, 47, .6), this.tail3.mesh.position.x = 200, this.tail3.mesh.position.y = 180, this.tail3.mesh.position.z = 100, this.rootObject.add(this.tail3.mesh), this.loadQueue.add(this.tail3), this.tail3.material.opacity = this.tail2.material.opacity = this.tail1.material.opacity = this.bubble.material.opacity = this.graphic.material.opacity = this.arrow.material.opacity = 0
        }, k.load = function() {
            this.ComicObject_load(), this.objectGL.visible = !0
        }, k.draw = function() {
            this.ComicObject_draw()
        }, k.transitionIn = function() {
            this.transitionedIn || (this.timeline = new TimelineMax({
                onComplete: this.onTransitionInComplete,
                onCompleteScope: this
            }), this.timeline.insert(TweenMax.from(this.tail3.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-50"
            }), 0), this.timeline.insert(TweenMax.from(this.tail2.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-100"
            }), .2), this.timeline.insert(TweenMax.from(this.tail1.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-150"
            }), .4), this.timeline.insert(TweenMax.from(this.bubble.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-200"
            }), .6), this.timeline.insert(TweenMax.from(this.graphic.mesh.position, 2, {
                ease: Power4.easeOut,
                x: "-200"
            }), .6), this.timeline.insert(TweenMax.to(this.tail3.material, 1, {
                opacity: 1
            })), this.timeline.insert(TweenMax.to(this.tail2.material, 1, {
                opacity: 1
            }), .2), this.timeline.insert(TweenMax.to(this.tail1.material, 1, {
                opacity: 1
            }), .4), this.timeline.insert(TweenMax.to(this.bubble.material, 1, {
                opacity: 1
            }), .6), this.timeline.insert(TweenMax.to(this.graphic.material, 1, {
                opacity: 1
            }), .8), this.timeline.insert(TweenMax.to(this.arrow.material, 1, {
                opacity: 1
            }), 1), this.transitionedIn = !0)
        }, k.onTransitionInComplete = function() {
            this.addEventListener("click", this.onClick), this.addEventListener("rollOver", this.onRollOver), this.addEventListener("rollOut", this.onRollOut)
        }, k.onRollOver = function() {
            this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.to(this.graphic.mesh.position, .25, {
                ease: Power2.easeOut,
                x: 190,
                z: 450
            })), this.timeline.insert(TweenMax.to(this.arrow.mesh.position, .25, {
                ease: Power2.easeOut,
                x: 70,
                z: 460
            })), this.timeline.insert(TweenMax.to(this.bubble.mesh.position, .25, {
                ease: Power2.easeOut,
                z: 300
            }), 0), this.timeline.insert(TweenMax.to(this.tail1.mesh.position, .33, {
                ease: Power2.easeOut,
                z: 250
            }), .1), this.timeline.insert(TweenMax.to(this.tail2.mesh.position, .7, {
                ease: Power2.easeOut,
                z: 175
            }), .2), this.timeline.insert(TweenMax.to(this.tail3.mesh.position, 1, {
                ease: Power2.easeOut,
                z: 125
            }), .3)
        }, k.onRollOut = function() {
            this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.to(this.graphic.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                x: 170,
                z: 350
            })), this.timeline.insert(TweenMax.to(this.arrow.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                x: 30,
                z: 360
            })), this.timeline.insert(TweenMax.to(this.bubble.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 250
            }), 0), this.timeline.insert(TweenMax.to(this.tail1.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 200
            }), .2), this.timeline.insert(TweenMax.to(this.tail2.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 150
            }), .4), this.timeline.insert(TweenMax.to(this.tail3.mesh.position, 1.5, {
                ease: Power2.easeInOut,
                z: 100
            }), .6)
        }, k.onClick = function() {}, k.disposeGL = function() {
            this.timeline && this.timeline.kill(), this.objectGL.remove(this.rootObject), this.removeEventListener("click", this.onClick), this.removeEventListener("rollOver", this.onRollOver), this.removeEventListener("rollOut", this.onRollOut), this.rootObject.remove(this.bubble), this.rootObject.remove(this.arrow), this.rootObject.remove(this.graphic), this.rootObject.remove(this.tail1), this.rootObject.remove(this.tail2), this.rootObject.remove(this.tail3), this.bubble.dispose(), this.arrow.dispose(), this.graphic.dispose(), this.tail1.dispose(), this.tail2.dispose(), this.tail3.dispose(), this.bubble = null, this.arrow = null, this.graphic = null, this.tail1 = null, this.tail2 = null, this.tail3 = null, this.rootObject = null, this.ComicObject_disposeGL()
        }, k.update = function() {
            if (this.ComicObject_update(), this.active) {
                this.time++;
                var a = Math.sin(.02 * (this.time + 0)),
                    b = Math.sin(.02 * (this.time + 50)),
                    c = Math.sin(.02 * (this.time + 100)),
                    d = Math.sin(.02 * (this.time + 150));
                this.bubble.mesh.position.x += .1 * a, this.bubble.mesh.position.y += .1 * d, this.tail1.mesh.position.x += .1 * b, this.tail1.mesh.position.y += .1 * c, this.tail2.mesh.position.x += .1 * c, this.tail2.mesh.position.y += .1 * b, this.tail3.mesh.position.x += .1 * d, this.tail3.mesh.position.y += .1 * a
            }
        }, b.promote(j, "ComicObject"), j
    }), define("theboat/BackButton", ["underscore", "utils/inherit", "comic/ComicMetrics", "comic/display/ComicObject", "comic/display/Image", "utils/Random", "utils/Color", "threejs", "threejsCSS"], function(a, b, c, d, e, f, g, h) {
        var i = function(b, c, d, e) {
                this.ComicObject_constructor(d, e), this.useGL = !0, this.useCSS = !1, this.interactive = !0, this.inverted = b, this.orientation = c, this.primary = this.inverted ? 0 : 16777215, this.secondary = this.inverted ? 16777215 : 0, a.bindAll(this, "onRollOver", "onRollOut", "onClick")
            },
            j = b.extend(i, d);
        return j.createCSS = function() {
            this.ComicObject_createCSS()
        }, j.createGL = function() {
            this.ComicObject_createGL(), this.transitionedIn = !1, this.hitGeom = new h.PlaneBufferGeometry(200, 200), this.hitMaterial = new h.MeshBasicMaterial({
                color: 16711680,
                transparent: !0,
                opacity: 0
            }), this.hit = new h.Mesh(this.hitGeom, this.hitMaterial), this.hit.position.z = 250, this.objectGL.add(this.hit), this.rootObject = new h.Object3D, this.objectGL.add(this.rootObject), this.rootObject.rotation.x = f.between(-.25, .25), this.rootObject.rotation.y = f.between(-.25, .25), this.arrow = new e("images/ui/back/arrow.png", 126, 78, 1), this.arrow.mesh.position.z = 0, this.arrow.mesh.position.y = 0, this.arrow.mesh.rotation.z = "right" == this.orientation ? Math.PI : 0, this.rootObject.add(this.arrow.mesh), this.loadQueue.add(this.arrow), this.arrow.material.color.setHex(this.primary), this.bg1 = new e("images/ui/back/circle-01.png", 177, 177, 1), this.bg1.mesh.position.z = -25, this.bg1.mesh.position.y = 0, this.rootObject.add(this.bg1.mesh), this.loadQueue.add(this.bg1), this.bg1.material.color.setHex(this.secondary), this.bg2 = new e("images/ui/back/circle-02.png", 177, 177, .95), this.bg2.mesh.position.z = -50, this.bg2.mesh.position.y = 0, this.rootObject.add(this.bg2.mesh), this.loadQueue.add(this.bg2), this.bg2.material.color.setHex(this.primary)
        }, j.onLoadQueueComplete = function() {
            this.ComicObject_onLoadQueueComplete()
        }, j.load = function() {
            this.ComicObject_load(), this.objectGL.visible = !0
        }, j.draw = function() {
            this.ComicObject_draw()
        }, j.transitionIn = function() {
            this.transitionedIn || (this.addEventListener("click", this.onClick), this.addEventListener("rollOver", this.onRollOver), this.addEventListener("rollOut", this.onRollOut), this.transitionedIn = !0)
        }, j.onRollOver = function() {
            TweenMax.to(this.rootObject.rotation, .15, {
                ease: Power2.easeOut,
                x: 0,
                y: 0
            }), TweenMax.to(this.rootObject.position, .15, {
                ease: Power2.easeOut,
                z: 200
            }), this.bg1.material.color.setHex(this.primary), this.bg2.material.color.setHex(this.primary), this.arrow.material.color.setHex(this.secondary)
        }, j.onRollOut = function() {
            TweenMax.to(this.rootObject.rotation, .15, {
                ease: Power2.easeInOut,
                x: f.between(-.25, .25),
                y: f.between(-.25, .25)
            }), TweenMax.to(this.rootObject.position, .15, {
                ease: Power2.easeInOut,
                z: 0
            }), this.bg1.material.color.setHex(0), this.bg1.material.color.setHex(this.secondary), this.bg2.material.color.setHex(this.primary), this.arrow.material.color.setHex(this.primary)
        }, j.onClick = function() {
            var a = "right" == this.orientation ? 1 : -1;
            this.removeEventListener("click", this.onClick), this.removeEventListener("rollOver", this.onRollOver), this.removeEventListener("rollOut", this.onRollOut), TweenMax.to(this.rootObject.position, .33, {
                ease: Power2.easeInOut,
                x: 1400 * a
            })
        }, j.disposeGL = function() {
            this.timeline && this.timeline.kill(), this.rootObject.remove(this.bg1.mesh), this.rootObject.remove(this.bg2.mesh), this.rootObject.remove(this.arrow.mesh), this.objectGL.remove(this.rootObject), this.objectGL.remove(this.hit), this.hitGeom.dispose(), this.hitMaterial.dispose(), this.bg1.dispose(), this.bg2.dispose(), this.arrow.dispose(), this.hitGeom = null, this.hitMaterial = null, this.hit = null, this.rootObject = null, this.bg1 = null, this.bg2 = null, this.arrow = null
        }, j.update = function() {
            this.ComicObject_update(), this.active && (this.bg1.mesh.rotation.z += .025, this.bg2.mesh.rotation.z -= .033)
        }, b.promote(i, "ComicObject"), i
    }), define("theboat/SeaSickImageFrame", ["utils/inherit", "comic/ComicMetrics", "comic/display/ImageFrame", "utils/Random", "audio/Thump", "modernizr", "tweenMax"], function(a, b, c, d, e) {
        var f = function(a, b, c) {
                this.ImageFrame_constructor(a, b, c), this.time = d.between(0, 1e3)
            },
            g = a.extend(f, c);
        return f.audioIndex = 0, f.audioIds = ["crash01", "crash02", "crash03", "crash04"], g.createGL = function() {
            this.ImageFrame_createGL(), this.image.mesh.rotation.x = d.between(.1 * Math.PI, Math.PI * -.1), this.image.mesh.rotation.y = d.between(.1 * Math.PI, Math.PI * -.1)
        }, g.disposeGL = function() {
            this.timeline && (this.timeline.kill(), this.timeline = new TimelineMax), this.ImageFrame_disposeGL()
        }, g.update = function() {
            if (this.active) {
                var a = Math.sin(.02 * this.time),
                    b = Math.sin(.01 * this.time),
                    c = Math.sin(.035 * this.time);
                this.image.mesh.rotation.x += .01 * a * .015 * b, this.image.mesh.rotation.y += .03 * b * .04 * c, this.image.mesh.position.x += .75 * a * .85 * b, this.time++
            }
            this.ImageFrame_update()
        }, g.crash = function() {
            if ("ios" != Detectizr.os.name) {
                this.timeline && this.timeline.kill(), this.timeline = new TimelineMax;
                var a = RoughEase.ease.config({
                    strength: 3,
                    template: Quint.easeOut,
                    taper: "out"
                });
                this.timeline.add(TweenMax.to(this.image.mesh.rotation, .35, {
                    y: d.between(-.3, .3),
                    ease: a
                }), 0), this.timeline.add(TweenMax.to(this.image.mesh.rotation, .35, {
                    z: d.between(-.3, .3),
                    ease: a
                }), 0), this.timeline.add(TweenMax.to(this.image.mesh.position, .45, {
                    x: d.between(-400, 400),
                    ease: a
                }), 0), this.timeline.add(TweenMax.to(this.image.mesh.position, .45, {
                    y: d.between(-50, -100),
                    ease: a
                }), 0), this.timeline.add(TweenMax.to(this.image.mesh.position, .85, {
                    z: d.between(100, 300),
                    ease: Power4.easeOut
                }), 0);
                var b = f.audioIds[f.audioIndex],
                    c = e.get(b);
                if (f.audioIndex++, f.audioIndex >= f.audioIds.length && (f.audioIndex = 0), c.volume = .2, c.seek(0).play(), window.navigator.vibrate) {
                    for (var g = [], h = d.between(5, 8), i = 0; h > i; i++) {
                        var j = 1 - 1 / h * i;
                        g.push(i % 2 ? d.between(5, 10) * j : d.between(150, 200) * j)
                    }
                    window.navigator.vibrate(g)
                }
            }
        }, a.promote(f, "ImageFrame"), f
    }), define("theboat/GrindImageFrame", ["utils/inherit", "comic/ComicMetrics", "comic/display/ImageFrame", "utils/Random", "audio/Thump", "modernizr", "tweenMax"], function(a, b, c, d) {
        var e = function(a, b, c) {
                this.ImageFrame_constructor(a, b, c), e.allFrames = e.allFrames || [], e.allFrames.push(this)
            },
            f = a.extend(e, c);
        return e.grind = function() {
            for (var a = 0; a < e.allFrames.length; a++) {
                var b = e.allFrames[a];
                TweenMax.delayedCall(.1 * a, b.grind, null, b)
            }
        }, f.disposeGL = function() {
            this.ImageFrame_disposeGL(), this.timeline && (this.timeline.kill(), this.timeline = null, TweenMax.killDelayedCallsTo(this.grind))
        }, f.grind = function() {
            if (this.active && !this.hasGrinded) {
                this.hasGrinded = !0;
                var a = RoughEase.ease.config({
                    strength: 3,
                    template: Quint.easeInOut,
                    taper: "out"
                });
                if (this.timeline || (this.timeline = new TimelineMax), this.timeline.add(TweenMax.to(this.image.mesh.rotation, .35, {
                        y: d.between(-.3, .3),
                        ease: a
                    }), 0), this.timeline.add(TweenMax.to(this.image.mesh.rotation, 1.35, {
                        z: d.between(-.3, .3),
                        ease: a
                    }), 0), this.timeline.add(TweenMax.to(this.image.mesh.position, .45, {
                        x: d.between(-30, 30),
                        ease: a
                    }), 0), this.timeline.add(TweenMax.to(this.image.mesh.position, 1.45, {
                        y: d.between(-30, 30),
                        ease: a
                    }), 0), this.timeline.add(TweenMax.to(this.image.mesh.position, 2.85, {
                        z: d.between(20, -20),
                        ease: Power4.easeOut
                    }), 0), window.navigator.vibrate) {
                    for (var b = [], c = d.between(5, 8), e = 0; c > e; e++) {
                        var f = 1 - 1 / c * e;
                        b.push(e % 2 ? d.between(5, 10) * f : d.between(150, 200) * f);

                    }
                    window.navigator.vibrate(b)
                }
            }
        }, a.promote(e, "ImageFrame"), e
    }), define("theboat/FeverImageFrame", ["utils/inherit", "comic/ComicMetrics", "comic/display/ImageFrame", "utils/Random", "audio/Thump", "theboat/FeverImage", "modernizr", "tweenMax"], function(a, b, c, d, e, f) {
        var g = function(a, b, c) {
                this.ImageFrame_constructor(a, b, c), this.time = d.between(0, 1e3)
            },
            h = a.extend(g, c);
        return h.createGL = function() {
            this.Frame_createGL(), this.xt = .03 * Math.random(), this.xd = .005 * Math.random(), this.yt = .03 * Math.random(), this.yd = .005 * Math.random(), this.image = new f(this.imgURL, this.width, this.height), this.loadQueue.add(this.image), this.objectGL.add(this.image.mesh), this.image.mesh.rotation.x = d.between(.1 * Math.PI, Math.PI * -.1), this.image.mesh.rotation.y = d.between(.1 * Math.PI, Math.PI * -.1)
        }, h.load = function() {
            this.Frame_load(), this.objectGL.visible = !0, this.image.mesh.visible = !1
        }, h.onLoadQueueComplete = function() {
            this.Frame_onLoadQueueComplete(), this.image.mesh.visible = !0
        }, h.update = function() {
            if (this.active) {
                this.ImageFrame_update();
                var a = Math.sin(.02 * this.time),
                    b = Math.sin(.01 * this.time),
                    c = Math.sin(.035 * this.time);
                this.image.mesh.rotation.x += .01 * a * .015 * b, this.image.mesh.rotation.y += .03 * b * .04 * c, this.image.mesh.position.x += .75 * a * .85 * b, this.image.update(), this.time++
            }
        }, a.promote(g, "ImageFrame"), g
    }), define("theboat/SeaSickText", ["underscore", "utils/inherit", "comic/display/BasicText", "utils/Random", "splitText"], function(a, b, c, d) {
        var e = function(a, b, c) {
            this.BasicText_constructor(a, b, c)
        };
        e.defaultTrigger = {
            atScreenPosition: .9,
            call: "transitionIn"
        };
        var f = b.extend(e, c);
        return f.createCSS = function() {
            this.BasicText_createCSS(), this.splitText = new SplitText(this.div.getElementsByTagName("p")[0], {
                type: "lines"
            });
            for (var a = 0; a < this.splitText.lines.length; a++) {
                var b = this.splitText.lines[a];
                TweenMax.set(b, {
                    z: .1
                })
            }
            this.ease = RoughEase.ease.config({
                strength: 3,
                template: Quint.easeOut,
                taper: "out"
            })
        }, f.createGL = function() {
            this.BasicText_createGL()
        }, f.disposeCSS = function() {
            this.splitText.revert(), this.splitText = null, this.timeline && (this.timeline.kill(), this.timeline = null), this.BasicText_disposeCSS()
        }, f.draw = function() {
            this.BasicText_draw()
        }, f.crash = function() {
            if ("ios" != Detectizr.os.name) {
                this.timeline && this.timeline.kill(), this.timeline = new TimelineMax;
                for (var a = 0; a < this.splitText.lines.length; a++) {
                    var b = this.splitText.lines[a],
                        c = d.between(1.5, 2.5);
                    this.timeline.add(TweenMax.to(b, .45, {
                        x: d.between(-5, 5),
                        y: d.between(-30, -50),
                        z: d.between(-35, 35),
                        rotation: d.between(-10, 10),
                        scale: c,
                        ease: this.ease
                    }), 0), this.timeline.add(TweenMax.to(b, 3, {
                        scale: 1.25,
                        ease: Power2.easeInOut
                    }), 1)
                }
            }
        }, b.promote(e, "BasicText"), e
    }), define("theboat/ActionImageFrame", ["utils/inherit", "comic/ComicMetrics", "comic/display/ImageFrame", "utils/Random", "audio/Thump", "modernizr", "tweenMax"], function(a, b, c, d) {
        var e = function(a, b, c) {
                this.ImageFrame_constructor(a, b, c)
            },
            f = a.extend(e, c);
        return f.createGL = function() {
            this.ImageFrame_createGL(), this.hasTransitionedIn || (this.image.material.opacity = 0)
        }, f.update = function() {
            this.active && this.ImageFrame_update()
        }, f.transitionIn = function(a) {
            if (!this.hasTransitionedIn) {
                var b = "left" == a ? 1 : -1;
                this.image.material.opacity = 1, this.timeline = new TimelineMax, this.timeline.insert(TweenMax.from(this.image.mesh.position, .55, {
                    ease: Power4.easeOut,
                    y: 500,
                    x: 1e3 * b
                })), this.timeline.insert(TweenMax.from(this.image.mesh.position, .75, {
                    ease: Power4.easeOut,
                    z: 2e3
                })), this.timeline.insert(TweenMax.from(this.image.mesh.rotation, 1, {
                    ease: Power4.easeOut,
                    x: d.between(-1.5, 1.5),
                    y: d.between(-.5, .5),
                    z: d.between(-.3, .3)
                })), this.hasTransitionedIn = !0
            }
        }, a.promote(e, "ImageFrame"), e
    }), (window._gsQueue || (window._gsQueue = [])).push(function() {
        "use strict";
        window._gsDefine("TimelineMax", ["TimelineLite", "TweenLite", "easing.Ease"], function(a, b, c) {
            var d = function(b) {
                    a.call(this, b), this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._cycle = 0, this._yoyo = this.vars.yoyo === !0, this._dirty = !0
                },
                e = 1e-10,
                f = [],
                g = new c(null, null, 1, 0),
                h = d.prototype = new a;
            return h.constructor = d, h.kill()._gc = !1, d.version = "1.12.1", h.invalidate = function() {
                return this._yoyo = this.vars.yoyo === !0, this._repeat = this.vars.repeat || 0, this._repeatDelay = this.vars.repeatDelay || 0, this._uncache(!0), a.prototype.invalidate.call(this)
            }, h.addCallback = function(a, c, d, e) {
                return this.add(b.delayedCall(0, a, d, e), c)
            }, h.removeCallback = function(a, b) {
                if (a)
                    if (null == b) this._kill(null, a);
                    else
                        for (var c = this.getTweensOf(a, !1), d = c.length, e = this._parseTimeOrLabel(b); --d > -1;) c[d]._startTime === e && c[d]._enabled(!1, !1);
                return this
            }, h.tweenTo = function(a, c) {
                c = c || {};
                var d, e, h, i = {
                    ease: g,
                    overwrite: c.delay ? 2 : 1,
                    useFrames: this.usesFrames(),
                    immediateRender: !1
                };
                for (e in c) i[e] = c[e];
                return i.time = this._parseTimeOrLabel(a), d = Math.abs(Number(i.time) - this._time) / this._timeScale || .001, h = new b(this, d, i), i.onStart = function() {
                    h.target.paused(!0), h.vars.time !== h.target.time() && d === h.duration() && h.duration(Math.abs(h.vars.time - h.target.time()) / h.target._timeScale), c.onStart && c.onStart.apply(c.onStartScope || h, c.onStartParams || f)
                }, h
            }, h.tweenFromTo = function(a, b, c) {
                c = c || {}, a = this._parseTimeOrLabel(a), c.startAt = {
                    onComplete: this.seek,
                    onCompleteParams: [a],
                    onCompleteScope: this
                }, c.immediateRender = c.immediateRender !== !1;
                var d = this.tweenTo(b, c);
                return d.duration(Math.abs(d.vars.time - a) / this._timeScale || .001)
            }, h.render = function(a, b, c) {
                this._gc && this._enabled(!0, !1);
                var d, g, h, i, j, k, l = this._dirty ? this.totalDuration() : this._totalDuration,
                    m = this._duration,
                    n = this._time,
                    o = this._totalTime,
                    p = this._startTime,
                    q = this._timeScale,
                    r = this._rawPrevTime,
                    s = this._paused,
                    t = this._cycle;
                if (a >= l ? (this._locked || (this._totalTime = l, this._cycle = this._repeat), this._reversed || this._hasPausedChild() || (g = !0, i = "onComplete", 0 === this._duration && (0 === a || 0 > r || r === e) && r !== a && this._first && (j = !0, r > e && (i = "onReverseComplete"))), this._rawPrevTime = this._duration || !b || a || this._rawPrevTime === a ? a : e, this._yoyo && 0 !== (1 & this._cycle) ? this._time = a = 0 : (this._time = m, a = m + 1e-4)) : 1e-7 > a ? (this._locked || (this._totalTime = this._cycle = 0), this._time = 0, (0 !== n || 0 === m && r !== e && (r > 0 || 0 > a && r >= 0) && !this._locked) && (i = "onReverseComplete", g = this._reversed), 0 > a ? (this._active = !1, 0 === m && r >= 0 && this._first && (j = !0), this._rawPrevTime = a) : (this._rawPrevTime = m || !b || a || this._rawPrevTime === a ? a : e, a = 0, this._initted || (j = !0))) : (0 === m && 0 > r && (j = !0), this._time = this._rawPrevTime = a, this._locked || (this._totalTime = a, 0 !== this._repeat && (k = m + this._repeatDelay, this._cycle = this._totalTime / k >> 0, 0 !== this._cycle && this._cycle === this._totalTime / k && this._cycle--, this._time = this._totalTime - this._cycle * k, this._yoyo && 0 !== (1 & this._cycle) && (this._time = m - this._time), this._time > m ? (this._time = m, a = m + 1e-4) : this._time < 0 ? this._time = a = 0 : a = this._time))), this._cycle !== t && !this._locked) {
                    var u = this._yoyo && 0 !== (1 & t),
                        v = u === (this._yoyo && 0 !== (1 & this._cycle)),
                        w = this._totalTime,
                        x = this._cycle,
                        y = this._rawPrevTime,
                        z = this._time;
                    if (this._totalTime = t * m, this._cycle < t ? u = !u : this._totalTime += m, this._time = n, this._rawPrevTime = 0 === m ? r - 1e-4 : r, this._cycle = t, this._locked = !0, n = u ? 0 : m, this.render(n, b, 0 === m), b || this._gc || this.vars.onRepeat && this.vars.onRepeat.apply(this.vars.onRepeatScope || this, this.vars.onRepeatParams || f), v && (n = u ? m + 1e-4 : -1e-4, this.render(n, !0, !1)), this._locked = !1, this._paused && !s) return;
                    this._time = z, this._totalTime = w, this._cycle = x, this._rawPrevTime = y
                }
                if (!(this._time !== n && this._first || c || j)) return void(o !== this._totalTime && this._onUpdate && (b || this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || f)));
                if (this._initted || (this._initted = !0), this._active || !this._paused && this._totalTime !== o && a > 0 && (this._active = !0), 0 === o && this.vars.onStart && 0 !== this._totalTime && (b || this.vars.onStart.apply(this.vars.onStartScope || this, this.vars.onStartParams || f)), this._time >= n)
                    for (d = this._first; d && (h = d._next, !this._paused || s);)(d._active || d._startTime <= this._time && !d._paused && !d._gc) && (d._reversed ? d.render((d._dirty ? d.totalDuration() : d._totalDuration) - (a - d._startTime) * d._timeScale, b, c) : d.render((a - d._startTime) * d._timeScale, b, c)), d = h;
                else
                    for (d = this._last; d && (h = d._prev, !this._paused || s);)(d._active || d._startTime <= n && !d._paused && !d._gc) && (d._reversed ? d.render((d._dirty ? d.totalDuration() : d._totalDuration) - (a - d._startTime) * d._timeScale, b, c) : d.render((a - d._startTime) * d._timeScale, b, c)), d = h;
                this._onUpdate && (b || this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || f)), i && (this._locked || this._gc || (p === this._startTime || q !== this._timeScale) && (0 === this._time || l >= this.totalDuration()) && (g && (this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !b && this.vars[i] && this.vars[i].apply(this.vars[i + "Scope"] || this, this.vars[i + "Params"] || f)))
            }, h.getActive = function(a, b, c) {
                null == a && (a = !0), null == b && (b = !0), null == c && (c = !1);
                var d, e, f = [],
                    g = this.getChildren(a, b, c),
                    h = 0,
                    i = g.length;
                for (d = 0; i > d; d++) e = g[d], e.isActive() && (f[h++] = e);
                return f
            }, h.getLabelAfter = function(a) {
                a || 0 !== a && (a = this._time);
                var b, c = this.getLabelsArray(),
                    d = c.length;
                for (b = 0; d > b; b++)
                    if (c[b].time > a) return c[b].name;
                return null
            }, h.getLabelBefore = function(a) {
                null == a && (a = this._time);
                for (var b = this.getLabelsArray(), c = b.length; --c > -1;)
                    if (b[c].time < a) return b[c].name;
                return null
            }, h.getLabelsArray = function() {
                var a, b = [],
                    c = 0;
                for (a in this._labels) b[c++] = {
                    time: this._labels[a],
                    name: a
                };
                return b.sort(function(a, b) {
                    return a.time - b.time
                }), b
            }, h.progress = function(a) {
                return arguments.length ? this.totalTime(this.duration() * (this._yoyo && 0 !== (1 & this._cycle) ? 1 - a : a) + this._cycle * (this._duration + this._repeatDelay), !1) : this._time / this.duration()
            }, h.totalProgress = function(a) {
                return arguments.length ? this.totalTime(this.totalDuration() * a, !1) : this._totalTime / this.totalDuration()
            }, h.totalDuration = function(b) {
                return arguments.length ? -1 === this._repeat ? this : this.duration((b - this._repeat * this._repeatDelay) / (this._repeat + 1)) : (this._dirty && (a.prototype.totalDuration.call(this), this._totalDuration = -1 === this._repeat ? 999999999999 : this._duration * (this._repeat + 1) + this._repeatDelay * this._repeat), this._totalDuration)
            }, h.time = function(a, b) {
                return arguments.length ? (this._dirty && this.totalDuration(), a > this._duration && (a = this._duration), this._yoyo && 0 !== (1 & this._cycle) ? a = this._duration - a + this._cycle * (this._duration + this._repeatDelay) : 0 !== this._repeat && (a += this._cycle * (this._duration + this._repeatDelay)), this.totalTime(a, b)) : this._time
            }, h.repeat = function(a) {
                return arguments.length ? (this._repeat = a, this._uncache(!0)) : this._repeat
            }, h.repeatDelay = function(a) {
                return arguments.length ? (this._repeatDelay = a, this._uncache(!0)) : this._repeatDelay
            }, h.yoyo = function(a) {
                return arguments.length ? (this._yoyo = a, this) : this._yoyo
            }, h.currentLabel = function(a) {
                return arguments.length ? this.seek(a, !0) : this.getLabelBefore(this._time + 1e-8)
            }, d
        }, !0), window._gsDefine("TimelineLite", ["core.Animation", "core.SimpleTimeline", "TweenLite"], function(a, b, c) {
            var d = function(a) {
                    b.call(this, a), this._labels = {}, this.autoRemoveChildren = this.vars.autoRemoveChildren === !0, this.smoothChildTiming = this.vars.smoothChildTiming === !0, this._sortChildren = !0, this._onUpdate = this.vars.onUpdate;
                    var c, d, e = this.vars;
                    for (d in e) c = e[d], g(c) && -1 !== c.join("").indexOf("{self}") && (e[d] = this._swapSelfInParams(c));
                    g(e.tweens) && this.add(e.tweens, 0, e.align, e.stagger)
                },
                e = 1e-10,
                f = c._internals.isSelector,
                g = c._internals.isArray,
                h = [],
                i = window._gsDefine.globals,
                j = function(a) {
                    var b, c = {};
                    for (b in a) c[b] = a[b];
                    return c
                },
                k = function(a, b, c, d) {
                    a._timeline.pause(a._startTime), b && b.apply(d || a._timeline, c || h)
                },
                l = h.slice,
                m = d.prototype = new b;
            return d.version = "1.12.1", m.constructor = d, m.kill()._gc = !1, m.to = function(a, b, d, e) {
                var f = d.repeat && i.TweenMax || c;
                return b ? this.add(new f(a, b, d), e) : this.set(a, d, e)
            }, m.from = function(a, b, d, e) {
                return this.add((d.repeat && i.TweenMax || c).from(a, b, d), e)
            }, m.fromTo = function(a, b, d, e, f) {
                var g = e.repeat && i.TweenMax || c;
                return b ? this.add(g.fromTo(a, b, d, e), f) : this.set(a, e, f)
            }, m.staggerTo = function(a, b, e, g, h, i, k, m) {
                var n, o = new d({
                    onComplete: i,
                    onCompleteParams: k,
                    onCompleteScope: m,
                    smoothChildTiming: this.smoothChildTiming
                });
                for ("string" == typeof a && (a = c.selector(a) || a), f(a) && (a = l.call(a, 0)), g = g || 0, n = 0; n < a.length; n++) e.startAt && (e.startAt = j(e.startAt)), o.to(a[n], b, j(e), n * g);
                return this.add(o, h)
            }, m.staggerFrom = function(a, b, c, d, e, f, g, h) {
                return c.immediateRender = 0 != c.immediateRender, c.runBackwards = !0, this.staggerTo(a, b, c, d, e, f, g, h)
            }, m.staggerFromTo = function(a, b, c, d, e, f, g, h, i) {
                return d.startAt = c, d.immediateRender = 0 != d.immediateRender && 0 != c.immediateRender, this.staggerTo(a, b, d, e, f, g, h, i)
            }, m.call = function(a, b, d, e) {
                return this.add(c.delayedCall(0, a, b, d), e)
            }, m.set = function(a, b, d) {
                return d = this._parseTimeOrLabel(d, 0, !0), null == b.immediateRender && (b.immediateRender = d === this._time && !this._paused), this.add(new c(a, 0, b), d)
            }, d.exportRoot = function(a, b) {
                a = a || {}, null == a.smoothChildTiming && (a.smoothChildTiming = !0);
                var e, f, g = new d(a),
                    h = g._timeline;
                for (null == b && (b = !0), h._remove(g, !0), g._startTime = 0, g._rawPrevTime = g._time = g._totalTime = h._time, e = h._first; e;) f = e._next, b && e instanceof c && e.target === e.vars.onComplete || g.add(e, e._startTime - e._delay), e = f;
                return h.add(g, 0), g
            }, m.add = function(e, f, h, i) {
                var j, k, l, m, n, o;
                if ("number" != typeof f && (f = this._parseTimeOrLabel(f, 0, !0, e)), !(e instanceof a)) {
                    if (e instanceof Array || e && e.push && g(e)) {
                        for (h = h || "normal", i = i || 0, j = f, k = e.length, l = 0; k > l; l++) g(m = e[l]) && (m = new d({
                            tweens: m
                        })), this.add(m, j), "string" != typeof m && "function" != typeof m && ("sequence" === h ? j = m._startTime + m.totalDuration() / m._timeScale : "start" === h && (m._startTime -= m.delay())), j += i;
                        return this._uncache(!0)
                    }
                    if ("string" == typeof e) return this.addLabel(e, f);
                    if ("function" != typeof e) throw "Cannot add " + e + " into the timeline; it is not a tween, timeline, function, or string.";
                    e = c.delayedCall(0, e)
                }
                if (b.prototype.add.call(this, e, f), (this._gc || this._time === this._duration) && !this._paused && this._duration < this.duration())
                    for (n = this, o = n.rawTime() > e._startTime; n._timeline;) o && n._timeline.smoothChildTiming ? n.totalTime(n._totalTime, !0) : n._gc && n._enabled(!0, !1), n = n._timeline;
                return this
            }, m.remove = function(b) {
                if (b instanceof a) return this._remove(b, !1);
                if (b instanceof Array || b && b.push && g(b)) {
                    for (var c = b.length; --c > -1;) this.remove(b[c]);
                    return this
                }
                return "string" == typeof b ? this.removeLabel(b) : this.kill(null, b)
            }, m._remove = function(a, c) {
                b.prototype._remove.call(this, a, c);
                var d = this._last;
                return d ? this._time > d._startTime + d._totalDuration / d._timeScale && (this._time = this.duration(), this._totalTime = this._totalDuration) : this._time = this._totalTime = this._duration = this._totalDuration = 0, this
            }, m.append = function(a, b) {
                return this.add(a, this._parseTimeOrLabel(null, b, !0, a))
            }, m.insert = m.insertMultiple = function(a, b, c, d) {
                return this.add(a, b || 0, c, d)
            }, m.appendMultiple = function(a, b, c, d) {
                return this.add(a, this._parseTimeOrLabel(null, b, !0, a), c, d)
            }, m.addLabel = function(a, b) {
                return this._labels[a] = this._parseTimeOrLabel(b), this
            }, m.addPause = function(a, b, c, d) {
                return this.call(k, ["{self}", b, c, d], this, a)
            }, m.removeLabel = function(a) {
                return delete this._labels[a], this
            }, m.getLabelTime = function(a) {
                return null != this._labels[a] ? this._labels[a] : -1
            }, m._parseTimeOrLabel = function(b, c, d, e) {
                var f;
                if (e instanceof a && e.timeline === this) this.remove(e);
                else if (e && (e instanceof Array || e.push && g(e)))
                    for (f = e.length; --f > -1;) e[f] instanceof a && e[f].timeline === this && this.remove(e[f]);
                if ("string" == typeof c) return this._parseTimeOrLabel(c, d && "number" == typeof b && null == this._labels[c] ? b - this.duration() : 0, d);
                if (c = c || 0, "string" != typeof b || !isNaN(b) && null == this._labels[b]) null == b && (b = this.duration());
                else {
                    if (f = b.indexOf("="), -1 === f) return null == this._labels[b] ? d ? this._labels[b] = this.duration() + c : c : this._labels[b] + c;
                    c = parseInt(b.charAt(f - 1) + "1", 10) * Number(b.substr(f + 1)), b = f > 1 ? this._parseTimeOrLabel(b.substr(0, f - 1), 0, d) : this.duration()
                }
                return Number(b) + c
            }, m.seek = function(a, b) {
                return this.totalTime("number" == typeof a ? a : this._parseTimeOrLabel(a), b !== !1)
            }, m.stop = function() {
                return this.paused(!0)
            }, m.gotoAndPlay = function(a, b) {
                return this.play(a, b)
            }, m.gotoAndStop = function(a, b) {
                return this.pause(a, b)
            }, m.render = function(a, b, c) {
                this._gc && this._enabled(!0, !1);
                var d, f, g, i, j, k = this._dirty ? this.totalDuration() : this._totalDuration,
                    l = this._time,
                    m = this._startTime,
                    n = this._timeScale,
                    o = this._paused;
                if (a >= k ? (this._totalTime = this._time = k, this._reversed || this._hasPausedChild() || (f = !0, i = "onComplete", 0 === this._duration && (0 === a || this._rawPrevTime < 0 || this._rawPrevTime === e) && this._rawPrevTime !== a && this._first && (j = !0, this._rawPrevTime > e && (i = "onReverseComplete"))), this._rawPrevTime = this._duration || !b || a || this._rawPrevTime === a ? a : e, a = k + 1e-4) : 1e-7 > a ? (this._totalTime = this._time = 0, (0 !== l || 0 === this._duration && this._rawPrevTime !== e && (this._rawPrevTime > 0 || 0 > a && this._rawPrevTime >= 0)) && (i = "onReverseComplete", f = this._reversed), 0 > a ? (this._active = !1, 0 === this._duration && this._rawPrevTime >= 0 && this._first && (j = !0), this._rawPrevTime = a) : (this._rawPrevTime = this._duration || !b || a || this._rawPrevTime === a ? a : e, a = 0, this._initted || (j = !0))) : this._totalTime = this._time = this._rawPrevTime = a, this._time !== l && this._first || c || j) {
                    if (this._initted || (this._initted = !0), this._active || !this._paused && this._time !== l && a > 0 && (this._active = !0), 0 === l && this.vars.onStart && 0 !== this._time && (b || this.vars.onStart.apply(this.vars.onStartScope || this, this.vars.onStartParams || h)), this._time >= l)
                        for (d = this._first; d && (g = d._next, !this._paused || o);)(d._active || d._startTime <= this._time && !d._paused && !d._gc) && (d._reversed ? d.render((d._dirty ? d.totalDuration() : d._totalDuration) - (a - d._startTime) * d._timeScale, b, c) : d.render((a - d._startTime) * d._timeScale, b, c)), d = g;
                    else
                        for (d = this._last; d && (g = d._prev, !this._paused || o);)(d._active || d._startTime <= l && !d._paused && !d._gc) && (d._reversed ? d.render((d._dirty ? d.totalDuration() : d._totalDuration) - (a - d._startTime) * d._timeScale, b, c) : d.render((a - d._startTime) * d._timeScale, b, c)), d = g;
                    this._onUpdate && (b || this._onUpdate.apply(this.vars.onUpdateScope || this, this.vars.onUpdateParams || h)), i && (this._gc || (m === this._startTime || n !== this._timeScale) && (0 === this._time || k >= this.totalDuration()) && (f && (this._timeline.autoRemoveChildren && this._enabled(!1, !1), this._active = !1), !b && this.vars[i] && this.vars[i].apply(this.vars[i + "Scope"] || this, this.vars[i + "Params"] || h)))
                }
            }, m._hasPausedChild = function() {
                for (var a = this._first; a;) {
                    if (a._paused || a instanceof d && a._hasPausedChild()) return !0;
                    a = a._next
                }
                return !1
            }, m.getChildren = function(a, b, d, e) {
                e = e || -9999999999;
                for (var f = [], g = this._first, h = 0; g;) g._startTime < e || (g instanceof c ? b !== !1 && (f[h++] = g) : (d !== !1 && (f[h++] = g), a !== !1 && (f = f.concat(g.getChildren(!0, b, d)), h = f.length))), g = g._next;
                return f
            }, m.getTweensOf = function(a, b) {
                var d, e, f = this._gc,
                    g = [],
                    h = 0;
                for (f && this._enabled(!0, !0), d = c.getTweensOf(a), e = d.length; --e > -1;)(d[e].timeline === this || b && this._contains(d[e])) && (g[h++] = d[e]);
                return f && this._enabled(!1, !0), g
            }, m._contains = function(a) {
                for (var b = a.timeline; b;) {
                    if (b === this) return !0;
                    b = b.timeline
                }
                return !1
            }, m.shiftChildren = function(a, b, c) {
                c = c || 0;
                for (var d, e = this._first, f = this._labels; e;) e._startTime >= c && (e._startTime += a), e = e._next;
                if (b)
                    for (d in f) f[d] >= c && (f[d] += a);
                return this._uncache(!0)
            }, m._kill = function(a, b) {
                if (!a && !b) return this._enabled(!1, !1);
                for (var c = b ? this.getTweensOf(b) : this.getChildren(!0, !0, !1), d = c.length, e = !1; --d > -1;) c[d]._kill(a, b) && (e = !0);
                return e
            }, m.clear = function(a) {
                var b = this.getChildren(!1, !0, !0),
                    c = b.length;
                for (this._time = this._totalTime = 0; --c > -1;) b[c]._enabled(!1, !1);
                return a !== !1 && (this._labels = {}), this._uncache(!0)
            }, m.invalidate = function() {
                for (var a = this._first; a;) a.invalidate(), a = a._next;
                return this
            }, m._enabled = function(a, c) {
                if (a === this._gc)
                    for (var d = this._first; d;) d._enabled(a, !0), d = d._next;
                return b.prototype._enabled.call(this, a, c)
            }, m.duration = function(a) {
                return arguments.length ? (0 !== this.duration() && 0 !== a && this.timeScale(this._duration / a), this) : (this._dirty && this.totalDuration(), this._duration)
            }, m.totalDuration = function(a) {
                if (!arguments.length) {
                    if (this._dirty) {
                        for (var b, c, d = 0, e = this._last, f = 999999999999; e;) b = e._prev, e._dirty && e.totalDuration(), e._startTime > f && this._sortChildren && !e._paused ? this.add(e, e._startTime - e._delay) : f = e._startTime, e._startTime < 0 && !e._paused && (d -= e._startTime, this._timeline.smoothChildTiming && (this._startTime += e._startTime / this._timeScale), this.shiftChildren(-e._startTime, !1, -9999999999), f = 0), c = e._startTime + e._totalDuration / e._timeScale, c > d && (d = c), e = b;
                        this._duration = this._totalDuration = d, this._dirty = !1
                    }
                    return this._totalDuration
                }
                return 0 !== this.totalDuration() && 0 !== a && this.timeScale(this._totalDuration / a), this
            }, m.usesFrames = function() {
                for (var b = this._timeline; b._timeline;) b = b._timeline;
                return b === a._rootFramesTimeline
            }, m.rawTime = function() {
                return this._paused ? this._totalTime : (this._timeline.rawTime() - this._startTime) * this._timeScale
            }, d
        }, !0)
    }), window._gsDefine && window._gsQueue.pop()(), define("timelineMax", ["tweenMax"], function(a) {
        return function() {
            var b;
            return b || a.TimelineMax
        }
    }(this)), define("theboat/ChapterHeading", ["utils/inherit", "threejs", "comic/ComicMetrics", "comic/display/Image", "comic/display/FadeImage", "comic/display/Splash", "utils/Random", "timelineMax", "tweenMax"], function(a, b, c, d, e, f) {
        var g = function(a) {
            this.Splash_constructor(), this.chapterNum = a
        };
        g.lookup = [{
            chapterImage: {
                url: "images/chapter-headings/chapter-1.png",
                width: 391,
                height: 70
            },
            titleImage: {
                url: "images/chapter-headings/chapter-1-title.png",
                width: 530,
                height: 90
            }
        }, {
            chapterImage: {
                url: "images/chapter-headings/chapter-2.png",
                width: 404,
                height: 57
            },
            titleImage: {
                url: "images/chapter-headings/chapter-2-title.png",
                width: 564,
                height: 88
            }
        }, {
            chapterImage: {
                url: "images/chapter-headings/chapter-3.png",
                width: 395,
                height: 62
            },
            titleImage: {
                url: "images/chapter-headings/chapter-3-title.png",
                width: 863,
                height: 99
            }
        }, {
            chapterImage: {
                url: "images/chapter-headings/chapter-4.png",
                width: 407,
                height: 48
            },
            titleImage: {
                url: "images/chapter-headings/chapter-4-title.png",
                width: 919,
                height: 105
            }
        }, {
            chapterImage: {
                url: "images/chapter-headings/chapter-5.png",
                width: 391,
                height: 51
            },
            titleImage: {
                url: "images/chapter-headings/chapter-5-title.png",
                width: 470,
                height: 112
            }
        }, {
            chapterImage: {
                url: "images/chapter-headings/chapter-6.png",
                width: 417,
                height: 63
            },
            titleImage: {
                url: "images/chapter-headings/chapter-6-title.png",
                width: 718,
                height: 128
            }
        }];
        var h = a.extend(g, f);
        return h.createCSS = function() {
            this.Splash_createCSS()
        }, h.createGL = function() {
            this.Splash_createGL(), this.rootObject = new b.Object3D, this.lookupItem = g.lookup[this.chapterNum], this.chapterImage = new d(this.lookupItem.chapterImage.url, this.lookupItem.chapterImage.width, this.lookupItem.chapterImage.height, .4), this.rootObject.add(this.chapterImage.mesh), this.loadQueue.add(this.chapterImage), this.titleImage = new d(this.lookupItem.titleImage.url, this.lookupItem.titleImage.width, this.lookupItem.titleImage.height, 1), this.rootObject.add(this.titleImage.mesh), this.loadQueue.add(this.titleImage), this.chapterImage.material.opacity = 0, this.titleImage.material.opacity = 0, this.chapterImage.mesh.position.y = 50, this.titleImage.mesh.position.y = -50, this.chapterImage.mesh.position.z = 600, this.titleImage.mesh.position.z = 600, this.hasTransitionedIn && (TweenMax.set(this.chapterImage.mesh.position, {
                z: 0
            }), TweenMax.set(this.chapterImage.material, {
                opacity: 1
            }), TweenMax.set(this.titleImage.mesh.position, {
                z: 0
            }), TweenMax.set(this.titleImage.material, {
                opacity: 1
            })), this.objectGL.add(this.rootObject)
        }, h.transitionIn = function() {
            this.active && (this.hasTransitionedIn = !0, this.timeline = new TimelineMax, this.timeline.add(TweenMax.to(this.chapterImage.mesh.position, 3.5, {
                ease: Power4.easeOut,
                z: 0
            }), 0), this.timeline.add(TweenMax.to(this.titleImage.mesh.position, 3.5, {
                ease: Power4.easeOut,
                z: 0
            }), .25), this.timeline.add(TweenMax.to(this.chapterImage.material, .25, {
                ease: Power2.easeOut,
                opacity: 1
            }), 0), this.timeline.add(TweenMax.to(this.titleImage.material, .25, {
                ease: Power2.easeOut,
                opacity: 1
            }), .25))
        }, h.update = function() {}, h.disposeGL = function() {
            this.timeline && (this.timeline.kill(), this.timeline = null), this.rootObject.remove(this.chapterImage.mesh), this.rootObject.remove(this.titleImage.mesh), this.chapterImage.dispose(), this.titleImage.dispose(), this.chapterImage = null, this.titleImage = null, this.Splash_disposeGL()
        }, a.promote(g, "Splash"), g
    }), define("theboat/fx/SeaSick", ["utils/Random"], function() {
        var a = function() {},
            b = a.prototype;
        return b.init = function(a) {
            this.camera = a.camera, this.i = 1
        }, b.crash = function() {
            if ("ios" != Detectizr.os.name) {
                var a = Date.now();
                if (!this.lastCrash || a - this.lastCrash > 2500) {
                    var b = this.i % 2 == 0 ? -1 : 1;
                    this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.to(this.camera.position, 1.5, {
                        ease: Power4.easeOut,
                        x: 400 * b
                    }), 0), this.timeline.insert(TweenMax.to(this.camera.position, 5.5, {
                        ease: Power4.easeInOut,
                        x: 0 * b
                    }), 1.5), this.timeline.insert(TweenMax.to(this.camera.rotation, .75, {
                        ease: Power4.easeOut,
                        z: .3 * b
                    }), 0), this.timeline.insert(TweenMax.to(this.camera.rotation, 6.75, {
                        ease: Power2.easeInOut,
                        z: .05 * b
                    }), .75), this.i++, this.lastCrash = a
                }
            }
        }, b.revert = function() {
            "ios" != Detectizr.os.name && (this.timeline && this.timeline.kill(), this.timeline = new TimelineMax, this.timeline.insert(TweenMax.to(this.camera.position, 4, {
                ease: Power4.easeInOut,
                x: 0
            })), this.timeline.insert(TweenMax.to(this.camera.rotation, 4, {
                ease: Power4.easeInOut,
                z: 0
            })))
        }, b.update = function() {}, b.beforeUpdate = function() {}, a
    }), define("theboat/fx/UserMotion", ["underscore", "modernizr", "math/ArmyKnife", "math/Interpolation"], function(a, b, c, d) {
        var e = function() {},
            f = e.prototype;
        return f.init = function(b) {
            this.tmpRX = 0, this.tmpRY = 0, this.camera = b.camera, this.containerGL = b.containerGL, this.rootGL = b.rootGL, this.rootCSS = b.rootCSS, this.rendererGL = b.rendererGL, a.bindAll(this, "onMouseMove", "onOrientation"), document.documentElement.addEventListener("mousemove", this.onMouseMove), window.DeviceOrientationEvent && window.addEventListener("deviceorientation", this.onOrientation), this.px = 0, this.py = 0, this.gamma = 0, this.beta = 0
        }, f.onMouseMove = function(a) {
            var b = document.documentElement.offsetWidth,
                d = document.documentElement.offsetWidth;
            this.px = c.map(a.clientX, 0, b, -1, 1, !1, !1, !1), this.py = c.map(a.clientY, 0, d, -1, 1, !1, !1, !1)
        }, f.onOrientation = function(a) {
            this.beta = c.map(a.beta, -27, 27, -1, 1, !1, !0, !0), this.gamma = c.map(a.gamma, -30, -75, -1, 1, !1, !0, !0)
        }, f.beforeUpdate = function() {
            this.tmpRX = this.rootGL.rotation.x, this.tmpRY = this.rootGL.rotation.y, this.rootGL.rotation.x = 0, this.rootGL.rotation.y = 0
        }, f.update = function() {
            var a = 0,
                b = 0;
            "tablet" == Detectizr.device.type || "mobile" == Detectizr.device.type ? (b = c.map(this.beta, -1, 1, -.2, .2, !1, !1, !1), a = c.map(this.gamma, -1, 1, -.05, .05, !1, !1, !1)) : (b = c.map(this.px, -1, 1, -.035, .035, !1, !1, !1), a = c.map(this.py, -1, 1, -.06, .06, !1, !1, !1)), this.rootGL.rotation.y = this.tmpRY, this.rootGL.rotation.y = d.lerp(this.rootGL.rotation.y, b, .05), this.rootCSS.rotation.y = this.rootGL.rotation.y
        }, e
    }), define("theboat/fx/Receed", ["utils/Random"], function() {
        var a = function() {},
            b = a.prototype;
        return b.init = function(a) {
            this.camera = a.camera
        }, b.transitionIn = function() {
            this.onTweenUpdate = this.onTweenUpdate.bind(this), TweenMax.to(this.camera, 1.5, {
                ease: Power4.easeOut,
                fov: 90,
                onUpdate: this.onTweenUpdate
            });
            var a = Math.random() > .5 ? -.2 : .2;
            TweenMax.to(this.camera.rotation, 1.5, {
                z: a
            });
            var b = Math.random() > .5 ? -1200 : 1200;
            TweenMax.to(this.camera.position, 1.5, {
                ease: Power4.easeOut,
                x: b
            })
        }, b.onTweenUpdate = function() {
            this.camera.updateProjectionMatrix()
        }, b.transitionOut = function() {}, b.update = function() {}, b.beforeUpdate = function() {}, a
    }), define("theboat/MiniPreloaderDisplay", ["underscore", "threejs", "comic/display/Image", "createjsEventDispatcher", "utils/Random", "utils/Color", "comic/Queue", "math/ArmyKnife"], function(a, b, c, d, e) {
        var f = function() {
                this.object = new b.Object3D, this.time = 0, this.vz = Math.random() > .5 ? -.1 : -.1, this.draw()
            },
            g = f.prototype;
        return f.geometry = new b.PlaneBufferGeometry(24, 24, 1, 1), f.texture1 = b.ImageUtils.loadTexture("images/ui/preloader-mini-bg-01.png"), f.material1 = new b.MeshBasicMaterial({
            map: f.texture1
        }), f.material1.transparent = !0, f.material1.opacity = .33, g.draw = function() {
            this.innerObject = new b.Object3D, this.circle1 = new b.Mesh(f.geometry, f.material1), this.innerObject.add(this.circle1), this.object.position.z = 90, this.innerObject.rotation.x = e.between(-.5, .5), this.innerObject.rotation.y = e.between(-.5, .5), this.object.add(this.innerObject)
        }, g.dispose = function() {
            this.innerObject.remove(this.circle1), this.object.remove(this.innerObject), this.circle1 = null
        }, g.update = function() {
            this.innerObject.rotation.z += this.vz
        }, f
    }), define("theboat/SplashPreloaderDisplay", ["underscore", "threejs", "comic/display/Image", "createjsEventDispatcher", "utils/Random", "utils/Color", "comic/Queue", "math/ArmyKnife"], function(a, b) {
        var c = function() {
                this.object = new b.Object3D, this.draw()
            },
            d = c.prototype;
        return c.geometry = new b.PlaneBufferGeometry(187, 30, 1, 1), c.texture1 = b.ImageUtils.loadTexture("images/ui/text-loading-grey.png"), c.material1 = new b.MeshBasicMaterial({
            map: c.texture1
        }), c.material1.transparent = !0, c.material1.opacity = .33, d.draw = function() {
            this.mesh = new b.Mesh(c.geometry, c.material1), this.object.position.z = 10, this.object.add(this.mesh)
        }, d.dispose = function() {
            this.object.remove(this.mesh), this.mesh = null, this.object = null
        }, d.update = function() {}, c
    }), define("text!html/credits.html", [], function() {
        return '<div class="end">\n\n    <div class="about">\n        <p>On April 30, 1975, Saigon fell to the North Vietnamese army.</p>\n        <p>Approximately two million people fled Vietnam over the next two decades, often by sea. By 1995, 800,000\n            refugees fleeing by boat had been resettled in other countries. It is estimated between 200,000 and 400,000\n            did not survive the journey.</p>\n        <p>In 1975 there were only 700 Vietnamese living in Australia, and public opinion was against accepting the\n            so-called &lsquo;boat people&rsquo;. It was when the scale of the humanitarian crisis became\n            internationally known in the late 1970s that the government led public opinion and dramatically increased\n            Australia&rsquo;s refugee intake.</p>\n        <p>By 1977, 2,753 Vietnamese refugees had been authorised to resettle in Australia. By 1995 this figure was\n            111,000.</p>\n        <p>Today, approximately 1% of the Australian population were born in Vietnam.</p>\n    </div>\n\n    <div class="credits">\n        <img src="images/115-end/credits-alt.png" alt="Credits" />\n        <div class="top-billings">\n            <p>Based on the short story, &lsquo;The Boat&rsquo;, by Nam Le</p>\n            <ul>\n                <li><strong>Adaptation: </strong>Matt Huynh</li>\n                <li><strong>Interaction: </strong>Matt Smith</li>\n                <li><strong>Producer: </strong>Kylie Boltin</li>\n                <li><strong>Sound design: </strong>Sam Petty</li>\n                <li><strong>Comic consultant: </strong>C.W. Chan</li>\n                <li><strong>Archive research: </strong>Ace Pecenpetelovski</li>\n            </ul>\n        </div>\n        <h3>Archive</h3>\n        <div class="col-1">\n            <h4>Side Story &mdash; Ancestors</h4>\n            <ul>\n                <li>&copy; Stephanie Maze/CORBIS</li>\n                <li>&copy; Jacques Pavlovsky/Sygma/CORBIS</li>\n            </ul>\n\n            <h4>Side Story &mdash; Re-education</h4>\n            <ul>\n                <li>News Ltd/Newspix</li>\n                <li>AP via AAP/Nick Ut</li>\n                <li>&copy; Marc Riboud/Magnum Photos</li>\n            </ul>\n\n            <h4>Side Story &mdash; Bidong Refugee Camp</h4>\n            <ul>\n                <li>NAA: A12111, 2/1981/46A/135</li>\n                <li>National Library of Australia, vn3209945</li>\n                <li>NAA: A12111, 2/1978/46A/10</li>\n                <li>Michael Jensen, Vietnamese boat people disembarking from the boats with their luggage, 1977, National\n                    Library of Australia, vn3209945\n                </li>\n            </ul>\n        </div>\n        <div class="col-2">\n            <ul>\n                <li>&copy; Bettmann/CORBIS</li>\n                <li>AP via AAP</li>\n                <li>British Red Cross</li>\n            </ul>\n            <h4>Side Story &mdash; Quyen and Truong&rsquo;s Backstory</h4>\n            <ul>\n                <li>&copy; Bettmann/CORBIS</li>\n                <li>&copy; Jacques Pavlovsky/Sygma/CORBIS</li>\n                <li>&copy; Bettmann/CORBIS</li>\n                <li>&copy; Bettmann/CORBIS</li>\n                <li>&copy; Bettmann/CORBIS</li>\n            </ul>\n            <ul>\n                <li>Australian Broadcasting Corporation Library Sales</li>\n            </ul>\n            <ul>\n                <li>Historical copy: Dr Scott Brook</li>\n            </ul>\n        </div>\n        <div class="other-billings">\n            <p>&ldquo;The Mother Heart&rdquo; performed by Tuyetle Tran with thanks to SBS Radio and SBS Content.</p>\n        </div>\n        <div class="purchase-points">\n            <p>Locations where the collection of short stories &ldquo;The Boat&rdquo; by Nam Le can be purchased:<br/>\n                <ul>\n                    <li>In Australia: <a target="_blank" href="http://www.penguin.com.au/products/9780143009610/boat">Penguin Books Australia.</a></li>\n                    <li>In the USA: <a target="_blank" href="http://www.amazon.com/The-Boat-Stories-Nam-Le/dp/0307388190">Amazon</a>, <a target="_blank" href="http://www.barnesandnoble.com/w/boat-nam-le/1100265456?ean=9780307388193">Barnes &amp; Noble</a>, and <a target="_blank" href="http://www.powells.com/biblio/61-9780307388193-0">Powell&rsquo;s</a>.</li>\n                    <li>In the UK at <a target="_blank" href="http://www.amazon.co.uk/Boat-Nam/dp/1847671616">Amazon</a> and <a target="_blank" href="https://www.waterstones.com/book/the-boat/nam-le/9781847671615">Waterstones</a>.</li>\n                </ul>\n            </p>\n        </div>\n    </div>\n</div>\n\n';

    }), define("events/appEvents", ["underscore", "backbone"], function(a, b) {
        var c = a.extend({}, b.Events);
        return c
    }), define("views/ComicView", ["jquery", "underscore", "backbone", "tracking/Tracking", "audio/Thump", "comic/audio/Atmos", "comic/audio/SoundEffect", "theboat/TheBoatComic", "comic/display/Frame", "comic/display/ImageFrame", "comic/display/Splash", "comic/display/BasicText", "comic/display/BubbleText", "theboat/000preloaderrain/PreloaderRainSplash", "theboat/001landing/LandingSplash", "theboat/007stormarrived/StormArrivedSplash", "theboat/007stormarrived/StormArrivedText", "theboat/013incense/IncenseSplash", "theboat/015song/SongPt1Splash", "theboat/015song/SongPt2Splash", "theboat/015song/SongPt3Splash", "theboat/021garden/GardenSplash", "theboat/022ba/BaSplash", "theboat/026busletter/BusLetterSplash", "theboat/028closingwound/ClosingWoundSplash", "theboat/033markets/MarketsSplash", "theboat/037canoe/CanoeSplash", "theboat/040signal/SignalSplash", "theboat/041canoeandboat/CanoeAndBoatSplash", "theboat/042boat/BoatSplash", "theboat/044bodies/BodiesSplash", "theboat/051afterstorm/AfterStormSplash", "theboat/054maifeveralt/MaiFeverSplash", "theboat/058maifeverbreaks/MaiFeverBreaksSplash", "theboat/060batroung/BaTroungSplash", "theboat/063troungshadow/TroungShadowSplash", "theboat/068troungcrane/TroungCraneSplash", "theboat/071punch/PunchSplash", "theboat/072notacloud/NotACloudSplash", "theboat/075derrickcrane/DerrickCraneSplash", "theboat/076belowdeck/BelowDeckSplash", "theboat/080troungfever/TroungFeverSplash", "theboat/082iwanttogoup/IWantToGoUpSplash", "theboat/082deck/DeckSplash", "theboat/083troungface/TroungFaceSplash", "theboat/085hatch/HatchSplash", "theboat/092scream/ScreamSplash", "theboat/094thatafternoon/ThatAfternoonSplash", "theboat/098songpt4/SongPt4Splash", "theboat/101birds/BirdsSplash", "theboat/103somethingamiss/SomethingAmissSplash", "theboat/106troungbody/TroungBodySplash", "theboat/109quyenmourns/QuyenMournsSplash", "theboat/115end/EndSplash", "theboat/blineancestors/BLineAncestorsSplash1", "theboat/blineancestors/BLineAncestorsSplash2", "theboat/blineancestors/BLineAncestorsSplash3", "theboat/blinebackstory/BLineBackStoryBlackMatte", "theboat/blinebackstory/BLineBackStorySplash1", "theboat/blinebackstory/BLineBackStorySplash2", "theboat/blinebackstory/BLineBackStoryRunning", "theboat/blinereeducation/BLineReeducationSplash1", "theboat/blinereeducation/BLineReeducationSplash2", "theboat/blinereeducation/BLineReeducationSplash3", "theboat/blinebidong/BLineBidongSplash1", "theboat/blinebidong/BLineBidongSplash2", "theboat/blinebidong/BLineBidongSplash3", "theboat/blinebubbles/BubbleAncestors", "theboat/blinebubbles/BubbleReeducation", "theboat/blinebubbles/BubbleBidong", "theboat/blinebubbles/BubbleBackstory", "theboat/BackButton", "theboat/SeaSickImageFrame", "theboat/GrindImageFrame", "theboat/FeverImageFrame", "theboat/SeaSickText", "theboat/ActionImageFrame", "theboat/ChapterHeading", "theboat/fx/SeaSick", "theboat/fx/UserMotion", "theboat/fx/Receed", "theboat/MiniPreloaderDisplay", "theboat/SplashPreloaderDisplay", "text!html/credits.html", "events/appEvents"], function(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p, q, r, s, t, u, v, w, x, y, z, A, B, C, D, E, F, G, H, I, J, K, L, M, N, O, P, Q, R, S, T, U, V, W, X, Y, Z, $, _, aa, ba, ca, da, ea, fa, ga, ha, ia, ja, ka, la, ma, na, oa, pa, qa, ra, sa, ta, ua, va, wa, xa, ya, za, Aa, Ba, Ca, Da, Ea) {
        var Fa = c.View.extend({
            initialize: function() {
                b.bindAll(this, "onResize", "onAutoScroll", "onPreload", "onBackButtonClick", "onChapterClick", "onAnchorChange", "onSwitchStoryLine", "onSwitchDefaultStoryLine")
            },
            onBackButtonClick: function() {
                this.comic.defaultStoryLine()
            },
            createComic: function() {
                window.addEventListener("resize", this.onResize), this.comic = new h, this.comic.setSize(window.innerWidth, window.innerHeight);
                var a, b, c, e, Aa, Ea, Fa, Ga, Ha;
                j.preloaderDisplayClass = Ba, k.preloaderDisplayClass = Ca, this.comic.setPreloader(new n), this.comic.createStoryLine("ancestors", "right"), this.comic.createStoryLine("reeducation", "left"), this.comic.createStoryLine("bidong", "right"), this.comic.createStoryLine("backstory", "left"), this.comic.createAnchor("landing"), Aa = new za, this.comic.addFX(Aa), Aa = new ya, this.comic.addFX(Aa), Fa = new f("stormAtmosExt"), Fa.volumeIn = .3, Fa.volumeOut = .3, c = new o, this.comic.add(c, {
                    center: !0,
                    activeBetweenScreenPosition: {
                        min: -6.5,
                        max: 1
                    },
                    preload: !0,
                    triggers: [{
                        atScreenPosition: .4,
                        call: "hideCTA"
                    }],
                    maps: [{
                        target: Fa,
                        property: "volumeIn",
                        startScreenPosition: -7,
                        endScreenPosition: -8,
                        startValue: .3,
                        endValue: 1
                    }, {
                        target: Fa,
                        property: "volumeOut",
                        startScreenPosition: -9.5,
                        endScreenPosition: -12,
                        startValue: 1,
                        endValue: 0
                    }]
                }), this.comic.wrap(1e3), this.landingSplash = c, this.comic.createAnchor("chapter1"), Ea = new g("chapterMotif"), c = new xa(0), this.comic.add(c, {
                    center: !0,
                    triggers: [{
                        atScreenPosition: .9,
                        call: "transitionIn"
                    }, {
                        atScreenPosition: .9,
                        target: Ea,
                        call: "play"
                    }, {
                        atScreenPosition: .9,
                        target: d,
                        call: "sendCustomEvent",
                        params: ["chapter/1"]
                    }]
                }), this.comic.wrap(1200), b = new l("9col", "2tier", ['<div class="display-text medium light">', "<p>The crosswind surged in, filtering through the apertures in the rotten wood, sounding like a chorus of low moans.</p>", "<p>Hugging a beam at the top of the hatch, Mai looked out and her breath stopped. The boat had heeled so steeply that all she saw was an enormous wall of black-green water bearing down.</p>", "<p>She shut her eyes, opened them again &mdash; now the gunwale had crested the water, the ocean completely vanished.</p>", "</div>"]), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(1200), b = new va("9col", "1tier", '<p class="display-text small">A body collided into hers, slammed her against the side of the hatch door.</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(100), a = new sa("12col", "1tier", "images/003-006/01.png"), this.comic.add(a, {
                    preload: !0,
                    triggers: [{
                        atScreenPosition: .4,
                        target: c,
                        call: "changeBoat"
                    }, {
                        atScreenPosition: .4,
                        target: b,
                        call: "crash"
                    }, {
                        atScreenPosition: .4,
                        target: a,
                        call: "crash"
                    }, {
                        atScreenPosition: .4,
                        target: Aa,
                        call: "crash"
                    }]
                }), this.comic.wrap(700), b = new va("9col", "1tier", '<p class="display-text small">Other bodies &mdash; she was on top of them &mdash; thighs and ribs and arms and heads &mdash; jammed this way and that with each groaning tilt, </p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(100), a = new sa("12col", "1tier", "images/003-006/02.png"), this.comic.add(a, {
                    preload: !0,
                    triggers: [{
                        atScreenPosition: .4,
                        target: c,
                        call: "changeBoat"
                    }, {
                        atScreenPosition: .4,
                        target: b,
                        call: "crash"
                    }, {
                        atScreenPosition: .4,
                        target: a,
                        call: "crash"
                    }, {
                        atScreenPosition: .4,
                        target: Aa,
                        call: "crash"
                    }]
                }), this.comic.wrap(700), b = new va("9col", "1tier", '<p class="display-text small dark">writhing toward space as though impelling the boat to heave to,</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(100), a = new sa("12col", "1tier", "images/003-006/03.png"), this.comic.add(a, {
                    triggers: [{
                        atScreenPosition: .4,
                        target: c,
                        call: "changeBoat"
                    }, {
                        atScreenPosition: .4,
                        target: b,
                        call: "crash"
                    }, {
                        atScreenPosition: .4,
                        target: a,
                        call: "crash"
                    }, {
                        atScreenPosition: .4,
                        target: Aa,
                        call: "crash"
                    }]
                }), this.comic.wrap(700), b = new va("9col", "1tier", '<p class="display-text small dark">back into the wind.</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(100), a = new sa("12col", "1tier", "images/003-006/04.png"), this.comic.add(a, {
                    triggers: [{
                        atScreenPosition: .4,
                        target: c,
                        call: "changeBoat"
                    }, {
                        atScreenPosition: .4,
                        target: b,
                        call: "crash"
                    }, {
                        atScreenPosition: .4,
                        target: a,
                        call: "crash"
                    }, {
                        atScreenPosition: .4,
                        target: Aa,
                        call: "crash"
                    }]
                }), this.comic.wrap(700), b = new va("9col", "1tier", '<p class="display-text small dark">Instantly she looked for Truong.</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(100), a = new sa("12col", "1tier", "images/003-006/05.png"), this.comic.add(a, {
                    triggers: [{
                        atScreenPosition: .5,
                        target: Aa,
                        call: "revert"
                    }]
                }), this.comic.wrap(900), b = new l("10col", "1tier", ['<div class="display-text medium dark">', "<p>There he was, knees drawn up to his chin, face as smooth and impassive as that of a ceramic toy soldier.</p>", "</div>"]), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(400), a = new j("8col", "2tier", "images/003-006/06.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(1e3), c = new p, this.comic.add(c, {
                    center: !0,
                    activeBetweenScreenPosition: {
                        min: -5.5,
                        max: 6
                    },
                    maps: [{
                        property: "blackMatteOpacity",
                        startScreenPosition: -3.8,
                        endScreenPosition: -4,
                        startValue: 1,
                        endValue: 0
                    }]
                }), this.comic.wrap(500), Fa = new f("stormAtmosInt");
                var Ia = new q("9col", "1tier", ['<div class="display-text medium dark">', "Finally the storm arrived in force.", "</div>"]);
                this.comic.add(Ia, {
                    center: !0,
                    triggers: [{
                        atScreenPosition: .6,
                        call: "blowAway"
                    }]
                }), this.comic.wrap(200);
                var Ja = new q("9col", "1tier", ['<div class="display-text medium dark">', "The remaining light drained from the hold. Wind screamed through the cracks. She felt the panicked limbs, people clawing ", "for direction, the banging and shapeless shouts from the deck above.", "</div>"]);
                this.comic.add(Ja, {
                    center: !0
                }), this.comic.wrap(250);
                var Ka = new q("9col", "1tier", ['<div class="display-text medium dark">', "The whole world reeled. Everywhere the stink of vomit. Her stomach forced up, squashed through her throat.", "</div>"]);
                this.comic.add(Ka, {
                    center: !0
                }), this.comic.wrap(200);
                var La = new q("9col", "1tier", ['<div class="display-text medium dark">', "So this was what it was like, she thought, the moment before death.", "</div>"]);
                this.comic.add(La, {
                    center: !0,
                    triggers: [{
                        atScreenPosition: 1.4,
                        target: c,
                        call: "stormArrives"
                    }, {
                        atScreenPosition: 1.4,
                        target: Ia,
                        call: "stormArrives"
                    }, {
                        atScreenPosition: 1.4,
                        target: Ja,
                        call: "stormArrives"
                    }, {
                        atScreenPosition: 1.4,
                        target: Ka,
                        call: "stormArrives"
                    }, {
                        atScreenPosition: 1.4,
                        target: La,
                        call: "stormArrives"
                    }],
                    maps: [{
                        target: Fa,
                        property: "volumeIn",
                        startScreenPosition: 0,
                        endScreenPosition: -2,
                        startValue: 0,
                        endValue: 1
                    }, {
                        target: Fa,
                        property: "volumeOut",
                        startScreenPosition: -4,
                        endScreenPosition: -7.5,
                        startValue: 1,
                        endValue: 0
                    }]
                }), this.comic.wrap(900), b = new l("9col", "1tier", '<p class="display-text small">She tried to recall her father&rsquo;s stories &mdash; storms at sea, ten, fifteen metres high! But they rang shallow against what she&rsquo;d just seen: those dense roaring slabs of water, sky churning overhead like a puddle being mucked with a stick.</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(110), a = new j("12col", "1tier", "images/009-012/01.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(520), b = new l("9col", "1tier", '<p class="display-text small">She was crammed in by a boatload of human bodies &mdash;</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(50), a = new j("12col", "1tier", "images/009-012/02.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(500), b = new l("9col", "1tier", '<p class="display-text small">thinking of her father and becoming overwhelmed, slowly, with loneliness. As much loneliness as fear.</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(50), a = new j("12col", "1tier", "images/009-012/03-alt.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(520), b = new l("9col", "1tier", '<p class="display-text small">Concentrate, she told herself. And she did &mdash; forcing herself to concentrate,</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(50), a = new j("12col", "1tier", "images/009-012/04-alt.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(520), b = new l("9col", "1tier", '<p class="display-text small">if not &mdash; if she was unable to &mdash; on the thought of her family,</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(50), a = new j("12col", "1tier", "images/009-012/05-alt.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(520), b = new l("9col", "1tier", '<p class="display-text small">then on the contact of flesh pressed against her on every side.</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(50), a = new j("12col", "1tier", "images/009-012/06-alt.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(500), e = new i("2col", "1tier"), this.comic.add(e), b = new l("5col", "1tier", '<div class="frame-internal-text medium light"><p>She stayed in that human cocoon, heavy and rolling, concentrating, until it was over.</p></div>'), this.comic.add(b), a = new j("12col", "1tier", "images/009-012/07-alt.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(250), e = new i("6col", "1tier"), this.comic.add(e), b = new m("4col", "1tier", '<div class="bk-x-large-br-01"><div class="dialog"><p>Try to sleep.</p></div></div>'), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), this.comic.wrap(800), c = new r, this.comic.add(c, {
                    center: !0,
                    activeBetweenScreenPosition: {
                        min: -6.5,
                        max: 6
                    }
                }), this.comic.wrap(0), b = new l("12col", "1tier", '<p class="display-text small dark">She opened her eyes. It was Quyen. There was a sort of death in her face.</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(55), a = new j("12col", "1tier", "images/013-021/01.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(500), b = new l("6col", "1tier", '<p class="frame-external-text small dark">Truong had appeared silently behind his mother. He stood close by Quyen without touching her. </p>'), this.comic.add(b), this.comic.wrap(90), a = new j("6col", "1tier", "images/013-021/02.png"), this.comic.add(a), b = new l("6col", "1tier", ['<div class="frame-internal-text small dark">', "<p>", "For a moment Mai was seized with a desire to take the boy up and press him hard against her chest, ", "to keep him &mdash; his stillness, self-containment, whatever it was about him &mdash; close to her.", "</p>", "</div>"]), this.comic.add(b), this.comic.wrap(600), Ha = new na, this.comic.add(Ha, {
                    triggers: [{
                        atScreenPosition: 1.1,
                        call: "transitionIn"
                    }]
                }), Ha.addEventListener("click", function() {
                    this.comic.switchStoryLine("ancestors"), d.sendCustomEvent("sidestory/ancestors")
                }.bind(this)), this.comic.startAuthoringStoryLine("ancestors"), this.comic.wrap(500), b = new l("7col", "1tier", '<div class="display-text medium light"><p>A procession of people stepped over her measuredly, as though hypnotised.</p><p class="display-text medium light">She got up and followed them.</p></div>', {
                    offsetX: -300
                }), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(0), c = new aa, this.comic.add(c, {
                    center: !0
                }), this.comic.wrap(1200), b = new l("7col", "1tier", '<p class="display-text medium light">Pearly light bathed the stunned and salt-specked faces of the hundred people on deck, all of whom had expected to die here but were instead granted this eerie reprieve.</p>', {
                    offsetX: 300
                }), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(300), c = new ba, this.comic.add(c, {
                    center: !0
                }), this.comic.wrap(900), b = new l("9col", "1tier", '<p class="display-text small light">A dim thought struggled, stabilised, in her mind &mdash; maybe the voices on the water were those of their ancestors.</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(55), a = new j("12col", "1tier", "images/b-line-ancestors/01.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(800), b = new l("9col", "1tier", '<p class="display-text small light">What did they know? What were they so desperate to communicate?</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(75), a = new j("12col", "1tier", "images/b-line-ancestors/02.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(800), c = new ca, this.comic.add(c, {
                    center: !0
                }), this.comic.wrap(900), b = new l("9col", "1tier", '<div class="display-text medium light"><p>Now she realised where they were &mdash; where they must be. Everyone had heard about these places.</p><p>They had ventured into the fields of the dead.</p></div>', {}), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(550), Ha = new ra(!1, "left"), this.comic.add(Ha, {
                    center: !0,
                    triggers: [{
                        atScreenPosition: .8,
                        call: "transitionIn"
                    }]
                }), Ha.addEventListener("click", this.onBackButtonClick), this.comic.endAuthoringStoryLine(), this.comic.wrap(400), b = new l("9col", "1tier", '<div class="display-text medium dark">She began to smell incense from the hold. People praying to their ancestors. It lightened her head.</div>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(600), e = new i("6col", "1tier"), this.comic.add(e), b = new l("6col", "1tier", '<p class="frame-external-text small dark">She let herself pretend Quyen was speaking to her and not to Truong.</p>'), this.comic.add(b), this.comic.wrap(90), a = new j("6col", "1tier", "images/013-021/04.png"), this.comic.add(a), a = new j("6col", "1tier", "images/013-021/05.png"), this.comic.add(a), this.comic.wrap(0), b = new m("6col", "1tier", '<div class="bk-large-br-02"><div class="dialog"><p>It&rsquo;s over now. The storm&rsquo;s over, Child.</p></div></div>', {
                    offsetX: 160,
                    offsetY: -150
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), this.comic.wrap(500), b = new l("6col", "1tier", '<p class="frame-external-text small dark">Mai submitted, and when she closed her eyes, she found the hum of the phantom voices almost lulling.</p>'), this.comic.add(b), this.comic.wrap(95), a = new j("6col", "1tier", "images/013-021/06.png"), this.comic.add(a), a = new j("3col", "1tier", "images/013-021/07.png"), this.comic.add(a), b = new l("3col", "1tier", '<div class="frame-internal-text small dark"><p>Almost like a sea wind bearing men&rsquo;s voices up from the wharf.<br/><br/>At times she thought she almost recognised a voice.</p></div>'), this.comic.add(b), this.comic.wrap(0), b = new m("6col", "1tier", '<div class="bk-medium-nt-02"><div class="dialog"><p>Try to sleep.</p></div></div>', {
                    offsetX: 450,
                    offsetY: 290
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), this.comic.wrap(1e3), this.comic.createAnchor("chapter2"), Ea = new g("chapterMotif"), c = new xa(1), this.comic.add(c, {
                    center: !0,
                    triggers: [{
                        atScreenPosition: .9,
                        call: "transitionIn"
                    }, {
                        atScreenPosition: .9,
                        target: Ea,
                        call: "play"
                    }, {
                        atScreenPosition: .9,
                        target: d,
                        call: "sendCustomEvent",
                        params: ["chapter/2"]
                    }]
                }), this.comic.wrap(600);
                var Ma = new f("song");
                Fa = new f("boatAtmosExt"), Ga = new f("motif"), a = new j("12col", "1tier", "images/013-021/08.png"), this.comic.add(a), this.comic.wrap(400), b = new l("9col", "1tier", '<p class="display-text small dark">Four days ago, as Mai had been trying to sleep on deck, the song began.<br />The faint voice drifted out of the hold with a familiar undertow. It was an old<br/>Vietnamese folk song.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(550), c = new s, this.comic.add(c, {
                        center: !0,
                        activeBetweenScreenPosition: {
                            min: -6,
                            max: 3
                        },
                        maps: [{
                            property: "bgInOpacity",
                            startScreenPosition: 1.5,
                            endScreenPosition: .25,
                            startValue: 0,
                            endValue: 1
                        }, {
                            property: "bgSaturation",
                            startScreenPosition: 0,
                            endScreenPosition: -1.5,
                            startValue: 1,
                            endValue: 0
                        }, {
                            property: "bgMidOpacity",
                            startScreenPosition: 0,
                            endScreenPosition: -.75,
                            startValue: 1,
                            endValue: .5
                        }, {
                            property: "bgOutOpacity",
                            startScreenPosition: -.76,
                            endScreenPosition: -5.5,
                            startValue: 1,
                            endValue: 0
                        }, {
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 2.5,
                            endScreenPosition: 1.5,
                            startValue: 0,
                            endValue: .6
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: -4,
                            endScreenPosition: -6.5,
                            startValue: .6,
                            endValue: 0
                        }, {
                            target: Ga,
                            property: "volumeIn",
                            startScreenPosition: 5,
                            endScreenPosition: 1.5,
                            startValue: 0,
                            endValue: .5
                        }, {
                            target: Ga,
                            property: "volumeOut",
                            startScreenPosition: -3,
                            endScreenPosition: -6,
                            startValue: .5,
                            endValue: 0
                        }, {
                            target: Ma,
                            property: "volumeIn",
                            startScreenPosition: 2,
                            endScreenPosition: 0,
                            startValue: 0,
                            endValue: .65
                        }, {
                            target: Ma,
                            property: "volumeOut",
                            startScreenPosition: -1,
                            endScreenPosition: -3,
                            startValue: .65,
                            endValue: 0
                        }]
                    }), this.comic.wrap(700), b = new l("4col", "1tier", '<p class="frame-external-text small dark">In the shade of the hibiscus hedge her mother had once sung the same words to her. Her mother, who had waited each time her husband went to sea &mdash;</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">again when he left to fight the Communists, and then when he left once more, to report for re-education camp.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">That was supposed to have been the last time. And though dusk came, her mother would keep singing the soldier&rsquo;s wife&rsquo;s lament.</p>'), this.comic.add(b), this.comic.wrap(170), a = new j("4col", "1tier", "images/013-021/09.png"), this.comic.add(a), a = new j("4col", "1tier", "images/013-021/10.png"), this.comic.add(a), a = new j("4col", "1tier", "images/013-021/11.png"), this.comic.add(a), this.comic.wrap(520), b = new l("9col", "1tier", '<p class="display-text small dark">Mai followed the song into the hold.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(55), a = new j("12col", "1tier", "images/013-021/12.png"), this.comic.add(a), this.comic.wrap(500), b = new l("9col", "1tier", '<p class="display-text small dark">In the darkness she could just make out Quyen&rsquo;s form, lying on her side in front of Truong as though shielding him.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(95), a = new j("12col", "1tier", "images/013-021/13.png"), this.comic.add(a), this.comic.wrap(730), b = new l("9col", "1tier", '<div class="display-text medium dark"><p>Her voice was thin, attenuated in some way, stripped of vibrato. It didn&rsquo;t slide up to notes the way traditional singers&rsquo; did.</p><p>Overcome with feeling, Mai wanted to ask Quyen to stop singing. How could she explain it all?</p></div>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(500), c = new t, this.comic.add(c, {
                        center: !0,
                        triggers: [{
                            atScreenPosition: 1.2,
                            call: "fall"
                        }]
                    }), this.comic.wrap(800), b = new l("4col", "1tier", '<p class="frame-external-text small dark">With a shock, Mai realised Quyen&rsquo;s mouth was not moving. She was asleep. The singing cut off as Truong lifted, turned his head, staring at Mai with large obsidian eyes.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Stunned, she said nothing. She looked back at his pale face, the slight, girlish curve beneath his nose to his lips. The intentness of his gaze.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Then, slowly, she felt whatever turmoil broke and banked inside her becoming still.</p>'), this.comic.add(b), this.comic.wrap(195), a = new j("4col", "1tier", "images/013-021/14.png"), this.comic.add(a), a = new j("4col", "1tier", "images/013-021/15.png"), this.comic.add(a), a = new j("4col", "1tier", "images/013-021/16.png"), this.comic.add(a), this.comic.wrap(800), b = new l("9col", "1tier", '<p class="display-text medium dark">Watching her the whole time, Truong opened his mouth and took a deep breath:</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(500), c = new u, this.comic.add(c, {
                        center: !0
                    }), this.comic.wrap(900), b = new l("9col", "1tier", '<p class="display-text medium dark">Here&rsquo;s how it began.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(500), b = new l("9col", "1tier", '<p class="display-text small dark">In the yard, beneath branches of mastic and white storax flowers, next to the deciduated hibiscus hedge, her mother had hooked her fingers under her waistband and handed her a damp roll of money.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(315), b = new m("12col", "1tier", '<div class="bk-large-b-01"><div class="dialog"><p>Child can spend<br/>it however Child likes.</p></div></div>', {
                        offsetX: 630,
                        offsetY: -180
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), Fa = new f("gardenAtmos"), c = new v, this.comic.add(c, {
                        center: !0,
                        maps: [{
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 3.5,
                            endScreenPosition: 2,
                            startValue: 0,
                            endValue: 1
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: -1,
                            endScreenPosition: -2,
                            startValue: 1,
                            endValue: 0
                        }]
                    }), this.comic.wrap(700), b = new l("4col", "1tier", '<p class="frame-external-text small dark">The ink faded from counting and recounting.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Knowing her mother&rsquo;s usual frugality, Mai struggled to respond.</p>'), this.comic.add(b), this.comic.wrap(95), b = new m("4col", "1tier", '<div class="bk-medium-tr-01"><div class="dialog"><p>But try to keep it, nha?</p></div></div>', {
                        offsetX: 200,
                        offsetY: -10
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("4col", "1tier", "images/013-021/17.png"), this.comic.add(a), a = new j("4col", "1tier", "images/013-021/18.png"), this.comic.add(a), a = new j("4col", "1tier", "images/013-021/19.png"), this.comic.add(a), this.comic.wrap(700), b = new m("12col", "1tier", '<div class="bk-x-large-nt-01"><div class="dialog"><p>Child is a good child.</p></div></div>', {
                        offsetX: 450
                    }), this.comic.add(b, {
                        center: !0,
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(500), Fa = new f("hospitalAtmos"), b = new l("9col", "1tier", '<p class="display-text small dark">Her father had been released, three months prior, from re-education camp, and immediately admitted into the hospital at Vinh Long. He&rsquo;d barely reacted when she came to greet him. He had gone blind.</p>'), this.comic.add(b, {
                        center: !0,
                        maps: [{
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 1.5,
                            endScreenPosition: .5,
                            startValue: 0,
                            endValue: 1
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: -3,
                            endScreenPosition: -5,
                            startValue: 1,
                            endValue: 0
                        }]
                    }), this.comic.wrap(400), Ha = new oa, this.comic.add(Ha, {
                        triggers: [{
                            atScreenPosition: 1.1,
                            call: "transitionIn"
                        }]
                    }), Ha.addEventListener("click", function() {
                        this.comic.switchStoryLine("reeducation"), d.sendCustomEvent("sidestory/reeducation")
                    }.bind(this)), this.comic.startAuthoringStoryLine("reeducation"), this.comic.wrap(500), b = new l("9col", "1tier", '<p class="display-text medium light">By the time the Communists took Ban Me Thuot in March 1975, the Americans were long gone and the Southern regiments in tatters &mdash;</p>', {
                        offsetX: -200
                    }), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(450), c = new ha, this.comic.add(c, {
                        center: !0
                    }), this.comic.wrap(1200), b = new l("9col", "1tier", '<p class="display-text medium light">soldiers deserting, taking cover as civilians, fleeing into the jungles. Escape on every man&rsquo;s mind.</p>', {
                        offsetX: 200
                    }), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(850), c = new ia, this.comic.add(c, {
                        center: !0
                    }), this.comic.wrap(400), e = new i("8col"), this.comic.add(e), a = new j("4col", "1tier", "images/b-line-reeducation/boots.png"), this.comic.add(a), this.comic.wrap(850), b = new l("9col", "1tier", '<p class="display-text medium light">Soon they all learned there was no escaping the Communists: not in the country they now controlled. They were all skilled at turning north against south, village against village.</p>', {
                        offsetX: -200
                    }), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(850), c = new ja, this.comic.add(c, {
                        center: !0
                    }), this.comic.wrap(1200), b = new l("9col", "1tier", '<p class="display-text medium light">Husbands against wives. Children against parents. The only chance was to denounce everyone, and everything.</p>', {}), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(200), Ha = new ra(!1, "right"), this.comic.add(Ha, {
                        center: !0,
                        triggers: [{
                            atScreenPosition: .8,
                            call: "transitionIn"
                        }]
                    }), Ha.addEventListener("click", this.onBackButtonClick), this.comic.endAuthoringStoryLine(), c = new w, this.comic.add(c, {
                        center: !0
                    }), this.comic.wrap(870), b = new l("7col", "1tier", '<p class="frame-external-text small dark">The doctors were baffled because they could identify no physical abnormality, no root cause. His re-education had blinded him.</p>'), this.comic.add(b), b = new l("5col", "1tier", '<p class="frame-external-text small dark">Mai had come with so much to say &mdash; so much to ask &mdash; but he may as well have been deaf as blind.</p>'), this.comic.add(b), this.comic.wrap(96), a = new j("7col", "1tier", "images/022-028/02.png"), this.comic.add(a), a = new j("5col", "1tier", "images/022-028/03.png"), this.comic.add(a), this.comic.wrap(480), e = new i("8col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small dark">She felt insolent looking at his face when he didn&rsquo;t look back.</p>'), this.comic.add(b), this.comic.wrap(90), b = new m("4col", "1tier", '<div class="bk-small-bl-01"><div class="dialog"><p>Can Ba see?</p></div></div>', {
                        offsetX: 640,
                        offsetY: 50
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("4col", "1tier", '<div class="bk-medium-bl-01"><div class="dialog"><p>Ba will get better?</p></div></div>', {
                        offsetX: 660,
                        offsetY: -10
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("8col", "1tier", "images/022-028/04.png"), this.comic.add(a), a = new j("4col", "1tier", "images/022-028/05.png"), this.comic.add(a), this.comic.wrap(500), b = new m("0col", "1tier", '<div class="bk-large-bl-02"><div class="dialog"><p>At sixteen, Ba had to look after his whole family.</p></div></div>', {
                        offsetX: 730,
                        offsetY: -80
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-bl-01"><div class="dialog"><p>Look after your mother.</p></div></div>', {
                        offsetX: 1150,
                        offsetY: 20
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("4col", "1tier", "images/022-028/06.png"), this.comic.add(a), a = new j("4col", "1tier", "images/022-028/07.png"), this.comic.add(a), a = new j("4col", "1tier", "images/022-028/08.png"), this.comic.add(a), this.comic.wrap(500), a = new j("4col", "1tier", "images/022-028/09.png"), this.comic.add(a), a = new j("4col", "1tier", "images/022-028/10.png"), this.comic.add(a), a = new j("4col", "1tier", "images/022-028/11.png"), this.comic.add(a), this.comic.wrap(500), b = new m("12col", "1tier", '<div class="bk-medium-bl-01"><div class="dialog"><p>Stop crying, Child.</p></div></div>', {
                        offsetX: 500,
                        offsetY: -50
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("12col", "1tier", "images/022-028/12.png"), this.comic.add(a), this.comic.wrap(700), b = new m("12col", "1tier", '<div class="bk-x-large-nt-01"><div class="dialog"><p>Child is a good child.</p></div></div>', {
                        offsetX: 450
                    }), this.comic.add(b, {
                        center: !0,
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(450), b = new l("9col", "1tier", '<p class="display-text small dark">The next day her mother put her on a bus to Rach Gia. It was a five-hour trip, she was told. In the market she would be picked up by an uncle she had never met.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(300), b = new m("12col", "1tier", '<div class="bk-medium-bl-01"><div class="dialog"><p>Give this to him.</p></div></div>', {
                        offsetX: 350,
                        offsetY: 0,
                        offsetZ: -150
                    }), this.comic.add(b, {
                        center: !0,
                        triggers: [{
                            atScreenPosition: .9,
                            call: "transitionIn"
                        }]
                    }), this.comic.wrap(0), Fa = new f("busStationAtmos"), c = new x, this.comic.add(c, {
                        center: !0,
                        maps: [{
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 1.5,
                            endScreenPosition: -1.5,
                            startValue: 0,
                            endValue: .9
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: -3,
                            endScreenPosition: -5,
                            startValue: .9,
                            endValue: 0
                        }]
                    }), this.comic.wrap(800), e = new i("2col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Mai stood there, breathing hard, sensing the larger finality of their parting.</p>'), this.comic.add(b), this.comic.wrap(150), e = new i("2col", "1tier"), this.comic.add(e), b = new m("4col", "1tier", '<div class="bk-medium-br-01"><div class="dialog"><p>Do you still have the money?</p></div></div>', {
                        offsetX: -160,
                        offsetY: 100
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-x-small-tl-01"><div class="dialog"><p>Yes.</p></div></div>', {
                        offsetX: -160,
                        offsetY: 220
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("1col", "1tier", '<div class="bk-large-bl-02"><div class="dialog"><p>Remember not to let anyone see it.</p></div></div>', {
                        offsetX: 170,
                        offsetY: -115
                    }), this.comic.add(b, {
                        triggers: [{
                            atScreenPosition: .7,
                            call: "transitionIn"
                        }]
                    }), b = new m("4col", "1tier", '<div class="bk-x-small-tl-01"><div class="dialog"><p>Yes.</p></div></div>', {
                        offsetX: 155,
                        offsetY: 230
                    }), this.comic.add(b, {
                        triggers: [{
                            atScreenPosition: .5,
                            call: "transitionIn"
                        }]
                    }), this.comic.wrap(0), e = new i("2col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/022-028/13.png"), this.comic.add(a), a = new j("4col", "1tier", "images/022-028/14.png"), this.comic.add(a), this.comic.wrap(500), e = new i("2col", "1tier"), this.comic.add(e), b = new m("4col", "1tier", '<div class="bk-large-br-01"><div class="dialog"><p>Child hasn&rsquo;t said goodbye to Ba.</p></div></div>', {
                        offsetX: -190,
                        offsetY: -40
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("1col", "1tier", '<div class="bk-medium-bl-02"><div class="dialog"><p>Ma will say for Child.</p></div></div>', {
                        offsetX: 30,
                        offsetY: 0
                    }), this.comic.add(b, {
                        triggers: [{
                            atScreenPosition: .7,
                            call: "transitionIn"
                        }]
                    }), this.comic.wrap(0), e = new i("2col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/022-028/15.png"), this.comic.add(a), a = new j("4col", "1tier", "images/022-028/16.png"), this.comic.add(a), this.comic.wrap(500), a = new j("12col", "1tier", "images/022-028/17a.png"), this.comic.add(a), this.comic.wrap(500), b = new l("6col", "1tier", '<p class="frame-external-text small dark">On the bus, Mai looked out the back window &mdash;</p>'),
                    this.comic.add(b), b = new l("6col", "1tier", '<p class="frame-external-text small dark">searching for her mother&rsquo;s face &mdash;</p>'), this.comic.add(b), this.comic.wrap(60), a = new j("6col", "1tier", "images/022-028/17.png"), this.comic.add(a), a = new j("6col", "1tier", "images/022-028/18.png"), this.comic.add(a), this.comic.wrap(1300), Ea = new g("busDrive", .4), c = new y, this.comic.add(c, {
                        center: !0,
                        activeBetweenScreenPosition: {
                            min: -3,
                            max: 2
                        },
                        triggers: [{
                            atScreenPosition: 1,
                            target: Ea,
                            call: "play"
                        }],
                        maps: [{
                            property: "bgInOpacity",
                            startScreenPosition: 2,
                            endScreenPosition: .3,
                            startValue: 0,
                            endValue: .8
                        }, {
                            property: "bgDistance",
                            startScreenPosition: 2,
                            endScreenPosition: -1.15,
                            startValue: 1,
                            endValue: 0
                        }, {
                            property: "bgOutOpacity",
                            startScreenPosition: 0,
                            endScreenPosition: -1.15,
                            startValue: .8,
                            endValue: 0
                        }]
                    }), this.comic.wrap(0), b = new l("9col", "1tier", '<p class="display-text medium dark">but the street, like a wound, had closed over the space where it had been.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(1900), this.comic.createAnchor("chapter3"), c = new xa(2), Ea = new g("chapterMotif"), this.comic.add(c, {
                        center: !0,
                        triggers: [{
                            atScreenPosition: .9,
                            call: "transitionIn"
                        }, {
                            atScreenPosition: .9,
                            target: Ea,
                            call: "play"
                        }, {
                            atScreenPosition: .9,
                            target: d,
                            call: "sendCustomEvent",
                            params: ["chapter/3"]
                        }]
                    }), this.comic.wrap(900), Fa = new f("marketsAtmos"), b = new l("9col", "1tier", '<p class="display-text small dark">In Rach Gia, in the milling market, Mai waited for Uncle next to a grease stand; petrol and oils and lubricants spread out like lunch condiments.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(210), c = new z, this.comic.add(c, {
                        center: !0,
                        triggers: [{
                            atScreenPosition: .6,
                            call: "transitionIn"
                        }],
                        maps: [{
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 1.5,
                            endScreenPosition: .5,
                            startValue: 0,
                            endValue: .75
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: .5,
                            endScreenPosition: -2,
                            startValue: .75,
                            endValue: 0
                        }]
                    }), this.comic.wrap(0), b = new m("12col", "1tier", '<div class="bk-large-bl-01 emphasis bk-font-large"><div class="dialog"><p>Mai!</p></div></div>', {
                        offsetX: 50,
                        offsetY: 180,
                        offsetZ: 300
                    }), this.comic.add(b, {
                        center: !0,
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), b = new m("12col", "1tier", '<div class="bk-small-bl-01 emphasis"><div class="dialog"><p>Mai,<br/>ha?</p></div></div>', {
                        offsetX: 700,
                        offsetY: 290,
                        offsetZ: 200
                    }), this.comic.add(b, {
                        center: !0,
                        triggers: [{
                            atScreenPosition: .6,
                            call: "transitionIn"
                        }]
                    }), this.comic.wrap(650), b = new l("4col", "1tier", '<p class="frame-external-text small dark">She was confused. He said it again and glared straight at her for the first time. She tried hard not to cry.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">All at once Mai remembered her mother&rsquo;s instructions. The folded paper.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">He read it, furtively, refolded it into a tiny square.</p>'), this.comic.add(b), this.comic.wrap(0), b = new m("4col", "1tier", '<div class="bk-medium-tr-02"><div class="dialog"><p>Child has the letter?</p></div></div>', {
                        offsetX: -450,
                        offsetY: 310
                    }), this.comic.add(b, {
                        center: !0,
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(120), a = new j("4col", "1tier", "images/034-041/01.png"), this.comic.add(a), a = new j("4col", "1tier", "images/034-041/02.png"), this.comic.add(a), a = new j("4col", "1tier", "images/034-041/03.png"), this.comic.add(a), this.comic.wrap(800), b = new l("12col", "1tier", ['<div class="display-text medium dark">', "<p>", "The first hiding place was behind a house by the river.", "</p>", "</div>"]), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(410), e = new i("2col"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Uncle told her to climb to the top of a plank bed and stay there, don’t go anywhere.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">She lay with the corrugated aluminium roof just a few thumbs above her head, and in the middle of the day the heat was unbearable.</p>'), this.comic.add(b), this.comic.wrap(130), e = new i("2col"), this.comic.add(e), a = new j("4col", "1tier", "images/034-041/03-a.png"), this.comic.add(a), a = new j("4col", "1tier", "images/034-041/03-b.png"), this.comic.add(a), this.comic.wrap(800), b = new l("4col", "1tier", ['<div class="frame-internal-text small dark">', "<p>", "A few days later Uncle came to get her &mdash; it was the worst of the afternoon heat &mdash; and ", "made her memorise a name and address in case anyone asked questions.", "</p>", "</div>"]), this.comic.add(b), a = new j("4col", "1tier", "images/034-041/04.png"), this.comic.add(a), b = new l("4col", "1tier", ['<div class="frame-internal-text small dark">', "<p>", "It was the last she saw of him.", "</p>", "</div>"]), this.comic.add(b), this.comic.wrap(800), e = new i("2col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/034-041/05.png"), this.comic.add(a), b = new l("6col", "1tier", ['<div class="frame-internal-text small light">', "<p>", "The second hiding place was a boat anchored beneath a bridge on the Loc Thang river.", "<br/><br/>", "One night the owner appeared and tapped her on the shoulder. He tapped five other people as well. They all followed him out ", "into the hot dark strange openness.", "</p>", "</div>"]), this.comic.add(b), this.comic.wrap(800), Ea = new g("match"), Fa = new f("rowingAtmos"), c = new A, this.comic.add(c, {
                        center: !0,
                        activeBetweenScreenPosition: {
                            min: -14,
                            max: 5
                        },
                        triggers: [{
                            atScreenPosition: -2,
                            call: "showSignal"
                        }, {
                            atScreenPosition: -2,
                            target: Ea,
                            call: "play"
                        }],
                        maps: [{
                            property: "visibleHack",
                            startScreenPosition: 2,
                            endScreenPosition: 1.9,
                            startValue: 0,
                            endValue: 1
                        }, {
                            property: "whiteMatteOpacityIn",
                            startScreenPosition: 2,
                            endScreenPosition: 1.5,
                            startValue: 1,
                            endValue: 0
                        }, {
                            property: "canoeOpacity",
                            startScreenPosition: 1,
                            endScreenPosition: .7,
                            startValue: 0,
                            endValue: 1
                        }, {
                            property: "canoePosition",
                            startScreenPosition: 2,
                            endScreenPosition: -13,
                            startValue: 0,
                            endValue: 1
                        }, {
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 2.5,
                            endScreenPosition: .5,
                            startValue: 0,
                            endValue: .75
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: -12,
                            endScreenPosition: -14,
                            startValue: .75,
                            endValue: 0
                        }]
                    }), this.comic.wrap(0), e = new i("1col", "1tier"), this.comic.add(e), b = new l("6col", "1tier", ['<div class="frame-internal-text small light">', "<p>", "A rower waited nearby.", "<br/><br/>", "After some hesitation and muted dissent they climbed into his canoe, Mai in the middle.", "</p>", "</div>"]), this.comic.add(b), a = new j("4col", "1tier", "images/034-041/06.png"), this.comic.add(a), this.comic.wrap(850), a = new j("4col", "1tier", "images/034-041/07.png"), this.comic.add(a), this.comic.wrap(800), e = new i("5col", "1tier"), this.comic.add(e), a = new j("7col", "1tier", "images/034-041/08.png"), this.comic.add(a), this.comic.wrap(800), a = new j("4col", "1tier", "images/034-041/09.png"), this.comic.add(a), this.comic.wrap(225), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/034-041/10.png"), this.comic.add(a), this.comic.wrap(800), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/034-041/11.png"), this.comic.add(a), this.comic.wrap(800), e = new i("9col", "1tier"), this.comic.add(e), a = new j("2col", "1tier", "images/034-041/12.png"), this.comic.add(a), this.comic.wrap(800), a = new j("4col", "1tier", "images/034-041/13.png"), this.comic.add(a), this.comic.wrap(225), e = new i("9col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/034-041/14.png"), this.comic.add(a), this.comic.wrap(950), b = new l("9col", "1tier", ['<div class="display-text small light">', "<p>At that moment Mai realised the incense stick &mdash; its dim glow, its smoke, perhaps &mdash; was their signal.</p>", "</div>"]), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(450), e = new i("5col", "1tier"), this.comic.add(e), b = new m("4col", "1tier", '<div class="bk-medium-bl-02"><div class="dialog"><p>Maybe they&rsquo;re waiting.</p></div></div>', {
                        offsetX: -130,
                        offsetY: -30
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("4col", "1tier", '<div class="bk-large-l-01"><div class="dialog"><p>Move out of the reeds so they can see the signal.</p></div></div>', {
                        offsetX: -590,
                        offsetY: 100
                    }), this.comic.add(b, {
                        triggers: [{
                            atScreenPosition: .7,
                            call: "transitionIn"
                        }]
                    }), this.comic.wrap(0), e = new i("2col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/034-041/18.png"), this.comic.add(a), this.comic.wrap(225), e = new i("7col", "1tier"), this.comic.add(e), b = new m("4col", "1tier", '<div class="bk-medium-r-01 emphasis"><div class="dialog"><p>Keep your head down!</p></div></div>', {
                        offsetX: -50,
                        offsetY: 90
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), e = new i("7col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/034-041/19.png"), this.comic.add(a), this.comic.wrap(337), e = new i("2col", "1tier"), this.comic.add(e), b = new m("4col", "1tier", '<div class="bk-large-bl-01"><div class="dialog"><p>They won&rsquo;t wait! Move out of the reeds!</p></div></div>', {
                        offsetX: 260,
                        offsetY: -80
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), e = new i("2col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/034-041/20.png"), this.comic.add(a), this.comic.wrap(800), Ea = new g("whisper"), e = new i("4col", "1tier"), this.comic.add(e), b = new m("4col", "1tier", '<div class="bk-medium-bl-01"><div class="dialog"><p>My name is Chi Quyen.</p></div></div>', {
                        offsetX: 140,
                        offsetY: -50
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), e = new i("4col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/034-041/21.png"), this.comic.add(a, {
                        triggers: [{
                            atScreenPosition: 1,
                            target: Ea,
                            call: "play"
                        }]
                    }), this.comic.wrap(600), e = new i("1col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small light">The woman used the word &lsquo;Chi&rsquo;, for older sister.</p>'), this.comic.add(b), this.comic.wrap(90), e = new i("1col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/034-041/22.png"), this.comic.add(a), this.comic.wrap(225), e = new i("8col", "1tier"), this.comic.add(e), b = new m("4col", "1tier", '<div class="bk-medium-br-02"><div class="dialog"><p>Chi is by<br/>herself too.</p></div></div>', {
                        offsetX: -140,
                        offsetY: -50
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/034-041/23.png"), this.comic.add(a), this.comic.wrap(600), e = new i("4col", "1tier"), this.comic.add(e), b = new m("0col", "1tier", '<div class="bk-medium-br-02"><div class="dialog"><p>If they come, follow Chi, nha?</p></div></div>', {
                        offsetX: -200,
                        offsetY: -70
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-small-bl-01"><div class="dialog"><p>If who comes?</p></div></div>', {
                        offsetX: 410,
                        offsetY: 40
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-large-t-01"><div class="dialog"><p>Jump out and swim into the reeds. You can swim, no?</p></div></div>', {
                        offsetX: -20,
                        offsetY: 250
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), e = new i("4col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/034-041/24.png"), this.comic.add(a), this.comic.wrap(1e3), Ea = new g("shh"), e = new i("2col", "1tier"), this.comic.add(e), b = new m("0col", "1tier", '<div class="bk-x-large-bl-01 emphasis"><div class="dialog"><p>Fuck<br/>your<br/>mother!</p></div></div>', {
                        offsetX: 560,
                        offsetY: -700
                    }), this.comic.add(b, {
                        triggers: [{
                            atScreenPosition: 1.4,
                            call: "transitionIn"
                        }, {
                            atScreenPosition: 1.4,
                            target: Ea,
                            call: "play"
                        }]
                    }), b = new m("0col", "1tier", '<div class="bk-x-large-nt-01 emphasis"><div class="dialog"><p>I said keep your head down!</p></div></div>', {
                        offsetX: 700,
                        offsetY: 100
                    }), this.comic.add(b, {
                        triggers: [{
                            atScreenPosition: .7,
                            call: "transitionIn"
                        }]
                    }), this.comic.wrap(0), e = new i("2col", "1tier"), this.comic.add(e), a = new j("8col", "2tier", "images/034-041/25.png"), this.comic.add(a), this.comic.wrap(1e3), Ea = new g("signalAccent"), c = new B, this.comic.add(c, {
                        center: !0,
                        activeBetweenScreenPosition: {
                            min: -10,
                            max: 10
                        },
                        triggers: [{
                            atScreenPosition: .7,
                            call: "flash"
                        }, {
                            atScreenPosition: .7,
                            target: Ea,
                            call: "play"
                        }]
                    }), this.comic.wrap(900), c = new C, this.comic.add(c, {
                        center: !0,
                        maps: [{
                            property: "canoePosition",
                            startScreenPosition: 1.3,
                            endScreenPosition: .4,
                            startValue: 1,
                            endValue: 0
                        }]
                    }), this.comic.wrap(900), a = new D, this.comic.add(a, {
                        center: !0
                    }), this.comic.wrap(1200), b = new l("9col", "1tier", '<div class="display-text medium light"><p>Inside the hold, the stench was incredible, almost eye-watering. The smell of urine and human waste, sweat and vomit. The black space full of people. Bodies upon bodies. Eyes and eyes and eyes.</p></div>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(600), a = new sa("12col", "1tier", "images/042-047/01.png"), this.comic.add(a, {
                        center: !0
                    }), this.comic.wrap(900), Fa = new f("boatCreaking"), c = new E, this.comic.add(c, {
                        center: !0,
                        activeBetweenScreenPosition: {
                            min: -6,
                            max: 6
                        },
                        maps: [{
                            property: "bgOpacity",
                            startScreenPosition: 0,
                            endScreenPosition: -2,
                            startValue: 1,
                            endValue: 0
                        }, {
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 2.5,
                            endScreenPosition: .5,
                            startValue: 0,
                            endValue: 1
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: 0,
                            endScreenPosition: -4,
                            startValue: 1,
                            endValue: 0
                        }]
                    }), this.comic.wrap(0), Fa = new f("gunfireAtmos"), b = new l("9col", "1tier", '<div class="display-text medium light"><p>If she&rsquo;d thought the first boat was crowded, here she could barely breathe, let alone move. Later she counted at least two hundred people, squashed into a space meant for fifteen.</p></div>'), this.comic.add(b, {
                        center: !0,
                        maps: [{
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 1,
                            endScreenPosition: .5,
                            startValue: 0,
                            endValue: .75
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: 0,
                            endScreenPosition: -4,
                            startValue: .75,
                            endValue: 0
                        }]
                    }), this.comic.wrap(600), b = new l("4col", "1tier", '<p class="frame-external-text small light">They were gliding into a busy port. Pressed hard beneath her was the body of the boy Quyen had been talking to.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small light">A voice came from above deck, so subdued the person may have been talking to himself.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small light">She settled forward against the young boy, not wanting to hear any more. Trying to block it all out; the voices, the smell.</p>'), this.comic.add(b), this.comic.wrap(170), b = new m("0col", "1tier", '<div class="bk-medium-squiggle-t-01"><div class="bk-font-small dialog"><p>Viet Cong&hellip; manned with two M30s.</p></div></div>', {
                        offsetX: 350,
                        offsetY: -80
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-small-tr-01"><div class="bk-font-small dialog"><p>Automatic, no?</p></div></div>', {
                        offsetX: 450,
                        offsetY: 80,
                        offsetZ: 20
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-small-t-01"><div class="bk-font-small dialog"><p>Machine<br/>guns.</p></div></div>', {
                        offsetX: 350,
                        offsetY: 120,
                        offsetZ: 40
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-squiggle-t-01"><div class="bk-font-small dialog"><p>Leave at night and they shoot. They shoot<br/>anything.</p></div></div>', {
                        offsetX: 820,
                        offsetY: -90
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-small-t-01"><div class="bk-font-small dialog"><p>We&rsquo;ll find out soon<br/>enough.</p></div></div>', {
                        offsetX: 950,
                        offsetY: 60,
                        offsetZ: 80
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), a = new j("4col", "1tier", "images/042-047/02.png"), this.comic.add(a), a = new j("4col", "1tier", "images/042-047/03.png"), this.comic.add(a), a = new j("4col", "1tier", "images/042-047/04.png"), this.comic.add(a), this.comic.wrap(500), b = new l("4col", "1tier", '<p class="frame-external-text small light">She watched as Quyen reached back and with a surprisingly practised gesture pressed her palm against the boy&rsquo;s head.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small light">She pulled the boy&rsquo;s body closer to her;</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small light">it squirmed like a restless animal&rsquo;s.</p>'), this.comic.add(b), this.comic.wrap(0), b = new m("0col", "1tier", '<div class="bk-medium-b-01"><div class="dialog"><p>Don&rsquo;t be nuis-<br/>ance, Child.</p></div></div>', {
                        offsetX: 950,
                        offsetY: 210
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(150), a = new j("4col", "1tier", "images/042-047/05.png"), this.comic.add(a), a = new j("4col", "1tier", "images/042-047/06.png"), this.comic.add(a), a = new j("4col", "1tier", "images/042-047/07.png"), this.comic.add(a), this.comic.wrap(500), Ea = new g("grind"), e = new i("4col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small light">In the silence that followed, even the tidal backwash seemed loud against the hull.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small light">Then a grind against the boat. Mai had never heard a sound so sudden and hideous.</p>'), this.comic.add(b), this.comic.wrap(100), b = new m("0col", "1tier", '<div class="bk-medium-br-02"><div class="dialog"><p>This is my little brat. Truong.</p></div></div>', {
                        offsetX: 300,
                        offsetY: 50
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-small-tl-01"><div class="dialog"><p>Yours? But &mdash;</p></div></div>', {
                        offsetX: 840,
                        offsetY: 160
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-x-small-nt-01 emphasis"><div class="dialog"><p>SHH!</p></div></div>', {
                        offsetX: 600,
                        offsetY: 0
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-x-small-nt-01 emphasis"><div class="dialog"><p>SHH!</p></div></div>', {
                        offsetX: 450,
                        offsetY: 300
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-x-small-nt-01 emphasis"><div class="dialog"><p>SHH!</p></div></div>', {
                        offsetX: 770,
                        offsetY: 400
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new ta("4col", "1tier", "images/042-047/08.png"), this.comic.add(a), a = new ta("4col", "1tier", "images/042-047/09.png"), this.comic.add(a), a = new ta("4col", "1tier", "images/042-047/10.png"), this.comic.add(a), this.comic.wrap(500), e = new i("4col", "1tier"), this.comic.add(e), e = new i("4col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small light">The sound sheared off &mdash; leaving behind a deep, capacious silence.</p>'), this.comic.add(b), this.comic.wrap(75), b = new m("0col", "1tier", '<div class="bk-medium-nt-01"><div class="dialog"><p>What is it?</p></div></div>', {
                        offsetX: -20,
                        offsetY: -10
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-small-nt-01"><div class="dialog"><p>A mine?</p></div></div>', {
                        offsetX: 250,
                        offsetY: 280
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-nt-01"><div class="dialog"><p>I heard they put land mines &mdash;</p></div></div>', {
                        offsetX: 300,
                        offsetY: 360
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new ta("4col", "1tier", "images/042-047/11.png"), this.comic.add(a), a = new ta("4col", "1tier", "images/042-047/12.png"), this.comic.add(a), a = new ta("4col", "1tier", "images/042-047/13.png"), this.comic.add(a, {
                        triggers: [{
                            atScreenPosition: .9,
                            target: Ea,
                            call: "play"
                        }, {
                            atScreenPosition: .9,
                            target: ta,
                            call: "grind"
                        }]
                    }), this.comic.wrap(1e3), Ha = new pa, this.comic.add(Ha, {
                        triggers: [{
                            atScreenPosition: 1.1,
                            call: "transitionIn"
                        }]
                    }), Ha.addEventListener("click", function() {
                        this.comic.switchStoryLine("bidong"), d.sendCustomEvent("sidestory/bidong")
                    }.bind(this)), this.comic.startAuthoringStoryLine("bidong"), this.comic.wrap(500), b = new l("9col", "1tier", '<p class="display-text medium light">According to Quyen, Truong&rsquo;s father &mdash; her husband &mdash; had already made his escape. She told Mai that he had arrived safely in Pulau Bidong, one of the larger Malaysian refugee camps, eight months ago.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(350), c = new ka, this.comic.add(c, {
                        center: !0
                    }), this.comic.wrap(1300), e = new i("4col"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small light">He was waiting for them there. Why hadn&rsquo;t they travelled together?</p>'), this.comic.add(b), this.comic.wrap(75), b = new m("0col", "1tier", '<div class="bk-medium-bl-01"><div class="dialog"><p>We are going to Australia.</p></div></div>', {
                        offsetX: 850,
                        offsetY: -60
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-tl-01"><div class="dialog"><p>Do you have family there?</p></div></div>', {
                        offsetX: 750,
                        offsetY: 250
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), e = new i("4col"), this.comic.add(e), a = new j("4col", "1tier", "images/b-line-bidong/01.png"), this.comic.add(a), this.comic.wrap(1200), c = new la, this.comic.add(c, {
                        center: !0
                    }), this.comic.wrap(700), b = new m("0col", "1tier", '<div class="bk-medium-tr-01"><div class="dialog"><p>I don&rsquo;t know.</p></div></div>', {
                        offsetX: -170,
                        offsetY: 180
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-tl-01"><div class="dialog"><p>You don&rsquo;t know?</p></div></div>', {
                        offsetX: 300,
                        offsetY: 300
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-br-02"><div class="dialog"><p>Then Mai will come with us.</p></div></div>', {
                        offsetX: 560,
                        offsetY: -80
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-x-small-t-01"><div class="dialog"><p>Thoi.</p></div></div>', {
                        offsetX: 600,
                        offsetY: 190
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-t-01"><div class="dialog"><p>You must come.</p></div></div>', {
                        offsetX: 700,
                        offsetY: 230
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-large-t-01"><div class="dialog"><p>This one likes you. He talks about you all the time.</p></div></div>', {
                        offsetX: 1150,
                        offsetY: 280
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("4col", "1tier", "images/b-line-bidong/02.png"), this.comic.add(a), a = new j("4col", "1tier", "images/b-line-bidong/03.png"), this.comic.add(a), a = new j("4col", "1tier", "images/b-line-bidong/04.png"), this.comic.add(a), this.comic.wrap(800), b = new l("9col", "1tier", '<p class="display-text medium light">Mai flushed with pleasure, not fully understanding why.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(250), b = new m("0col", "1tier", '<div class="bk-medium-br-02"><div class="dialog bk-font-small"><p>He is very good.<br/>Very patient.</p></div></div>', {
                        offsetX: -60,
                        offsetY: -50
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-large-t-01"><div class="dialog bk-font-small"><p>And who ever has heard of a boy that can sing like that? It&rsquo;s a miracle. </p></div></div>', {
                        offsetX: 30,
                        offsetY: 300
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-tl-01"><div class="dialog"><p>He will make you rich one day.</p></div></div>', {
                        offsetX: 450,
                        offsetY: 320
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-small-l-01"><div class="dialog"><p>Don&rsquo;t<br/>joke.</p></div></div>', {
                        offsetX: 1270,
                        offsetY: 140
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-t-01"><div class="dialog"><p>I am not joking.</p></div></div>', {
                        offsetX: 930,
                        offsetY: 200
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("4col", "1tier", "images/b-line-bidong/05.png"), this.comic.add(a), a = new j("4col", "1tier", "images/b-line-bidong/06.png"), this.comic.add(a), a = new j("4col", "1tier", "images/b-line-bidong/07.png"), this.comic.add(a), this.comic.wrap(900), b = new m("0col", "1tier", '<div class="bk-medium-bl-01"><div class="dialog"><p>That one was an accident.</p></div></div>', {
                        offsetX: 300,
                        offsetY: -10
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-large-tl-01"><div class="dialog"><p>He slid out in<br/>the middle of the war. I was your age then.</p></div></div>', {
                        offsetX: 200,
                        offsetY: 330
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("4col", "1tier", "images/b-line-bidong/08.png"), this.comic.add(a), b = new l("8col", "1tier", '<p class="display-text medium light">Mai said nothing.</p>', {
                        offsetY: 200
                    }), this.comic.add(b), this.comic.wrap(480), c = new ma, this.comic.add(c, {
                        center: !0
                    }), this.comic.wrap(320), e = new i("2col"), this.comic.add(e), b = new m("0col", "1tier", '<div class="bk-medium-br-01"><div class="dialog bk-font-small"><p>Maybe more accidents will happen.</p></div></div>', {
                        offsetX: -160,
                        offsetY: -30
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-x-small-bl-01 emphasis"><div class="dialog"><p>Hah!</p></div></div>', {
                        offsetX: 410,
                        offsetY: 20
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-large-tl-01"><div class="dialog"><p>When you see your husband again. When we reach land.</p></div></div>', {
                        offsetX: 200,
                        offsetY: 330
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), e = new i("2col"), this.comic.add(e), a = new j("4col", "1tier", "images/b-line-bidong/09.png"), this.comic.add(a), this.comic.wrap(900), b = new l("9col", "1tier", '<p class="display-text medium light">But the mention of land &mdash; coming even from her own mouth cancelled out any joke for Mai.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(450), b = new l("4col", "1tier", '<p class="frame-external-text small light">Watching Truong &mdash; letting in the thought of another day, and after that, another &mdash;</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small light">Mai realised that Quyen&rsquo;s determination felt increasingly superficial to her.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small light">She studied the boy&rsquo;s face. Above his awkward shape it remained as stony and impassive as ever.</p>'), this.comic.add(b), this.comic.wrap(105), b = new m("0col", "1tier", '<div class="bk-medium-bl-02"><div class="dialog bk-font-small"><p>Wasn&rsquo;t it dangerous to escape with Truong so young?</p></div></div>', {
                        offsetX: 250,
                        offsetY: 30
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-tl-01"><div class="dialog bk-font-small"><p>It was because of him I decided to escape.</p></div></div>', {
                        offsetX: 610,
                        offsetY: 310
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("4col", "1tier", "images/b-line-bidong/10.png"), this.comic.add(a), a = new j("4col", "1tier", "images/b-line-bidong/11.png"), this.comic.add(a), a = new j("4col", "1tier", "images/b-line-bidong/12.png"), this.comic.add(a), this.comic.wrap(700), b = new l("8col", "1tier", '<div class="display-text medium light"><p>Mai marvelled at how he lived in a space of his own absorption.</p><p>It seemed impossible they&rsquo;d just met.</p></div>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(500), Ha = new ra, this.comic.add(Ha, {
                        center: !0,
                        triggers: [{
                            atScreenPosition: .8,
                            call: "transitionIn"
                        }]
                    }), Ha.addEventListener("click", this.onBackButtonClick), this.comic.endAuthoringStoryLine(), e = new i("4col", "1tier"), this.comic.add(e), b = new l("8col", "1tier", '<p class="frame-external-text small light">All around them peoples&rsquo; faces were untensing, voices and bodies stirring in restless relief.</p>'), this.comic.add(b), this.comic.wrap(90), b = new m("0col", "1tier", '<div class="bk-medium-b-01 emphasis"><div class="dialog"><p>We&rsquo;re safe for now.</p></div></div>', {
                        offsetX: 90,
                        offsetY: -90
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("4col", "1tier", "images/042-047/14.png"), this.comic.add(a), a = new j("8col", "1tier", "images/042-047/15.png"), this.comic.add(a), this.comic.wrap(1100), this.comic.createAnchor("chapter4"), Ea = new g("engine");
                var Na = new g("chapterMotif");
                c = new xa(3), this.comic.add(c, {
                        center: !0,
                        triggers: [{
                            atScreenPosition: .9,
                            call: "transitionIn"
                        }, {
                            atScreenPosition: .9,
                            target: Na,
                            call: "play"
                        }, {
                            atScreenPosition: .2,
                            target: Ea,
                            call: "play"
                        }, {
                            atScreenPosition: .9,
                            target: d,
                            call: "sendCustomEvent",
                            params: ["chapter/4"]
                        }]
                    }), this.comic.wrap(900), Fa = new f("boatAtmosExt"), c = new F, this.comic.add(c, {
                        center: !0,
                        activeBetweenScreenPosition: {
                            min: -6,
                            max: 5.5
                        },
                        maps: [{
                            property: "bgOpacityIn",
                            startScreenPosition: 1,
                            endScreenPosition: -.33,
                            startValue: 1,
                            endValue: 0
                        }, {
                            property: "glare",
                            startScreenPosition: -2,
                            endScreenPosition: -6,
                            startValue: 0,
                            endValue: 1
                        }, {
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 2.5,
                            endScreenPosition: .5,
                            startValue: 0,
                            endValue: .7
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: -7,
                            endScreenPosition: -8.5,
                            startValue: .7,
                            endValue: 0
                        }]
                    }), this.comic.wrap(1100), b = new l("9col", "1tier", ['<div class="display-text small dark">', "<p>Fishermen on the boat agreed that this storm had come on faster than any they&rsquo;d ever experienced. It destroyed the caulking and much of the planking on the hull. The inboard was flooded, and soon afterward, both engines cut out completely.</p>", "</div>"]), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(120), a = new j("12col", "1tier", "images/048-052/01.png"), this.comic.add(a, {
                        center: !0
                    }), this.comic.wrap(500), b = new l("7col", "1tier", '<p class="frame-external-text small dark">What food had been left was spoiled. Water was short. The remaining supply was rationed out first to children, then the infirm, then everyone else.</p>'), this.comic.add(b), b = new l("5col", "1tier", '<p class="frame-external-text small dark">It amounted to a couple of wet mouthfuls a day.</p>'), this.comic.add(b), this.comic.wrap(120), a = new j("7col", "1tier", "images/048-052/02.png"), this.comic.add(a), a = new j("5col", "1tier", "images/048-052/03.png"), this.comic.add(a), this.comic.wrap(800), b = new l("4col", "1tier", '<p class="frame-external-text small dark">The heat was unbearable.</p>'), this.comic.add(b), this.comic.wrap(70), a = new j("4col", "1tier", "images/048-052/04.png"), this.comic.add(a), this.comic.wrap(120), e = new i("4col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Before long the first body was cast overboard.</p>'), this.comic.add(b), this.comic.wrap(90), e = new i("4col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/048-052/05.png"), this.comic.add(a), this.comic.wrap(120), e = new i("8col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Already a handful of people had been lost during the storm.</p>'), this.comic.add(b), this.comic.wrap(90), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/048-052/06.png"), this.comic.add(a), this.comic.wrap(500), e = new i("8col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small dark">But this was the first casualty witnessed by the entire boat.</p>'), this.comic.add(b), this.comic.wrap(90), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/048-052/07.png"), this.comic.add(a), this.comic.wrap(550), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/048-052/08.png"), this.comic.add(a), this.comic.wrap(500), Ea = new g("bodySplash01"), e = new i("8col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Like everyone else, Mai looked away.</p>'), this.comic.add(b), this.comic.wrap(45), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/048-052/09.png"), this.comic.add(a, {
                        triggers: [{
                            atScreenPosition: .5,
                            target: Ea,
                            call: "play"
                        }]
                    }), this.comic.wrap(1e3), b = new l("9col", "2tier", ['<div class="display-text medium dark">', "<p>After the storm it seemed to Mai that a film had been stripped from the world. ", "The sun hotter, the light more vivid, the sea darker, every word a discordant affront to the new silence.</p>", "<p>The storm had forced people into their privacies.</p>", "<p>Children turned introverted, playing as though conducting conversations with themselves.</p>", "<p>Even time took on a false depth, until it seemed as though everything that had ever happened had happened on the boat.</p>", "</div>"]), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(1e3),
                    b = new l("4col", "1tier", '<p class="frame-external-text small dark">Thirst set in. It was fantastic to be surrounded by so much water and yet be dehydrated. </p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">She imitated some of the other youth, hauling up a bucket tied to the bow-line.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Under the noon sun the seawater was the colour of amethyst. She drank it.</p>'), this.comic.add(b), this.comic.wrap(120), a = new j("4col", "1tier", "images/048-052/10.png"), this.comic.add(a), a = new j("4col", "1tier", "images/048-052/11.png"), this.comic.add(a), a = new j("4col", "1tier", "images/048-052/12.png"), this.comic.add(a), this.comic.wrap(500), b = new l("4col", "1tier", '<p class="frame-external-text small dark">It was all right at first. It was bliss.</p>'), this.comic.add(b), e = new i("4col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Then her throat started scalding and she wanted to claw it out.</p>'), this.comic.add(b), this.comic.wrap(75), a = new j("4col", "1tier", "images/048-052/13.png"), this.comic.add(a), a = new j("4col", "1tier", "images/048-052/15.png"), this.comic.add(a), a = new j("4col", "1tier", "images/048-052/14.png"), this.comic.add(a), this.comic.wrap(1100), b = new l("9col", "1tier", ['<div class="display-text dark medium">', "<p>She tried to sleep, to slide beneath the raw scour of pain in her throat. Her father was persistent in her thoughts now &mdash; all those weeks, even months, he&rsquo;d spent on this same sea, in trawlers much like this one. He&rsquo;d been here before her.</p>", "</div>"]), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(600), a = new ua("4col", "1tier", "images/054-mai-fever-alt/ba-01.png"), this.comic.add(a), b = new l("8col", "1tier", ['<div class="frame-internal-text small light">', "<p>In her fevered mind, it was her father before the war, before re-education, hospitalisation. Back when to see him was to be hoisted onto his shoulders, gripped by the ankles. His hands tough, saltish with the smell of wet rope.</p>", "</div>"]), this.comic.add(b), this.comic.wrap(900), b = new l("9col", "1tier", ['<div class="display-text medium light">', "<p>During his long absences at sea she had lived incompletely, waiting for him to come back so they could tell each other each moment of their time apart.</p>", "</div>"]), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(700), b = new l("9col", "1tier", ['<div class="display-text small light">', "<p>Each time Mai waited.</p>", "</div>"]), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(75), a = new ua("4col", "1tier", "images/054-mai-fever-alt/01.png"), this.comic.add(a, {
                        center: !0
                    }), this.comic.wrap(900), b = new l("9col", "1tier", ['<div class="display-text small light">', "<p>He had left for ten days and returned, strange and newly blind, after two years.</p>", "</div>"]), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(75), a = new ua("6col", "1tier", "images/054-mai-fever-alt/02.png"), this.comic.add(a, {
                        center: !0
                    }), this.comic.wrap(900), b = new l("4col", "1tier", '<p class="frame-external-text small light">A thought connected with another.</p>'), this.comic.add(b), this.comic.wrap(75), b = new m("0col", "1tier", '<div class="bk-large-bl-01 emphasis"><div class="dialog"><p>It was Ba who left Child!</p></div></div>', {
                        offsetX: 350,
                        offsetY: 0
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new ua("4col", "1tier", "images/054-mai-fever-alt/03.png"), this.comic.add(a), this.comic.wrap(900), e = new i("8col"), this.comic.add(e), a = new ua("4col", "1tier", "images/054-mai-fever-alt/ba-02.png"), this.comic.add(a), this.comic.wrap(-1700), Fa = new f("eerieRecollection"), c = new G, this.comic.add(c, {
                        center: !0,
                        activeBetweenScreenPosition: {
                            min: -5.8,
                            max: 6
                        },
                        maps: [{
                            property: "bgInOpacity",
                            startScreenPosition: 3.5,
                            endScreenPosition: 2.5,
                            startValue: 0,
                            endValue: 1
                        }, {
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 4,
                            endScreenPosition: 1,
                            startValue: 0,
                            endValue: 1
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: -4,
                            endScreenPosition: -8,
                            startValue: 1,
                            endValue: 0
                        }]
                    }), this.comic.wrap(2800), b = new l("9col", "1tier", ['<div class="display-text medium dark">', "<p>He was shaking her. She felt fingers groping around in her mouth, a polluting smell. She gasped as the pain flooded back into her body.</p>", "</div>"]), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(550), Ea = new g("cough", .3), c = new H, this.comic.add(c, {
                        center: !0,
                        triggers: [{
                            atScreenPosition: 1,
                            call: "transitionIn"
                        }, {
                            atScreenPosition: 1,
                            target: Ea,
                            call: "play"
                        }],
                        maps: [{
                            property: "whiteMatteOpacity",
                            startScreenPosition: 1.55,
                            endScreenPosition: 1.25,
                            startValue: 0,
                            endValue: 1
                        }]
                    }), this.comic.wrap(500), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/060-064/01.png"), this.comic.add(a, {}), this.comic.wrap(1e3), b = new l("9col", "1tier", ['<div class="display-text medium dark">', "<p>Her eyes refocused and she realised it was not her father she saw but Truong, standing gaunt over her.</p>", "<p>She finally understood, with a deep internal tremor, what it was that had drawn her to the boy all this time.</p>", "</div>"]), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(1e3), b = new l("4col", "1tier", ['<div class="display-text medium dark">', "<p>It was not, as she had first assumed, his age &mdash; his awkward build.</p>", "</div>"], {
                        offsetX: -500,
                        offsetY: 400
                    }), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(0), b = new l("4col", "1tier", ['<div class="display-text medium dark">', "<p>It was his face.</p>", "</div>"], {
                        offsetX: 500,
                        offsetY: 800
                    }), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(0), b = new l("4col", "1tier", ['<div class="display-text medium dark">', "<p>The expression on his face was the same expression she had seen on her father&rsquo;s face&hellip;</p>", "</div>"], {
                        offsetX: -500,
                        offsetY: 1200
                    }), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(0), b = new l("4col", "1tier", ['<div class="display-text medium dark">', "<p>&hellip;every day, since he&rsquo;d returned from re-education.</p>", "</div>"], {
                        offsetX: 500,
                        offsetY: 1600
                    }), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(0), b = new l("4col", "1tier", ['<div class="display-text medium dark">', "<p>It was a face dead of surprise.</p>", "</div>"], {
                        offsetX: -500,
                        offsetY: 2e3
                    }), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(0), c = new I, this.comic.add(c, {
                        center: !0,
                        triggers: [{
                            call: "transitionIn",
                            atScreenPosition: .25
                        }]
                    }), this.comic.wrap(3500), b = new m("0col", "1tier", '<div class="bk-x-large-nt-01"><div class="dialog"><p>Mai&rsquo;s fever has broken!</p></div></div>', {
                        offsetX: 200,
                        offsetY: -150
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-bl-01"><div class="dialog"><p>You slept almost two days.</p></div></div>', {
                        offsetX: 800,
                        offsetY: -100
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-t-01"><div class="dialog"><p>Where is Truong?</p></div></div>', {
                        offsetX: 570,
                        offsetY: 200
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), e = new i("3col"), this.comic.add(e), a = new j("6col", "1tier", "images/060-064/02.png"), this.comic.add(a), this.comic.wrap(550), Fa = new f("boatAtmosExt"), b = new m("12col", "1tier", '<div class="bk-medium-br-01"><div class="dialog"><p>Come. Everyone&rsquo;s up here.</p></div></div>', {
                        offsetX: 280,
                        offsetY: -30
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("12col", "1tier", "images/060-064/03.png"), this.comic.add(a, {
                        maps: [{
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 4,
                            endScreenPosition: -1,
                            startValue: 0,
                            endValue: .6
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: -15,
                            endScreenPosition: -17,
                            startValue: .6,
                            endValue: 0
                        }]
                    }), this.comic.wrap(550), b = new m("0col", "1tier", '<div class="bk-medium-br-01"><div class="dialog"><p>Down there are all the sick people.</p></div></div>', {
                        offsetX: 300,
                        offsetY: 200
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-tl-01"><div class="dialog"><p>Sick people? Where&rsquo;s Truong?</p></div></div>', {
                        offsetX: 710,
                        offsetY: 240
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("12col", "1tier", "images/060-064/04.png"), this.comic.add(a), this.comic.wrap(700), b = new l("9col", "1tier", '<p class="display-text medium dark">She almost cried when she saw him &mdash; gone was the pale, delicate-faced boy she&rsquo;d remembered.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(300), c = new J, this.comic.add(c, {
                        center: !0
                    }), this.comic.wrap(800), b = new l("9col", "1tier", '<p class="display-text medium dark">Now his lips were bloated, the skin of his cheeks brown, chapped in the pattern of bruised glass. An awful new wateriness in his gaze.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(400), b = new m("0col", "1tier", '<div class="bk-medium-br-02"><div class="dialog"><p>Is Child well?</p></div></div>', {
                        offsetX: -20,
                        offsetY: -90
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-tr-01"><div class="dialog"><p>Yes. How is Chi Mai?</p></div></div>', {
                        offsetX: 50,
                        offsetY: 250
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-small-br-01"><div class="dialog"><p>Well.<br/>Better.</p></div></div>', {
                        offsetX: 450,
                        offsetY: -70
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-br-02"><div class="dialog"><p>Ma said Chi Mai was very sick.</p></div></div>', {
                        offsetX: 830,
                        offsetY: -50
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-tl-01"><div class="dialog"><p>Chi is better now.</p></div></div>', {
                        offsetX: 830,
                        offsetY: 270
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("4col", "1tier", "images/060-064/05.png"), this.comic.add(a), a = new j("4col", "1tier", "images/060-064/06.png"), this.comic.add(a), a = new j("4col", "1tier", "images/060-064/07.png"), this.comic.add(a), this.comic.wrap(800), b = new l("9col", "1tier", '<div class="display-text medium dark"><p>She hadn&rsquo;t heard him talk so much before. His voice came out scratchy but steady.</p><p>Seeing him, Mai&rsquo;s own body felt its full exhaustion.</p></div>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(800), this.comic.createAnchor("chapter5"), c = new xa(4), Ea = new g("chapterMotif"), this.comic.add(c, {
                        center: !0,
                        triggers: [{
                            atScreenPosition: .9,
                            call: "transitionIn"
                        }, {
                            atScreenPosition: .9,
                            target: Ea,
                            call: "play"
                        }, {
                            atScreenPosition: .9,
                            target: d,
                            call: "sendCustomEvent",
                            params: ["chapter/5"]
                        }]
                    }), this.comic.wrap(800), b = new l("9col", "1tier", '<div class="display-text medium dark"><p>The tenth day dawned. A young teenage girl with chicken legs wandered over to the gunwale. In a motion like a bow that didn&rsquo;t stop, she toppled gracefully over the side.</p></div>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(400), a = new j("4col", "1tier", "images/060-064/08.png"), this.comic.add(a), this.comic.wrap(120), e = new i("4col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/060-064/09.png"), this.comic.add(a), this.comic.wrap(120), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/060-064/10.png"), this.comic.add(a), this.comic.wrap(500), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/060-064/11.png"), this.comic.add(a), this.comic.wrap(500), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/060-064/12.png"), this.comic.add(a), this.comic.wrap(500), Ea = new g("bodySplash02"), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/060-064/13.png"), this.comic.add(a, {
                        triggers: [{
                            atScreenPosition: .5,
                            target: Ea,
                            call: "play"
                        }]
                    }), this.comic.wrap(900), Fa = new f("hook"), c = new K, this.comic.add(c, {
                        center: !0,
                        maps: [{
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 2,
                            endScreenPosition: 1,
                            startValue: 0,
                            endValue: 1
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: .5,
                            endScreenPosition: -1.5,
                            startValue: 1,
                            endValue: 0
                        }]
                    }), this.comic.wrap(750), b = new m("0col", "1tier", '<div class="bk-x-large-bl-01 emphasis"><div class="dialog"><p>Water!<br/>He needs<br/>water!</p></div></div>', {
                        offsetX: 790,
                        offsetY: 0
                    }), this.comic.add(b, {
                        triggers: [{
                            atScreenPosition: .9,
                            call: "transitionIn"
                        }]
                    }), this.comic.wrap(400), e = new i("2col"), this.comic.add(e), a = new j("8col", "1tier", "images/069-075/01.png"), this.comic.add(a), this.comic.wrap(700), a = new j("4col", "1tier", "images/069-075/02.png"), this.comic.add(a), a = new j("4col", "1tier", "images/069-075/03.png"), this.comic.add(a), a = new j("4col", "1tier", "images/069-075/04.png"), this.comic.add(a), this.comic.wrap(800), Ea = new g("punch"), c = new L, this.comic.add(c, {
                        center: !0,
                        triggers: [{
                            atScreenPosition: .75,
                            call: "transitionIn"
                        }, {
                            atScreenPosition: .75,
                            target: Ea,
                            call: "play"
                        }]
                    }), this.comic.wrap(750), Fa = new f("moodDesperate"), b = new m("0col", "1tier", '<div class="bk-medium-br-01 emphasis"><div class="dialog"><p>She<br/>stole<br/>water!</p></div></div>', {
                        offsetX: 170,
                        offsetY: -70
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-small-br-01"><div class="dialog"><p>I&rsquo;ll pay it back!</p></div></div>', {
                        offsetX: 850,
                        offsetY: -50
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("8col", "1tier", "images/069-075/05.png"), this.comic.add(a), a = new j("4col", "1tier", "images/069-075/06.png"), this.comic.add(a), this.comic.wrap(550), a = new j("4col", "1tier", "images/069-075/07.png"), this.comic.add(a), b = new l("8col", "1tier", ['<div class="frame-internal-text small dark">', "<p>People glanced over, disturbed by the waste.</p>", "</div>"]), this.comic.add(b, {
                        maps: [{
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 4,
                            endScreenPosition: 1,
                            startValue: 0,
                            endValue: 1
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: -3,
                            endScreenPosition: -7,
                            startValue: 1,
                            endValue: 0
                        }]
                    }), this.comic.wrap(600), b = new l("8col", "1tier", ['<div class="frame-internal-text medium dark">', "<p>Her temple still aching, she wrenched her eyes away from the water bottle and looked out instead at the sky.</p>", "</div>"]), this.comic.add(b), this.comic.wrap(400), b = new l("8col", "1tier", ['<div class="frame-internal-text medium dark">', "<p>Not a cloud in sight. But the sky was full of deceit &mdash; it looked the same everywhere.</p>", "</div>"]), this.comic.add(b), this.comic.wrap(400), b = new l("8col", "1tier", ['<div class="frame-internal-text medium dark">', "<p>She looked at the horizon, long and pale and eye-level all around them.</p>", "</div>"]), this.comic.add(b), this.comic.wrap(400), b = new l("8col", "1tier", ['<div class="frame-internal-text medium dark">', "<p>Whatever direction she looked, it fell away into more water.</p>", "</div>"]), this.comic.add(b), this.comic.wrap(500), c = new M, this.comic.add(c, {
                        center: !0,
                        activeBetweenScreenPosition: {
                            min: -3,
                            max: 7
                        },
                        maps: [{
                            property: "whiteMatteOpacity",
                            startScreenPosition: -1,
                            endScreenPosition: -2,
                            startValue: 0,
                            endValue: 1
                        }]
                    }), this.comic.wrap(1500), b = new l("9col", "1tier", ['<div class="display-text medium light">', "<p>Engines dead, the boat drifted on with men taking turns, as best they could, to steer the boat to the south.</p>", "</div>"]), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(300), b = new l("9col", "1tier", ['<div class="display-text medium light">', "<p>Each hour stretched out its hot minutes.</p>", "</div>"]), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(200), c = new N, this.comic.add(c, {
                        center: !0
                    }), this.comic.wrap(1200), b = new l("9col", "1tier", ['<div class="display-text medium dark">', "<p>Mai lay on her back under the derrick-crane, her head against someone&rsquo;s shin, limbs interwoven with her neighbours&rsquo;. Truong wedged beside her.</p>", "<p>The crane cast a shadow that inched up their bodies.</p>", "</div>"]), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(800), b = new l("6col", "1tier", '<p class="frame-external-text small dark">At one point a wind blew in and the boat began to sway, lightly, in the water. She was riding her father&rsquo;s shoulders. Her mother watching them happily.</p>'), this.comic.add(b), b = new l("6col", "1tier", '<p class="frame-external-text small dark">Truong started singing. Softly &mdash; to himself &mdash; so softly she wouldn&rsquo;t have heard him if her ear hadn&rsquo;t been inches from his mouth. She listened, hardly daring to breathe.</p>'), this.comic.add(b), this.comic.wrap(120), a = new j("6col", "1tier", "images/069-075/09.png"), this.comic.add(a), a = new j("6col", "1tier", "images/069-075/10.png"), this.comic.add(a), this.comic.wrap(900), Fa = new f("belowDeck"), c = new O, this.comic.add(c, {
                        center: !0,
                        activeBetweenScreenPosition: {
                            min: -5.5,
                            max: 2
                        },
                        maps: [{
                            property: "blackMatteInOpacity",
                            startScreenPosition: .5,
                            endScreenPosition: 0,
                            startValue: 0,
                            endValue: 1
                        }, {
                            property: "blackMatteOutOpacity",
                            startScreenPosition: -4,
                            endScreenPosition: -5.5,
                            startValue: 1,
                            endValue: 0
                        }, {
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 2,
                            endScreenPosition: 0,
                            startValue: 0,
                            endValue: 1
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: -6,
                            endScreenPosition: -8.5,
                            startValue: 1,
                            endValue: 0
                        }]
                    }), this.comic.wrap(0), b = new l("9col", "1tier", '<p class="display-text medium dark">When he finished, the silence that surged in afterwards was unbearable.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(600), b = new l("9col", "1tier", '<p class="display-text small light">The next morning, back below deck, she woke to find a puddle of vomit next to his curled-up, sleeping body. It gleamed grey in the early light of dawn.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(400), a = new j("12col", "2tier", "images/076-085/01.png", {
                        offsetZ: -150
                    }), this.comic.add(a), this.comic.wrap(400), b = new l("4col", "1tier", '<p class="frame-external-text small light">Mai poured her ration into Truong&rsquo;s cup.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small light">Quyen flinched and turned away.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small light">But for the first time she used the word for younger sister.</p>'), this.comic.add(b), this.comic.wrap(75), b = new m("0col", "1tier", '<div class="bk-medium-tl-01"><div class="dialog"><p>Thank you&hellip;<br/>Em gái.</p></div></div>', {
                        offsetX: 1250,
                        offsetY: 280
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("4col", "1tier", "images/076-085/02.png"), this.comic.add(a), a = new j("4col", "1tier", "images/076-085/03.png"), this.comic.add(a), a = new j("4col", "1tier", "images/076-085/04.png"), this.comic.add(a), this.comic.wrap(550), b = new l("6col", "1tier", '<p class="frame-external-text small light">Truong took some water in, then coughed some of it out. In the dusk light his face was pallid and shiny.</p>'), this.comic.add(b), this.comic.wrap(75), b = new m("0col", "1tier", '<div class="bk-small-br-01 emphasis"><div class="dialog"><p>Ma...<br/>Ma!</p></div></div>', {
                        offsetX: 650,
                        offsetY: 100
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-small-tl-01"><div class="dialog"><p>I&rsquo;m<br/>here.</p></div></div>', {
                        offsetX: 1200,
                        offsetY: 300
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("6col", "1tier", "images/076-085/05.png"), this.comic.add(a), a = new j("6col", "1tier", "images/076-085/06.png"), this.comic.add(a), this.comic.wrap(550), b = new l("8col", "1tier", '<p class="frame-external-text small light">Finally his eyes focused and he seemed to look straight at Mai.</p>'), this.comic.add(b), this.comic.wrap(75), b = new m("0col", "1tier", '<div class="bk-large-br-01"><div class="dialog"><p>He likes you so much. I thought of asking you &mdash;</p></div></div>', {
                        offsetX: 720,
                        offsetY: -40
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("8col", "1tier", "images/076-085/07.png"), this.comic.add(a), a = new j("4col", "1tier", "images/076-085-reedit/09.png"), this.comic.add(a), this.comic.wrap(550), b = new m("0col", "1tier", '<div class="bk-large-br-01"><div class="dialog bk-font-small"><p>I was going to ask you to take him &mdash; to pretend he was your son.</p></div></div>', {
                        offsetX: -170,
                        offsetY: 60
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-large-tl-01"><div class="dialog"><p>Just until I could tell my husband the truth.</p></div></div>', {
                        offsetX: 250,
                        offsetY: 250
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-bl-01"><div class="dialog"><p>Thoi. Enough.</p></div></div>', {
                        offsetX: 770,
                        offsetY: 120
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("4col", "1tier", "images/076-085-reedit/08.png"), this.comic.add(a), a = new j("4col", "1tier", "images/076-085-reedit/10.png"), this.comic.add(a), a = new j("4col", "1tier", "images/076-085-reedit/11.png"), this.comic.add(a), this.comic.wrap(550), b = new m("0col", "1tier", '<div class="bk-medium-br-01"><div class="dialog"><p>It&rsquo;s my fault.</p></div></div>', {
                        offsetX: -100,
                        offsetY: 120
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-small-t-01"><div class="dialog"><p>Chi&hellip;</p></div></div>', {
                        offsetX: 650,
                        offsetY: 350
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-large-bl-01"><div class="dialog"><p>You don&rsquo;t have to answer. Whatever happens, I deserve it.</p></div></div>', {
                        offsetX: 1100,
                        offsetY: -140
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("4col", "1tier", "images/076-085-reedit/12.png"), this.comic.add(a), a = new j("4col", "1tier", "images/076-085-reedit/13.png"), this.comic.add(a), a = new j("4col", "1tier", "images/076-085-reedit/14.png"), this.comic.add(a), this.comic.wrap(400), Ha = new qa, this.comic.add(Ha, {
                        triggers: [{
                            atScreenPosition: 1.1,
                            call: "transitionIn"
                        }]
                    }), Ha.addEventListener("click", function() {
                        this.comic.switchStoryLine("backstory"), d.sendCustomEvent("sidestory/backstory")
                    }.bind(this)), this.comic.wrap(400), this.comic.startAuthoringStoryLine("backstory"), this.comic.wrap(10), c = new da, this.comic.add(c, {
                        center: !0,
                        activeBetweenScreenPosition: {
                            min: -9,
                            max: 6
                        }
                    }), this.comic.wrap(0), b = new l("9col", "1tier", '<p class="display-text medium light">He was Quyen&rsquo;s shame and yet she loved him. What did that make her?</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(300), b = new l("9col", "1tier", '<p class="display-text medium light">She had conceived him when she was young, and passed him off to her aunt in Da Lat to raise, and then she had gotten married.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(600), c = new ea, this.comic.add(c, {
                        center: !0
                    }), this.comic.wrap(500), b = new l("4col", "1tier", '<p class="frame-external-text small light">With the war and all its disturbances, she had never gone back to visit him. Worse, she had never told her husband.</p>'), this.comic.add(b), this.comic.wrap(105), b = new m("0col", "1tier", '<div class="bk-medium-tl-01"><div class="dialog"><p>He would leave me. He will.</p></div></div>', {
                        offsetX: 260,
                        offsetY: 280
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("4col", "1tier", "images/b-line-backstory/01.png"), this.comic.add(a), this.comic.wrap(1e3), b = new l("9col", "1tier", '<p class="display-text medium light">But she couldn&rsquo;t abandon her only son &mdash; not to the Communists &mdash; not if she could find a way out of the country. Even if he didn&rsquo;t want to leave, and even if he didn&rsquo;t know her.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(600), c = new ga, this.comic.add(c, {
                        center: !0
                    }), this.comic.wrap(500), b = new l("9col", "1tier", '<p class="display-text medium light">Her aunt had balked and Quyen had been forced to abduct him.</p>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(600), c = new fa, this.comic.add(c, {
                        center: !0
                    }), this.comic.wrap(500), e = new i("8col"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small light">She&rsquo;d been wrong to have him &mdash; she knew that &mdash; but she&rsquo;d been more wrong to give him away. Surely, she thought, she was right to take him with her.</p>'), this.comic.add(b), this.comic.wrap(155), e = new i("8col"), this.comic.add(e), a = new j("4col", "1tier", "images/b-line-backstory/02.png"), this.comic.add(a), this.comic.wrap(700), b = new l("4col", "1tier", '<p class="frame-external-text small light">But when she saw him weakening &mdash; then falling sick &mdash; she realised that perhaps he was being punished for her shame.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small light">Whether he lived or died &mdash; perhaps it wasn&rsquo;t for her to decide.</p>'), this.comic.add(b), this.comic.wrap(125), b = new m("0col", "1tier", '<div class="bk-large-br-01"><div class="dialog"><p>He doesn&rsquo;t<br/>love his own mother.</p></div></div>', {
                        offsetX: 220,
                        offsetY: -10
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-small-t-01"><div class="dialog"><p>That&rsquo;s not true.</p></div></div>', {
                        offsetX: 770,
                        offsetY: 200
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-small-b-01"><div class="dialog"><p>It&rsquo;s fair.</p></div></div>', {
                        offsetX: 1e3,
                        offsetY: -80
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-large-tl-02"><div class="dialog"><p>Who watches that happening to her own son and does nothing?</p></div></div>', {
                        offsetX: 1100,
                        offsetY: 290
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), a = new j("4col", "1tier", "images/b-line-backstory/03.png"), this.comic.add(a), a = new j("4col", "1tier", "images/b-line-backstory/04.png"), this.comic.add(a), a = new j("4col", "1tier", "images/b-line-backstory/05.png"), this.comic.add(a), this.comic.wrap(550), Ha = new ra(!1, "right"), this.comic.add(Ha, {
                        center: !0,
                        triggers: [{
                            atScreenPosition: .8,
                            call: "transitionIn"
                        }]
                    }), Ha.addEventListener("click", this.onBackButtonClick), this.comic.endAuthoringStoryLine(), b = new l("10col", "1tier", ['<div class="display-text medium light">', "<p>Mai wanted desperately to say something &mdash; something useful, or comforting &mdash; but no words came.</p>", "</div>"]), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(340), a = new j("8col", "2tier", "images/076-085/09.png"), this.comic.add(a, {
                        center: !0
                    }), this.comic.wrap(1200), Fa = new f("eerieRecollection"), c = new P, this.comic.add(c, {
                        center: !0,
                        activeBetweenScreenPosition: {
                            min: -3,
                            max: 3
                        },
                        maps: [{
                            property: "bgInOpacity",
                            startScreenPosition: 1.45,
                            endScreenPosition: 1,
                            startValue: 0,
                            endValue: 1
                        }, {
                            property: "bgOutOpacity",
                            startScreenPosition: -1.25,
                            endScreenPosition: -1.75,
                            startValue: 1,
                            endValue: 0
                        }, {
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 3,
                            endScreenPosition: 1,
                            startValue: 0,
                            endValue: 1
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: 0,
                            endScreenPosition: -2,
                            startValue: 1,
                            endValue: 0
                        }]
                    }), b = new l("9col", "1tier", '<div class="display-text medium light"><p>In the middle of the night, Mai woke to find Truong half draped over her stomach.</p><p>His weight so light as to be almost imperceptible, as though his body were already nothing more than bones and air.</p><p>She whispered into the darkness, her thoughts still interlaced with dream, scattered remotely across space and grey sea.</p></div>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(700), b = new m("0col", "1tier", '<div class="bk-medium-br-01"><div class="dialog"><p>Everything will be fine. </p></div></div>', {
                        offsetX: 400,
                        offsetY: 0
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(1300), b = new l("9col", "1tier", '<div class="display-text medium light"><p>His sickness followed the usual course. Muscle soreness and nausea in the early stages. That evening his blisters began to rise, some of them bleeding pus.</p></div>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(700), b = new l("9col", "1tier", '<div class="display-text small dark"><p>He became too weak to swallow water. The skin on his face was hot and moist.</p></div>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(250), b = new m("0col", "1tier", '<div class="bk-medium-br-01"><div class="dialog"><p>Is Child all right?</p></div></div>', {
                        offsetX: 170,
                        offsetY: -120
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-medium-tr-02 emphasis"><div class="dialog"><p>I want to go up.</p></div></div>', {
                        offsetX: 230,
                        offsetY: 200
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), b = new m("0col", "1tier", '<div class="bk-small-l-01"><div class="dialog"><p>Take<br/>him.</p></div></div>', {
                        offsetX: 950,
                        offsetY: -20
                    }), this.comic.add(b, {
                        triggers: [m.defaultTrigger]
                    }), this.comic.wrap(0), c = new Q, this.comic.add(c, {
                        center: !0
                    }), this.comic.wrap(1e3), b = new l("9col", "1tier", '<div class="display-text small dark"><p>Mai found a spot for them on the deck, surrounded by sleeping families.</p></div>'), this.comic.add(b, {
                        center: !0
                    }), this.comic.wrap(750), Fa = new f("boatAtmosExt"), c = new R, this.comic.add(c, {
                        center: !0,
                        maps: [{
                            property: "bgInOpacity",
                            startScreenPosition: 1.5,
                            endScreenPosition: 1,
                            startValue: 0,
                            endValue: 1
                        }, {
                            property: "bgOutOpacity",
                            startScreenPosition: .5,
                            endScreenPosition: 0,
                            startValue: 1,
                            endValue: 0
                        }, {
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 2,
                            endScreenPosition: 0,
                            startValue: 0,
                            endValue: .7
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: -12,
                            endScreenPosition: -14,
                            startValue: .7,
                            endValue: 0
                        }]
                    }), this.comic.wrap(700), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Worry built within her. She poked his cheek. It was still warm.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">She checked his forehead: hotter than it had been last night.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">He was boiling up. His breath shallow and short.</p>'), this.comic.add(b), this.comic.wrap(95), a = new j("4col", "1tier", "images/082-092/01.png"), this.comic.add(a), a = new j("4col", "1tier", "images/082-092/02.png"), this.comic.add(a), a = new j("4col", "1tier", "images/082-092/03.png"), this.comic.add(a), this.comic.wrap(1300), b = new l("3col", "1tier", '<p class="frame-internal-text small dark">His face &mdash; the burnt, blistered skin, its spots and scabs.</p>', {
                        offsetX: 0,
                        offsetY: 300
                    }), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-internal-text small dark">The deeper she looked, the more his features disassociated from one another until what she looked into, as she tended him, was not a face, but a brown blasted landscape.</p>', {
                        offsetX: 0,
                        offsetY: 600
                    }), this.comic.add(b, {
                        center: !0
                    }), b = new l("3col", "1tier", '<p class="frame-internal-text small dark">Like a slow fire it drew air from her lungs.</p>', {
                        offsetX: 420,
                        offsetY: 850
                    }), this.comic.add(b), this.comic.wrap(-800), c = new S, this.comic.add(c, {
                        center: !0,
                        maps: [{
                            property: "bgInOpacity",
                            startScreenPosition: 1,
                            endScreenPosition: .5,
                            startValue: 0,
                            endValue: 1
                        }, {
                            property: "bgMidOpacity",
                            startScreenPosition: .25,
                            endScreenPosition: 0,
                            startValue: 1,
                            endValue: .2
                        }, {
                            property: "bgOutOpacity",
                            startScreenPosition: -1.3,
                            endScreenPosition: -1.5,
                            startValue: 1,
                            endValue: 0
                        }],
                        triggers: [{
                            atScreenPosition: .5,
                            call: "transitionIn"
                        }]
                    }), this.comic.wrap(2600), Fa = new f("quyenTensionMusic"), c = new T, this.comic.add(c, {
                        center: !0,
                        activeBetweenScreenPosition: {
                            min: -9,
                            max: 7
                        },
                        maps: [{
                            property: "bgInOpacity",
                            startScreenPosition: .5,
                            endScreenPosition: -1.5,
                            startValue: 0,
                            endValue: 1
                        }, {
                            property: "bgOutOpacity",
                            startScreenPosition: -2,
                            endScreenPosition: -8,
                            startValue: 1,
                            endValue: 0
                        }, {
                            property: "boatPosition",
                            startScreenPosition: .75,
                            endScreenPosition: -2.3,
                            startValue: 0,
                            endValue: 1
                        }, {
                            target: Fa,
                            property: "volumeIn",
                            startScreenPosition: 3,
                            endScreenPosition: -1,
                            startValue: 0,
                            endValue: 1
                        }, {
                            target: Fa,
                            property: "volumeOut",
                            startScreenPosition: -9,
                            endScreenPosition: -12,
                            startValue: 1,
                            endValue: 0
                        }]
                    });
                var Oa = c;
                this.comic.createAnchor("chapter6"), c = new xa(5), Ea = new g("chapterMotif"), this.comic.add(c, {
                    center: !0,
                    triggers: [{
                        atScreenPosition: .9,
                        call: "transitionIn"
                    }, {
                        atScreenPosition: .9,
                        target: Ea,
                        call: "play"
                    }, {
                        atScreenPosition: .9,
                        target: d,
                        call: "sendCustomEvent",
                        params: ["chapter/6"]
                    }]
                }), this.comic.wrap(1200), b = new l("9col", "1tier", '<p class="display-text medium dark">Someone shouting. Another death?</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(1400), b = new m("0col", "1tier", '<div class="bk-small-nt-01"><div class="dialog"><p>Whales?</p></div></div>', {
                    offsetX: 170,
                    offsetY: -100
                }), this.comic.add(b, {
                    triggers: [{
                        atScreenPosition: 1,
                        call: "transitionIn"
                    }]
                }), b = new m("0col", "1tier", '<div class="bk-small-nt-01"><div class="dialog"><p>Land birds?</p></div></div>', {
                    offsetX: 870,
                    offsetY: -220
                }), this.comic.add(b, {
                    triggers: [{
                        atScreenPosition: 1,
                        call: "transitionIn"
                    }]
                }), b = new m("0col", "1tier", '<div class="bk-small-nt-01"><div class="dialog"><p>Land?!?</p></div></div>', {
                    offsetX: 1100,
                    offsetY: -140
                }), this.comic.add(b, {
                    triggers: [{
                        atScreenPosition: 1,
                        call: "transitionIn"
                    }]
                }), b = new m("0col", "1tier", '<div class="bk-medium-br-02 emphasis"><div class="dialog"><p>They saw land?</p></div></div>', {
                    offsetX: 380,
                    offsetY: -180
                }), this.comic.add(b, {
                    triggers: [{
                        atScreenPosition: 1,
                        call: "transitionIn"
                    }]
                }), this.comic.wrap(0), a = new j("12col", "2tier", "images/082-092/04.png"), this.comic.add(a), this.comic.wrap(1150), b = new m("0col", "1tier", '<div class="bk-x-large-bl-01 emphasis"><div class="dialog"><p>Where&rsquo;s my son?</p></div></div>', {
                    offsetX: 300,
                    offsetY: -450
                }), this.comic.add(b), this.comic.wrap(0), Ea = new g("hatch", .5), a = new wa("4col", "1tier", "images/082-092/05.png"), this.comic.add(a, {
                    triggers: [{
                        atScreenPosition: .9,
                        call: "transitionIn",
                        params: ["right"]
                    }, {
                        atScreenPosition: .9,
                        target: Oa,
                        call: "openHatch"
                    }, {
                        atScreenPosition: .9,
                        target: Ea,
                        call: "play"
                    }, {
                        atScreenPosition: .9,
                        target: b,
                        call: "transitionIn"
                    }]
                }), this.comic.wrap(350), e = new i("8col"), this.comic.add(e), a = new wa("4col", "1tier", "images/082-092/06.png"), this.comic.add(a, {
                    triggers: [{
                        atScreenPosition: 1,
                        call: "transitionIn",
                        params: ["left"]
                    }]
                }), this.comic.wrap(700), a = new wa("12col", "1tier", "images/082-092/07.png"), this.comic.add(a, {
                    triggers: [{
                        atScreenPosition: 1,
                        call: "transitionIn",
                        params: ["right"]
                    }]
                }), this.comic.wrap(500), b = new m("0col", "1tier", '<div class="bk-medium-bl-02 emphasis"><div class="dialog"><p>Where&rsquo;s my son?</p></div></div>', {
                    offsetX: 840,
                    offsetY: -40
                }), this.comic.add(b), this.comic.wrap(0), a = new wa("4col", "1tier", "images/082-092/08.png"), this.comic.add(a, {
                    center: !0,
                    triggers: [{
                        atScreenPosition: 1,
                        call: "transitionIn",
                        params: ["left"]
                    }, {
                        atScreenPosition: 1,
                        target: b,
                        call: "transitionIn"
                    }]
                }), this.comic.wrap(700), b = new m("0col", "1tier", '<div class="bk-medium-bl-01 emphasis"><div class="dialog"><p>Truong!</p></div></div>', {
                    offsetX: 340,
                    offsetY: -50
                }), this.comic.add(b), this.comic.wrap(0), a = new wa("8col", "1tier", "images/082-092/09.png"), this.comic.add(a, {
                    triggers: [{
                        atScreenPosition: 1,
                        call: "transitionIn",
                        params: ["right"]
                    }, {
                        atScreenPosition: 1,
                        target: b,
                        call: "transitionIn"
                    }]
                }), this.comic.wrap(700), b = new m("0col", "1tier", '<div class="bk-x-large-br-01 emphasis"><div class="dialog"><p>I&rsquo;ve changed my mind!</p></div></div>', {
                    offsetX: 610,
                    offsetY: -450
                }), this.comic.add(b), this.comic.wrap(0), e = new i("8col"), this.comic.add(e), a = new wa("4col", "1tier", "images/082-092/10.png"), this.comic.add(a, {
                    triggers: [{
                        atScreenPosition: 1,
                        call: "transitionIn",
                        params: ["right"]
                    }, {
                        atScreenPosition: 1,
                        target: b,
                        call: "transitionIn"
                    }]
                }), this.comic.wrap(700), b = new m("0col", "1tier", '<div class="bk-small-bl-01"><div class="dialog"><p>Chi &mdash;</p></div></div>', {
                    offsetX: 800,
                    offsetY: -50
                }), this.comic.add(b), this.comic.wrap(0), e = new i("4col"), this.comic.add(e), a = new wa("4col", "1tier", "images/082-092/11.png"), this.comic.add(a, {
                    triggers: [{
                        atScreenPosition: 1,
                        call: "transitionIn",
                        params: ["left"]
                    }, {
                        atScreenPosition: 1,
                        target: b,
                        call: "transitionIn"
                    }]
                }), this.comic.wrap(700), b = new m("0col", "1tier", '<div class="bk-large-exclamation-r-01 emphasis"><div class="dialog"><p>He&rsquo;s my son. Not yours.<br/>Mine!</p></div></div>', {
                    offsetX: 510,
                    offsetY: 100
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), this.comic.wrap(0), e = new i("8col"), this.comic.add(e), a = new wa("4col", "1tier", "images/082-092/12.png"), this.comic.add(a, {
                    triggers: [{
                        atScreenPosition: 1,
                        call: "transitionIn",
                        params: ["right"]
                    }, {
                        atScreenPosition: 1,
                        target: b,
                        call: "transitionIn"
                    }]
                }), this.comic.wrap(700), b = new m("0col", "1tier", '<div class="bk-medium-b-01 emphasis"><div class="dialog"><p>She took my son.</p></div></div>', {
                    offsetX: 480,
                    offsetY: -170
                }), this.comic.add(b), this.comic.wrap(0), a = new wa("8col", "1tier", "images/082-092/13.png"), this.comic.add(a, {
                    triggers: [{
                        atScreenPosition: 1,
                        call: "transitionIn",
                        params: ["left"]
                    }, {
                        atScreenPosition: 1,
                        target: b,
                        call: "transitionIn"
                    }]
                }), this.comic.wrap(700), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Quyen&rsquo;s body shuddered in tight bursts.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Then slowly, hitchingly, it began to calm.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">It seemed for a moment as though Quyen might never look up again.</p>'), this.comic.add(b), this.comic.wrap(95), b = new m("0col", "1tier", '<div class="bk-medium-tl-02"><div class="dialog"><p>I wouldn&rsquo;t hurt Truong.</p></div></div>', {
                    offsetX: 425,
                    offsetY: -100
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), b = new m("0col", "1tier", '<div class="bk-small-tl-01"><div class="dialog"><p>I love<br/>him.</p></div></div>', {
                    offsetX: 870,
                    offsetY: -40
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), this.comic.wrap(0), a = new j("4col", "1tier", "images/082-092/14.png"), this.comic.add(a), a = new j("4col", "1tier", "images/082-092/15.png"), this.comic.add(a), a = new j("4col", "1tier", "images/082-092/16.png"), this.comic.add(a), this.comic.wrap(550), e = new i("6col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small dark">When she did, her face was utterly blanched of expression.</p>'), this.comic.add(b), this.comic.wrap(95), b = new m("0col", "1tier", '<div class="bk-small-br-01"><div class="dialog"><p>I know.</p></div></div>', {
                    offsetX: 170,
                    offsetY: -20
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), this.comic.wrap(0), e = new i("2col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/082-092/17.png"), this.comic.add(a), a = new j("4col", "1tier", "images/082-092/18.png"), this.comic.add(a), this.comic.wrap(550), e = new i("6col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small dark">But she didn&rsquo;t look at Mai. Instead she turned</p>'), this.comic.add(b), this.comic.wrap(95), e = new i("6col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/082-092/19.png"), this.comic.add(a), this.comic.wrap(550), e = new i("6col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small dark">and bent over the unconscious shape of her son.</p>'), this.comic.add(b), this.comic.wrap(95), e = new i("6col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/082-092/20.png"), this.comic.add(a), this.comic.wrap(550), e = new i("2col", "1tier"), this.comic.add(e), b = new l("8col", "1tier", '<p class="frame-external-text small dark">That was when she began to cry &mdash; silently at first, inside her body, but then, breath by breath &mdash;</p>'), this.comic.add(b), this.comic.wrap(75), e = new i("2col", "1tier"), this.comic.add(e), a = new j("8col", "1tier", "images/082-092/21.png"), this.comic.add(a), this.comic.wrap(600), b = new l("9col", "1tier", '<p class="display-text small dark">letting out a wail the whole boat could hear.</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(200), Ea = new g("wail"), c = new U, this.comic.add(c, {
                    center: !0,
                    triggers: [{
                        atScreenPosition: .55,
                        call: "scream"
                    }, {
                        atScreenPosition: .55,
                        target: Ea,
                        call: "play"
                    }]
                }), this.comic.wrap(1100), b = new l("9col", "1tier", '<p class="display-text medium dark">He entered into the worst of it that afternoon. Moving fitfully into and out of sleep. His breath short, irregular.</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(700), Fa = new f("eerieRecollection"), c = new V, this.comic.add(c, {
                    center: !0,
                    activeBetweenScreenPosition: {
                        min: -3.85,
                        max: 2
                    },
                    maps: [{
                        property: "bodyPosition",
                        startScreenPosition: -1,
                        endScreenPosition: -5.5,
                        startValue: 0,
                        endValue: 1
                    }, {
                        target: Fa,
                        property: "volumeIn",
                        startScreenPosition: 2,
                        endScreenPosition: 0,
                        startValue: 0,
                        endValue: 1
                    }, {
                        target: Fa,
                        property: "volumeOut",
                        startScreenPosition: -5,
                        endScreenPosition: -7,
                        startValue: 1,
                        endValue: 0
                    }]
                }), this.comic.wrap(4500), b = new l("9col", "1tier", '<p class="display-text small dark">Then, at the end of the afternoon &mdash; after five long hours &mdash; Truong&rsquo;s small body suddenly unclenched and his breath eased.</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(100), e = new i("3col"), this.comic.add(e), a = new j("6col", "1tier", "images/095-096/01.png"), this.comic.add(a), this.comic.wrap(500), b = new l("4col", "1tier", '<p class="frame-external-text small dark">The lines on his forehead cleared. It seemed, unbelievably, that he had prevailed.</p>'), this.comic.add(b), b = new l("8col", "1tier", '<p class="display-text small dark">His clothes were soaked with sweat.</p>'), this.comic.add(b), this.comic.wrap(120), b = new m("0col", "1tier", '<div class="bk-large-bl-02"><div class="dialog"><p>It&rsquo;s over. Chi, the fever has broken.</p></div></div>', {
                    offsetX: 290,
                    offsetY: -70
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), b = new m("0col", "1tier", '<div class="bk-medium-tl-01"><div class="dialog"><p>Sleep, my beloved.</p></div></div>', {
                    offsetX: 1100,
                    offsetY: 200
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), this.comic.wrap(0), a = new j("4col", "1tier", "images/095-096/02.png"), this.comic.add(a), e = new i("1col"), this.comic.add(e), a = new j("6col", "1tier", "images/095-096/03.png"), this.comic.add(a), this.comic.wrap(540), b = new l("4col", "1tier", '<p class="frame-external-text small dark">For a fleeting moment, as Mai saw his face unfastened from its distress, the fantasy crossed her mind that he was dead.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">She shook it off.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Quyen&rsquo;s hair fell over her son&rsquo;s face. They both appeared to her strangely now, as if at an increasing remove.</p>'), this.comic.add(b), this.comic.wrap(150), a = new j("4col", "1tier", "images/095-096/04.png"), this.comic.add(a), a = new j("4col", "1tier", "images/095-096/05.png"), this.comic.add(a), a = new j("4col", "1tier", "images/095-096/06.png"), this.comic.add(a), this.comic.wrap(540), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Outside, the evening was falling, the last of the light sallow on his skin. After a while Truong gathered his breath again.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Quyen started singing a Southern lullaby Mai hadn&rsquo;t heard for years.</p>'), this.comic.add(b), this.comic.wrap(120), b = new m("0col", "1tier", '<div class="bk-medium-tr-02"><div class="dialog"><p>Ma will sing to Child?</p></div></div>', {
                    offsetX: 20,
                    offsetY: 320
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), b = new m("0col", "1tier", '<div class="bk-medium-tr-01"><div class="dialog"><p>No &mdash; not that one.</p></div></div>', {
                    offsetX: 550,
                    offsetY: 320
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), b = new m("0col", "1tier", '<div class="bk-medium-br-02"><div class="dialog"><p>My favourite song.</p></div></div>', {
                    offsetX: 780,
                    offsetY: 50
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), b = new m("0col", "1tier", '<div class="bk-medium-t-01"><div class="dialog"><p>Your<br/>favourite<br/>song&hellip;</p></div></div>', {
                    offsetX: 1200,
                    offsetY: 220
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), this.comic.wrap(0), a = new j("4col", "1tier", "images/096-102/02.png"), this.comic.add(a), a = new j("4col", "1tier", "images/096-102/03.png"), this.comic.add(a), a = new j("4col", "1tier", "images/096-102/04.png"), this.comic.add(a), this.comic.wrap(540), b = new l("6col", "1tier", '<p class="frame-external-text small dark">He made an effort to swallow.</p>'), this.comic.add(b), b = new l("6col", "1tier", '<p class="frame-external-text small dark">Mai waited for him to completely shut his eyes. Quyen found her hand and held it. </p>'), this.comic.add(b), this.comic.wrap(95), b = new m("0col", "1tier", '<div class="bk-medium-br-01"><div class="dialog"><p>But Child must sleep, nha?</p></div></div>', {
                    offsetX: 150,
                    offsetY: -50
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), this.comic.wrap(0), a = new j("6col", "1tier", "images/096-102/05.png"), this.comic.add(a), a = new j("6col", "1tier", "images/096-102/06.png"), this.comic.add(a), this.comic.wrap(540), e = new i("3col"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Mai cleared her throat.</p>'), this.comic.add(b), this.comic.wrap(55), e = new i("3col"), this.comic.add(e), a = new j("4col", "1tier", "images/096-102/07.png"), this.comic.add(a), a = new j("2col", "1tier", "images/096-102/08.png"), this.comic.add(a), this.comic.wrap(900), Ma = new f("song2"), c = new W, this.comic.add(c, {
                    center: !0,
                    maps: [{
                        property: "bgOpacityIn",
                        startScreenPosition: 1.75,
                        endScreenPosition: 1,
                        startValue: 0,
                        endValue: 1
                    }, {
                        property: "bgOpacityOut",
                        startScreenPosition: -.6,
                        endScreenPosition: -1,
                        startValue: 1,
                        endValue: 0
                    }, {
                        target: Ma,
                        property: "volumeIn",
                        startScreenPosition: 2,
                        endScreenPosition: 0,
                        startValue: 0,
                        endValue: .55
                    }, {
                        target: Ma,
                        property: "volumeOut",
                        startScreenPosition: 0,
                        endScreenPosition: -1.75,
                        startValue: .55,
                        endValue: 0
                    }],
                    triggers: [{
                        atScreenPosition: .75,
                        call: "fall"
                    }]
                }), this.comic.wrap(900), b = new l("4col", "1tier", '<p class="frame-external-text small light">The next morning &mdash; the morning of their thirteenth day &mdash; a couple of fishermen sighted land.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small light">A swell of excitement, like a weak current, ran through the boat.</p>'), this.comic.add(b), b = new l("4col", "1tier", '<p class="frame-external-text small light">With those others strong enough, Mai followed the voice above deck.</p>'), this.comic.add(b), this.comic.wrap(120), b = new m("0col", "1tier", '<div class="bk-medium-t-01 emphasis"><div class="dialog"><p>We made it! We&rsquo;re safe now.</p></div></div>', {
                    offsetX: 590,
                    offsetY: 280
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), this.comic.wrap(0), a = new j("4col", "1tier", "images/096-102/09.png"), this.comic.add(a), a = new j("4col", "1tier", "images/096-102/10.png"), this.comic.add(a), a = new j("4col", "1tier", "images/096-102/11.png"), this.comic.add(a), this.comic.wrap(1e3), b = new l("9col", "1tier", '<p class="display-text small dark">Outside, the dawn sun steeped through her body as though her body were made of paper. Dizziness overwhelmed her when she saw the half-empty deck. Had they been so depleted?</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(85), a = new j("12col", "1tier", "images/096-102/12.png"), this.comic.add(a), this.comic.wrap(540), b = new l("9col", "1tier", '<p class="display-text small dark">Then she saw the prow, teeming with people, all peering ahead, attitudes stalled in their necks and shoulders. </p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(85), a = new j("12col", "1tier", "images/096-102/13.png"), this.comic.add(a), this.comic.wrap(800), b = new l("9col", "1tier", '<div class="display-text medium dark"><p>She made her way forward, then spotted, far ahead, the tiny breakers on the reefs. And behind those, the white sand like a bared smile. Birds hanging in mid-air over the water.</p></div>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(1300), Fa = new f("landAtmosExt"), c = new X, Ea = new g("birds", .3), this.comic.add(c, {
                    center: !0,
                    triggers: [{
                        atScreenPosition: 2,
                        call: "transitionIn"
                    }, {
                        atScreenPosition: 2,
                        target: Ea,
                        call: "play"
                    }],
                    maps: [{
                        property: "blackMatteOpacity",
                        startScreenPosition: 1,
                        endScreenPosition: 0,
                        startValue: 0,
                        endValue: 1
                    }, {
                        target: Fa,
                        property: "volumeIn",
                        startScreenPosition: 4,
                        endScreenPosition: 1.5,
                        startValue: 0,
                        endValue: 1
                    }, {
                        target: Fa,
                        property: "volumeOut",
                        startScreenPosition: -1,
                        endScreenPosition: -3,
                        startValue: 1,
                        endValue: 0
                    }],
                    activeBetweenScreenPosition: {
                        min: -3,
                        max: 4
                    }
                }), this.comic.wrap(200), b = new l("9col", "1tier", '<div class="display-text medium light"><p>During the night she had come to her decision. Her thoughts starting always with Truong and ending always with her father.</p><p>She would look after Truong as if he were her own child, completely, unconditionally, and try not to think about the moment when Quyen might ask her to stop.</p></div>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(1e3), b = new l("9col", "1tier", '<div class="display-text small light"><p>Nearly weightless in her body, Mai descended the companionway. She was about to call out when she sensed something amiss.</p></div>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(1e3), c = new Y, this.comic.add(c, {
                    center: !0,
                    maps: [{
                        property: "quyenBrightness",
                        startScreenPosition: 0,
                        endScreenPosition: -.3,
                        startValue: 0,
                        endValue: 1
                    }]
                }), this.comic.wrap(1500), b = new l("4col", "1tier", '<p class="frame-external-text small light">Quyen&rsquo;s back &mdash; folded over Truong&rsquo;s sleeping form &mdash; was too stiff. The posture too awkward.</p>'), this.comic.add(b), e = new i("4col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small light">Mai&rsquo;s heart tripped faster and faster, up into her throat.</p>'), this.comic.add(b), this.comic.wrap(110), b = new m("0col", "1tier", '<div class="bk-x-small-tl-01 emphasis"><div class="dialog"><p>Chi?</p></div></div>', {
                    offsetX: 40,
                    offsetY: 50
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), b = new m("0col", "1tier", '<div class="bk-medium-bl-02"><div class="dialog"><p>What will I do now?</p></div></div>', {
                    offsetX: 690,
                    offsetY: -100
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), b = new m("0col", "1tier", '<div class="bk-medium-l-01"><div class="dialog"><p>All night. He wouldn&rsquo;t wake up.</p></div></div>', {
                    offsetX: 1150,
                    offsetY: 100
                }), this.comic.add(b, {
                    triggers: [m.defaultTrigger]
                }), this.comic.wrap(0), a = new j("4col", "1tier", "images/104-114/01.png"), this.comic.add(a), a = new j("4col", "1tier", "images/104-114/02.png"), this.comic.add(a), a = new j("4col", "1tier", "images/104-114/03.png"), this.comic.add(a), this.comic.wrap(800), b = new l("9col", "1tier", '<p class="display-text small light">When Mai had left last night, Truong had been recovering. He&rsquo;d been fine. He&rsquo;d been asking her, over and over, to sing to him. What could have happened?</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(95), a = new j("6col", "1tier", "images/104-114/04.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(800), b = new l("9col", "1tier", '<div class="display-text medium light"><p>He was bundled up in a blanket. The bundle tapered at one end &mdash; where his legs must have been.</p><p>Mai could see no part of him. How could this be the end of it?</p></div>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(1e3), Fa = new f("funeralAtmos"), c = new Z, this.comic.add(c, {
                    center: !0,
                    activeBetweenScreenPosition: {
                        min: -6,
                        max: 4
                    },
                    maps: [{
                        property: "progress",
                        startScreenPosition: 1,
                        endScreenPosition: -.5,
                        startValue: 0,
                        endValue: 1
                    }, {
                        target: Fa,
                        property: "volumeIn",
                        startScreenPosition: 5,
                        endScreenPosition: 3,
                        startValue: 0,
                        endValue: 1
                    }, {
                        target: Fa,
                        property: "volumeOut",
                        startScreenPosition: -8,
                        endScreenPosition: -10,
                        startValue: 1,
                        endValue: 0
                    }]
                }), this.comic.wrap(2100), b = new l("9col", "1tier", '<div class="display-text medium light"><p>She wrung the heels of her hands into her eyes, as if the fault lay with them.</p><p>Then she felt Quyen&rsquo;s face, cool with shock, next to her own, rough and wet and cool against her knuckles, speaking into her ear.</p><p>At first she recoiled from Quyen&rsquo;s touch. What was she saying? She was asking Mai for help. She was asking Mai to help carry him.</p><p>It was time, she said. Time, which had distended every moment on the boat &mdash; until there had seemed to be no shape to it &mdash; seemed now to snap violently shut, crushing all things into this one task.</p><p>They were standing &mdash; when had they gotten up?</p><p>Then they were kneeling, facing each other over the length of him. Quyen circumspect in her movements, as though loath to take up any more space than her son now needed.</p></div>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(1800), a = new j("12col", "1tier", "images/104-114/05.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(500), b = new l("3col", "1tier", '<p class="frame-external-text small light">Together the two of them brought the bundle aft.</p>'), this.comic.add(b), b = new l("6col", "1tier", '<p class="frame-external-text small light">Through the shifting, silent crowd, past the derrick-crane,</p>'), this.comic.add(b), b = new l("3col", "1tier", '<p class="frame-external-text small light">where a group of the strongest men waited.</p>'), this.comic.add(b), this.comic.wrap(110), a = new j("3col", "1tier", "images/104-114/06.png"), this.comic.add(a), a = new j("6col", "1tier", "images/104-114/07.png"), this.comic.add(a), a = new j("3col", "1tier", "images/104-114/08.png"), this.comic.add(a), this.comic.wrap(650), b = new l("9col", "1tier", '<p class="display-text medium dark">There, the wind turned a corner of the blanket over and revealed the small head, the ash beauty of his face, the new dark slickness of his skin.</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(400), c = new $, this.comic.add(c, {
                    center: !0,
                    maps: [{
                        property: "whiteMatteOpacity",
                        startScreenPosition: 1.9,
                        endScreenPosition: .5,
                        startValue: 0,
                        endValue: 1
                    }]
                }), this.comic.wrap(0), b = new l("4col", "1tier", '<p class="frame-external-text small dark">With a shudder Quyen fell to it and pressed and rubbed her lips against his cheek.</p>'), this.comic.add(b), this.comic.wrap(120), a = new j("4col", "1tier", "images/104-114/09.png"), this.comic.add(a), this.comic.wrap(650), b = new l("9col", "1tier", '<p class="display-text small dark">Mai took Quyen&rsquo;s arm and led her the full span of the boat to the prow.</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(75), a = new j("6col", "1tier", "images/104-114/10.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(500), b = new l("9col", "1tier", '<p class="display-text small dark">Again the crowd parted for them. The stood together in silence, the spray moistening their faces as they looked forward. </p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(95), a = new j("12col", "1tier", "images/104-114/11.png"), this.comic.add(a), this.comic.wrap(500), b = new l("9col", "1tier", '<p class="display-text small dark">Focusing all their sight and thought on that blurry peninsula ahead, that impossible place. So that they would not be forced to behold the men at the back of the boat peeling the blanket off, swinging the small body.</p>'), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(125), a = new j("12col", "1tier", "images/104-114/12.png"), this.comic.add(a, {
                    center: !0
                }), this.comic.wrap(500), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Once, twice, three times before letting go.</p>'), this.comic.add(b), this.comic.wrap(75), a = new j("4col", "1tier", "images/104-114/13.png"), this.comic.add(a), this.comic.wrap(120), e = new i("4col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small dark">Tossing him as far behind the boat as possible.</p>'), this.comic.add(b), this.comic.wrap(75), e = new i("4col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/104-114/14.png"), this.comic.add(a), this.comic.wrap(120), e = new i("8col", "1tier"), this.comic.add(e), b = new l("4col", "1tier", '<p class="frame-external-text small dark">So he would be out of sight.</p>'), this.comic.add(b), this.comic.wrap(75), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/104-114/15.png"), this.comic.add(a), this.comic.wrap(500), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/104-114/16.png"), this.comic.add(a), this.comic.wrap(500), Ea = new g("bodySplash01"), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/104-114/17.png"), this.comic.add(a, {
                    triggers: [{
                        atScreenPosition: .5,
                        target: Ea,
                        call: "play"
                    }]
                }), this.comic.wrap(500), e = new i("8col", "1tier"), this.comic.add(e), a = new j("4col", "1tier", "images/104-114/18.png"), this.comic.add(a), this.comic.wrap(900), c = new _, this.comic.add(c, {
                    center: !0,
                    activeBetweenScreenPosition: {
                        min: -4.5,
                        max: 6
                    },
                    triggers: [{
                        atScreenPosition: .5,
                        call: "play"
                    }, {
                        atScreenPosition: .5,
                        target: d,
                        call: "sendCustomEvent",
                        params: ["end"]
                    }],
                    maps: [{
                        property: "blackMatteOpacity",
                        startScreenPosition: 1.2,
                        endScreenPosition: .5,
                        startValue: 0,
                        endValue: 1
                    }, {
                        property: "videoOpacity",
                        startScreenPosition: .5,
                        endScreenPosition: -1.5,
                        startValue: 0,
                        endValue: .6
                    }]
                }), this.comic.wrap(1e3), b = new l("9col", "1tier", Da), this.comic.add(b, {
                    center: !0
                }), this.comic.wrap(4e3), this.comic.addEventListener("preload", this.onPreload), this.comic.addEventListener("anchorChange", this.onAnchorChange), this.comic.addEventListener("switchStoryLine", this.onSwitchStoryLine), this.comic.addEventListener("switchDefaultStoryLine", this.onSwitchDefaultStoryLine), this.comic.start()
            },
            onSwitchStoryLine: function() {
                Ea.trigger("switchStoryLine")
            },
            onSwitchDefaultStoryLine: function() {
                Ea.trigger("switchDefaultStoryLine")
            },
            render: function() {
                this.el.style.display = "block", this.el.style.width = "100%", this.el.style.height = "100%", Ea.on("autoScroll", this.onAutoScroll), Ea.on("chapterClick", this.onChapterClick), this.el.appendChild(this.comic.domElement)
            },
            onPreload: function() {
                this.comic.removeEventListener("preload", this.onPreload), this.landingSplash.transitionIn(), this.trigger("preload")
            },
            pause: function() {
                this.comic.pause()
            },
            resume: function() {
                this.comic.resume()
            },
            onAutoScroll: function(a) {
                this.comic.autoScroll = a
            },
            onChapterClick: function(a) {
                this.comic.gotoAnchor(a.chapterName)
            },
            onAnchorChange: function(a) {
                Ea.trigger("anchorChange", {
                    name: a.name
                })
            },
            onResize: function() {
                this.comic.setSize(window.innerWidth, window.innerHeight)
            }
        });
        return Fa
    }), define("text!html/footer.html", [], function() {
        return '<div class="settings">\n    <input type="checkbox" id="sound" class="checkbox"/><label id="sound-label" for="sound">Sound</label>\n    <input type="checkbox" id="auto-scroll" class="checkbox"/><label for="auto-scroll">Auto Scroll</label>\n    <input type="checkbox" id="full-screen" class="checkbox"/><label id="full-screen-label" for="full-screen">Full Screen</label>\n</div>\n<div class="logo">\n    <a href="http://www.sbs.com.au" target="_blank"><img src="images/logo-sbs.svg" width="76" height="61" /></a>\n</div>\n'
    }), define("views/FooterView", ["jquery", "underscore", "backbone", "audio/Thump", "events/appEvents", "config", "text!html/footer.html"], function(a, b, c, d, e, f, g) {
        var h = c.View.extend({
            initialize: function() {
                b.bindAll(this, "onAutoScrollCheckboxChange", "onSoundCheckboxChange", "onFullScreenCheckboxChange")
            },
            render: function() {
                f.isKioskMode || (this.el.innerHTML = g, this.autoScrollCheckbox = document.getElementById("auto-scroll"), this.autoScrollCheckbox.addEventListener("change", this.onAutoScrollCheckboxChange), this.soundCheckbox = document.getElementById("sound"), this.soundLabel = document.getElementById("sound-label"), d.autoPlaySupported ? this.soundCheckbox.checked = !d.mute : (this.soundCheckbox.style.display = "none", this.soundLabel.style.display = "none"), this.soundCheckbox.addEventListener("change", this.onSoundCheckboxChange), this.fullScreenCheckbox = document.getElementById("full-screen"), this.fullScreenLabel = document.getElementById("full-screen-label"), Modernizr.fullscreen ? (this.fullScreenCheckbox.addEventListener("click", this.onFullScreenCheckboxChange), a(document.documentElement).bind("webkitfullscreenchange mozfullscreenchange msfullscreenchange fullscreenchange", function() {
                    var a = document.fullScreen || document.mozFullScreen || document.webkitIsFullScreen || null != document.fullscreenElemen;
                    this.fullScreenCheckbox.checked = a
                }.bind(this))) : (this.fullScreenCheckbox.style.display = "none", this.fullScreenLabel.style.display = "none"))
            },
            onAutoScrollCheckboxChange: function() {
                var a = this.autoScrollCheckbox.checked;
                e.trigger("autoScroll", a)
            },
            onSoundCheckboxChange: function() {
                d.mute = !d.mute, this.soundCheckbox.checked = !d.mute
            },
            onFullScreenCheckboxChange: function() {
                var a = document.documentElement,
                    b = a.requestFullscreen || a.msRequestFullscreen || a.mozRequestFullScreen || a.webkitRequestFullscreen,
                    c = document.exitFullscreen || document.msExitFullscreen || document.mozCancelFullScreen || document.webkitExitFullscreen;
                this.fullScreenCheckbox.checked && b ? b.apply(a) : !this.fullScreenCheckbox.checked && c && c.apply(document)
            }
        });
        return h
    }), define("text!html/social.html", [], function() {
        return '<!-- Twitter -->\n<div class="twitter">\n    <a href="https://twitter.com/share" class="twitter-share-button" data-url="http://www.sbs.com.au/theboat" data-text="‘The Boat’, an interactive graphic novel about escape after the Vietnam War. Based on the story by Nam Le.">Tweet</a>\n</div>\n<!-- Facebook  -->\n<div class="facebook">\n    <iframe src="//www.facebook.com/plugins/like.php?href=http%3A%2F%2Fwww.sbs.com.au%2Ftheboat&amp;width=130&amp;layout=button_count&amp;action=like&amp;show_faces=false&amp;share=true&amp;height=21&amp;appId=210615882442413" scrolling="no" frameborder="0" style="border:none; overflow:hidden; width:130px; height:21px;" allowTransparency="true"></iframe>\n</div>\n'
    }), define("views/SocialView", ["backbone", "config", "text!html/social.html"], function(a, b, c) {
        var d = a.View.extend({
            initialize: function() {},
            render: function() {
                b.isKioskMode || (this.el.innerHTML = c, this.show())
            },
            show: function() {
                this.el.style.display = "block", ! function(a, b, c) {
                    var d, e = a.getElementsByTagName(b)[0],
                        f = /^http:/.test(a.location) ? "http" : "https";
                    a.getElementById(c) || (d = a.createElement(b), d.id = c, d.src = f + "://platform.twitter.com/widgets.js", e.parentNode.insertBefore(d, e))
                }(document, "script", "twitter-wjs")
            }
        });
        return d
    }), define("text!html/chapter-nav.html", [], function() {
        return '<div id="chapter-nav">\n    <ul>\n        <li><a class="chapter" data-chapter-name="chapter1" href="chapter-1">1</a></li>\n        <li><a class="chapter" data-chapter-name="chapter2" href="chapter-2">2</a></li>\n        <li><a class="chapter" data-chapter-name="chapter3" href="chapter-3">3</a></li>\n        <li><a class="chapter" data-chapter-name="chapter4" href="chapter-4">4</a></li>\n        <li><a class="chapter" data-chapter-name="chapter5" href="chapter-5">5</a></li>\n        <li><a class="chapter" data-chapter-name="chapter6" href="chapter-6">6</a></li>\n    </ul>\n</div>\n'
    }), define("views/ChapterNavView", ["jquery", "underscore", "backbone", "events/appEvents", "text!html/chapter-nav.html"], function(a, b, c, d, e) {
        var f = c.View.extend({
            initialize: function() {
                b.bindAll(this, "onClick", "onAnchorChange", "onStoryLine", "onDefaultStoryLine")
            },
            render: function() {
                this.el.innerHTML = e;
                var a = this.$el.find(".chapter");
                a.on("click", this.onClick), d.on("anchorChange", this.onAnchorChange), d.on("switchDefaultStoryLine", this.onDefaultStoryLine), d.on("switchStoryLine", this.onStoryLine)
            },
            onClick: function(b) {
                b.preventDefault();
                var c = a(b.target).data("chapter-name");
                this.select(c), d.trigger("chapterClick", {
                    chapterName: c
                })
            },
            select: function(a) {
                var b = this.$el.find('*[data-chapter-name="' + a + '"]');
                b.length > 0 && (this.$el.find(".chapter").removeClass("selected"), b.addClass("selected"))
            },
            onStoryLine: function() {
                a("#chapter-nav").addClass("nav-hidden")
            },
            onDefaultStoryLine: function() {
                a("#chapter-nav").removeClass("nav-hidden")
            },
            onAnchorChange: function(a) {
                this.select(a.name)
            },
            hide: function() {}
        });
        return f
    }), define("kiosk/KioskResetTimer", ["underscore"], function(a) {
        var b = function() {
                a.bindAll(this, "onTimeout", "onInteraction")
            },
            c = b.prototype;
        return c.start = function() {
            document.documentElement.addEventListener("click", this.onInteraction), document.documentElement.addEventListener("scroll", this.onInteraction, !0), this.startTimer()
        }, c.startTimer = function() {
            this.timerId && clearTimeout(this.timerId), this.timerId = setTimeout(this.onTimeout, 18e4)
        }, c.onInteraction = function() {
            this.startTimer()
        }, c.onTimeout = function() {
            document.location.reload()
        }, b
    }), define("views/AppView", ["jquery", "underscore", "backbone", "audio/Thump", "views/ComicView", "views/FooterView", "views/SocialView", "views/ChapterNavView", "kiosk/KioskResetTimer", "config", "events/appEvents"], function(a, b, c, d, e, f, g, h, i, j, k) {
        var l = c.View.extend({
            initialize: function() {
                b.bindAll(this, "onComicViewPreload", "onThumpInitComplete", "onThumpPreload", "onFocus", "onBlur"), d.addEventListener("initComplete", this.onThumpInitComplete), d.addEventListener("preloadComplete", this.onThumpPreload), d.init(), this.el.style.display = "none", d.volume = 0
            },
            onThumpInitComplete: function() {
                this.createViews(), this.comicView.render(), this.el.style.display = "block"
            },
            createViews: function() {
                this.comicView = new e({
                    el: this.el
                }), this.comicView.on("preload", this.onComicViewPreload), this.comicView.createComic(), this.chapterNav = new h({
                    el: "#chapter-nav-container"
                }), this.footer = new f({
                    el: "#footer-container"
                }), this.social = new g({
                    el: "#social-container"
                })
            },
            onComicViewPreload: function() {
                this.appReady()
            },
            onThumpPreload: function() {
                TweenMax.to(d, 5, {
                    volume: 1
                })
            },
            onFocus: function() {},
            onBlur: function() {},
            render: function() {
                this.chapterNav.render(), this.footer.render(),
                    this.social.render()
            },
            appReady: function() {
                j.isKioskMode && (this.kioskResetTimer = new i, this.kioskResetTimer.start()), window.addEventListener("focus", this.onFocus), window.addEventListener("blur", this.onBlur), k.trigger("ready")
            },
            onResize: function() {
                this.comic.setSize(window.innerWidth, window.innerHeight)
            }
        });
        return l
    }), define("text!html/preloader.html", [], function() {
        return '<div class="preloader">\n    <div class="loading">\n\n    </div>\n    <div class="headphones">\n        <img src="images/ui/site-preloader/icon-headphones@2x.png" width="79" height="80" alt=""/>\n        <img class="label" src="images/ui/site-preloader/text-headphones@2x.png" width="257" height="45" alt="This site uses audio. Headphones are recommended."/>\n    </div>\n</div>\n'
    }), define("views/PreloaderView", ["jquery", "underscore", "backbone", "text!html/preloader.html"], function(a, b, c, d) {
        var e = c.View.extend({
            initialize: function() {},
            render: function() {
                this.preloader = document.createElement("div"), this.preloader.innerHTML = d, this.el.appendChild(this.preloader)
            },
            hide: function() {
                this.el.style.display = "none", this.el.removeChild(this.preloader)
            }
        });
        return e
    }), define("AppRouter", ["jquery", "underscore", "backbone"], function(a, b, c) {
        var d = c.Router.extend({
            routes: {
                "(/)": "goto"
            },
            "goto": function() {},
            initialize: function(a) {
                return this.app = a.app, this
            }
        });
        return d
    }), window.flightCheck && window.flightCheck.featuresSupported && (require.config({
        baseUrl: "scripts",
        paths: {
            jquery: "../../bower_components/jquery/dist/jquery",
            underscore: "../../bower_components/underscore/underscore",
            backbone: "../../bower_components/backbone/backbone",
            easeljs: "../../bower_components/easeljs/lib/easeljs-NEXT.min",
            preloadjs: "../../bower_components/createjs-preloadjs/lib/preloadjs-NEXT.min",
            snapsvg: "../../bower_components/snap.svg/dist/snap.svg",
            text: "../../bower_components/requirejs-text/text",
            tweenMax: "vendor/greensock/src/uncompressed/TweenMax",
            timelineMax: "vendor/greensock/src/uncompressed/TimelineMax",
            easing: "vendor/greensock/src/uncompressed/easing/EasePack",
            splitText: "vendor/greensock/src/uncompressed/utils/SplitText",
            statsjs: "vendor/statsjs/stats.min",
            modernizr: "vendor/modernizr/modernizr",
            detectizr: "vendor/detectizr/detectizr",
            rasterize: "vendor/rasterize/rasterizeHTML.allinone",
            soundjs: "vendor/soundjs/soundjs-0.6.0.combined",
            threejs: "vendor/threejs/three",
            threejsCSS: "vendor/threejs/extras/renderers/CSS3DRenderer",
            threejsCopyShader: "vendor/threejs/extras/shaders/CopyShader",
            threejsMaskPass: "vendor/threejs/extras/postprocessing/MaskPass",
            threejsShaderPass: "vendor/threejs/extras/postprocessing/ShaderPass",
            threejsRenderPass: "vendor/threejs/extras/postprocessing/RenderPass",
            threejsFX: "vendor/threejs/extras/postprocessing/EffectComposer",
            threejsNoiseShader: "postprocessing/NoiseShader",
            threejsNoisePass: "postprocessing/NoisePass",
            createjsEventDispatcher: "vendor/createjsevents/EventDispatcher",
            createjsEvent: "vendor/createjsevents/Event",
            createjsErrorEvent: "vendor/createjsevents/ErrorEvent",
            html: "../html"
        },
        shim: {
            jquery: {
                exports: "$"
            },
            underscore: {
                exports: "_"
            },
            backbone: {
                deps: ["underscore", "jquery"],
                exports: "Backbone"
            },
            easeljs: {
                exports: "createjs"
            },
            preloadjs: {
                exports: "createjs"
            },
            soundjs: {
                exports: "createjs"
            },
            modernizr: {
                exports: "Modernizr"
            },
            snapsvg: {
                exports: "Snap"
            },
            tweenMax: {
                exports: "TweenMax"
            },
            timelineMax: {
                exports: "TimelineMax",
                deps: ["tweenMax"]
            },
            easing: {
                exports: "easing"
            },
            threejs: {
                exports: "THREE"
            },
            threejsCSS: {
                exports: "THREE",
                deps: ["threejs"]
            },
            threejsCopyShader: {
                exports: "THREE",
                deps: ["threejs"]
            },
            threejsNoisePass: {
                exports: "THREE",
                deps: ["threejs", "threejsNoiseShader"]
            },
            threejsNoiseShader: {
                exports: "THREE",
                deps: ["threejs"]
            },
            threejsRenderPass: {
                exports: "THREE",
                deps: ["threejs"]
            },
            threejsShaderPass: {
                exports: "THREE",
                deps: ["threejs"]
            },
            threejsMaskPass: {
                exports: "THREE",
                deps: ["threejs"]
            },
            threejsFX: {
                exports: "THREE",
                deps: ["threejs", "threejsCopyShader", "threejsNoisePass", "threejsNoiseShader", "threejsRenderPass", "threejsMaskPass", "threejsShaderPass"]
            },
            createjsEventDispatcher: {
                exports: "createjs",
                deps: ["createjsEvent"]
            }
        }
    }), require(["jquery", "underscore", "backbone", "threejs", "views/AppView", "views/PreloaderView", "AppRouter", "tracking/Tracking", "events/appEvents"], function(a, b, c, d, e, f, g, h, i) {
        var j, k, l;
        Object.keys(d.ShaderLib).forEach(function(a) {
            d.ShaderLib[a].fragmentShader = d.ShaderLib[a].fragmentShader.replace("#extension GL_EXT_frag_depth : enable", "")
        }), k = new f({
            el: "#preloader-container"
        }), k.render(), i.once("ready", function() {
            k.hide(), l = new g({
                app: j
            }), c.history.start(), j.render()
        }), j = new e({
            el: "#app-container"
        });
        try {
            var m = window.screen.lockOrientation || window.screen.msLockOrientation || window.screen.mozLockOrientation;
            m ? m.apply(window.screen, ["landscape"]) : window.screen.orientation.lock && "desktop" != Detectizr.device.type && "chrome" == Detectizr.browser.name && window.screen.orientation.lock("landscape")
        } catch (n) {
            console.log("no lock available")
        }
        h.init("theBoat")
    })), define("main", function() {});